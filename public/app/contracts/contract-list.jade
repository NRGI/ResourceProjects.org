.container
    .page-header
        h1 Contracts
            small

    nrgi-list-nav(
    page="page"
    type="record_type"
    show="show_count"
    count="count"
    limit="limit"
    last="last"
    next="next"
    prev="prev"
    first="first"
    select="select")

    table.table.table-striped(about='http://resourceprojects.org/contracts',ts-wrapper)
        thead
            tr
                th.tablesort-sortable-th(ts-criteria='contract_id') RC-ID
                th.tablesort-sortable-th(ts-criteria='rc_info[rc_info.length-1].contract_country.code') Country
                th.tablesort-sortable-th(ts-criteria='rc_info[rc_info.length-1].contract_type') Commodity Type
                th.tablesort-sortable-th(ts-criteria='commodity[commodity.length-1].commodity_name') Commodity
                th.tablesort-sortable-th(ts-criteria='projects|parseInt') No. Projects
        tbody
            tr(ng-repeat="contract in contracts",ts-repeat)
                td.contract_id: a(href='contract/{{ contract._id }}')
                    span(ng-bind-html="contract.contract_id | sanitize")
                td.contract_countries: text(ng-repeat="rc_info in contract.rc_info")
                    a(href='country/{{ rc_info.contract_country.code }}')
                        span(ng-bind-html="rc_info.contract_country.name | sanitize")
                td.commodity_type: text(ng-repeat="rc_info in contract.rc_info")
                    span(ng-bind="rc_info.contract_type[rc_info.contract_type.length-1].toString()")
                td.contract_commodities: text(ng-repeat="commodity in contract.commodity")
                    a(href='commodity/{{ commodity._id }}')
                        span(ng-bind="commodity.commodity_name")
                td.contract_projects: span {{contract.projects}}

    nrgi-list-nav(
    page="page"
    type="record_type"
    show="show_count"
    count="count"
    limit="limit"
    last="last"
    next="next"
    prev="prev"
    first="first"
    select="select")