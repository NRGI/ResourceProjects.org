if(function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b="length"in a&&a.length,c=_.type(a);return"function"!==c&&!_.isWindow(a)&&(!(1!==a.nodeType||!b)||("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a))}function d(a,b,c){if(_.isFunction(b))return _.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return _.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ha.test(b))return _.filter(b,a,c);b=_.filter(b,a)}return _.grep(a,function(a){return U.call(b,a)>=0!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b=oa[a]={};return _.each(a.match(na)||[],function(a,c){b[c]=!0}),b}function g(){Z.removeEventListener("DOMContentLoaded",g,!1),a.removeEventListener("load",g,!1),_.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=_.expando+h.uid++}function i(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(ua,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c||"false"!==c&&("null"===c?null:+c+""===c?+c:ta.test(c)?_.parseJSON(c):c)}catch(e){}sa.set(a,b,c)}else c=void 0;return c}function j(){return!0}function k(){return!1}function l(){try{return Z.activeElement}catch(a){}}function m(a,b){return _.nodeName(a,"table")&&_.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function n(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function o(a){var b=Ka.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function p(a,b){for(var c=0,d=a.length;c<d;c++)ra.set(a[c],"globalEval",!b||ra.get(b[c],"globalEval"))}function q(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(ra.hasData(a)&&(f=ra.access(a),g=ra.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)_.event.add(b,e,j[e][c])}sa.hasData(a)&&(h=sa.access(a),i=_.extend({},h),sa.set(b,i))}}function r(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&_.nodeName(a,b)?_.merge([a],c):c}function s(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ya.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function t(b,c){var d,e=_(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:_.css(e[0],"display");return e.detach(),f}function u(a){var b=Z,c=Oa[a];return c||(c=t(a,b),"none"!==c&&c||(Na=(Na||_("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Na[0].contentDocument,b.write(),b.close(),c=t(a,b),Na.detach()),Oa[a]=c),c}function v(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||_.contains(a.ownerDocument,a)||(g=_.style(a,b)),Qa.test(g)&&Pa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function w(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function x(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Xa.length;e--;)if(b=Xa[e]+c,b in a)return b;return d}function y(a,b,c){var d=Ta.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;f<4;f+=2)"margin"===c&&(g+=_.css(a,c+wa[f],!0,e)),d?("content"===c&&(g-=_.css(a,"padding"+wa[f],!0,e)),"margin"!==c&&(g-=_.css(a,"border"+wa[f]+"Width",!0,e))):(g+=_.css(a,"padding"+wa[f],!0,e),"padding"!==c&&(g+=_.css(a,"border"+wa[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ra(a),g="border-box"===_.css(a,"boxSizing",!1,f);if(e<=0||null==e){if(e=v(a,b,f),(e<0||null==e)&&(e=a.style[b]),Qa.test(e))return e;d=g&&(Y.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a,b){for(var c,d,e,f=[],g=0,h=a.length;g<h;g++)d=a[g],d.style&&(f[g]=ra.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&xa(d)&&(f[g]=ra.access(d,"olddisplay",u(d.nodeName)))):(e=xa(d),"none"===c&&e||ra.set(d,"olddisplay",e?c:_.css(d,"display"))));for(g=0;g<h;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function C(a,b,c,d,e){return new C.prototype.init(a,b,c,d,e)}function D(){return setTimeout(function(){Ya=void 0}),Ya=_.now()}function E(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=wa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function F(a,b,c){for(var d,e=(cb[b]||[]).concat(cb["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function G(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&xa(a),p=ra.get(a,"fxshow");c.queue||(h=_._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,_.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=_.css(a,"display"),k="none"===j?ra.get(a,"olddisplay")||u(a.nodeName):j,"inline"===k&&"none"===_.css(a,"float")&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],$a.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||_.style(a,d)}else j=void 0;if(_.isEmptyObject(m))"inline"===("none"===j?u(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=ra.access(a,"fxshow",{}),f&&(p.hidden=!o),o?_(a).show():l.done(function(){_(a).hide()}),l.done(function(){var b;ra.remove(a,"fxshow");for(b in m)_.style(a,b,m[b])});for(d in m)g=F(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function H(a,b){var c,d,e,f,g;for(c in a)if(d=_.camelCase(c),e=b[d],f=a[c],_.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=_.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function I(a,b,c){var d,e,f=0,g=bb.length,h=_.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Ya||D(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:_.extend({},b),opts:_.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ya||D(),duration:c.duration,tweens:[],createTween:function(b,c){var d=_.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(H(k,j.opts.specialEasing);f<g;f++)if(d=bb[f].call(j,a,k,j.opts))return d;return _.map(k,F,j),_.isFunction(j.opts.start)&&j.opts.start.call(a,j),_.fx.timer(_.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function J(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(na)||[];if(_.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function K(a,b,c,d){function e(h){var i;return f[h]=!0,_.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===tb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function L(a,b){var c,d,e=_.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&_.extend(!0,a,d),a}function M(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function N(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function O(a,b,c,d){var e;if(_.isArray(b))_.each(b,function(b,e){c||yb.test(a)?d(a,e):O(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==_.type(b))d(a,b);else for(e in b)O(a+"["+e+"]",b[e],c,d)}function P(a){return _.isWindow(a)?a:9===a.nodeType&&a.defaultView}var Q=[],R=Q.slice,S=Q.concat,T=Q.push,U=Q.indexOf,V={},W=V.toString,X=V.hasOwnProperty,Y={},Z=a.document,$="2.1.4",_=function(a,b){return new _.fn.init(a,b)},aa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ba=/^-ms-/,ca=/-([\da-z])/gi,da=function(a,b){return b.toUpperCase()};_.fn=_.prototype={jquery:$,constructor:_,selector:"",length:0,toArray:function(){return R.call(this)},get:function(a){return null!=a?a<0?this[a+this.length]:this[a]:R.call(this)},pushStack:function(a){var b=_.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return _.each(this,a,b)},map:function(a){return this.pushStack(_.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:T,sort:Q.sort,splice:Q.splice},_.extend=_.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||_.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(_.isPlainObject(d)||(e=_.isArray(d)))?(e?(e=!1,f=c&&_.isArray(c)?c:[]):f=c&&_.isPlainObject(c)?c:{},g[b]=_.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},_.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===_.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!_.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"===_.type(a)&&!a.nodeType&&!_.isWindow(a)&&!(a.constructor&&!X.call(a.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?V[W.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=_.trim(a),a&&(1===a.indexOf("use strict")?(b=Z.createElement("script"),b.text=a,Z.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(ba,"ms-").replace(ca,da)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;f<g&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;f<g&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(aa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?_.merge(d,"string"==typeof a?[a]:a):T.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:U.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;f<g;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return S.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),_.isFunction(a))return d=R.call(arguments,2),e=function(){return a.apply(b||this,d.concat(R.call(arguments)))},e.guid=a.guid=a.guid||_.guid++,e},now:Date.now,support:Y}),_.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){V["[object "+b+"]"]=b.toLowerCase()});var ea=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sa.exec(a)))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ua,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=ta.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;e<f;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];h<e;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;d<e&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,h<d&&s(a.slice(h,d)),d<e&&s(a=a.slice(d)),d<e&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea=da.replace("w","w#"),fa="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+ca+"*\\]",ga=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(ca+"+","g"),ia=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ja=new RegExp("^"+ca+"*,"+ca+"*"),ka=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),la=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da.replace("w","w*")+")"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(ya){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=ra.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){if(I)return b.getElementsByClassName(a)},K=[],J=[],(v.qsa=ra.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=ra.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ga)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?aa(D,a)-aa(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),v.matchesSelector&&I&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(va,wa),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[c<0?c+b:c]}),even:j(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){d&&!(e=ja.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in w.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(va,wa),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);_.find=ea,_.expr=ea.selectors,_.expr[":"]=_.expr.pseudos,_.unique=ea.uniqueSort,_.text=ea.getText,_.isXMLDoc=ea.isXML,_.contains=ea.contains;var fa=_.expr.match.needsContext,ga=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ha=/^.[^:#\[\.,]*$/;_.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?_.find.matchesSelector(d,a)?[d]:[]:_.find.matches(a,_.grep(b,function(a){return 1===a.nodeType}))},_.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(_(a).filter(function(){
for(b=0;b<c;b++)if(_.contains(e[b],this))return!0}));for(b=0;b<c;b++)_.find(a,e[b],d);return d=this.pushStack(c>1?_.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&fa.test(a)?_(a):a||[],!1).length}});var ia,ja=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ka=_.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ja.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||ia).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof _?b[0]:b,_.merge(this,_.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:Z,!0)),ga.test(c[1])&&_.isPlainObject(b))for(c in b)_.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=Z.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=Z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):_.isFunction(a)?"undefined"!=typeof ia.ready?ia.ready(a):a(_):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),_.makeArray(a,this))};ka.prototype=_.fn,ia=_(Z);var la=/^(?:parents|prev(?:Until|All))/,ma={children:!0,contents:!0,next:!0,prev:!0};_.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&_(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),_.fn.extend({has:function(a){var b=_(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(_.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=fa.test(a)||"string"!=typeof a?_(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&_.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?_.unique(f):f)},index:function(a){return a?"string"==typeof a?U.call(_(a),this[0]):U.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(_.unique(_.merge(this.get(),_(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),_.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return _.dir(a,"parentNode")},parentsUntil:function(a,b,c){return _.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return _.dir(a,"nextSibling")},prevAll:function(a){return _.dir(a,"previousSibling")},nextUntil:function(a,b,c){return _.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return _.dir(a,"previousSibling",c)},siblings:function(a){return _.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return _.sibling(a.firstChild)},contents:function(a){return a.contentDocument||_.merge([],a.childNodes)}},function(a,b){_.fn[a]=function(c,d){var e=_.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=_.filter(d,e)),this.length>1&&(ma[a]||_.unique(e),la.test(a)&&e.reverse()),this.pushStack(e)}});var na=/\S+/g,oa={};_.Callbacks=function(a){a="string"==typeof a?oa[a]||f(a):_.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(b=a.memory&&f,c=!0,h=e||0,e=0,g=i.length,d=!0;i&&h<g;h++)if(i[h].apply(f[0],f[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,i&&(j?j.length&&k(j.shift()):b?i=[]:l.disable())},l={add:function(){if(i){var c=i.length;!function f(b){_.each(b,function(b,c){var d=_.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),d?g=i.length:b&&(e=c,k(b))}return this},remove:function(){return i&&_.each(arguments,function(a,b){for(var c;(c=_.inArray(b,i,c))>-1;)i.splice(c,1),d&&(c<=g&&g--,c<=h&&h--)}),this},has:function(a){return a?_.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],g=0,this},disable:function(){return i=j=b=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,b||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return!i||c&&!j||(b=b||[],b=[a,b.slice?b.slice():b],d?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},_.extend({Deferred:function(a){var b=[["resolve","done",_.Callbacks("once memory"),"resolved"],["reject","fail",_.Callbacks("once memory"),"rejected"],["notify","progress",_.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return _.Deferred(function(c){_.each(b,function(b,f){var g=_.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&_.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?_.extend(a,d):d}},e={};return d.pipe=d.then,_.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=R.call(arguments),g=f.length,h=1!==g||a&&_.isFunction(a.promise)?g:0,i=1===h?a:_.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?R.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);e<g;e++)f[e]&&_.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var pa;_.fn.ready=function(a){return _.ready.promise().done(a),this},_.extend({isReady:!1,readyWait:1,holdReady:function(a){a?_.readyWait++:_.ready(!0)},ready:function(a){(a===!0?--_.readyWait:_.isReady)||(_.isReady=!0,a!==!0&&--_.readyWait>0||(pa.resolveWith(Z,[_]),_.fn.triggerHandler&&(_(Z).triggerHandler("ready"),_(Z).off("ready"))))}}),_.ready.promise=function(b){return pa||(pa=_.Deferred(),"complete"===Z.readyState?setTimeout(_.ready):(Z.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1))),pa.promise(b)},_.ready.promise();var qa=_.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===_.type(c)){e=!0;for(h in c)_.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,_.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(_(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};_.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},h.uid=1,h.accepts=_.acceptData,h.prototype={key:function(a){if(!h.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=h.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,_.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(_.isEmptyObject(f))_.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,_.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{_.isArray(b)?d=b.concat(b.map(_.camelCase)):(e=_.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(na)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!_.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var ra=new h,sa=new h,ta=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ua=/([A-Z])/g;_.extend({hasData:function(a){return sa.hasData(a)||ra.hasData(a)},data:function(a,b,c){return sa.access(a,b,c)},removeData:function(a,b){sa.remove(a,b)},_data:function(a,b,c){return ra.access(a,b,c)},_removeData:function(a,b){ra.remove(a,b)}}),_.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=sa.get(f),1===f.nodeType&&!ra.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=_.camelCase(d.slice(5)),i(f,d,e[d])));ra.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){sa.set(this,a)}):qa(this,function(b){var c,d=_.camelCase(a);if(f&&void 0===b){if(c=sa.get(f,a),void 0!==c)return c;if(c=sa.get(f,d),void 0!==c)return c;if(c=i(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=sa.get(this,d);sa.set(this,d,b),a.indexOf("-")!==-1&&void 0!==c&&sa.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){sa.remove(this,a)})}}),_.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=ra.get(a,b),c&&(!d||_.isArray(c)?d=ra.access(a,b,_.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=_.queue(a,b),d=c.length,e=c.shift(),f=_._queueHooks(a,b),g=function(){_.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ra.get(a,c)||ra.access(a,c,{empty:_.Callbacks("once memory").add(function(){ra.remove(a,[b+"queue",c])})})}}),_.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?_.queue(this[0],a):void 0===b?this:this.each(function(){var c=_.queue(this,a,b);_._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&_.dequeue(this,a)})},dequeue:function(a){return this.each(function(){_.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=_.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=ra.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var va=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wa=["Top","Right","Bottom","Left"],xa=function(a,b){return a=b||a,"none"===_.css(a,"display")||!_.contains(a.ownerDocument,a)},ya=/^(?:checkbox|radio)$/i;!function(){var a=Z.createDocumentFragment(),b=a.appendChild(Z.createElement("div")),c=Z.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),Y.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var za="undefined";Y.focusinBubbles="onfocusin"in a;var Aa=/^key/,Ba=/^(?:mouse|pointer|contextmenu)|click/,Ca=/^(?:focusinfocus|focusoutblur)$/,Da=/^([^.]*)(?:\.(.+)|)$/;_.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=_.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof _!==za&&_.event.triggered!==b.type?_.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(na)||[""],j=b.length;j--;)h=Da.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=_.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=_.event.special[n]||{},k=_.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&_.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),_.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.hasData(a)&&ra.get(a);if(q&&(i=q.events)){for(b=(b||"").match(na)||[""],j=b.length;j--;)if(h=Da.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=_.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||_.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)_.event.remove(a,n+b[j],c,d,!0);_.isEmptyObject(i)&&(delete q.handle,ra.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||Z],n=X.call(b,"type")?b.type:b,o=X.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||Z,3!==d.nodeType&&8!==d.nodeType&&!Ca.test(n+_.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[_.expando]?b:new _.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:_.makeArray(c,[b]),l=_.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!_.isWindow(d)){for(i=l.delegateType||n,Ca.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||Z)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(ra.get(g,"events")||{})[b.type]&&ra.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&_.acceptData(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!_.acceptData(d)||j&&_.isFunction(d[n])&&!_.isWindow(d)&&(h=d[j],h&&(d[j]=null),_.event.triggered=n,d[n](),_.event.triggered=void 0,h&&(d[j]=h)),b.result}},dispatch:function(a){a=_.event.fix(a);var b,c,d,e,f,g=[],h=R.call(arguments),i=(ra.get(this,"events")||{})[a.type]||[],j=_.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=_.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(f.namespace)||(a.handleObj=f,a.data=f.data,d=((_.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;c<h;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?_(e,this).index(i)>=0:_.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||Z,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[_.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ba.test(e)?this.mouseHooks:Aa.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new _.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=Z),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==l()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===l()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&_.nodeName(this,"input"))return this.click(),!1},_default:function(a){return _.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=_.extend(new _.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?_.event.trigger(e,null,b):_.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},_.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},_.Event=function(a,b){return this instanceof _.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?j:k):this.type=a,b&&_.extend(this,b),this.timeStamp=a&&a.timeStamp||_.now(),void(this[_.expando]=!0)):new _.Event(a,b)},_.Event.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=j,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=j,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=j,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){_.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||_.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),Y.focusinBubbles||_.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){_.event.simulate(b,a.target,_.event.fix(a),!0)};_.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=ra.access(d,b);e||d.addEventListener(a,c,!0),ra.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=ra.access(d,b)-1;e?ra.access(d,b,e):(d.removeEventListener(a,c,!0),ra.remove(d,b))}}}),_.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=k;else if(!d)return this;return 1===e&&(f=d,d=function(a){return _().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=_.guid++)),this.each(function(){_.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,_(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=k),this.each(function(){_.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){_.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return _.event.trigger(a,b,c,!0)}});var Ea=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Fa=/<([\w:]+)/,Ga=/<|&#?\w+;/,Ha=/<(?:script|style|link)/i,Ia=/checked\s*(?:[^=]|=\s*.checked.)/i,Ja=/^$|\/(?:java|ecma)script/i,Ka=/^true\/(.*)/,La=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ma.optgroup=Ma.option,Ma.tbody=Ma.tfoot=Ma.colgroup=Ma.caption=Ma.thead,Ma.th=Ma.td,_.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=_.contains(a.ownerDocument,a);if(!(Y.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||_.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;d<e;d++)s(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;d<e;d++)q(f[d],g[d]);else q(a,h);return g=r(h,"script"),g.length>0&&p(g,!i&&r(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;m<n;m++)if(e=a[m],e||0===e)if("object"===_.type(e))_.merge(l,e.nodeType?[e]:e);else if(Ga.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(Fa.exec(e)||["",""])[1].toLowerCase(),h=Ma[g]||Ma._default,f.innerHTML=h[1]+e.replace(Ea,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;_.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||_.inArray(e,d)===-1)&&(i=_.contains(e.ownerDocument,e),f=r(k.appendChild(e),"script"),i&&p(f),c))for(j=0;e=f[j++];)Ja.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=_.event.special,g=0;void 0!==(c=a[g]);g++){if(_.acceptData(c)&&(e=c[ra.expando],e&&(b=ra.cache[e]))){if(b.events)for(d in b.events)f[d]?_.event.remove(c,d):_.removeEvent(c,d,b.handle);ra.cache[e]&&delete ra.cache[e]}delete sa.cache[c[sa.expando]]}}}),_.fn.extend({text:function(a){return qa(this,function(a){return void 0===a?_.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?_.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||_.cleanData(r(c)),c.parentNode&&(b&&_.contains(c.ownerDocument,c)&&p(r(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(_.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return _.clone(this,a,b)})},html:function(a){return qa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Ha.test(a)&&!Ma[(Fa.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ea,"<$1></$2>");try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(_.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,_.cleanData(r(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=S.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],p=_.isFunction(m);if(p||j>1&&"string"==typeof m&&!Y.checkClone&&Ia.test(m))return this.each(function(c){var d=k.eq(c);p&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(c=_.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(e=_.map(r(c,"script"),n),f=e.length;i<j;i++)g=c,i!==l&&(g=_.clone(g,!0,!0),f&&_.merge(e,r(g,"script"))),b.call(this[i],g,i);if(f)for(h=e[e.length-1].ownerDocument,_.map(e,o),i=0;i<f;i++)g=e[i],Ja.test(g.type||"")&&!ra.access(g,"globalEval")&&_.contains(h,g)&&(g.src?_._evalUrl&&_._evalUrl(g.src):_.globalEval(g.textContent.replace(La,"")))}return this}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){_.fn[a]=function(a){for(var c,d=[],e=_(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),_(e[g])[b](c),T.apply(d,c.get());return this.pushStack(d)}});var Na,Oa={},Pa=/^margin/,Qa=new RegExp("^("+va+")(?!px)[a-z%]+$","i"),Ra=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};!function(){function b(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",g.innerHTML="",e.appendChild(f);var b=a.getComputedStyle(g,null);c="1%"!==b.top,d="4px"===b.width,e.removeChild(f)}var c,d,e=Z.documentElement,f=Z.createElement("div"),g=Z.createElement("div");g.style&&(g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",f.appendChild(g),a.getComputedStyle&&_.extend(Y,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},reliableMarginRight:function(){var b,c=g.appendChild(Z.createElement("div"));return c.style.cssText=g.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.removeChild(c),b}}))}(),_.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Sa=/^(none|table(?!-c[ea]).+)/,Ta=new RegExp("^("+va+")(.*)$","i"),Ua=new RegExp("^([+-])=("+va+")","i"),Va={position:"absolute",visibility:"hidden",display:"block"},Wa={letterSpacing:"0",fontWeight:"400"},Xa=["Webkit","O","Moz","ms"];_.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=v(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=_.camelCase(b),i=a.style;return b=_.cssProps[h]||(_.cssProps[h]=x(i,h)),g=_.cssHooks[b]||_.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ua.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(_.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||_.cssNumber[h]||(c+="px"),Y.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=_.camelCase(b);return b=_.cssProps[h]||(_.cssProps[h]=x(a.style,h)),g=_.cssHooks[b]||_.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=v(a,b,d)),"normal"===e&&b in Wa&&(e=Wa[b]),""===c||c?(f=parseFloat(e),c===!0||_.isNumeric(f)?f||0:e):e}}),_.each(["height","width"],function(a,b){_.cssHooks[b]={get:function(a,c,d){if(c)return Sa.test(_.css(a,"display"))&&0===a.offsetWidth?_.swap(a,Va,function(){return A(a,b,d)}):A(a,b,d)},set:function(a,c,d){var e=d&&Ra(a);return y(a,c,d?z(a,b,d,"border-box"===_.css(a,"boxSizing",!1,e),e):0)}}}),_.cssHooks.marginRight=w(Y.reliableMarginRight,function(a,b){if(b)return _.swap(a,{display:"inline-block"},v,[a,"marginRight"])}),_.each({margin:"",padding:"",border:"Width"},function(a,b){_.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+wa[d]+b]=f[d]||f[d-2]||f[0];return e}},Pa.test(a)||(_.cssHooks[a+b].set=y)}),_.fn.extend({css:function(a,b){return qa(this,function(a,b,c){var d,e,f={},g=0;if(_.isArray(b)){for(d=Ra(a),e=b.length;g<e;g++)f[b[g]]=_.css(a,b[g],!1,d);return f}return void 0!==c?_.style(a,b,c):_.css(a,b)},a,b,arguments.length>1)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){xa(this)?_(this).show():_(this).hide()})}}),_.Tween=C,C.prototype={constructor:C,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(_.cssNumber[c]?"":"px")},cur:function(){var a=C.propHooks[this.prop];return a&&a.get?a.get(this):C.propHooks._default.get(this)},run:function(a){var b,c=C.propHooks[this.prop];return this.options.duration?this.pos=b=_.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=_.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){_.fx.step[a.prop]?_.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[_.cssProps[a.prop]]||_.cssHooks[a.prop])?_.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},_.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},_.fx=C.prototype.init,_.fx.step={};var Ya,Za,$a=/^(?:toggle|show|hide)$/,_a=new RegExp("^(?:([+-])=|)("+va+")([a-z%]*)$","i"),ab=/queueHooks$/,bb=[G],cb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=_a.exec(b),f=e&&e[3]||(_.cssNumber[a]?"":"px"),g=(_.cssNumber[a]||"px"!==f&&+d)&&_a.exec(_.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,_.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};_.Animation=_.extend(I,{tweener:function(a,b){_.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],cb[c]=cb[c]||[],cb[c].unshift(b)},prefilter:function(a,b){b?bb.unshift(a):bb.push(a)}}),_.speed=function(a,b,c){var d=a&&"object"==typeof a?_.extend({},a):{complete:c||!c&&b||_.isFunction(a)&&a,duration:a,easing:c&&b||b&&!_.isFunction(b)&&b};return d.duration=_.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in _.fx.speeds?_.fx.speeds[d.duration]:_.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){_.isFunction(d.old)&&d.old.call(this),d.queue&&_.dequeue(this,d.queue)},d},_.fn.extend({fadeTo:function(a,b,c,d){return this.filter(xa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=_.isEmptyObject(a),f=_.speed(b,c,d),g=function(){var b=I(this,_.extend({},a),f);(e||ra.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=_.timers,g=ra.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ab.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||_.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ra.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=_.timers,g=d?d.length:0;for(c.finish=!0,_.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));
for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),_.each(["toggle","show","hide"],function(a,b){var c=_.fn[b];_.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(E(b,!0),a,d,e)}}),_.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){_.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),_.timers=[],_.fx.tick=function(){var a,b=0,c=_.timers;for(Ya=_.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||_.fx.stop(),Ya=void 0},_.fx.timer=function(a){_.timers.push(a),a()?_.fx.start():_.timers.pop()},_.fx.interval=13,_.fx.start=function(){Za||(Za=setInterval(_.fx.tick,_.fx.interval))},_.fx.stop=function(){clearInterval(Za),Za=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(a,b){return a=_.fx?_.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=Z.createElement("input"),b=Z.createElement("select"),c=b.appendChild(Z.createElement("option"));a.type="checkbox",Y.checkOn=""!==a.value,Y.optSelected=c.selected,b.disabled=!0,Y.optDisabled=!c.disabled,a=Z.createElement("input"),a.value="t",a.type="radio",Y.radioValue="t"===a.value}();var db,eb,fb=_.expr.attrHandle;_.fn.extend({attr:function(a,b){return qa(this,_.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){_.removeAttr(this,a)})}}),_.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===za?_.prop(a,b,c):(1===f&&_.isXMLDoc(a)||(b=b.toLowerCase(),d=_.attrHooks[b]||(_.expr.match.bool.test(b)?eb:db)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=_.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void _.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(na);if(f&&1===a.nodeType)for(;c=f[e++];)d=_.propFix[c]||c,_.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!Y.radioValue&&"radio"===b&&_.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),eb={set:function(a,b,c){return b===!1?_.removeAttr(a,c):a.setAttribute(c,c),c}},_.each(_.expr.match.bool.source.match(/\w+/g),function(a,b){var c=fb[b]||_.find.attr;fb[b]=function(a,b,d){var e,f;return d||(f=fb[b],fb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,fb[b]=f),e}});var gb=/^(?:input|select|textarea|button)$/i;_.fn.extend({prop:function(a,b){return qa(this,_.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[_.propFix[a]||a]})}}),_.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!_.isXMLDoc(a),f&&(b=_.propFix[b]||b,e=_.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||gb.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),Y.optSelected||(_.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});var hb=/[\t\r\n\f]/g;_.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(na)||[];i<j;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hb," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=_.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(na)||[];i<j;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?_.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):_.isFunction(a)?this.each(function(c){_(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=_(this),f=a.match(na)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else c!==za&&"boolean"!==c||(this.className&&ra.set(this,"__className__",this.className),this.className=this.className||a===!1?"":ra.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(hb," ").indexOf(b)>=0)return!0;return!1}});var ib=/\r/g;_.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=_.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,_(this).val()):a,null==e?e="":"number"==typeof e?e+="":_.isArray(e)&&(e=_.map(e,function(a){return null==a?"":a+""})),b=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=_.valHooks[e.type]||_.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ib,""):null==c?"":c)}}}),_.extend({valHooks:{option:{get:function(a){var b=_.find.attr(a,"value");return null!=b?b:_.trim(_.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&(Y.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!_.nodeName(c.parentNode,"optgroup"))){if(b=_(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=_.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=_.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(a,b){if(_.isArray(b))return a.checked=_.inArray(_(a).val(),b)>=0}},Y.checkOn||(_.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),_.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){_.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),_.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var jb=_.now(),kb=/\?/;_.parseJSON=function(a){return JSON.parse(a+"")},_.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return b&&!b.getElementsByTagName("parsererror").length||_.error("Invalid XML: "+a),b};var lb=/#.*$/,mb=/([?&])_=[^&]*/,nb=/^(.*?):[ \t]*([^\r\n]*)$/gm,ob=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pb=/^(?:GET|HEAD)$/,qb=/^\/\//,rb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,sb={},tb={},ub="*/".concat("*"),vb=a.location.href,wb=rb.exec(vb.toLowerCase())||[];_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vb,type:"GET",isLocal:ob.test(wb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":_.parseJSON,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?L(L(a,_.ajaxSettings),b):L(_.ajaxSettings,a)},ajaxPrefilter:J(sb),ajaxTransport:J(tb),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),d=void 0,f=g||"",v.readyState=a>0?4:0,i=a>=200&&a<300||304===a,c&&(s=M(l,v,c)),s=N(l,s,v,i),i?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(_.lastModified[e]=u),u=v.getResponseHeader("etag"),u&&(_.etag[e]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r)):(r=w,!a&&w||(w="error",a<0&&(a=0))),v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--_.active||_.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=_.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?_(m):_.event,o=_.Deferred(),p=_.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=nb.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(t<2)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||vb)+"").replace(lb,"").replace(qb,wb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=_.trim(l.dataType||"*").toLowerCase().match(na)||[""],null==l.crossDomain&&(i=rb.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===wb[1]&&i[2]===wb[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(wb[3]||("http:"===wb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=_.param(l.data,l.traditional)),K(sb,l,b,v),2===t)return v;j=_.event&&l.global,j&&0===_.active++&&_.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!pb.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(kb.test(e)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=mb.test(e)?e.replace(mb,"$1_="+jb++):e+(kb.test(e)?"&":"?")+"_="+jb++)),l.ifModified&&(_.lastModified[e]&&v.setRequestHeader("If-Modified-Since",_.lastModified[e]),_.etag[e]&&v.setRequestHeader("If-None-Match",_.etag[e])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+ub+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);if(d=K(tb,l,b,v)){v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(w){if(!(t<2))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return _.get(a,b,c,"json")},getScript:function(a,b){return _.get(a,void 0,b,"script")}}),_.each(["get","post"],function(a,b){_[b]=function(a,c,d,e){return _.isFunction(c)&&(e=e||d,d=c,c=void 0),_.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),_._evalUrl=function(a){return _.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},_.fn.extend({wrapAll:function(a){var b;return _.isFunction(a)?this.each(function(b){_(this).wrapAll(a.call(this,b))}):(this[0]&&(b=_(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return _.isFunction(a)?this.each(function(b){_(this).wrapInner(a.call(this,b))}):this.each(function(){var b=_(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=_.isFunction(a);return this.each(function(c){_(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){_.nodeName(this,"body")||_(this).replaceWith(this.childNodes)}).end()}}),_.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},_.expr.filters.visible=function(a){return!_.expr.filters.hidden(a)};var xb=/%20/g,yb=/\[\]$/,zb=/\r?\n/g,Ab=/^(?:submit|button|image|reset|file)$/i,Bb=/^(?:input|select|textarea|keygen)/i;_.param=function(a,b){var c,d=[],e=function(a,b){b=_.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=_.ajaxSettings&&_.ajaxSettings.traditional),_.isArray(a)||a.jquery&&!_.isPlainObject(a))_.each(a,function(){e(this.name,this.value)});else for(c in a)O(c,a[c],b,e);return d.join("&").replace(xb,"+")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=_.prop(this,"elements");return a?_.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!_(this).is(":disabled")&&Bb.test(this.nodeName)&&!Ab.test(a)&&(this.checked||!ya.test(a))}).map(function(a,b){var c=_(this).val();return null==c?null:_.isArray(c)?_.map(c,function(a){return{name:b.name,value:a.replace(zb,"\r\n")}}):{name:b.name,value:c.replace(zb,"\r\n")}}).get()}}),_.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cb=0,Db={},Eb={0:200,1223:204},Fb=_.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Db)Db[a]()}),Y.cors=!!Fb&&"withCredentials"in Fb,Y.ajax=Fb=!!Fb,_.ajaxTransport(function(a){var b;if(Y.cors||Fb&&!a.crossDomain)return{send:function(c,d){var e,f=a.xhr(),g=++Cb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Db[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Eb[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Db[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return _.globalEval(a),a}}}),_.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),_.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=_("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),Z.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gb=[],Hb=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gb.pop()||_.expando+"_"+jb++;return this[a]=!0,a}}),_.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=_.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hb,"$1"+e):b.jsonp!==!1&&(b.url+=(kb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||_.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gb.push(e)),g&&_.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),_.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Z;var d=ga.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=_.buildFragment([a],b,e),e&&e.length&&_(e).remove(),_.merge([],d.childNodes))};var Ib=_.fn.load;_.fn.load=function(a,b,c){if("string"!=typeof a&&Ib)return Ib.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=_.trim(a.slice(h)),a=a.slice(0,h)),_.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&_.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?_("<div>").append(_.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){_.fn[b]=function(a){return this.on(b,a)}}),_.expr.filters.animated=function(a){return _.grep(_.timers,function(b){return a===b.elem}).length};var Jb=a.document.documentElement;_.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=_.css(a,"position"),l=_(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=_.css(a,"top"),i=_.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),_.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},_.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){_.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,_.contains(b,d)?(typeof d.getBoundingClientRect!==za&&(e=d.getBoundingClientRect()),c=P(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===_.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),_.nodeName(a[0],"html")||(d=a.offset()),d.top+=_.css(a[0],"borderTopWidth",!0),d.left+=_.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-_.css(c,"marginTop",!0),left:b.left-d.left-_.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Jb;a&&!_.nodeName(a,"html")&&"static"===_.css(a,"position");)a=a.offsetParent;return a||Jb})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;_.fn[b]=function(e){return qa(this,function(b,e,f){var g=P(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),_.each(["top","left"],function(a,b){_.cssHooks[b]=w(Y.pixelPosition,function(a,c){if(c)return c=v(a,b),Qa.test(c)?_(a).position()[b]+"px":c})}),_.each({Height:"height",Width:"width"},function(a,b){_.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){_.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return qa(this,function(b,c,d){var e;return _.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?_.css(b,c,g):_.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),_.fn.size=function(){return this.length},_.fn.andSelf=_.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return _});var Kb=a.jQuery,Lb=a.$;return _.noConflict=function(b){return a.$===_&&(a.$=Lb),b&&a.jQuery===_&&(a.jQuery=Kb),_},typeof b===za&&(a.jQuery=a.$=_),_}),function(a){"use strict";function b(a,b){return b=b||Error,function(){var c,d,e=2,f=arguments,g=f[0],h="["+(a?a+":":"")+g+"] ",i=f[1];for(h+=i.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1),c=b+e;return c<f.length?sa(f[c]):a}),h+="\nhttp://errors.angularjs.org/1.5.8/"+(a?a+"/":"")+g,d=e,c="?";d<f.length;d++,c="&")h+=c+"p"+(d-e)+"="+encodeURIComponent(sa(f[d]));return new b(h)}}function c(a){if(null==a||A(a))return!1;if(Wd(a)||v(a)||Ld&&a instanceof Ld)return!0;var b="length"in Object(a)&&a.length;return w(b)&&(b>=0&&(b-1 in a||a instanceof Array)||"function"==typeof a.item)}function d(a,b,e){var f,g;if(a)if(y(a))for(f in a)"prototype"==f||"length"==f||"name"==f||a.hasOwnProperty&&!a.hasOwnProperty(f)||b.call(e,a[f],f,a);else if(Wd(a)||c(a)){var h="object"!=typeof a;for(f=0,g=a.length;f<g;f++)(h||f in a)&&b.call(e,a[f],f,a)}else if(a.forEach&&a.forEach!==d)a.forEach(b,e,a);else if(u(a))for(f in a)b.call(e,a[f],f,a);else if("function"==typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&b.call(e,a[f],f,a);else for(f in a)Fd.call(a,f)&&b.call(e,a[f],f,a);return a}function e(a,b,c){for(var d=Object.keys(a).sort(),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function f(a){return function(b,c){a(c,b)}}function g(){return++Vd}function h(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function i(a,b,c){for(var d=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(t(g)||y(g))for(var j=Object.keys(g),k=0,l=j.length;k<l;k++){var m=j[k],n=g[m];c&&t(n)?x(n)?a[m]=new Date(n.valueOf()):z(n)?a[m]=new RegExp(n):n.nodeName?a[m]=n.cloneNode(!0):J(n)?a[m]=n.clone():(t(a[m])||(a[m]=Wd(n)?[]:{}),i(a[m],[n],!0)):a[m]=n}}return h(a,d),a}function j(a){return i(a,Od.call(arguments,1),!1)}function k(a){return i(a,Od.call(arguments,1),!0)}function l(a){return parseInt(a,10)}function m(a,b){return j(Object.create(a),b)}function n(){}function o(a){return a}function p(a){return function(){return a}}function q(a){return y(a.toString)&&a.toString!==Rd}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!==a&&"object"==typeof a}function u(a){return null!==a&&"object"==typeof a&&!Sd(a)}function v(a){return"string"==typeof a}function w(a){return"number"==typeof a}function x(a){return"[object Date]"===Rd.call(a)}function y(a){return"function"==typeof a}function z(a){return"[object RegExp]"===Rd.call(a)}function A(a){return a&&a.window===a}function B(a){return a&&a.$evalAsync&&a.$watch}function C(a){return"[object File]"===Rd.call(a)}function D(a){return"[object FormData]"===Rd.call(a)}function E(a){return"[object Blob]"===Rd.call(a)}function F(a){return"boolean"==typeof a}function G(a){return a&&y(a.then)}function H(a){return a&&w(a.length)&&Xd.test(Rd.call(a))}function I(a){return"[object ArrayBuffer]"===Rd.call(a)}function J(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function K(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function L(a){return Gd(a.nodeName||a[0]&&a[0].nodeName)}function M(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),c}function N(a,b){function c(a,b){var c,d=b.$$hashKey;if(Wd(a))for(var f=0,g=a.length;f<g;f++)b.push(e(a[f]));else if(u(a))for(c in a)b[c]=e(a[c]);else if(a&&"function"==typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&(b[c]=e(a[c]));else for(c in a)Fd.call(a,c)&&(b[c]=e(a[c]));return h(b,d),b}function e(a){if(!t(a))return a;var b=g.indexOf(a);if(b!==-1)return i[b];if(A(a)||B(a))throw Td("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var d=!1,e=f(a);return void 0===e&&(e=Wd(a)?[]:Object.create(Sd(a)),d=!0),g.push(a),i.push(e),d?c(a,e):e}function f(a){switch(Rd.call(a)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new a.constructor(e(a.buffer),a.byteOffset,a.length);case"[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);return new Uint8Array(b).set(new Uint8Array(a)),b}return a.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new a.constructor(a.valueOf());case"[object RegExp]":var c=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]);return c.lastIndex=a.lastIndex,c;case"[object Blob]":return new a.constructor([a],{type:a.type})}if(y(a.cloneNode))return a.cloneNode(!0)}var g=[],i=[];if(b){if(H(b)||I(b))throw Td("cpta","Can't copy! TypedArray destination cannot be mutated.");if(a===b)throw Td("cpi","Can't copy! Source and destination are identical.");return Wd(b)?b.length=0:d(b,function(a,c){"$$hashKey"!==c&&delete b[c]}),g.push(a),i.push(b),c(a,b)}return e(a)}function O(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c,d,e,f=typeof a,g=typeof b;if(f==g&&"object"==f){if(!Wd(a)){if(x(a))return!!x(b)&&O(a.getTime(),b.getTime());if(z(a))return!!z(b)&&a.toString()==b.toString();if(B(a)||B(b)||A(a)||A(b)||Wd(b)||x(b)||z(b))return!1;e=oa();for(d in a)if("$"!==d.charAt(0)&&!y(a[d])){if(!O(a[d],b[d]))return!1;e[d]=!0}for(d in b)if(!(d in e)&&"$"!==d.charAt(0)&&s(b[d])&&!y(b[d]))return!1;return!0}if(!Wd(b))return!1;if((c=a.length)==b.length){for(d=0;d<c;d++)if(!O(a[d],b[d]))return!1;return!0}}return!1}function P(a,b,c){return a.concat(Od.call(b,c))}function Q(a,b){return Od.call(a,b||0)}function R(a,b){var c=arguments.length>2?Q(arguments,2):[];return!y(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,P(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function S(b,c){var d=c;return"string"==typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?d=void 0:A(c)?d="$WINDOW":c&&a.document===c?d="$DOCUMENT":B(c)&&(d="$SCOPE"),d}function T(a,b){if(!r(a))return w(b)||(b=b?2:null),JSON.stringify(a,S,b)}function U(a){return v(a)?JSON.parse(a):a}function V(a,b){a=a.replace(ae,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function W(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function X(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset(),e=V(b,d);return W(a,c*(e-d))}function Y(a){a=Ld(a).clone();try{a.empty()}catch(b){}var c=Ld("<div>").append(a).html();try{return a[0].nodeType===ge?Gd(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Gd(b)})}catch(b){return Gd(c)}}function Z(a){try{return decodeURIComponent(a)}catch(b){}}function $(a){var b={};return d((a||"").split("&"),function(a){var c,d,e;a&&(d=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),c!==-1&&(d=a.substring(0,c),e=a.substring(c+1)),d=Z(d),s(d)&&(e=!s(e)||Z(e),Fd.call(b,d)?Wd(b[d])?b[d].push(e):b[d]=[b[d],e]:b[d]=e))}),b}function _(a){var b=[];return d(a,function(a,c){Wd(a)?d(a,function(a){b.push(ba(c,!0)+(a===!0?"":"="+ba(a,!0)))}):b.push(ba(c,!0)+(a===!0?"":"="+ba(a,!0)))}),b.length?b.join("&"):""}function aa(a){return ba(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ba(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function ca(a,b){var c,d,e=be.length;for(d=0;d<e;++d)if(c=be[d]+b,v(c=a.getAttribute(c)))return c;return null}function da(a,b){var c,e,f={};d(be,function(b){var d=b+"app";!c&&a.hasAttribute&&a.hasAttribute(d)&&(c=a,e=a.getAttribute(d))}),d(be,function(b){var d,f=b+"app";!c&&(d=a.querySelector("["+f.replace(":","\\:")+"]"))&&(c=d,e=d.getAttribute(f))}),c&&(f.strictDi=null!==ca(c,"strict-di"),b(c,e?[e]:[],f))}function ea(b,c,e){t(e)||(e={});var f={strictDi:!1};e=j(f,e);var g=function(){if(b=Ld(b),b.injector()){var d=b[0]===a.document?"document":Y(b);throw Td("btstrpd","App already bootstrapped with this element '{0}'",d.replace(/</,"&lt;").replace(/>/,"&gt;"))}c=c||[],c.unshift(["$provide",function(a){a.value("$rootElement",b)}]),e.debugInfoEnabled&&c.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),c.unshift("ng");var f=db(c,e.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},h=/^NG_ENABLE_DEBUG_INFO!/,i=/^NG_DEFER_BOOTSTRAP!/;return a&&h.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(h,"")),a&&!i.test(a.name)?g():(a.name=a.name.replace(i,""),Ud.resumeBootstrap=function(a){return d(a,function(a){c.push(a)}),g()},void(y(Ud.resumeDeferredBootstrap)&&Ud.resumeDeferredBootstrap()))}function fa(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function ga(a){var b=Ud.element(a).injector();if(!b)throw Td("test","no injector found for element argument to getTestability");return b.get("$$testability")}function ha(a,b){return b=b||"_",a.replace(ce,function(a,c){return(c?b:"")+a.toLowerCase()})}function ia(){var b;if(!de){var c=_d();Md=r(c)?a.jQuery:c?a[c]:void 0,Md&&Md.fn.on?(Ld=Md,j(Md.fn,{scope:ze.scope,isolateScope:ze.isolateScope,controller:ze.controller,injector:ze.injector,inheritedData:ze.inheritedData}),b=Md.cleanData,Md.cleanData=function(a){for(var c,d,e=0;null!=(d=a[e]);e++)c=Md._data(d,"events"),c&&c.$destroy&&Md(d).triggerHandler("$destroy");b(a)}):Ld=Da,Ud.element=Ld,de=!0}}function ja(a,b,c){if(!a)throw Td("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function ka(a,b,c){return c&&Wd(a)&&(a=a[a.length-1]),ja(y(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function la(a,b){if("hasOwnProperty"===a)throw Td("badname","hasOwnProperty is not a valid {0} name",b)}function ma(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;h<g;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&y(a)?R(f,a):a}function na(a){for(var b,c=a[0],d=a[a.length-1],e=1;c!==d&&(c=c.nextSibling);e++)(b||a[e]!==c)&&(b||(b=Ld(Od.call(a,0,e))),b.push(c));return b||a}function oa(){return Object.create(null)}function pa(a){function c(a,b,c){return a[b]||(a[b]=c())}var d=b("$injector"),e=b("ng"),f=c(a,"angular",Object);return f.$$minErr=f.$$minErr||b,c(f,"module",function(){var a={};return function(b,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(b,"module"),f&&a.hasOwnProperty(b)&&(a[b]=null),c(a,b,function(){function a(a,b,c,d){return d||(d=e),function(){return d[c||"push"]([a,b,arguments]),k}}function c(a,c){return function(d,f){return f&&y(f)&&(f.$$moduleName=b),e.push([a,c,arguments]),k}}if(!f)throw d("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",b);var e=[],h=[],i=[],j=a("$injector","invoke","push",h),k={_invokeQueue:e,_configBlocks:h,_runBlocks:i,requires:f,name:b,provider:c("$provide","provider"),factory:c("$provide","factory"),service:c("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:c("$provide","decorator"),animation:c("$animateProvider","register"),filter:c("$filterProvider","register"),controller:c("$controllerProvider","register"),directive:c("$compileProvider","directive"),component:c("$compileProvider","component"),config:j,run:function(a){return i.push(a),this}};return g&&j(g),k})}})}function qa(a,b){if(Wd(a)){b=b||[];for(var c=0,d=a.length;c<d;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var e in a)"$"===e.charAt(0)&&"$"===e.charAt(1)||(b[e]=a[e])}return b||a}function ra(a){var b=[];return JSON.stringify(a,function(a,c){if(c=S(a,c),t(c)){if(b.indexOf(c)>=0)return"...";b.push(c)}return c})}function sa(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):r(a)?"undefined":"string"!=typeof a?ra(a):a}function ta(c){j(c,{bootstrap:ea,copy:N,extend:j,merge:k,equals:O,element:Ld,forEach:d,injector:db,noop:n,bind:R,toJson:T,fromJson:U,identity:o,
isUndefined:r,isDefined:s,isString:v,isFunction:y,isObject:t,isNumber:w,isElement:J,isArray:Wd,version:ke,isDate:x,lowercase:Gd,uppercase:Hd,callbacks:{$$counter:0},getTestability:ga,$$minErr:b,$$csp:$d,reloadWithDebugInfo:fa}),(Nd=pa(a))("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:yc}),a.provider("$compile",ob).directive({a:If,input:_f,textarea:_f,form:Nf,script:Wg,select:Zg,style:_g,option:$g,ngBind:cg,ngBindHtml:eg,ngBindTemplate:dg,ngClass:gg,ngClassEven:ig,ngClassOdd:hg,ngCloak:jg,ngController:kg,ngForm:Of,ngHide:Pg,ngIf:ng,ngInclude:og,ngInit:qg,ngNonBindable:Gg,ngPluralize:Kg,ngRepeat:Lg,ngShow:Og,ngStyle:Qg,ngSwitch:Rg,ngSwitchWhen:Sg,ngSwitchDefault:Tg,ngOptions:Jg,ngTransclude:Vg,ngModel:Dg,ngList:rg,ngChange:fg,pattern:bh,ngPattern:bh,required:ah,ngRequired:ah,minlength:dh,ngMinlength:dh,maxlength:ch,ngMaxlength:ch,ngValue:bg,ngModelOptions:Fg}).directive({ngInclude:pg}).directive(Jf).directive(lg),a.provider({$anchorScroll:eb,$animate:Pe,$animateCss:Se,$$animateJs:Ne,$$animateQueue:Oe,$$AnimateRunner:Re,$$animateAsyncRun:Qe,$browser:kb,$cacheFactory:lb,$controller:ub,$document:vb,$exceptionHandler:wb,$filter:Mc,$$forceReflow:Ye,$interpolate:Kb,$interval:Lb,$http:Gb,$httpParamSerializer:yb,$httpParamSerializerJQLike:zb,$httpBackend:Ib,$xhrFactory:Hb,$jsonpCallbacks:ff,$location:$b,$log:_b,$parse:sc,$rootScope:xc,$q:tc,$$q:uc,$sce:Cc,$sceDelegate:Bc,$sniffer:Dc,$templateCache:mb,$templateRequest:Ec,$$testability:Fc,$timeout:Gc,$window:Jc,$$rAF:wc,$$jqLite:Ya,$$HashMap:De,$$cookieReader:Lc})}])}function ua(){return++me}function va(a){return a.replace(pe,function(a,b,c,d){return d?c.toUpperCase():c}).replace(qe,"Moz$1")}function wa(a){return!ue.test(a)}function xa(a){var b=a.nodeType;return b===ee||!b||b===ie}function ya(a){for(var b in le[a.ng339])return!0;return!1}function za(a){for(var b=0,c=a.length;b<c;b++)Ha(a[b])}function Aa(a,b){var c,e,f,g,h=b.createDocumentFragment(),i=[];if(wa(a))i.push(b.createTextNode(a));else{for(c=h.appendChild(b.createElement("div")),e=(ve.exec(a)||["",""])[1].toLowerCase(),f=xe[e]||xe._default,c.innerHTML=f[1]+a.replace(we,"<$1></$2>")+f[2],g=f[0];g--;)c=c.lastChild;i=P(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",d(i,function(a){h.appendChild(a)}),h}function Ba(b,c){c=c||a.document;var d;return(d=te.exec(b))?[c.createElement(d[1])]:(d=Aa(b,c))?d.childNodes:[]}function Ca(a,b){var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)}function Da(a){if(a instanceof Da)return a;var b;if(v(a)&&(a=Yd(a),b=!0),!(this instanceof Da)){if(b&&"<"!=a.charAt(0))throw se("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Da(a)}b?Na(this,Ba(a)):Na(this,a)}function Ea(a){return a.cloneNode(!0)}function Fa(a,b){if(b||Ha(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;d<e;d++)Ha(c[d])}function Ga(a,b,c,e){if(s(e))throw se("offargs","jqLite#off() does not support the `selector` argument");var f=Ia(a),g=f&&f.events,h=f&&f.handle;if(h)if(b){var i=function(b){var d=g[b];s(c)&&M(d||[],c),s(c)&&d&&d.length>0||(oe(a,b,h),delete g[b])};d(b.split(" "),function(a){i(a),re[a]&&i(re[a])})}else for(b in g)"$destroy"!==b&&oe(a,b,h),delete g[b]}function Ha(a,b){var c=a.ng339,d=c&&le[c];if(d){if(b)return void delete d.data[b];d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),Ga(a)),delete le[c],a.ng339=void 0}}function Ia(a,b){var c=a.ng339,d=c&&le[c];return b&&!d&&(a.ng339=c=ua(),d=le[c]={events:{},data:{},handle:void 0}),d}function Ja(a,b,c){if(xa(a)){var d=s(c),e=!d&&b&&!t(b),f=!b,g=Ia(a,!e),h=g&&g.data;if(d)h[b]=c;else{if(f)return h;if(e)return h&&h[b];j(h,b)}}}function Ka(a,b){return!!a.getAttribute&&(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1}function La(a,b){b&&a.setAttribute&&d(b.split(" "),function(b){a.setAttribute("class",Yd((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Yd(b)+" "," ")))})}function Ma(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");d(b.split(" "),function(a){a=Yd(a),c.indexOf(" "+a+" ")===-1&&(c+=a+" ")}),a.setAttribute("class",Yd(c))}}function Na(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;d<c;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Oa(a,b){return Pa(a,"$"+(b||"ngController")+"Controller")}function Pa(a,b,c){a.nodeType==ie&&(a=a.documentElement);for(var d=Wd(b)?b:[b];a;){for(var e=0,f=d.length;e<f;e++)if(s(c=Ld.data(a,d[e])))return c;a=a.parentNode||a.nodeType===je&&a.host}}function Qa(a){for(Fa(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Ra(a,b){b||Fa(a);var c=a.parentNode;c&&c.removeChild(a)}function Sa(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):Ld(c).on("load",b)}function Ta(a,b){var c=Ae[b.toLowerCase()];return c&&Be[L(a)]&&c}function Ua(a){return Ce[a]}function Va(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(r(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0};var h=e.specialHandlerWrapper||Wa;f>1&&(e=qa(e));for(var i=0;i<f;i++)c.isImmediatePropagationStopped()||h(a,c,e[i])}};return c.elem=a,c}function Wa(a,b,c){c.call(a,b)}function Xa(a,b,c){var d=b.relatedTarget;d&&(d===a||ye.call(a,d))||c.call(a,b)}function Ya(){this.$get=function(){return j(Da,{hasClass:function(a,b){return a.attr&&(a=a[0]),Ka(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),Ma(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),La(a,b)}})}}function Za(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||g)():d+":"+a}function $a(a,b){if(b){var c=0;this.nextUid=function(){return++c}}d(a,this.put,this)}function _a(a){return Function.prototype.toString.call(a)+" "}function ab(a){var b=_a(a).replace(Ie,""),c=b.match(Ee)||b.match(Fe);return c}function bb(a){var b=ab(a);return b?"function("+(b[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function cb(a,b,c){var e,f,g;if("function"==typeof a){if(!(e=a.$inject)){if(e=[],a.length){if(b)throw v(c)&&c||(c=a.name||bb(a)),Je("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);f=ab(a),d(f[1].split(Ge),function(a){a.replace(He,function(a,b,c){e.push(c)})})}a.$inject=e}}else Wd(a)?(g=a.length-1,ka(a[g],"fn"),e=a.slice(0,g)):ka(a,"fn",!0);return e}function db(a,b){function c(a){return function(b,c){return t(b)?void d(b,f(a)):a(b,c)}}function e(a,b){if(la(a,"service"),(y(b)||Wd(b))&&(b=x.instantiate(b)),!b.$get)throw Je("pget","Provider '{0}' must define $get factory method.",a);return w[a+q]=b}function g(a,b){return function(){var c=B.invoke(b,this);if(r(c))throw Je("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function h(a,b,c){return e(a,{$get:c!==!1?g(a,b):b})}function i(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}function j(a,b){return h(a,p(b),!1)}function k(a,b){la(a,"constant"),w[a]=b,z[a]=b}function l(a,b){var c=x.get(a+q),d=c.$get;c.$get=function(){var a=B.invoke(d,c);return B.invoke(b,null,{$delegate:a})}}function m(a){ja(r(a)||Wd(a),"modulesToLoad","not an array");var b,c=[];return d(a,function(a){function d(a){var b,c;for(b=0,c=a.length;b<c;b++){var d=a[b],e=x.get(d[0]);e[d[1]].apply(e,d[2])}}if(!u.get(a)){u.put(a,!0);try{v(a)?(b=Nd(a),c=c.concat(m(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):y(a)?c.push(x.invoke(a)):Wd(a)?c.push(x.invoke(a)):ka(a,"module")}catch(e){throw Wd(a)&&(a=a[a.length-1]),e.message&&e.stack&&e.stack.indexOf(e.message)==-1&&(e=e.message+"\n"+e.stack),Je("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e)}}}),c}function n(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===o)throw Je("cdep","Circular dependency found: {0}",b+" <- "+s.join(" <- "));return a[b]}try{return s.unshift(b),a[b]=o,a[b]=c(b,d)}catch(e){throw a[b]===o&&delete a[b],e}finally{s.shift()}}function e(a,c,e){for(var f=[],g=db.$$annotate(a,b,e),h=0,i=g.length;h<i;h++){var j=g[h];if("string"!=typeof j)throw Je("itkn","Incorrect injection token! Expected service name as string, got {0}",j);f.push(c&&c.hasOwnProperty(j)?c[j]:d(j,e))}return f}function f(a){return!(Kd<=11)&&("function"==typeof a&&/^(?:class\b|constructor\()/.test(_a(a)))}function g(a,b,c,d){"string"==typeof c&&(d=c,c=null);var g=e(a,c,d);return Wd(a)&&(a=a[a.length-1]),f(a)?(g.unshift(null),new(Function.prototype.bind.apply(a,g))):a.apply(b,g)}function h(a,b,c){var d=Wd(a)?a[a.length-1]:a,f=e(a,b,c);return f.unshift(null),new(Function.prototype.bind.apply(d,f))}return{invoke:g,instantiate:h,get:d,annotate:db.$$annotate,has:function(b){return w.hasOwnProperty(b+q)||a.hasOwnProperty(b)}}}b=b===!0;var o={},q="Provider",s=[],u=new $a([],(!0)),w={$provide:{provider:c(e),factory:c(h),service:c(i),value:c(j),constant:c(k),decorator:l}},x=w.$injector=n(w,function(a,b){throw Ud.isString(b)&&s.push(b),Je("unpr","Unknown provider: {0}",s.join(" <- "))}),z={},A=n(z,function(a,b){var c=x.get(a+q,b);return B.invoke(c.$get,c,void 0,a)}),B=A;w["$injector"+q]={$get:p(A)};var C=m(a);return B=A.get("$injector"),B.strictDi=b,d(C,function(a){a&&B.invoke(a)}),B}function eb(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){if("a"===L(a))return b=a,!0}),b}function f(){var a=h.yOffset;if(y(a))a=a();else if(J(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else w(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(a){a=v(a)?a:c.hash();var b;a?(b=i.getElementById(a))?g(b):(b=e(i.getElementsByName(a)))?g(b):"top"===a&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||Sa(function(){d.$evalAsync(h)})}),h}]}function fb(a,b){return a||b?a?b?(Wd(a)&&(a=a.join(" ")),Wd(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function gb(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType===Le)return c}}function hb(a){v(a)&&(a=a.split(" "));var b=oa();return d(a,function(a){a.length&&(b[a]=!0)}),b}function ib(a){return t(a)?a:{}}function jb(a,b,c,e){function f(a){try{a.apply(null,Q(arguments,1))}finally{if(s--,0===s)for(;t.length;)try{t.pop()()}catch(b){c.error(b)}}}function g(a){var b=a.indexOf("#");return b===-1?"":a.substr(b)}function h(){y=null,i(),j()}function i(){u=z(),u=r(u)?null:u,O(u,C)&&(u=C),C=u}function j(){w===k.url()&&v===u||(w=k.url(),v=u,d(A,function(a){a(k.url(),u)}))}var k=this,l=a.location,m=a.history,o=a.setTimeout,p=a.clearTimeout,q={};k.isMock=!1;var s=0,t=[];k.$$completeOutstandingRequest=f,k.$$incOutstandingRequestCount=function(){s++},k.notifyWhenNoOutstandingRequests=function(a){0===s?a():t.push(a)};var u,v,w=l.href,x=b.find("base"),y=null,z=e.history?function(){try{return m.state}catch(a){}}:n;i(),v=u,k.url=function(b,c,d){if(r(d)&&(d=null),l!==a.location&&(l=a.location),m!==a.history&&(m=a.history),b){var f=v===d;if(w===b&&(!e.history||f))return k;var h=w&&Rb(w)===Rb(b);return w=b,v=d,!e.history||h&&f?(h||(y=b),c?l.replace(b):h?l.hash=g(b):l.href=b,l.href!==b&&(y=b)):(m[c?"replaceState":"pushState"](d,"",b),i(),v=u),y&&(y=b),k}return y||l.href.replace(/%27/g,"'")},k.state=function(){return u};var A=[],B=!1,C=null;k.onUrlChange=function(b){return B||(e.history&&Ld(a).on("popstate",h),Ld(a).on("hashchange",h),B=!0),A.push(b),b},k.$$applicationDestroyed=function(){Ld(a).off("hashchange popstate",h)},k.$$checkUrlChange=j,k.baseHref=function(){var a=x.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""},k.defer=function(a,b){var c;return s++,c=o(function(){delete q[c],f(a)},b||0),q[c]=!0,c},k.defer.cancel=function(a){return!!q[a]&&(delete q[a],p(a),f(n),!0)}}function kb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new jb(a,d,b,c)}]}function lb(){this.$get=function(){function a(a,d){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in c)throw b("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=j({},d,{id:a}),i=oa(),k=d&&d.capacity||Number.MAX_VALUE,l=oa(),m=null,n=null;return c[a]={put:function(a,b){if(!r(b)){if(k<Number.MAX_VALUE){var c=l[a]||(l[a]={key:a});e(c)}return a in i||g++,i[a]=b,g>k&&this.remove(n.key),b}},get:function(a){if(k<Number.MAX_VALUE){var b=l[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(k<Number.MAX_VALUE){var b=l[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete l[a]}a in i&&(delete i[a],g--)},removeAll:function(){i=oa(),g=0,l=oa(),m=n=null},destroy:function(){i=null,h=null,l=null,delete c[a]},info:function(){return j({},h,{size:g})}}}var c={};return a.info=function(){var a={};return d(c,function(b,c){a[c]=b.info()}),a},a.get=function(a){return c[a]},a}}function mb(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function nb(){}function ob(b,c){function e(a,b,c){var e=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,f=oa();return d(a,function(a,d){if(a in A)return void(f[d]=A[a]);var g=a.match(e);if(!g)throw Te("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,d,a,c?"controller bindings definition":"isolate scope definition");f[d]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||d},g[4]&&(A[a]=f[d])}),f}function g(a,b){var c={isolateScope:null,bindToController:null};if(t(a.scope)&&(a.bindToController===!0?(c.bindToController=e(a.scope,b,!0),c.isolateScope={}):c.isolateScope=e(a.scope,b,!1)),t(a.bindToController)&&(c.bindToController=e(a.bindToController,b,!0)),t(c.bindToController)){var d=a.controller,f=a.controllerAs;if(!d)throw Te("noctrl","Cannot bind to controller without directive '{0}'s controller.",b);if(!tb(d,f))throw Te("noident","Cannot bind to controller without identifier for directive '{0}'.",b)}return c}function h(a){var b=a.charAt(0);if(!b||b!==Gd(b))throw Te("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",a);if(a!==a.trim())throw Te("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",a)}function i(a){var b=a.require||a.controller&&a.name;return!Wd(b)&&t(b)&&d(b,function(a,c){var d=a.match(x),e=a.substring(d[0].length);e||(b[c]=d[0]+c)}),b}var k={},l="Directive",q=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,u=/(([\w\-]+)(?:\:([^;]+))?;?)/,w=K("ngSrc,ngSrcset,src,srcset"),x=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,z=/^(on[a-z]+|formaction)$/,A=oa();this.directive=function E(a,c){return la(a,"directive"),v(a)?(h(a),ja(c,"directiveFactory"),k.hasOwnProperty(a)||(k[a]=[],b.factory(a+l,["$injector","$exceptionHandler",function(b,c){var e=[];return d(k[a],function(d,f){try{var g=b.invoke(d);y(g)?g={compile:p(g)}:!g.compile&&g.link&&(g.compile=p(g.link)),g.priority=g.priority||0,g.index=f,g.name=g.name||a,g.require=i(g),g.restrict=g.restrict||"EA",g.$$moduleName=d.$$moduleName,e.push(g)}catch(h){c(h)}}),e}])),k[a].push(c)):d(a,f(E)),this},this.component=function(a,b){function c(a){function c(b){return y(b)||Wd(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:e,controllerAs:tb(b.controller)||b.controllerAs||"$ctrl",template:c(f),templateUrl:c(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};return d(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)}),g}var e=b.controller||function(){};return d(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,y(e)&&(e[b]=a))}),c.$inject=["$injector"],this.directive(a,c)},this.aHrefSanitizationWhitelist=function(a){return s(a)?(c.aHrefSanitizationWhitelist(a),this):c.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(c.imgSrcSanitizationWhitelist(a),this):c.imgSrcSanitizationWhitelist()};var C=!0;this.debugInfoEnabled=function(a){return s(a)?(C=a,this):C};var D=10;this.onChangesTtl=function(a){return arguments.length?(D=a,this):D},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(b,c,e,f,h,i,p,A,E,G){function H(){try{if(!--xa)throw ta=void 0,Te("infchng","{0} $onChanges() iterations reached. Aborting!\n",D);p.$apply(function(){for(var a=[],b=0,c=ta.length;b<c;++b)try{ta[b]()}catch(d){a.push(d)}if(ta=void 0,a.length)throw a})}finally{xa++}}function I(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;c<d;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a}function J(a,b,c){va.innerHTML="<span "+b+">";var d=va.firstChild.attributes,e=d[0];d.removeNamedItem(e.name),e.value=c,a.attributes.setNamedItem(e)}function K(a,b){try{a.addClass(b)}catch(c){}}function N(b,c,d,e,f){b instanceof Ld||(b=Ld(b));for(var g=/\S+/,h=0,i=b.length;h<i;h++){var j=b[h];j.nodeType===ge&&j.nodeValue.match(g)&&Ca(j,b[h]=a.document.createElement("span"))}var k=S(b,c,b,d,e,f);N.$$addScopeClass(b);var l=null;return function(a,c,d){ja(a,"scope"),f&&f.needsNewScope&&(a=a.$parent.$new()),d=d||{};var e=d.parentBoundTranscludeFn,g=d.transcludeControllers,h=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude),l||(l=P(h));var i;if(i="html"!==l?Ld(la(l,Ld("<div>").append(b).html())):c?ze.clone.call(b):b,g)for(var j in g)i.data("$"+j+"Controller",g[j].instance);return N.$$addScopeInfo(i,a),c&&c(i,a),k&&k(a,i,i,e),i}}function P(a){var b=a&&a[0];return b&&"foreignobject"!==L(b)&&Rd.call(b).match(/SVG/)?"svg":"html"}function S(a,b,c,d,e,f){function g(a,c,d,e){var f,g,h,i,j,k,l,m,p;if(n){var q=c.length;for(p=new Array(q),j=0;j<o.length;j+=3)l=o[j],p[l]=c[l]}else p=c;for(j=0,k=o.length;j<k;)h=p[o[j++]],f=o[j++],g=o[j++],f?(f.scope?(i=a.$new(),N.$$addScopeInfo(Ld(h),i)):i=a,m=f.transcludeOnThisElement?T(a,f.transclude,e):!f.templateOnThisElement&&e?e:!e&&b?T(a,b):null,f(g,i,h,d,m)):g&&g(a,h.childNodes,void 0,e)}for(var h,i,j,k,l,m,n,o=[],p=0;p<a.length;p++)h=new I,i=U(a[p],[],h,0===p?d:void 0,e),j=i.length?$(i,a[p],h,b,c,null,[],[],f):null,j&&j.scope&&N.$$addScopeClass(h.$$element),l=j&&j.terminal||!(k=a[p].childNodes)||!k.length?null:S(k,j?(j.transcludeOnThisElement||!j.templateOnThisElement)&&j.transclude:b),(j||l)&&(o.push(p,j,l),m=!0,n=n||j),f=null;return m?g:null}function T(a,b,c){function d(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})}var e=d.$$slots=oa();for(var f in b.$$slots)b.$$slots[f]?e[f]=T(a,b.$$slots[f],c):e[f]=null;return d}function U(a,b,c,d,e){var f,g,h=a.nodeType,i=c.$attr;switch(h){case ee:ca(b,qb(L(a)),"E",d,e);for(var j,k,l,m,n,o,p=a.attributes,q=0,r=p&&p.length;q<r;q++){var s=!1,w=!1;j=p[q],k=j.name,n=Yd(j.value),m=qb(k),(o=Ba.test(m))&&(k=k.replace(Ve,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var x=m.match(Da);x&&da(x[1])&&(s=k,w=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6)),l=qb(k.toLowerCase()),i[l]=k,!o&&c.hasOwnProperty(l)||(c[l]=n,Ta(a,l)&&(c[l]=!0)),na(a,b,n,l,o),ca(b,l,"A",d,e,s,w)}if(g=a.className,t(g)&&(g=g.animVal),v(g)&&""!==g)for(;f=u.exec(g);)l=qb(f[2]),ca(b,l,"C",d,e)&&(c[l]=Yd(f[3])),g=g.substr(f.index+f[0].length);break;case ge:if(11===Kd)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===ge;)a.nodeValue=a.nodeValue+a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);ka(b,a.nodeValue);break;case he:V(a,b,c,d,e)}return b.sort(ga),b}function V(a,b,c,d,e){try{var f=q.exec(a.nodeValue);if(f){var g=qb(f[1]);ca(b,g,"M",d,e)&&(c[g]=Yd(f[2]))}}catch(h){}}function W(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Te("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType==ee&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return Ld(d)}function X(a,b,c){return function(d,e,f,g,h){return e=W(e[0],b,c),a(d,e,f,g,h)}}function Z(a,b,c,d,e,f){var g;return a?N(b,c,d,e,f):function(){return g||(g=N(b,c,d,e,f),b=c=f=null),g.apply(this,arguments)}}function $(a,b,c,f,g,h,i,k,l){function m(a,b,c,d){a&&(c&&(a=X(a,c,d)),a.require=o.require,a.directiveName=p,(z===o||o.$$isolateScope)&&(a=qa(a,{isolateScope:!0})),i.push(a)),b&&(c&&(b=X(b,c,d)),b.require=o.require,b.directiveName=p,(z===o||o.$$isolateScope)&&(b=qa(b,{isolateScope:!0})),k.push(b))}function n(a,f,g,h,l){function m(a,b,c,d){var e;if(B(a)||(d=c,c=b,b=a,a=void 0),F&&(e=u),c||(c=F?C.parent():C),!d)return l(a,b,e,c,M);var f=l.$$slots[d];if(f)return f(a,b,e,c,M);if(r(f))throw Te("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',d,Y(C))}var n,o,p,q,s,u,v,C,D,E;b===g?(D=c,C=c.$$element):(C=Ld(g),D=new I(C,c)),s=f,z?q=f.$new(!0):w&&(s=f.$parent),l&&(v=m,v.$$boundTransclude=l,v.isSlotFilled=function(a){return!!l.$$slots[a]}),x&&(u=aa(C,D,v,x,q,f,z)),z&&(N.$$addScopeInfo(C,q,!0,!(A&&(A===z||A===z.$$originalDirective))),N.$$addScopeClass(C,!0),q.$$isolateBindings=z.$$isolateBindings,E=sa(f,D,q,q.$$isolateBindings,z),E.removeWatches&&q.$on("$destroy",E.removeWatches));for(var G in u){var H=x[G],J=u[G],K=H.$$bindings.bindToController;J.identifier&&K?J.bindingInfo=sa(s,D,J.instance,K,H):J.bindingInfo={};var L=J();L!==J.instance&&(J.instance=L,C.data("$"+H.name+"Controller",L),J.bindingInfo.removeWatches&&J.bindingInfo.removeWatches(),J.bindingInfo=sa(s,D,J.instance,K,H))}for(d(x,function(a,b){var c=a.require;a.bindToController&&!Wd(c)&&t(c)&&j(u[b].instance,_(b,c,C,u))}),d(u,function(a){var b=a.instance;if(y(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(c){e(c)}if(y(b.$onInit))try{b.$onInit()}catch(c){e(c)}y(b.$doCheck)&&(s.$watch(function(){b.$doCheck()}),b.$doCheck()),y(b.$onDestroy)&&s.$on("$destroy",function(){b.$onDestroy()})}),n=0,o=i.length;n<o;n++)p=i[n],ra(p,p.isolateScope?q:f,C,D,p.require&&_(p.directiveName,p.require,C,u),v);var M=f;for(z&&(z.template||null===z.templateUrl)&&(M=q),a&&a(M,g.childNodes,void 0,l),n=k.length-1;n>=0;n--)p=k[n],ra(p,p.isolateScope?q:f,C,D,p.require&&_(p.directiveName,p.require,C,u),v);d(u,function(a){var b=a.instance;y(b.$postLink)&&b.$postLink()})}l=l||{};for(var o,p,q,s,u,v=-Number.MAX_VALUE,w=l.newScopeDirective,x=l.controllerDirectives,z=l.newIsolateScopeDirective,A=l.templateDirective,C=l.nonTlbTranscludeDirective,D=!1,E=!1,F=l.hasElementTranscludeDirective,G=c.$$element=Ld(b),H=h,J=f,K=!1,M=!1,O=0,P=a.length;O<P;O++){o=a[O];var S=o.$$start,T=o.$$end;if(S&&(G=W(b,S,T)),q=void 0,v>o.priority)break;if((u=o.scope)&&(o.templateUrl||(t(u)?(ia("new/isolated scope",z||w,o,G),z=o):ia("new/isolated scope",z,o,G)),w=w||o),p=o.name,!K&&(o.replace&&(o.templateUrl||o.template)||o.transclude&&!o.$$tlb)){for(var V,$=O+1;V=a[$++];)if(V.transclude&&!V.$$tlb||V.replace&&(V.templateUrl||V.template)){M=!0;break}K=!0}if(!o.templateUrl&&o.controller&&(u=o.controller,x=x||oa(),ia("'"+p+"' controller",x[p],o,G),x[p]=o),u=o.transclude)if(D=!0,o.$$tlb||(ia("transclusion",C,o,G),C=o),"element"==u)F=!0,v=o.priority,q=G,G=c.$$element=Ld(N.$$createComment(p,c[p])),b=G[0],pa(g,Q(q),b),q[0].$$parentNode=q[0].parentNode,J=Z(M,q,f,v,H&&H.name,{nonTlbTranscludeDirective:C});else{var ca=oa();if(q=Ld(Ea(b)).contents(),t(u)){q=[];var da=oa(),ga=oa();d(u,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a,da[a]=b,ca[b]=null,ga[b]=c}),d(G.contents(),function(a){var b=da[qb(L(a))];b?(ga[b]=!0,ca[b]=ca[b]||[],ca[b].push(a)):q.push(a)}),d(ga,function(a,b){if(!a)throw Te("reqslot","Required transclusion slot `{0}` was not filled.",b)});for(var ha in ca)ca[ha]&&(ca[ha]=Z(M,ca[ha],f))}G.empty(),J=Z(M,q,f,void 0,void 0,{needsNewScope:o.$$isolateScope||o.$$newScope}),J.$$slots=ca}if(o.template)if(E=!0,ia("template",A,o,G),A=o,u=y(o.template)?o.template(G,c):o.template,u=Aa(u),o.replace){if(H=o,q=wa(u)?[]:sb(la(o.templateNamespace,Yd(u))),b=q[0],1!=q.length||b.nodeType!==ee)throw Te("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p,"");pa(g,G,b);var ja={$attr:{}},ka=U(b,[],ja),ma=a.splice(O+1,a.length-(O+1));(z||w)&&ba(ka,z,w),a=a.concat(ka).concat(ma),ea(c,ja),P=a.length}else G.html(u);if(o.templateUrl)E=!0,ia("template",A,o,G),A=o,o.replace&&(H=o),n=fa(a.splice(O,a.length-O),G,c,g,D&&J,i,k,{controllerDirectives:x,newScopeDirective:w!==o&&w,newIsolateScopeDirective:z,templateDirective:A,nonTlbTranscludeDirective:C}),P=a.length;else if(o.compile)try{s=o.compile(G,c,J);var na=o.$$originalDirective||o;y(s)?m(null,R(na,s),S,T):s&&m(R(na,s.pre),R(na,s.post),S,T)}catch(ta){e(ta,Y(G))}o.terminal&&(n.terminal=!0,v=Math.max(v,o.priority))}return n.scope=w&&w.scope===!0,n.transcludeOnThisElement=D,n.templateOnThisElement=E,n.transclude=J,l.hasElementTranscludeDirective=F,n}function _(a,b,c,e){var f;if(v(b)){var g=b.match(x),h=b.substring(g[0].length),i=g[1]||g[3],j="?"===g[2];if("^^"===i?c=c.parent():(f=e&&e[h],f=f&&f.instance),!f){var k="$"+h+"Controller";f=i?c.inheritedData(k):c.data(k)}if(!f&&!j)throw Te("ctreq","Controller '{0}', required by directive '{1}', can't be found!",h,a)}else if(Wd(b)){f=[];for(var l=0,m=b.length;l<m;l++)f[l]=_(a,b[l],c,e)}else t(b)&&(f={},d(b,function(b,d){f[d]=_(a,b,c,e)}));return f||null}function aa(a,b,c,d,e,f,g){var h=oa();for(var j in d){var k=d[j],l={$scope:k===g||k.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},m=k.controller;"@"==m&&(m=b[k.name]);var n=i(m,l,!0,k.controllerAs);h[k.name]=n,a.data("$"+k.name+"Controller",n.instance)}return h}function ba(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=m(a[d],{$$isolateScope:b,$$newScope:c})}function ca(a,c,d,f,h,i,j){if(c===h)return null;var n=null;if(k.hasOwnProperty(c))for(var o,p=b.get(c+l),q=0,s=p.length;q<s;q++)try{if(o=p[q],(r(f)||f>o.priority)&&o.restrict.indexOf(d)!=-1){if(i&&(o=m(o,{$$start:i,$$end:j})),!o.$$bindings){var u=o.$$bindings=g(o,o.name);t(u.isolateScope)&&(o.$$isolateBindings=u.isolateScope)}a.push(o),n=o}}catch(v){e(v)}return n}function da(a){if(k.hasOwnProperty(a))for(var c,d=b.get(a+l),e=0,f=d.length;e<f;e++)if(c=d[e],c.multiElement)return!0;return!1}function ea(a,b){var c=b.$attr,e=a.$attr;a.$$element;d(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),d(b,function(b,d){a.hasOwnProperty(d)||"$"===d.charAt(0)||(a[d]=b,"class"!==d&&"style"!==d&&(e[d]=c[d]))})}function fa(a,b,c,e,g,h,i,j){var k,l,n=[],o=b[0],p=a.shift(),q=m(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),r=y(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,s=p.templateNamespace;return b.empty(),f(r).then(function(f){var m,u,v,w;if(f=Aa(f),p.replace){if(v=wa(f)?[]:sb(la(s,Yd(f))),m=v[0],1!=v.length||m.nodeType!==ee)throw Te("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,r);u={$attr:{}},pa(e,b,m);var x=U(m,[],u);t(p.scope)&&ba(x,!0),a=x.concat(a),ea(c,u)}else m=o,b.html(f);for(a.unshift(q),k=$(a,m,c,g,b,p,h,i,j),d(e,function(a,c){a==m&&(e[c]=b[0])}),l=S(b[0].childNodes,g);n.length;){var y=n.shift(),z=n.shift(),A=n.shift(),B=n.shift(),C=b[0];if(!y.$$destroyed){if(z!==o){var D=z.className;j.hasElementTranscludeDirective&&p.replace||(C=Ea(m)),pa(A,Ld(z),C),K(Ld(C),D)}w=k.transcludeOnThisElement?T(y,k.transclude,B):B,k(l,y,C,e,w)}}n=null}),function(a,b,c,d,e){var f=e;b.$$destroyed||(n?n.push(b,c,d,f):(k.transcludeOnThisElement&&(f=T(b,k.transclude,e)),k(l,b,c,d,f)))}}function ga(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function ia(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw Te("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,Y(d))}function ka(a,b){var d=c(b,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent(),c=!!b.length;return c&&N.$$addBindingClass(b),function(a,b){var e=b.parent();c||N.$$addBindingClass(e),N.$$addBindingInfo(e,d.expressions),a.$watch(d,function(a){b[0].nodeValue=a})}}})}function la(b,c){switch(b=Gd(b||"html")){case"svg":case"math":var d=a.document.createElement("div");return d.innerHTML="<"+b+">"+c+"</"+b+">",d.childNodes[0].childNodes;default:return c}}function ma(a,b){if("srcdoc"==b)return A.HTML;var c=L(a);return"xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)?A.RESOURCE_URL:void 0}function na(a,b,d,e,f){var g=ma(a,e);f=w[e]||f;var h=c(d,!0,g,f);if(h){if("multiple"===e&&"select"===L(a))throw Te("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Y(a));b.push({priority:100,compile:function(){return{pre:function(a,b,i){var j=i.$$observers||(i.$$observers=oa());if(z.test(e))throw Te("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var k=i[e];k!==d&&(h=k&&c(k,!0,g,f),d=k),h&&(i[e]=h(a),(j[e]||(j[e]=[])).$$inter=!0,(i.$$observers&&i.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!=b?i.$updateClass(a,b):i.$set(e,a)}))}}}})}}function pa(b,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(b)for(e=0,f=b.length;e<f;e++)if(b[e]==g){b[e++]=d;for(var j=e,k=j+h-1,l=b.length;j<l;j++,k++)k<l?b[j]=b[k]:delete b[j];b.length-=h-1,b.context===g&&(b.context=d);break}i&&i.replaceChild(d,g);var m=a.document.createDocumentFragment();for(e=0;e<h;e++)m.appendChild(c[e]);for(Ld.hasData(g)&&(Ld.data(d,Ld.data(g)),Ld(g).off("$destroy")),Ld.cleanData(m.querySelectorAll("*")),e=1;e<h;e++)delete c[e];c[0]=d,c.length=1}function qa(a,b){return j(function(){return a.apply(null,arguments)},a,b)}function ra(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(h){e(h,Y(c))}}function sa(a,b,e,f,g){function i(b,c,d){y(e.$onChanges)&&c!==d&&(ta||(a.$$postDigest(H),ta=[]),k||(k={},ta.push(j)),k[b]&&(d=k[b].previousValue),k[b]=new pb(d,c))}function j(){e.$onChanges(k),k=void 0}var k,l=[],m={};return d(f,function(d,f){var j,k,o,p,q,r=d.attrName,s=d.optional,t=d.mode;switch(t){case"@":s||Fd.call(b,r)||(e[f]=b[r]=void 0),b.$observe(r,function(a){if(v(a)||F(a)){var b=e[f];i(f,a,b),e[f]=a}}),b.$$observers[r].$$scope=a,j=b[r],v(j)?e[f]=c(j)(a):F(j)&&(e[f]=j),m[f]=new pb(Ue,e[f]);break;case"=":if(!Fd.call(b,r)){if(s)break;b[r]=void 0}if(s&&!b[r])break;k=h(b[r]),p=k.literal?O:function(a,b){return a===b||a!==a&&b!==b},o=k.assign||function(){throw j=e[f]=k(a),Te("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",b[r],r,g.name)},j=e[f]=k(a);var u=function(b){return p(b,e[f])||(p(b,j)?o(a,b=e[f]):e[f]=b),j=b};u.$stateful=!0,q=d.collection?a.$watchCollection(b[r],u):a.$watch(h(b[r],u),null,k.literal),l.push(q);break;case"<":if(!Fd.call(b,r)){if(s)break;b[r]=void 0}if(s&&!b[r])break;k=h(b[r]);var w=e[f]=k(a);m[f]=new pb(Ue,e[f]),q=a.$watch(k,function(a,b){if(b===a){if(b===w)return;b=w}i(f,a,b),e[f]=a},k.literal),l.push(q);break;case"&":if(k=b.hasOwnProperty(r)?h(b[r]):n,k===n&&s)break;e[f]=function(b){return k(a,b)}}}),{initialChanges:m,removeWatches:l.length&&function(){for(var a=0,b=l.length;a<b;++a)l[a]()}}}var ta,ua=/^\w/,va=a.document.createElement("div"),xa=D;I.prototype={$normalize:qb,$addClass:function(a){a&&a.length>0&&E.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&E.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=rb(a,b);c&&c.length&&E.addClass(this.$$element,c);var d=rb(b,a);d&&d.length&&E.removeClass(this.$$element,d)},$set:function(a,b,c,f){var g,h=this.$$element[0],i=Ta(h,a),j=Ua(a),k=a;
if(i?(this.$$element.prop(a,b),f=i):j&&(this[j]=b,k=j),this[a]=b,f?this.$attr[a]=f:(f=this.$attr[a],f||(this.$attr[a]=f=ha(a,"-"))),g=L(this.$$element),"a"===g&&("href"===a||"xlinkHref"===a)||"img"===g&&"src"===a)this[a]=b=G(b,"src"===a);else if("img"===g&&"srcset"===a&&s(b)){for(var l="",m=Yd(b),n=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,o=/\s/.test(m)?n:/(,)/,p=m.split(o),q=Math.floor(p.length/2),t=0;t<q;t++){var u=2*t;l+=G(Yd(p[u]),!0),l+=" "+Yd(p[u+1])}var v=Yd(p[2*t]).split(/\s/);l+=G(Yd(v[0]),!0),2===v.length&&(l+=" "+Yd(v[1])),this[a]=b=l}c!==!1&&(null===b||r(b)?this.$$element.removeAttr(f):ua.test(f)?this.$$element.attr(f,b):J(this.$$element[0],f,b));var w=this.$$observers;w&&d(w[k],function(a){try{a(b)}catch(c){e(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=oa()),e=d[a]||(d[a]=[]);return e.push(b),p.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||r(c[a])||b(c[a])}),function(){M(e,b)}}};var ya=c.startSymbol(),za=c.endSymbol(),Aa="{{"==ya&&"}}"==za?o:function(a){return a.replace(/\{\{/g,ya).replace(/}}/g,za)},Ba=/^ngAttr[A-Z]/,Da=/^(.+)Start$/;return N.$$addBindingInfo=C?function(a,b){var c=a.data("$binding")||[];Wd(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:n,N.$$addBindingClass=C?function(a){K(a,"ng-binding")}:n,N.$$addScopeInfo=C?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:n,N.$$addScopeClass=C?function(a,b){K(a,b?"ng-isolate-scope":"ng-scope")}:n,N.$$createComment=function(b,c){var d="";return C&&(d=" "+(b||"")+": ",c&&(d+=c+" ")),a.document.createComment(d)},N}]}function pb(a,b){this.previousValue=a,this.currentValue=b}function qb(a){return va(a.replace(Ve,""))}function rb(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function sb(a){a=Ld(a);var b=a.length;if(b<=1)return a;for(;b--;){var c=a[b];c.nodeType===he&&Pd.call(a,b,1)}return a}function tb(a,b){if(b&&v(b))return b;if(v(a)){var c=Xe.exec(a);if(c)return c[3]}}function ub(){var a={},c=!1;this.has=function(b){return a.hasOwnProperty(b)},this.register=function(b,c){la(b,"controller"),t(b)?j(a,b):a[b]=c},this.allowGlobals=function(){c=!0},this.$get=["$injector","$window",function(d,e){function f(a,c,d,e){if(!a||!t(a.$scope))throw b("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,c);a.$scope[c]=d}return function(b,g,h,i){var k,l,m,n;if(h=h===!0,i&&v(i)&&(n=i),v(b)){if(l=b.match(Xe),!l)throw We("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",b);m=l[1],n=n||l[3],b=a.hasOwnProperty(m)?a[m]:ma(g.$scope,m,!0)||(c?ma(e,m,!0):void 0),ka(b,m,!0)}if(h){var o=(Wd(b)?b[b.length-1]:b).prototype;k=Object.create(o||null),n&&f(g,n,k,m||b.name);var p;return p=j(function(){var a=d.invoke(b,k,g,m);return a!==k&&(t(a)||y(a))&&(k=a,n&&f(g,n,k,m||b.name)),k},{instance:k,identifier:n})}return k=d.instantiate(b,g,m),n&&f(g,n,k,m||b.name),k}}]}function vb(){this.$get=["$window",function(a){return Ld(a.document)}]}function wb(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function xb(a){return t(a)?x(a)?a.toISOString():T(a):a}function yb(){this.$get=function(){return function(a){if(!a)return"";var b=[];return e(a,function(a,c){null===a||r(a)||(Wd(a)?d(a,function(a){b.push(ba(c)+"="+ba(xb(a)))}):b.push(ba(c)+"="+ba(xb(a))))}),b.join("&")}}}function zb(){this.$get=function(){return function(a){function b(a,f,g){null===a||r(a)||(Wd(a)?d(a,function(a,c){b(a,f+"["+(t(a)?c:"")+"]")}):t(a)&&!x(a)?e(a,function(a,c){b(a,f+(g?"":"[")+c+(g?"":"]"))}):c.push(ba(f)+"="+ba(xb(a))))}if(!a)return"";var c=[];return b(a,"",!0),c.join("&")}}}function Ab(a,b){if(v(a)){var c=a.replace(bf,"").trim();if(c){var d=b("Content-Type");(d&&0===d.indexOf(Ze)||Bb(c))&&(a=U(c))}}return a}function Bb(a){var b=a.match(_e);return b&&af[b[0]].test(a)}function Cb(a){function b(a,b){a&&(e[a]=e[a]?e[a]+", "+b:b)}var c,e=oa();return v(a)?d(a.split("\n"),function(a){c=a.indexOf(":"),b(Gd(Yd(a.substr(0,c))),Yd(a.substr(c+1)))}):t(a)&&d(a,function(a,c){b(Gd(c),Yd(a))}),e}function Db(a){var b;return function(c){if(b||(b=Cb(a)),c){var d=b[Gd(c)];return void 0===d&&(d=null),d}return b}}function Eb(a,b,c,e){return y(e)?e(a,b,c):(d(e,function(d){a=d(a,b,c)}),a)}function Fb(a){return 200<=a&&a<300}function Gb(){var a=this.defaults={transformResponse:[Ab],transformRequest:[function(a){return!t(a)||C(a)||E(a)||D(a)?a:T(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:qa($e),put:qa($e),patch:qa($e)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},c=!1;this.useApplyAsync=function(a){return s(a)?(c=!!a,this):c};var e=!0;this.useLegacyPromiseExtensions=function(a){return s(a)?(e=!!a,this):e};var f=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(g,h,i,k,l,m){function n(c){function f(a,b){for(var c=0,d=b.length;c<d;){var e=b[c++],f=b[c++];a=a.then(e,f)}return b.length=0,a}function g(a,b){var c,e={};return d(a,function(a,d){y(a)?(c=a(b),null!=c&&(e[d]=c)):e[d]=a}),e}function h(b){var c,d,e,f=a.headers,h=j({},b.headers);f=j({},f.common,f[Gd(b.method)]);a:for(c in f){d=Gd(c);for(e in h)if(Gd(e)===d)continue a;h[c]=f[c]}return g(h,qa(b))}function i(b){var c=b.headers,e=Eb(b.data,Db(c),void 0,b.transformRequest);return r(e)&&d(c,function(a,b){"content-type"===Gd(b)&&delete c[b]}),r(b.withCredentials)&&!r(a.withCredentials)&&(b.withCredentials=a.withCredentials),q(b,e).then(k,k)}function k(a){var b=j({},a);return b.data=Eb(a.data,a.headers,a.status,n.transformResponse),Fb(a.status)?b:l.reject(b)}if(!t(c))throw b("$http")("badreq","Http request configuration must be an object.  Received: {0}",c);if(!v(c.url))throw b("$http")("badreq","Http request configuration url must be a string.  Received: {0}",c.url);var n=j({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},c);n.headers=h(c),n.method=Hd(n.method),n.paramSerializer=v(n.paramSerializer)?m.get(n.paramSerializer):n.paramSerializer;var o=[],p=[],s=l.when(n);return d(x,function(a){(a.request||a.requestError)&&o.unshift(a.request,a.requestError),(a.response||a.responseError)&&p.push(a.response,a.responseError)}),s=f(s,o),s=s.then(i),s=f(s,p),e?(s.success=function(a){return ka(a,"fn"),s.then(function(b){a(b.data,b.status,b.headers,n)}),s},s.error=function(a){return ka(a,"fn"),s.then(null,function(b){a(b.data,b.status,b.headers,n)}),s}):(s.success=df("success"),s.error=df("error")),s}function o(a){d(arguments,function(a){n[a]=function(b,c){return n(j({},c||{},{method:a,url:b}))}})}function p(a){d(arguments,function(a){n[a]=function(b,c,d){return n(j({},d||{},{method:a,url:b,data:c}))}})}function q(b,e){function f(a){if(a){var b={};return d(a,function(a,d){b[d]=function(b){function d(){a(b)}c?k.$applyAsync(d):k.$$phase?d():k.$apply(d)}}),b}}function i(a,b,d,e){function f(){j(b,a,d,e)}p&&(Fb(a)?p.put(z,[a,b,Cb(d),e]):p.remove(z)),c?k.$applyAsync(f):(f(),k.$$phase||k.$apply())}function j(a,c,d,e){c=c>=-1?c:0,(Fb(c)?v.resolve:v.reject)({data:a,status:c,headers:Db(d),config:b,statusText:e})}function m(a){j(a.data,a.status,qa(a.headers()),a.statusText)}function o(){var a=n.pendingRequests.indexOf(b);a!==-1&&n.pendingRequests.splice(a,1)}var p,q,v=l.defer(),x=v.promise,y=b.headers,z=u(b.url,b.paramSerializer(b.params));if(n.pendingRequests.push(b),x.then(o,o),!b.cache&&!a.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(p=t(b.cache)?b.cache:t(a.cache)?a.cache:w),p&&(q=p.get(z),s(q)?G(q)?q.then(m,m):Wd(q)?j(q[1],q[0],qa(q[2]),q[3]):j(q,200,{},"OK"):p.put(z,x)),r(q)){var A=Ic(b.url)?h()[b.xsrfCookieName||a.xsrfCookieName]:void 0;A&&(y[b.xsrfHeaderName||a.xsrfHeaderName]=A),g(b.method,z,e,i,y,b.timeout,b.withCredentials,b.responseType,f(b.eventHandlers),f(b.uploadEventHandlers))}return x}function u(a,b){return b.length>0&&(a+=(a.indexOf("?")==-1?"?":"&")+b),a}var w=i("$http");a.paramSerializer=v(a.paramSerializer)?m.get(a.paramSerializer):a.paramSerializer;var x=[];return d(f,function(a){x.unshift(v(a)?m.get(a):m.invoke(a))}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put","patch"),n.defaults=a,n}]}function Hb(){this.$get=function(){return function(){return new a.XMLHttpRequest}}}function Ib(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,c,d){return Jb(a,d,a.defer,b,c[0])}]}function Jb(a,b,c,e,f){function g(a,b,c){a=a.replace("JSON_CALLBACK",b);var d=f.createElement("script"),g=null;return d.type="text/javascript",d.src=a,d.async=!0,g=function(a){oe(d,"load",g),oe(d,"error",g),f.body.removeChild(d),d=null;var h=-1,i="unknown";a&&("load"!==a.type||e.wasCalled(b)||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},ne(d,"load",g),ne(d,"error",g),f.body.appendChild(d),g}return function(f,h,i,j,k,l,m,o,p,q){function t(){w&&w(),x&&x.abort()}function u(b,d,e,f,g){s(A)&&c.cancel(A),w=x=null,b(d,e,f,g),a.$$completeOutstandingRequest(n)}if(a.$$incOutstandingRequestCount(),h=h||a.url(),"jsonp"===Gd(f))var v=e.createCallback(h),w=g(h,v,function(a,b){var c=200===a&&e.getResponse(v);u(j,a,c,"",b),e.removeCallback(v)});else{var x=b(f,h);x.open(f,h,!0),d(k,function(a,b){s(a)&&x.setRequestHeader(b,a)}),x.onload=function(){var a=x.statusText||"",b="response"in x?x.response:x.responseText,c=1223===x.status?204:x.status;0===c&&(c=b?200:"file"==Hc(h).protocol?404:0),u(j,c,b,x.getAllResponseHeaders(),a)};var y=function(){u(j,-1,null,null,"")};if(x.onerror=y,x.onabort=y,d(p,function(a,b){x.addEventListener(b,a)}),d(q,function(a,b){x.upload.addEventListener(b,a)}),m&&(x.withCredentials=!0),o)try{x.responseType=o}catch(z){if("json"!==o)throw z}x.send(r(i)?null:i)}if(l>0)var A=c(t,l);else G(l)&&l.then(t)}}function Kb(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(n,a).replace(o,b)}function h(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=T(a)}return a}function i(a,b,c,d){var e;return e=a.$watch(function(a){return e(),d(a)},b,c)}function k(f,k,n,o){function q(a){try{return a=G(a),o&&!s(a)?a:h(a)}catch(b){d(ef.interr(f,b))}}if(!f.length||f.indexOf(a)===-1){var t;if(!k){var u=g(f);t=p(u),t.exp=f,t.expressions=[],t.$$watchDelegate=i}return t}o=!!o;for(var v,w,x,z=0,A=[],B=[],C=f.length,D=[],E=[];z<C;){if((v=f.indexOf(a,z))==-1||(w=f.indexOf(b,v+l))==-1){z!==C&&D.push(g(f.substring(z)));break}z!==v&&D.push(g(f.substring(z,v))),x=f.substring(v+l,w),A.push(x),B.push(c(x,q)),z=w+m,E.push(D.length),D.push("")}if(n&&D.length>1&&ef.throwNoconcat(f),!k||A.length){var F=function(a){for(var b=0,c=A.length;b<c;b++){if(o&&r(a[b]))return;D[E[b]]=a[b]}return D.join("")},G=function(a){return n?e.getTrusted(n,a):e.valueOf(a)};return j(function(a){var b=0,c=A.length,e=new Array(c);try{for(;b<c;b++)e[b]=B[b](a);return F(e)}catch(g){d(ef.interr(f,g))}},{exp:f,expressions:A,$$watchDelegate:function(a,b){var c;return a.$watchGroup(B,function(d,e){var f=F(d);y(b)&&b.call(this,f,d!==e?c:f,a),c=f})}})}}var l=a.length,m=b.length,n=new RegExp(a.replace(/./g,f),"g"),o=new RegExp(b.replace(/./g,f),"g");return k.startSymbol=function(){return a},k.endSymbol=function(){return b},k}]}function Lb(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,c,d,e){function f(f,h,i,j){function k(){l?f.apply(null,m):f(p)}var l=arguments.length>4,m=l?Q(arguments,4):[],n=b.setInterval,o=b.clearInterval,p=0,q=s(j)&&!j,r=(q?d:c).defer(),t=r.promise;return i=s(i)?i:0,t.$$intervalId=n(function(){q?e.defer(k):a.$evalAsync(k),r.notify(p++),i>0&&p>=i&&(r.resolve(p),o(t.$$intervalId),delete g[t.$$intervalId]),q||a.$apply()},h),g[t.$$intervalId]=r,t}var g={};return f.cancel=function(a){return!!(a&&a.$$intervalId in g)&&(g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0)},f}]}function Mb(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=aa(b[c]);return b.join("/")}function Nb(a,b){var c=Hc(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=l(c.port)||hf[c.protocol]||null}function Ob(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=Hc(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=$(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Pb(a,b){return 0===a.lastIndexOf(b,0)}function Qb(a,b){if(Pb(b,a))return b.substr(a.length)}function Rb(a){var b=a.indexOf("#");return b==-1?a:a.substr(0,b)}function Sb(a){return a.replace(/(#.+)|#$/,"$1")}function Tb(a){return a.substr(0,Rb(a).lastIndexOf("/")+1)}function Ub(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function Vb(a,b,c){this.$$html5=!0,c=c||"",Nb(a,this),this.$$parse=function(a){var c=Qb(b,a);if(!v(c))throw jf("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,b);Ob(c,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=_(this.$$search),c=this.$$hash?"#"+aa(this.$$hash):"";this.$$url=Mb(this.$$path)+(a?"?"+a:"")+c,this.$$absUrl=b+this.$$url.substr(1)},this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g,h;return s(f=Qb(a,d))?(g=f,h=s(f=Qb(c,f))?b+(Qb("/",f)||f):a+g):s(f=Qb(b,d))?h=b+f:b==d+"/"&&(h=b),h&&this.$$parse(h),!!h}}function Wb(a,b,c){Nb(a,this),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return Pb(b,c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f,g=Qb(a,d)||Qb(b,d);r(g)||"#"!==g.charAt(0)?this.$$html5?f=g:(f="",r(g)&&(a=d,this.replace())):(f=Qb(c,g),r(f)&&(f=g)),Ob(f,this),this.$$path=e(this.$$path,f,a),this.$$compose()},this.$$compose=function(){var b=_(this.$$search),d=this.$$hash?"#"+aa(this.$$hash):"";this.$$url=Mb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+(this.$$url?c+this.$$url:"")},this.$$parseLinkUrl=function(b,c){return Rb(a)==Rb(b)&&(this.$$parse(b),!0)}}function Xb(a,b,c){this.$$html5=!0,Wb.apply(this,arguments),this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a==Rb(d)?f=d:(g=Qb(b,d))?f=a+c+g:b===d+"/"&&(f=b),f&&this.$$parse(f),!!f},this.$$compose=function(){var b=_(this.$$search),d=this.$$hash?"#"+aa(this.$$hash):"";this.$$url=Mb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+c+this.$$url}}function Yb(a){return function(){return this[a]}}function Zb(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function $b(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return s(b)?(a=b,this):a},this.html5Mode=function(a){return F(a)?(b.enabled=a,this):t(a)?(F(a.enabled)&&(b.enabled=a.enabled),F(a.requireBase)&&(b.requireBase=a.requireBase),F(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(g){throw j.url(e),j.$$state=f,g}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=d.baseHref(),n=d.url();if(b.enabled){if(!m&&b.requireBase)throw jf("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=Ub(n)+(m||"/"),k=e.history?Vb:Xb}else l=Rb(n),k=Wb;var o=Tb(l);j=new k(l,o,"#"+a),j.$$parseLinkUrl(n,n),j.$$state=d.state();var p=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=Ld(a.target);"a"!==L(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),i=e.attr("href")||e.attr("xlink:href");t(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=Hc(h.animVal).href),p.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||j.$$parseLinkUrl(h,i)&&(a.preventDefault(),j.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}),Sb(j.absUrl())!=Sb(n)&&d.url(j.absUrl(),!0);var q=!0;return d.onUrlChange(function(a,b){return r(Qb(o,a))?void(g.location.href=a):(c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;a=Sb(a),j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(q=!1,i(e,f)))}),void(c.$$phase||c.$digest()))}),c.$watch(function(){var a=Sb(d.url()),b=Sb(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;(q||k)&&(q=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))})),j.$$replace=!1}),j}]}function _b(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function e(a){return a instanceof Error&&(a.stack?a=a.message&&a.stack.indexOf(a.message)===-1?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function f(a){var b=c.console||{},f=b[a]||b.log||n,g=!1;try{g=!!f.apply}catch(h){}return g?function(){var a=[];return d(arguments,function(b){a.push(e(b))}),f.apply(b,a)}:function(a,b){f(a,null==b?"":b)}}return{log:f("log"),info:f("info"),warn:f("warn"),error:f("error"),debug:function(){var c=f("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function ac(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw lf("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function bc(a){return a+""}function cc(a,b){if(a){if(a.constructor===a)throw lf("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw lf("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw lf("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw lf("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function dc(a,b){if(a){if(a.constructor===a)throw lf("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===mf||a===nf||a===of)throw lf("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function ec(a,b){if(a&&(a===(0).constructor||a===(!1).constructor||a==="".constructor||a==={}.constructor||a===[].constructor||a===Function.constructor))throw lf("isecaf","Assigning to a constructor is disallowed! Expression: {0}",b)}function fc(a,b){return"undefined"!=typeof a?a:b}function gc(a,b){return"undefined"==typeof a?b:"undefined"==typeof b?a:a+b}function hc(a,b){var c=a(b);return!c.$stateful}function ic(a,b){var c,e;switch(a.type){case sf.Program:c=!0,d(a.body,function(a){ic(a.expression,b),c=c&&a.expression.constant}),a.constant=c;break;case sf.Literal:a.constant=!0,a.toWatch=[];break;case sf.UnaryExpression:ic(a.argument,b),a.constant=a.argument.constant,a.toWatch=a.argument.toWatch;break;case sf.BinaryExpression:ic(a.left,b),ic(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case sf.LogicalExpression:ic(a.left,b),ic(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.constant?[]:[a];break;case sf.ConditionalExpression:ic(a.test,b),ic(a.alternate,b),ic(a.consequent,b),a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant,a.toWatch=a.constant?[]:[a];break;case sf.Identifier:a.constant=!1,a.toWatch=[a];break;case sf.MemberExpression:ic(a.object,b),a.computed&&ic(a.property,b),a.constant=a.object.constant&&(!a.computed||a.property.constant),a.toWatch=[a];break;case sf.CallExpression:c=!!a.filter&&hc(b,a.callee.name),e=[],d(a.arguments,function(a){ic(a,b),c=c&&a.constant,a.constant||e.push.apply(e,a.toWatch)}),a.constant=c,a.toWatch=a.filter&&hc(b,a.callee.name)?e:[a];break;case sf.AssignmentExpression:ic(a.left,b),ic(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=[a];break;case sf.ArrayExpression:c=!0,e=[],d(a.elements,function(a){ic(a,b),c=c&&a.constant,a.constant||e.push.apply(e,a.toWatch)}),a.constant=c,a.toWatch=e;break;case sf.ObjectExpression:c=!0,e=[],d(a.properties,function(a){ic(a.value,b),c=c&&a.value.constant&&!a.computed,a.value.constant||e.push.apply(e,a.value.toWatch)}),a.constant=c,a.toWatch=e;break;case sf.ThisExpression:a.constant=!1,a.toWatch=[];break;case sf.LocalsExpression:a.constant=!1,a.toWatch=[]}}function jc(a){if(1==a.length){var b=a[0].expression,c=b.toWatch;return 1!==c.length?c:c[0]!==b?c:void 0}}function kc(a){return a.type===sf.Identifier||a.type===sf.MemberExpression}function lc(a){if(1===a.body.length&&kc(a.body[0].expression))return{type:sf.AssignmentExpression,left:a.body[0].expression,right:{type:sf.NGValueParameter},operator:"="}}function mc(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===sf.Literal||a.body[0].expression.type===sf.ArrayExpression||a.body[0].expression.type===sf.ObjectExpression)}function nc(a){return a.constant}function oc(a,b){this.astBuilder=a,this.$filter=b}function pc(a,b){this.astBuilder=a,this.$filter=b}function qc(a){return"constructor"==a}function rc(a){return y(a.valueOf)?a.valueOf():uf.call(a)}function sc(){var a,b,c=oa(),e=oa(),f={"true":!0,"false":!1,"null":null,undefined:void 0};this.addLiteral=function(a,b){f[a]=b},this.setIdentifierFns=function(c,d){return a=c,b=d,this},this.$get=["$filter",function(g){function h(a,b,d){var f,h,j;switch(d=d||u,typeof a){case"string":a=a.trim(),j=a;var q=d?e:c;if(f=q[j],!f){":"===a.charAt(0)&&":"===a.charAt(1)&&(h=!0,a=a.substring(2));var s=d?t:r,v=new rf(s),w=new tf(v,g,s);f=w.parse(a),f.constant?f.$$watchDelegate=o:h?f.$$watchDelegate=f.literal?m:l:f.inputs&&(f.$$watchDelegate=k),d&&(f=i(f)),q[j]=f}return p(f,b);case"function":return p(a,b);default:return p(n,b)}}function i(a){function b(b,c,d,e){var f=u;u=!0;try{return a(b,c,d,e)}finally{u=f}}if(!a)return a;b.$$watchDelegate=a.$$watchDelegate,b.assign=i(a.assign),b.constant=a.constant,b.literal=a.literal;for(var c=0;a.inputs&&c<a.inputs.length;++c)a.inputs[c]=i(a.inputs[c]);return b.inputs=a.inputs,b}function j(a,b){return null==a||null==b?a===b:("object"!=typeof a||(a=rc(a),"object"!=typeof a))&&(a===b||a!==a&&b!==b)}function k(a,b,c,d,e){var f,g=d.inputs;if(1===g.length){var h=j;return g=g[0],a.$watch(function(a){var b=g(a);return j(b,h)||(f=d(a,void 0,void 0,[b]),h=b&&rc(b)),f},b,c,e)}for(var i=[],k=[],l=0,m=g.length;l<m;l++)i[l]=j,k[l]=null;return a.$watch(function(a){for(var b=!1,c=0,e=g.length;c<e;c++){var h=g[c](a);(b||(b=!j(h,i[c])))&&(k[c]=h,i[c]=h&&rc(h))}return b&&(f=d(a,void 0,void 0,k)),f},b,c,e)}function l(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,y(b)&&b.apply(this,arguments),s(a)&&d.$$postDigest(function(){s(f)&&e()})},c)}function m(a,b,c,e){function f(a){var b=!0;return d(a,function(a){s(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return e(a)},function(a,c,d){h=a,y(b)&&b.call(this,a,c,d),f(a)&&d.$$postDigest(function(){f(h)&&g()})},c)}function o(a,b,c,d){var e;return e=a.$watch(function(a){return e(),d(a)},b,c)}function p(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,e=c!==m&&c!==l,f=e?function(c,e,f,g){var h=d&&g?g[0]:a(c,e,f,g);return b(h,c,e)}:function(c,d,e,f){var g=a(c,d,e,f),h=b(g,c,d);return s(g)?h:g};return a.$$watchDelegate&&a.$$watchDelegate!==k?f.$$watchDelegate=a.$$watchDelegate:b.$stateful||(f.$$watchDelegate=k,d=!a.inputs,f.inputs=a.inputs?a.inputs:[a]),f}var q=$d().noUnsafeEval,r={csp:q,expensiveChecks:!1,literals:N(f),isIdentifierStart:y(a)&&a,isIdentifierContinue:y(b)&&b},t={csp:q,expensiveChecks:!0,literals:N(f),isIdentifierStart:y(a)&&a,isIdentifierContinue:y(b)&&b},u=!1;return h.$$runningExpensiveChecks=function(){return u},h}]}function tc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return vc(function(b){a.$evalAsync(b)},b)}]}function uc(){this.$get=["$browser","$exceptionHandler",function(a,b){return vc(function(b){a.defer(b)},b)}]}function vc(a,c){function e(){this.$$state={status:0}}function f(a,b){return function(c){b.call(a,c)}}function g(a){var b,d,e;e=a.pending,a.processScheduled=!1,a.pending=void 0;for(var f=0,g=e.length;f<g;++f){d=e[f][0],b=e[f][a.status];try{y(b)?d.resolve(b(a.value)):1===a.status?d.resolve(a.value):d.reject(a.value)}catch(h){d.reject(h),c(h)}}}function h(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){g(b)}))}function i(){this.promise=new e}function k(a){var b=new i,c=0,e=Wd(a)?[]:{};return d(a,function(a,d){c++,s(a).then(function(a){e.hasOwnProperty(d)||(e[d]=a,--c||b.resolve(e))},function(a){e.hasOwnProperty(d)||b.reject(a)})}),0===c&&b.resolve(e),b.promise}function l(a){var b=n();return d(a,function(a){s(a).then(b.resolve,b.reject)}),b.promise}var m=b("$q",TypeError),n=function(){var a=new i;return a.resolve=f(a,a.resolve),a.reject=f(a,a.reject),a.notify=f(a,a.notify),a};j(e.prototype,{then:function(a,b,c){if(r(a)&&r(b)&&r(c))return this;var d=new i;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&h(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return q(b,!0,a)},function(b){return q(b,!1,a)},b)}}),j(i.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(m("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){function b(a){i||(i=!0,g.$$resolve(a))}function d(a){i||(i=!0,g.$$reject(a))}var e,g=this,i=!1;try{(t(a)||y(a))&&(e=a&&a.then),y(e)?(this.promise.$$state.status=-1,e.call(a,b,d,f(this,this.notify))):(this.promise.$$state.value=a,this.promise.$$state.status=1,h(this.promise.$$state))}catch(j){d(j),c(j)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,h(this.promise.$$state)},notify:function(b){var d=this.promise.$$state.pending;this.promise.$$state.status<=0&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;f<g;f++){e=d[f][0],a=d[f][3];try{e.notify(y(a)?a(b):b)}catch(h){c(h)}}})}});var o=function(a){var b=new i;return b.reject(a),b.promise},p=function(a,b){var c=new i;return b?c.resolve(a):c.reject(a),c.promise},q=function(a,b,c){var d=null;try{y(c)&&(d=c())}catch(e){return p(e,!1)}return G(d)?d.then(function(){return p(a,b)},function(a){return p(a,!1)}):p(a,b)},s=function(a,b,c,d){var e=new i;return e.resolve(a),e.promise.then(b,c,d)},u=s,v=function(a){function b(a){d.resolve(a)}function c(a){d.reject(a)}if(!y(a))throw m("norslvr","Expected resolverFn, got '{0}'",a);var d=new i;return a(b,c),d.promise};return v.prototype=e.prototype,v.defer=n,v.reject=o,v.when=s,v.resolve=u,v.all=k,v.race=l,v}function wc(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function xc(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=g(),this.$$ChildScope=null}return b.prototype=a,b}var e=10,f=b("$rootScope"),h=null,i=null;this.digestTtl=function(a){return arguments.length&&(e=a),e},this.$get=["$exceptionHandler","$parse","$browser",function(b,j,k){function l(a){a.currentScope.$$destroyed=!0}function m(a){9===Kd&&(a.$$childHead&&m(a.$$childHead),a.$$nextSibling&&m(a.$$nextSibling)),a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function o(){this.$id=g(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function p(a){if(z.$$phase)throw f("inprog","{0} already in progress",z.$$phase);z.$$phase=a}function q(){z.$$phase=null}function s(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function u(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function v(){}function w(){for(;C.length;)try{C.shift()()}catch(a){b(a)}i=null}function x(){null===i&&(i=k.defer(function(){z.$apply(w)}))}o.prototype={constructor:o,$new:function(b,c){var d;return c=c||this,b?(d=new o,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!=this)&&d.$on("$destroy",l),d},$watch:function(a,b,c,d){var e=j(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,c,e,a);var f=this,g=f.$$watchers,i={fn:b,last:v,get:e,exp:d||a,eq:!!c};return h=null,y(b)||(i.fn=n),g||(g=f.$$watchers=[]),g.unshift(i),s(this,1),function(){M(g,i)>=0&&s(f,-1),h=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(f,f,h)):b(f,e,h)}var e=new Array(a.length),f=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(f,f,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,d){f[0]=a,e[0]=c,b(f,a===c?f:e,d)}):(d(a,function(a,b){var d=h.$watch(a,function(a,d){f[b]=a,e[b]=d,i||(i=!0,h.$evalAsync(c))});g.push(d)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function d(a){f=a;var b,d,e,h,i;if(!r(f)){if(t(f))if(c(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;j<b;j++)i=g[j],h=f[j],e=i!==i&&h!==h,e||i===h||(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(d in f)Fd.call(f,d)&&(b++,h=f[d],i=g[d],d in g?(e=i!==i&&h!==h,e||i===h||(l++,g[d]=h)):(q++,g[d]=h,l++));if(q>b){l++;for(d in g)Fd.call(f,d)||(q--,delete g[d])}}else g!==f&&(g=f,l++);return l}}function e(){if(p?(p=!1,b(f,f,i)):b(f,h,i),k)if(t(f))if(c(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var d in f)Fd.call(f,d)&&(h[d]=f[d])}else h=f}d.$stateful=!0;var f,g,h,i=this,k=b.length>1,l=0,m=j(a,d),n=[],o={},p=!0,q=0;return this.$watch(m,e)},$digest:function(){var a,c,d,g,j,l,m,n,o,r,s,t,u=e,x=this,C=[];p("$digest"),k.$$checkUrlChange(),this===z&&null!==i&&(k.defer.cancel(i),w()),h=null;do{n=!1,r=x;for(var E=0;E<A.length;E++){try{t=A[E],t.scope.$eval(t.expression,t.locals)}catch(F){b(F)}h=null}A.length=0;a:do{if(l=r.$$watchers)for(m=l.length;m--;)try{if(a=l[m])if(j=a.get,(c=j(r))===(d=a.last)||(a.eq?O(c,d):"number"==typeof c&&"number"==typeof d&&isNaN(c)&&isNaN(d))){if(a===h){n=!1;break a}}else n=!0,h=a,a.last=a.eq?N(c,null):c,g=a.fn,g(c,d===v?c:d,r),u<5&&(s=4-u,C[s]||(C[s]=[]),C[s].push({msg:y(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:c,oldVal:d}))}catch(F){b(F)}if(!(o=r.$$watchersCount&&r.$$childHead||r!==x&&r.$$nextSibling))for(;r!==x&&!(o=r.$$nextSibling);)r=r.$parent}while(r=o);if((n||A.length)&&!u--)throw q(),f("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,C)}while(n||A.length);for(q();D<B.length;)try{B[D++]()}catch(F){b(F)}B.length=D=0},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===z&&k.$$applicationDestroyed(),s(this,-this.$$watchersCount);for(var b in this.$$listenerCount)u(this,this.$$listenerCount[b],b);
a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=n,this.$on=this.$watch=this.$watchGroup=function(){return n},this.$$listeners={},this.$$nextSibling=null,m(this)}},$eval:function(a,b){return j(a)(this,b)},$evalAsync:function(a,b){z.$$phase||A.length||k.defer(function(){A.length&&z.$digest()}),A.push({scope:this,expression:j(a),locals:b})},$$postDigest:function(a){B.push(a)},$apply:function(a){try{p("$apply");try{return this.$eval(a)}finally{q()}}catch(c){b(c)}finally{try{z.$digest()}catch(c){throw b(c),c}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&C.push(b),a=j(a),x()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);d!==-1&&(c[d]=null,u(e,1,a))}},$emit:function(a,c){var d,e,f,g=[],h=this,i=!1,j={name:a,targetScope:h,stopPropagation:function(){i=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=P([j],arguments,1);do{for(d=h.$$listeners[a]||g,j.currentScope=h,e=0,f=d.length;e<f;e++)if(d[e])try{d[e].apply(null,k)}catch(l){b(l)}else d.splice(e,1),e--,f--;if(i)return j.currentScope=null,j;h=h.$parent}while(h);return j.currentScope=null,j},$broadcast:function(a,c){var d=this,e=d,f=d,g={name:a,targetScope:d,preventDefault:function(){g.defaultPrevented=!0},defaultPrevented:!1};if(!d.$$listenerCount[a])return g;for(var h,i,j,k=P([g],arguments,1);e=f;){for(g.currentScope=e,h=e.$$listeners[a]||[],i=0,j=h.length;i<j;i++)if(h[i])try{h[i].apply(null,k)}catch(l){b(l)}else h.splice(i,1),i--,j--;if(!(f=e.$$listenerCount[a]&&e.$$childHead||e!==d&&e.$$nextSibling))for(;e!==d&&!(f=e.$$nextSibling);)e=e.$parent}return g.currentScope=null,g}};var z=new o,A=z.$$asyncQueue=[],B=z.$$postDigestQueue=[],C=z.$$applyAsyncQueue=[],D=0;return z}]}function yc(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=Hc(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function zc(a){if("self"===a)return a;if(v(a)){if(a.indexOf("***")>-1)throw vf("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=Zd(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(z(a))return new RegExp("^"+a.source+"$");throw vf("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Ac(a){var b=[];return s(a)&&d(a,function(a){b.push(zc(a))}),b}function Bc(){this.SCE_CONTEXTS=wf;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Ac(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Ac(a)),b},this.$get=["$injector",function(c){function d(a,b){return"self"===a?Ic(b):!!a.exec(b.href)}function e(c){var e,f,g=Hc(c.toString()),h=!1;for(e=0,f=a.length;e<f;e++)if(d(a[e],g)){h=!0;break}if(h)for(e=0,f=b.length;e<f;e++)if(d(b[e],g)){h=!1;break}return h}function f(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function g(a,b){var c=l.hasOwnProperty(a)?l[a]:null;if(!c)throw vf("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||r(b)||""===b)return b;if("string"!=typeof b)throw vf("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new c(b)}function h(a){return a instanceof k?a.$$unwrapTrustedValue():a}function i(a,b){if(null===b||r(b)||""===b)return b;var c=l.hasOwnProperty(a)?l[a]:null;if(c&&b instanceof c)return b.$$unwrapTrustedValue();if(a===wf.RESOURCE_URL){if(e(b))return b;throw vf("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===wf.HTML)return j(b);throw vf("unsafe","Attempting to use an unsafe value in a safe context.")}var j=function(a){throw vf("unsafe","Attempting to use an unsafe value in a safe context.")};c.has("$sanitize")&&(j=c.get("$sanitize"));var k=f(),l={};return l[wf.HTML]=f(k),l[wf.CSS]=f(k),l[wf.URL]=f(k),l[wf.JS]=f(k),l[wf.RESOURCE_URL]=f(l[wf.URL]),{trustAs:g,getTrusted:i,valueOf:h}}]}function Cc(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&Kd<8)throw vf("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var e=qa(wf);e.isEnabled=function(){return a},e.trustAs=c.trustAs,e.getTrusted=c.getTrusted,e.valueOf=c.valueOf,a||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=o),e.parseAs=function(a,c){var d=b(c);return d.literal&&d.constant?d:b(c,function(b){return e.getTrusted(a,b)})};var f=e.parseAs,g=e.getTrusted,h=e.trustAs;return d(wf,function(a,b){var c=Gd(b);e[va("parse_as_"+c)]=function(b){return f(a,b)},e[va("get_trusted_"+c)]=function(b){return g(a,b)},e[va("trust_as_"+c)]=function(b){return h(a,b)}}),e}]}function Dc(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=a.chrome&&a.chrome.app&&a.chrome.app.runtime,g=!f&&a.history&&a.history.pushState,h=l((/android (\d+)/.exec(Gd((a.navigator||{}).userAgent))||[])[1]),i=/Boxee/i.test((a.navigator||{}).userAgent),j=b[0]||{},k=/^(Moz|webkit|ms)(?=[A-Z])/,m=j.body&&j.body.style,n=!1,o=!1;if(m){for(var p in m)if(d=k.exec(p)){c=d[0],c=c[0].toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in m&&"webkit"),n=!!("transition"in m||c+"Transition"in m),o=!!("animation"in m||c+"Animation"in m),!h||n&&o||(n=v(m.webkitTransition),o=v(m.webkitAnimation))}return{history:!(!g||h<4||i),hasEvent:function(a){if("input"===a&&Kd<=11)return!1;if(r(e[a])){var b=j.createElement("div");e[a]="on"+a in b}return e[a]},csp:$d(),vendorPrefix:c,transitions:n,animations:o,android:h}}]}function Ec(){var a;this.httpOptions=function(b){return b?(a=b,this):a},this.$get=["$templateCache","$http","$q","$sce",function(b,c,d,e){function f(g,h){function i(a){if(!h)throw xf("tpload","Failed to load template: {0} (HTTP status: {1} {2})",g,a.status,a.statusText);return d.reject(a)}f.totalPendingRequests++,v(g)&&!r(b.get(g))||(g=e.getTrustedResourceUrl(g));var k=c.defaults&&c.defaults.transformResponse;return Wd(k)?k=k.filter(function(a){return a!==Ab}):k===Ab&&(k=null),c.get(g,j({cache:b,transformResponse:k},a))["finally"](function(){f.totalPendingRequests--}).then(function(a){return b.put(g,a.data),a.data},i)}return f.totalPendingRequests=0,f}]}function Fc(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var e={};return e.findBindings=function(a,b,c){var e=a.getElementsByClassName("ng-binding"),f=[];return d(e,function(a){var e=Ud.element(a).data("$binding");e&&d(e,function(d){if(c){var e=new RegExp("(^|\\s)"+Zd(b)+"(\\s|\\||$)");e.test(d)&&f.push(a)}else d.indexOf(b)!=-1&&f.push(a)})}),f},e.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},e.getLocation=function(){return c.url()},e.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},e.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},e}]}function Gc(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){y(f)||(i=h,h=f,f=n);var j,k=Q(arguments,3),l=s(i)&&!i,m=(l?d:c).defer(),o=m.promise;return j=b.defer(function(){try{m.resolve(f.apply(null,k))}catch(b){m.reject(b),e(b)}finally{delete g[o.$$timeoutId]}l||a.$apply()},h),o.$$timeoutId=j,g[j]=m,o}var g={};return f.cancel=function(a){return!!(a&&a.$$timeoutId in g)&&(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId))},f}]}function Hc(a){var b=a;return Kd&&(yf.setAttribute("href",b),b=yf.href),yf.setAttribute("href",b),{href:yf.href,protocol:yf.protocol?yf.protocol.replace(/:$/,""):"",host:yf.host,search:yf.search?yf.search.replace(/^\?/,""):"",hash:yf.hash?yf.hash.replace(/^#/,""):"",hostname:yf.hostname,port:yf.port,pathname:"/"===yf.pathname.charAt(0)?yf.pathname:"/"+yf.pathname}}function Ic(a){var b=v(a)?Hc(a):a;return b.protocol===zf.protocol&&b.host===zf.host}function Jc(){this.$get=p(a)}function Kc(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var c=a[0]||{},d={},e="";return function(){var a,f,g,h,i,j=c.cookie||"";if(j!==e)for(e=j,a=e.split("; "),d={},g=0;g<a.length;g++)f=a[g],h=f.indexOf("="),h>0&&(i=b(f.substring(0,h)),r(d[i])&&(d[i]=b(f.substring(h+1))));return d}}function Lc(){this.$get=Kc}function Mc(a){function b(e,f){if(t(e)){var g={};return d(e,function(a,c){g[c]=b(c,a)}),g}return a.factory(e+c,f)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",Rc),b("date",ed),b("filter",Nc),b("json",fd),b("limitTo",gd),b("lowercase",Gf),b("number",Sc),b("orderBy",id),b("uppercase",Hf)}function Nc(){return function(a,d,e,f){if(!c(a)){if(null==a)return a;throw b("filter")("notarray","Expected array but received: {0}",a)}f=f||"$";var g,h,i=Qc(d);switch(i){case"function":g=d;break;case"boolean":case"null":case"number":case"string":h=!0;case"object":g=Oc(d,e,f,h);break;default:return a}return Array.prototype.filter.call(a,g)}}function Oc(a,b,c,d){var e,f=t(a)&&c in a;return b===!0?b=O:y(b)||(b=function(a,b){return!r(a)&&(null===a||null===b?a===b:!(t(b)||t(a)&&!q(a))&&(a=Gd(""+a),b=Gd(""+b),a.indexOf(b)!==-1))}),e=function(e){return f&&!t(e)?Pc(e,a[c],b,c,!1):Pc(e,a,b,c,d)}}function Pc(a,b,c,d,e,f){var g=Qc(a),h=Qc(b);if("string"===h&&"!"===b.charAt(0))return!Pc(a,b.substring(1),c,d,e);if(Wd(a))return a.some(function(a){return Pc(a,b,c,d,e)});switch(g){case"object":var i;if(e){for(i in a)if("$"!==i.charAt(0)&&Pc(a[i],b,c,d,!0))return!0;return!f&&Pc(a,b,c,d,!1)}if("object"===h){for(i in b){var j=b[i];if(!y(j)&&!r(j)){var k=i===d,l=k?a:a[i];if(!Pc(l,j,c,d,k,k))return!1}}return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function Qc(a){return null===a?"null":typeof a}function Rc(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return r(c)&&(c=b.CURRENCY_SYM),r(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:Vc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function Sc(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Vc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Tc(a){var b,c,d,e,f,g=0;for((c=a.indexOf(Bf))>-1&&(a=a.replace(Bf,"")),(d=a.search(/e/i))>0?(c<0&&(c=d),c+=+a.slice(d+1),a=a.substring(0,d)):c<0&&(c=a.length),d=0;a.charAt(d)==Cf;d++);if(d==(f=a.length))b=[0],c=1;else{for(f--;a.charAt(f)==Cf;)f--;for(c-=d,b=[],e=0;d<=f;d++,e++)b[e]=+a.charAt(d)}return c>Af&&(b=b.splice(0,Af-1),g=c-1,c=1),{d:b,e:g,i:c}}function Uc(a,b,c,d){var e=a.d,f=e.length-a.i;b=r(b)?Math.min(Math.max(c,f),d):+b;var g=b+a.i,h=e[g];if(g>0){e.splice(Math.max(a.i,g));for(var i=g;i<e.length;i++)e[i]=0}else{f=Math.max(0,f),a.i=1,e.length=Math.max(1,g=b+1),e[0]=0;for(var j=1;j<g;j++)e[j]=0}if(h>=5)if(g-1<0){for(var k=0;k>g;k--)e.unshift(0),a.i++;e.unshift(1),a.i++}else e[g-1]++;for(;f<Math.max(0,b);f++)e.push(0);var l=e.reduceRight(function(a,b,c,d){return b+=a,d[c]=b%10,Math.floor(b/10)},0);l&&(e.unshift(l),a.i++)}function Vc(a,b,c,d,e){if(!v(a)&&!w(a)||isNaN(a))return"";var f,g=!isFinite(a),h=!1,i=Math.abs(a)+"",j="";if(g)j="";else{f=Tc(i),Uc(f,e,b.minFrac,b.maxFrac);var k=f.d,l=f.i,m=f.e,n=[];for(h=k.reduce(function(a,b){return a&&!b},!0);l<0;)k.unshift(0),l++;l>0?n=k.splice(l,k.length):(n=k,k=[0]);var o=[];for(k.length>=b.lgSize&&o.unshift(k.splice(-b.lgSize,k.length).join(""));k.length>b.gSize;)o.unshift(k.splice(-b.gSize,k.length).join(""));k.length&&o.unshift(k.join("")),j=o.join(c),n.length&&(j+=d+n.join("")),m&&(j+="e+"+m)}return a<0&&!h?b.negPre+j+b.negSuf:b.posPre+j+b.posSuf}function Wc(a,b,c,d){var e="";for((a<0||d&&a<=0)&&(d?a=-a+1:(a=-a,e="-")),a=""+a;a.length<b;)a=Cf+a;return c&&(a=a.substr(a.length-b)),e+a}function Xc(a,b,c,d,e){return c=c||0,function(f){var g=f["get"+a]();return(c>0||g>-c)&&(g+=c),0===g&&c==-12&&(g=12),Wc(g,b,d,e)}}function Yc(a,b,c){return function(d,e){var f=d["get"+a](),g=(c?"STANDALONE":"")+(b?"SHORT":""),h=Hd(g+a);return e[h][f]}}function Zc(a,b,c){var d=-1*c,e=d>=0?"+":"";return e+=Wc(Math[d>0?"floor":"ceil"](d/60),2)+Wc(Math.abs(d%60),2)}function $c(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(b<=4?5:12)-b)}function _c(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function ad(a){return function(b){var c=$c(b.getFullYear()),d=_c(b),e=+d-+c,f=1+Math.round(e/6048e5);return Wc(f,a)}}function bd(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function cd(a,b){return a.getFullYear()<=0?b.ERAS[0]:b.ERAS[1]}function dd(a,b){return a.getFullYear()<=0?b.ERANAMES[0]:b.ERANAMES[1]}function ed(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=l(b[9]+b[10]),f=l(b[9]+b[11])),g.call(d,l(b[1]),l(b[2])-1,l(b[3]));var i=l(b[4]||0)-e,j=l(b[5]||0)-f,k=l(b[6]||0),m=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,m),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e,f){var g,h,i="",j=[];if(e=e||"mediumDate",e=a.DATETIME_FORMATS[e]||e,v(c)&&(c=Ff.test(c)?l(c):b(c)),w(c)&&(c=new Date(c)),!x(c)||!isFinite(c.getTime()))return c;for(;e;)h=Ef.exec(e),h?(j=P(j,h,1),e=j.pop()):(j.push(e),e=null);var k=c.getTimezoneOffset();return f&&(k=V(f,k),c=X(c,f,!0)),d(j,function(b){g=Df[b],i+=g?g(c,a.DATETIME_FORMATS,k):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function fd(){return function(a,b){return r(b)&&(b=2),T(a,b)}}function gd(){return function(a,b,d){return b=Math.abs(Number(b))===1/0?Number(b):l(b),isNaN(b)?a:(w(a)&&(a=a.toString()),c(a)?(d=!d||isNaN(d)?0:l(d),d=d<0?Math.max(0,a.length+d):d,b>=0?hd(a,d,d+b):0===d?hd(a,b,a.length):hd(a,Math.max(0,d+b),d)):a)}}function hd(a,b,c){return v(a)?a.slice(b,c):Od.call(a,b,c)}function id(a){function d(b){return b.map(function(b){var c=1,d=o;if(y(b))d=b;else if(v(b)&&("+"!=b.charAt(0)&&"-"!=b.charAt(0)||(c="-"==b.charAt(0)?-1:1,b=b.substring(1)),""!==b&&(d=a(b),d.constant))){var e=d();d=function(a){return a[e]}}return{get:d,descending:c}})}function e(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function f(a){return y(a.valueOf)&&(a=a.valueOf(),e(a))?a:q(a)&&(a=a.toString(),e(a))?a:a}function g(a,b){var c=typeof a;return null===a?(c="string",a="null"):"object"===c&&(a=f(a)),{value:a,type:c,index:b}}function h(a,b){var c=0,d=a.type,e=b.type;if(d===e){var f=a.value,g=b.value;"string"===d?(f=f.toLowerCase(),g=g.toLowerCase()):"object"===d&&(t(f)&&(f=a.index),t(g)&&(g=b.index)),f!==g&&(c=f<g?-1:1)}else c=d<e?-1:1;return c}return function(a,e,f,i){function j(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:l.map(function(c){return g(c.get(a),b)})}}function k(a,b){for(var c=0,d=l.length;c<d;c++){var e=n(a.predicateValues[c],b.predicateValues[c]);if(e)return e*l[c].descending*m}return n(a.tieBreaker,b.tieBreaker)*m}if(null==a)return a;if(!c(a))throw b("orderBy")("notarray","Expected array but received: {0}",a);Wd(e)||(e=[e]),0===e.length&&(e=["+"]);var l=d(e),m=f?-1:1,n=y(i)?i:h,o=Array.prototype.map.call(a,j);return o.sort(k),a=o.map(function(a){return a.value})}}function jd(a){return y(a)&&(a={link:a}),a.restrict=a.restrict||"AC",p(a)}function kd(a,b){a.$name=b}function ld(a,b,c,e,f){var g=this,h=[];g.$error={},g.$$success={},g.$pending=void 0,g.$name=f(b.name||b.ngForm||"")(c),g.$dirty=!1,g.$pristine=!0,g.$valid=!0,g.$invalid=!1,g.$submitted=!1,g.$$parentForm=Kf,g.$rollbackViewValue=function(){d(h,function(a){a.$rollbackViewValue()})},g.$commitViewValue=function(){d(h,function(a){a.$commitViewValue()})},g.$addControl=function(a){la(a.$name,"input"),h.push(a),a.$name&&(g[a.$name]=a),a.$$parentForm=g},g.$$renameControl=function(a,b){var c=a.$name;g[c]===a&&delete g[c],g[b]=a,a.$name=b},g.$removeControl=function(a){a.$name&&g[a.$name]===a&&delete g[a.$name],d(g.$pending,function(b,c){g.$setValidity(c,null,a)}),d(g.$error,function(b,c){g.$setValidity(c,null,a)}),d(g.$$success,function(b,c){g.$setValidity(c,null,a)}),M(h,a),a.$$parentForm=Kf},Ad({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);e===-1&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(M(d,c),0===d.length&&delete a[b])},$animate:e}),g.$setDirty=function(){e.removeClass(a,ug),e.addClass(a,vg),g.$dirty=!0,g.$pristine=!1,g.$$parentForm.$setDirty()},g.$setPristine=function(){e.setClass(a,ug,vg+" "+Lf),g.$dirty=!1,g.$pristine=!0,g.$submitted=!1,d(h,function(a){a.$setPristine()})},g.$setUntouched=function(){d(h,function(a){a.$setUntouched()})},g.$setSubmitted=function(){e.addClass(a,Lf),g.$submitted=!0,g.$$parentForm.$setSubmitted()}}function md(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function nd(a,b,c,d,e,f){od(a,b,c,d,e,f),md(d)}function od(a,b,c,d,e,f){var g=Gd(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(){h=!0}),b.on("compositionend",function(){h=!1,j()})}var i,j=function(a){if(i&&(f.defer.cancel(i),i=null),!h){var e=b.val(),j=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=Yd(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,j)}};if(e.hasEvent("input"))b.on("input",j);else{var k=function(a,b,c){i||(i=f.defer(function(){i=null,b&&b.value===c||j(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&b<19||37<=b&&b<=40||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",j),Zf[g]&&d.$$hasNativeValidators&&g===c.type&&b.on(Yf,function(a){if(!i){var b=this[Ed],c=b.badInput,d=b.typeMismatch;i=f.defer(function(){i=null,b.badInput===c&&b.typeMismatch===d||j(a)})}}),d.$render=function(){var a=d.$isEmpty(d.$viewValue)?"":d.$viewValue;b.val()!==a&&b.val(a)}}function pd(a,b){if(x(a))return a;if(v(a)){Vf.lastIndex=0;var c=Vf.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=$c(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return NaN}function qd(a,b){return function(c,e){var f,g;if(x(c))return c;if(v(c)){if('"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),Pf.test(c))return new Date(c);if(a.lastIndex=0,f=a.exec(c))return f.shift(),g=e?{yyyy:e.getFullYear(),MM:e.getMonth()+1,dd:e.getDate(),HH:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds(),sss:e.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},d(f,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return NaN}}function rd(a,b,c,d){return function(e,f,g,h,i,j,k){function l(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function m(a){return s(a)&&!x(a)?c(a)||void 0:a}sd(e,f,g,h),od(e,f,g,h,i,j);var n,o=h&&h.$options&&h.$options.timezone;if(h.$$parserName=a,h.$parsers.push(function(a){if(h.$isEmpty(a))return null;if(b.test(a)){var d=c(a,n);return o&&(d=X(d,o)),d}}),h.$formatters.push(function(a){if(a&&!x(a))throw Bg("datefmt","Expected `{0}` to be a date",a);return l(a)?(n=a,n&&o&&(n=X(n,o,!0)),k("date")(a,d,o)):(n=null,"")}),s(g.min)||g.ngMin){var p;h.$validators.min=function(a){return!l(a)||r(p)||c(a)>=p},g.$observe("min",function(a){p=m(a),h.$validate()})}if(s(g.max)||g.ngMax){var q;h.$validators.max=function(a){return!l(a)||r(q)||c(a)<=q},g.$observe("max",function(a){q=m(a),h.$validate()})}}}function sd(a,b,c,d){var e=b[0],f=d.$$hasNativeValidators=t(e.validity);f&&d.$parsers.push(function(a){var c=b.prop(Ed)||{};return c.badInput||c.typeMismatch?void 0:a})}function td(a,b,c,d,e,f){if(sd(a,b,c,d),od(a,b,c,d,e,f),d.$$parserName="number",d.$parsers.push(function(a){return d.$isEmpty(a)?null:Sf.test(a)?parseFloat(a):void 0}),d.$formatters.push(function(a){if(!d.$isEmpty(a)){if(!w(a))throw Bg("numfmt","Expected `{0}` to be a number",a);a=a.toString()}return a}),s(c.min)||c.ngMin){var g;d.$validators.min=function(a){return d.$isEmpty(a)||r(g)||a>=g},c.$observe("min",function(a){s(a)&&!w(a)&&(a=parseFloat(a)),g=w(a)&&!isNaN(a)?a:void 0,d.$validate()})}if(s(c.max)||c.ngMax){var h;d.$validators.max=function(a){return d.$isEmpty(a)||r(h)||a<=h},c.$observe("max",function(a){s(a)&&!w(a)&&(a=parseFloat(a)),h=w(a)&&!isNaN(a)?a:void 0,d.$validate()})}}function ud(a,b,c,d,e,f){od(a,b,c,d,e,f),md(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||Qf.test(c)}}function vd(a,b,c,d,e,f){od(a,b,c,d,e,f),md(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||Rf.test(c)}}function wd(a,b,c,d){r(c.name)&&b.attr("name",g());var e=function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)};b.on("click",e),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function xd(a,b,c,d,e){var f;if(s(d)){if(f=a(d),!f.constant)throw Bg("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,d);return f(b)}return e}function yd(a,b,c,d,e,f,g,h){var i=xd(h,a,"ngTrueValue",c.ngTrueValue,!0),j=xd(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a===!1},d.$formatters.push(function(a){return O(a,i)}),d.$parsers.push(function(a){return a?i:j})}function zd(a,b){return a="ngClass"+a,["$animate",function(c){function e(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function f(a){var b=[];return Wd(a)?(d(a,function(a){b=b.concat(f(a))}),b):v(a)?a.split(" "):t(a)?(d(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||oa(),e=[];return d(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&e.push(a))}),h.data("$classCounts",c),e.join(" ")}function m(a,b){var d=e(b,a),f=e(a,b);d=l(d,1),f=l(f,-1),d&&d.length&&c.addClass(h,d),f&&f.length&&c.removeClass(h,f)}function n(a){if(b===!0||(1&g.$index)===b){var c=f(a||[]);if(o){if(!O(a,o)){var d=f(o);m(d,c)}}else j(c)}o=Wd(a)?a.map(function(a){return qa(a)}):qa(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(b){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var e=1&c;if(e!==(1&d)){var h=f(g.$eval(i[a]));e===b?j(h):k(h)}})}}}]}function Ad(a){function b(a,b,h){r(b)?c("$pending",a,h):d("$pending",a,h),F(b)?b?(k(g.$error,a,h),j(g.$$success,a,h)):(j(g.$error,a,h),k(g.$$success,a,h)):(k(g.$error,a,h),k(g.$$success,a,h)),g.$pending?(e(yg,!0),g.$valid=g.$invalid=void 0,f("",null)):(e(yg,!1),g.$valid=Bd(g.$error),g.$invalid=!g.$valid,f("",g.$valid));var i;i=g.$pending&&g.$pending[a]?void 0:!g.$error[a]&&(!!g.$$success[a]||null),f(a,i),g.$$parentForm.$setValidity(a,i,g)}function c(a,b,c){g[a]||(g[a]={}),j(g[a],b,c)}function d(a,b,c){g[a]&&k(g[a],b,c),Bd(g[a])&&(g[a]=void 0)}function e(a,b){b&&!i[a]?(l.addClass(h,a),i[a]=!0):!b&&i[a]&&(l.removeClass(h,a),i[a]=!1)}function f(a,b){a=a?"-"+ha(a,"-"):"",e(sg+a,b===!0),e(tg+a,b===!1)}var g=a.ctrl,h=a.$element,i={},j=a.set,k=a.unset,l=a.$animate;i[tg]=!(i[sg]=h.hasClass(sg)),g.$setValidity=b}function Bd(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Cd(a){a[0].hasAttribute("selected")&&(a[0].selected=!0)}var Dd=/^\/(.+)\/([a-z]*)$/,Ed="validity",Fd=Object.prototype.hasOwnProperty,Gd=function(a){return v(a)?a.toLowerCase():a},Hd=function(a){return v(a)?a.toUpperCase():a},Id=function(a){return v(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},Jd=function(a){return v(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(a.charCodeAt(0)&-33)}):a};"i"!=="I".toLowerCase()&&(Gd=Id,Hd=Jd);var Kd,Ld,Md,Nd,Od=[].slice,Pd=[].splice,Qd=[].push,Rd=Object.prototype.toString,Sd=Object.getPrototypeOf,Td=b("ng"),Ud=a.angular||(a.angular={}),Vd=0;Kd=a.document.documentMode,n.$inject=[],o.$inject=[];var Wd=Array.isArray,Xd=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,Yd=function(a){return v(a)?a.trim():a},Zd=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},$d=function(){function b(){try{return new Function(""),!1}catch(a){return!0}}if(!s($d.rules)){var c=a.document.querySelector("[ng-csp]")||a.document.querySelector("[data-ng-csp]");if(c){var d=c.getAttribute("ng-csp")||c.getAttribute("data-ng-csp");$d.rules={noUnsafeEval:!d||d.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!d||d.indexOf("no-inline-style")!==-1}}else $d.rules={noUnsafeEval:b(),noInlineStyle:!1}}return $d.rules},_d=function(){if(s(_d.name_))return _d.name_;var b,c,d,e,f=be.length;for(c=0;c<f;++c)if(d=be[c],b=a.document.querySelector("["+d.replace(":","\\:")+"jq]")){e=b.getAttribute(d+"jq");break}return _d.name_=e},ae=/:/g,be=["ng-","data-ng-","ng:","x-ng-"],ce=/[A-Z]/g,de=!1,ee=1,fe=2,ge=3,he=8,ie=9,je=11,ke={full:"1.5.8",major:1,minor:5,dot:8,codeName:"arbitrary-fallbacks"};Da.expando="ng339";var le=Da.cache={},me=1,ne=function(a,b,c){a.addEventListener(b,c,!1)},oe=function(a,b,c){a.removeEventListener(b,c,!1)};Da._data=function(a){return this.cache[a[this.expando]]||{}};var pe=/([\:\-\_]+(.))/g,qe=/^moz([A-Z])/,re={mouseleave:"mouseout",mouseenter:"mouseover"},se=b("jqLite"),te=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ue=/<|&#?\w+;/,ve=/<([\w:-]+)/,we=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,xe={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};xe.optgroup=xe.option,xe.tbody=xe.tfoot=xe.colgroup=xe.caption=xe.thead,xe.th=xe.td;var ye=a.Node.prototype.contains||function(a){return!!(16&this.compareDocumentPosition(a))},ze=Da.prototype={ready:function(b){function c(){d||(d=!0,b())}var d=!1;"complete"===a.document.readyState?a.setTimeout(c):(this.on("DOMContentLoaded",c),Da(a).on("load",c))},toString:function(){var a=[];return d(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return Ld(a>=0?this[a]:this[this.length+a])},length:0,push:Qd,sort:[].sort,splice:[].splice},Ae={};d("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Ae[Gd(a)]=a});var Be={};d("input,select,option,textarea,button,form,details".split(","),function(a){Be[a]=!0});var Ce={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};d({data:Ja,removeData:Ha,hasData:ya,cleanData:za},function(a,b){Da[b]=a}),d({data:Ja,inheritedData:Pa,scope:function(a){return Ld.data(a,"$scope")||Pa(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return Ld.data(a,"$isolateScope")||Ld.data(a,"$isolateScopeNoTemplate")},controller:Oa,injector:function(a){return Pa(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Ka,css:function(a,b,c){return b=va(b),s(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,c){var d=a.nodeType;if(d!==ge&&d!==fe&&d!==he){var e=Gd(b);if(Ae[e]){if(!s(c))return a[b]||(a.attributes.getNamedItem(b)||n).specified?e:void 0;c?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(c))a.setAttribute(b,c);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?void 0:f}}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(r(b)){var c=a.nodeType;return c===ee||c===ge?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(r(b)){if(a.multiple&&"select"===L(a)){var c=[];return d(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){return r(b)?a.innerHTML:(Fa(a,!0),void(a.innerHTML=b))},empty:Qa},function(a,b){Da.prototype[b]=function(b,c){var d,e,f=this.length;if(a!==Qa&&r(2==a.length&&a!==Ka&&a!==Oa?b:c)){if(t(b)){for(d=0;d<f;d++)if(a===Ja)a(this[d],b);else for(e in b)a(this[d],e,b[e]);return this}for(var g=a.$dv,h=r(g)?Math.min(f,1):f,i=0;i<h;i++){var j=a(this[i],b,c);g=g?g+j:j}return g}for(d=0;d<f;d++)a(this[d],b,c);return this}}),d({removeData:Ha,on:function(a,b,c,d){if(s(d))throw se("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(xa(a)){var e=Ia(a,!0),f=e.events,g=e.handle;g||(g=e.handle=Va(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length,j=function(b,d,e){var h=f[b];h||(h=f[b]=[],h.specialHandlerWrapper=d,"$destroy"===b||e||ne(a,b,g)),h.push(c)};i--;)b=h[i],re[b]?(j(re[b],Xa),j(b,void 0,!0)):j(b)}},off:Ga,one:function(a,b,c){a=Ld(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,e=a.parentNode;Fa(a),d(new Da(b),function(b){c?e.insertBefore(b,c.nextSibling):e.replaceChild(b,a),c=b})},children:function(a){var b=[];return d(a.childNodes,function(a){a.nodeType===ee&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===ee||c===je){b=new Da(b);for(var d=0,e=b.length;d<e;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===ee){var c=a.firstChild;d(new Da(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){Ca(a,Ld(b).eq(0).clone()[0])},remove:Ra,detach:function(a){Ra(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new Da(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}},addClass:Ma,removeClass:La,toggleClass:function(a,b,c){b&&d(b.split(" "),function(b){var d=c;r(d)&&(d=!Ka(a,b)),(d?Ma:La)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==je?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:Ea,triggerHandler:function(a,b,c){var e,f,g,h=b.type||b,i=Ia(a),k=i&&i.events,l=k&&k[h];l&&(e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:n,type:h,target:a},b.type&&(e=j(e,b)),f=qa(l),g=c?[e].concat(c):[e],d(f,function(b){e.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){Da.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;f<g;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=Ld(e))):Na(e,a(this[f],b,c,d));return s(e)?e:this},Da.prototype.bind=Da.prototype.on,Da.prototype.unbind=Da.prototype.off}),$a.prototype={put:function(a,b){this[Za(a,this.nextUid)]=b},get:function(a){return this[Za(a,this.nextUid)]},remove:function(a){var b=this[a=Za(a,this.nextUid)];return delete this[a],b}};var De=[function(){this.$get=[function(){return $a}]}],Ee=/^([^\(]+?)=>/,Fe=/^[^\(]*\(\s*([^\)]*)\)/m,Ge=/,/,He=/^\s*(_?)(\S+?)\1\s*$/,Ie=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Je=b("$injector");db.$$annotate=cb;var Ke=b("$animate"),Le=1,Me="ng-animate",Ne=function(){this.$get=n},Oe=function(){var a=new $a,b=[];this.$get=["$$AnimateRunner","$rootScope",function(c,e){
function f(a,b,c){var e=!1;return b&&(b=v(b)?b.split(" "):Wd(b)?b:[],d(b,function(b){b&&(e=!0,a[b]=c)})),e}function g(){d(b,function(b){var c=a.get(b);if(c){var e=hb(b.attr("class")),f="",g="";d(c,function(a,b){var c=!!e[b];a!==c&&(a?f+=(f.length?" ":"")+b:g+=(g.length?" ":"")+b)}),d(b,function(a){f&&Ma(a,f),g&&La(a,g)}),a.remove(b)}}),b.length=0}function h(c,d,h){var i=a.get(c)||{},j=f(i,d,!0),k=f(i,h,!1);(j||k)&&(a.put(c,i),b.push(c),1===b.length&&e.$$postDigest(g))}return{enabled:n,on:n,off:n,pin:n,push:function(a,b,d,e){e&&e(),d=d||{},d.from&&a.css(d.from),d.to&&a.css(d.to),(d.addClass||d.removeClass)&&h(a,d.addClass,d.removeClass);var f=new c;return f.complete(),f}}}]},Pe=["$provide",function(a){var b=this;this.$$registeredAnimations=Object.create(null),this.register=function(c,d){if(c&&"."!==c.charAt(0))throw Ke("notcsel","Expecting class selector starting with '.' got '{0}'.",c);var e=c+"-animation";b.$$registeredAnimations[c.substr(1)]=e,a.factory(e,d)},this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null,this.$$classNameFilter)){var b=new RegExp("(\\s+|\\/)"+Me+"(\\s+|\\/)");if(b.test(this.$$classNameFilter.toString()))throw Ke("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Me)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(a){function b(a,b,c){if(c){var d=gb(c);!d||d.parentNode||d.previousElementSibling||(c=null)}c?c.after(a):b.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(c,d,e,f){return d=d&&Ld(d),e=e&&Ld(e),d=d||e.parent(),b(c,d,e),a.push(c,"enter",ib(f))},move:function(c,d,e,f){return d=d&&Ld(d),e=e&&Ld(e),d=d||e.parent(),b(c,d,e),a.push(c,"move",ib(f))},leave:function(b,c){return a.push(b,"leave",ib(c),function(){b.remove()})},addClass:function(b,c,d){return d=ib(d),d.addClass=fb(d.addclass,c),a.push(b,"addClass",d)},removeClass:function(b,c,d){return d=ib(d),d.removeClass=fb(d.removeClass,c),a.push(b,"removeClass",d)},setClass:function(b,c,d,e){return e=ib(e),e.addClass=fb(e.addClass,c),e.removeClass=fb(e.removeClass,d),a.push(b,"setClass",e)},animate:function(b,c,d,e,f){return f=ib(f),f.from=f.from?j(f.from,c):c,f.to=f.to?j(f.to,d):d,e=e||"ng-inline-animate",f.tempClasses=fb(f.tempClasses,e),a.push(b,"animate",f)}}}]}],Qe=function(){this.$get=["$$rAF",function(a){function b(b){c.push(b),c.length>1||a(function(){for(var a=0;a<c.length;a++)c[a]();c=[]})}var c=[];return function(){var a=!1;return b(function(){a=!0}),function(c){a?c():b(c)}}}]},Re=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(a,b,c,e,f){function g(a){this.setHost(a);var b=c(),d=function(a){f(a,0,!1)};this._doneCallbacks=[],this._tick=function(a){var c=e[0];c&&c.hidden?d(a):b(a)},this._state=0}var h=0,i=1,j=2;return g.chain=function(a,b){function c(){return d===a.length?void b(!0):void a[d](function(a){return a===!1?void b(!1):(d++,void c())})}var d=0;c()},g.all=function(a,b){function c(c){f=f&&c,++e===a.length&&b(f)}var e=0,f=!0;d(a,function(a){a.done(c)})},g.prototype={setHost:function(a){this.host=a||{}},done:function(a){this._state===j?a():this._doneCallbacks.push(a)},progress:n,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){b===!1?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(a){var b=this;b._state===h&&(b._state=i,b._tick(function(){b._resolve(a)}))},_resolve:function(a){this._state!==j&&(d(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=j)}},g}]},Se=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,c){return function(b,d){function e(){return a(function(){f(),h||i.complete(),h=!0}),i}function f(){g.addClass&&(b.addClass(g.addClass),g.addClass=null),g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null),g.to&&(b.css(g.to),g.to=null)}var g=d||{};g.$$prepared||(g=N(g)),g.cleanupStyles&&(g.from=g.to=null),g.from&&(b.css(g.from),g.from=null);var h,i=new c;return{start:e,end:e}}}]},Te=b("$compile"),Ue=new nb;ob.$inject=["$provide","$$sanitizeUriProvider"],pb.prototype.isFirstChange=function(){return this.previousValue===Ue};var Ve=/^((?:x|data)[\:\-_])/i,We=b("$controller"),Xe=/^(\S+)(\s+as\s+([\w$]+))?$/,Ye=function(){this.$get=["$document",function(a){return function(b){return b?!b.nodeType&&b instanceof Ld&&(b=b[0]):b=a[0].body,b.offsetWidth+1}}]},Ze="application/json",$e={"Content-Type":Ze+";charset=utf-8"},_e=/^\[|^\{(?!\{)/,af={"[":/]$/,"{":/}$/},bf=/^\)\]\}',?\n/,cf=b("$http"),df=function(a){return function(){throw cf("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",a)}},ef=Ud.$interpolateMinErr=b("$interpolate");ef.throwNoconcat=function(a){throw ef("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a)},ef.interr=function(a,b){return ef("interr","Can't interpolate: {0}\n{1}",a,b.toString())};var ff=function(){this.$get=["$window",function(a){function b(a){var b=function(a){b.data=a,b.called=!0};return b.id=a,b}var c=a.angular.callbacks,d={};return{createCallback:function(a){var e="_"+(c.$$counter++).toString(36),f="angular.callbacks."+e,g=b(e);return d[f]=c[e]=g,f},wasCalled:function(a){return d[a].called},getResponse:function(a){return d[a].data},removeCallback:function(a){var b=d[a];delete c[b.id],delete d[a]}}}]},gf=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,hf={http:80,https:443,ftp:21},jf=b("$location"),kf={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Yb("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=gf.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Yb("$$protocol"),host:Yb("$$host"),port:Yb("$$port"),path:Zb("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(v(a)||w(a))a=a.toString(),this.$$search=$(a);else{if(!t(a))throw jf("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=N(a,{}),d(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Zb("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};d([Xb,Wb,Vb],function(a){a.prototype=Object.create(kf),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==Vb||!this.$$html5)throw jf("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=r(b)?null:b,this}});var lf=b("$parse"),mf=Function.prototype.call,nf=Function.prototype.apply,of=Function.prototype.bind,pf=oa();d("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){pf[a]=!0});var qf={n:"\n",f:"\f",r:"\r",t:"\t",v:"\x0B","'":"'",'"':'"'},rf=function(a){this.options=a};rf.prototype={constructor:rf,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;){var b=this.text.charAt(this.index);if('"'===b||"'"===b)this.readString(b);else if(this.isNumber(b)||"."===b&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(b,"(){}[].,;:?"))this.tokens.push({index:this.index,text:b}),this.index++;else if(this.isWhitespace(b))this.index++;else{var c=b+this.peek(),d=c+this.peek(2),e=pf[b],f=pf[c],g=pf[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:!0}),this.index+=h.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(a,b){return b.indexOf(a)!==-1},peek:function(a){var b=a||1;return this.index+b<this.text.length&&this.text.charAt(this.index+b)},isNumber:function(a){return"0"<=a&&a<="9"&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\x0B"===a||""===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&a<="z"||"A"<=a&&a<="Z"||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var c=a.charCodeAt(0),d=b.charCodeAt(0);return c>=55296&&c<=56319&&d>=56320&&d<=57343?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw lf("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Gd(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=qf[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var sf=function(a,b){this.lexer=a,this.options=b};sf.Program="Program",sf.ExpressionStatement="ExpressionStatement",sf.AssignmentExpression="AssignmentExpression",sf.ConditionalExpression="ConditionalExpression",sf.LogicalExpression="LogicalExpression",sf.BinaryExpression="BinaryExpression",sf.UnaryExpression="UnaryExpression",sf.CallExpression="CallExpression",sf.MemberExpression="MemberExpression",sf.Identifier="Identifier",sf.Literal="Literal",sf.ArrayExpression="ArrayExpression",sf.Property="Property",sf.ObjectExpression="ObjectExpression",sf.ThisExpression="ThisExpression",sf.LocalsExpression="LocalsExpression",sf.NGValueParameter="NGValueParameter",sf.prototype={ast:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b},program:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:sf.Program,body:a}},expressionStatement:function(){return{type:sf.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a,b=this.expression();a=this.expect("|");)b=this.filter(b);return b},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();return this.expect("=")&&(a={type:sf.AssignmentExpression,left:a,right:this.assignment(),operator:"="}),a},ternary:function(){var a,b,c=this.logicalOR();return this.expect("?")&&(a=this.expression(),this.consume(":"))?(b=this.expression(),{type:sf.ConditionalExpression,test:c,alternate:a,consequent:b}):c},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:sf.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:sf.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b={type:sf.BinaryExpression,operator:a.text,left:b,right:this.relational()};return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b={type:sf.BinaryExpression,operator:a.text,left:b,right:this.additive()};return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b={type:sf.BinaryExpression,operator:a.text,left:b,right:this.multiplicative()};return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b={type:sf.BinaryExpression,operator:a.text,left:b,right:this.unary()};return b},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:sf.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=N(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:sf.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:sf.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:sf.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:sf.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){for(var b=[a],c={type:sf.CallExpression,callee:this.identifier(),arguments:b,filter:!0};this.expect(":");)b.push(this.expression());return c},parseArguments:function(){var a=[];if(")"!==this.peekToken().text)do a.push(this.filterChain());while(this.expect(","));return a},identifier:function(){var a=this.consume();return a.identifier||this.throwError("is not a valid identifier",a),{type:sf.Identifier,name:a.text}},constant:function(){return{type:sf.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:sf.ArrayExpression,elements:a}},object:function(){var a,b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;a={type:sf.Property,kind:"init"},this.peek().constant?(a.key=this.constant(),a.computed=!1,this.consume(":"),a.value=this.expression()):this.peek().identifier?(a.key=this.identifier(),a.computed=!1,this.peek(":")?(this.consume(":"),a.value=this.expression()):a.value=a.key):this.peek("[")?(this.consume("["),a.key=this.expression(),this.consume("]"),a.computed=!0,this.consume(":"),a.value=this.expression()):this.throwError("invalid key",this.peek()),b.push(a)}while(this.expect(","));return this.consume("}"),{type:sf.ObjectExpression,properties:b}},throwError:function(a,b){throw lf("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},consume:function(a){if(0===this.tokens.length)throw lf("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},peekToken:function(){if(0===this.tokens.length)throw lf("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a],g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e)return f}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return!!e&&(this.tokens.shift(),e)},selfReferential:{"this":{type:sf.ThisExpression},$locals:{type:sf.LocalsExpression}}},oc.prototype={compile:function(a,b){var c=this,e=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},ic(e,c.$filter);var f,g="";if(this.stage="assign",f=lc(e)){this.state.computing="assign";var h=this.nextId();this.recurse(f,h),this.return_(h),g="fn.assign="+this.generateFunction("assign","s,v,l")}var i=jc(e.body);c.stage="inputs",d(i,function(a,b){var d="fn"+b;c.state[d]={vars:[],body:[],own:{}},c.state.computing=d;var e=c.nextId();c.recurse(a,e),c.return_(e),c.state.inputs.push(d),a.watchId=b}),this.state.computing="fn",this.stage="main",this.recurse(e);var j='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+g+this.watchFns()+"return fn;",k=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",j)(this.$filter,ac,cc,dc,bc,ec,fc,gc,a);return this.state=this.stage=void 0,k.literal=mc(e),k.constant=nc(e),k},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,c=this;return d(b,function(b){a.push("var "+b+"="+c.generateFunction(b,"s"))}),b.length&&a.push("fn.inputs=["+b.join(",")+"];"),a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;return d(this.state.filters,function(c,d){a.push(c+"=$filter("+b.escape(d)+")")}),a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,c,e,f,g){var h,i,j,k,l,m=this;if(e=e||n,!g&&s(a.watchId))return b=b||this.nextId(),void this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,c,e,f,!0));switch(a.type){case sf.Program:d(a.body,function(b,c){m.recurse(b.expression,void 0,void 0,function(a){i=a}),c!==a.body.length-1?m.current().body.push(i,";"):m.return_(i)});break;case sf.Literal:k=this.escape(a.value),this.assign(b,k),e(k);break;case sf.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){i=a}),k=a.operator+"("+this.ifDefined(i,0)+")",this.assign(b,k),e(k);break;case sf.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){h=a}),this.recurse(a.right,void 0,void 0,function(a){i=a}),k="+"===a.operator?this.plus(h,i):"-"===a.operator?this.ifDefined(h,0)+a.operator+this.ifDefined(i,0):"("+h+")"+a.operator+"("+i+")",this.assign(b,k),e(k);break;case sf.LogicalExpression:b=b||this.nextId(),m.recurse(a.left,b),m.if_("&&"===a.operator?b:m.not(b),m.lazyRecurse(a.right,b)),e(b);break;case sf.ConditionalExpression:b=b||this.nextId(),m.recurse(a.test,b),m.if_(b,m.lazyRecurse(a.alternate,b),m.lazyRecurse(a.consequent,b)),e(b);break;case sf.Identifier:b=b||this.nextId(),c&&(c.context="inputs"===m.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),c.computed=!1,c.name=a.name),ac(a.name),m.if_("inputs"===m.stage||m.not(m.getHasOwnProperty("l",a.name)),function(){m.if_("inputs"===m.stage||"s",function(){f&&1!==f&&m.if_(m.not(m.nonComputedMember("s",a.name)),m.lazyAssign(m.nonComputedMember("s",a.name),"{}")),m.assign(b,m.nonComputedMember("s",a.name))})},b&&m.lazyAssign(b,m.nonComputedMember("l",a.name))),(m.state.expensiveChecks||qc(a.name))&&m.addEnsureSafeObject(b),e(b);break;case sf.MemberExpression:h=c&&(c.context=this.nextId())||this.nextId(),b=b||this.nextId(),m.recurse(a.object,h,void 0,function(){m.if_(m.notNull(h),function(){f&&1!==f&&m.addEnsureSafeAssignContext(h),a.computed?(i=m.nextId(),m.recurse(a.property,i),m.getStringValue(i),m.addEnsureSafeMemberName(i),f&&1!==f&&m.if_(m.not(m.computedMember(h,i)),m.lazyAssign(m.computedMember(h,i),"{}")),k=m.ensureSafeObject(m.computedMember(h,i)),m.assign(b,k),c&&(c.computed=!0,c.name=i)):(ac(a.property.name),f&&1!==f&&m.if_(m.not(m.nonComputedMember(h,a.property.name)),m.lazyAssign(m.nonComputedMember(h,a.property.name),"{}")),k=m.nonComputedMember(h,a.property.name),(m.state.expensiveChecks||qc(a.property.name))&&(k=m.ensureSafeObject(k)),m.assign(b,k),c&&(c.computed=!1,c.name=a.property.name))},function(){m.assign(b,"undefined")}),e(b)},!!f);break;case sf.CallExpression:b=b||this.nextId(),a.filter?(i=m.filter(a.callee.name),j=[],d(a.arguments,function(a){var b=m.nextId();m.recurse(a,b),j.push(b)}),k=i+"("+j.join(",")+")",m.assign(b,k),e(b)):(i=m.nextId(),h={},j=[],m.recurse(a.callee,i,h,function(){m.if_(m.notNull(i),function(){m.addEnsureSafeFunction(i),d(a.arguments,function(a){m.recurse(a,m.nextId(),void 0,function(a){j.push(m.ensureSafeObject(a))})}),h.name?(m.state.expensiveChecks||m.addEnsureSafeObject(h.context),k=m.member(h.context,h.name,h.computed)+"("+j.join(",")+")"):k=i+"("+j.join(",")+")",k=m.ensureSafeObject(k),m.assign(b,k)},function(){m.assign(b,"undefined")}),e(b)}));break;case sf.AssignmentExpression:if(i=this.nextId(),h={},!kc(a.left))throw lf("lval","Trying to assign a value to a non l-value");this.recurse(a.left,void 0,h,function(){m.if_(m.notNull(h.context),function(){m.recurse(a.right,i),m.addEnsureSafeObject(m.member(h.context,h.name,h.computed)),m.addEnsureSafeAssignContext(h.context),k=m.member(h.context,h.name,h.computed)+a.operator+i,m.assign(b,k),e(b||k)})},1);break;case sf.ArrayExpression:j=[],d(a.elements,function(a){m.recurse(a,m.nextId(),void 0,function(a){j.push(a)})}),k="["+j.join(",")+"]",this.assign(b,k),e(k);break;case sf.ObjectExpression:j=[],l=!1,d(a.properties,function(a){a.computed&&(l=!0)}),l?(b=b||this.nextId(),this.assign(b,"{}"),d(a.properties,function(a){a.computed?(h=m.nextId(),m.recurse(a.key,h)):h=a.key.type===sf.Identifier?a.key.name:""+a.key.value,i=m.nextId(),m.recurse(a.value,i),m.assign(m.member(b,h,a.computed),i)})):(d(a.properties,function(b){m.recurse(b.value,a.constant?void 0:m.nextId(),void 0,function(a){j.push(m.escape(b.key.type===sf.Identifier?b.key.name:""+b.key.value)+":"+a)})}),k="{"+j.join(",")+"}",this.assign(b,k)),e(b||k);break;case sf.ThisExpression:this.assign(b,"s"),e("s");break;case sf.LocalsExpression:this.assign(b,"l"),e("l");break;case sf.NGValueParameter:this.assign(b,"v"),e("v")}},getHasOwnProperty:function(a,b){var c=a+"."+b,d=this.current().own;return d.hasOwnProperty(c)||(d[c]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")")),d[c]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){return this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0)),this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,c){if(a===!0)b();else{var d=this.current().body;d.push("if(",a,"){"),b(),d.push("}"),c&&(d.push("else{"),c(),d.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var c=/[$_a-zA-Z][$_a-zA-Z0-9]*/,d=/[^$_a-zA-Z0-9]/g;return c.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,c){return c?this.computedMember(a,b):this.nonComputedMember(a,b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},addEnsureSafeAssignContext:function(a){this.current().body.push(this.ensureSafeAssignContext(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},ensureSafeAssignContext:function(a){return"ensureSafeAssignContext("+a+",text)"},lazyRecurse:function(a,b,c,d,e,f){var g=this;return function(){g.recurse(a,b,c,d,e,f)}},lazyAssign:function(a,b){var c=this;return function(){c.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(v(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(w(a))return a.toString();if(a===!0)return"true";if(a===!1)return"false";if(null===a)return"null";if("undefined"==typeof a)return"undefined";throw lf("esc","IMPOSSIBLE")},nextId:function(a,b){var c="v"+this.state.nextId++;return a||this.current().vars.push(c+(b?"="+b:"")),c},current:function(){return this.state[this.state.computing]}},pc.prototype={compile:function(a,b){var c=this,e=this.astBuilder.ast(a);this.expression=a,this.expensiveChecks=b,ic(e,c.$filter);var f,g;(f=lc(e))&&(g=this.recurse(f));var h,i=jc(e.body);i&&(h=[],d(i,function(a,b){var d=c.recurse(a);a.input=d,h.push(d),a.watchId=b}));var j=[];d(e.body,function(a){j.push(c.recurse(a.expression))});var k=0===e.body.length?n:1===e.body.length?j[0]:function(a,b){var c;return d(j,function(d){c=d(a,b)}),c};return g&&(k.assign=function(a,b,c){return g(a,c,b)}),h&&(k.inputs=h),k.literal=mc(e),k.constant=nc(e),k},recurse:function(a,b,c){var e,f,g,h=this;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case sf.Literal:return this.value(a.value,b);case sf.UnaryExpression:return f=this.recurse(a.argument),this["unary"+a.operator](f,b);case sf.BinaryExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,b);case sf.LogicalExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,b);case sf.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case sf.Identifier:return ac(a.name,h.expression),h.identifier(a.name,h.expensiveChecks||qc(a.name),b,c,h.expression);case sf.MemberExpression:return e=this.recurse(a.object,!1,!!c),a.computed||(ac(a.property.name,h.expression),f=a.property.name),a.computed&&(f=this.recurse(a.property)),a.computed?this.computedMember(e,f,b,c,h.expression):this.nonComputedMember(e,f,h.expensiveChecks,b,c,h.expression);case sf.CallExpression:return g=[],d(a.arguments,function(a){g.push(h.recurse(a))}),a.filter&&(f=this.$filter(a.callee.name)),a.filter||(f=this.recurse(a.callee,!0)),a.filter?function(a,c,d,e){for(var h=[],i=0;i<g.length;++i)h.push(g[i](a,c,d,e));var j=f.apply(void 0,h,e);return b?{context:void 0,name:void 0,value:j}:j}:function(a,c,d,e){var i,j=f(a,c,d,e);if(null!=j.value){cc(j.context,h.expression),dc(j.value,h.expression);for(var k=[],l=0;l<g.length;++l)k.push(cc(g[l](a,c,d,e),h.expression));i=cc(j.value.apply(j.context,k),h.expression)}return b?{value:i}:i};case sf.AssignmentExpression:return e=this.recurse(a.left,!0,1),f=this.recurse(a.right),function(a,c,d,g){var i=e(a,c,d,g),j=f(a,c,d,g);return cc(i.value,h.expression),ec(i.context),i.context[i.name]=j,b?{value:j}:j};case sf.ArrayExpression:return g=[],d(a.elements,function(a){g.push(h.recurse(a))}),function(a,c,d,e){for(var f=[],h=0;h<g.length;++h)f.push(g[h](a,c,d,e));return b?{value:f}:f};case sf.ObjectExpression:return g=[],d(a.properties,function(a){a.computed?g.push({key:h.recurse(a.key),computed:!0,value:h.recurse(a.value)}):g.push({key:a.key.type===sf.Identifier?a.key.name:""+a.key.value,computed:!1,value:h.recurse(a.value)})}),function(a,c,d,e){for(var f={},h=0;h<g.length;++h)g[h].computed?f[g[h].key(a,c,d,e)]=g[h].value(a,c,d,e):f[g[h].key]=g[h].value(a,c,d,e);return b?{value:f}:f};case sf.ThisExpression:return function(a){return b?{value:a}:a};case sf.LocalsExpression:return function(a,c){return b?{value:c}:c};case sf.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=s(g)?+g:0,b?{value:g}:g}},"unary-":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=s(g)?-g:0,b?{value:g}:g}},"unary!":function(a,b){return function(c,d,e,f){var g=!a(c,d,e,f);return b?{value:g}:g}},"binary+":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=gc(h,i);return c?{value:j}:j}},"binary-":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=(s(h)?h:0)-(s(i)?i:0);return c?{value:j}:j}},"binary*":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)*b(d,e,f,g);return c?{value:h}:h}},"binary/":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)/b(d,e,f,g);return c?{value:h}:h}},"binary%":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)%b(d,e,f,g);return c?{value:h}:h}},"binary===":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)===b(d,e,f,g);return c?{value:h}:h}},"binary!==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!==b(d,e,f,g);return c?{value:h}:h}},"binary==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)==b(d,e,f,g);return c?{value:h}:h}},"binary!=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!=b(d,e,f,g);return c?{value:h}:h}},"binary<":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<b(d,e,f,g);return c?{value:h}:h}},"binary>":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>b(d,e,f,g);return c?{value:h}:h}},"binary<=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<=b(d,e,f,g);return c?{value:h}:h}},"binary>=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>=b(d,e,f,g);return c?{value:h}:h}},"binary&&":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)&&b(d,e,f,g);return c?{value:h}:h}},"binary||":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)||b(d,e,f,g);return c?{value:h}:h}},"ternary?:":function(a,b,c,d){return function(e,f,g,h){var i=a(e,f,g,h)?b(e,f,g,h):c(e,f,g,h);return d?{value:i}:i}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,c,d,e){return function(f,g,h,i){var j=g&&a in g?g:f;d&&1!==d&&j&&!j[a]&&(j[a]={});var k=j?j[a]:void 0;return b&&cc(k,e),c?{context:j,name:a,value:k}:k}},computedMember:function(a,b,c,d,e){return function(f,g,h,i){var j,k,l=a(f,g,h,i);return null!=l&&(j=b(f,g,h,i),j=bc(j),ac(j,e),d&&1!==d&&(ec(l),l&&!l[j]&&(l[j]={})),k=l[j],cc(k,e)),c?{context:l,name:j,value:k}:k}},nonComputedMember:function(a,b,c,d,e,f){return function(g,h,i,j){var k=a(g,h,i,j);e&&1!==e&&(ec(k),k&&!k[b]&&(k[b]={}));var l=null!=k?k[b]:void 0;return(c||qc(b))&&cc(l,f),d?{context:k,name:b,value:l}:l}},inputs:function(a,b){return function(c,d,e,f){return f?f[b]:a(c,d,e)}}};var tf=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c,this.ast=new sf(a,c),this.astCompiler=c.csp?new pc(this.ast,b):new oc(this.ast,b)};tf.prototype={constructor:tf,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};var uf=Object.prototype.valueOf,vf=b("$sce"),wf={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},xf=b("$compile"),yf=a.document.createElement("a"),zf=Hc(a.location.href);
Kc.$inject=["$document"],Mc.$inject=["$provide"];var Af=22,Bf=".",Cf="0";Rc.$inject=["$locale"],Sc.$inject=["$locale"];var Df={yyyy:Xc("FullYear",4,0,!1,!0),yy:Xc("FullYear",2,0,!0,!0),y:Xc("FullYear",1,0,!1,!0),MMMM:Yc("Month"),MMM:Yc("Month",!0),MM:Xc("Month",2,1),M:Xc("Month",1,1),LLLL:Yc("Month",!1,!0),dd:Xc("Date",2),d:Xc("Date",1),HH:Xc("Hours",2),H:Xc("Hours",1),hh:Xc("Hours",2,-12),h:Xc("Hours",1,-12),mm:Xc("Minutes",2),m:Xc("Minutes",1),ss:Xc("Seconds",2),s:Xc("Seconds",1),sss:Xc("Milliseconds",3),EEEE:Yc("Day"),EEE:Yc("Day",!0),a:bd,Z:Zc,ww:ad(2),w:ad(1),G:cd,GG:cd,GGG:cd,GGGG:dd},Ef=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Ff=/^\-?\d+$/;ed.$inject=["$locale"];var Gf=p(Gd),Hf=p(Hd);id.$inject=["$parse"];var If=p({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===Rd.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),Jf={};d(Ae,function(a,b){function c(a,c,e){a.$watch(e[d],function(a){e.$set(b,!!a)})}if("multiple"!=a){var d=qb("ng-"+b),e=c;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[d]&&c(a,b,e)}),Jf[d]=function(){return{restrict:"A",priority:100,link:e}}}}),d(Ce,function(a,b){Jf[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)){var e=d.ngPattern.match(Dd);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),d(["src","srcset","href"],function(a){var b=qb("ng-"+a);Jf[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===Rd.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(Kd&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var Kf={$addControl:n,$$renameControl:kd,$removeControl:n,$setValidity:n,$setDirty:n,$setPristine:n,$setSubmitted:n},Lf="ng-submitted";ld.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Mf=function(a){return["$timeout","$parse",function(b,c){function d(a){return""===a?c('this[""]').assign:c(a).assign||n}var e={name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:ld,compile:function(c,e){c.addClass(ug).addClass(sg);var f=e.name?"name":!(!a||!e.ngForm)&&"ngForm";return{pre:function(a,c,e,g){var h=g[0];if(!("action"in e)){var i=function(b){a.$apply(function(){h.$commitViewValue(),h.$setSubmitted()}),b.preventDefault()};ne(c[0],"submit",i),c.on("$destroy",function(){b(function(){oe(c[0],"submit",i)},0,!1)})}var k=g[1]||h.$$parentForm;k.$addControl(h);var l=f?d(h.$name):n;f&&(l(a,h),e.$observe(f,function(b){h.$name!==b&&(l(a,void 0),h.$$parentForm.$$renameControl(h,b),(l=d(h.$name))(a,h))})),c.on("$destroy",function(){h.$$parentForm.$removeControl(h),l(a,void 0),j(h,Kf)})}}}};return e}]},Nf=Mf(),Of=Mf(!0),Pf=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Qf=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Rf=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Sf=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Tf=/^(\d{4,})-(\d{2})-(\d{2})$/,Uf=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Vf=/^(\d{4,})-W(\d\d)$/,Wf=/^(\d{4,})-(\d\d)$/,Xf=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Yf="keydown wheel mousedown",Zf=oa();d("date,datetime-local,month,time,week".split(","),function(a){Zf[a]=!0});var $f={text:nd,date:rd("date",Tf,qd(Tf,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":rd("datetimelocal",Uf,qd(Uf,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:rd("time",Xf,qd(Xf,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:rd("week",Vf,pd,"yyyy-Www"),month:rd("month",Wf,qd(Wf,["yyyy","MM"]),"yyyy-MM"),number:td,url:ud,email:vd,radio:wd,checkbox:yd,hidden:n,button:n,submit:n,reset:n,file:n},_f=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&($f[Gd(g.type)]||$f.text)(e,f,g,h[0],b,a,c,d)}}}}],ag=/^(true|false|\d+)$/,bg=function(){return{restrict:"A",priority:100,compile:function(a,b){return ag.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},cg=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,c,d){a.$$addBindingInfo(c,d.ngBind),c=c[0],b.$watch(d.ngBind,function(a){c.textContent=r(a)?"":a})}}}}],dg=["$interpolate","$compile",function(a,b){return{compile:function(c){return b.$$addBindingClass(c),function(c,d,e){var f=a(d.attr(e.$attr.ngBindTemplate));b.$$addBindingInfo(d,f.expressions),d=d[0],e.$observe("ngBindTemplate",function(a){d.textContent=r(a)?"":a})}}}}],eg=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){var c=f(b);d.html(a.getTrustedHtml(c)||"")})}}}}],fg=p({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),gg=zd("",!0),hg=zd("Odd",0),ig=zd("Even",1),jg=jd({compile:function(a,b){b.$set("ngCloak",void 0),a.removeClass("ng-cloak")}}),kg=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],lg={},mg={blur:!0,focus:!0};d("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=qb("ng-"+a);lg[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};mg[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var ng=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.$$createComment("end ngIf",e.ngIf),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=na(h.clone),a.leave(j).then(function(){j=null}),h=null))})}}}],og=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Ud.noop,compile:function(d,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(d,e,i,j,k){var l,m,n,o=0,p=function(){m&&(m.remove(),m=null),l&&(l.$destroy(),l=null),n&&(c.leave(n).then(function(){m=null}),m=n,n=null)};d.$watch(f,function(f){var i=function(){!s(h)||h&&!d.$eval(h)||b()},m=++o;f?(a(f,!0).then(function(a){if(!d.$$destroyed&&m===o){var b=d.$new();j.template=a;var h=k(b,function(a){p(),c.enter(a,null,e).then(i)});l=b,n=h,l.$emit("$includeContentLoaded",f),d.$eval(g)}},function(){d.$$destroyed||m===o&&(p(),d.$emit("$includeContentError",f))}),d.$emit("$includeContentRequested",f)):(p(),j.template=null)})}}}}],pg=["$compile",function(b){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return Rd.call(d[0]).match(/SVG/)?(d.empty(),void b(Aa(f.template,a.document).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void b(d.contents())(c))}}}],qg=jd({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),rg=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,c,e){var f=b.attr(c.$attr.ngList)||", ",g="false"!==c.ngTrim,h=g?Yd(f):f,i=function(a){if(!r(a)){var b=[];return a&&d(a.split(h),function(a){a&&b.push(g?Yd(a):a)}),b}};e.$parsers.push(i),e.$formatters.push(function(a){if(Wd(a))return a.join(f)}),e.$isEmpty=function(a){return!a||!a.length}}}},sg="ng-valid",tg="ng-invalid",ug="ng-pristine",vg="ng-dirty",wg="ng-untouched",xg="ng-touched",yg="ng-pending",zg="ng-empty",Ag="ng-not-empty",Bg=b("ngModel"),Cg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,c,e,f,g,h,i,j,k){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=k(c.name||"",!1)(a),this.$$parentForm=Kf;var l,m=f(c.ngModel),o=m.assign,p=m,q=o,t=null,u=this;this.$$setOptions=function(a){if(u.$options=a,a&&a.getterSetter){var b=f(c.ngModel+"()"),d=f(c.ngModel+"($$$p)");p=function(a){var c=m(a);return y(c)&&(c=b(a)),c},q=function(a,b){y(m(a))?d(a,{$$$p:b}):o(a,b)}}else if(!m.assign)throw Bg("nonassign","Expression '{0}' is non-assignable. Element: {1}",c.ngModel,Y(e))},this.$render=n,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a},this.$$updateEmptyClasses=function(a){u.$isEmpty(a)?(g.removeClass(e,Ag),g.addClass(e,zg)):(g.removeClass(e,zg),g.addClass(e,Ag))};var v=0;Ad({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},$animate:g}),this.$setPristine=function(){u.$dirty=!1,u.$pristine=!0,g.removeClass(e,vg),g.addClass(e,ug)},this.$setDirty=function(){u.$dirty=!0,u.$pristine=!1,g.removeClass(e,ug),g.addClass(e,vg),u.$$parentForm.$setDirty()},this.$setUntouched=function(){u.$touched=!1,u.$untouched=!0,g.setClass(e,wg,xg)},this.$setTouched=function(){u.$touched=!0,u.$untouched=!1,g.setClass(e,xg,wg)},this.$rollbackViewValue=function(){h.cancel(t),u.$viewValue=u.$$lastCommittedViewValue,u.$render()},this.$validate=function(){if(!w(u.$modelValue)||!isNaN(u.$modelValue)){var a=u.$$lastCommittedViewValue,b=u.$$rawModelValue,c=u.$valid,d=u.$modelValue,e=u.$options&&u.$options.allowInvalid;u.$$runValidators(b,a,function(a){e||c===a||(u.$modelValue=a?b:void 0,u.$modelValue!==d&&u.$$writeModelToScope())})}},this.$$runValidators=function(a,b,c){function e(){var a=u.$$parserName||"parse";return r(l)?(h(a,null),!0):(l||(d(u.$validators,function(a,b){h(b,null)}),d(u.$asyncValidators,function(a,b){h(b,null)})),h(a,l),l)}function f(){var c=!0;return d(u.$validators,function(d,e){var f=d(a,b);c=c&&f,h(e,f)}),!!c||(d(u.$asyncValidators,function(a,b){h(b,null)}),!1)}function g(){var c=[],e=!0;d(u.$asyncValidators,function(d,f){var g=d(a,b);if(!G(g))throw Bg("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",g);h(f,void 0),c.push(g.then(function(){h(f,!0)},function(){e=!1,h(f,!1)}))}),c.length?j.all(c).then(function(){i(e)},n):i(!0)}function h(a,b){k===v&&u.$setValidity(a,b)}function i(a){k===v&&c(a)}v++;var k=v;return e()&&f()?void g():void i(!1)},this.$commitViewValue=function(){var a=u.$viewValue;h.cancel(t),(u.$$lastCommittedViewValue!==a||""===a&&u.$$hasNativeValidators)&&(u.$$updateEmptyClasses(a),u.$$lastCommittedViewValue=a,u.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function b(){u.$modelValue!==f&&u.$$writeModelToScope()}var c=u.$$lastCommittedViewValue,d=c;if(l=!r(d)||void 0)for(var e=0;e<u.$parsers.length;e++)if(d=u.$parsers[e](d),r(d)){l=!1;break}w(u.$modelValue)&&isNaN(u.$modelValue)&&(u.$modelValue=p(a));var f=u.$modelValue,g=u.$options&&u.$options.allowInvalid;u.$$rawModelValue=d,g&&(u.$modelValue=d,b()),u.$$runValidators(d,u.$$lastCommittedViewValue,function(a){g||(u.$modelValue=a?d:void 0,b())})},this.$$writeModelToScope=function(){q(a,u.$modelValue),d(u.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})},this.$setViewValue=function(a,b){u.$viewValue=a,u.$options&&!u.$options.updateOnDefault||u.$$debounceViewValueCommit(b)},this.$$debounceViewValueCommit=function(b){var c,d=0,e=u.$options;e&&s(e.debounce)&&(c=e.debounce,w(c)?d=c:w(c[b])?d=c[b]:w(c["default"])&&(d=c["default"])),h.cancel(t),d?t=h(function(){u.$commitViewValue()},d):i.$$phase?u.$commitViewValue():a.$apply(function(){u.$commitViewValue()})},a.$watch(function(){var b=p(a);if(b!==u.$modelValue&&(u.$modelValue===u.$modelValue||b===b)){u.$modelValue=u.$$rawModelValue=b,l=void 0;for(var c=u.$formatters,d=c.length,e=b;d--;)e=c[d](e);u.$viewValue!==e&&(u.$$updateEmptyClasses(e),u.$viewValue=u.$$lastCommittedViewValue=e,u.$render(),u.$$runValidators(b,e,n))}return b})}],Dg=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Cg,priority:1,compile:function(b){return b.addClass(ug).addClass(wg).addClass(sg),{pre:function(a,b,c,d){var e=d[0],f=d[1]||e.$$parentForm;e.$$setOptions(d[2]&&d[2].$options),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&e.$$parentForm.$$renameControl(e,a)}),a.$on("$destroy",function(){e.$$parentForm.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];f.$options&&f.$options.updateOn&&c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],Eg=/(\s+|^)default(\s+|$)/,Fg=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var c=this;this.$options=N(a.$eval(b.ngModelOptions)),s(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Yd(this.$options.updateOn.replace(Eg,function(){return c.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Gg=jd({terminal:!0,priority:1e3}),Hg=b("ngOptions"),Ig=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Jg=["$compile","$document","$parse",function(b,e,f){function g(a,b,d){function e(a,b,c,d,e){this.selectValue=a,this.viewValue=b,this.label=c,this.group=d,this.disabled=e}function g(a){var b;if(!j&&c(a))b=a;else{b=[];for(var d in a)a.hasOwnProperty(d)&&"$"!==d.charAt(0)&&b.push(d)}return b}var h=a.match(Ig);if(!h)throw Hg("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",a,Y(b));var i=h[5]||h[7],j=h[6],k=/ as /.test(h[0])&&h[1],l=h[9],m=f(h[2]?h[1]:i),n=k&&f(k),o=n||m,p=l&&f(l),q=l?function(a,b){return p(d,b)}:function(a){return Za(a)},r=function(a,b){return q(a,x(a,b))},s=f(h[2]||h[1]),t=f(h[3]||""),u=f(h[4]||""),v=f(h[8]),w={},x=j?function(a,b){return w[j]=b,w[i]=a,w}:function(a){return w[i]=a,w};return{trackBy:l,getTrackByValue:r,getWatchables:f(v,function(a){var b=[];a=a||[];for(var c=g(a),e=c.length,f=0;f<e;f++){var i=a===c?f:c[f],j=a[i],k=x(j,i),l=q(j,k);if(b.push(l),h[2]||h[1]){var m=s(d,k);b.push(m)}if(h[4]){var n=u(d,k);b.push(n)}}return b}),getOptions:function(){for(var a=[],b={},c=v(d)||[],f=g(c),h=f.length,i=0;i<h;i++){var j=c===f?i:f[i],k=c[j],m=x(k,j),n=o(d,m),p=q(n,m),w=s(d,m),y=t(d,m),z=u(d,m),A=new e(p,n,w,y,z);a.push(A),b[p]=A}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[r(a)]},getViewValueFromOption:function(a){return l?Ud.copy(a.viewValue):a.viewValue}}}}}function h(a,c,f,h){function k(a,b){var c=i.cloneNode(!1);b.appendChild(c),l(a,c)}function l(a,b){a.element=b,b.disabled=a.disabled,a.label!==b.label&&(b.label=a.label,b.textContent=a.label),a.value!==b.value&&(b.value=a.selectValue)}function m(){var a=x&&o.readValue();if(x)for(var b=x.items.length-1;b>=0;b--){var d=x.items[b];Ra(s(d.group)?d.element.parentNode:d.element)}x=y.getOptions();var e={};if(v&&c.prepend(n),x.items.forEach(function(a){var b;s(a.group)?(b=e[a.group],b||(b=j.cloneNode(!1),z.appendChild(b),b.label=null===a.group?"null":a.group,e[a.group]=b),k(a,b)):k(a,z)}),c[0].appendChild(z),p.$render(),!p.$isEmpty(a)){var f=o.readValue(),g=y.trackBy||q;(g?O(a,f):a===f)||(p.$setViewValue(f),p.$render())}}for(var n,o=h[0],p=h[1],q=f.multiple,r=0,t=c.children(),u=t.length;r<u;r++)if(""===t[r].value){n=t.eq(r);break}var v=!!n,w=Ld(i.cloneNode(!1));w.val("?");var x,y=g(f.ngOptions,c,a),z=e[0].createDocumentFragment(),A=function(){v||c.prepend(n),c.val(""),n.prop("selected",!0),n.attr("selected",!0)},B=function(){v||n.remove()},C=function(){c.prepend(w),c.val("?"),w.prop("selected",!0),w.attr("selected",!0)},D=function(){w.remove()};q?(p.$isEmpty=function(a){return!a||0===a.length},o.writeValue=function(a){x.items.forEach(function(a){a.element.selected=!1}),a&&a.forEach(function(a){var b=x.getOptionFromViewValue(a);b&&(b.element.selected=!0)})},o.readValue=function(){var a=c.val()||[],b=[];return d(a,function(a){var c=x.selectValueMap[a];c&&!c.disabled&&b.push(x.getViewValueFromOption(c))}),b},y.trackBy&&a.$watchCollection(function(){if(Wd(p.$viewValue))return p.$viewValue.map(function(a){return y.getTrackByValue(a)})},function(){p.$render()})):(o.writeValue=function(a){var b=x.getOptionFromViewValue(a);b?(c[0].value!==b.selectValue&&(D(),B(),c[0].value=b.selectValue,b.element.selected=!0),b.element.setAttribute("selected","selected")):null===a||v?(D(),A()):(B(),C())},o.readValue=function(){var a=x.selectValueMap[c.val()];return a&&!a.disabled?(B(),D(),x.getViewValueFromOption(a)):null},y.trackBy&&a.$watch(function(){return y.getTrackByValue(p.$viewValue)},function(){p.$render()})),v?(n.remove(),b(n)(a),n.removeClass("ng-scope")):n=Ld(i.cloneNode(!1)),c.empty(),m(),a.$watchCollection(y.getWatchables,m)}var i=a.document.createElement("option"),j=a.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=n},post:h}}}],Kg=["$locale","$interpolate","$log",function(a,b,c){var e=/{}/g,f=/^when(Minus)?(.+)$/;return{link:function(g,h,i){function j(a){h.text(a||"")}var k,l=i.count,m=i.$attr.when&&h.attr(i.$attr.when),o=i.offset||0,p=g.$eval(m)||{},q={},s=b.startSymbol(),t=b.endSymbol(),u=s+l+"-"+o+t,v=Ud.noop;d(i,function(a,b){var c=f.exec(b);if(c){var d=(c[1]?"-":"")+Gd(c[2]);p[d]=h.attr(i.$attr[b])}}),d(p,function(a,c){q[c]=b(a.replace(e,u))}),g.$watch(l,function(b){var d=parseFloat(b),e=isNaN(d);if(e||d in p||(d=a.pluralCat(d-o)),d!==k&&!(e&&w(k)&&isNaN(k))){v();var f=q[d];r(f)?(null!=b&&c.debug("ngPluralize: no rule defined for '"+d+"' in "+m),v=n,j()):v=g.$watch(f,j),k=d}})}}}],Lg=["$parse","$animate","$compile",function(a,e,f){var g="$$NG_REMOVED",h=b("ngRepeat"),i=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b))},j=function(a){return a.clone[0]},k=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(b,l){var m=l.ngRepeat,n=f.$$createComment("end ngRepeat",m),o=m.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!o)throw h("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",m);var p=o[1],q=o[2],r=o[3],s=o[4];if(o=p.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!o)throw h("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",p);var t=o[3]||o[1],u=o[2];if(r&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(r)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(r)))throw h("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",r);var v,w,x,y,z={$id:Za};return s?v=a(s):(x=function(a,b){return Za(b)},y=function(a){return a}),function(a,b,f,l,o){v&&(w=function(b,c,d){return u&&(z[u]=b),z[t]=c,z.$index=d,v(a,z)});var p=oa();a.$watchCollection(q,function(f){var l,q,s,v,z,A,B,C,D,E,F,G,H=b[0],I=oa();if(r&&(a[r]=f),c(f))D=f,C=w||x;else{C=w||y,D=[];for(var J in f)Fd.call(f,J)&&"$"!==J.charAt(0)&&D.push(J)}for(v=D.length,F=new Array(v),l=0;l<v;l++)if(z=f===D?l:D[l],A=f[z],B=C(z,A,l),p[B])E=p[B],delete p[B],I[B]=E,F[l]=E;else{if(I[B])throw d(F,function(a){a&&a.scope&&(p[a.id]=a)}),h("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",m,B,A);F[l]={id:B,scope:void 0,clone:void 0},I[B]=!0}for(var K in p){if(E=p[K],G=na(E.clone),e.leave(G),G[0].parentNode)for(l=0,q=G.length;l<q;l++)G[l][g]=!0;E.scope.$destroy()}for(l=0;l<v;l++)if(z=f===D?l:D[l],A=f[z],E=F[l],E.scope){s=H;do s=s.nextSibling;while(s&&s[g]);j(E)!=s&&e.move(na(E.clone),null,H),H=k(E),i(E.scope,l,t,A,u,z,v)}else o(function(a,b){E.scope=b;var c=n.cloneNode(!1);a[a.length++]=c,e.enter(a,null,H),H=c,E.clone=a,I[E.id]=E,i(E.scope,l,t,A,u,z,v)});p=I})}}}}],Mg="ng-hide",Ng="ng-hide-animate",Og=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,Mg,{tempClasses:Ng})})}}}],Pg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,Mg,{tempClasses:Ng})})}}}],Qg=jd(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&d(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),Rg=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,e,f,g){var h=f.ngSwitch||f.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};c.$watch(h,function(c){var e,f;for(e=0,f=k.length;e<f;++e)a.cancel(k[e]);for(k.length=0,e=0,f=l.length;e<f;++e){var h=na(j[e].clone);l[e].$destroy();var n=k[e]=a.leave(h);n.then(m(k,e))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&d(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],Sg=jd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),Tg=jd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),Ug=b("ngTransclude"),Vg=["$compile",function(a){return{restrict:"EAC",terminal:!0,compile:function(b){var c=a(b.contents());return b.empty(),function(a,b,d,e,f){function g(a,c){a.length?b.append(a):(h(),c.$destroy())}function h(){c(a,function(a){b.append(a)})}if(!f)throw Ug("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Y(b));d.ngTransclude===d.$attr.ngTransclude&&(d.ngTransclude="");var i=d.ngTransclude||d.ngTranscludeSlot;f(g,null,i),i&&!f.isSlotFilled(i)&&h()}}}}],Wg=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],Xg={$setViewValue:n,$render:n},Yg=["$element","$scope",function(b,c){var d=this,e=new $a;d.ngModelCtrl=Xg,d.unknownOption=Ld(a.document.createElement("option")),d.renderUnknownOption=function(a){var c="? "+Za(a)+" ?";d.unknownOption.val(c),b.prepend(d.unknownOption),b.val(c)},c.$on("$destroy",function(){d.renderUnknownOption=n}),d.removeUnknownOption=function(){d.unknownOption.parent()&&d.unknownOption.remove()},d.readValue=function(){return d.removeUnknownOption(),b.val()},d.writeValue=function(a){d.hasOption(a)?(d.removeUnknownOption(),b.val(a),""===a&&d.emptyOption.prop("selected",!0)):null==a&&d.emptyOption?(d.removeUnknownOption(),b.val("")):d.renderUnknownOption(a)},d.addOption=function(a,b){if(b[0].nodeType!==he){la(a,'"option value"'),""===a&&(d.emptyOption=b);var c=e.get(a)||0;e.put(a,c+1),d.ngModelCtrl.$render(),Cd(b)}},d.removeOption=function(a){var b=e.get(a);b&&(1===b?(e.remove(a),""===a&&(d.emptyOption=void 0)):e.put(a,b-1))},d.hasOption=function(a){return!!e.get(a)},d.registerOption=function(a,b,c,e,f){if(e){var g;c.$observe("value",function(a){s(g)&&d.removeOption(g),g=a,d.addOption(a,b)})}else f?a.$watch(f,function(a,e){c.$set("value",a),e!==a&&d.removeOption(e),d.addOption(a,b)}):d.addOption(c.value,b);b.on("$destroy",function(){d.removeOption(c.value),d.ngModelCtrl.$render()})}}],Zg=function(){function a(a,b,c,e){var f=e[1];if(f){var g=e[0];if(g.ngModelCtrl=f,b.on("change",function(){a.$apply(function(){f.$setViewValue(g.readValue())})}),c.multiple){g.readValue=function(){var a=[];return d(b.find("option"),function(b){b.selected&&a.push(b.value)}),a},g.writeValue=function(a){var c=new $a(a);d(b.find("option"),function(a){a.selected=s(c.get(a.value))})};var h,i=NaN;a.$watch(function(){i!==f.$viewValue||O(h,f.$viewValue)||(h=qa(f.$viewValue),f.$render()),i=f.$viewValue}),f.$isEmpty=function(a){return!a||0===a.length}}}}function b(a,b,c,d){var e=d[1];if(e){var f=d[0];e.$render=function(){f.writeValue(e.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:Yg,priority:1,link:{pre:a,post:b}}},$g=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,c){if(s(c.value))var d=a(c.value,!0);else{var e=a(b.text(),!0);e||c.$set("value",b.text())}return function(a,b,c){var f="$selectController",g=b.parent(),h=g.data(f)||g.parent().data(f);h&&h.registerOption(a,b,c,d,e)}}}}],_g=p({restrict:"E",terminal:!1}),ah=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},bh=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){if(v(a)&&a.length>0&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw b("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",g,a,Y(c));f=a||void 0,e.$validate()}),e.$validators.pattern=function(a,b){return e.$isEmpty(b)||r(f)||f.test(b)}}}}},ch=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){var b=l(a);e=isNaN(b)?-1:b,d.$validate()}),d.$validators.maxlength=function(a,b){return e<0||d.$isEmpty(b)||b.length<=e}}}}},dh=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=l(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};return a.angular.bootstrap?void(a.console&&console.log("WARNING: Tried to load angular more than once.")):(ia(),ta(Ud),Ud.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return b==-1?0:a.length-b-1}function c(a,c){var d=c;void 0===d&&(d=Math.min(b(a),3));var e=Math.pow(10,d),f=(a*e|0)%e;return{v:d,f:f}}var d={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,b){var e=0|a,f=c(a,b);return 1==e&&0==f.v?d.ONE:d.OTHER}})}]),void Ld(a.document).ready(function(){da(a.document,ea)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b(require,exports,module):a.Tether=b()}(this,function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){var b=a.getBoundingClientRect(),c={};for(var d in b)c[d]=b[d];if(a.ownerDocument!==document){var f=a.ownerDocument.defaultView.frameElement;if(f){var g=e(f);c.top+=g.top,c.bottom+=g.top,c.left+=g.left,c.right+=g.left}}return c}function f(a){var b=getComputedStyle(a)||{},c=b.position,d=[];if("fixed"===c)return[a];for(var e=a;(e=e.parentNode)&&e&&1===e.nodeType;){var f=void 0;try{f=getComputedStyle(e)}catch(g){}if("undefined"==typeof f||null===f)return d.push(e),d;var h=f,i=h.overflow,j=h.overflowX,k=h.overflowY;/(auto|scroll)/.test(i+k+j)&&("absolute"!==c||["relative","absolute","fixed"].indexOf(f.position)>=0)&&d.push(e)}return d.push(a.ownerDocument.body),a.ownerDocument!==document&&d.push(a.ownerDocument.defaultView),d}function g(){z&&document.body.removeChild(z),z=null}function h(a){var b=void 0;a===document?(b=document,a=document.documentElement):b=a.ownerDocument;var c=b.documentElement,d=e(a),f=C();return d.top-=f.top,d.left-=f.left,"undefined"==typeof d.width&&(d.width=document.body.scrollWidth-d.left-d.right),"undefined"==typeof d.height&&(d.height=document.body.scrollHeight-d.top-d.bottom),d.top=d.top-c.clientTop,d.left=d.left-c.clientLeft,d.right=b.body.clientWidth-d.width-d.left,d.bottom=b.body.clientHeight-d.height-d.top,d}function i(a){return a.offsetParent||document.documentElement}function j(){var a=document.createElement("div");a.style.width="100%",a.style.height="200px";var b=document.createElement("div");k(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),b.appendChild(a),document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";var d=a.offsetWidth;c===d&&(d=b.clientWidth),document.body.removeChild(b);var e=c-d;return{width:e,height:e}}function k(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=[];return Array.prototype.push.apply(b,arguments),b.slice(1).forEach(function(b){if(b)for(var c in b)({}).hasOwnProperty.call(b,c)&&(a[c]=b[c])}),a}function l(a,b){if("undefined"!=typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.remove(b)});else{var c=new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi"),d=o(a).replace(c," ");p(a,d)}}function m(a,b){if("undefined"!=typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.add(b)});else{l(a,b);var c=o(a)+(" "+b);p(a,c)}}function n(a,b){if("undefined"!=typeof a.classList)return a.classList.contains(b);var c=o(a);return new RegExp("(^| )"+b+"( |$)","gi").test(c)}function o(a){return a.className instanceof a.ownerDocument.defaultView.SVGAnimatedString?a.className.baseVal:a.className}function p(a,b){a.setAttribute("class",b)}function q(a,b,c){c.forEach(function(c){b.indexOf(c)===-1&&n(a,c)&&l(a,c)}),b.forEach(function(b){n(a,b)||m(a,b)})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function r(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function s(a,b){var c=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return a+c>=b&&b>=a-c}function t(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function u(){for(var a={top:0,left:0},b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return c.forEach(function(b){var c=b.top,d=b.left;"string"==typeof c&&(c=parseFloat(c,10)),"string"==typeof d&&(d=parseFloat(d,10)),a.top+=c,a.left+=d}),a}function v(a,b){return"string"==typeof a.left&&a.left.indexOf("%")!==-1&&(a.left=parseFloat(a.left,10)/100*b.width),"string"==typeof a.top&&a.top.indexOf("%")!==-1&&(a.top=parseFloat(a.top,10)/100*b.height),a}function w(a,b){return"scrollParent"===b?b=a.scrollParents[0]:"window"===b&&(b=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),b===document&&(b=b.documentElement),"undefined"!=typeof b.nodeType&&!function(){var a=b,c=h(b),d=c,e=getComputedStyle(b);if(b=[d.left,d.top,c.width+d.left,c.height+d.top],a.ownerDocument!==document){var f=a.ownerDocument.defaultView;b[0]+=f.pageXOffset,b[1]+=f.pageYOffset,b[2]+=f.pageXOffset,b[3]+=f.pageYOffset}W.forEach(function(a,c){a=a[0].toUpperCase()+a.substr(1),"Top"===a||"Left"===a?b[c]+=parseFloat(e["border"+a+"Width"]):b[c]-=parseFloat(e["border"+a+"Width"])})}(),b}var x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),y=void 0;"undefined"==typeof y&&(y={modules:[]});var z=null,A=function(){var a=0;return function(){return++a}}(),B={},C=function(){var a=z;a||(a=document.createElement("div"),a.setAttribute("data-tether-id",A()),k(a.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(a),z=a);var b=a.getAttribute("data-tether-id");return"undefined"==typeof B[b]&&(B[b]=e(a),E(function(){delete B[b]})),B[b]},D=[],E=function(a){D.push(a)},F=function(){for(var a=void 0;a=D.pop();)a()},G=function(){function a(){d(this,a)}return x(a,[{key:"on",value:function(a,b,c){var d=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[a]&&(this.bindings[a]=[]),this.bindings[a].push({handler:b,ctx:c,once:d})}},{key:"once",value:function(a,b,c){this.on(a,b,c,!0)}},{key:"off",value:function(a,b){if("undefined"!=typeof this.bindings&&"undefined"!=typeof this.bindings[a])if("undefined"==typeof b)delete this.bindings[a];else for(var c=0;c<this.bindings[a].length;)this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):++c}},{key:"trigger",value:function(a){if("undefined"!=typeof this.bindings&&this.bindings[a]){for(var b=0,c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];for(;b<this.bindings[a].length;){var f=this.bindings[a][b],g=f.handler,h=f.ctx,i=f.once,j=h;"undefined"==typeof j&&(j=this),g.apply(j,d),i?this.bindings[a].splice(b,1):++b}}}}]),a}();y.Utils={getActualBoundingClientRect:e,getScrollParents:f,getBounds:h,getOffsetParent:i,extend:k,addClass:m,removeClass:l,hasClass:n,updateClasses:q,defer:E,flush:F,uniqueId:A,Evented:G,getScrollBarSize:j,removeUtilElements:g};var H=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),I=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}};if("undefined"==typeof y)throw new Error("You must include the utils.js file before tether.js");var J=y.Utils,f=J.getScrollParents,h=J.getBounds,i=J.getOffsetParent,k=J.extend,m=J.addClass,l=J.removeClass,q=J.updateClasses,E=J.defer,F=J.flush,j=J.getScrollBarSize,g=J.removeUtilElements,K=function(){if("undefined"==typeof document)return"";for(var a=document.createElement("div"),b=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],c=0;c<b.length;++c){var d=b[c];if(void 0!==a.style[d])return d}}(),L=[],M=function(){L.forEach(function(a){a.position(!1)}),F()};!function(){var a=null,b=null,c=null,d=function e(){return"undefined"!=typeof b&&b>16?(b=Math.min(b-16,250),void(c=setTimeout(e,250))):void("undefined"!=typeof a&&t()-a<10||(null!=c&&(clearTimeout(c),c=null),a=t(),M(),b=t()-a))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(a){window.addEventListener(a,d)})}();var N={center:"center",left:"right",right:"left"},O={middle:"middle",top:"bottom",bottom:"top"},P={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},Q=function(a,b){var c=a.left,d=a.top;return"auto"===c&&(c=N[b.left]),"auto"===d&&(d=O[b.top]),{left:c,top:d}},R=function(a){var b=a.left,c=a.top;return"undefined"!=typeof P[a.left]&&(b=P[a.left]),"undefined"!=typeof P[a.top]&&(c=P[a.top]),{left:b,top:c}},S=function(a){var b=a.split(" "),c=H(b,2),d=c[0],e=c[1];return{top:d,left:e}},T=S,U=function(a){function b(a){var c=this;d(this,b),I(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.position=this.position.bind(this),L.push(this),this.history=[],this.setOptions(a,!1),y.modules.forEach(function(a){"undefined"!=typeof a.initialize&&a.initialize.call(c)}),this.position()}return r(b,a),x(b,[{key:"getClass",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0],b=this.options.classes;return"undefined"!=typeof b&&b[a]?this.options.classes[a]:this.options.classPrefix?this.options.classPrefix+"-"+a:a}},{key:"setOptions",value:function(a){var b=this,c=arguments.length<=1||void 0===arguments[1]||arguments[1],d={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=k(d,a);var e=this.options,g=e.element,h=e.target,i=e.targetModifier;if(this.element=g,this.target=h,this.targetModifier=i,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(a){if("undefined"==typeof b[a])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof b[a].jquery?b[a]=b[a][0]:"string"==typeof b[a]&&(b[a]=document.querySelector(b[a]))}),m(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&m(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=T(this.options.targetAttachment),this.attachment=T(this.options.attachment),this.offset=S(this.options.offset),this.targetOffset=S(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=f(this.target),this.options.enabled!==!1&&this.enable(c)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return h(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var a=h(this.target),b={height:a.height,width:a.width,top:a.top,left:a.left};return b.height=Math.min(b.height,a.height-(pageYOffset-a.top)),b.height=Math.min(b.height,a.height-(a.top+a.height-(pageYOffset+innerHeight))),b.height=Math.min(innerHeight,b.height),b.height-=2,b.width=Math.min(b.width,a.width-(pageXOffset-a.left)),b.width=Math.min(b.width,a.width-(a.left+a.width-(pageXOffset+innerWidth))),b.width=Math.min(innerWidth,b.width),b.width-=2,b.top<pageYOffset&&(b.top=pageYOffset),b.left<pageXOffset&&(b.left=pageXOffset),b}if("scroll-handle"===this.targetModifier){var a=void 0,c=this.target;c===document.body?(c=document.documentElement,a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):a=h(c);var d=getComputedStyle(c),e=c.scrollWidth>c.clientWidth||[d.overflow,d.overflowX].indexOf("scroll")>=0||this.target!==document.body,f=0;e&&(f=15);var g=a.height-parseFloat(d.borderTopWidth)-parseFloat(d.borderBottomWidth)-f,b={width:15,height:.975*g*(g/c.scrollHeight),left:a.left+a.width-parseFloat(d.borderLeftWidth)-15},i=0;g<408&&this.target===document.body&&(i=-11e-5*Math.pow(g,2)-.00727*g+22.58),this.target!==document.body&&(b.height=Math.max(b.height,24));var j=this.target.scrollTop/(c.scrollHeight-g);return b.top=j*(g-b.height-i)+a.top+parseFloat(d.borderTopWidth),this.target===document.body&&(b.height=Math.max(b.height,24)),b}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(a,b){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[a]&&(this._cache[a]=b.call(this)),this._cache[a]}},{key:"enable",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]||arguments[0];this.options.addTargetClasses!==!1&&m(this.target,this.getClass("enabled")),m(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(b){b!==a.target.ownerDocument&&b.addEventListener("scroll",a.position)}),b&&this.position()}},{key:"disable",value:function(){var a=this;l(this.target,this.getClass("enabled")),l(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(b){b.removeEventListener("scroll",a.position)})}},{key:"destroy",value:function(){var a=this;this.disable(),L.forEach(function(b,c){b===a&&L.splice(c,1)}),0===L.length&&g()}},{key:"updateAttachClasses",value:function(a,b){var c=this;a=a||this.attachment,b=b||this.targetAttachment;var d=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var e=this._addAttachClasses;a.top&&e.push(this.getClass("element-attached")+"-"+a.top),a.left&&e.push(this.getClass("element-attached")+"-"+a.left),b.top&&e.push(this.getClass("target-attached")+"-"+b.top),b.left&&e.push(this.getClass("target-attached")+"-"+b.left);var f=[];d.forEach(function(a){f.push(c.getClass("element-attached")+"-"+a),f.push(c.getClass("target-attached")+"-"+a)}),E(function(){"undefined"!=typeof c._addAttachClasses&&(q(c.element,c._addAttachClasses,f),c.options.addTargetClasses!==!1&&q(c.target,c._addAttachClasses,f),delete c._addAttachClasses)})}},{key:"position",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var c=Q(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,c);var d=this.cache("element-bounds",function(){return h(a.element)}),e=d.width,f=d.height;if(0===e&&0===f&&"undefined"!=typeof this.lastSize){var g=this.lastSize;e=g.width,f=g.height}else this.lastSize={width:e,height:f};var k=this.cache("target-bounds",function(){return a.getTargetBounds()}),l=k,m=v(R(this.attachment),{width:e,height:f}),n=v(R(c),l),o=v(this.offset,{width:e,height:f}),p=v(this.targetOffset,l);m=u(m,o),n=u(n,p);for(var q=k.left+n.left-m.left,r=k.top+n.top-m.top,s=0;s<y.modules.length;++s){var t=y.modules[s],w=t.position.call(this,{left:q,top:r,targetAttachment:c,targetPos:k,elementPos:d,offset:m,targetOffset:n,manualOffset:o,manualTargetOffset:p,scrollbarSize:B,attachment:this.attachment});if(w===!1)return!1;"undefined"!=typeof w&&"object"==typeof w&&(r=w.top,q=w.left)}var x={page:{top:r,left:q},viewport:{top:r-pageYOffset,bottom:pageYOffset-r-f+innerHeight,left:q-pageXOffset,right:pageXOffset-q-e+innerWidth}},z=this.target.ownerDocument,A=z.defaultView,B=void 0;return z.body.scrollWidth>A.innerWidth&&(B=this.cache("scrollbar-size",j),x.viewport.bottom-=B.height),z.body.scrollHeight>A.innerHeight&&(B=this.cache("scrollbar-size",j),x.viewport.right-=B.width),["","static"].indexOf(z.body.style.position)!==-1&&["","static"].indexOf(z.body.parentElement.style.position)!==-1||(x.page.bottom=z.body.scrollHeight-r-f,x.page.right=z.body.scrollWidth-q-e),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var b=a.cache("target-offsetparent",function(){return i(a.target)}),c=a.cache("target-offsetparent-bounds",function(){return h(b)}),d=getComputedStyle(b),e=c,f={};if(["Top","Left","Bottom","Right"].forEach(function(a){f[a.toLowerCase()]=parseFloat(d["border"+a+"Width"])}),c.right=z.body.scrollWidth-c.left-e.width+f.right,c.bottom=z.body.scrollHeight-c.top-e.height+f.bottom,x.page.top>=c.top+f.top&&x.page.bottom>=c.bottom&&x.page.left>=c.left+f.left&&x.page.right>=c.right){var g=b.scrollTop,j=b.scrollLeft;x.offset={top:x.page.top-c.top+g-f.top,left:x.page.left-c.left+j-f.left}}}(),this.move(x),this.history.unshift(x),this.history.length>3&&this.history.pop(),b&&F(),!0}}},{key:"move",value:function(a){var b=this;if("undefined"!=typeof this.element.parentNode){var c={};for(var d in a){c[d]={};for(var e in a[d]){for(var f=!1,g=0;g<this.history.length;++g){var h=this.history[g];if("undefined"!=typeof h[d]&&!s(h[d][e],a[d][e])){f=!0;break}}f||(c[d][e]=!0)}}var j={top:"",left:"",right:"",bottom:""},l=function(a,c){var d="undefined"!=typeof b.options.optimizations,e=d?b.options.optimizations.gpu:null;if(e!==!1){var f=void 0,g=void 0;a.top?(j.top=0,f=c.top):(j.bottom=0,f=-c.bottom),a.left?(j.left=0,g=c.left):(j.right=0,g=-c.right),j[K]="translateX("+Math.round(g)+"px) translateY("+Math.round(f)+"px)","msTransform"!==K&&(j[K]+=" translateZ(0)")}else a.top?j.top=c.top+"px":j.bottom=c.bottom+"px",a.left?j.left=c.left+"px":j.right=c.right+"px"},m=!1;if((c.page.top||c.page.bottom)&&(c.page.left||c.page.right)?(j.position="absolute",l(c.page,a.page)):(c.viewport.top||c.viewport.bottom)&&(c.viewport.left||c.viewport.right)?(j.position="fixed",l(c.viewport,a.viewport)):"undefined"!=typeof c.offset&&c.offset.top&&c.offset.left?!function(){j.position="absolute";var d=b.cache("target-offsetparent",function(){return i(b.target)});i(b.element)!==d&&E(function(){b.element.parentNode.removeChild(b.element),d.appendChild(b.element)}),l(c.offset,a.offset),m=!0}():(j.position="absolute",l({top:!0,left:!0},a.page)),!m){for(var n=!0,o=this.element.parentNode;o&&1===o.nodeType&&"BODY"!==o.tagName;){if("static"!==getComputedStyle(o).position){n=!1;break}o=o.parentNode}n||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var p={},q=!1;for(var e in j){var r=j[e],t=this.element.style[e];t!==r&&(q=!0,p[e]=r)}q&&E(function(){k(b.element.style,p),b.trigger("repositioned")})}}}]),b}(G);U.modules=[],y.position=M;var V=k(U,y),H=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),J=y.Utils,h=J.getBounds,k=J.extend,q=J.updateClasses,E=J.defer,W=["left","top","right","bottom"];y.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=a.targetAttachment;if(!this.options.constraints)return!0;var f=this.cache("element-bounds",function(){return h(b.element)}),g=f.height,i=f.width;if(0===i&&0===g&&"undefined"!=typeof this.lastSize){var j=this.lastSize;i=j.width,g=j.height}var l=this.cache("target-bounds",function(){return b.getTargetBounds()}),m=l.height,n=l.width,o=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(a){var b=a.outOfBoundsClass,c=a.pinnedClass;b&&o.push(b),c&&o.push(c)}),o.forEach(function(a){["left","top","right","bottom"].forEach(function(b){o.push(a+"-"+b)})});var p=[],r=k({},e),s=k({},this.attachment);return this.options.constraints.forEach(function(a){var f=a.to,h=a.attachment,j=a.pin;"undefined"==typeof h&&(h="");var k=void 0,l=void 0;if(h.indexOf(" ")>=0){var o=h.split(" "),q=H(o,2);l=q[0],k=q[1]}else k=l=h;var t=w(b,f);"target"!==l&&"both"!==l||(c<t[1]&&"top"===r.top&&(c+=m,r.top="bottom"),c+g>t[3]&&"bottom"===r.top&&(c-=m,r.top="top")),"together"===l&&("top"===r.top&&("bottom"===s.top&&c<t[1]?(c+=m,r.top="bottom",c+=g,s.top="top"):"top"===s.top&&c+g>t[3]&&c-(g-m)>=t[1]&&(c-=g-m,r.top="bottom",s.top="bottom")),"bottom"===r.top&&("top"===s.top&&c+g>t[3]?(c-=m,r.top="top",c-=g,s.top="bottom"):"bottom"===s.top&&c<t[1]&&c+(2*g-m)<=t[3]&&(c+=g-m,r.top="top",s.top="top")),"middle"===r.top&&(c+g>t[3]&&"top"===s.top?(c-=g,s.top="bottom"):c<t[1]&&"bottom"===s.top&&(c+=g,s.top="top"))),"target"!==k&&"both"!==k||(d<t[0]&&"left"===r.left&&(d+=n,r.left="right"),d+i>t[2]&&"right"===r.left&&(d-=n,r.left="left")),"together"===k&&(d<t[0]&&"left"===r.left?"right"===s.left?(d+=n,r.left="right",d+=i,s.left="left"):"left"===s.left&&(d+=n,r.left="right",d-=i,s.left="right"):d+i>t[2]&&"right"===r.left?"left"===s.left?(d-=n,r.left="left",d-=i,s.left="right"):"right"===s.left&&(d-=n,r.left="left",d+=i,s.left="left"):"center"===r.left&&(d+i>t[2]&&"left"===s.left?(d-=i,s.left="right"):d<t[0]&&"right"===s.left&&(d+=i,s.left="left"))),"element"!==l&&"both"!==l||(c<t[1]&&"bottom"===s.top&&(c+=g,s.top="top"),c+g>t[3]&&"top"===s.top&&(c-=g,s.top="bottom")),"element"!==k&&"both"!==k||(d<t[0]&&("right"===s.left?(d+=i,s.left="left"):"center"===s.left&&(d+=i/2,s.left="left")),d+i>t[2]&&("left"===s.left?(d-=i,s.left="right"):"center"===s.left&&(d-=i/2,s.left="right"))),"string"==typeof j?j=j.split(",").map(function(a){return a.trim()}):j===!0&&(j=["top","left","right","bottom"]),j=j||[];var u=[],v=[];c<t[1]&&(j.indexOf("top")>=0?(c=t[1],u.push("top")):v.push("top")),c+g>t[3]&&(j.indexOf("bottom")>=0?(c=t[3]-g,u.push("bottom")):v.push("bottom")),d<t[0]&&(j.indexOf("left")>=0?(d=t[0],u.push("left")):v.push("left")),d+i>t[2]&&(j.indexOf("right")>=0?(d=t[2]-i,u.push("right")):v.push("right")),u.length&&!function(){var a=void 0;a="undefined"!=typeof b.options.pinnedClass?b.options.pinnedClass:b.getClass("pinned"),p.push(a),u.forEach(function(b){p.push(a+"-"+b)})}(),v.length&&!function(){var a=void 0;a="undefined"!=typeof b.options.outOfBoundsClass?b.options.outOfBoundsClass:b.getClass("out-of-bounds"),p.push(a),v.forEach(function(b){p.push(a+"-"+b)})}(),(u.indexOf("left")>=0||u.indexOf("right")>=0)&&(s.left=r.left=!1),(u.indexOf("top")>=0||u.indexOf("bottom")>=0)&&(s.top=r.top=!1),r.top===e.top&&r.left===e.left&&s.top===b.attachment.top&&s.left===b.attachment.left||(b.updateAttachClasses(s,r),b.trigger("update",{attachment:s,targetAttachment:r}))}),E(function(){b.options.addTargetClasses!==!1&&q(b.target,p,o),q(b.element,p,o)}),{top:c,left:d}}});var J=y.Utils,h=J.getBounds,q=J.updateClasses,E=J.defer;y.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=this.cache("element-bounds",function(){return h(b.element)}),f=e.height,g=e.width,i=this.getTargetBounds(),j=c+f,k=d+g,l=[];c<=i.bottom&&j>=i.top&&["left","right"].forEach(function(a){var b=i[a];b!==d&&b!==k||l.push(a)}),d<=i.right&&k>=i.left&&["top","bottom"].forEach(function(a){var b=i[a];b!==c&&b!==j||l.push(a)});var m=[],n=[],o=["left","top","right","bottom"];return m.push(this.getClass("abutted")),o.forEach(function(a){m.push(b.getClass("abutted")+"-"+a)}),l.length&&n.push(this.getClass("abutted")),l.forEach(function(a){n.push(b.getClass("abutted")+"-"+a)}),E(function(){b.options.addTargetClasses!==!1&&q(b.target,n,m),q(b.element,n,m)}),!0}});var H=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return y.modules.push({position:function(a){var b=a.top,c=a.left;if(this.options.shift){var d=this.options.shift;"function"==typeof this.options.shift&&(d=this.options.shift.call(this,{top:b,left:c}));var e=void 0,f=void 0;if("string"==typeof d){d=d.split(" "),d[1]=d[1]||d[0];var g=d,h=H(g,2);e=h[0],f=h[1],e=parseFloat(e,10),f=parseFloat(f,10)}else e=d.top,f=d.left;return b+=e,c+=f,{top:b,left:c}}}}),V}),function(a){a(["jquery"],function(a){return function(){function b(a,b,c){return o({type:v.error,iconClass:p().iconClasses.error,message:a,optionsOverride:c,title:b})}function c(b,c){return b||(b=p()),r=a("#"+b.containerId),r.length?r:(c&&(r=l(b)),r)}function d(a,b,c){return o({type:v.info,iconClass:p().iconClasses.info,message:a,optionsOverride:c,title:b})}function e(a){s=a}function f(a,b,c){return o({type:v.success,iconClass:p().iconClasses.success,message:a,optionsOverride:c,title:b})}function g(a,b,c){return o({type:v.warning,iconClass:p().iconClasses.warning,message:a,optionsOverride:c,title:b})}function h(a,b){var d=p();r||c(d),k(a,d,b)||j(d)}function i(b){var d=p();return r||c(d),b&&0===a(":focus",b).length?void q(b):void(r.children().length&&r.remove())}function j(b){for(var c=r.children(),d=c.length-1;d>=0;d--)k(a(c[d]),b)}function k(b,c,d){var e=!(!d||!d.force)&&d.force;return!(!b||!e&&0!==a(":focus",b).length)&&(b[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){q(b)}}),!0)}function l(b){return r=a("<div/>").attr("id",b.containerId).addClass(b.positionClass),r.appendTo(a(b.target)),r}function m(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function n(a){s&&s(a)}function o(b){function d(a){return null==a&&(a=""),a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function e(){i(),k(),l(),m(),o(),s(),j(),f()}function f(){var a="";switch(b.iconClass){case"toast-success":case"toast-info":a="polite";break;default:a="assertive"}D.attr("aria-live",a)}function g(){A.closeOnHover&&D.hover(y,x),!A.onclick&&A.tapToDismiss&&D.click(w),A.closeButton&&H&&H.click(function(a){a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble&&a.cancelBubble!==!0&&(a.cancelBubble=!0),A.onCloseClick&&A.onCloseClick(a),w(!0)}),A.onclick&&D.click(function(a){A.onclick(a),w()})}function h(){D.hide(),D[A.showMethod]({duration:A.showDuration,easing:A.showEasing,complete:A.onShown}),A.timeOut>0&&(C=setTimeout(w,A.timeOut),I.maxHideTime=parseFloat(A.timeOut),I.hideEta=(new Date).getTime()+I.maxHideTime,A.progressBar&&(I.intervalId=setInterval(z,10)))}function i(){b.iconClass&&D.addClass(A.toastClass).addClass(B)}function j(){A.newestOnTop?r.prepend(D):r.append(D)}function k(){if(b.title){var a=b.title;A.escapeHtml&&(a=d(b.title)),E.append(a).addClass(A.titleClass),D.append(E)}}function l(){if(b.message){var a=b.message;A.escapeHtml&&(a=d(b.message)),F.append(a).addClass(A.messageClass),D.append(F)}}function m(){A.closeButton&&(H.addClass(A.closeClass).attr("role","button"),D.prepend(H))}function o(){A.progressBar&&(G.addClass(A.progressClass),D.prepend(G))}function s(){A.rtl&&D.addClass("rtl")}function v(a,b){if(a.preventDuplicates){if(b.message===t)return!0;t=b.message}return!1}function w(b){var c=b&&A.closeMethod!==!1?A.closeMethod:A.hideMethod,d=b&&A.closeDuration!==!1?A.closeDuration:A.hideDuration,e=b&&A.closeEasing!==!1?A.closeEasing:A.hideEasing;if(!a(":focus",D).length||b)return clearTimeout(I.intervalId),D[c]({duration:d,easing:e,complete:function(){q(D),clearTimeout(C),A.onHidden&&"hidden"!==J.state&&A.onHidden(),J.state="hidden",J.endTime=new Date,n(J)}})}function x(){(A.timeOut>0||A.extendedTimeOut>0)&&(C=setTimeout(w,A.extendedTimeOut),I.maxHideTime=parseFloat(A.extendedTimeOut),I.hideEta=(new Date).getTime()+I.maxHideTime)}function y(){clearTimeout(C),I.hideEta=0,D.stop(!0,!0)[A.showMethod]({duration:A.showDuration,easing:A.showEasing})}function z(){var a=(I.hideEta-(new Date).getTime())/I.maxHideTime*100;G.width(a+"%")}var A=p(),B=b.iconClass||A.iconClass;if("undefined"!=typeof b.optionsOverride&&(A=a.extend(A,b.optionsOverride),B=b.optionsOverride.iconClass||B),!v(A,b)){u++,r=c(A,!0);var C=null,D=a("<div/>"),E=a("<div/>"),F=a("<div/>"),G=a("<div/>"),H=a(A.closeHtml),I={intervalId:null,hideEta:null,maxHideTime:null},J={toastId:u,state:"visible",startTime:new Date,options:A,map:b};return e(),h(),g(),n(J),A.debug&&console&&console.log(J),D}}function p(){return a.extend({},m(),w.options)}function q(a){r||(r=c()),a.is(":visible")||(a.remove(),a=null,0===r.children().length&&(r.remove(),t=void 0))}var r,s,t,u=0,v={error:"error",info:"info",success:"success",warning:"warning"},w={clear:h,remove:i,error:b,getContainer:c,info:d,options:{},subscribe:e,success:f,version:"2.1.3",warning:g};return w}()})}("function"==typeof define&&define.amd?define:function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery")):window.toastr=b(window.jQuery)}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(jQuery),+function(a){"use strict";function b(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(a){function b(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function c(a){return(a[0]||a).nodeType}function d(){return{bindType:h.end,delegateType:h.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}}}function e(){if(window.QUnit)return!1;var a=document.createElement("bootstrap");for(var b in j)if(void 0!==a.style[b])return{end:j[b]};return!1}function f(b){var c=this,d=!1;return a(this).one(k.TRANSITION_END,function(){d=!0}),setTimeout(function(){d||k.triggerTransitionEnd(c)},b),this}function g(){h=e(),a.fn.emulateTransitionEnd=f,k.supportsTransitionEnd()&&(a.event.special[k.TRANSITION_END]=d())}var h=!1,i=1e6,j={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},k={TRANSITION_END:"bsTransitionEnd",getUID:function(a){do a+=~~(Math.random()*i);while(document.getElementById(a));return a},getSelectorFromElement:function(a){var b=a.getAttribute("data-target");return b||(b=a.getAttribute("href")||"",b=/^#[a-z]/i.test(b)?b:null),b},reflow:function(a){new Function("bs","return bs")(a.offsetHeight)},triggerTransitionEnd:function(b){a(b).trigger(h.end)},supportsTransitionEnd:function(){return Boolean(h)},typeCheckConfig:function(a,d,e){for(var f in e)if(e.hasOwnProperty(f)){var g=e[f],h=d[f],i=void 0;if(i=h&&c(h)?"element":b(h),!new RegExp(g).test(i))throw new Error(a.toUpperCase()+": "+('Option "'+f+'" provided type "'+i+'" ')+('but expected type "'+g+'".'))}}};return g(),k}(jQuery),g=(function(a){var b="alert",d="4.0.0-alpha.3",g="bs.alert",h="."+g,i=".data-api",j=a.fn[b],k=150,l={DISMISS:'[data-dismiss="alert"]'},m={CLOSE:"close"+h,CLOSED:"closed"+h,CLICK_DATA_API:"click"+h+i},n={ALERT:"alert",FADE:"fade",IN:"in"},o=function(){function b(a){c(this,b),this._element=a}return e(b,[{key:"close",value:function(a){a=a||this._element;var b=this._getRootElement(a),c=this._triggerCloseEvent(b);c.isDefaultPrevented()||this._removeElement(b)}},{key:"dispose",value:function(){a.removeData(this._element,g),this._element=null}},{key:"_getRootElement",value:function(b){var c=f.getSelectorFromElement(b),d=!1;return c&&(d=a(c)[0]),d||(d=a(b).closest("."+n.ALERT)[0]),d}},{key:"_triggerCloseEvent",value:function(b){var c=a.Event(m.CLOSE);return a(b).trigger(c),c}},{key:"_removeElement",value:function(b){return a(b).removeClass(n.IN),f.supportsTransitionEnd()&&a(b).hasClass(n.FADE)?void a(b).one(f.TRANSITION_END,a.proxy(this._destroyElement,this,b)).emulateTransitionEnd(k):void this._destroyElement(b)}},{key:"_destroyElement",value:function(b){a(b).detach().trigger(m.CLOSED).remove()}}],[{key:"_jQueryInterface",value:function(c){return this.each(function(){var d=a(this),e=d.data(g);e||(e=new b(this),d.data(g,e)),"close"===c&&e[c](this)})}},{key:"_handleDismiss",value:function(a){return function(b){b&&b.preventDefault(),a.close(this)}}},{key:"VERSION",get:function(){return d}}]),b}();return a(document).on(m.CLICK_DATA_API,l.DISMISS,o._handleDismiss(new o)),a.fn[b]=o._jQueryInterface,a.fn[b].Constructor=o,a.fn[b].noConflict=function(){return a.fn[b]=j,o._jQueryInterface},o}(jQuery),function(a){var b="button",d="4.0.0-alpha.3",f="bs.button",g="."+f,h=".data-api",i=a.fn[b],j={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},k={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"},l={CLICK_DATA_API:"click"+g+h,FOCUS_BLUR_DATA_API:"focus"+g+h+" "+("blur"+g+h)},m=function(){function b(a){c(this,b),this._element=a}return e(b,[{key:"toggle",value:function(){var b=!0,c=a(this._element).closest(k.DATA_TOGGLE)[0];if(c){var d=a(this._element).find(k.INPUT)[0];if(d){if("radio"===d.type)if(d.checked&&a(this._element).hasClass(j.ACTIVE))b=!1;else{var e=a(c).find(k.ACTIVE)[0];e&&a(e).removeClass(j.ACTIVE)}b&&(d.checked=!a(this._element).hasClass(j.ACTIVE),a(this._element).trigger("change")),d.focus()}}else this._element.setAttribute("aria-pressed",!a(this._element).hasClass(j.ACTIVE));b&&a(this._element).toggleClass(j.ACTIVE)}},{key:"dispose",value:function(){a.removeData(this._element,f),this._element=null}}],[{
key:"_jQueryInterface",value:function(c){return this.each(function(){var d=a(this).data(f);d||(d=new b(this),a(this).data(f,d)),"toggle"===c&&d[c]()})}},{key:"VERSION",get:function(){return d}}]),b}();return a(document).on(l.CLICK_DATA_API,k.DATA_TOGGLE_CARROT,function(b){b.preventDefault();var c=b.target;a(c).hasClass(j.BUTTON)||(c=a(c).closest(k.BUTTON)),m._jQueryInterface.call(a(c),"toggle")}).on(l.FOCUS_BLUR_DATA_API,k.DATA_TOGGLE_CARROT,function(b){var c=a(b.target).closest(k.BUTTON)[0];a(c).toggleClass(j.FOCUS,/^focus(in)?$/.test(b.type))}),a.fn[b]=m._jQueryInterface,a.fn[b].Constructor=m,a.fn[b].noConflict=function(){return a.fn[b]=i,m._jQueryInterface},m}(jQuery),function(a){var b="carousel",d="4.0.0-alpha.3",g="bs.carousel",h="."+g,i=".data-api",j=a.fn[b],k=600,l=37,m=39,n={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},o={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},p={NEXT:"next",PREVIOUS:"prev"},q={SLIDE:"slide"+h,SLID:"slid"+h,KEYDOWN:"keydown"+h,MOUSEENTER:"mouseenter"+h,MOUSELEAVE:"mouseleave"+h,LOAD_DATA_API:"load"+h+i,CLICK_DATA_API:"click"+h+i},r={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"right",LEFT:"left",ITEM:"carousel-item"},s={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".next, .prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},t=function(){function i(b,d){c(this,i),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this._config=this._getConfig(d),this._element=a(b)[0],this._indicatorsElement=a(this._element).find(s.INDICATORS)[0],this._addEventListeners()}return e(i,[{key:"next",value:function(){this._isSliding||this._slide(p.NEXT)}},{key:"nextWhenVisible",value:function(){document.hidden||this.next()}},{key:"prev",value:function(){this._isSliding||this._slide(p.PREVIOUS)}},{key:"pause",value:function(b){b||(this._isPaused=!0),a(this._element).find(s.NEXT_PREV)[0]&&f.supportsTransitionEnd()&&(f.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}},{key:"cycle",value:function(b){b||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval(a.proxy(document.visibilityState?this.nextWhenVisible:this.next,this),this._config.interval))}},{key:"to",value:function(b){var c=this;this._activeElement=a(this._element).find(s.ACTIVE_ITEM)[0];var d=this._getItemIndex(this._activeElement);if(!(b>this._items.length-1||b<0)){if(this._isSliding)return void a(this._element).one(q.SLID,function(){return c.to(b)});if(d===b)return this.pause(),void this.cycle();var e=b>d?p.NEXT:p.PREVIOUS;this._slide(e,this._items[b])}}},{key:"dispose",value:function(){a(this._element).off(h),a.removeData(this._element,g),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null}},{key:"_getConfig",value:function(c){return c=a.extend({},n,c),f.typeCheckConfig(b,c,o),c}},{key:"_addEventListeners",value:function(){this._config.keyboard&&a(this._element).on(q.KEYDOWN,a.proxy(this._keydown,this)),"hover"!==this._config.pause||"ontouchstart"in document.documentElement||a(this._element).on(q.MOUSEENTER,a.proxy(this.pause,this)).on(q.MOUSELEAVE,a.proxy(this.cycle,this))}},{key:"_keydown",value:function(a){if(a.preventDefault(),!/input|textarea/i.test(a.target.tagName))switch(a.which){case l:this.prev();break;case m:this.next();break;default:return}}},{key:"_getItemIndex",value:function(b){return this._items=a.makeArray(a(b).parent().find(s.ITEM)),this._items.indexOf(b)}},{key:"_getItemByDirection",value:function(a,b){var c=a===p.NEXT,d=a===p.PREVIOUS,e=this._getItemIndex(b),f=this._items.length-1,g=d&&0===e||c&&e===f;if(g&&!this._config.wrap)return b;var h=a===p.PREVIOUS?-1:1,i=(e+h)%this._items.length;return i===-1?this._items[this._items.length-1]:this._items[i]}},{key:"_triggerSlideEvent",value:function(b,c){var d=a.Event(q.SLIDE,{relatedTarget:b,direction:c});return a(this._element).trigger(d),d}},{key:"_setActiveIndicatorElement",value:function(b){if(this._indicatorsElement){a(this._indicatorsElement).find(s.ACTIVE).removeClass(r.ACTIVE);var c=this._indicatorsElement.children[this._getItemIndex(b)];c&&a(c).addClass(r.ACTIVE)}}},{key:"_slide",value:function(b,c){var d=this,e=a(this._element).find(s.ACTIVE_ITEM)[0],g=c||e&&this._getItemByDirection(b,e),h=Boolean(this._interval),i=b===p.NEXT?r.LEFT:r.RIGHT;if(g&&a(g).hasClass(r.ACTIVE))return void(this._isSliding=!1);var j=this._triggerSlideEvent(g,i);if(!j.isDefaultPrevented()&&e&&g){this._isSliding=!0,h&&this.pause(),this._setActiveIndicatorElement(g);var l=a.Event(q.SLID,{relatedTarget:g,direction:i});f.supportsTransitionEnd()&&a(this._element).hasClass(r.SLIDE)?(a(g).addClass(b),f.reflow(g),a(e).addClass(i),a(g).addClass(i),a(e).one(f.TRANSITION_END,function(){a(g).removeClass(i).removeClass(b),a(g).addClass(r.ACTIVE),a(e).removeClass(r.ACTIVE).removeClass(b).removeClass(i),d._isSliding=!1,setTimeout(function(){return a(d._element).trigger(l)},0)}).emulateTransitionEnd(k)):(a(e).removeClass(r.ACTIVE),a(g).addClass(r.ACTIVE),this._isSliding=!1,a(this._element).trigger(l)),h&&this.cycle()}}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=a(this).data(g),d=a.extend({},n,a(this).data());"object"==typeof b&&a.extend(d,b);var e="string"==typeof b?b:d.slide;if(c||(c=new i(this,d),a(this).data(g,c)),"number"==typeof b)c.to(b);else if("string"==typeof e){if(void 0===c[e])throw new Error('No method named "'+e+'"');c[e]()}else d.interval&&(c.pause(),c.cycle())})}},{key:"_dataApiClickHandler",value:function(b){var c=f.getSelectorFromElement(this);if(c){var d=a(c)[0];if(d&&a(d).hasClass(r.CAROUSEL)){var e=a.extend({},a(d).data(),a(this).data()),h=this.getAttribute("data-slide-to");h&&(e.interval=!1),i._jQueryInterface.call(a(d),e),h&&a(d).data(g).to(h),b.preventDefault()}}}},{key:"VERSION",get:function(){return d}},{key:"Default",get:function(){return n}}]),i}();return a(document).on(q.CLICK_DATA_API,s.DATA_SLIDE,t._dataApiClickHandler),a(window).on(q.LOAD_DATA_API,function(){a(s.DATA_RIDE).each(function(){var b=a(this);t._jQueryInterface.call(b,b.data())})}),a.fn[b]=t._jQueryInterface,a.fn[b].Constructor=t,a.fn[b].noConflict=function(){return a.fn[b]=j,t._jQueryInterface},t}(jQuery),function(a){var b="collapse",d="4.0.0-alpha.3",g="bs.collapse",h="."+g,i=".data-api",j=a.fn[b],k=600,l={toggle:!0,parent:""},m={toggle:"boolean",parent:"string"},n={SHOW:"show"+h,SHOWN:"shown"+h,HIDE:"hide"+h,HIDDEN:"hidden"+h,CLICK_DATA_API:"click"+h+i},o={IN:"in",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},p={WIDTH:"width",HEIGHT:"height"},q={ACTIVES:".panel > .in, .panel > .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},r=function(){function h(b,d){c(this,h),this._isTransitioning=!1,this._element=b,this._config=this._getConfig(d),this._triggerArray=a.makeArray(a('[data-toggle="collapse"][href="#'+b.id+'"],'+('[data-toggle="collapse"][data-target="#'+b.id+'"]'))),this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}return e(h,[{key:"toggle",value:function(){a(this._element).hasClass(o.IN)?this.hide():this.show()}},{key:"show",value:function(){var b=this;if(!this._isTransitioning&&!a(this._element).hasClass(o.IN)){var c=void 0,d=void 0;if(this._parent&&(c=a.makeArray(a(q.ACTIVES)),c.length||(c=null)),!(c&&(d=a(c).data(g),d&&d._isTransitioning))){var e=a.Event(n.SHOW);if(a(this._element).trigger(e),!e.isDefaultPrevented()){c&&(h._jQueryInterface.call(a(c),"hide"),d||a(c).data(g,null));var i=this._getDimension();a(this._element).removeClass(o.COLLAPSE).addClass(o.COLLAPSING),this._element.style[i]=0,this._element.setAttribute("aria-expanded",!0),this._triggerArray.length&&a(this._triggerArray).removeClass(o.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var j=function(){a(b._element).removeClass(o.COLLAPSING).addClass(o.COLLAPSE).addClass(o.IN),b._element.style[i]="",b.setTransitioning(!1),a(b._element).trigger(n.SHOWN)};if(!f.supportsTransitionEnd())return void j();var l=i[0].toUpperCase()+i.slice(1),m="scroll"+l;a(this._element).one(f.TRANSITION_END,j).emulateTransitionEnd(k),this._element.style[i]=this._element[m]+"px"}}}}},{key:"hide",value:function(){var b=this;if(!this._isTransitioning&&a(this._element).hasClass(o.IN)){var c=a.Event(n.HIDE);if(a(this._element).trigger(c),!c.isDefaultPrevented()){var d=this._getDimension(),e=d===p.WIDTH?"offsetWidth":"offsetHeight";this._element.style[d]=this._element[e]+"px",f.reflow(this._element),a(this._element).addClass(o.COLLAPSING).removeClass(o.COLLAPSE).removeClass(o.IN),this._element.setAttribute("aria-expanded",!1),this._triggerArray.length&&a(this._triggerArray).addClass(o.COLLAPSED).attr("aria-expanded",!1),this.setTransitioning(!0);var g=function(){b.setTransitioning(!1),a(b._element).removeClass(o.COLLAPSING).addClass(o.COLLAPSE).trigger(n.HIDDEN)};return this._element.style[d]=0,f.supportsTransitionEnd()?void a(this._element).one(f.TRANSITION_END,g).emulateTransitionEnd(k):void g()}}}},{key:"setTransitioning",value:function(a){this._isTransitioning=a}},{key:"dispose",value:function(){a.removeData(this._element,g),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null}},{key:"_getConfig",value:function(c){return c=a.extend({},l,c),c.toggle=Boolean(c.toggle),f.typeCheckConfig(b,c,m),c}},{key:"_getDimension",value:function(){var b=a(this._element).hasClass(p.WIDTH);return b?p.WIDTH:p.HEIGHT}},{key:"_getParent",value:function(){var b=this,c=a(this._config.parent)[0],d='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return a(c).find(d).each(function(a,c){b._addAriaAndCollapsedClass(h._getTargetFromElement(c),[c])}),c}},{key:"_addAriaAndCollapsedClass",value:function(b,c){if(b){var d=a(b).hasClass(o.IN);b.setAttribute("aria-expanded",d),c.length&&a(c).toggleClass(o.COLLAPSED,!d).attr("aria-expanded",d)}}}],[{key:"_getTargetFromElement",value:function(b){var c=f.getSelectorFromElement(b);return c?a(c)[0]:null}},{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=a(this),d=c.data(g),e=a.extend({},l,c.data(),"object"==typeof b&&b);if(!d&&e.toggle&&/show|hide/.test(b)&&(e.toggle=!1),d||(d=new h(this,e),c.data(g,d)),"string"==typeof b){if(void 0===d[b])throw new Error('No method named "'+b+'"');d[b]()}})}},{key:"VERSION",get:function(){return d}},{key:"Default",get:function(){return l}}]),h}();return a(document).on(n.CLICK_DATA_API,q.DATA_TOGGLE,function(b){b.preventDefault();var c=r._getTargetFromElement(this),d=a(c).data(g),e=d?"toggle":a(this).data();r._jQueryInterface.call(a(c),e)}),a.fn[b]=r._jQueryInterface,a.fn[b].Constructor=r,a.fn[b].noConflict=function(){return a.fn[b]=j,r._jQueryInterface},r}(jQuery),function(a){var b="dropdown",d="4.0.0-alpha.3",g="bs.dropdown",h="."+g,i=".data-api",j=a.fn[b],k=27,l=38,m=40,n=3,o={HIDE:"hide"+h,HIDDEN:"hidden"+h,SHOW:"show"+h,SHOWN:"shown"+h,CLICK:"click"+h,CLICK_DATA_API:"click"+h+i,KEYDOWN_DATA_API:"keydown"+h+i},p={BACKDROP:"dropdown-backdrop",DISABLED:"disabled",OPEN:"open"},q={BACKDROP:".dropdown-backdrop",DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",ROLE_MENU:'[role="menu"]',ROLE_LISTBOX:'[role="listbox"]',NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:'[role="menu"] li:not(.disabled) a, [role="listbox"] li:not(.disabled) a'},r=function(){function b(a){c(this,b),this._element=a,this._addEventListeners()}return e(b,[{key:"toggle",value:function(){if(this.disabled||a(this).hasClass(p.DISABLED))return!1;var c=b._getParentFromElement(this),d=a(c).hasClass(p.OPEN);if(b._clearMenus(),d)return!1;if("ontouchstart"in document.documentElement&&!a(c).closest(q.NAVBAR_NAV).length){var e=document.createElement("div");e.className=p.BACKDROP,a(e).insertBefore(this),a(e).on("click",b._clearMenus)}var f={relatedTarget:this},g=a.Event(o.SHOW,f);return a(c).trigger(g),!g.isDefaultPrevented()&&(this.focus(),this.setAttribute("aria-expanded","true"),a(c).toggleClass(p.OPEN),a(c).trigger(a.Event(o.SHOWN,f)),!1)}},{key:"dispose",value:function(){a.removeData(this._element,g),a(this._element).off(h),this._element=null}},{key:"_addEventListeners",value:function(){a(this._element).on(o.CLICK,this.toggle)}}],[{key:"_jQueryInterface",value:function(c){return this.each(function(){var d=a(this).data(g);if(d||a(this).data(g,d=new b(this)),"string"==typeof c){if(void 0===d[c])throw new Error('No method named "'+c+'"');d[c].call(this)}})}},{key:"_clearMenus",value:function(c){if(!c||c.which!==n){var d=a(q.BACKDROP)[0];d&&d.parentNode.removeChild(d);for(var e=a.makeArray(a(q.DATA_TOGGLE)),f=0;f<e.length;f++){var g=b._getParentFromElement(e[f]),h={relatedTarget:e[f]};if(a(g).hasClass(p.OPEN)&&!(c&&"click"===c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(g,c.target))){var i=a.Event(o.HIDE,h);a(g).trigger(i),i.isDefaultPrevented()||(e[f].setAttribute("aria-expanded","false"),a(g).removeClass(p.OPEN).trigger(a.Event(o.HIDDEN,h)))}}}}},{key:"_getParentFromElement",value:function(b){var c=void 0,d=f.getSelectorFromElement(b);return d&&(c=a(d)[0]),c||b.parentNode}},{key:"_dataApiKeydownHandler",value:function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)&&(c.preventDefault(),c.stopPropagation(),!this.disabled&&!a(this).hasClass(p.DISABLED))){var d=b._getParentFromElement(this),e=a(d).hasClass(p.OPEN);if(!e&&c.which!==k||e&&c.which===k){if(c.which===k){var f=a(d).find(q.DATA_TOGGLE)[0];a(f).trigger("focus")}return void a(this).trigger("click")}var g=a.makeArray(a(q.VISIBLE_ITEMS));if(g=g.filter(function(a){return a.offsetWidth||a.offsetHeight}),g.length){var h=g.indexOf(c.target);c.which===l&&h>0&&h--,c.which===m&&h<g.length-1&&h++,h<0&&(h=0),g[h].focus()}}}},{key:"VERSION",get:function(){return d}}]),b}();return a(document).on(o.KEYDOWN_DATA_API,q.DATA_TOGGLE,r._dataApiKeydownHandler).on(o.KEYDOWN_DATA_API,q.ROLE_MENU,r._dataApiKeydownHandler).on(o.KEYDOWN_DATA_API,q.ROLE_LISTBOX,r._dataApiKeydownHandler).on(o.CLICK_DATA_API,r._clearMenus).on(o.CLICK_DATA_API,q.DATA_TOGGLE,r.prototype.toggle).on(o.CLICK_DATA_API,q.FORM_CHILD,function(a){a.stopPropagation()}),a.fn[b]=r._jQueryInterface,a.fn[b].Constructor=r,a.fn[b].noConflict=function(){return a.fn[b]=j,r._jQueryInterface},r}(jQuery),function(a){var b="modal",d="4.0.0-alpha.3",g="bs.modal",h="."+g,i=".data-api",j=a.fn[b],k=300,l=150,m=27,n={backdrop:!0,keyboard:!0,focus:!0,show:!0},o={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},p={HIDE:"hide"+h,HIDDEN:"hidden"+h,SHOW:"show"+h,SHOWN:"shown"+h,FOCUSIN:"focusin"+h,RESIZE:"resize"+h,CLICK_DISMISS:"click.dismiss"+h,KEYDOWN_DISMISS:"keydown.dismiss"+h,MOUSEUP_DISMISS:"mouseup.dismiss"+h,MOUSEDOWN_DISMISS:"mousedown.dismiss"+h,CLICK_DATA_API:"click"+h+i},q={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",IN:"in"},r={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".navbar-fixed-top, .navbar-fixed-bottom, .is-fixed"},s=function(){function i(b,d){c(this,i),this._config=this._getConfig(d),this._element=b,this._dialog=a(b).find(r.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return e(i,[{key:"toggle",value:function(a){return this._isShown?this.hide():this.show(a)}},{key:"show",value:function(b){var c=this,d=a.Event(p.SHOW,{relatedTarget:b});a(this._element).trigger(d),this._isShown||d.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),a(document.body).addClass(q.OPEN),this._setEscapeEvent(),this._setResizeEvent(),a(this._element).on(p.CLICK_DISMISS,r.DATA_DISMISS,a.proxy(this.hide,this)),a(this._dialog).on(p.MOUSEDOWN_DISMISS,function(){a(c._element).one(p.MOUSEUP_DISMISS,function(b){a(b.target).is(c._element)&&(c._ignoreBackdropClick=!0)})}),this._showBackdrop(a.proxy(this._showElement,this,b)))}},{key:"hide",value:function(b){b&&b.preventDefault();var c=a.Event(p.HIDE);a(this._element).trigger(c),this._isShown&&!c.isDefaultPrevented()&&(this._isShown=!1,this._setEscapeEvent(),this._setResizeEvent(),a(document).off(p.FOCUSIN),a(this._element).removeClass(q.IN),a(this._element).off(p.CLICK_DISMISS),a(this._dialog).off(p.MOUSEDOWN_DISMISS),f.supportsTransitionEnd()&&a(this._element).hasClass(q.FADE)?a(this._element).one(f.TRANSITION_END,a.proxy(this._hideModal,this)).emulateTransitionEnd(k):this._hideModal())}},{key:"dispose",value:function(){a.removeData(this._element,g),a(window).off(h),a(document).off(h),a(this._element).off(h),a(this._backdrop).off(h),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._originalBodyPadding=null,this._scrollbarWidth=null}},{key:"_getConfig",value:function(c){return c=a.extend({},n,c),f.typeCheckConfig(b,c,o),c}},{key:"_showElement",value:function(b){var c=this,d=f.supportsTransitionEnd()&&a(this._element).hasClass(q.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,d&&f.reflow(this._element),a(this._element).addClass(q.IN),this._config.focus&&this._enforceFocus();var e=a.Event(p.SHOWN,{relatedTarget:b}),g=function(){c._config.focus&&c._element.focus(),a(c._element).trigger(e)};d?a(this._dialog).one(f.TRANSITION_END,g).emulateTransitionEnd(k):g()}},{key:"_enforceFocus",value:function(){var b=this;a(document).off(p.FOCUSIN).on(p.FOCUSIN,function(c){document===c.target||b._element===c.target||a(b._element).has(c.target).length||b._element.focus()})}},{key:"_setEscapeEvent",value:function(){var b=this;this._isShown&&this._config.keyboard?a(this._element).on(p.KEYDOWN_DISMISS,function(a){a.which===m&&b.hide()}):this._isShown||a(this._element).off(p.KEYDOWN_DISMISS)}},{key:"_setResizeEvent",value:function(){this._isShown?a(window).on(p.RESIZE,a.proxy(this._handleUpdate,this)):a(window).off(p.RESIZE)}},{key:"_hideModal",value:function(){var b=this;this._element.style.display="none",this._element.setAttribute("aria-hidden","true"),this._showBackdrop(function(){a(document.body).removeClass(q.OPEN),b._resetAdjustments(),b._resetScrollbar(),a(b._element).trigger(p.HIDDEN)})}},{key:"_removeBackdrop",value:function(){this._backdrop&&(a(this._backdrop).remove(),this._backdrop=null)}},{key:"_showBackdrop",value:function(b){var c=this,d=a(this._element).hasClass(q.FADE)?q.FADE:"";if(this._isShown&&this._config.backdrop){var e=f.supportsTransitionEnd()&&d;if(this._backdrop=document.createElement("div"),this._backdrop.className=q.BACKDROP,d&&a(this._backdrop).addClass(d),a(this._backdrop).appendTo(document.body),a(this._element).on(p.CLICK_DISMISS,function(a){return c._ignoreBackdropClick?void(c._ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"===c._config.backdrop?c._element.focus():c.hide()))}),e&&f.reflow(this._backdrop),a(this._backdrop).addClass(q.IN),!b)return;if(!e)return void b();a(this._backdrop).one(f.TRANSITION_END,b).emulateTransitionEnd(l)}else if(!this._isShown&&this._backdrop){a(this._backdrop).removeClass(q.IN);var g=function(){c._removeBackdrop(),b&&b()};f.supportsTransitionEnd()&&a(this._element).hasClass(q.FADE)?a(this._backdrop).one(f.TRANSITION_END,g).emulateTransitionEnd(l):g()}else b&&b()}},{key:"_handleUpdate",value:function(){this._adjustDialog()}},{key:"_adjustDialog",value:function(){var a=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&a&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!a&&(this._element.style.paddingRight=this._scrollbarWidth+"px")}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}},{key:"_checkScrollbar",value:function(){this._isBodyOverflowing=document.body.clientWidth<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()}},{key:"_setScrollbar",value:function(){var b=parseInt(a(r.FIXED_CONTENT).css("padding-right")||0,10);this._originalBodyPadding=document.body.style.paddingRight||"",this._isBodyOverflowing&&(document.body.style.paddingRight=b+this._scrollbarWidth+"px")}},{key:"_resetScrollbar",value:function(){document.body.style.paddingRight=this._originalBodyPadding}},{key:"_getScrollbarWidth",value:function(){var a=document.createElement("div");a.className=q.SCROLLBAR_MEASURER,document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;return document.body.removeChild(a),b}}],[{key:"_jQueryInterface",value:function(b,c){return this.each(function(){var d=a(this).data(g),e=a.extend({},i.Default,a(this).data(),"object"==typeof b&&b);if(d||(d=new i(this,e),a(this).data(g,d)),"string"==typeof b){if(void 0===d[b])throw new Error('No method named "'+b+'"');d[b](c)}else e.show&&d.show(c)})}},{key:"VERSION",get:function(){return d}},{key:"Default",get:function(){return n}}]),i}();return a(document).on(p.CLICK_DATA_API,r.DATA_TOGGLE,function(b){var c=this,d=void 0,e=f.getSelectorFromElement(this);e&&(d=a(e)[0]);var h=a(d).data(g)?"toggle":a.extend({},a(d).data(),a(this).data());"A"===this.tagName&&b.preventDefault();var i=a(d).one(p.SHOW,function(b){b.isDefaultPrevented()||i.one(p.HIDDEN,function(){a(c).is(":visible")&&c.focus()})});s._jQueryInterface.call(a(d),h,this)}),a.fn[b]=s._jQueryInterface,a.fn[b].Constructor=s,a.fn[b].noConflict=function(){return a.fn[b]=j,s._jQueryInterface},s}(jQuery),function(a){var b="scrollspy",d="4.0.0-alpha.3",g="bs.scrollspy",h="."+g,i=".data-api",j=a.fn[b],k={offset:10,method:"auto",target:""},l={offset:"number",method:"string",target:"(string|element)"},m={ACTIVATE:"activate"+h,SCROLL:"scroll"+h,LOAD_DATA_API:"load"+h+i},n={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",NAV_LINK:"nav-link",NAV:"nav",ACTIVE:"active"},o={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",LIST_ITEM:".list-item",LI:"li",LI_DROPDOWN:"li.dropdown",NAV_LINKS:".nav-link",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},p={OFFSET:"offset",POSITION:"position"},q=function(){function i(b,d){c(this,i),this._element=b,this._scrollElement="BODY"===b.tagName?window:b,this._config=this._getConfig(d),this._selector=this._config.target+" "+o.NAV_LINKS+","+(this._config.target+" "+o.DROPDOWN_ITEMS),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,a(this._scrollElement).on(m.SCROLL,a.proxy(this._process,this)),this.refresh(),this._process()}return e(i,[{key:"refresh",value:function(){var b=this,c=this._scrollElement!==this._scrollElement.window?p.POSITION:p.OFFSET,d="auto"===this._config.method?c:this._config.method,e=d===p.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();var g=a.makeArray(a(this._selector));g.map(function(b){var c=void 0,g=f.getSelectorFromElement(b);return g&&(c=a(g)[0]),c&&(c.offsetWidth||c.offsetHeight)?[a(c)[d]().top+e,g]:null}).filter(function(a){return a}).sort(function(a,b){return a[0]-b[0]}).forEach(function(a){b._offsets.push(a[0]),b._targets.push(a[1])})}},{key:"dispose",value:function(){a.removeData(this._element,g),a(this._scrollElement).off(h),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null}},{key:"_getConfig",value:function(c){if(c=a.extend({},k,c),"string"!=typeof c.target){var d=a(c.target).attr("id");d||(d=f.getUID(b),a(c.target).attr("id",d)),c.target="#"+d}return f.typeCheckConfig(b,c,l),c}},{key:"_getScrollTop",value:function(){return this._scrollElement===window?this._scrollElement.scrollY:this._scrollElement.scrollTop}},{key:"_getScrollHeight",value:function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}},{key:"_process",value:function(){var a=this._getScrollTop()+this._config.offset,b=this._getScrollHeight(),c=this._config.offset+b-this._scrollElement.offsetHeight;if(this._scrollHeight!==b&&this.refresh(),a>=c){var d=this._targets[this._targets.length-1];this._activeTarget!==d&&this._activate(d)}if(this._activeTarget&&a<this._offsets[0])return this._activeTarget=null,void this._clear();for(var e=this._offsets.length;e--;){var f=this._activeTarget!==this._targets[e]&&a>=this._offsets[e]&&(void 0===this._offsets[e+1]||a<this._offsets[e+1]);f&&this._activate(this._targets[e])}}},{key:"_activate",value:function(b){this._activeTarget=b,this._clear();var c=this._selector.split(",");c=c.map(function(a){return a+'[data-target="'+b+'"],'+(a+'[href="'+b+'"]')});var d=a(c.join(","));d.hasClass(n.DROPDOWN_ITEM)?(d.closest(o.DROPDOWN).find(o.DROPDOWN_TOGGLE).addClass(n.ACTIVE),d.addClass(n.ACTIVE)):d.parents(o.LI).find(o.NAV_LINKS).addClass(n.ACTIVE),a(this._scrollElement).trigger(m.ACTIVATE,{relatedTarget:b})}},{key:"_clear",value:function(){a(this._selector).filter(o.ACTIVE).removeClass(n.ACTIVE)}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=a(this).data(g),d="object"==typeof b&&b||null;if(c||(c=new i(this,d),a(this).data(g,c)),"string"==typeof b){if(void 0===c[b])throw new Error('No method named "'+b+'"');c[b]()}})}},{key:"VERSION",get:function(){return d}},{key:"Default",get:function(){return k}}]),i}();return a(window).on(m.LOAD_DATA_API,function(){for(var b=a.makeArray(a(o.DATA_SPY)),c=b.length;c--;){var d=a(b[c]);q._jQueryInterface.call(d,d.data())}}),a.fn[b]=q._jQueryInterface,a.fn[b].Constructor=q,a.fn[b].noConflict=function(){return a.fn[b]=j,q._jQueryInterface},q}(jQuery),function(a){var b="tab",d="4.0.0-alpha.3",g="bs.tab",h="."+g,i=".data-api",j=a.fn[b],k=150,l={HIDE:"hide"+h,HIDDEN:"hidden"+h,SHOW:"show"+h,SHOWN:"shown"+h,CLICK_DATA_API:"click"+h+i},m={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",FADE:"fade",IN:"in"},n={A:"a",LI:"li",DROPDOWN:".dropdown",UL:"ul:not(.dropdown-menu)",FADE_CHILD:"> .nav-item .fade, > .fade",ACTIVE:".active",ACTIVE_CHILD:"> .nav-item > .active, > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},o=function(){function b(a){c(this,b),this._element=a}return e(b,[{key:"show",value:function(){var b=this;if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE||!a(this._element).hasClass(m.ACTIVE)){var c=void 0,d=void 0,e=a(this._element).closest(n.UL)[0],g=f.getSelectorFromElement(this._element);e&&(d=a.makeArray(a(e).find(n.ACTIVE)),d=d[d.length-1]);var h=a.Event(l.HIDE,{relatedTarget:this._element}),i=a.Event(l.SHOW,{relatedTarget:d});if(d&&a(d).trigger(h),a(this._element).trigger(i),!i.isDefaultPrevented()&&!h.isDefaultPrevented()){g&&(c=a(g)[0]),this._activate(this._element,e);var j=function(){var c=a.Event(l.HIDDEN,{relatedTarget:b._element}),e=a.Event(l.SHOWN,{relatedTarget:d});a(d).trigger(c),a(b._element).trigger(e)};c?this._activate(c,c.parentNode,j):j()}}}},{key:"dispose",value:function(){a.removeClass(this._element,g),this._element=null}},{key:"_activate",value:function(b,c,d){var e=a(c).find(n.ACTIVE_CHILD)[0],g=d&&f.supportsTransitionEnd()&&(e&&a(e).hasClass(m.FADE)||Boolean(a(c).find(n.FADE_CHILD)[0])),h=a.proxy(this._transitionComplete,this,b,e,g,d);e&&g?a(e).one(f.TRANSITION_END,h).emulateTransitionEnd(k):h(),e&&a(e).removeClass(m.IN)}},{key:"_transitionComplete",value:function(b,c,d,e){if(c){a(c).removeClass(m.ACTIVE);var g=a(c).find(n.DROPDOWN_ACTIVE_CHILD)[0];g&&a(g).removeClass(m.ACTIVE),c.setAttribute("aria-expanded",!1)}if(a(b).addClass(m.ACTIVE),b.setAttribute("aria-expanded",!0),d?(f.reflow(b),a(b).addClass(m.IN)):a(b).removeClass(m.FADE),b.parentNode&&a(b.parentNode).hasClass(m.DROPDOWN_MENU)){var h=a(b).closest(n.DROPDOWN)[0];h&&a(h).find(n.DROPDOWN_TOGGLE).addClass(m.ACTIVE),b.setAttribute("aria-expanded",!0)}e&&e()}}],[{key:"_jQueryInterface",value:function(c){return this.each(function(){var d=a(this),e=d.data(g);if(e||(e=e=new b(this),d.data(g,e)),"string"==typeof c){if(void 0===e[c])throw new Error('No method named "'+c+'"');e[c]()}})}},{key:"VERSION",get:function(){return d}}]),b}();return a(document).on(l.CLICK_DATA_API,n.DATA_TOGGLE,function(b){b.preventDefault(),o._jQueryInterface.call(a(this),"show")}),a.fn[b]=o._jQueryInterface,a.fn[b].Constructor=o,a.fn[b].noConflict=function(){return a.fn[b]=j,o._jQueryInterface},o}(jQuery),function(a){if(void 0===window.Tether)throw new Error("Bootstrap tooltips require Tether (http://github.hubspot.com/tether/)");var b="tooltip",d="4.0.0-alpha.3",g="bs.tooltip",h="."+g,i=a.fn[b],j=150,k="bs-tether",l={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:"0 0",constraints:[]},m={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"string",constraints:"array"},n={TOP:"bottom center",RIGHT:"middle left",BOTTOM:"top center",LEFT:"middle right"},o={IN:"in",OUT:"out"},p={HIDE:"hide"+h,HIDDEN:"hidden"+h,SHOW:"show"+h,SHOWN:"shown"+h,INSERTED:"inserted"+h,CLICK:"click"+h,FOCUSIN:"focusin"+h,FOCUSOUT:"focusout"+h,MOUSEENTER:"mouseenter"+h,MOUSELEAVE:"mouseleave"+h},q={FADE:"fade",IN:"in"},r={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner"},s={element:!1,enabled:!1},t={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},u=function(){function i(a,b){c(this,i),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._tether=null,this.element=a,this.config=this._getConfig(b),this.tip=null,this._setListeners()}return e(i,[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(b){if(b){var c=this.constructor.DATA_KEY,d=a(b.currentTarget).data(c);d||(d=new this.constructor(b.currentTarget,this._getDelegateConfig()),a(b.currentTarget).data(c,d)),d._activeTrigger.click=!d._activeTrigger.click,d._isWithActiveTrigger()?d._enter(null,d):d._leave(null,d)}else{if(a(this.getTipElement()).hasClass(q.IN))return void this._leave(null,this);this._enter(null,this)}}},{key:"dispose",value:function(){clearTimeout(this._timeout),this.cleanupTether(),a.removeData(this.element,this.constructor.DATA_KEY),a(this.element).off(this.constructor.EVENT_KEY),this.tip&&a(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._tether=null,this.element=null,this.config=null,this.tip=null}},{key:"show",value:function(){var b=this,c=a.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){a(this.element).trigger(c);var d=a.contains(this.element.ownerDocument.documentElement,this.element);if(c.isDefaultPrevented()||!d)return;var e=this.getTipElement(),g=f.getUID(this.constructor.NAME);e.setAttribute("id",g),this.element.setAttribute("aria-describedby",g),this.setContent(),this.config.animation&&a(e).addClass(q.FADE);var h="function"==typeof this.config.placement?this.config.placement.call(this,e,this.element):this.config.placement,j=this._getAttachment(h);a(e).data(this.constructor.DATA_KEY,this).appendTo(document.body),a(this.element).trigger(this.constructor.Event.INSERTED),
this._tether=new Tether({attachment:j,element:e,target:this.element,classes:s,classPrefix:k,offset:this.config.offset,constraints:this.config.constraints,addTargetClasses:!1}),f.reflow(e),this._tether.position(),a(e).addClass(q.IN);var l=function(){var c=b._hoverState;b._hoverState=null,a(b.element).trigger(b.constructor.Event.SHOWN),c===o.OUT&&b._leave(null,b)};if(f.supportsTransitionEnd()&&a(this.tip).hasClass(q.FADE))return void a(this.tip).one(f.TRANSITION_END,l).emulateTransitionEnd(i._TRANSITION_DURATION);l()}}},{key:"hide",value:function(b){var c=this,d=this.getTipElement(),e=a.Event(this.constructor.Event.HIDE),g=function(){c._hoverState!==o.IN&&d.parentNode&&d.parentNode.removeChild(d),c.element.removeAttribute("aria-describedby"),a(c.element).trigger(c.constructor.Event.HIDDEN),c.cleanupTether(),b&&b()};a(this.element).trigger(e),e.isDefaultPrevented()||(a(d).removeClass(q.IN),f.supportsTransitionEnd()&&a(this.tip).hasClass(q.FADE)?a(d).one(f.TRANSITION_END,g).emulateTransitionEnd(j):g(),this._hoverState="")}},{key:"isWithContent",value:function(){return Boolean(this.getTitle())}},{key:"getTipElement",value:function(){return this.tip=this.tip||a(this.config.template)[0]}},{key:"setContent",value:function(){var b=a(this.getTipElement());this.setElementContent(b.find(r.TOOLTIP_INNER),this.getTitle()),b.removeClass(q.FADE).removeClass(q.IN),this.cleanupTether()}},{key:"setElementContent",value:function(b,c){var d=this.config.html;"object"==typeof c&&(c.nodeType||c.jquery)?d?a(c).parent().is(b)||b.empty().append(c):b.text(a(c).text()):b[d?"html":"text"](c)}},{key:"getTitle",value:function(){var a=this.element.getAttribute("data-original-title");return a||(a="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),a}},{key:"cleanupTether",value:function(){this._tether&&this._tether.destroy()}},{key:"_getAttachment",value:function(a){return n[a.toUpperCase()]}},{key:"_setListeners",value:function(){var b=this,c=this.config.trigger.split(" ");c.forEach(function(c){if("click"===c)a(b.element).on(b.constructor.Event.CLICK,b.config.selector,a.proxy(b.toggle,b));else if(c!==t.MANUAL){var d=c===t.HOVER?b.constructor.Event.MOUSEENTER:b.constructor.Event.FOCUSIN,e=c===t.HOVER?b.constructor.Event.MOUSELEAVE:b.constructor.Event.FOCUSOUT;a(b.element).on(d,b.config.selector,a.proxy(b._enter,b)).on(e,b.config.selector,a.proxy(b._leave,b))}}),this.config.selector?this.config=a.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()}},{key:"_fixTitle",value:function(){var a=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==a)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))}},{key:"_enter",value:function(b,c){var d=this.constructor.DATA_KEY;return c=c||a(b.currentTarget).data(d),c||(c=new this.constructor(b.currentTarget,this._getDelegateConfig()),a(b.currentTarget).data(d,c)),b&&(c._activeTrigger["focusin"===b.type?t.FOCUS:t.HOVER]=!0),a(c.getTipElement()).hasClass(q.IN)||c._hoverState===o.IN?void(c._hoverState=o.IN):(clearTimeout(c._timeout),c._hoverState=o.IN,c.config.delay&&c.config.delay.show?void(c._timeout=setTimeout(function(){c._hoverState===o.IN&&c.show()},c.config.delay.show)):void c.show())}},{key:"_leave",value:function(b,c){var d=this.constructor.DATA_KEY;if(c=c||a(b.currentTarget).data(d),c||(c=new this.constructor(b.currentTarget,this._getDelegateConfig()),a(b.currentTarget).data(d,c)),b&&(c._activeTrigger["focusout"===b.type?t.FOCUS:t.HOVER]=!1),!c._isWithActiveTrigger())return clearTimeout(c._timeout),c._hoverState=o.OUT,c.config.delay&&c.config.delay.hide?void(c._timeout=setTimeout(function(){c._hoverState===o.OUT&&c.hide()},c.config.delay.hide)):void c.hide()}},{key:"_isWithActiveTrigger",value:function(){for(var a in this._activeTrigger)if(this._activeTrigger[a])return!0;return!1}},{key:"_getConfig",value:function(c){return c=a.extend({},this.constructor.Default,a(this.element).data(),c),c.delay&&"number"==typeof c.delay&&(c.delay={show:c.delay,hide:c.delay}),f.typeCheckConfig(b,c,this.constructor.DefaultType),c}},{key:"_getDelegateConfig",value:function(){var a={};if(this.config)for(var b in this.config)this.constructor.Default[b]!==this.config[b]&&(a[b]=this.config[b]);return a}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=a(this).data(g),d="object"==typeof b?b:null;if((c||!/destroy|hide/.test(b))&&(c||(c=new i(this,d),a(this).data(g,c)),"string"==typeof b)){if(void 0===c[b])throw new Error('No method named "'+b+'"');c[b]()}})}},{key:"VERSION",get:function(){return d}},{key:"Default",get:function(){return l}},{key:"NAME",get:function(){return b}},{key:"DATA_KEY",get:function(){return g}},{key:"Event",get:function(){return p}},{key:"EVENT_KEY",get:function(){return h}},{key:"DefaultType",get:function(){return m}}]),i}();return a.fn[b]=u._jQueryInterface,a.fn[b].Constructor=u,a.fn[b].noConflict=function(){return a.fn[b]=i,u._jQueryInterface},u}(jQuery));(function(a){var f="popover",h="4.0.0-alpha.3",i="bs.popover",j="."+i,k=a.fn[f],l=a.extend({},g.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),m=a.extend({},g.DefaultType,{content:"(string|element|function)"}),n={FADE:"fade",IN:"in"},o={TITLE:".popover-title",CONTENT:".popover-content",ARROW:".popover-arrow"},p={HIDE:"hide"+j,HIDDEN:"hidden"+j,SHOW:"show"+j,SHOWN:"shown"+j,INSERTED:"inserted"+j,CLICK:"click"+j,FOCUSIN:"focusin"+j,FOCUSOUT:"focusout"+j,MOUSEENTER:"mouseenter"+j,MOUSELEAVE:"mouseleave"+j},q=function(g){function k(){c(this,k),d(Object.getPrototypeOf(k.prototype),"constructor",this).apply(this,arguments)}return b(k,g),e(k,[{key:"isWithContent",value:function(){return this.getTitle()||this._getContent()}},{key:"getTipElement",value:function(){return this.tip=this.tip||a(this.config.template)[0]}},{key:"setContent",value:function(){var b=a(this.getTipElement());this.setElementContent(b.find(o.TITLE),this.getTitle()),this.setElementContent(b.find(o.CONTENT),this._getContent()),b.removeClass(n.FADE).removeClass(n.IN),this.cleanupTether()}},{key:"_getContent",value:function(){return this.element.getAttribute("data-content")||("function"==typeof this.config.content?this.config.content.call(this.element):this.config.content)}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=a(this).data(i),d="object"==typeof b?b:null;if((c||!/destroy|hide/.test(b))&&(c||(c=new k(this,d),a(this).data(i,c)),"string"==typeof b)){if(void 0===c[b])throw new Error('No method named "'+b+'"');c[b]()}})}},{key:"VERSION",get:function(){return h}},{key:"Default",get:function(){return l}},{key:"NAME",get:function(){return f}},{key:"DATA_KEY",get:function(){return i}},{key:"Event",get:function(){return p}},{key:"EVENT_KEY",get:function(){return j}},{key:"DefaultType",get:function(){return m}}]),k}(g);return a.fn[f]=q._jQueryInterface,a.fn[f].Constructor=q,a.fn[f].noConflict=function(){return a.fn[f]=k,q._jQueryInterface},q})(jQuery)}(jQuery),function(a,b,c){"use strict";function d(a){return null!=a&&""!==a&&"hasOwnProperty"!==a&&h.test("."+a)}function e(a,b){if(!d(b))throw g("badmember",'Dotted member path "@{0}" is invalid.',b);for(var e=b.split("."),f=0,h=e.length;f<h&&a!==c;f++){var i=e[f];a=null!==a?a[i]:c}return a}function f(a,c){c=c||{},b.forEach(c,function(a,b){delete c[b]});for(var d in a)!a.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(c[d]=a[d]);return c}var g=b.$$minErr("$resource"),h=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;b.module("ngResource",["ng"]).provider("$resource",function(){var a=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$q",function(d,h){function i(a){return j(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function j(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function k(b,c){this.template=b,this.defaults=o({},a.defaults,c),this.urlParams={}}function l(i,j,r,s){function t(a,b){var c={};return b=o({},j,b),n(b,function(b,d){q(b)&&(b=b()),c[d]=b&&b.charAt&&"@"==b.charAt(0)?e(a,b.substr(1)):b}),c}function u(a){return a.resource}function v(a){f(a||{},this)}var w=new k(i,s);return r=o({},a.defaults.actions,r),v.prototype.toJSON=function(){var a=o({},this);return delete a.$promise,delete a.$resolved,a},n(r,function(a,e){var i=/^(POST|PUT|PATCH)$/i.test(a.method);v[e]=function(j,k,l,r){var s,x,y,z={};switch(arguments.length){case 4:y=r,x=l;case 3:case 2:if(!q(k)){z=j,s=k,x=l;break}if(q(j)){x=j,y=k;break}x=k,y=l;case 1:q(j)?x=j:i?s=j:z=j;break;case 0:break;default:throw g("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var A=this instanceof v,B=A?s:a.isArray?[]:new v(s),C={},D=a.interceptor&&a.interceptor.response||u,E=a.interceptor&&a.interceptor.responseError||c;n(a,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(C[b]=p(a))}),i&&(C.data=s),w.setUrlParams(C,o({},t(s,a.params||{}),z),a.url);var F=d(C).then(function(c){var d=c.data,h=B.$promise;if(d){if(b.isArray(d)!==!!a.isArray)throw g("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2}",e,a.isArray?"array":"object",b.isArray(d)?"array":"object");a.isArray?(B.length=0,n(d,function(a){"object"==typeof a?B.push(new v(a)):B.push(a)})):(f(d,B),B.$promise=h)}return B.$resolved=!0,c.resource=B,c},function(a){return B.$resolved=!0,(y||m)(a),h.reject(a)});return F=F.then(function(a){var b=D(a);return(x||m)(b,a.headers),b},E),A?F:(B.$promise=F,B.$resolved=!1,B)},v.prototype["$"+e]=function(a,b,c){q(a)&&(c=b,b=a,a={});var d=v[e].call(this,a,this,b,c);return d.$promise||d}}),v.bind=function(a){return l(i,o({},j,a),r)},v}var m=b.noop,n=b.forEach,o=b.extend,p=b.copy,q=b.isFunction;return k.prototype={setUrlParams:function(a,c,d){var e,f,h=this,j=d||h.template,k=h.urlParams={};n(j.split(/\W/),function(a){if("hasOwnProperty"===a)throw g("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(j)&&(k[a]=!0)}),j=j.replace(/\\:/g,":"),c=c||{},n(h.urlParams,function(a,d){e=c.hasOwnProperty(d)?c[d]:h.defaults[d],b.isDefined(e)&&null!==e?(f=i(e),j=j.replace(new RegExp(":"+d+"(\\W|$)","g"),function(a,b){return f+b})):j=j.replace(new RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),h.defaults.stripTrailingSlashes&&(j=j.replace(/\/+$/,"")||"/"),j=j.replace(/\/\.(?=\w+($|\?))/,"."),a.url=j.replace(/\/\\\./,"/."),n(c,function(b,c){h.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},l}]})}(window,window.angular),function(a,b,c){"use strict";function d(){function a(a,c){return b.extend(Object.create(a),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){var f=b.copy(e);if(b.isUndefined(f.reloadOnSearch)&&(f.reloadOnSearch=!0),b.isUndefined(f.caseInsensitiveMatch)&&(f.caseInsensitiveMatch=this.caseInsensitiveMatch),d[a]=b.extend(f,a&&c(a,f)),a){var g="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[g]=b.extend({redirectTo:a},c(g,f))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(a){return"string"==typeof a&&(a={redirectTo:a}),this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(c,e,f,g,h,j,k){function l(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;f<g;++f){var h=c[f-1],i=e[f];h&&i&&(d[h.name]=i)}return d}function m(a){var d=t.current;q=o(),r=q&&d&&q.$$route===d.$$route&&b.equals(q.pathParams,d.pathParams)&&!q.reloadOnSearch&&!s,r||!d&&!q||c.$broadcast("$routeChangeStart",q,d).defaultPrevented&&a&&a.preventDefault()}function n(){var a=t.current,d=q;r?(a.params=d.params,b.copy(a.params,f),c.$broadcast("$routeUpdate",a)):(d||a)&&(s=!1,t.current=d,d&&d.redirectTo&&(b.isString(d.redirectTo)?e.path(p(d.redirectTo,d.params)).search(d.params).replace():e.url(d.redirectTo(d.pathParams,e.path(),e.search())).replace()),g.when(d).then(function(){if(d){var a,c,e=b.extend({},d.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?h.get(a):h.invoke(a,null,null,c)}),b.isDefined(a=d.template)?b.isFunction(a)&&(a=a(d.params)):b.isDefined(c=d.templateUrl)&&(b.isFunction(c)&&(c=c(d.params)),b.isDefined(c)&&(d.loadedTemplateUrl=k.valueOf(c),a=j(c))),b.isDefined(a)&&(e.$template=a),g.all(e)}}).then(function(e){d==t.current&&(d&&(d.locals=e,b.copy(d.params,f)),c.$broadcast("$routeChangeSuccess",d,a))},function(b){d==t.current&&c.$broadcast("$routeChangeError",d,a,b)}))}function o(){var c,f;return b.forEach(d,function(d,g){!f&&(c=l(e.path(),d))&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function p(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var q,r,s=!1,t={routes:d,reload:function(){s=!0,c.$evalAsync(function(){m(),n()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw i("norout","Tried updating route when with no current route");a=b.extend({},this.current.params,a),e.path(p(this.current.$$route.originalPath,a)),e.search(a)}};return c.$on("$locationChangeStart",m),c.$on("$locationChangeSuccess",n),t}]}function e(){this.$get=function(){return{}}}function f(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(d.cancel(n),n=null),l&&(l.$destroy(),l=null),m&&(n=d.leave(m),n.then(function(){n=null}),m=null)}function k(){var g=a.current&&a.current.locals,h=g&&g.$template;if(b.isDefined(h)){var k=e.$new(),n=a.current,q=i(k,function(a){d.enter(a,null,m||f).then(function(){!b.isDefined(o)||o&&!e.$eval(o)||c()}),j()});m=q,l=n.scope=k,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function g(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());if(f.controller){g.$scope=d;var i=b(f.controller,g);f.controllerAs&&(d[f.controllerAs]=i),e.data("$ngControllerController",i),e.children().data("$ngControllerController",i)}h(d)}}}var h=b.module("ngRoute",["ng"]).provider("$route",d),i=b.$$minErr("ngRoute");h.provider("$routeParams",e),h.directive("ngView",f),h.directive("ngView",g),f.$inject=["$route","$anchorScroll","$animate"],g.$inject=["$compile","$controller","$route"]}(window,window.angular),function(a,b,c){"use strict";function d(a){return D(a)?a:Object.keys(a).map(function(b){return a[b]})}function e(a){return null===a}function f(a,b){var d=Object.keys(a);return d.map(function(d){return b[d]!==c&&b[d]==a[d]}).indexOf(!1)==-1}function g(a,b){if(""===b)return a;var c=a.indexOf(b.charAt(0));return c!==-1&&g(a.substr(c+1),b.substr(1))}function h(a,b,c){var d=0;return a.filter(function(a){var e=x(c)?d<b&&c(a):d<b;return d=e?d+1:d,e})}function i(a,b,c){return c.round(a*c.pow(10,b))/c.pow(10,b)}function j(a,b,c){b=b||[];var d=Object.keys(a);return d.forEach(function(d){if(C(a[d])&&!D(a[d])){var e=c?c+"."+d:c;j(a[d],b,e||d)}else{var f=c?c+"."+d:d;b.push(f)}}),b}function k(a){return a&&a.$evalAsync&&a.$watch}function l(){return function(a,b){return a>b}}function m(){return function(a,b){return a>=b}}function n(){return function(a,b){return a<b}}function o(){return function(a,b){return a<=b}}function p(){return function(a,b){return a==b}}function q(){return function(a,b){return a!=b}}function r(){return function(a,b){return a===b}}function s(){return function(a,b){return a!==b}}function t(a){return function(b,c){return b=C(b)?d(b):b,!(!D(b)||y(c))&&b.some(function(b){return A(c)&&C(b)||z(c)?a(c)(b):b===c})}}function u(a,b){return b=b||0,b>=a.length?a:D(a[b])?u(a.slice(0,b).concat(a[b],a.slice(b+1)),b):u(a,b+1)}function v(a){return function(b,c){function e(a,b){return!y(b)&&a.some(function(a){return H(a,b)})}if(b=C(b)?d(b):b,!D(b))return b;var f=[],g=a(c);return y(c)?b.filter(function(a,b,c){return c.indexOf(a)===b}):b.filter(function(a){var b=g(a);return!e(f,b)&&(f.push(b),!0)})}}function w(a,b,c){return b?a+c+w(a,--b,c):a}var x=b.isDefined,y=b.isUndefined,z=b.isFunction,A=b.isString,B=b.isNumber,C=b.isObject,D=b.isArray,E=b.forEach,F=b.extend,G=b.copy,H=b.equals;String.prototype.contains||(String.prototype.contains=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}),b.module("a8m.angular",[]).filter("isUndefined",function(){return function(a){return b.isUndefined(a)}}).filter("isDefined",function(){return function(a){return b.isDefined(a)}}).filter("isFunction",function(){return function(a){return b.isFunction(a)}}).filter("isString",function(){return function(a){return b.isString(a)}}).filter("isNumber",function(){return function(a){return b.isNumber(a)}}).filter("isArray",function(){return function(a){return b.isArray(a)}}).filter("isObject",function(){return function(a){return b.isObject(a)}}).filter("isEqual",function(){return function(a,c){return b.equals(a,c)}}),b.module("a8m.conditions",[]).filter({isGreaterThan:l,">":l,isGreaterThanOrEqualTo:m,">=":m,isLessThan:n,"<":n,isLessThanOrEqualTo:o,"<=":o,isEqualTo:p,"==":p,isNotEqualTo:q,"!=":q,isIdenticalTo:r,"===":r,isNotIdenticalTo:s,"!==":s}),b.module("a8m.is-null",[]).filter("isNull",function(){return function(a){return e(a)}}),b.module("a8m.after-where",[]).filter("afterWhere",function(){return function(a,b){if(a=C(a)?d(a):a,!D(a)||y(b))return a;var c=a.map(function(a){return f(b,a)}).indexOf(!0);return a.slice(c===-1?0:c)}}),b.module("a8m.after",[]).filter("after",function(){return function(a,b){return a=C(a)?d(a):a,D(a)?a.slice(b):a}}),b.module("a8m.before-where",[]).filter("beforeWhere",function(){return function(a,b){if(a=C(a)?d(a):a,!D(a)||y(b))return a;var c=a.map(function(a){return f(b,a)}).indexOf(!0);return a.slice(0,c===-1?a.length:++c)}}),b.module("a8m.before",[]).filter("before",function(){return function(a,b){return a=C(a)?d(a):a,D(a)?a.slice(0,b?--b:b):a}}),b.module("a8m.chunk-by",["a8m.filter-watcher"]).filter("chunkBy",["filterWatcher",function(a){return function(b,c,d){function e(a,b){for(var c=[];a--;)c[a]=b;return c}function f(a,b,c){return D(a)?a.map(function(a,d,f){return d*=b,a=f.slice(d,d+b),!y(c)&&a.length<b?a.concat(e(b-a.length,c)):a}).slice(0,Math.ceil(a.length/b)):a}return a.isMemoized("chunkBy",arguments)||a.memoize("chunkBy",arguments,this,f(b,c,d))}}]),b.module("a8m.concat",[]).filter("concat",[function(){return function(a,b){if(y(b))return a;if(D(a))return C(b)?a.concat(d(b)):a.concat(b);if(C(a)){var c=d(a);return C(b)?c.concat(d(b)):c.concat(b)}return a}}]),b.module("a8m.contains",[]).filter({contains:["$parse",t],some:["$parse",t]}),b.module("a8m.count-by",[]).filter("countBy",["$parse",function(a){return function(b,c){var e,f={},g=a(c);return b=C(b)?d(b):b,!D(b)||y(c)?b:(b.forEach(function(a){e=g(a),f[e]||(f[e]=0),f[e]++}),f)}}]),b.module("a8m.defaults",[]).filter("defaults",["$parse",function(a){return function(b,c){if(b=C(b)?d(b):b,!D(b)||!C(c))return b;var e=j(c);return b.forEach(function(b){e.forEach(function(d){var e=a(d),f=e.assign;y(e(b))&&f(b,e(c))})}),b}}]),b.module("a8m.every",[]).filter("every",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!(D(b)&&!y(c))||b.every(function(b){return C(b)||z(c)?a(c)(b):b===c})}}]),b.module("a8m.filter-by",[]).filter("filterBy",["$parse",function(a){return function(b,e,f,g){var h;return f=A(f)||B(f)?String(f).toLowerCase():c,b=C(b)?d(b):b,!D(b)||y(f)?b:b.filter(function(b){return e.some(function(c){if(~c.indexOf("+")){var d=c.replace(/\s+/g,"").split("+");h=d.map(function(c){return a(c)(b)}).join(" ")}else h=a(c)(b);return!(!A(h)&&!B(h))&&(h=String(h).toLowerCase(),g?h===f:h.contains(f))})})}}]),b.module("a8m.first",[]).filter("first",["$parse",function(a){return function(b){var e,f,g;return b=C(b)?d(b):b,D(b)?(g=Array.prototype.slice.call(arguments,1),e=B(g[0])?g[0]:1,f=B(g[0])?B(g[1])?c:g[1]:g[0],g.length?h(b,e,f?a(f):f):b[0]):b}}]),b.module("a8m.flatten",[]).filter("flatten",function(){return function(a,b){return b=b||!1,a=C(a)?d(a):a,D(a)?b?[].concat.apply([],a):u(a,0):a}}),b.module("a8m.fuzzy-by",[]).filter("fuzzyBy",["$parse",function(a){return function(b,c,e,f){var h,i,j=f||!1;return b=C(b)?d(b):b,!D(b)||y(c)||y(e)?b:(i=a(c),b.filter(function(a){return h=i(a),!!A(h)&&(h=j?h:h.toLowerCase(),e=j?e:e.toLowerCase(),g(h,e)!==!1)}))}}]),b.module("a8m.fuzzy",[]).filter("fuzzy",function(){return function(a,b,c){function e(a,b){var c,d,e=Object.keys(a);return 0<e.filter(function(e){return c=a[e],!!d||!!A(c)&&(c=f?c:c.toLowerCase(),d=g(c,b)!==!1)}).length}var f=c||!1;return a=C(a)?d(a):a,!D(a)||y(b)?a:(b=f?b:b.toLowerCase(),a.filter(function(a){return A(a)?(a=f?a:a.toLowerCase(),g(a,b)!==!1):!!C(a)&&e(a,b)}))}}),b.module("a8m.group-by",["a8m.filter-watcher"]).filter("groupBy",["$parse","filterWatcher",function(a,b){return function(c,d){function e(a,b){var c,d={};return E(a,function(a){c=b(a),d[c]||(d[c]=[]),d[c].push(a)}),d}return!C(c)||y(d)?c:b.isMemoized("groupBy",arguments)||b.memoize("groupBy",arguments,this,e(c,a(d)))}}]),b.module("a8m.is-empty",[]).filter("isEmpty",function(){return function(a){return C(a)?!d(a).length:!a.length}}),b.module("a8m.join",[]).filter("join",function(){return function(a,b){return y(a)||!D(a)?a:(y(b)&&(b=" "),a.join(b))}}),b.module("a8m.last",[]).filter("last",["$parse",function(a){return function(b){var e,f,g,i=G(b);return i=C(i)?d(i):i,D(i)?(g=Array.prototype.slice.call(arguments,1),e=B(g[0])?g[0]:1,f=B(g[0])?B(g[1])?c:g[1]:g[0],g.length?h(i.reverse(),e,f?a(f):f).reverse():i[i.length-1]):i}}]),b.module("a8m.map",[]).filter("map",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.map(function(b){return a(c)(b)})}}]),b.module("a8m.omit",[]).filter("omit",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.filter(function(b){return!a(c)(b)})}}]),b.module("a8m.pick",[]).filter("pick",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.filter(function(b){return a(c)(b)})}}]),b.module("a8m.range",[]).filter("range",function(){return function(a,b,c,d,e){c=c||0,d=d||1;for(var f=0;f<parseInt(b);f++){var g=c+f*d;a.push(z(e)?e(g):g)}return a}}),b.module("a8m.remove-with",[]).filter("removeWith",function(){return function(a,b){return y(b)?a:(a=C(a)?d(a):a,a.filter(function(a){return!f(b,a)}))}}),b.module("a8m.remove",[]).filter("remove",function(){return function(a){a=C(a)?d(a):a;var b=Array.prototype.slice.call(arguments,1);return D(a)?a.filter(function(a){return!b.some(function(b){return H(b,a)})}):a}}),b.module("a8m.reverse",[]).filter("reverse",[function(){return function(a){return a=C(a)?d(a):a,A(a)?a.split("").reverse().join(""):D(a)?a.slice().reverse():a}}]),b.module("a8m.search-field",[]).filter("searchField",["$parse",function(a){return function(b){var c,e;b=C(b)?d(b):b;var f=Array.prototype.slice.call(arguments,1);return D(b)&&f.length?b.map(function(b){return e=f.map(function(d){return(c=a(d))(b)}).join(" "),F(b,{searchField:e})}):b}}]),b.module("a8m.to-array",[]).filter("toArray",function(){return function(a,b){return C(a)?b?Object.keys(a).map(function(b){return F(a[b],{$key:b})}):d(a):a}}),b.module("a8m.unique",[]).filter({unique:["$parse",v],uniq:["$parse",v]}),b.module("a8m.where",[]).filter("where",function(){return function(a,b){return y(b)?a:(a=C(a)?d(a):a,a.filter(function(a){return f(b,a)}))}}),b.module("a8m.xor",[]).filter("xor",["$parse",function(a){return function(b,c,e){function f(b,c){var d=a(e);return c.some(function(a){return e?H(d(a),d(b)):H(a,b)})}return e=e||!1,b=C(b)?d(b):b,c=C(c)?d(c):c,D(b)&&D(c)?b.concat(c).filter(function(a){return!(f(a,b)&&f(a,c))}):b}}]),b.module("a8m.math.byteFmt",["a8m.math"]).filter("byteFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)?b<1024?i(b,c,a)+" B":b<1048576?i(b/1024,c,a)+" KB":b<1073741824?i(b/1048576,c,a)+" MB":i(b/1073741824,c,a)+" GB":"NaN"}}]),b.module("a8m.math.degrees",["a8m.math"]).filter("degrees",["$math",function(a){return function(b,c){if(B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)){var d=180*b/a.PI;return a.round(d*a.pow(10,c))/a.pow(10,c)}return"NaN"}}]),b.module("a8m.math.kbFmt",["a8m.math"]).filter("kbFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)?b<1024?i(b,c,a)+" KB":b<1048576?i(b/1024,c,a)+" MB":i(b/1048576,c,a)+" GB":"NaN"}}]),b.module("a8m.math",[]).factory("$math",["$window",function(a){return a.Math}]),b.module("a8m.math.max",["a8m.math"]).filter("max",["$math","$parse",function(a,b){function c(c,d){var e=c.map(function(a){return b(d)(a)});return e.indexOf(a.max.apply(a,e))}return function(b,d){return D(b)?y(d)?a.max.apply(a,b):b[c(b,d)]:b}}]),b.module("a8m.math.min",["a8m.math"]).filter("min",["$math","$parse",function(a,b){function c(c,d){var e=c.map(function(a){return b(d)(a)});return e.indexOf(a.min.apply(a,e))}return function(b,d){return D(b)?y(d)?a.min.apply(a,b):b[c(b,d)]:b}}]),b.module("a8m.math.percent",["a8m.math"]).filter("percent",["$math","$window",function(a,b){return function(c,d,e){var f=A(c)?b.Number(c):c;return d=d||100,e=e||!1,!B(f)||b.isNaN(f)?c:e?a.round(f/d*100):f/d*100}}]),b.module("a8m.math.radians",["a8m.math"]).filter("radians",["$math",function(a){return function(b,c){if(B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)){var d=3.14159265359*b/180;return a.round(d*a.pow(10,c))/a.pow(10,c)}return"NaN"}}]),b.module("a8m.math.radix",[]).filter("radix",function(){return function(a,b){var c=/^[2-9]$|^[1-2]\d$|^3[0-6]$/;return B(a)&&c.test(b)?a.toString(b).toUpperCase():a}}),b.module("a8m.math.shortFmt",["a8m.math"]).filter("shortFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)?b<1e3?b:b<1e6?i(b/1e3,c,a)+" K":b<1e9?i(b/1e6,c,a)+" M":i(b/1e9,c,a)+" B":"NaN"}}]),b.module("a8m.math.sum",[]).filter("sum",function(){return function(a,b){return D(a)?a.reduce(function(a,b){return a+b},b||0):a}}),b.module("a8m.ends-with",[]).filter("endsWith",function(){return function(a,b,c){var d,e=c||!1;return!A(a)||y(b)?a:(a=e?a:a.toLowerCase(),d=a.length-b.length,a.indexOf(e?b:b.toLowerCase(),d)!==-1)}}),b.module("a8m.latinize",[]).filter("latinize",[function(){function a(a){return a.replace(/[^\u0000-\u007E]/g,function(a){return c[a]||a})}for(var b=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"OE",letters:""},{base:"oe",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],c={},d=0;d<b.length;d++)for(var e=b[d].letters.split(""),f=0;f<e.length;f++)c[e[f]]=b[d].base;return function(b){return A(b)?a(b):b}}]),b.module("a8m.ltrim",[]).filter("ltrim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp("^"+c+"+"),""):a}}),b.module("a8m.match",[]).filter("match",function(){return function(a,b,c){var d=new RegExp(b,c);return A(a)?a.match(d):null}}),b.module("a8m.repeat",[]).filter("repeat",[function(){return function(a,b,c){var d=~~b;return A(a)&&d?w(a,--b,c||""):a}}]),b.module("a8m.rtrim",[]).filter("rtrim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp(c+"+$"),""):a}}),b.module("a8m.slugify",[]).filter("slugify",[function(){return function(a,b){var c=y(b)?"-":b;return A(a)?a.toLowerCase().replace(/\s+/g,c):a}}]),b.module("a8m.starts-with",[]).filter("startsWith",function(){return function(a,b,c){var d=c||!1;return!A(a)||y(b)?a:(a=d?a:a.toLowerCase(),!a.indexOf(d?b:b.toLowerCase()))}}),b.module("a8m.stringular",[]).filter("stringular",function(){return function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return y(b[c])?a:b[c]})}}),b.module("a8m.strip-tags",[]).filter("stripTags",function(){return function(a){return A(a)?a.replace(/<\S[^><]*>/g,""):a}}),b.module("a8m.test",[]).filter("test",function(){return function(a,b,c){var d=new RegExp(b,c);return A(a)?d.test(a):a}}),b.module("a8m.trim",[]).filter("trim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp("^"+c+"+|"+c+"+$","g"),""):a}}),b.module("a8m.truncate",[]).filter("truncate",function(){return function(a,b,c,d){return b=y(b)?a.length:b,d=d||!1,c=c||"",!A(a)||a.length<=b?a:a.substring(0,d?a.indexOf(" ",b)===-1?a.length:a.indexOf(" ",b):b)+c}}),b.module("a8m.ucfirst",[]).filter("ucfirst",[function(){return function(a){return A(a)?a.split(" ").map(function(a){return a.charAt(0).toUpperCase()+a.substring(1);
}).join(" "):a}}]),b.module("a8m.uri-component-encode",[]).filter("uriComponentEncode",["$window",function(a){return function(b){return A(b)?a.encodeURIComponent(b):b}}]),b.module("a8m.uri-encode",[]).filter("uriEncode",["$window",function(a){return function(b){return A(b)?a.encodeURI(b):b}}]),b.module("a8m.wrap",[]).filter("wrap",function(){return function(a,b,c){return A(a)&&x(b)?[b,a,c||b].join(""):a}}),b.module("a8m.filter-watcher",[]).provider("filterWatcher",function(){this.$get=["$window","$rootScope",function(a,b){function c(b,c){function d(){var b=[];return function(c,d){if(C(d)&&!e(d)){if(~b.indexOf(d))return"[Circular]";b.push(d)}return a==d?"$WINDOW":a.document==d?"$DOCUMENT":k(d)?"$SCOPE":d}}return[b,JSON.stringify(c,d())].join("#").replace(/"/g,"")}function d(a){var b=a.targetScope.$id;E(l[b],function(a){delete j[a]}),delete l[b]}function f(){m(function(){b.$$phase||(j={})},2e3)}function g(a,b){var c=a.$id;return y(l[c])&&(a.$on("$destroy",d),l[c]=[]),l[c].push(b)}function h(a,b){var d=c(a,b);return j[d]}function i(a,b,d,e){var h=c(a,b);return j[h]=e,k(d)?g(d,h):f(),e}var j={},l={},m=a.setTimeout;return{isMemoized:h,memoize:i}}]}),b.module("angular.filter",["a8m.ucfirst","a8m.uri-encode","a8m.uri-component-encode","a8m.slugify","a8m.latinize","a8m.strip-tags","a8m.stringular","a8m.truncate","a8m.starts-with","a8m.ends-with","a8m.wrap","a8m.trim","a8m.ltrim","a8m.rtrim","a8m.repeat","a8m.test","a8m.match","a8m.to-array","a8m.concat","a8m.contains","a8m.unique","a8m.is-empty","a8m.after","a8m.after-where","a8m.before","a8m.before-where","a8m.defaults","a8m.where","a8m.reverse","a8m.remove","a8m.remove-with","a8m.group-by","a8m.count-by","a8m.chunk-by","a8m.search-field","a8m.fuzzy-by","a8m.fuzzy","a8m.omit","a8m.pick","a8m.every","a8m.filter-by","a8m.xor","a8m.map","a8m.first","a8m.last","a8m.flatten","a8m.join","a8m.range","a8m.math","a8m.math.max","a8m.math.min","a8m.math.percent","a8m.math.radix","a8m.math.sum","a8m.math.degrees","a8m.math.radians","a8m.math.byteFmt","a8m.math.kbFmt","a8m.math.shortFmt","a8m.angular","a8m.conditions","a8m.is-null","a8m.filter-watcher"])}(window,window.angular),!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require("angular")):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(this,function(a){"use strict";var b,c=a.module("ngDialog",[]),d=a.element,e=a.isDefined,f=(document.body||document.documentElement).style,g=e(f.animation)||e(f.WebkitAnimation)||e(f.MozAnimation)||e(f.MsAnimation)||e(f.OAnimation),h="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",i=!1;return c.provider("ngDialog",function(){var c=this.defaults={className:"ngdialog-theme-default",plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,overlay:!0,cache:!0};this.setForceBodyReload=function(a){i=a||!1},this.setDefaults=function(b){a.extend(c,b)};var e,f=0,j=0,k={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller",function(l,m,n,o,p,q,r,s,t){var u=l.find("body");i&&q.$on("$locationChangeSuccess",function(){u=l.find("body")});var v={onDocumentKeydown:function(a){27===a.keyCode&&w.close("$escape")},setBodyPadding:function(a){var b=parseInt(u.css("padding-right")||0,10);u.css("padding-right",b+a+"px"),u.data("ng-dialog-original-padding",b)},resetBodyPadding:function(){var a=u.data("ng-dialog-original-padding");a?u.css("padding-right",a+"px"):u.css("padding-right","")},performCloseDialog:function(a,c){var d=a.attr("id");if("undefined"!=typeof s.Hammer){var f=b.hammerTime;f.off("tap",e),f.destroy&&f.destroy(),delete b.hammerTime}else a.unbind("click");1===j&&u.unbind("keydown"),a.hasClass("ngdialog-closing")||(j-=1),q.$broadcast("ngDialog.closing",a),j=0>j?0:j,g?(b.$destroy(),a.unbind(h).bind(h,function(){a.remove(),0===j&&(u.removeClass("ngdialog-open"),v.resetBodyPadding()),q.$broadcast("ngDialog.closed",a)}).addClass("ngdialog-closing")):(b.$destroy(),a.remove(),0===j&&(u.removeClass("ngdialog-open"),v.resetBodyPadding()),q.$broadcast("ngDialog.closed",a)),k[d]&&(k[d].resolve({id:d,value:c,$dialog:a,remainingDialogs:j}),delete k[d])},closeDialog:function(b,c){var d=b.data("$ngDialogPreCloseCallback");if(d&&a.isFunction(d)){var e=d.call(b,c);a.isObject(e)?e.closePromise?e.closePromise.then(function(){v.performCloseDialog(b,c)}):e.then(function(){v.performCloseDialog(b,c)},function(){}):e!==!1&&v.performCloseDialog(b,c)}else v.performCloseDialog(b,c)}},w={open:function(g){function h(a,b){return p.get(a,b||{}).then(function(a){return a.data||""})}function i(b){return b?a.isString(b)&&x.plain?b:"boolean"!=typeof x.cache||x.cache?m.get(b)||h(b,{cache:!0}):h(b,{cache:!1}):"Empty template"}var l=this,x=a.copy(c);g=g||{},a.extend(x,g),f+=1,l.latestID="ngdialog"+f;var y;k[l.latestID]=y=o.defer(),b=a.isObject(x.scope)?x.scope.$new():q.$new();var z,A;return o.when(i(x.template||x.templateUrl)).then(function(c){if(m.put(x.template||x.templateUrl,c),x.showClose&&(c+='<div class="ngdialog-close"></div>'),l.$result=z=d('<div id="ngdialog'+f+'" class="ngdialog"></div>'),z.html(x.overlay?'<div class="ngdialog-overlay"></div><div class="ngdialog-content">'+c+"</div>":'<div class="ngdialog-content">'+c+"</div>"),x.data&&a.isString(x.data)){var g=x.data.replace(/^\s*/,"")[0];b.ngDialogData="{"===g||"["===g?a.fromJson(x.data):x.data}else x.data&&a.isObject(x.data)&&(b.ngDialogData=x.data);if(x.controller&&(a.isString(x.controller)||a.isArray(x.controller)||a.isFunction(x.controller))){var h=t(x.controller,{$scope:b,$element:z});z.data("$ngDialogControllerController",h)}if(x.className&&z.addClass(x.className),A=x.appendTo&&a.isString(x.appendTo)?a.element(document.querySelector(x.appendTo)):u,x.preCloseCallback){var i;a.isFunction(x.preCloseCallback)?i=x.preCloseCallback:a.isString(x.preCloseCallback)&&b&&(a.isFunction(b[x.preCloseCallback])?i=b[x.preCloseCallback]:b.$parent&&a.isFunction(b.$parent[x.preCloseCallback])?i=b.$parent[x.preCloseCallback]:q&&a.isFunction(q[x.preCloseCallback])&&(i=q[x.preCloseCallback])),i&&z.data("$ngDialogPreCloseCallback",i)}if(b.closeThisDialog=function(a){v.closeDialog(z,a)},r(function(){n(z)(b);var a=s.innerWidth-u.prop("clientWidth");u.addClass("ngdialog-open");var c=a-(s.innerWidth-u.prop("clientWidth"));c>0&&v.setBodyPadding(c),A.append(z),x.name?q.$broadcast("ngDialog.opened",{dialog:z,name:x.name}):q.$broadcast("ngDialog.opened",z)}),x.closeByEscape&&u.bind("keydown",v.onDocumentKeydown),x.closeByNavigation&&q.$on("$locationChangeSuccess",function(){v.closeDialog(z)}),e=function(a){var b=!!x.closeByDocument&&d(a.target).hasClass("ngdialog-overlay"),c=d(a.target).hasClass("ngdialog-close");(b||c)&&w.close(z.attr("id"),c?"$closeButton":"$document")},"undefined"!=typeof s.Hammer){var k=b.hammerTime=s.Hammer(z[0]);k.on("tap",e)}else z.bind("click",e);return j+=1,w}),{id:"ngdialog"+f,closePromise:y.promise,close:function(a){v.closeDialog(z,a)}}},openConfirm:function(b){var c=o.defer(),e={closeByEscape:!1,closeByDocument:!1};a.extend(e,b),e.scope=a.isObject(e.scope)?e.scope.$new():q.$new(),e.scope.confirm=function(a){c.resolve(a);var b=d(document.getElementById(f.id));v.performCloseDialog(b,a)};var f=w.open(e);return f.closePromise.then(function(a){return a?c.reject(a.value):c.reject()}),c.promise},close:function(a,b){var c=d(document.getElementById(a));return c.length?v.closeDialog(c,b):w.closeAll(b),w},closeAll:function(b){var c=document.querySelectorAll(".ngdialog");a.forEach(c,function(a){v.closeDialog(d(a),b)})},getDefaults:function(){return c}};return w}]}),c.directive("ngDialog",["ngDialog",function(b){return{restrict:"A",scope:{ngDialogScope:"="},link:function(c,d,e){d.on("click",function(d){d.preventDefault();var f=a.isDefined(c.ngDialogScope)?c.ngDialogScope:"noScope";a.isDefined(e.ngDialogClosePrevious)&&b.close(e.ngDialogClosePrevious);var g=b.getDefaults();b.open({template:e.ngDialog,className:e.ngDialogClass||g.className,controller:e.ngDialogController,scope:f,data:e.ngDialogData,showClose:"false"!==e.ngDialogShowClose&&("true"===e.ngDialogShowClose||g.showClose),closeByDocument:"false"!==e.ngDialogCloseByDocument&&("true"===e.ngDialogCloseByDocument||g.closeByDocument),closeByEscape:"false"!==e.ngDialogCloseByEscape&&("true"===e.ngDialogCloseByEscape||g.closeByEscape),preCloseCallback:e.ngDialogPreCloseCallback||g.preCloseCallback})})}}}]),c}),angular.module("iso-3166-country-codes",[]).factory("ISO3166",function(){var a={};a.codeToCountry={AF:"AFGHANISTAN",AX:"LAND ISLANDS",AL:"ALBANIA",DZ:"ALGERIA",AS:"AMERICAN SAMOA",AD:"ANDORRA",AO:"ANGOLA",AI:"ANGUILLA",AQ:"ANTARCTICA",AG:"ANTIGUA AND BARBUDA",AR:"ARGENTINA",AM:"ARMENIA",AW:"ARUBA",AU:"AUSTRALIA",AT:"AUSTRIA",AZ:"AZERBAIJAN",BS:"BAHAMAS",BH:"BAHRAIN",BD:"BANGLADESH",BB:"BARBADOS",BY:"BELARUS",BE:"BELGIUM",BZ:"BELIZE",BJ:"BENIN",BM:"BERMUDA",BT:"BHUTAN",BO:"BOLIVIA, PLURINATIONAL STATE OF",BQ:"BONAIRE, SINT EUSTATIUS AND SABA",BA:"BOSNIA AND HERZEGOVINA",BW:"BOTSWANA",BV:"BOUVET ISLAND",BR:"BRAZIL",IO:"BRITISH INDIAN OCEAN TERRITORY",BN:"BRUNEI DARUSSALAM",BG:"BULGARIA",BF:"BURKINA FASO",BI:"BURUNDI",KH:"CAMBODIA",CM:"CAMEROON",CA:"CANADA",CV:"CAPE VERDE",KY:"CAYMAN ISLANDS",CF:"CENTRAL AFRICAN REPUBLIC",TD:"CHAD",CL:"CHILE",CN:"CHINA",CX:"CHRISTMAS ISLAND",CC:"COCOS (KEELING) ISLANDS",CO:"COLOMBIA",KM:"COMOROS",CG:"CONGO",CD:"CONGO, THE DEMOCRATIC REPUBLIC OF THE",CK:"COOK ISLANDS",CR:"COSTA RICA",CI:"CTE D'IVOIRE",HR:"CROATIA",CU:"CUBA",CW:"CURAAO",CY:"CYPRUS",CZ:"CZECH REPUBLIC",DK:"DENMARK",DJ:"DJIBOUTI",DM:"DOMINICA",DO:"DOMINICAN REPUBLIC",EC:"ECUADOR",EG:"EGYPT",SV:"EL SALVADOR",GQ:"EQUATORIAL GUINEA",ER:"ERITREA",EE:"ESTONIA",ET:"ETHIOPIA",FK:"FALKLAND ISLANDS (MALVINAS)",FO:"FAROE ISLANDS",FJ:"FIJI",FI:"FINLAND",FR:"FRANCE",GF:"FRENCH GUIANA",PF:"FRENCH POLYNESIA",TF:"FRENCH SOUTHERN TERRITORIES",GA:"GABON",GM:"GAMBIA",GE:"GEORGIA",DE:"GERMANY",GH:"GHANA",GI:"GIBRALTAR",GR:"GREECE",GL:"GREENLAND",GD:"GRENADA",GP:"GUADELOUPE",GU:"GUAM",GT:"GUATEMALA",GG:"GUERNSEY",GN:"GUINEA",GW:"GUINEA-BISSAU",GY:"GUYANA",HT:"HAITI",HM:"HEARD ISLAND AND MCDONALD ISLANDS",VA:"HOLY SEE (VATICAN CITY STATE)",HN:"HONDURAS",HK:"HONG KONG",HU:"HUNGARY",IS:"ICELAND",IN:"INDIA",ID:"INDONESIA",IR:"IRAN, ISLAMIC REPUBLIC OF",IQ:"IRAQ",IE:"IRELAND",IM:"ISLE OF MAN",IL:"ISRAEL",IT:"ITALY",JM:"JAMAICA",JP:"JAPAN",JE:"JERSEY",JO:"JORDAN",KZ:"KAZAKHSTAN",KE:"KENYA",KI:"KIRIBATI",KP:"KOREA, DEMOCRATIC PEOPLE'S REPUBLIC OF",KR:"KOREA, REPUBLIC OF",KW:"KUWAIT",KG:"KYRGYZSTAN",LA:"LAO PEOPLE'S DEMOCRATIC REPUBLIC",LV:"LATVIA",LB:"LEBANON",LS:"LESOTHO",LR:"LIBERIA",LY:"LIBYA",LI:"LIECHTENSTEIN",LT:"LITHUANIA",LU:"LUXEMBOURG",MO:"MACAO",MK:"MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF",MG:"MADAGASCAR",MW:"MALAWI",MY:"MALAYSIA",MV:"MALDIVES",ML:"MALI",MT:"MALTA",MH:"MARSHALL ISLANDS",MQ:"MARTINIQUE",MR:"MAURITANIA",MU:"MAURITIUS",YT:"MAYOTTE",MX:"MEXICO",FM:"MICRONESIA, FEDERATED STATES OF",MD:"MOLDOVA, REPUBLIC OF",MC:"MONACO",MN:"MONGOLIA",ME:"MONTENEGRO",MS:"MONTSERRAT",MA:"MOROCCO",MZ:"MOZAMBIQUE",MM:"MYANMAR",NA:"NAMIBIA",NR:"NAURU",NP:"NEPAL",NL:"NETHERLANDS",NC:"NEW CALEDONIA",NZ:"NEW ZEALAND",NI:"NICARAGUA",NE:"NIGER",NG:"NIGERIA",NU:"NIUE",NF:"NORFOLK ISLAND",MP:"NORTHERN MARIANA ISLANDS",NO:"NORWAY",OM:"OMAN",PK:"PAKISTAN",PW:"PALAU",PS:"PALESTINE, STATE OF",PA:"PANAMA",PG:"PAPUA NEW GUINEA",PY:"PARAGUAY",PE:"PERU",PH:"PHILIPPINES",PN:"PITCAIRN",PL:"POLAND",PT:"PORTUGAL",PR:"PUERTO RICO",QA:"QATAR",RE:"RUNION",RO:"ROMANIA",RU:"RUSSIAN FEDERATION",RW:"RWANDA",BL:"SAINT BARTHLEMY",SH:"SAINT HELENA, ASCENSION AND TRISTAN DA CUNHA",KN:"SAINT KITTS AND NEVIS",LC:"SAINT LUCIA",MF:"SAINT MARTIN (FRENCH PART)",PM:"SAINT PIERRE AND MIQUELON",VC:"SAINT VINCENT AND THE GRENADINES",WS:"SAMOA",SM:"SAN MARINO",ST:"SAO TOME AND PRINCIPE",SA:"SAUDI ARABIA",SN:"SENEGAL",RS:"SERBIA",SC:"SEYCHELLES",SL:"SIERRA LEONE",SG:"SINGAPORE",SX:"SINT MAARTEN (DUTCH PART)",SK:"SLOVAKIA",SI:"SLOVENIA",SB:"SOLOMON ISLANDS",SO:"SOMALIA",ZA:"SOUTH AFRICA",GS:"SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS",SS:"SOUTH SUDAN",ES:"SPAIN",LK:"SRI LANKA",SD:"SUDAN",SR:"SURINAME",SJ:"SVALBARD AND JAN MAYEN",SZ:"SWAZILAND",SE:"SWEDEN",CH:"SWITZERLAND",SY:"SYRIAN ARAB REPUBLIC",TW:"TAIWAN, PROVINCE OF CHINA",TJ:"TAJIKISTAN",TZ:"TANZANIA, UNITED REPUBLIC OF",TH:"THAILAND",TL:"TIMOR-LESTE",TG:"TOGO",TK:"TOKELAU",TO:"TONGA",TT:"TRINIDAD AND TOBAGO",TN:"TUNISIA",TR:"TURKEY",TM:"TURKMENISTAN",TC:"TURKS AND CAICOS ISLANDS",TV:"TUVALU",UG:"UGANDA",UA:"UKRAINE",AE:"UNITED ARAB EMIRATES",GB:"UNITED KINGDOM",US:"UNITED STATES",UM:"UNITED STATES MINOR OUTLYING ISLANDS",UY:"URUGUAY",UZ:"UZBEKISTAN",VU:"VANUATU",VE:"VENEZUELA, BOLIVARIAN REPUBLIC OF",VN:"VIET NAM",VG:"VIRGIN ISLANDS, BRITISH",VI:"VIRGIN ISLANDS, U.S.",WF:"WALLIS AND FUTUNA",EH:"WESTERN SAHARA",YE:"YEMEN",ZM:"ZAMBIA",ZW:"ZIMBABWE"},a.countryToCode={};for(var b in a.codeToCountry)a.countryToCode[a.codeToCountry[b]]=b;return a.isCountryCode=function(a){return angular.isString(a)&&(a=a.toUpperCase()),angular.isDefined(this.codeToCountry[a])},a.getCountryCode=function(a,b){var c=this.countryToCode[a.toUpperCase()];return b=b?b:"toUpperCase",c&&c[b]()},a.getCountryName=function(a,b){return b=b?b:"toUpperCase",this.codeToCountry[a]&&this.codeToCountry[a][b]()},a.getCountryNames=function(b,c){c=c?c:"toUpperCase";var d={};return angular.forEach(b,function(b){a.isCountryCode(b)&&(d[b]=a.getCountryName(b,c))}),d},a}).filter("isoCountry",["ISO3166",function(a){return function(b){var c=a.getCountryName(b);return angular.isUndefined(c)?b:c}}]).filter("isoCountryCode",["ISO3166",function(a){return function(b){var c=a.getCountryCode(b);return angular.isUndefined(c)?b:c}}]).directive("countryCode",["ISO3166",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(b){return a.isCountryCode(b)?(e.$setValidity("countrycode",!0),b):void e.$setValidity("countrycode",!1)})}}}]),function(angular){"use strict";angular.module("leaflet-directive",[]).directive("leaflet",["$q","leafletData","leafletMapDefaults","leafletHelpers","leafletMapEvents",function(a,b,c,d,e){return{restrict:"EA",replace:!0,scope:{center:"=",lfCenter:"=",defaults:"=",maxbounds:"=",bounds:"=",markers:"=",legend:"=",geojson:"=",paths:"=",tiles:"=",layers:"=",controls:"=",decorations:"=",eventBroadcast:"=",markersWatchOptions:"=",geojsonWatchOptions:"="},transclude:!0,template:'<div class="angular-leaflet-map"><div ng-transclude></div></div>',controller:["$scope",function(b){this._leafletMap=a.defer(),this.getMap=function(){return this._leafletMap.promise},this.getLeafletScope=function(){return b}}],link:function(a,f,g,h){function i(){isNaN(g.width)?f.css("width",g.width):f.css("width",g.width+"px")}function j(){isNaN(g.height)?f.css("height",g.height):f.css("height",g.height+"px")}var k=d.isDefined,l=c.setDefaults(a.defaults,g.id),m=e.getAvailableMapEvents(),n=e.addEvents;a.mapId=g.id,b.setDirectiveControls({},g.id),k(g.width)&&(i(),a.$watch(function(){return f[0].getAttribute("width")},function(){i(),o.invalidateSize()})),k(g.height)&&(j(),a.$watch(function(){return f[0].getAttribute("height")},function(){j(),o.invalidateSize()}));var o=new L.Map(f[0],c.getMapCreationDefaults(g.id));if(h._leafletMap.resolve(o),k(g.center)||k(g.lfCenter)||o.setView([l.center.lat,l.center.lng],l.center.zoom),!k(g.tiles)&&!k(g.layers)){var p=L.tileLayer(l.tileLayer,l.tileLayerOptions);p.addTo(o),b.setTiles(p,g.id)}if(k(o.zoomControl)&&k(l.zoomControlPosition)&&o.zoomControl.setPosition(l.zoomControlPosition),k(o.zoomControl)&&l.zoomControl===!1&&o.zoomControl.removeFrom(o),k(o.zoomsliderControl)&&k(l.zoomsliderControl)&&l.zoomsliderControl===!1&&o.zoomsliderControl.removeFrom(o),!k(g.eventBroadcast)){var q="broadcast";n(o,m,"eventName",a,q)}o.whenReady(function(){b.setMap(o,g.id)}),a.$on("$destroy",function(){c.reset(),o.remove(),b.unresolveMap(g.id)}),a.$on("invalidateSize",function(){o.invalidateSize()})}}}]),angular.module("leaflet-directive").factory("leafletBoundsHelpers",["$log","leafletHelpers",function(a,b){function c(a){return angular.isDefined(a)&&angular.isDefined(a.southWest)&&angular.isDefined(a.northEast)&&angular.isNumber(a.southWest.lat)&&angular.isNumber(a.southWest.lng)&&angular.isNumber(a.northEast.lat)&&angular.isNumber(a.northEast.lng)}var d=b.isArray,e=b.isNumber,f=b.isFunction,g=b.isDefined;return{createLeafletBounds:function(a){if(c(a))return L.latLngBounds([a.southWest.lat,a.southWest.lng],[a.northEast.lat,a.northEast.lng])},isValidBounds:c,createBoundsFromArray:function(b){return d(b)&&2===b.length&&d(b[0])&&d(b[1])&&2===b[0].length&&2===b[1].length&&e(b[0][0])&&e(b[0][1])&&e(b[1][0])&&e(b[1][1])?{northEast:{lat:b[0][0],lng:b[0][1]},southWest:{lat:b[1][0],lng:b[1][1]}}:void a.error("[AngularJS - Leaflet] The bounds array is not valid.")},createBoundsFromLeaflet:function(b){if(!(g(b)&&f(b.getNorthEast)&&f(b.getSouthWest)))return void a.error("[AngularJS - Leaflet] The leaflet bounds is not valid object.");var c=b.getNorthEast(),d=b.getSouthWest();return{northEast:{lat:c.lat,lng:c.lng},southWest:{lat:d.lat,lng:d.lng}}}}}]),angular.module("leaflet-directive").factory("leafletControlHelpers",["$rootScope","$log","leafletHelpers","leafletLayerHelpers","leafletMapDefaults",function(a,b,c,d,e){var f=c.isDefined,g=c.isObject,h=d.createLayer,i={},j=c.errorHeader+" [Controls] ",k=function(a,b,c){var d=e.getDefaults(c);if(!d.controls.layers.visible)return!1;var h=!1;return g(a)&&Object.keys(a).forEach(function(b){var c=a[b];f(c.layerOptions)&&c.layerOptions.showOnSelector===!1||(h=!0)}),g(b)&&Object.keys(b).forEach(function(a){var c=b[a];f(c.layerParams)&&c.layerParams.showOnSelector===!1||(h=!0)}),h},l=function(a){var b=e.getDefaults(a),c={collapsed:b.controls.layers.collapsed,position:b.controls.layers.position,autoZIndex:!1};angular.extend(c,b.controls.layers.options);var d;return d=b.controls.layers&&f(b.controls.layers.control)?b.controls.layers.control.apply(this,[[],[],c]):new L.control.layers([],[],c)},m={draw:{isPluginLoaded:function(){return!!angular.isDefined(L.Control.Draw)||(b.error(j+" Draw plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(a){return new L.Control.Draw(a)}},scale:{isPluginLoaded:function(){return!0},checkValidParams:function(){return!0},createControl:function(a){return new L.control.scale(a)}},fullscreen:{isPluginLoaded:function(){return!!angular.isDefined(L.Control.Fullscreen)||(b.error(j+" Fullscreen plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(a){return new L.Control.Fullscreen(a)}},search:{isPluginLoaded:function(){return!!angular.isDefined(L.Control.Search)||(b.error(j+" Search plugin is not loaded."),!1)},checkValidParams:function(){return!0},createControl:function(a){return new L.Control.Search(a)}},custom:{},minimap:{isPluginLoaded:function(){return!!angular.isDefined(L.Control.MiniMap)||(b.error(j+" Minimap plugin is not loaded."),!1)},checkValidParams:function(a){return!!f(a.layer)||(b.warn(j+' minimap "layer" option should be defined.'),!1)},createControl:function(a){var c=h(a.layer);return f(c)?new L.Control.MiniMap(c,a):void b.warn(j+' minimap control "layer" could not be created.')}}};return{layersControlMustBeVisible:k,isValidControlType:function(a){return Object.keys(m).indexOf(a)!==-1},createControl:function(a,b){if(m[a].checkValidParams(b))return m[a].createControl(b)},updateLayersControl:function(a,b,c,d,e,g){var h,j=i[b],m=k(d,e,b);if(f(j)&&c){for(h in g.baselayers)j.removeLayer(g.baselayers[h]);for(h in g.overlays)j.removeLayer(g.overlays[h]);a.removeControl(j),delete i[b]}if(m){j=l(b),i[b]=j;for(h in d){var n=f(d[h].layerOptions)&&d[h].layerOptions.showOnSelector===!1;!n&&f(g.baselayers[h])&&j.addBaseLayer(g.baselayers[h],d[h].name)}for(h in e){var o=f(e[h].layerParams)&&e[h].layerParams.showOnSelector===!1;!o&&f(g.overlays[h])&&j.addOverlay(g.overlays[h],e[h].name)}a.addControl(j)}return m}}}]),angular.module("leaflet-directive").service("leafletData",["$log","$q","leafletHelpers",function(a,b,c){var d=c.getDefer,e=c.getUnresolvedDefer,f=c.setResolvedDefer,g={},h=this,i=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},j=["map","tiles","layers","paths","markers","geoJSON","UTFGrid","decorations","directiveControls"];j.forEach(function(a){g[a]={}}),this.unresolveMap=function(a){var b=c.obtainEffectiveMapId(g.map,a);j.forEach(function(a){g[a][b]=void 0})},j.forEach(function(a){var b=i(a);h["set"+b]=function(b,c){var d=e(g[a],c);d.resolve(b),f(g[a],c)},h["get"+b]=function(b){var c=d(g[a],b);return c.promise}})}]),angular.module("leaflet-directive").service("leafletDirectiveControlsHelpers",["$log","leafletData","leafletHelpers",function(a,b,c){var d=c.isDefined,e=c.isString,f=c.isObject,g=c.errorHeader,h=g+"[leafletDirectiveControlsHelpers",i=function(c,g,i,j){var k=h+".extend] ",l={};if(!d(g))return void a.error(k+"thingToAddName cannot be undefined");if(e(g)&&d(i)&&d(j))l[g]={create:i,clean:j};else{if(!f(g)||d(i)||d(j))return void a.error(k+"incorrect arguments");l=g}b.getDirectiveControls().then(function(a){angular.extend(a,l),b.setDirectiveControls(a,c)})};return{extend:i}}]),angular.module("leaflet-directive").service("leafletGeoJsonHelpers",["leafletHelpers","leafletIterators",function(a,b){var c=a,d=b,e=function(a,b){return this.lat=a,this.lng=b,this},f=function(a){return Array.isArray(a)&&2===a.length?a[1]:c.isDefined(a.type)&&"Point"===a.type?+a.coordinates[1]:+a.lat},g=function(a){return Array.isArray(a)&&2===a.length?a[0]:c.isDefined(a.type)&&"Point"===a.type?+a.coordinates[0]:+a.lng},h=function(a){if(c.isUndefined(a))return!1;if(c.isArray(a)){if(2===a.length&&c.isNumber(a[0])&&c.isNumber(a[1]))return!0}else if(c.isDefined(a.type)&&"Point"===a.type&&c.isArray(a.coordinates)&&2===a.coordinates.length&&c.isNumber(a.coordinates[0])&&c.isNumber(a.coordinates[1]))return!0;var b=d.all(["lat","lng"],function(b){return c.isDefined(a[b])&&c.isNumber(a[b])});return b},i=function(a){if(a&&h(a)){var b=null;if(Array.isArray(a)&&2===a.length)b=new e(a[1],a[0]);else{if(!c.isDefined(a.type)||"Point"!==a.type)return a;b=new e(a.coordinates[1],a.coordinates[0])}return angular.extend(a,b)}};return{getLat:f,getLng:g,validateCoords:h,getCoords:i}}]),angular.module("leaflet-directive").service("leafletHelpers",["$q","$log",function(a,b){function c(a,c){var d,f;if(angular.isDefined(c))d=c;else if(0===Object.keys(a).length)d="main";else if(Object.keys(a).length>=1)for(f in a)a.hasOwnProperty(f)&&(d=f);else b.error(e+"- You have more than 1 map on the DOM, you must provide the map ID to the leafletData.getXXX call");return d}function d(b,d){var e,f=c(b,d);return angular.isDefined(b[f])&&b[f].resolvedDefer!==!0?e=b[f].defer:(e=a.defer(),b[f]={defer:e,resolvedDefer:!1}),e}var e="[AngularJS - Leaflet] ",f=angular.copy,g=f,h=function(a,b){var c;if(a&&angular.isObject(a))return null!==b&&angular.isString(b)?(c=a,b.split(".").forEach(function(a){c&&(c=c[a])}),c):b},i=function(a){return a.split(".").reduce(function(a,b){return a+'["'+b+'"]'})},j=function(a){return a.reduce(function(a,b){return a+"."+b})},k=function(a){return angular.isDefined(a)&&null!==a},l=function(a){return!k(a)},m=/([\:\-\_]+(.))/g,n=/^moz([A-Z])/,o=/^((?:x|data)[\:\-_])/i,p=function(a){return a.replace(m,function(a,b,c,d){return d?c.toUpperCase():c}).replace(n,"Moz$1")},q=function(a){return p(a.replace(o,""))};return{camelCase:p,directiveNormalize:q,copy:f,clone:g,errorHeader:e,getObjectValue:h,getObjectArrayPath:i,getObjectDotPath:j,defaultTo:function(a,b){return k(a)?a:b},isTruthy:function(a){return"true"===a||a===!0},isEmpty:function(a){return 0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return angular.isUndefined(a)||null===a||0===Object.keys(a).length},isDefined:k,isUndefined:l,isNumber:angular.isNumber,isString:angular.isString,isArray:angular.isArray,isObject:angular.isObject,isFunction:angular.isFunction,equals:angular.equals,isValidCenter:function(a){return angular.isDefined(a)&&angular.isNumber(a.lat)&&angular.isNumber(a.lng)&&angular.isNumber(a.zoom)},isValidPoint:function(a){return!!angular.isDefined(a)&&(angular.isArray(a)?2===a.length&&angular.isNumber(a[0])&&angular.isNumber(a[1]):angular.isNumber(a.lat)&&angular.isNumber(a.lng))},isSameCenterOnMap:function(a,b){var c=b.getCenter(),d=b.getZoom();return!(!a.lat||!a.lng||c.lat.toFixed(4)!==a.lat.toFixed(4)||c.lng.toFixed(4)!==a.lng.toFixed(4)||d!==a.zoom)},safeApply:function(a,b){var c=a.$root.$$phase;"$apply"===c||"$digest"===c?a.$eval(b):a.$evalAsync(b)},obtainEffectiveMapId:c,getDefer:function(a,b){var e,f=c(a,b);return e=angular.isDefined(a[f])&&a[f].resolvedDefer!==!1?a[f].defer:d(a,b)},getUnresolvedDefer:d,setResolvedDefer:function(a,b){var d=c(a,b);a[d].resolvedDefer=!0},rangeIsSupported:function(){var a=document.createElement("input");return a.setAttribute("type","range"),"range"===a.type},FullScreenControlPlugin:{isLoaded:function(){return angular.isDefined(L.Control.Fullscreen)}},MiniMapControlPlugin:{isLoaded:function(){return angular.isDefined(L.Control.MiniMap)}},AwesomeMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.AwesomeMarkers)&&angular.isDefined(L.AwesomeMarkers.Icon)},is:function(a){return!!this.isLoaded()&&a instanceof L.AwesomeMarkers.Icon},equal:function(a,b){return!!this.isLoaded()&&(!!this.is(a)&&angular.equals(a,b))}},VectorMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.VectorMarkers)&&angular.isDefined(L.VectorMarkers.Icon)},is:function(a){return!!this.isLoaded()&&a instanceof L.VectorMarkers.Icon},equal:function(a,b){return!!this.isLoaded()&&(!!this.is(a)&&angular.equals(a,b))}},DomMarkersPlugin:{isLoaded:function(){return!(!angular.isDefined(L.DomMarkers)||!angular.isDefined(L.DomMarkers.Icon))},is:function(a){return!!this.isLoaded()&&a instanceof L.DomMarkers.Icon},equal:function(a,b){return!!this.isLoaded()&&(!!this.is(a)&&angular.equals(a,b))}},PolylineDecoratorPlugin:{isLoaded:function(){return!!angular.isDefined(L.PolylineDecorator)},is:function(a){return!!this.isLoaded()&&a instanceof L.PolylineDecorator},equal:function(a,b){return!!this.isLoaded()&&(!!this.is(a)&&angular.equals(a,b))}},MakiMarkersPlugin:{isLoaded:function(){return!(!angular.isDefined(L.MakiMarkers)||!angular.isDefined(L.MakiMarkers.Icon))},is:function(a){return!!this.isLoaded()&&a instanceof L.MakiMarkers.Icon},equal:function(a,b){return!!this.isLoaded()&&(!!this.is(a)&&angular.equals(a,b))}},ExtraMarkersPlugin:{isLoaded:function(){return!(!angular.isDefined(L.ExtraMarkers)||!angular.isDefined(L.ExtraMarkers.Icon))},is:function(a){return!!this.isLoaded()&&a instanceof L.ExtraMarkers.Icon},equal:function(a,b){return!!this.isLoaded()&&(!!this.is(a)&&angular.equals(a,b))}},LabelPlugin:{isLoaded:function(){return angular.isDefined(L.Label)},is:function(a){return!!this.isLoaded()&&a instanceof L.MarkerClusterGroup}},MarkerClusterPlugin:{isLoaded:function(){return angular.isDefined(L.MarkerClusterGroup)},is:function(a){return!!this.isLoaded()&&a instanceof L.MarkerClusterGroup}},GoogleLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Google)},is:function(a){return!!this.isLoaded()&&a instanceof L.Google}},LeafletProviderPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.Provider)},is:function(a){return!!this.isLoaded()&&a instanceof L.TileLayer.Provider}},ChinaLayerPlugin:{isLoaded:function(){return angular.isDefined(L.tileLayer.chinaProvider)}},HeatLayerPlugin:{isLoaded:function(){return angular.isDefined(L.heatLayer)}},WebGLHeatMapLayerPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.WebGLHeatMap)}},BingLayerPlugin:{isLoaded:function(){return angular.isDefined(L.BingLayer)},is:function(a){return!!this.isLoaded()&&a instanceof L.BingLayer}},WFSLayerPlugin:{isLoaded:function(){return void 0!==L.GeoJSON.WFS},is:function(a){return!!this.isLoaded()&&a instanceof L.GeoJSON.WFS}},AGSBaseLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.basemapLayer},is:function(a){return!!this.isLoaded()&&a instanceof L.esri.basemapLayer}},AGSLayerPlugin:{isLoaded:function(){return void 0!==lvector&&void 0!==lvector.AGS},is:function(a){return!!this.isLoaded()&&a instanceof lvector.AGS}},AGSFeatureLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.featureLayer},is:function(a){return!!this.isLoaded()&&a instanceof L.esri.featureLayer}},AGSTiledMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.tiledMapLayer},is:function(a){return!!this.isLoaded()&&a instanceof L.esri.tiledMapLayer}},AGSDynamicMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.dynamicMapLayer},is:function(a){return!!this.isLoaded()&&a instanceof L.esri.dynamicMapLayer}},AGSImageMapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.imageMapLayer},is:function(a){return!!this.isLoaded()&&a instanceof L.esri.imageMapLayer}},AGSClusteredLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.clusteredFeatureLayer},is:function(a){return!!this.isLoaded()&&a instanceof L.esri.clusteredFeatureLayer}},AGSHeatmapLayerPlugin:{isLoaded:function(){return void 0!==L.esri&&void 0!==L.esri.heatmapFeatureLayer},is:function(a){return!!this.isLoaded()&&a instanceof L.esri.heatmapFeatureLayer}},YandexLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Yandex)},is:function(a){return!!this.isLoaded()&&a instanceof L.Yandex}},GeoJSONPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.GeoJSON)},is:function(a){return!!this.isLoaded()&&a instanceof L.TileLayer.GeoJSON}},UTFGridPlugin:{isLoaded:function(){return angular.isDefined(L.UtfGrid)},is:function(a){return this.isLoaded()?a instanceof L.UtfGrid:(b.error("[AngularJS - Leaflet] No UtfGrid plugin found."),!1)}},CartoDB:{isLoaded:function(){return cartodb},is:function(){return!0}},Leaflet:{DivIcon:{is:function(a){return a instanceof L.DivIcon},equal:function(a,b){return!!this.is(a)&&angular.equals(a,b)}},Icon:{is:function(a){return a instanceof L.Icon},equal:function(a,b){return!!this.is(a)&&angular.equals(a,b)}}},watchOptions:{doWatch:!0,isDeep:!0,individual:{doWatch:!0,isDeep:!0}}}}]),angular.module("leaflet-directive").service("leafletIterators",["$log","leafletHelpers",function(a,b){var c,d=b,e=b.errorHeader+"leafletIterators: ",f=Object.keys,g=d.isFunction,h=d.isObject,i=Math.pow(2,53)-1,j=function(a){var b=null!==a&&a.length;return d.isNumber(b)&&b>=0&&b<=i},k=function(a){return a},l=function(a){return function(b){return null===b?void 0:b[a]}},m=function(a,b,c){if(void 0===b)return a;switch(null===c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},n=function(a,b){return function(c){var d=arguments.length;if(d<2||null===c)return c;for(var e=1;e<d;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;i<h;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},o=null;c=o=n(f);var p,q=function(a,b){var c=f(b),d=c.length;if(null===a)return!d;for(var e=Object(a),g=0;g<d;g++){var h=c[g];if(b[h]!==e[h]||!(h in e))return!1}return!0},r=null;p=r=function(a){return a=c({},a),function(b){return q(b,a)}};var s,t=function(a,b,c){return null===a?k:g(a)?m(a,b,c):h(a)?p(a):l(a)},u=null;s=u=function(a,b,c){b=t(b,c);for(var d=!j(a)&&f(a),e=(d||a).length,g=0;g<e;g++){var h=d?d[g]:g;if(!b(a[h],h,a))return!1}return!0};var v=function(b,c,f,g){return!(f||d.isDefined(b)&&d.isDefined(c))||!d.isFunction(c)&&(g=d.defaultTo(c,"cb"),a.error(e+g+" is not a function"),!0)},w=function(a,b,c){if(!v(void 0,c,!0,"internalCb")&&!v(a,b))for(var d in a)a.hasOwnProperty(d)&&c(a[d],d)},x=function(a,b){w(a,b,function(a,c){b(a,c)})};return{each:x,forEach:x,every:s,all:u}}]),angular.module("leaflet-directive").factory("leafletLayerHelpers",["$rootScope","$log","$q","leafletHelpers","leafletIterators",function($rootScope,$log,$q,leafletHelpers,leafletIterators){
function isValidLayerType(a){return isString(a.type)?Object.keys(layerTypes).indexOf(a.type)===-1?($log.error("[AngularJS - Leaflet] A layer must have a valid type: "+Object.keys(layerTypes)),!1):layerTypes[a.type].mustHaveUrl&&!isString(a.url)?($log.error("[AngularJS - Leaflet] A base layer must have an url"),!1):layerTypes[a.type].mustHaveData&&!isDefined(a.data)?($log.error('[AngularJS - Leaflet] The base layer must have a "data" array attribute'),!1):layerTypes[a.type].mustHaveLayer&&!isDefined(a.layer)?($log.error("[AngularJS - Leaflet] The type of layer "+a.type+" must have an layer defined"),!1):layerTypes[a.type].mustHaveBounds&&!isDefined(a.bounds)?($log.error("[AngularJS - Leaflet] The type of layer "+a.type+" must have bounds defined"),!1):!(layerTypes[a.type].mustHaveKey&&!isDefined(a.key))||($log.error("[AngularJS - Leaflet] The type of layer "+a.type+" must have key defined"),!1):($log.error("[AngularJS - Leaflet] A layer must have a valid type defined."),!1)}function createLayer(a){if(isValidLayerType(a)){if(!isString(a.name))return void $log.error("[AngularJS - Leaflet] A base layer must have a name");isObject(a.layerParams)||(a.layerParams={}),isObject(a.layerOptions)||(a.layerOptions={});for(var b in a.layerParams)a.layerOptions[b]=a.layerParams[b];var c={url:a.url,data:a.data,options:a.layerOptions,layer:a.layer,icon:a.icon,type:a.layerType,bounds:a.bounds,key:a.key,apiKey:a.apiKey,pluginOptions:a.pluginOptions,user:a.user};return layerTypes[a.type].createLayer(c)}}function safeAddLayer(a,b){b&&"function"==typeof b.addTo?b.addTo(a):a.addLayer(b)}function safeRemoveLayer(a,b,c){if(isDefined(c)&&isDefined(c.loadedDefer))if(angular.isFunction(c.loadedDefer)){var d=c.loadedDefer();$log.debug("Loaded Deferred",d);var e=d.length;if(e>0)for(var f=function(){e--,0===e&&a.removeLayer(b)},g=0;g<d.length;g++)d[g].promise.then(f);else a.removeLayer(b)}else c.loadedDefer.promise.then(function(){a.removeLayer(b)});else a.removeLayer(b)}var Helpers=leafletHelpers,isString=leafletHelpers.isString,isObject=leafletHelpers.isObject,isArray=leafletHelpers.isArray,isDefined=leafletHelpers.isDefined,errorHeader=leafletHelpers.errorHeader,$it=leafletIterators,utfGridCreateLayer=function(a){if(!Helpers.UTFGridPlugin.isLoaded())return void $log.error("[AngularJS - Leaflet] The UTFGrid plugin is not loaded.");var b=new L.UtfGrid(a.url,a.pluginOptions);return b.on("mouseover",function(a){$rootScope.$broadcast("leafletDirectiveMap.utfgridMouseover",a)}),b.on("mouseout",function(a){$rootScope.$broadcast("leafletDirectiveMap.utfgridMouseout",a)}),b.on("click",function(a){$rootScope.$broadcast("leafletDirectiveMap.utfgridClick",a)}),b.on("mousemove",function(a){$rootScope.$broadcast("leafletDirectiveMap.utfgridMousemove",a)}),b},layerTypes={xyz:{mustHaveUrl:!0,createLayer:function(a){return L.tileLayer(a.url,a.options)}},mapbox:{mustHaveKey:!0,createLayer:function(a){var b=3;isDefined(a.options.version)&&4===a.options.version&&(b=a.options.version);var c=3===b?"//{s}.tiles.mapbox.com/v3/"+a.key+"/{z}/{x}/{y}.png":"//api.tiles.mapbox.com/v4/"+a.key+"/{z}/{x}/{y}.png?access_token="+a.apiKey;return L.tileLayer(c,a.options)}},geoJSON:{mustHaveUrl:!0,createLayer:function(a){if(Helpers.GeoJSONPlugin.isLoaded())return new L.TileLayer.GeoJSON(a.url,a.pluginOptions,a.options)}},geoJSONShape:{mustHaveUrl:!1,createLayer:function(a){return new L.GeoJSON(a.data,a.options)}},geoJSONAwesomeMarker:{mustHaveUrl:!1,createLayer:function(a){return new L.geoJson(a.data,{pointToLayer:function(b,c){return L.marker(c,{icon:L.AwesomeMarkers.icon(a.icon)})}})}},geoJSONVectorMarker:{mustHaveUrl:!1,createLayer:function(a){return new L.geoJson(a.data,{pointToLayer:function(b,c){return L.marker(c,{icon:L.VectorMarkers.icon(a.icon)})}})}},utfGrid:{mustHaveUrl:!0,createLayer:utfGridCreateLayer},cartodbTiles:{mustHaveKey:!0,createLayer:function(a){var b="//"+a.user+".cartodb.com/api/v1/map/"+a.key+"/{z}/{x}/{y}.png";return L.tileLayer(b,a.options)}},cartodbUTFGrid:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(a){return a.url="//"+a.user+".cartodb.com/api/v1/map/"+a.key+"/"+a.layer+"/{z}/{x}/{y}.grid.json",utfGridCreateLayer(a)}},cartodbInteractive:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(a){var b="//"+a.user+".cartodb.com/api/v1/map/"+a.key+"/{z}/{x}/{y}.png",c=L.tileLayer(b,a.options);a.url="//"+a.user+".cartodb.com/api/v1/map/"+a.key+"/"+a.layer+"/{z}/{x}/{y}.grid.json";var d=utfGridCreateLayer(a);return L.layerGroup([c,d])}},wms:{mustHaveUrl:!0,createLayer:function(a){return L.tileLayer.wms(a.url,a.options)}},wmts:{mustHaveUrl:!0,createLayer:function(a){return L.tileLayer.wmts(a.url,a.options)}},wfs:{mustHaveUrl:!0,mustHaveLayer:!0,createLayer:function(params){if(Helpers.WFSLayerPlugin.isLoaded()){var options=angular.copy(params.options);return options.crs&&"string"==typeof options.crs&&(options.crs=eval(options.crs)),new L.GeoJSON.WFS(params.url,params.layer,options)}}},group:{mustHaveUrl:!1,createLayer:function(a){var b=[];return $it.each(a.options.layers,function(a){b.push(createLayer(a))}),a.options.loadedDefer=function(){var b=[];if(isDefined(a.options.layers))for(var c=0;c<a.options.layers.length;c++){var d=a.options.layers[c].layerOptions.loadedDefer;isDefined(d)&&b.push(d)}return b},L.layerGroup(b)}},featureGroup:{mustHaveUrl:!1,createLayer:function(){return L.featureGroup()}},google:{mustHaveUrl:!1,createLayer:function(a){var b=a.type||"SATELLITE";if(Helpers.GoogleLayerPlugin.isLoaded())return new L.Google(b,a.options)}},here:{mustHaveUrl:!1,createLayer:function(a){var b=a.provider||"HERE.terrainDay";if(Helpers.LeafletProviderPlugin.isLoaded())return new L.TileLayer.Provider(b,a.options)}},china:{mustHaveUrl:!1,createLayer:function(a){var b=a.type||"";if(Helpers.ChinaLayerPlugin.isLoaded())return L.tileLayer.chinaProvider(b,a.options)}},agsBase:{mustHaveLayer:!0,createLayer:function(a){if(Helpers.AGSBaseLayerPlugin.isLoaded())return L.esri.basemapLayer(a.layer,a.options)}},ags:{mustHaveUrl:!0,createLayer:function(a){if(Helpers.AGSLayerPlugin.isLoaded()){var b=angular.copy(a.options);angular.extend(b,{url:a.url});var c=new lvector.AGS(b);return c.onAdd=function(a){this.setMap(a)},c.onRemove=function(){this.setMap(null)},c}}},agsFeature:{mustHaveUrl:!0,createLayer:function(a){if(!Helpers.AGSFeatureLayerPlugin.isLoaded())return void $log.warn(errorHeader+" The esri plugin is not loaded.");a.options.url=a.url;var b=L.esri.featureLayer(a.options),c=function(){isDefined(a.options.loadedDefer)&&a.options.loadedDefer.resolve()};return b.on("loading",function(){a.options.loadedDefer=$q.defer(),b.off("load",c),b.on("load",c)}),b}},agsTiled:{mustHaveUrl:!0,createLayer:function(a){return Helpers.AGSTiledMapLayerPlugin.isLoaded()?(a.options.url=a.url,L.esri.tiledMapLayer(a.options)):void $log.warn(errorHeader+" The esri plugin is not loaded.")}},agsDynamic:{mustHaveUrl:!0,createLayer:function(a){return Helpers.AGSDynamicMapLayerPlugin.isLoaded()?(a.options.url=a.url,L.esri.dynamicMapLayer(a.options)):void $log.warn(errorHeader+" The esri plugin is not loaded.")}},agsImage:{mustHaveUrl:!0,createLayer:function(a){return Helpers.AGSImageMapLayerPlugin.isLoaded()?(a.options.url=a.url,L.esri.imageMapLayer(a.options)):void $log.warn(errorHeader+" The esri plugin is not loaded.")}},agsClustered:{mustHaveUrl:!0,createLayer:function(a){return Helpers.AGSClusteredLayerPlugin.isLoaded()?Helpers.MarkerClusterPlugin.isLoaded()?L.esri.clusteredFeatureLayer(a.url,a.options):void $log.warn(errorHeader+" The markercluster plugin is not loaded."):void $log.warn(errorHeader+" The esri clustered layer plugin is not loaded.")}},agsHeatmap:{mustHaveUrl:!0,createLayer:function(a){return Helpers.AGSHeatmapLayerPlugin.isLoaded()?Helpers.HeatLayerPlugin.isLoaded()?L.esri.heatmapFeatureLayer(a.url,a.options):void $log.warn(errorHeader+" The heatlayer plugin is not loaded."):void $log.warn(errorHeader+" The esri heatmap layer plugin is not loaded.")}},markercluster:{mustHaveUrl:!1,createLayer:function(a){return Helpers.MarkerClusterPlugin.isLoaded()?new L.MarkerClusterGroup(a.options):void $log.warn(errorHeader+" The markercluster plugin is not loaded.")}},bing:{mustHaveUrl:!1,createLayer:function(a){if(Helpers.BingLayerPlugin.isLoaded())return new L.BingLayer(a.key,a.options)}},webGLHeatmap:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(a){if(Helpers.WebGLHeatMapLayerPlugin.isLoaded()){var b=new L.TileLayer.WebGLHeatMap(a.options);return isDefined(a.data)&&b.setData(a.data),b}}},heat:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(a){if(Helpers.HeatLayerPlugin.isLoaded()){var b=new L.heatLayer;return isArray(a.data)&&b.setLatLngs(a.data),isObject(a.options)&&b.setOptions(a.options),b}}},yandex:{mustHaveUrl:!1,createLayer:function(a){var b=a.type||"map";if(Helpers.YandexLayerPlugin.isLoaded())return new L.Yandex(b,a.options)}},imageOverlay:{mustHaveUrl:!0,mustHaveBounds:!0,createLayer:function(a){return L.imageOverlay(a.url,a.bounds,a.options)}},iip:{mustHaveUrl:!0,createLayer:function(a){return L.tileLayer.iip(a.url,a.options)}},custom:{createLayer:function(a){return a.layer instanceof L.Class?angular.copy(a.layer):void $log.error("[AngularJS - Leaflet] A custom layer must be a leaflet Class")}},cartodb:{mustHaveUrl:!0,createLayer:function(a){return cartodb.createLayer(a.map,a.url)}}};return{createLayer:createLayer,safeAddLayer:safeAddLayer,safeRemoveLayer:safeRemoveLayer}}]),angular.module("leaflet-directive").factory("leafletLegendHelpers",function(){var a=function(a,b,c,d){if(a.innerHTML="",b.error)a.innerHTML+='<div class="info-title alert alert-danger">'+b.error.message+"</div>";else if("arcgis"===c)for(var e=0;e<b.layers.length;e++){var f=b.layers[e];a.innerHTML+='<div class="info-title" data-layerid="'+f.layerId+'">'+f.layerName+"</div>";for(var g=0;g<f.legend.length;g++){var h=f.legend[g];a.innerHTML+='<div class="inline" data-layerid="'+f.layerId+'"><img src="data:'+h.contentType+";base64,"+h.imageData+'" /></div><div class="info-label" data-layerid="'+f.layerId+'">'+h.label+"</div>"}}else"image"===c&&(a.innerHTML='<img src="'+d+'"/>')},b=function(b,c,d,e){return function(){var f=L.DomUtil.create("div",c);return L.Browser.touch?L.DomEvent.on(f,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(f),L.DomEvent.on(f,"mousewheel",L.DomEvent.stopPropagation)),a(f,b,d,e),f}},c=function(a,b){return function(){for(var c=L.DomUtil.create("div",b),d=0;d<a.colors.length;d++)c.innerHTML+='<div class="outline"><i style="background:'+a.colors[d]+'"></i></div><div class="info-label">'+a.labels[d]+"</div>";return L.Browser.touch?L.DomEvent.on(c,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(c),L.DomEvent.on(c,"mousewheel",L.DomEvent.stopPropagation)),c}};return{getOnAddLegend:b,getOnAddArrayLegend:c,updateLegend:a}}),angular.module("leaflet-directive").factory("leafletMapDefaults",["$q","leafletHelpers",function(a,b){function c(){return{keyboard:!0,dragging:!0,worldCopyJump:!1,doubleClickZoom:!0,scrollWheelZoom:!0,tap:!0,touchZoom:!0,zoomControl:!0,zoomsliderControl:!1,zoomControlPosition:"topleft",attributionControl:!0,controls:{layers:{visible:!0,position:"topright",collapsed:!0}},nominatim:{server:" http://nominatim.openstreetmap.org/search"},crs:L.CRS.EPSG3857,tileLayer:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},path:{weight:10,opacity:1,color:"#0000ff"},center:{lat:0,lng:0,zoom:1}}}var d=b.isDefined,e=b.isObject,f=b.obtainEffectiveMapId,g={};return{reset:function(){g={}},getDefaults:function(a){var b=f(g,a);return g[b]},getMapCreationDefaults:function(a){var b=f(g,a),c=g[b],e={maxZoom:c.maxZoom,keyboard:c.keyboard,dragging:c.dragging,zoomControl:c.zoomControl,doubleClickZoom:c.doubleClickZoom,scrollWheelZoom:c.scrollWheelZoom,tap:c.tap,touchZoom:c.touchZoom,attributionControl:c.attributionControl,worldCopyJump:c.worldCopyJump,crs:c.crs};if(d(c.minZoom)&&(e.minZoom=c.minZoom),d(c.zoomAnimation)&&(e.zoomAnimation=c.zoomAnimation),d(c.fadeAnimation)&&(e.fadeAnimation=c.fadeAnimation),d(c.markerZoomAnimation)&&(e.markerZoomAnimation=c.markerZoomAnimation),c.map)for(var h in c.map)e[h]=c.map[h];return e},setDefaults:function(a,b){var h=c();d(a)&&(h.doubleClickZoom=d(a.doubleClickZoom)?a.doubleClickZoom:h.doubleClickZoom,h.scrollWheelZoom=d(a.scrollWheelZoom)?a.scrollWheelZoom:h.doubleClickZoom,h.tap=d(a.tap)?a.tap:h.tap,h.touchZoom=d(a.touchZoom)?a.touchZoom:h.doubleClickZoom,h.zoomControl=d(a.zoomControl)?a.zoomControl:h.zoomControl,h.zoomsliderControl=d(a.zoomsliderControl)?a.zoomsliderControl:h.zoomsliderControl,h.attributionControl=d(a.attributionControl)?a.attributionControl:h.attributionControl,h.tileLayer=d(a.tileLayer)?a.tileLayer:h.tileLayer,h.zoomControlPosition=d(a.zoomControlPosition)?a.zoomControlPosition:h.zoomControlPosition,h.keyboard=d(a.keyboard)?a.keyboard:h.keyboard,h.dragging=d(a.dragging)?a.dragging:h.dragging,d(a.controls)&&angular.extend(h.controls,a.controls),e(a.crs)?h.crs=a.crs:d(L.CRS[a.crs])&&(h.crs=L.CRS[a.crs]),d(a.center)&&angular.copy(a.center,h.center),d(a.tileLayerOptions)&&angular.copy(a.tileLayerOptions,h.tileLayerOptions),d(a.maxZoom)&&(h.maxZoom=a.maxZoom),d(a.minZoom)&&(h.minZoom=a.minZoom),d(a.zoomAnimation)&&(h.zoomAnimation=a.zoomAnimation),d(a.fadeAnimation)&&(h.fadeAnimation=a.fadeAnimation),d(a.markerZoomAnimation)&&(h.markerZoomAnimation=a.markerZoomAnimation),d(a.worldCopyJump)&&(h.worldCopyJump=a.worldCopyJump),d(a.map)&&(h.map=a.map),d(a.path)&&(h.path=a.path));var i=f(g,b);return g[i]=h,h}}}]),angular.module("leaflet-directive").service("leafletMarkersHelpers",["$rootScope","$timeout","leafletHelpers","$log","$compile","leafletGeoJsonHelpers",function(a,b,c,d,e,f){var g=c.isDefined,h=c.defaultTo,i=c.MarkerClusterPlugin,j=c.AwesomeMarkersPlugin,k=c.VectorMarkersPlugin,l=c.MakiMarkersPlugin,m=c.ExtraMarkersPlugin,n=c.DomMarkersPlugin,o=c.safeApply,p=c,q=c.isString,r=c.isNumber,s=c.isObject,t={},u=f,v=c.errorHeader,w=function(a){var b="";return["_icon","_latlng","_leaflet_id","_map","_shadow"].forEach(function(c){b+=c+": "+h(a[c],"undefined")+" \n"}),"[leafletMarker] : \n"+b},x=function(a,b){var c=b?console:d;c.debug(w(a))},y=function(b){if(g(b)&&g(b.type)&&"awesomeMarker"===b.type)return j.isLoaded()||d.error(v+" The AwesomeMarkers Plugin is not loaded."),new L.AwesomeMarkers.icon(b);if(g(b)&&g(b.type)&&"vectorMarker"===b.type)return k.isLoaded()||d.error(v+" The VectorMarkers Plugin is not loaded."),new L.VectorMarkers.icon(b);if(g(b)&&g(b.type)&&"makiMarker"===b.type)return l.isLoaded()||d.error(v+"The MakiMarkers Plugin is not loaded."),new L.MakiMarkers.icon(b);if(g(b)&&g(b.type)&&"extraMarker"===b.type)return m.isLoaded()||d.error(v+"The ExtraMarkers Plugin is not loaded."),new L.ExtraMarkers.icon(b);if(g(b)&&g(b.type)&&"div"===b.type)return new L.divIcon(b);if(g(b)&&g(b.type)&&"dom"===b.type){n.isLoaded()||d.error(v+"The DomMarkers Plugin is not loaded.");var c=angular.isFunction(b.getMarkerScope)?b.getMarkerScope():a,f=e(b.template)(c),h=angular.copy(b);return h.element=f[0],new L.DomMarkers.icon(h)}if(g(b)&&g(b.type)&&"icon"===b.type)return b.icon;var i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg==",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=";return g(b)&&g(b.iconUrl)?new L.Icon(b):new L.Icon.Default({iconUrl:i,shadowUrl:o,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})},z=function(a){g(t[a])&&t.splice(a,1)},A=function(){t={}},B=function(a,b,c){if(a.closePopup(),g(c)&&g(c.overlays))for(var d in c.overlays)if((c.overlays[d]instanceof L.LayerGroup||c.overlays[d]instanceof L.FeatureGroup)&&c.overlays[d].hasLayer(a))return void c.overlays[d].removeLayer(a);if(g(t))for(var e in t)t[e].hasLayer(a)&&t[e].removeLayer(a);b.hasLayer(a)&&b.removeLayer(a)},C=function(a,b){var c=a._popup._container.offsetHeight,d=new L.Point(a._popup._containerLeft,-c-a._popup._containerBottom),e=b.layerPointToContainerPoint(d);null!==e&&a._popup._adjustPan()},D=function(a,b){e(a._popup._contentNode)(b)},E=function(a,c,d){var e=a._popup._contentNode.innerText||a._popup._contentNode.textContent;e.length<1&&b(function(){E(a,c,d)});var f=a._popup._contentNode.offsetWidth;return a._popup._updateLayout(),a._popup._updatePosition(),a._popup.options.autoPan&&C(a,d),f},F=function(b,c,e){var f=angular.isFunction(c.getMessageScope)?c.getMessageScope():a,h=!g(c.compileMessage)||c.compileMessage;if(h){if(!g(b._popup)||!g(b._popup._contentNode))return d.error(v+"Popup is invalid or does not have any content."),!1;D(b,f),E(b,c,e)}},G=function(b,c){var d=angular.isFunction(c.getMessageScope)?c.getMessageScope():a,f=angular.isFunction(c.getLabelScope)?c.getLabelScope():d,h=!g(c.compileMessage)||c.compileMessage;p.LabelPlugin.isLoaded()&&g(c.label)&&(g(c.label.options)&&c.label.options.noHide===!0&&b.showLabel(),h&&g(b.label)&&e(b.label._container)(f))},H=function(a,b,c,e,f,h,i){if(g(b)){if(!u.validateCoords(a))return d.warn("There are problems with lat-lng data, please verify your marker model"),void B(c,i,h);var j=a===b;if(g(a.iconAngle)&&b.iconAngle!==a.iconAngle&&c.setIconAngle(a.iconAngle),q(a.layer)||q(b.layer)&&(g(h.overlays[b.layer])&&h.overlays[b.layer].hasLayer(c)&&(h.overlays[b.layer].removeLayer(c),c.closePopup()),i.hasLayer(c)||i.addLayer(c)),(r(a.opacity)||r(parseFloat(a.opacity)))&&a.opacity!==b.opacity&&c.setOpacity(a.opacity),q(a.layer)&&b.layer!==a.layer){if(q(b.layer)&&g(h.overlays[b.layer])&&h.overlays[b.layer].hasLayer(c)&&h.overlays[b.layer].removeLayer(c),c.closePopup(),i.hasLayer(c)&&i.removeLayer(c),!g(h.overlays[a.layer]))return void d.error(v+"You must use a name of an existing layer");var k=h.overlays[a.layer];if(!(k instanceof L.LayerGroup||k instanceof L.FeatureGroup))return void d.error(v+'A marker can only be added to a layer of type "group" or "featureGroup"');k.addLayer(c),i.hasLayer(c)&&a.focus===!0&&c.openPopup()}if(a.draggable!==!0&&b.draggable===!0&&g(c.dragging)&&c.dragging.disable(),a.draggable===!0&&b.draggable!==!0&&(c.dragging?c.dragging.enable():L.Handler.MarkerDrag&&(c.dragging=new L.Handler.MarkerDrag(c),c.options.draggable=!0,c.dragging.enable())),s(a.icon)||s(b.icon)&&(c.setIcon(y()),c.closePopup(),c.unbindPopup(),q(a.message)&&c.bindPopup(a.message,a.popupOptions)),s(a.icon)&&s(b.icon)&&!angular.equals(a.icon,b.icon)){var l=!1;c.dragging&&(l=c.dragging.enabled()),c.setIcon(y(a.icon)),l&&c.dragging.enable(),c.closePopup(),c.unbindPopup(),q(a.message)&&(c.bindPopup(a.message,a.popupOptions),i.hasLayer(c)&&a.focus===!0&&c.openPopup())}!q(a.message)&&q(b.message)&&(c.closePopup(),c.unbindPopup()),p.LabelPlugin.isLoaded()&&(g(a.label)&&g(a.label.message)?"label"in b&&"message"in b.label&&!angular.equals(a.label.message,b.label.message)?c.updateLabelContent(a.label.message):!angular.isFunction(c.getLabel)||angular.isFunction(c.getLabel)&&!g(c.getLabel())?(c.bindLabel(a.label.message,a.label.options),G(c,a)):G(c,a):"label"in a&&!("message"in a.label)||angular.isFunction(c.unbindLabel)&&c.unbindLabel()),q(a.message)&&!q(b.message)&&c.bindPopup(a.message,a.popupOptions),q(a.message)&&q(b.message)&&a.message!==b.message&&c.setPopupContent(a.message);var m=!1;a.focus!==!0&&b.focus===!0&&(c.closePopup(),m=!0),(a.focus===!0&&(!g(b.focus)||b.focus===!1)||j&&a.focus===!0)&&(c.openPopup(),m=!0),b.zIndexOffset!==a.zIndexOffset&&c.setZIndexOffset(a.zIndexOffset);var n=c.getLatLng(),o=q(a.layer)&&p.MarkerClusterPlugin.is(h.overlays[a.layer]);o?m?a.lat===b.lat&&a.lng===b.lng||(h.overlays[a.layer].removeLayer(c),c.setLatLng([a.lat,a.lng]),h.overlays[a.layer].addLayer(c)):n.lat!==a.lat||n.lng!==a.lng?(h.overlays[a.layer].removeLayer(c),c.setLatLng([a.lat,a.lng]),h.overlays[a.layer].addLayer(c)):a.lat!==b.lat||a.lng!==b.lng?(h.overlays[a.layer].removeLayer(c),c.setLatLng([a.lat,a.lng]),h.overlays[a.layer].addLayer(c)):s(a.icon)&&s(b.icon)&&!angular.equals(a.icon,b.icon)&&(h.overlays[a.layer].removeLayer(c),h.overlays[a.layer].addLayer(c)):n.lat===a.lat&&n.lng===a.lng||c.setLatLng([a.lat,a.lng])}};return{resetMarkerGroup:z,resetMarkerGroups:A,deleteMarker:B,manageOpenPopup:F,manageOpenLabel:G,createMarker:function(a){if(!g(a)||!u.validateCoords(a))return void d.error(v+"The marker definition is not valid.");var b=u.getCoords(a);if(!g(b))return void d.error(v+"Unable to get coordinates from markerData.");var c={icon:y(a.icon),title:g(a.title)?a.title:"",draggable:!!g(a.draggable)&&a.draggable,clickable:!g(a.clickable)||a.clickable,riseOnHover:!!g(a.riseOnHover)&&a.riseOnHover,zIndexOffset:g(a.zIndexOffset)?a.zIndexOffset:0,iconAngle:g(a.iconAngle)?a.iconAngle:0};for(var e in a)a.hasOwnProperty(e)&&!c.hasOwnProperty(e)&&(c[e]=a[e]);var f=new L.marker(b,c);return q(a.message)||f.unbindPopup(),f},addMarkerToGroup:function(a,b,c,e){return q(b)?i.isLoaded()?(g(t[b])||(t[b]=new L.MarkerClusterGroup(c),e.addLayer(t[b])),void t[b].addLayer(a)):void d.error(v+"The MarkerCluster plugin is not loaded."):void d.error(v+"The marker group you have specified is invalid.")},listenMarkerEvents:function(a,b,c,d,e){a.on("popupopen",function(){o(c,function(){(g(a._popup)||g(a._popup._contentNode))&&(b.focus=!0,F(a,b,e))})}),a.on("popupclose",function(){o(c,function(){b.focus=!1})}),a.on("add",function(){o(c,function(){"label"in b&&G(a,b)})})},updateMarker:H,addMarkerWatcher:function(a,b,c,d,e,f){var i=p.getObjectArrayPath("markers."+b);f=h(f,!0);var j=c.$watch(i,function(f,h){return g(f)?void H(f,h,a,b,c,d,e):(B(a,e,d),void j())},f)},string:w,log:x}}]),angular.module("leaflet-directive").factory("leafletPathsHelpers",["$rootScope","$log","leafletHelpers",function(a,b,c){function d(a){return a.filter(function(a){return k(a)}).map(function(a){return e(a)})}function e(a){return i(a)?new L.LatLng(a[0],a[1]):new L.LatLng(a.lat,a.lng)}function f(a){return a.map(function(a){return d(a)})}function g(a,b){for(var c={},d=0;d<l.length;d++){var e=l[d];h(a[e])?c[e]=a[e]:h(b.path[e])&&(c[e]=b.path[e])}return c}var h=c.isDefined,i=c.isArray,j=c.isNumber,k=c.isValidPoint,l=["stroke","weight","color","opacity","fill","fillColor","fillOpacity","dashArray","lineCap","lineJoin","clickable","pointerEvents","className","smoothFactor","noClip"],m=function(a,b){for(var c={},d=0;d<l.length;d++){var e=l[d];h(b[e])&&(c[e]=b[e])}a.setStyle(b)},n=function(a){if(!i(a))return!1;for(var b=0;b<a.length;b++){var c=a[b];if(!k(c))return!1}return!0},o={polyline:{isValid:function(a){var b=a.latlngs;return n(b)},createPath:function(a){return new L.Polyline([],a)},setPath:function(a,b){a.setLatLngs(d(b.latlngs)),m(a,b)}},multiPolyline:{isValid:function(a){var b=a.latlngs;if(!i(b))return!1;for(var c in b){var d=b[c];if(!n(d))return!1}return!0},createPath:function(a){return new L.multiPolyline([[[0,0],[1,1]]],a)},setPath:function(a,b){a.setLatLngs(f(b.latlngs)),m(a,b)}},polygon:{isValid:function(a){var b=a.latlngs;return n(b)},createPath:function(a){return new L.Polygon([],a)},setPath:function(a,b){a.setLatLngs(d(b.latlngs)),m(a,b)}},multiPolygon:{isValid:function(a){var b=a.latlngs;if(!i(b))return!1;for(var c in b){var d=b[c];if(!n(d))return!1}return!0},createPath:function(a){return new L.MultiPolygon([[[0,0],[1,1],[0,1]]],a)},setPath:function(a,b){a.setLatLngs(f(b.latlngs)),m(a,b)}},rectangle:{isValid:function(a){var b=a.latlngs;if(!i(b)||2!==b.length)return!1;for(var c in b){var d=b[c];if(!k(d))return!1}return!0},createPath:function(a){return new L.Rectangle([[0,0],[1,1]],a)},setPath:function(a,b){a.setBounds(new L.LatLngBounds(d(b.latlngs))),m(a,b)}},circle:{isValid:function(a){var b=a.latlngs;return k(b)&&j(a.radius)},createPath:function(a){return new L.Circle([0,0],1,a)},setPath:function(a,b){a.setLatLng(e(b.latlngs)),h(b.radius)&&a.setRadius(b.radius),m(a,b)}},circleMarker:{isValid:function(a){var b=a.latlngs;return k(b)&&j(a.radius)},createPath:function(a){return new L.CircleMarker([0,0],a)},setPath:function(a,b){a.setLatLng(e(b.latlngs)),h(b.radius)&&a.setRadius(b.radius),m(a,b)}}},p=function(a){var b={};return a.latlngs&&(b.latlngs=a.latlngs),a.radius&&(b.radius=a.radius),b};return{setPathOptions:function(a,b,c){h(b)||(b="polyline"),o[b].setPath(a,c)},createPath:function(a,c,d){h(c.type)||(c.type="polyline");var e=g(c,d),f=p(c);return o[c.type].isValid(f)?o[c.type].createPath(e):void b.error("[AngularJS - Leaflet] Invalid data passed to the "+c.type+" path")}}}]),angular.module("leaflet-directive").service("leafletWatchHelpers",function(){var a=function(a,b,c,d,e){var f=a[b](c,function(a,b){e(a,b),d.doWatch||f()},d.isDeep);return f},b=function(b,c,d,e){return a(b,"$watch",c,d,e)},c=function(b,c,d,e){return a(b,"$watchCollection",c,d,e)};return{maybeWatch:b,maybeWatchCollection:c}}),angular.module("leaflet-directive").factory("nominatimService",["$q","$http","leafletHelpers","leafletMapDefaults",function(a,b,c,d){var e=c.isDefined;return{query:function(c,f){var g=d.getDefaults(f),h=g.nominatim.server,i=a.defer();return b.get(h,{params:{format:"json",limit:1,q:c}}).success(function(a){a.length>0&&e(a[0].boundingbox)?i.resolve(a[0]):i.reject("[Nominatim] Invalid address")}),i.promise}}}]),angular.module("leaflet-directive").directive("bounds",["$log","$timeout","$http","leafletHelpers","nominatimService","leafletBoundsHelpers",function(a,b,c,d,e,f){return{restrict:"A",scope:!1,replace:!1,require:["leaflet"],link:function(c,g,h,i){var j=d.isDefined,k=f.createLeafletBounds,l=i[0].getLeafletScope(),m=i[0],n=d.errorHeader+" [Bounds] ",o=function(a){return 0===a._southWest.lat&&0===a._southWest.lng&&0===a._northEast.lat&&0===a._northEast.lng};m.getMap().then(function(d){l.$on("boundsChanged",function(a){var c=a.currentScope,e=d.getBounds();if(!o(e)&&!c.settingBoundsFromScope){c.settingBoundsFromLeaflet=!0;var f={northEast:{lat:e._northEast.lat,lng:e._northEast.lng},southWest:{lat:e._southWest.lat,lng:e._southWest.lng},options:e.options};angular.equals(c.bounds,f)||(c.bounds=f),b(function(){c.settingBoundsFromLeaflet=!1})}});var f;l.$watch("bounds",function(g){if(!c.settingBoundsFromLeaflet){if(j(g.address)&&g.address!==f)return c.settingBoundsFromScope=!0,e.query(g.address,h.id).then(function(a){var b=a.boundingbox,c=[[b[0],b[2]],[b[1],b[3]]];d.fitBounds(c)},function(b){a.error(n+" "+b+".")}),f=g.address,void b(function(){c.settingBoundsFromScope=!1});var i=k(g);i&&!d.getBounds().equals(i)&&(c.settingBoundsFromScope=!0,d.fitBounds(i,g.options),b(function(){c.settingBoundsFromScope=!1}))}},!0)})}}}]);var centerDirectiveTypes=["center","lfCenter"],centerDirectives={};centerDirectiveTypes.forEach(function(a){centerDirectives[a]=["$log","$q","$location","$timeout","leafletMapDefaults","leafletHelpers","leafletBoundsHelpers","leafletMapEvents",function(b,c,d,e,f,g,h,i){var j,k=g.isDefined,l=g.isNumber,m=g.isSameCenterOnMap,n=g.safeApply,o=g.isValidCenter,p=h.isValidBounds,q=g.isUndefinedOrEmpty,r=g.errorHeader,s=function(a,b){return k(a)&&p(a)&&q(b)};return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:function(){j=c.defer(),this.getCenter=function(){return j.promise}},link:function(c,g,p,q){var t=q.getLeafletScope(),u=t[a];q.getMap().then(function(c){var g=f.getDefaults(p.id);if(p[a].search("-")!==-1)return b.error(r+' The "center" variable can\'t use a "-" on its key name: "'+p[a]+'".'),void c.setView([g.center.lat,g.center.lng],g.center.zoom);if(s(t.bounds,u))c.fitBounds(h.createLeafletBounds(t.bounds),t.bounds.options),u=c.getCenter(),n(t,function(b){angular.extend(b[a],{lat:c.getCenter().lat,lng:c.getCenter().lng,zoom:c.getZoom(),autoDiscover:!1})}),n(t,function(a){var b=c.getBounds();a.bounds={northEast:{lat:b._northEast.lat,lng:b._northEast.lng},southWest:{lat:b._southWest.lat,lng:b._southWest.lng}}});else{if(!k(u))return b.error(r+' The "center" property is not defined in the main scope'),void c.setView([g.center.lat,g.center.lng],g.center.zoom);k(u.lat)&&k(u.lng)||k(u.autoDiscover)||angular.copy(g.center,u)}var q,v;if("yes"===p.urlHashCenter){var w=function(){var a,b=d.search();if(k(b.c)){var c=b.c.split(":");3===c.length&&(a={lat:parseFloat(c[0]),lng:parseFloat(c[1]),zoom:parseInt(c[2],10)})}return a};q=w(),t.$on("$locationChangeSuccess",function(b){var d=b.currentScope,e=w();k(e)&&!m(e,c)&&angular.extend(d[a],{lat:e.lat,lng:e.lng,zoom:e.zoom})})}t.$watch(a,function(a){if(!t.settingCenterFromLeaflet)return k(q)&&(angular.copy(q,a),q=void 0),o(a)||a.autoDiscover===!0?a.autoDiscover===!0?(l(a.zoom)||c.setView([g.center.lat,g.center.lng],g.center.zoom),void(l(a.zoom)&&a.zoom>g.center.zoom?c.locate({setView:!0,maxZoom:a.zoom}):k(g.maxZoom)?c.locate({setView:!0,maxZoom:g.maxZoom}):c.locate({setView:!0}))):void(v&&m(a,c)||(t.settingCenterFromScope=!0,
c.setView([a.lat,a.lng],a.zoom),i.notifyCenterChangedToBounds(t,c),e(function(){t.settingCenterFromScope=!1}))):void b.warn(r+" invalid 'center'")},!0),c.whenReady(function(){v=!0}),c.on("moveend",function(){j.resolve(),i.notifyCenterUrlHashChanged(t,c,p,d.search()),m(u,c)||t.settingCenterFromScope||(t.settingCenterFromLeaflet=!0,n(t,function(b){t.settingCenterFromScope||angular.extend(b[a],{lat:c.getCenter().lat,lng:c.getCenter().lng,zoom:c.getZoom(),autoDiscover:!1}),i.notifyCenterChangedToBounds(t,c),e(function(){t.settingCenterFromLeaflet=!1})}))}),u.autoDiscover===!0&&c.on("locationerror",function(){b.warn(r+" The Geolocation API is unauthorized on this page."),o(u)?(c.setView([u.lat,u.lng],u.zoom),i.notifyCenterChangedToBounds(t,c)):(c.setView([g.center.lat,g.center.lng],g.center.zoom),i.notifyCenterChangedToBounds(t,c))})})}}}]}),centerDirectiveTypes.forEach(function(a){angular.module("leaflet-directive").directive(a,centerDirectives[a])}),angular.module("leaflet-directive").directive("controls",["$log","leafletHelpers","leafletControlHelpers",function(a,b,c){return{restrict:"A",scope:!1,replace:!1,require:"?^leaflet",link:function(d,e,f,g){if(g){var h=c.createControl,i=c.isValidControlType,j=g.getLeafletScope(),k=b.isDefined,l=b.isArray,m={},n=b.errorHeader+" [Controls] ";g.getMap().then(function(b){j.$watchCollection("controls",function(c){for(var d in m)k(c[d])||(b.hasControl(m[d])&&b.removeControl(m[d]),delete m[d]);for(var e in c){var f,g=k(c[e].type)?c[e].type:e;if(!i(g))return void a.error(n+" Invalid control type: "+g+".");if("custom"!==g)f=h(g,c[e]),b.addControl(f),m[e]=f;else{var j=c[e];if(l(j))for(var o in j){var p=j[o];b.addControl(p),m[e]=k(m[e])?m[e].concat([p]):[p]}else b.addControl(j),m[e]=j}}})})}}}}]),angular.module("leaflet-directive").directive("decorations",["$log","leafletHelpers",function(a,b){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(c,d,e,f){function g(b){return k(b)&&k(b.coordinates)&&(j.isLoaded()||a.error("[AngularJS - Leaflet] The PolylineDecorator Plugin is not loaded.")),L.polylineDecorator(b.coordinates)}function h(a,b){if(k(a)&&k(b)&&k(b.coordinates)&&k(b.patterns))return a.setPaths(b.coordinates),a.setPatterns(b.patterns),a}var i=f.getLeafletScope(),j=b.PolylineDecoratorPlugin,k=b.isDefined,l={};f.getMap().then(function(a){i.$watch("decorations",function(b){for(var c in l)k(b[c])&&angular.equals(b[c],l)||(a.removeLayer(l[c]),delete l[c]);for(var d in b){var e=b[d],f=g(e);k(f)&&(l[d]=f,a.addLayer(f),h(f,e))}},!0)})}}}]),angular.module("leaflet-directive").directive("eventBroadcast",["$log","$rootScope","leafletHelpers","leafletMapEvents","leafletIterators",function(a,b,c,d,e){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(b,f,g,h){var i=c.isObject,j=c.isDefined,k=h.getLeafletScope(),l=k.eventBroadcast,m=d.getAvailableMapEvents(),n=d.addEvents;h.getMap().then(function(b){var c=[],d="broadcast";j(l.map)?i(l.map)?("emit"!==l.map.logic&&"broadcast"!==l.map.logic?a.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):d=l.map.logic,i(l.map.enable)&&l.map.enable.length>=0?e.each(l.map.enable,function(a){c.indexOf(a)===-1&&m.indexOf(a)!==-1&&c.push(a)}):a.warn("[AngularJS - Leaflet] event-broadcast.map.enable must be an object check your model.")):a.warn("[AngularJS - Leaflet] event-broadcast.map must be an object check your model."):c=m,n(b,c,"eventName",k,d)})}}}]),angular.module("leaflet-directive").directive("geojson",["$log","$rootScope","leafletData","leafletHelpers","leafletWatchHelpers","leafletDirectiveControlsHelpers","leafletIterators","leafletGeoJsonEvents",function(a,b,c,d,e,f,g,h){var i=e.maybeWatch,j=d.watchOptions,k=f.extend,l=d,m=g;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(a,b,e,f){var g=d.isDefined,n=f.getLeafletScope(),o={},p=!1;f.getMap().then(function(a){var b=n.geojsonWatchOptions||j,f=function(a,b){var c;return c=angular.isFunction(a.onEachFeature)?a.onEachFeature:function(c,f){d.LabelPlugin.isLoaded()&&g(c.properties.description)&&f.bindLabel(c.properties.description),h.bindEvents(e.id,f,null,c,n,b,{resetStyleOnMouseout:a.resetStyleOnMouseout,mapId:e.id})}},q=l.isDefined(e.geojsonNested)&&l.isTruthy(e.geojsonNested),r=function(){if(o){var b=function(b){g(b)&&a.hasLayer(b)&&a.removeLayer(b)};return q?void m.each(o,function(a){b(a)}):void b(o)}},s=function(b,d){var h=angular.copy(b);if(g(h)&&g(h.data)){var i=f(h,d);g(h.options)||(h.options={style:h.style,filter:h.filter,onEachFeature:i,pointToLayer:h.pointToLayer});var j=L.geoJson(h.data,h.options);d&&l.isString(d)?o[d]=j:o=j,j.addTo(a),p||(p=!0,c.setGeoJSON(o,e.id))}},t=function(a){if(r(),q){if(!a||!Object.keys(a).length)return;return void m.each(a,function(a,b){s(a,b)})}s(a)};k(e.id,"geojson",t,r),i(n,"geojson",b,function(a){t(a)})})}}}]),angular.module("leaflet-directive").directive("layercontrol",["$filter","$log","leafletData","leafletHelpers",function(a,b,c,d){return{restrict:"E",scope:{icons:"=?",autoHideOpacity:"=?",showGroups:"=?",title:"@",baseTitle:"@",overlaysTitle:"@"},replace:!0,transclude:!1,require:"^leaflet",controller:["$scope","$element","$sce",function(a,e,f){b.debug("[Angular Directive - Layers] layers",a,e);var g=d.safeApply,h=d.isDefined;angular.extend(a,{baselayer:"",oldGroup:"",layerProperties:{},groupProperties:{},rangeIsSupported:d.rangeIsSupported(),changeBaseLayer:function(b,e){d.safeApply(a,function(d){d.baselayer=b,c.getMap().then(function(e){c.getLayers().then(function(c){if(!e.hasLayer(c.baselayers[b])){for(var f in d.layers.baselayers)d.layers.baselayers[f].icon=d.icons.unradio,e.hasLayer(c.baselayers[f])&&e.removeLayer(c.baselayers[f]);e.addLayer(c.baselayers[b]),d.layers.baselayers[b].icon=a.icons.radio}})})}),e.preventDefault()},moveLayer:function(b,c,d){var e=Object.keys(a.layers.baselayers).length;if(c>=1+e&&c<=a.overlaysArray.length+e){var f;for(var h in a.layers.overlays)if(a.layers.overlays[h].index===c){f=a.layers.overlays[h];break}f&&g(a,function(){f.index=b.index,b.index=c})}d.stopPropagation(),d.preventDefault()},initIndex:function(b,c){var d=Object.keys(a.layers.baselayers).length;b.index=h(b.index)?b.index:c+d+1},initGroup:function(b){a.groupProperties[b]=a.groupProperties[b]?a.groupProperties[b]:{}},toggleOpacity:function(b,c){if(c.visible){if(a.autoHideOpacity&&!a.layerProperties[c.name].opacityControl)for(var d in a.layerProperties)a.layerProperties[d].opacityControl=!1;a.layerProperties[c.name].opacityControl=!a.layerProperties[c.name].opacityControl}b.stopPropagation(),b.preventDefault()},toggleLegend:function(b){a.layerProperties[b.name].showLegend=!a.layerProperties[b.name].showLegend},showLegend:function(b){return b.legend&&a.layerProperties[b.name].showLegend},unsafeHTML:function(a){return f.trustAsHtml(a)},getOpacityIcon:function(b){return b.visible&&a.layerProperties[b.name].opacityControl?a.icons.close:a.icons.open},getGroupIcon:function(b){return b.visible?a.icons.check:a.icons.uncheck},changeOpacity:function(b){var d=a.layerProperties[b.name].opacity;c.getMap().then(function(e){c.getLayers().then(function(c){var f;for(var g in a.layers.overlays)if(a.layers.overlays[g]===b){f=c.overlays[g];break}e.hasLayer(f)&&(f.setOpacity&&f.setOpacity(d/100),f.getLayers&&f.eachLayer&&f.eachLayer(function(a){a.setOpacity&&a.setOpacity(d/100)}))})})},changeGroupVisibility:function(b){if(h(a.groupProperties[b])){var c=a.groupProperties[b].visible;for(var d in a.layers.overlays){var e=a.layers.overlays[d];e.group===b&&(e.visible=c)}}}});var i=e.get(0);L.Browser.touch?L.DomEvent.on(i,"click",L.DomEvent.stopPropagation):(L.DomEvent.disableClickPropagation(i),L.DomEvent.on(i,"mousewheel",L.DomEvent.stopPropagation))}],template:'<div class="angular-leaflet-control-layers" ng-show="overlaysArray.length"><h4 ng-if="title">{{ title }}</h4><div class="lf-baselayers"><h5 class="lf-title" ng-if="baseTitle">{{ baseTitle }}</h5><div class="lf-row" ng-repeat="(key, layer) in baselayersArray"><label class="lf-icon-bl" ng-click="changeBaseLayer(key, $event)"><input class="leaflet-control-layers-selector" type="radio" name="lf-radio" ng-show="false" ng-checked="baselayer === key" ng-value="key" /> <i class="lf-icon lf-icon-radio" ng-class="layer.icon"></i><div class="lf-text">{{layer.name}}</div></label></div></div><div class="lf-overlays"><h5 class="lf-title" ng-if="overlaysTitle">{{ overlaysTitle }}</h5><div class="lf-container"><div class="lf-row" ng-repeat="layer in (o = (overlaysArray | orderBy:\'index\':order))" ng-init="initIndex(layer, $index)"><label class="lf-icon-ol-group" ng-if="showGroups &amp;&amp; layer.group &amp;&amp; layer.group != o[$index-1].group"><input class="lf-control-layers-selector" type="checkbox" ng-show="false" ng-change="changeGroupVisibility(layer.group)" ng-model="groupProperties[layer.group].visible"/> <i class="lf-icon lf-icon-check" ng-class="getGroupIcon(groupProperties[layer.group])"></i><div class="lf-text">{{ layer.group }}</div></label><label class="lf-icon-ol"><input class="lf-control-layers-selector" type="checkbox" ng-show="false" ng-model="layer.visible"/> <i class="lf-icon lf-icon-check" ng-class="layer.icon"></i><div class="lf-text">{{layer.name}}</div></label><div class="lf-icons"><i class="lf-icon lf-up" ng-class="icons.up" ng-click="moveLayer(layer, layer.index - orderNumber, $event)"></i> <i class="lf-icon lf-down" ng-class="icons.down" ng-click="moveLayer(layer, layer.index + orderNumber, $event)"></i> <i class="lf-icon lf-toggle-legend" ng-class="icons.toggleLegend" ng-if="layer.legend" ng-click="toggleLegend(layer)"></i> <i class="lf-icon lf-open" ng-class="getOpacityIcon(layer)" ng-click="toggleOpacity($event, layer)"></i></div><div class="lf-legend" ng-if="showLegend(layer)" ng-bind-html="unsafeHTML(layer.legend)"></div><div class="lf-opacity clearfix" ng-if="layer.visible &amp;&amp; layerProperties[layer.name].opacityControl"><label ng-if="rangeIsSupported" class="pull-left" style="width: 50%">0</label><label ng-if="rangeIsSupported" class="pull-left text-right" style="width: 50%">100</label><input ng-if="rangeIsSupported" class="clearfix" type="range" min="0" max="100" class="lf-opacity-control" ng-model="layerProperties[layer.name].opacity" ng-change="changeOpacity(layer)"/><h6 ng-if="!rangeIsSupported">Range is not supported in this browser</h6></div></div></div></div></div>',link:function(a,b,e,f){var g=d.isDefined,h=f.getLeafletScope(),i=h.layers;a.$watch("icons",function(){var b={uncheck:"fa fa-square-o",check:"fa fa-check-square-o",radio:"fa fa-dot-circle-o",unradio:"fa fa-circle-o",up:"fa fa-angle-up",down:"fa fa-angle-down",open:"fa fa-angle-double-down",close:"fa fa-angle-double-up",toggleLegend:"fa fa-pencil-square-o"};g(a.icons)?(angular.extend(b,a.icons),angular.extend(a.icons,b)):a.icons=b}),e.order=!g(e.order)||"normal"!==e.order&&"reverse"!==e.order?"normal":e.order,a.order="normal"===e.order,a.orderNumber="normal"===e.order?-1:1,a.layers=i,f.getMap().then(function(b){h.$watch("layers.baselayers",function(d){var e={};c.getLayers().then(function(c){var f;for(f in d){var g=d[f];g.icon=a.icons[b.hasLayer(c.baselayers[f])?"radio":"unradio"],e[f]=g}a.baselayersArray=e})}),h.$watch("layers.overlays",function(b){var d=[],e={};c.getLayers().then(function(c){var f;for(f in b){var h=b[f];h.icon=a.icons[h.visible?"check":"uncheck"],d.push(h),g(a.layerProperties[h.name])||(a.layerProperties[h.name]={opacity:g(h.layerOptions.opacity)?100*h.layerOptions.opacity:100,opacityControl:!1,showLegend:!0}),g(h.group)&&(g(a.groupProperties[h.group])||(a.groupProperties[h.group]={visible:!1}),e[h.group]=g(e[h.group])?e[h.group]:{count:0,visibles:0},e[h.group].count++,h.visible&&e[h.group].visibles++),g(h.index)&&c.overlays[f].setZIndex&&c.overlays[f].setZIndex(b[f].index)}for(f in e)a.groupProperties[f].visible=e[f].visibles===e[f].count;a.overlaysArray=d})},!0)})}}}]),angular.module("leaflet-directive").directive("layers",["$log","$q","leafletData","leafletHelpers","leafletLayerHelpers","leafletControlHelpers",function(a,b,c,d,e,f){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:["$scope",function(a){a._leafletLayers=b.defer(),this.getLayers=function(){return a._leafletLayers.promise}}],link:function(a,b,g,h){var i=d.isDefined,j={},k=h.getLeafletScope(),l=k.layers,m=e.createLayer,n=e.safeAddLayer,o=e.safeRemoveLayer,p=f.updateLayersControl,q=!1;h.getMap().then(function(b){a._leafletLayers.resolve(j),c.setLayers(j,g.id),j.baselayers={},j.overlays={};var d=g.id,e=!1;for(var f in l.baselayers){var h=m(l.baselayers[f]);i(h)?(j.baselayers[f]=h,l.baselayers[f].top===!0&&(n(b,j.baselayers[f]),e=!0)):delete l.baselayers[f]}!e&&Object.keys(j.baselayers).length>0&&n(b,j.baselayers[Object.keys(l.baselayers)[0]]);for(f in l.overlays){var r=m(l.overlays[f]);i(r)?(j.overlays[f]=r,l.overlays[f].visible===!0&&n(b,j.overlays[f])):delete l.overlays[f]}k.$watch("layers.baselayers",function(a,c){if(angular.equals(a,c))return q=p(b,d,q,a,l.overlays,j),!0;for(var e in j.baselayers)i(a[e])&&!a[e].doRefresh||(b.hasLayer(j.baselayers[e])&&b.removeLayer(j.baselayers[e]),delete j.baselayers[e],a[e]&&a[e].doRefresh&&(a[e].doRefresh=!1));for(var f in a)if(i(j.baselayers[f]))a[f].top!==!0||b.hasLayer(j.baselayers[f])?a[f].top===!1&&b.hasLayer(j.baselayers[f])&&b.removeLayer(j.baselayers[f]):n(b,j.baselayers[f]);else{var g=m(a[f]);i(g)&&(j.baselayers[f]=g,a[f].top===!0&&n(b,j.baselayers[f]))}var h=!1;for(var k in j.baselayers)if(b.hasLayer(j.baselayers[k])){h=!0;break}!h&&Object.keys(j.baselayers).length>0&&n(b,j.baselayers[Object.keys(j.baselayers)[0]]),q=p(b,d,q,a,l.overlays,j)},!0),k.$watch("layers.overlays",function(a,c){if(angular.equals(a,c))return q=p(b,d,q,l.baselayers,a,j),!0;for(var e in j.overlays)if(!i(a[e])||a[e].doRefresh){if(b.hasLayer(j.overlays[e])){var f=i(a[e])?a[e].layerOptions:null;o(b,j.overlays[e],f)}delete j.overlays[e],a[e]&&a[e].doRefresh&&(a[e].doRefresh=!1)}for(var g in a){if(i(j.overlays[g]))a[g].visible&&!b.hasLayer(j.overlays[g])?n(b,j.overlays[g]):a[g].visible===!1&&b.hasLayer(j.overlays[g])&&o(b,j.overlays[g],a[g].layerOptions);else{var h=m(a[g]);if(!i(h))continue;j.overlays[g]=h,a[g].visible===!0&&n(b,j.overlays[g])}a[g].visible&&b._loaded&&a[g].data&&"heatmap"===a[g].type&&(j.overlays[g].setData(a[g].data),j.overlays[g].update())}q=p(b,d,q,l.baselayers,a,j)},!0)})}}}]),angular.module("leaflet-directive").directive("legend",["$log","$http","leafletHelpers","leafletLegendHelpers",function(a,b,c,d){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,f,g,h){var i,j,k,l,m=c.isArray,n=c.isDefined,o=c.isFunction,p=h.getLeafletScope(),q=p.legend;p.$watch("legend",function(a){n(a)&&(i=a.legendClass?a.legendClass:"legend",j=a.position||"bottomright",l=a.type||"arcgis")},!0),h.getMap().then(function(c){p.$watch("legend",function(b){return n(b)?n(b.url)||"arcgis"!==l||m(b.colors)&&m(b.labels)&&b.colors.length===b.labels.length?n(b.url)?void a.info("[AngularJS - Leaflet] loading legend service."):(n(k)&&(k.removeFrom(c),k=null),k=L.control({position:j}),"arcgis"===l&&(k.onAdd=d.getOnAddArrayLegend(b,i)),void k.addTo(c)):void a.warn("[AngularJS - Leaflet] legend.colors and legend.labels must be set."):void(n(k)&&(k.removeFrom(c),k=null))}),p.$watch("legend.url",function(e){n(e)&&b.get(e).success(function(a){n(k)?d.updateLegend(k.getContainer(),a,l,e):(k=L.control({position:j}),k.onAdd=d.getOnAddLegend(a,i,l,e),k.addTo(c)),n(q.loadedData)&&o(q.loadedData)&&q.loadedData()}).error(function(){a.warn("[AngularJS - Leaflet] legend.url not loaded.")})})})}}}]),angular.module("leaflet-directive").directive("markers",["$log","$rootScope","$q","leafletData","leafletHelpers","leafletMapDefaults","leafletMarkersHelpers","leafletMarkerEvents","leafletIterators","leafletWatchHelpers","leafletDirectiveControlsHelpers",function(a,b,c,d,e,f,g,h,i,j,k){var l=e.isDefined,m=e.errorHeader,n=e,o=e.isString,p=g.addMarkerWatcher,q=g.updateMarker,r=g.listenMarkerEvents,s=g.addMarkerToGroup,t=g.createMarker,u=g.deleteMarker,v=i,w=e.watchOptions,x=j.maybeWatch,y=k.extend,z=function(a,b,c){if(Object.keys(a).length){if(c&&o(c)){if(!a[c]||!Object.keys(a[c]).length)return;return a[c][b]}return a[b]}},A=function(a,b,c,d){return d&&o(d)?(l(b[d])||(b[d]={}),b[d][c]=a):b[c]=a,a},B=function(b,c,d,e,f,g){if(!o(b))return a.error(m+" A layername must be a string"),!1;if(!l(c))return a.error(m+" You must add layers to the directive if the markers are going to use this functionality."),!1;if(!l(c.overlays)||!l(c.overlays[b]))return a.error(m+' A marker can only be added to a layer of type "group"'),!1;var h=c.overlays[b];return h instanceof L.LayerGroup||h instanceof L.FeatureGroup?(h.addLayer(e),!f&&g.hasLayer(e)&&d.focus===!0&&e.openPopup(),!0):(a.error(m+' Adding a marker to an overlay needs a overlay of the type "group" or "featureGroup"'),!1)},C=function(b,c,d,e,f,g,i,j,k,o){for(var u in c)if(!o[u])if(u.search("-")===-1){var v=n.copy(c[u]),w=n.getObjectDotPath(k?[k,u]:[u]),x=z(g,u,k);if(l(x)){var y=l(y)?d[u]:void 0;q(v,y,x,w,i,f,e)}else{var C=t(v),D=(v?v.layer:void 0)||k;if(!l(C)){a.error(m+" Received invalid data on the marker "+u+".");continue}if(A(C,g,u,k),l(v.message)&&C.bindPopup(v.message,v.popupOptions),l(v.group)){var E=l(v.groupOption)?v.groupOption:null;s(C,v.group,E,e)}if(n.LabelPlugin.isLoaded()&&l(v.label)&&l(v.label.message)&&C.bindLabel(v.label.message,v.label.options),l(v)&&(l(v.layer)||l(k))){var F=B(D,f,v,C,j.individual.doWatch,e);if(!F)continue}else l(v.group)||(e.addLayer(C),j.individual.doWatch||v.focus!==!0||C.openPopup());j.individual.doWatch&&p(C,w,i,f,e,j.individual.isDeep),r(C,v,i,j.individual.doWatch,e),h.bindEvents(b,C,w,v,i,D)}}else a.error('The marker can\'t use a "-" on his key name: "'+u+'".')},D=function(b,c,d,e,f){var g,h,i=!1,j=!1,k=l(c);for(var o in d)i||(a.debug(m+"[markers] destroy: "),i=!0),k&&(h=b[o],g=c[o],j=angular.equals(h,g)&&e),l(b)&&Object.keys(b).length&&l(b[o])&&Object.keys(b[o]).length&&!j||f&&n.isFunction(f)&&f(h,g,o)},E=function(b,c,d,e,f){D(b,c,d,!1,function(b,c,g){a.debug(m+"[marker] is deleting marker: "+g),u(d[g],e,f),delete d[g]})},F=function(b,c,d){var e={};return D(b,c,d,!0,function(b,c,d){a.debug(m+"[marker] is already rendered, marker: "+d),e[d]=b}),e};return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(a,b,e,f){var g=f[0],h=g.getLeafletScope();g.getMap().then(function(a){var b,g={};b=l(f[1])?f[1].getLayers:function(){var a=c.defer();return a.resolve(),a.promise};var i=h.markersWatchOptions||w;l(e.watchMarkers)&&(i.doWatch=i.individual.doWatch=!l(e.watchMarkers)||n.isTruthy(e.watchMarkers));var j=l(e.markersNested)&&n.isTruthy(e.markersNested);b().then(function(b){var c=function(c,d){return j?void v.each(c,function(c,e){var f=l(f)?d[e]:void 0;E(c,f,g[e],a,b)}):void E(c,d,g,a,b)},f=function(d,f){c(d,f);var k=null;return j?void v.each(d,function(c,j){var m=l(m)?f[j]:void 0;k=F(d[j],m,g[j]),C(e.id,c,f,a,b,g,h,i,j,k)}):(k=F(d,f,g),void C(e.id,d,f,a,b,g,h,i,void 0,k))};y(e.id,"markers",f,c),d.setMarkers(g,e.id),x(h,"markers",i,function(a,b){f(a,b)})})})}}}]),angular.module("leaflet-directive").directive("maxbounds",["$log","leafletMapDefaults","leafletBoundsHelpers","leafletHelpers",function(a,b,c,d){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(a,b,e,f){var g=f.getLeafletScope(),h=c.isValidBounds,i=d.isNumber;f.getMap().then(function(a){g.$watch("maxbounds",function(b){if(!h(b))return void a.setMaxBounds();var d=c.createLeafletBounds(b);i(b.pad)&&(d=d.pad(b.pad)),a.setMaxBounds(d),e.center||e.lfCenter||a.fitBounds(d)})})}}}]),angular.module("leaflet-directive").directive("paths",["$log","$q","leafletData","leafletMapDefaults","leafletHelpers","leafletPathsHelpers","leafletPathEvents",function(a,b,c,d,e,f,g){return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(h,i,j,k){var l=k[0],m=e.isDefined,n=e.isString,o=l.getLeafletScope(),p=o.paths,q=f.createPath,r=g.bindPathEvents,s=f.setPathOptions;l.getMap().then(function(f){var g,h=d.getDefaults(j.id);g=m(k[1])?k[1].getLayers:function(){var a=b.defer();return a.resolve(),a.promise},m(p)&&g().then(function(b){var d={};c.setPaths(d,j.id);var g=!m(j.watchPaths)||"true"===j.watchPaths,i=function(a,c){var d=o.$watch('paths["'+c+'"]',function(c,e){if(!m(c)){if(m(e.layer))for(var g in b.overlays){var h=b.overlays[g];h.removeLayer(a)}return f.removeLayer(a),void d()}s(a,c.type,c)},!0)};o.$watchCollection("paths",function(c){for(var k in d)m(c[k])||(f.removeLayer(d[k]),delete d[k]);for(var l in c)if(0!==l.search("\\$"))if(l.search("-")===-1){if(!m(d[l])){var p=c[l],t=q(l,c[l],h);if(m(t)&&m(p.message)&&t.bindPopup(p.message,p.popupOptions),e.LabelPlugin.isLoaded()&&m(p.label)&&m(p.label.message)&&t.bindLabel(p.label.message,p.label.options),m(p)&&m(p.layer)){if(!n(p.layer)){a.error("[AngularJS - Leaflet] A layername must be a string");continue}if(!m(b)){a.error("[AngularJS - Leaflet] You must add layers to the directive if the markers are going to use this functionality.");continue}if(!m(b.overlays)||!m(b.overlays[p.layer])){a.error('[AngularJS - Leaflet] A path can only be added to a layer of type "group"');continue}var u=b.overlays[p.layer];if(!(u instanceof L.LayerGroup||u instanceof L.FeatureGroup)){a.error('[AngularJS - Leaflet] Adding a path to an overlay needs a overlay of the type "group" or "featureGroup"');continue}d[l]=t,u.addLayer(t),g?i(t,l):s(t,p.type,p)}else m(t)&&(d[l]=t,f.addLayer(t),g?i(t,l):s(t,p.type,p));r(j.id,t,l,p,o)}}else a.error('[AngularJS - Leaflet] The path name "'+l+'" is not valid. It must not include "-" and a number.')})})})}}}]),angular.module("leaflet-directive").directive("tiles",["$log","leafletData","leafletMapDefaults","leafletHelpers",function(a,b,c,d){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(e,f,g,h){var i=d.isDefined,j=h.getLeafletScope(),k=j.tiles;return i(k)&&i(k.url)?void h.getMap().then(function(a){var d,e=c.getDefaults(g.id);j.$watch("tiles",function(c,f){var h=e.tileLayerOptions,j=e.tileLayer;return!i(c.url)&&i(d)?void a.removeLayer(d):i(d)?!i(c.url)||!i(c.options)||c.type===f.type&&angular.equals(c.options,h)?void(i(c.url)&&d.setUrl(c.url)):(a.removeLayer(d),h=e.tileLayerOptions,angular.copy(c.options,h),j=c.url,d="wms"===c.type?L.tileLayer.wms(j,h):L.tileLayer(j,h),d.addTo(a),void b.setTiles(d,g.id)):(i(c.options)&&angular.copy(c.options,h),i(c.url)&&(j=c.url),d="wms"===c.type?L.tileLayer.wms(j,h):L.tileLayer(j,h),d.addTo(a),void b.setTiles(d,g.id))},!0)}):void a.warn("[AngularJS - Leaflet] The 'tiles' definition doesn't have the 'url' property.")}}}]),["markers","geojson"].forEach(function(a){angular.module("leaflet-directive").directive(a+"WatchOptions",["$log","$rootScope","$q","leafletData","leafletHelpers",function(b,c,d,e,f){var g=f.isDefined,h=f.errorHeader,i=f.isObject,j=f.watchOptions;return{restrict:"A",scope:!1,replace:!1,require:["leaflet"],link:function(c,d,e,f){var k=f[0],l=k.getLeafletScope();k.getMap().then(function(){g(c[a+"WatchOptions"])&&(i(c[a+"WatchOptions"])?angular.extend(j,c[a+"WatchOptions"]):b.error(h+"["+a+"WatchOptions] is not an object"),l[a+"WatchOptions"]=j)})}}}])}),angular.module("leaflet-directive").factory("LeafletEventsHelpersFactory",["$rootScope","$q","$log","leafletHelpers",function(a,b,c,d){var e=d.safeApply,f=d.isDefined,g=d.isObject,h=d.isArray,i=d.errorHeader,j=function(a,b){this.rootBroadcastName=a,c.debug("LeafletEventsHelpersFactory: lObjectType: "+b+"rootBroadcastName: "+a),this.lObjectType=b};return j.prototype.getAvailableEvents=function(){return[]},j.prototype.genDispatchEvent=function(a,b,d,e,f,g,h,i,j){var k=this;return a=a||"",a&&(a="."+a),function(l){var m=k.rootBroadcastName+a+"."+b;c.debug(m),k.fire(e,m,d,l,l.target||f,h,g,i,j)}},j.prototype.fire=function(b,c,d,g,h,i,j,k){e(b,function(){var e={leafletEvent:g,leafletObject:h,modelName:j,model:i};f(k)&&angular.extend(e,{layerName:k}),"emit"===d?b.$emit(c,e):a.$broadcast(c,e)})},j.prototype.bindEvents=function(a,b,d,e,j,k,l){var m=[],n="emit",o=this;if(f(j.eventBroadcast))if(g(j.eventBroadcast))if(f(j.eventBroadcast[o.lObjectType]))if(g(j.eventBroadcast[o.lObjectType])){f(j.eventBroadcast[this.lObjectType].logic)&&"emit"!==j.eventBroadcast[o.lObjectType].logic&&"broadcast"!==j.eventBroadcast[o.lObjectType].logic&&c.warn(i+"Available event propagation logic are: 'emit' or 'broadcast'.");var p=!1,q=!1;f(j.eventBroadcast[o.lObjectType].enable)&&h(j.eventBroadcast[o.lObjectType].enable)&&(p=!0),f(j.eventBroadcast[o.lObjectType].disable)&&h(j.eventBroadcast[o.lObjectType].disable)&&(q=!0),p&&q?c.warn(i+"can not enable and disable events at the same time"):p||q?p?j.eventBroadcast[this.lObjectType].enable.forEach(function(a){m.indexOf(a)!==-1?c.warn(i+"This event "+a+" is already enabled"):o.getAvailableEvents().indexOf(a)===-1?c.warn(i+"This event "+a+" does not exist"):m.push(a)}):(m=this.getAvailableEvents(),j.eventBroadcast[o.lObjectType].disable.forEach(function(a){var b=m.indexOf(a);b===-1?c.warn(i+"This event "+a+" does not exist or has been already disabled"):m.splice(b,1)})):c.warn(i+"must enable or disable events")}else c.warn(i+"event-broadcast."+[o.lObjectType]+" must be an object check your model.");else m=this.getAvailableEvents();else c.error(i+"event-broadcast must be an object check your model.");else m=this.getAvailableEvents();return m.forEach(function(c){b.on(c,o.genDispatchEvent(a,c,n,j,b,d,e,k,l))}),n},j}]).service("leafletEventsHelpers",["LeafletEventsHelpersFactory",function(a){return new a}]),angular.module("leaflet-directive").factory("leafletGeoJsonEvents",["$rootScope","$q","$log","leafletHelpers","LeafletEventsHelpersFactory","leafletData",function(a,b,c,d,e,f){var g=d.safeApply,h=e,i=function(){h.call(this,"leafletDirectiveGeoJson","geojson")};return i.prototype=new h,i.prototype.genDispatchEvent=function(b,c,d,e,i,j,k,l,m){var n=h.prototype.genDispatchEvent.call(this,b,c,d,e,i,j,k,l),o=this;return function(b){"mouseout"===c&&(m.resetStyleOnMouseout&&f.getGeoJSON(m.mapId).then(function(a){var c=l?a[l]:a;c.resetStyle(b.target)}),g(e,function(){a.$broadcast(o.rootBroadcastName+".mouseout",b)})),n(b)}},i.prototype.getAvailableEvents=function(){return["click","dblclick","mouseover","mouseout"]},new i}]),angular.module("leaflet-directive").factory("leafletLabelEvents",["$rootScope","$q","$log","leafletHelpers","LeafletEventsHelpersFactory",function(a,b,c,d,e){var f=d,g=e,h=function(){g.call(this,"leafletDirectiveLabel","markers")};return h.prototype=new g,h.prototype.genDispatchEvent=function(a,b,c,d,e,f,h,i){var j=f.replace("markers.","");return g.prototype.genDispatchEvent.call(this,a,b,c,d,e,j,h,i)},h.prototype.getAvailableEvents=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu"]},h.prototype.genEvents=function(a,b,c,d,e,g,h,i){var j=this,k=this.getAvailableEvents(),l=f.getObjectArrayPath("markers."+g);k.forEach(function(b){e.label.on(b,j.genDispatchEvent(a,b,c,d,e.label,l,h,i))})},h.prototype.bindEvents=function(){},new h}]),angular.module("leaflet-directive").factory("leafletMapEvents",["$rootScope","$q","$log","leafletHelpers","leafletEventsHelpers","leafletIterators",function(a,b,c,d,e,f){var g=d.isDefined,h=e.fire,i=function(){return["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomanim","zoomend","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose","draw:created","draw:edited","draw:deleted","draw:drawstart","draw:drawstop","draw:editstart","draw:editstop","draw:deletestart","draw:deletestop"]},j=function(a,b,d,e){return e&&(e+="."),function(f){var g="leafletDirectiveMap."+e+b;c.debug(g),h(a,g,d,f,f.target,a)}},k=function(a){a.$broadcast("boundsChanged")},l=function(a,b,c,d){if(g(c.urlHashCenter)){var e=b.getCenter(),f=e.lat.toFixed(4)+":"+e.lng.toFixed(4)+":"+b.getZoom();g(d.c)&&d.c===f||a.$emit("centerUrlHash",f)}},m=function(a,b,c,d,e){f.each(b,function(b){var f={};f[c]=b,a.on(b,j(d,b,e,a._container.id||""),f)})};return{getAvailableMapEvents:i,genDispatchMapEvent:j,notifyCenterChangedToBounds:k,notifyCenterUrlHashChanged:l,addEvents:m}}]),angular.module("leaflet-directive").factory("leafletMarkerEvents",["$rootScope","$q","$log","leafletHelpers","LeafletEventsHelpersFactory","leafletLabelEvents",function(a,b,c,d,e,f){var g=d.safeApply,h=d.isDefined,i=d,j=f,k=e,l=function(){k.call(this,"leafletDirectiveMarker","markers")};return l.prototype=new k,l.prototype.genDispatchEvent=function(b,c,d,e,f,h,i,j){var l=k.prototype.genDispatchEvent.call(this,b,c,d,e,f,h,i,j);return function(b){"click"===c?g(e,function(){a.$broadcast("leafletDirectiveMarkersClick",h)}):"dragend"===c&&(g(e,function(){i.lat=f.getLatLng().lat,i.lng=f.getLatLng().lng}),i.message&&i.focus===!0&&f.openPopup()),l(b)}},l.prototype.getAvailableEvents=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","dragstart","drag","dragend","move","remove","popupopen","popupclose","touchend","touchstart","touchmove","touchcancel","touchleave"]},l.prototype.bindEvents=function(a,b,c,d,e,f){var g=k.prototype.bindEvents.call(this,a,b,c,d,e,f);i.LabelPlugin.isLoaded()&&h(b.label)&&j.genEvents(a,c,g,e,b,d,f)},new l}]),angular.module("leaflet-directive").factory("leafletPathEvents",["$rootScope","$q","$log","leafletHelpers","leafletLabelEvents","leafletEventsHelpers",function(a,b,c,d,e,f){var g=d.isDefined,h=d.isObject,i=d,j=d.errorHeader,k=e,l=f.fire,m=function(a,b,d,e,f,g,h,i){return a=a||"",a&&(a="."+a),function(j){var k="leafletDirectivePath"+a+"."+b;c.debug(k),l(e,k,d,j,j.target||f,h,g,i)}},n=function(a,b,d,e,f){var l,n,p=[],q="broadcast";if(g(f.eventBroadcast))if(h(f.eventBroadcast))if(g(f.eventBroadcast.path))if(h(f.eventBroadcast.paths))c.warn(j+"event-broadcast.path must be an object check your model.");else{void 0!==f.eventBroadcast.path.logic&&null!==f.eventBroadcast.path.logic&&("emit"!==f.eventBroadcast.path.logic&&"broadcast"!==f.eventBroadcast.path.logic?c.warn(j+"Available event propagation logic are: 'emit' or 'broadcast'."):"emit"===f.eventBroadcast.path.logic&&(q="emit"));var r=!1,s=!1;if(void 0!==f.eventBroadcast.path.enable&&null!==f.eventBroadcast.path.enable&&"object"==typeof f.eventBroadcast.path.enable&&(r=!0),void 0!==f.eventBroadcast.path.disable&&null!==f.eventBroadcast.path.disable&&"object"==typeof f.eventBroadcast.path.disable&&(s=!0),r&&s)c.warn(j+"can not enable and disable events at the same time");else if(r||s)if(r)for(l=0;l<f.eventBroadcast.path.enable.length;l++)n=f.eventBroadcast.path.enable[l],p.indexOf(n)!==-1?c.warn(j+"This event "+n+" is already enabled"):o().indexOf(n)===-1?c.warn(j+"This event "+n+" does not exist"):p.push(n);else for(p=o(),l=0;l<f.eventBroadcast.path.disable.length;l++){n=f.eventBroadcast.path.disable[l];var t=p.indexOf(n);t===-1?c.warn(j+"This event "+n+" does not exist or has been already disabled"):p.splice(t,1)}else c.warn(j+"must enable or disable events")}else p=o();else c.error(j+"event-broadcast must be an object check your model.");else p=o();for(l=0;l<p.length;l++)n=p[l],b.on(n,m(a,n,q,f,p,d));i.LabelPlugin.isLoaded()&&g(b.label)&&k.genEvents(a,d,q,f,b,e)},o=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","add","remove","popupopen","popupclose"]};return{getAvailablePathEvents:o,bindPathEvents:n}}])}(angular),function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&f<g;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&f<e;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){
return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&f<h;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void(this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(d<2||null==c)return c;for(var e=1;e<d;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;i<h;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&b<=y};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;g<e;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;if(d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),void 0!==d&&d!==-1)return a[d]},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d<f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e<g||e===1/0&&f===1/0)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;f<d;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:s.initial(a,a.length-b)},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b))},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);g<h;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;j<k;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);g<h;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);d<e;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;g<c&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;d<b;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);f<g;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;g<e;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(d<=1)throw new Error("bindAll must be passed function names");for(b=1;b<d;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;j<b&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;h<f;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;f<g;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;h<i;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;f<d;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a||(A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length)},s.isElement=function(a){return!(!a||1!==a.nodeType)},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,s)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}.call(this),function(a,b){"use strict";function c(a){return function(b){return b[a]}}var d=a.module("angular-underscore",[]),e=a.module("angular-underscore/utils",[]),f=a.module("angular-underscore/filters",[]);b._=b,b.each(["min","max","sortedIndex"],function(a){b[a]=b.wrap(b[a],function(a){var d=b.toArray(arguments).slice(1);return b.isString(d[2])?d[2]=c(d[2]):b.isString(d[1])&&(d[1]=c(d[1])),a.apply(b,d)})}),a.injector(["ng"]).invoke(["$filter",function(a){b.filter=b.select=b.wrap(a("filter"),function(a,c,d,e){return b.isArray(c)||(c=b.toArray(c)),a(c,d,e)}),b.reject=function(a,c){if(b.isString(c))return b.filter(a,"!"+c);var d=b.bind(b.difference,b,a);return d(b.filter(a,c))}}]),b.each(b.methods(b),function(c){function f(a){a[c]=b.bind(b[c],b)}b.each([d,e,a.module("angular-underscore/utils/"+c,[])],function(a){a.run(["$rootScope",f])})});var g=[["map","collect"],["reduce","inject","foldl"],["reduceRight","foldr"],["find","detect"],["filter","select"],"where","findWhere","reject","invoke","pluck","max","min","sortBy","groupBy","indexBy","countBy","shuffle","sample","toArray","size",["first","head","take"],"initial","last",["rest","tail","drop"],"compact","flatten","without","partition","union","intersection","difference",["uniq","unique"],"zip","object","indexOf","lastIndexOf","sortedIndex","keys","values","pairs","invert",["functions","methods"],"pick","omit","tap","identity","uniqueId","escape","unescape","result","template"];b.each(g,function(c){b.isArray(c)||(c=[c]);var e=b.bind(b[c[0]],b),g=function(){return e};b.each(c,function(c){b.each([d,f,a.module("angular-underscore/filters/"+c,[])],function(a){a.filter(c,g)})})})}(angular,_),function(){var a=angular.module("restangular",[]);a.provider("Restangular",function(){var a={};a.init=function(a,b){function c(a,b,c,d){var e={};return _.each(_.keys(d),function(f){var g=d[f];g.params=_.extend({},g.params,a.defaultRequestParams[g.method.toLowerCase()]),_.isEmpty(g.params)&&delete g.params,a.isSafe(g.method)?e[f]=function(){return b(_.extend(g,{url:c}))}:e[f]=function(a){return b(_.extend(g,{url:c,data:a}))}}),e}a.configuration=b;var d=["get","head","options","trace","getlist"];b.isSafe=function(a){return _.includes(d,a.toLowerCase())};var e=/^https?:\/\//i;b.isAbsoluteUrl=function(a){return _.isUndefined(b.absoluteUrl)||_.isNull(b.absoluteUrl)?a&&e.test(a):b.absoluteUrl},b.absoluteUrl=!!_.isUndefined(b.absoluteUrl)||b.absoluteUrl,a.setSelfLinkAbsoluteUrl=function(a){b.absoluteUrl=a},b.baseUrl=_.isUndefined(b.baseUrl)?"":b.baseUrl,a.setBaseUrl=function(a){return b.baseUrl=/\/$/.test(a)?a.substring(0,a.length-1):a,this},b.extraFields=b.extraFields||[],a.setExtraFields=function(a){return b.extraFields=a,this},b.defaultHttpFields=b.defaultHttpFields||{},a.setDefaultHttpFields=function(a){return b.defaultHttpFields=a,this},b.withHttpValues=function(a,c){return _.defaults(c,a,b.defaultHttpFields)},b.encodeIds=!!_.isUndefined(b.encodeIds)||b.encodeIds,a.setEncodeIds=function(a){b.encodeIds=a},b.defaultRequestParams=b.defaultRequestParams||{get:{},post:{},put:{},remove:{},common:{}},a.setDefaultRequestParams=function(a,c){var d=[],e=c||a;return _.isUndefined(c)?d.push("common"):_.isArray(a)?d=a:d.push(a),_.each(d,function(a){b.defaultRequestParams[a]=e}),this},a.requestParams=b.defaultRequestParams,b.defaultHeaders=b.defaultHeaders||{},a.setDefaultHeaders=function(c){return b.defaultHeaders=c,a.defaultHeaders=b.defaultHeaders,this},a.defaultHeaders=b.defaultHeaders,b.methodOverriders=b.methodOverriders||[],a.setMethodOverriders=function(a){var c=_.extend([],a);return b.isOverridenMethod("delete",c)&&c.push("remove"),b.methodOverriders=c,this},b.jsonp=!_.isUndefined(b.jsonp)&&b.jsonp,a.setJsonp=function(a){b.jsonp=a},b.isOverridenMethod=function(a,c){var d=c||b.methodOverriders;return!_.isUndefined(_.find(d,function(b){return b.toLowerCase()===a.toLowerCase()}))},b.urlCreator=b.urlCreator||"path",a.setUrlCreator=function(a){if(!_.has(b.urlCreatorFactory,a))throw new Error("URL Path selected isn't valid");return b.urlCreator=a,this},b.restangularFields=b.restangularFields||{id:"id",route:"route",parentResource:"parentResource",restangularCollection:"restangularCollection",cannonicalId:"__cannonicalId",etag:"restangularEtag",selfLink:"href",get:"get",getList:"getList",put:"put",post:"post",remove:"remove",head:"head",trace:"trace",options:"options",patch:"patch",getRestangularUrl:"getRestangularUrl",getRequestedUrl:"getRequestedUrl",putElement:"putElement",addRestangularMethod:"addRestangularMethod",getParentList:"getParentList",clone:"clone",ids:"ids",httpConfig:"_$httpConfig",reqParams:"reqParams",one:"one",all:"all",several:"several",oneUrl:"oneUrl",allUrl:"allUrl",customPUT:"customPUT",customPOST:"customPOST",customDELETE:"customDELETE",customGET:"customGET",customGETLIST:"customGETLIST",customOperation:"customOperation",doPUT:"doPUT",doPOST:"doPOST",doDELETE:"doDELETE",doGET:"doGET",doGETLIST:"doGETLIST",fromServer:"fromServer",withConfig:"withConfig",withHttpConfig:"withHttpConfig",singleOne:"singleOne",plain:"plain",save:"save",restangularized:"restangularized"},a.setRestangularFields=function(a){return b.restangularFields=_.extend(b.restangularFields,a),this},b.isRestangularized=function(a){return!!a[b.restangularFields.restangularized]},b.setFieldToElem=function(a,b,c){var d=a.split("."),e=b;return _.each(_.initial(d),function(a){e[a]={},e=e[a]}),e[_.last(d)]=c,this},b.getFieldFromElem=function(a,b){var c=a.split("."),d=b;return _.each(c,function(a){d&&(d=d[a])}),angular.copy(d)},b.setIdToElem=function(a,c){return b.setFieldToElem(b.restangularFields.id,a,c),this},b.getIdFromElem=function(a){return b.getFieldFromElem(b.restangularFields.id,a)},b.isValidId=function(a){return""!==a&&!_.isUndefined(a)&&!_.isNull(a)},b.setUrlToElem=function(a,c){return b.setFieldToElem(b.restangularFields.selfLink,a,c),this},b.getUrlFromElem=function(a){return b.getFieldFromElem(b.restangularFields.selfLink,a)},b.useCannonicalId=!_.isUndefined(b.useCannonicalId)&&b.useCannonicalId,a.setUseCannonicalId=function(a){return b.useCannonicalId=a,this},b.getCannonicalIdFromElem=function(a){var c=a[b.restangularFields.cannonicalId],d=b.isValidId(c)?c:b.getIdFromElem(a);return d},b.responseInterceptors=b.responseInterceptors||[],b.defaultResponseInterceptor=function(a){return a},b.responseExtractor=function(a,c,d,e,f,g){var h=angular.copy(b.responseInterceptors);h.push(b.defaultResponseInterceptor);var i=a;return _.each(h,function(a){i=a(i,c,d,e,f,g)}),i},a.addResponseInterceptor=function(a){return b.responseInterceptors.push(a),this},b.errorInterceptors=b.errorInterceptors||[],a.addErrorInterceptor=function(a){return b.errorInterceptors.push(a),this},a.setResponseInterceptor=a.addResponseInterceptor,a.setResponseExtractor=a.addResponseInterceptor,a.setErrorInterceptor=a.addErrorInterceptor,b.requestInterceptors=b.requestInterceptors||[],b.defaultInterceptor=function(a,b,c,d,e,f,g){return{element:a,headers:e,params:f,httpConfig:g}},b.fullRequestInterceptor=function(a,c,d,e,f,g,h){var i=angular.copy(b.requestInterceptors),j=b.defaultInterceptor(a,c,d,e,f,g,h);return _.reduce(i,function(a,b){return _.extend(a,b(a.element,c,d,e,a.headers,a.params,a.httpConfig))},j)},a.addRequestInterceptor=function(a){return b.requestInterceptors.push(function(b,c,d,e,f,g,h){return{headers:f,params:g,element:a(b,c,d,e),httpConfig:h}}),this},a.setRequestInterceptor=a.addRequestInterceptor,a.addFullRequestInterceptor=function(a){return b.requestInterceptors.push(a),this},a.setFullRequestInterceptor=a.addFullRequestInterceptor,b.onBeforeElemRestangularized=b.onBeforeElemRestangularized||function(a){return a},a.setOnBeforeElemRestangularized=function(a){return b.onBeforeElemRestangularized=a,this},a.setRestangularizePromiseInterceptor=function(a){return b.restangularizePromiseInterceptor=a,this},b.onElemRestangularized=b.onElemRestangularized||function(a){return a},a.setOnElemRestangularized=function(a){return b.onElemRestangularized=a,this},b.shouldSaveParent=b.shouldSaveParent||function(){return!0},a.setParentless=function(a){return _.isArray(a)?b.shouldSaveParent=function(b){return!_.includes(a,b)}:_.isBoolean(a)&&(b.shouldSaveParent=function(){return!a}),this},b.suffix=_.isUndefined(b.suffix)?null:b.suffix,a.setRequestSuffix=function(a){return b.suffix=a,this},b.transformers=b.transformers||{},a.addElementTransformer=function(c,d,e){var f=null,g=null;2===arguments.length?g=d:(g=e,f=d);var h=b.transformers[c];return h||(h=b.transformers[c]=[]),h.push(function(a,b){return _.isNull(f)||a===f?g(b):b}),a},a.extendCollection=function(b,c){return a.addElementTransformer(b,!0,c)},a.extendModel=function(b,c){return a.addElementTransformer(b,!1,c)},b.transformElem=function(a,c,d,e,f){if(!f&&!b.transformLocalElements&&!a[b.restangularFields.fromServer])return a;var g=b.transformers[d],h=a;return g&&_.each(g,function(a){h=a(c,h)}),b.onElemRestangularized(h,c,d,e)},b.transformLocalElements=!_.isUndefined(b.transformLocalElements)&&b.transformLocalElements,a.setTransformOnlyServerElements=function(a){b.transformLocalElements=!a},b.fullResponse=!_.isUndefined(b.fullResponse)&&b.fullResponse,a.setFullResponse=function(a){return b.fullResponse=a,this},b.urlCreatorFactory={};var f=function(){};f.prototype.setConfig=function(a){return this.config=a,this},f.prototype.parentsArray=function(a){for(var b=[];a;)b.push(a),a=a[this.config.restangularFields.parentResource];return b.reverse()},f.prototype.resource=function(a,d,e,f,g,h,i,j){var k=_.defaults(g||{},this.config.defaultRequestParams.common),l=_.defaults(f||{},this.config.defaultHeaders);i&&(b.isSafe(j)?l["If-None-Match"]=i:l["If-Match"]=i);var m=this.base(a);if(h){var n="";/\/$/.test(m)||(n+="/"),n+=h,m+=n}return this.config.suffix&&m.indexOf(this.config.suffix,m.length-this.config.suffix.length)===-1&&!this.config.getUrlFromElem(a)&&(m+=this.config.suffix),a[this.config.restangularFields.httpConfig]=void 0,c(this.config,d,m,{getList:this.config.withHttpValues(e,{method:"GET",params:k,headers:l}),get:this.config.withHttpValues(e,{method:"GET",params:k,headers:l}),jsonp:this.config.withHttpValues(e,{method:"jsonp",params:k,headers:l}),put:this.config.withHttpValues(e,{method:"PUT",params:k,headers:l}),post:this.config.withHttpValues(e,{method:"POST",params:k,headers:l}),remove:this.config.withHttpValues(e,{method:"DELETE",params:k,headers:l}),head:this.config.withHttpValues(e,{method:"HEAD",params:k,headers:l}),trace:this.config.withHttpValues(e,{method:"TRACE",params:k,headers:l}),options:this.config.withHttpValues(e,{method:"OPTIONS",params:k,headers:l}),patch:this.config.withHttpValues(e,{method:"PATCH",params:k,headers:l})})};var g=function(){};g.prototype=new f,g.prototype.normalizeUrl=function(a){var b=/(http[s]?:\/\/)?(.*)?/.exec(a);return b[2]=b[2].replace(/[\\\/]+/g,"/"),"undefined"!=typeof b[1]?b[1]+b[2]:b[2]},g.prototype.base=function(a){var c=this;return _.reduce(this.parentsArray(a),function(a,d){var e,f=c.config.getUrlFromElem(d);if(f){if(c.config.isAbsoluteUrl(f))return f;e=f}else if(e=d[c.config.restangularFields.route],d[c.config.restangularFields.restangularCollection]){var g=d[c.config.restangularFields.ids];g&&(e+="/"+g.join(","))}else{var h;h=c.config.useCannonicalId?c.config.getCannonicalIdFromElem(d):c.config.getIdFromElem(d),b.isValidId(h)&&!d.singleOne&&(e+="/"+(c.config.encodeIds?encodeURIComponent(h):h))}return a=a.replace(/\/$/,"")+"/"+e,c.normalizeUrl(a)},this.config.baseUrl)},g.prototype.fetchUrl=function(a,b){var c=this.base(a);return b&&(c+="/"+b),c},g.prototype.fetchRequestedUrl=function(a,c){function d(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}function e(a,b,c){for(var e=d(a),f=0;f<e.length;f++)b.call(c,a[e[f]],e[f]);return e}function f(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}var g=this.fetchUrl(a,c),h=a[b.restangularFields.reqParams];if(!h)return g+(this.config.suffix||"");var i=[];return e(h,function(a,b){null!==a&&void 0!==a&&(angular.isArray(a)||(a=[a]),angular.forEach(a,function(a){angular.isObject(a)&&(a=angular.toJson(a)),i.push(f(b)+"="+f(a))}))}),g+(this.config.suffix||"")+(g.indexOf("?")===-1?"?":"&")+i.join("&")},b.urlCreatorFactory.path=g};var b={};a.init(this,b),this.$get=["$http","$q",function(c,d){function e(b){function f(a,c,d,e,f){if(c[b.restangularFields.route]=d,c[b.restangularFields.getRestangularUrl]=_.bind(P.fetchUrl,P,c),c[b.restangularFields.getRequestedUrl]=_.bind(P.fetchRequestedUrl,P,c),c[b.restangularFields.addRestangularMethod]=_.bind(L,c),c[b.restangularFields.clone]=_.bind(r,c,c),c[b.restangularFields.reqParams]=_.isEmpty(e)?null:e,c[b.restangularFields.withHttpConfig]=_.bind(z,c),c[b.restangularFields.plain]=_.bind(p,c,c),c[b.restangularFields.restangularized]=!0,c[b.restangularFields.one]=_.bind(g,c,c),c[b.restangularFields.all]=_.bind(h,c,c),c[b.restangularFields.several]=_.bind(i,c,c),c[b.restangularFields.oneUrl]=_.bind(j,c,c),c[b.restangularFields.allUrl]=_.bind(k,c,c),c[b.restangularFields.fromServer]=!!f,a&&b.shouldSaveParent(d)){var l=b.getIdFromElem(a),m=b.getUrlFromElem(a),n=_.union(_.values(_.pick(b.restangularFields,["route","singleOne","parentResource"])),b.extraFields),o=_.pick(a,n);b.isValidId(l)&&b.setIdToElem(o,l,d),b.isValidId(m)&&b.setUrlToElem(o,m,d),c[b.restangularFields.parentResource]=o}else c[b.restangularFields.parentResource]=null;return c}function g(a,c,d,e){var f;if(_.isNumber(c)||_.isNumber(a))throw f="You're creating a Restangular entity with the number ",f+="instead of the route or the parent. For example, you can't call .one(12).",new Error(f);if(_.isUndefined(c))throw f="You're creating a Restangular entity either without the path. ",f+="For example you can't call .one(). Please check if your arguments are valid.",new Error(f);var g={};return b.setIdToElem(g,d,c),b.setFieldToElem(b.restangularFields.singleOne,g,e),s(a,g,c,!1)}function h(a,b){return t(a,[],b,!1)}function i(a,c){var d=[];return d[b.restangularFields.ids]=Array.prototype.splice.call(arguments,2),t(a,d,c,!1)}function j(a,c,d){if(!c)throw new Error("Route is mandatory when creating new Restangular objects.");var e={};return b.setUrlToElem(e,d,c),s(a,e,c,!1)}function k(a,c,d){if(!c)throw new Error("Route is mandatory when creating new Restangular objects.");var e={};return b.setUrlToElem(e,d,c),t(a,e,c,!1)}function l(a,c,d){return a.call=_.bind(m,a),a.get=_.bind(n,a),a[b.restangularFields.restangularCollection]=c,c&&(a.push=_.bind(m,a,"push")),a.$object=d,b.restangularizePromiseInterceptor&&b.restangularizePromiseInterceptor(a),a}function m(a){var c=d.defer(),e=arguments,f={};return this.then(function(b){var d=Array.prototype.slice.call(e,1),g=b[a];g.apply(b,d),f=b,c.resolve(b)}),l(c.promise,this[b.restangularFields.restangularCollection],f)}function n(a){var c=d.defer(),e={};return this.then(function(b){e=b[a],c.resolve(e)}),l(c.promise,this[b.restangularFields.restangularCollection],e)}function o(a,c,d,e){return _.extend(e,d),b.fullResponse?a.resolve(_.extend(c,{data:d})):void a.resolve(d)}function p(a){if(_.isArray(a)){var c=[];return _.each(a,function(a){c.push(b.isRestangularized(a)?p(a):a)}),c}return _.omit(a,_.values(_.omit(b.restangularFields,"id")))}function q(a){a[b.restangularFields.customOperation]=_.bind(K,a),_.each(["put","post","get","delete"],function(b){_.each(["do","custom"],function(c){var d,e="delete"===b?"remove":b,f=c+b.toUpperCase();d="put"!==e&&"post"!==e?K:function(a,b,c,d,e){return _.bind(K,this)(a,c,d,e,b)},a[f]=_.bind(d,a,e)})}),a[b.restangularFields.customGETLIST]=_.bind(y,a),a[b.restangularFields.doGETLIST]=a[b.restangularFields.customGETLIST]}function r(a,c){var d=angular.copy(a,c);return s(d[b.restangularFields.parentResource],d,d[b.restangularFields.route],!0)}function s(a,c,d,e,g,h){var i=b.onBeforeElemRestangularized(c,!1,d),j=f(a,i,d,h,e);return b.useCannonicalId&&(j[b.restangularFields.cannonicalId]=b.getIdFromElem(j)),g&&(j[b.restangularFields.getParentList]=function(){return g}),j[b.restangularFields.restangularCollection]=!1,j[b.restangularFields.get]=_.bind(C,j),j[b.restangularFields.getList]=_.bind(y,j),j[b.restangularFields.put]=_.bind(E,j),j[b.restangularFields.post]=_.bind(F,j),
j[b.restangularFields.remove]=_.bind(D,j),j[b.restangularFields.head]=_.bind(G,j),j[b.restangularFields.trace]=_.bind(H,j),j[b.restangularFields.options]=_.bind(I,j),j[b.restangularFields.patch]=_.bind(J,j),j[b.restangularFields.save]=_.bind(A,j),q(j),b.transformElem(j,!1,d,O,!0)}function t(a,c,d,e,g){var h=b.onBeforeElemRestangularized(c,!0,d),i=f(a,h,d,g,e);return i[b.restangularFields.restangularCollection]=!0,i[b.restangularFields.post]=_.bind(F,i,null),i[b.restangularFields.remove]=_.bind(D,i),i[b.restangularFields.head]=_.bind(G,i),i[b.restangularFields.trace]=_.bind(H,i),i[b.restangularFields.putElement]=_.bind(w,i),i[b.restangularFields.options]=_.bind(I,i),i[b.restangularFields.patch]=_.bind(J,i),i[b.restangularFields.get]=_.bind(v,i),i[b.restangularFields.getList]=_.bind(y,i,null),q(i),b.transformElem(i,!0,d,O,!0)}function u(a,b,c){var d=t(a,b,c,!1);return _.each(d,function(b){s(a,b,c,!1)}),d}function v(a,b,c){return this.customGET(a.toString(),b,c)}function w(a,c,e){var f=this,g=this[a],h=d.defer(),i=[];return i=b.transformElem(i,!0,g[b.restangularFields.route],O),g.put(c,e).then(function(b){var c=r(f);c[a]=b,i=c,h.resolve(c)},function(a){h.reject(a)}),l(h.promise,!0,i)}function x(a,c,d,e,f,g){var h=b.responseExtractor(a,c,d,e,f,g),i=f.headers("ETag");return h&&i&&(h[b.restangularFields.etag]=i),h}function y(a,e,f){var g=this,h=d.defer(),i="getList",j=P.fetchUrl(this,a),k=a||g[b.restangularFields.route],m=b.fullRequestInterceptor(null,i,k,j,f||{},e||{},this[b.restangularFields.httpConfig]||{}),n=[];n=b.transformElem(n,!0,k,O);var p="getList";b.jsonp&&(p="jsonp");var q=function(c){var d=c.data,e=c.config.params,f=x(d,i,k,j,c,h);if((_.isUndefined(f)||""===f)&&(f=[]),!_.isArray(f))throw new Error("Response for getList SHOULD be an array and not an object or something else");var l=_.map(f,function(c){return g[b.restangularFields.restangularCollection]?s(g[b.restangularFields.parentResource],c,g[b.restangularFields.route],!0,f):s(g,c,a,!0,f)});l=_.extend(f,l),g[b.restangularFields.restangularCollection]?o(h,c,t(g[b.restangularFields.parentResource],l,g[b.restangularFields.route],!0,e),n):o(h,c,t(g,l,a,!0,e),n)};return P.resource(this,c,m.httpConfig,m.headers,m.params,a,this[b.restangularFields.etag],i)[p]().then(q,function(a){304===a.status&&g[b.restangularFields.restangularCollection]?o(h,a,g,n):_.every(b.errorInterceptors,function(b){return b(a,h,q)!==!1})&&h.reject(a)}),l(h.promise,!0,n)}function z(a){return this[b.restangularFields.httpConfig]=a,this}function A(a,c){return this[b.restangularFields.fromServer]?this[b.restangularFields.put](a,c):_.bind(B,this)("post",void 0,a,void 0,c)}function B(a,e,f,g,h){var i=this,j=d.defer(),k=f||{},m=e||this[b.restangularFields.route],n=P.fetchUrl(this,e),q=g||this,r=q[b.restangularFields.etag]||("post"!==a?this[b.restangularFields.etag]:null);_.isObject(q)&&b.isRestangularized(q)&&(q=p(q));var t=b.fullRequestInterceptor(q,a,m,n,h||{},k||{},this[b.restangularFields.httpConfig]||{}),u={};u=b.transformElem(u,!1,m,O);var v=function(c){var d=c.data,e=c.config.params,f=x(d,a,m,n,c,j);if(f){var g;"post"!==a||i[b.restangularFields.restangularCollection]?(g=s(i[b.restangularFields.parentResource],f,i[b.restangularFields.route],!0,null,e),g[b.restangularFields.singleOne]=i[b.restangularFields.singleOne],o(j,c,g,u)):(g=s(i[b.restangularFields.parentResource],f,m,!0,null,e),o(j,c,g,u))}else o(j,c,void 0,u)},w=function(c){304===c.status&&b.isSafe(a)?o(j,c,i,u):_.every(b.errorInterceptors,function(a){return a(c,j,v)!==!1})&&j.reject(c)},y=a,z=_.extend({},t.headers),A=b.isOverridenMethod(a);return A?(y="post",z=_.extend(z,{"X-HTTP-Method-Override":"remove"===a?"DELETE":a.toUpperCase()})):b.jsonp&&"get"===y&&(y="jsonp"),b.isSafe(a)?A?P.resource(this,c,t.httpConfig,z,t.params,e,r,y)[y]({}).then(v,w):P.resource(this,c,t.httpConfig,z,t.params,e,r,y)[y]().then(v,w):P.resource(this,c,t.httpConfig,z,t.params,e,r,y)[y](t.element).then(v,w),l(j.promise,!1,u)}function C(a,b){return _.bind(B,this)("get",void 0,a,void 0,b)}function D(a,b){return _.bind(B,this)("remove",void 0,a,void 0,b)}function E(a,b){return _.bind(B,this)("put",void 0,a,void 0,b)}function F(a,b,c,d){return _.bind(B,this)("post",a,c,b,d)}function G(a,b){return _.bind(B,this)("head",void 0,a,void 0,b)}function H(a,b){return _.bind(B,this)("trace",void 0,a,void 0,b)}function I(a,b){return _.bind(B,this)("options",void 0,a,void 0,b)}function J(a,b,c){return _.bind(B,this)("patch",void 0,b,a,c)}function K(a,b,c,d,e){return _.bind(B,this)(a,b,c,e,d)}function L(a,c,d,e,f,g){var h;h="getList"===c?_.bind(y,this,d):_.bind(K,this,c,d);var i=function(a,b,c){var d=_.defaults({params:a,headers:b,elem:c},{params:e,headers:f,elem:g});return h(d.params,d.headers,d.elem)};b.isSafe(c)?this[a]=i:this[a]=function(a,b,c){return i(b,c,a)}}function M(c){var d=angular.copy(_.omit(b,"configuration"));return a.init(d,d),c(d),e(d)}function N(a,c){var d=_.values(b.restangularFields),e={},f=(c||O).all(a);e.one=_.bind(g,c||O,c,a),e.post=_.bind(f.post,f),e.getList=_.bind(f.getList,f);for(var h in f)f.hasOwnProperty(h)&&_.isFunction(f[h])&&!_.includes(d,h)&&(e[h]=_.bind(f[h],f));return e}var O={},P=new b.urlCreatorFactory[b.urlCreator];return P.setConfig(b),a.init(O,b),O.copy=_.bind(r,O),O.service=_.bind(N,O),O.withConfig=_.bind(M,O),O.one=_.bind(g,O,null),O.all=_.bind(h,O,null),O.several=_.bind(i,O,null),O.oneUrl=_.bind(j,O,null),O.allUrl=_.bind(k,O,null),O.stripRestangular=_.bind(p,O),O.restangularizeElement=_.bind(s,O),O.restangularizeCollection=_.bind(u,O),O}return e(b)}]})}(),function(a,b){angular.module("ngCsv.config",[]).value("ngCsv.config",{debug:!0}).config(["$compileProvider",function(a){angular.isDefined(a.urlSanitizationWhitelist)?a.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/):a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|data):/)}]),angular.module("ngCsv.directives",["ngCsv.services"]),angular.module("ngCsv.services",[]),angular.module("ngCsv",["ngCsv.config","ngCsv.services","ngCsv.directives","ngSanitize"]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ngCsv"),angular.module("ngCsv.services").service("CSV",["$q",function(a){var b="\r\n",c="\ufeff",d={"\\t":"\t","\\b":"\b","\\v":"\x0B","\\f":"\f","\\r":"\r"};this.stringifyField=function(a,b){return"locale"===b.decimalSep&&this.isFloat(a)?a.toLocaleString():"."!==b.decimalSep&&this.isFloat(a)?a.toString().replace(".",b.decimalSep):"string"==typeof a?(a=a.replace(/"/g,'""'),(b.quoteStrings||a.indexOf(",")>-1||a.indexOf("\n")>-1||a.indexOf("\r")>-1)&&(a=b.txtDelim+a+b.txtDelim),a):"boolean"==typeof a?a?"TRUE":"FALSE":a},this.isFloat=function(a){return+a===a&&(!isFinite(a)||Boolean(a%1))},this.stringify=function(d,e){var f=a.defer(),g=this,h="",i="",j=a.when(d).then(function(a){if(angular.isDefined(e.header)&&e.header){var d,j;d=[],angular.forEach(e.header,function(a,b){this.push(g.stringifyField(a,e))},d),j=d.join(e.fieldSep?e.fieldSep:","),i+=j+b}var k=[];if(angular.isArray(a)?k=a:angular.isFunction(a)&&(k=a()),angular.isDefined(e.label)&&e.label&&"boolean"==typeof e.label){var l,m;l=[],angular.forEach(k[0],function(a,b){this.push(g.stringifyField(b,e))},l),m=l.join(e.fieldSep?e.fieldSep:","),i+=m+b}angular.forEach(k,function(a,c){var d,f,h=angular.copy(k[c]);f=[];var j=e.columnOrder?e.columnOrder:h;angular.forEach(j,function(a,b){var c=e.columnOrder?h[a]:a;this.push(g.stringifyField(c,e))},f),d=f.join(e.fieldSep?e.fieldSep:","),i+=c<k.length?d+b:d}),e.addByteOrderMarker&&(h+=c),h+=i,f.resolve(h)});return"function"==typeof j["catch"]&&j["catch"](function(a){f.reject(a)}),f.promise},this.isSpecialChar=function(a){return void 0!==d[a]},this.getSpecialChar=function(a){return d[a]}}]),angular.module("ngCsv.directives").directive("ngCsv",["$parse","$q","CSV","$document","$timeout",function(b,c,d,e,f){return{restrict:"AC",scope:{data:"&ngCsv",filename:"@filename",header:"&csvHeader",columnOrder:"&csvColumnOrder",txtDelim:"@textDelimiter",decimalSep:"@decimalSeparator",quoteStrings:"@quoteStrings",fieldSep:"@fieldSeparator",lazyLoad:"@lazyLoad",addByteOrderMarker:"@addBom",ngClick:"&",charset:"@charset",label:"&csvLabel"},controller:["$scope","$element","$attrs","$transclude",function(a,b,e,f){function g(){var b={txtDelim:a.txtDelim?a.txtDelim:'"',decimalSep:a.decimalSep?a.decimalSep:".",quoteStrings:a.quoteStrings,addByteOrderMarker:a.addByteOrderMarker};return angular.isDefined(e.csvHeader)&&(b.header=a.$eval(a.header)),angular.isDefined(e.csvColumnOrder)&&(b.columnOrder=a.$eval(a.columnOrder)),angular.isDefined(e.csvLabel)&&(b.label=a.$eval(a.label)),b.fieldSep=a.fieldSep?a.fieldSep:",",b.fieldSep=d.isSpecialChar(b.fieldSep)?d.getSpecialChar(b.fieldSep):b.fieldSep,b}a.csv="",angular.isDefined(a.lazyLoad)&&"true"==a.lazyLoad||angular.isArray(a.data)&&a.$watch("data",function(b){a.buildCSV()},!0),a.getFilename=function(){return a.filename||"download.csv"},a.buildCSV=function(){var f=c.defer();return b.addClass(e.ngCsvLoadingClass||"ng-csv-loading"),d.stringify(a.data(),g()).then(function(c){a.csv=c,b.removeClass(e.ngCsvLoadingClass||"ng-csv-loading"),f.resolve(c)}),a.$apply(),f.promise}}],link:function(b,c,d){function g(){var c=b.charset||"utf-8",d=new Blob([b.csv],{type:"text/csv;charset="+c+";"});if(a.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(d,b.getFilename());else{var g=angular.element('<div data-tap-disabled="true"><a></a></div>'),h=angular.element(g.children()[0]);h.attr("href",a.URL.createObjectURL(d)),h.attr("download",b.getFilename()),h.attr("target","_blank"),e.find("body").append(g),f(function(){h[0].click(),h.remove()},null)}}c.bind("click",function(a){b.buildCSV().then(function(a){g()}),b.$apply()})}}}])}(window,document),function(a,b,c){"use strict";function d(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return g(b,j(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function e(a){var c=[],d=j(c,b.noop);return d.chars(a),c.join("")}function f(a,c){var d,e={},f=a.split(",");for(d=0;d<f.length;d++)e[c?b.lowercase(f[d]):f[d]]=!0;return e}function g(a,c){function d(a,d,f,g){if(d=b.lowercase(d),z[d])for(;t.last()&&A[t.last()];)e("",t.last());y[d]&&t.last()==d&&e("",d),g=v[d]||!!g,g||t.push(d);var i={};f.replace(n,function(a,b,c,d,e){var f=c||d||e||"";i[b]=h(f)}),c.start&&c.start(d,i,g)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=t.length-1;f>=0&&t[f]!=d;f--);if(f>=0){for(e=t.length-1;e>=f;e--)c.end&&c.end(t[e]);t.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,g,i,j,t=[],u=a;for(t.last=function(){return t[t.length-1]};a;){if(j="",g=!0,t.last()&&C[t.last()]?(a=a.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+t.last()+"[^>]*>","i"),function(a,b){return b=b.replace(q,"$1").replace(s,"$1"),c.chars&&c.chars(h(b)),""}),e("",t.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),g=!1)):r.test(a)?(i=a.match(r),i&&(a=a.replace(i[0],""),g=!1)):p.test(a)?(i=a.match(m),i&&(a=a.substring(i[0].length),i[0].replace(m,e),g=!1)):o.test(a)&&(i=a.match(l),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(l,d)),g=!1):(j+="<",a=a.substring(1))),g&&(f=a.indexOf("<"),j+=f<0?a:a.substring(0,f),a=f<0?"":a.substring(f),c.chars&&c.chars(h(j)))),a==u)throw k("badparse","The sanitizer was unable to parse the following block of html: {0}",a);u=a}e()}function h(a){return a?(I.innerHTML=a.replace(/</g,"&lt;"),I.textContent):""}function i(a){return a.replace(/&/g,"&amp;").replace(t,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(u,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function j(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&C[a]&&(d=a),d||D[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),h="img"===a&&"src"===g||"background"===g;H[g]!==!0||E[g]===!0&&!c(d,h)||(e(" "),e(f),e('="'),e(i(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||D[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(i(a))}}}var k=b.$$minErr("$sanitize"),l=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,m=/^<\/\s*([\w:-]+)[^>]*>/,n=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,o=/^</,p=/^<\//,q=/<!--(.*?)-->/g,r=/<!DOCTYPE([^>]*?)>/i,s=/<!\[CDATA\[(.*?)]]>/g,t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/([^\#-~| |!])/g,v=f("area,br,col,hr,img,wbr"),w=f("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x=f("rp,rt"),y=b.extend({},x,w),z=b.extend({},w,f("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),A=b.extend({},x,f("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),B=f("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use"),C=f("script,style"),D=b.extend({},v,z,A,y,B),E=f("background,cite,href,longdesc,src,usemap,xlink:href"),F=f("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),G=f("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),H=b.extend({},E,G,F),I=document.createElement("pre");b.module("ngSanitize",[]).provider("$sanitize",d),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,d=/^mailto:/i;return function(f,g){function h(a){a&&n.push(e(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(d,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),function(a,b){"object"==typeof module&&module.exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return m[e]||(k.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",k.cssRules.length),m[e]=1),e}function d(a,b){var c,d,e=a.style;if(b=b.charAt(0).toUpperCase()+b.slice(1),void 0!==e[b])return b;for(d=0;d<l.length;d++)if(c=l[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}k.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.scale*d.width,left:d.scale*d.radius,top:-d.scale*d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.scale*(d.length+d.width),k=2*d.scale*j,l=-(d.width+d.length)*d.scale*2+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k,l=["webkit","Moz","ms","O"],m={},n={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=a(null,{className:d.className});if(e(f,{position:d.position,width:0,zIndex:d.zIndex,left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function o(){h++;for(var a=0;a<d.lines;a++)g=Math.max(1-(h+(d.lines-a)*n)%l*m,d.opacity),c.opacity(f,a*d.direction+i,g,d);c.timeout=c.el&&setTimeout(o,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.scale*(f.length+f.width)+"px",height:f.scale*f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.scale*f.radius+"px,0)",borderRadius:(f.corners*f.scale*f.width>>1)+"px"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:"absolute",top:1+~(f.scale*f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),"undefined"!=typeof document){k=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}();var o=e(a("group"),{behavior:"url(#default#VML)"});!d(o,"transform")&&o.adj?i():j=d(o,"animation")}return h}),function(a){"use strict";function b(a,b){return a.module("angularSpinner",[]).constant("SpinJSSpinner",b).provider("usSpinnerConfig",function(){var a={},b={};return{setDefaults:function(b){a=b||a},setTheme:function(a,c){b[a]=c},$get:function(){return{config:a,themes:b}}}}).factory("usSpinnerService",["$rootScope",function(a){var b={};return b.spin=function(b){a.$broadcast("us-spinner:spin",b)},b.stop=function(b){a.$broadcast("us-spinner:stop",b)},b}]).directive("usSpinner",["SpinJSSpinner","usSpinnerConfig",function(b,c){return{scope:!0,link:function(d,e,f){function g(){d.spinner&&d.spinner.stop()}d.spinner=null,d.key=!!a.isDefined(f.spinnerKey)&&f.spinnerKey,d.startActive=a.isDefined(f.spinnerStartActive)?d.$eval(f.spinnerStartActive):!d.key,d.spin=function(){d.spinner&&d.spinner.spin(e[0])},d.stop=function(){d.startActive=!1,g()},d.$watch(f.usSpinner,function(h){g(),h=a.extend({},c.config,c.themes[f.spinnerTheme],h),d.spinner=new b(h),d.key&&!d.startActive||f.spinnerOn||d.spinner.spin(e[0])},!0),f.spinnerOn&&d.$watch(f.spinnerOn,function(a){a?d.spin():d.stop()}),d.$on("us-spinner:spin",function(a,b){b===d.key&&d.spin()}),d.$on("us-spinner:stop",function(a,b){b===d.key&&d.stop()}),d.$on("$destroy",function(){d.stop(),d.spinner=null})}}}])}"object"==typeof module&&module.exports?module.exports=b(require("angular"),require("spin.js")):"function"==typeof define&&define.amd?define(["angular","spin"],b):b(a.angular,a.Spinner)}(this),!function(){function a(a){return a&&(a.ownerDocument||a.document||a).documentElement}function b(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function c(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function d(a){return null===a?NaN:+a}function e(a){return!isNaN(a)}function f(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function g(a){return a.length}function h(a){for(var b=1;a*b%1;)b*=10;return b}function i(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function j(){this._=Object.create(null)}function k(a){return(a+="")===ug||a[0]===vg?vg+a:a}function l(a){return(a+="")[0]===vg?a.slice(1):a}function m(a){return k(a)in this._}function n(a){return(a=k(a))in this._&&delete this._[a]}function o(){var a=[];for(var b in this._)a.push(l(b));return a}function p(){var a=0;for(var b in this._)++a;return a}function q(){for(var a in this._)return!1;return!0}function r(){this._=Object.create(null)}function s(a){return a}function t(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function u(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=wg.length;c<d;++c){var e=wg[c]+b;if(e in a)return e}}function v(){}function w(){}function x(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new j;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function y(){hg.event.preventDefault()}function z(){for(var a,b=hg.event;a=b.sourceEvent;)b=a;return b}function A(a){for(var b=new w,c=0,d=arguments.length;++c<d;)b[arguments[c]]=x(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=hg.event;e.target=a,hg.event=e,b[e.type].apply(c,d)}finally{hg.event=f}}},b}function B(a){return yg(a,Cg),a}function C(a){return"function"==typeof a?a:function(){return zg(a,this)}}function D(a){return"function"==typeof a?a:function(){return Ag(a,this)}}function E(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=hg.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function F(a){return a.trim().replace(/\s+/g," ")}function G(a){return new RegExp("(?:^|\\s+)"+hg.requote(a)+"(?:\\s+|$)","g")}function H(a){return(a+"").trim().split(/^|\s+/)}function I(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=H(a).map(J);var e=a.length;return"function"==typeof b?d:c}function J(a){var b=G(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",F(e+" "+a))):c.setAttribute("class",F(e.replace(b," ")))}}function K(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function L(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function M(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return c===Dg&&b.documentElement.namespaceURI===Dg?b.createElement(a):b.createElementNS(c,a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"==typeof a?a:(a=hg.ns.qualify(a)).local?c:b}function N(){var a=this.parentNode;a&&a.removeChild(this)}function O(a){return{__data__:a}}function P(a){return function(){return Bg(this,a)}}function Q(a){return arguments.length||(a=c),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function R(a,b){for(var c=0,d=a.length;c<d;c++)for(var e,f=a[c],g=0,h=f.length;g<h;g++)(e=f[g])&&b(e,g,c);return a}function S(a){return yg(a,Fg),a}function T(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function U(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,jg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+hg.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=V;h>0&&(a=a.slice(0,h));var j=Gg.get(a);return j&&(a=j,i=W),h?b?e:d:b?v:f}function V(a,b){return function(c){var d=hg.event;hg.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{hg.event=d}}}function W(a,b){var c=V(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function X(c){var d=".dragsuppress-"+ ++Ig,e="click"+d,f=hg.select(b(c)).on("touchmove"+d,y).on("dragstart"+d,y).on("selectstart"+d,y);if(null==Hg&&(Hg=!("onselectstart"in c)&&u(c.style,"userSelect")),Hg){var g=a(c).style,h=g[Hg];g[Hg]="none"}return function(a){if(f.on(d,null),Hg&&(g[Hg]=h),a){var b=function(){f.on(e,null)};f.on(e,function(){y(),b()},!0),setTimeout(b,0)}}}function Y(a,c){c.changedTouches&&(c=c.changedTouches[0]);var d=a.ownerSVGElement||a;if(d.createSVGPoint){var e=d.createSVGPoint();if(Jg<0){var f=b(a);if(f.scrollX||f.scrollY){d=hg.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=d[0][0].getScreenCTM();Jg=!(g.f||g.e),d.remove()}}return Jg?(e.x=c.pageX,e.y=c.pageY):(e.x=c.clientX,e.y=c.clientY),e=e.matrixTransform(a.getScreenCTM().inverse()),[e.x,e.y]}var h=a.getBoundingClientRect();return[c.clientX-h.left-a.clientLeft,c.clientY-h.top-a.clientTop]}function Z(){return hg.event.changedTouches[0].identifier}function $(a){return a>0?1:a<0?-1:0}function _(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function aa(a){return a>1?0:a<-1?Mg:Math.acos(a)}function ba(a){return a>1?Pg:a<-1?-Pg:Math.asin(a)}function ca(a){return((a=Math.exp(a))-1/a)/2}function da(a){return((a=Math.exp(a))+1/a)/2}function ea(a){return((a=Math.exp(2*a))-1)/(a+1)}function fa(a){return(a=Math.sin(a/2))*a}function ga(){}function ha(a,b,c){return this instanceof ha?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ha?new ha(a.h,a.s,a.l):va(""+a,wa,ha):new ha(a,b,c)}function ia(a,b,c){function d(a){return a>360?a-=360:a<0&&(a+=360),a<60?f+(g-f)*a/60:a<180?g:a<240?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:b<0?0:b>1?1:b,c=c<0?0:c>1?1:c,g=c<=.5?c*(1+b):c+b-c*b,f=2*c-g,new ra(e(a+120),e(a),e(a-120))}function ja(a,b,c){return this instanceof ja?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof ja?new ja(a.h,a.c,a.l):a instanceof la?na(a.l,a.a,a.b):na((a=xa((a=hg.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ja(a,b,c)}function ka(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new la(c,Math.cos(a*=Qg)*b,Math.sin(a)*b)}function la(a,b,c){return this instanceof la?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof la?new la(a.l,a.a,a.b):a instanceof ja?ka(a.h,a.c,a.l):xa((a=ra(a)).r,a.g,a.b):new la(a,b,c)}function ma(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=oa(e)*_g,d=oa(d)*ah,f=oa(f)*bh,new ra(qa(3.2404542*e-1.5371385*d-.4985314*f),qa(-.969266*e+1.8760108*d+.041556*f),qa(.0556434*e-.2040259*d+1.0572252*f))}function na(a,b,c){return a>0?new ja(Math.atan2(c,b)*Rg,Math.sqrt(b*b+c*c),a):new ja(NaN,NaN,a)}function oa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function pa(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function qa(a){return Math.round(255*(a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function ra(a,b,c){return this instanceof ra?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof ra?new ra(a.r,a.g,a.b):va(""+a,ra,ia):new ra(a,b,c)}function sa(a){return new ra(a>>16,a>>8&255,255&a)}function ta(a){return sa(a)+""}function ua(a){return a<16?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function va(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/.exec(a=a.toLowerCase()))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(za(e[0]),za(e[1]),za(e[2]))}return(f=eh.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function wa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=i<.5?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(b<c?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&i<1?0:d),new ha(d,e,i)}function xa(a,b,c){a=ya(a),b=ya(b),c=ya(c);var d=pa((.4124564*a+.3575761*b+.1804375*c)/_g),e=pa((.2126729*a+.7151522*b+.072175*c)/ah),f=pa((.0193339*a+.119192*b+.9503041*c)/bh);return la(116*e-16,500*(d-e),200*(e-f))}function ya(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function za(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Aa(a){return"function"==typeof a?a:function(){return a}}function Ba(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Ca(b,c,a,d)}}function Ca(a,b,c,d){function e(){var a,b=i.status;if(!b&&Ea(i)||b>=200&&b<300||304===b){try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=hg.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=hg.event;hg.event=a;try{g.progress.call(f,i)}finally{hg.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){
return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(jg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},hg.rebind(f,g,"on"),null==d?f:f.get(Da(d))}function Da(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Ea(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Fa(a,b,c){var d=arguments.length;d<2&&(b=0),d<3&&(c=Date.now());var e=c+b,f={c:a,t:e,n:null};return gh?gh.n=f:fh=f,gh=f,hh||(ih=clearTimeout(ih),hh=1,jh(Ga)),f}function Ga(){var a=Ha(),b=Ia()-a;b>24?(isFinite(b)&&(clearTimeout(ih),ih=setTimeout(Ga,b)),hh=0):(hh=1,jh(Ga))}function Ha(){for(var a=Date.now(),b=fh;b;)a>=b.t&&b.c(a-b.t)&&(b.c=null),b=b.n;return a}function Ia(){for(var a,b=fh,c=1/0;b;)b.c?(b.t<c&&(c=b.t),b=(a=b).n):b=a?a.n=b.n:fh=b.n;return gh=a,c}function Ja(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ka(a,b){var c=Math.pow(10,3*tg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function La(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:s;return function(a){var c=lh.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):"e"!=n&&"f"!=n||(m=Math.max(0,Math.min(20,m)))),n=mh.get(n)||Ma;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=a<0||0===a&&1/a<0?(a=-a,"-"):"-"===h?"":h;if(o<0){var i=hg.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(w<0){var x=s?a.lastIndexOf("e"):-1;x<0?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=y<k?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Ma(a){return a+""}function Na(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Oa(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){return b(c=a(new oh(c-1)),1),c}function f(a,c){return b(a=new oh((+a)),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;g<d;)c(g)%f||h.push(new Date((+g))),b(g,1);else for(;g<d;)h.push(new Date((+g))),b(g,1);return h}function h(a,b,c){try{oh=Na;var d=new Na;return d._=a,g(d,b,c)}finally{oh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Pa(a);return i.floor=i,i.round=Pa(d),i.ceil=Pa(e),i.offset=Pa(f),i.range=h,a}function Pa(a){return function(b,c){try{oh=Na;var d=new Na;return d._=b,a(d,c)._}finally{oh=Date}}}function Qa(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=qh[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&oh!==Na,g=new(f?Na:oh);return"j"in d?g.setFullYear(d.y,0,d.j):"W"in d||"U"in d?("w"in d||(d.w="W"in d?1:0),g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;h<i;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in qh?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{oh=Na;var b=new oh;return b._=a,d(b)}finally{oh=Date}}var d=b(a);return c.parse=function(a){try{oh=Na;var b=d.parse(a);return b&&b._}finally{oh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=ib;var t=hg.map(),u=Sa(p),v=Ta(p),w=Sa(q),x=Ta(q),y=Sa(r),z=Ta(r),A=Sa(s),B=Ta(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Ra(a.getDate(),b,2)},e:function(a,b){return Ra(a.getDate(),b,2)},H:function(a,b){return Ra(a.getHours(),b,2)},I:function(a,b){return Ra(a.getHours()%12||12,b,2)},j:function(a,b){return Ra(1+nh.dayOfYear(a),b,3)},L:function(a,b){return Ra(a.getMilliseconds(),b,3)},m:function(a,b){return Ra(a.getMonth()+1,b,2)},M:function(a,b){return Ra(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Ra(a.getSeconds(),b,2)},U:function(a,b){return Ra(nh.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Ra(nh.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Ra(a.getFullYear()%100,b,2)},Y:function(a,b){return Ra(a.getFullYear()%1e4,b,4)},Z:gb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:ab,e:ab,H:cb,I:cb,j:bb,L:fb,m:_a,M:db,p:k,S:eb,U:Va,w:Ua,W:Wa,x:i,X:j,y:Ya,Y:Xa,Z:Za,"%":hb};return b}function Ra(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?new Array(c-f+1).join(b)+e:e)}function Sa(a){return new RegExp("^(?:"+a.map(hg.requote).join("|")+")","i")}function Ta(a){for(var b=new j,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Ua(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Va(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Wa(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Xa(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Ya(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.y=$a(+d[0]),c+d[0].length):-1}function Za(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function $a(a){return a+(a>68?1900:2e3)}function _a(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function ab(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function bb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function cb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function db(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function eb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function fb(a,b,c){rh.lastIndex=0;var d=rh.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function gb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=tg(b)/60|0,e=tg(b)%60;return c+Ra(d,"0",2)+Ra(e,"0",2)}function hb(a,b,c){sh.lastIndex=0;var d=sh.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function ib(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function jb(){}function kb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function lb(a,b){a&&wh.hasOwnProperty(a.type)&&wh[a.type](a,b)}function mb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function nb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)mb(a[c],b,1);b.polygonEnd()}function ob(){function a(a,b){a*=Qg,b=b*Qg/2+Mg/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);yh.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;zh.point=function(g,h){zh.point=a,d=(b=g)*Qg,e=Math.cos(h=(c=h)*Qg/2+Mg/4),f=Math.sin(h)},zh.lineEnd=function(){a(b,c)}}function pb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function qb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function rb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function sb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function tb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function ub(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function vb(a){return[Math.atan2(a[1],a[0]),ba(a[2])]}function wb(a,b){return tg(a[0]-b[0])<Kg&&tg(a[1]-b[1])<Kg}function xb(a,b){a*=Qg;var c=Math.cos(b*=Qg);yb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function yb(a,b,c){++Ah,Ch+=(a-Ch)/Ah,Dh+=(b-Dh)/Ah,Eh+=(c-Eh)/Ah}function zb(){function a(a,e){a*=Qg;var f=Math.cos(e*=Qg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);Bh+=j,Fh+=j*(b+(b=g)),Gh+=j*(c+(c=h)),Hh+=j*(d+(d=i)),yb(b,c,d)}var b,c,d;Lh.point=function(e,f){e*=Qg;var g=Math.cos(f*=Qg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Lh.point=a,yb(b,c,d)}}function Ab(){Lh.point=xb}function Bb(){function a(a,b){a*=Qg;var c=Math.cos(b*=Qg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-aa(n)/m,p=Math.atan2(m,n);Ih+=o*j,Jh+=o*k,Kh+=o*l,Bh+=p,Fh+=p*(d+(d=g)),Gh+=p*(e+(e=h)),Hh+=p*(f+(f=i)),yb(d,e,f)}var b,c,d,e,f;Lh.point=function(g,h){b=g,c=h,Lh.point=a,g*=Qg;var i=Math.cos(h*=Qg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),yb(d,e,f)},Lh.lineEnd=function(){a(b,c),Lh.lineEnd=Ab,Lh.point=xb}}function Cb(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Db(){return!0}function Eb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(wb(c,d)){e.lineStart();for(var h=0;h<b;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Gb(c,a,null,(!0)),j=new Gb(c,null,i,(!1));i.o=j,f.push(i),g.push(j),i=new Gb(d,a,null,(!1)),j=new Gb(d,null,i,(!0)),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Fb(f),Fb(g),f.length){for(var h=0,i=c,j=g.length;h<j;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;h<j;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Fb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Gb(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Hb(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Ib))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=hg.merge(n);var a=Ob(r,o);n.length?(v||(f.polygonStart(),v=!0),Eb(n,Kb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Jb(),u=b(t),v=!1;return s}}function Ib(a){return a.length>1}function Jb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:v,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Kb(a,b){return((a=a.x)[0]<0?a[1]-Pg-Kg:Pg-a[1])-((b=b.x)[0]<0?b[1]-Pg-Kg:Pg-b[1])}function Lb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Mg:-Mg,i=tg(f-c);tg(i-Mg)<Kg?(a.point(c,d=(d+g)/2>0?Pg:-Pg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Mg&&(tg(c-e)<Kg&&(c-=e*Kg),tg(f-h)<Kg&&(f-=h*Kg),d=Mb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Mb(a,b,c,d){var e,f,g=Math.sin(a-c);return tg(g)>Kg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Nb(a,b,c,d){var e;if(null==a)e=c*Pg,d.point(-Mg,e),d.point(0,e),d.point(Mg,e),d.point(Mg,0),d.point(Mg,-e),d.point(0,-e),d.point(-Mg,-e),d.point(-Mg,0),d.point(-Mg,e);else if(tg(a[0]-b[0])>Kg){var f=a[0]<b[0]?Mg:-Mg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Ob(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;yh.reset();for(var h=0,i=b.length;h<i;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Mg/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Mg/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Mg,z=o*t;if(yh.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Ng:v,y^m>=c^r>=c){var A=rb(pb(l),pb(a));ub(A);var B=rb(e,A);ub(B);var C=(y^v>=0?-1:1)*ba(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(f<-Kg||f<Kg&&yh<-Kg)^1&g}function Pb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(l<0?Mg:-Mg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(wb(c,n)||wb(o,n))&&(o[0]+=Kg,o[1]+=Kg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&wb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=pb(a),e=pb(b),g=[1,0,0],h=rb(d,e),i=qb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=rb(g,h),o=tb(g,l),p=tb(h,m);sb(o,p);var q=n,r=qb(o,q),s=qb(q,q),t=r*r-s*(qb(o,o)-1);if(!(t<0)){var u=Math.sqrt(t),v=tb(q,(-r-u)/s);if(sb(v,o),v=vb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];y<x&&(w=x,x=y,y=w);var B=y-x,C=tg(B-Mg)<Kg,D=C||B<Kg;if(!C&&A<z&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(tg(v[0]-x)<Kg?z:A):z<=v[1]&&v[1]<=A:B>Mg^(x<=v[0]&&v[0]<=y)){var E=tb(q,(-r+u)/s);return sb(E,o),[v,vb(E)]}}}function e(b,c){var d=g?a:Mg-a,e=0;return b<-d?e|=1:b>d&&(e|=2),c<-d?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=tg(f)>Kg,i=oc(a,6*Qg);return Hb(b,c,i,g?[0,-a]:[-Mg,a-Mg])}function Qb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,o<0){if(f<m)return;f<n&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(f<0)){if(f/=o,o<0){if(f>n)return;f>m&&(m=f)}else if(o>0){if(f<m)return;f<n&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,p<0){if(f<m)return;f<n&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(f<0)){if(f/=p,p<0){if(f>n)return;f>m&&(m=f)}else if(p>0){if(f<m)return;f<n&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),n<1&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Rb(a,b,c,d){function e(d,e){return tg(d[0]-a)<Kg?e>0?0:3:tg(d[0]-c)<Kg?e>0?2:1:tg(d[1]-b)<Kg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;e<c;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];g<i;++g)f=h[g],j[1]<=d?f[1]>d&&_(j,f,a)>0&&++b:f[1]<=d&&_(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return a<=e&&e<=c&&b<=f&&f<=d}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Nh,Math.min(Nh,a)),b=Math.max(-Nh,Math.min(Nh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Jb(),C=Qb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=hg.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Eb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Sb(a){var b=0,c=Mg/3,d=gc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Mg/180,c=a[1]*Mg/180):[b/Mg*180,c/Mg*180]},e}function Tb(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,ba((f-(a*a+c*c)*e*e)/(2*e))]},c}function Ub(){function a(a,b){Ph+=e*a-d*b,d=a,e=b}var b,c,d,e;Uh.point=function(f,g){Uh.point=a,b=d=f,c=e=g},Uh.lineEnd=function(){a(b,c)}}function Vb(a,b){a<Qh&&(Qh=a),a>Sh&&(Sh=a),b<Rh&&(Rh=b),b>Th&&(Th=b)}function Wb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Xb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Xb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Xb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Yb(a,b){Ch+=a,Dh+=b,++Eh}function Zb(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);Fh+=g*(b+a)/2,Gh+=g*(c+d)/2,Hh+=g,Yb(b=a,c=d)}var b,c;Wh.point=function(d,e){Wh.point=a,Yb(b=d,c=e)}}function $b(){Wh.point=Yb}function _b(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);Fh+=g*(d+a)/2,Gh+=g*(e+b)/2,Hh+=g,g=e*a-d*b,Ih+=g*(d+a),Jh+=g*(e+b),Kh+=3*g,Yb(d=a,e=b)}var b,c,d,e;Wh.point=function(f,g){Wh.point=a,Yb(b=d=f,c=e=g)},Wh.lineEnd=function(){a(b,c)}}function ac(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Ng)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:v};return h}function bc(a){function b(a){return(h?d:c)(a)}function c(b){return ec(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=pb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=tg(tg(x)-1)<Kg||tg(d-m)<Kg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||tg((s*E+t*F)/u-.5)>.3||h*n+i*o+j*p<g)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Qg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function cc(a){var b=bc(function(b,c){return a([b*Rg,c*Rg])});return function(a){return hc(b(a))}}function dc(a){this.stream=a}function ec(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function fc(a){return gc(function(){return a})()}function gc(a){function b(a){return a=h(a[0]*Qg,a[1]*Qg),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Rg,a[1]*Rg]}function d(){h=Cb(g=kc(r,t,u),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=bc(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,t=0,u=0,v=Mh,w=s,x=null,y=null;return b.stream=function(a){return k&&(k.valid=!1),k=hc(v(g,l(w(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(v=null==a?(x=a,Mh):Pb((x=+a)*Qg),e()):x},b.clipExtent=function(a){return arguments.length?(y=a,w=a?Rb(a[0][0],a[0][1],a[1][0],a[1][1]):s,e()):y},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Qg,q=a[1]%360*Qg,d()):[p*Rg,q*Rg]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Qg,t=a[1]%360*Qg,u=a.length>2?a[2]%360*Qg:0,d()):[r*Rg,t*Rg,u*Rg]},hg.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function hc(a){return ec(a,function(b,c){a.point(b*Qg,c*Qg)})}function ic(a,b){return[a,b]}function jc(a,b){return[a>Mg?a-Ng:a<-Mg?a+Ng:a,b]}function kc(a,b,c){return a?b||c?Cb(mc(a),nc(b,c)):mc(a):b||c?nc(b,c):jc}function lc(a){return function(b,c){return b+=a,[b>Mg?b-Ng:b<-Mg?b+Ng:b,c]}}function mc(a){var b=lc(a);return b.invert=lc(-a),b}function nc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),ba(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),ba(k*d-h*e)]},c}function oc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=pc(c,e),f=pc(c,f),(g>0?e<f:e>f)&&(e+=g*Ng)):(e=a+g*Ng,f=a-.5*i);for(var j,k=e;g>0?k>f:k<f;k-=i)h.point((j=vb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function pc(a,b){var c=pb(b);c[0]-=a,ub(c);var d=aa(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Kg)%(2*Math.PI)}function qc(a,b,c){var d=hg.range(a,b-Kg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function rc(a,b,c){var d=hg.range(a,b-Kg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function sc(a){return a.source}function tc(a){return a.target}function uc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(fa(d-b)+e*g*fa(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Rg,Math.atan2(g,Math.sqrt(d*d+e*e))*Rg]}:function(){return[a*Rg,b*Rg]};return o.distance=m,o}function vc(){function a(a,e){var f=Math.sin(e*=Qg),g=Math.cos(e),h=tg((a*=Qg)-b),i=Math.cos(h);Xh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Yh.point=function(e,f){b=e*Qg,c=Math.sin(f*=Qg),d=Math.cos(f),Yh.point=a},Yh.lineEnd=function(){Yh.point=Yh.lineEnd=v}}function wc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function xc(a,b){function c(a,b){g>0?b<-Pg+Kg&&(b=-Pg+Kg):b>Pg-Kg&&(b=Pg-Kg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Mg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=$(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Pg]},c):zc}function yc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return tg(e)<Kg?ic:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-$(e)*Math.sqrt(a*a+c*c)]},c)}function zc(a,b){return[a,Math.log(Math.tan(Mg/4+b/2))]}function Ac(a){var b,c=fc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Mg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Bc(a,b){return[Math.log(Math.tan(Mg/4+b/2)),-a]}function Cc(a){return a[0]}function Dc(a){return a[1]}function Ec(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;d>1&&_(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Fc(a,b){return a[0]-b[0]||a[1]-b[1]}function Gc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Hc(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Ic(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Jc(){cd(this),this.edge=this.site=this.circle=null}function Kc(a){var b=ii.pop()||new Jc;return b.site=a,b}function Lc(a){Vc(a),fi.remove(a),ii.push(a),cd(a)}function Mc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Lc(a);for(var i=f;i.circle&&tg(c-i.circle.x)<Kg&&tg(d-i.circle.cy)<Kg;)f=i.P,h.unshift(i),Lc(i),i=f;h.unshift(i),Vc(i);for(var j=g;j.circle&&tg(c-j.circle.x)<Kg&&tg(d-j.circle.cy)<Kg;)g=j.N,h.push(j),Lc(j),j=g;h.push(j),Vc(j);var k,l=h.length;for(k=1;k<l;++k)j=h[k],i=h[k-1],_c(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=Zc(i.site,j.site,null,e),Uc(i),Uc(j)}function Nc(a){for(var b,c,d,e,f=a.x,g=a.y,h=fi._;h;)if(d=Oc(h,g)-f,d>Kg)h=h.L;else{if(e=f-Pc(h,g),!(e>Kg)){d>-Kg?(b=h.P,c=h):e>-Kg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Kc(a);if(fi.insert(b,i),b||c){if(b===c)return Vc(b),c=Kc(b.site),fi.insert(i,c),i.edge=c.edge=Zc(b.site,i.site),Uc(b),void Uc(c);if(!c)return void(i.edge=Zc(b.site,i.site));Vc(b),Vc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};_c(c.edge,j,o,u),i.edge=Zc(j,a,null,u),c.edge=Zc(a,o,null,u),Uc(b),Uc(c)}}function Oc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Pc(a,b){var c=a.N;if(c)return Oc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Qc(a){this.site=a,this.edges=[]}function Rc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=ei,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;g<i;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(tg(d-b)>Kg||tg(e-c)>Kg)&&(h.splice(g,0,new ad($c(f.site,k,tg(d-l)<Kg&&o-e>Kg?{x:l,y:tg(b-l)<Kg?c:o}:tg(e-o)<Kg&&m-d>Kg?{x:tg(c-o)<Kg?b:m,y:o}:tg(d-m)<Kg&&e-n>Kg?{x:m,y:tg(b-m)<Kg?c:n}:tg(e-n)<Kg&&d-l>Kg?{x:tg(c-n)<Kg?b:l,y:n}:null),f.site,null)),++i)}function Sc(a,b){return b.angle-a.angle}function Tc(){cd(this),this.x=this.y=this.arc=this.site=this.cy=null}function Uc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Lg)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=ji.pop()||new Tc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=hi._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}hi.insert(s,r),s||(gi=r)}}}}function Vc(a){var b=a.circle;b&&(b.P||(gi=b.N),hi.remove(b),ji.push(b),cd(b),a.circle=null)}function Wc(a){for(var b,c=di,d=Qb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Xc(b,a)||!d(b)||tg(b.a.x-b.b.x)<Kg&&tg(b.a.y-b.b.y)<Kg)&&(b.a=b.b=null,c.splice(e,1))}function Xc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(q<g||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,d<-1||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(n<p){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Yc(a,b){this.l=a,this.r=b,this.a=this.b=null}function Zc(a,b,c,d){var e=new Yc(a,b);return di.push(e),c&&_c(e,a,b,c),d&&_c(e,b,a,d),ei[a.i].edges.push(new ad(e,a,b)),ei[b.i].edges.push(new ad(e,b,a)),e}function $c(a,b,c){var d=new Yc(a,null);return d.a=b,d.b=c,di.push(d),d}function _c(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function ad(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function bd(){this._=null}function cd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function dd(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function ed(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,
c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function fd(a){for(;a.L;)a=a.L;return a}function gd(a,b){var c,d,e,f=a.sort(hd).pop();for(di=[],ei=new Array(a.length),fi=new bd,hi=new bd;;)if(e=gi,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))f.x===c&&f.y===d||(ei[f.i]=new Qc(f),Nc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Mc(e.arc)}b&&(Wc(b),Rc(b));var g={cells:ei,edges:di};return fi=hi=di=ei=null,g}function hd(a,b){return b.y-a.y||b.x-a.x}function id(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function jd(a){return a.x}function kd(a){return a.y}function ld(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function md(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&md(a,i[0],c,d,g,h),i[1]&&md(a,i[1],g,d,e,h),i[2]&&md(a,i[2],c,h,g,f),i[3]&&md(a,i[3],g,h,e,f)}}function nd(a,b,c,d,e,f,g){var h,i=1/0;return function j(a,k,l,m,n){if(!(k>f||l>g||m<d||n<e)){if(o=a.point){var o,p=b-a.x,q=c-a.y,r=p*p+q*q;if(r<i){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=a.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;y<z;++y)if(a=t[3&y])switch(3&y){case 0:j(a,k,l,u,v);break;case 1:j(a,u,l,m,v);break;case 2:j(a,k,v,u,n);break;case 3:j(a,u,v,m,n)}}}(a,d,e,f,g),h}function od(a,b){a=hg.rgb(a),b=hg.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+ua(Math.round(c+f*a))+ua(Math.round(d+g*a))+ua(Math.round(e+h*a))}}function pd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=sd(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function qd(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function rd(a,b){var c,d,e,f=li.lastIndex=mi.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=li.exec(a))&&(d=mi.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:qd(c,d)})),f=mi.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;d<b;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function sd(a,b){for(var c,d=hg.interpolators.length;--d>=0&&!(c=hg.interpolators[d](a,b)););return c}function td(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;c<h;++c)d.push(sd(a[c],b[c]));for(;c<f;++c)e[c]=a[c];for(;c<g;++c)e[c]=b[c];return function(a){for(c=0;c<h;++c)e[c]=d[c](a);return e}}function ud(a){return function(b){return b<=0?0:b>=1?1:a(b)}}function vd(a){return function(b){return 1-a(1-b)}}function wd(a){return function(b){return.5*(b<.5?a(2*b):2-a(2-2*b))}}function xd(a){return a*a}function yd(a){return a*a*a}function zd(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)}function Ad(a){return function(b){return Math.pow(b,a)}}function Bd(a){return 1-Math.cos(a*Pg)}function Cd(a){return Math.pow(2,10*(a-1))}function Dd(a){return 1-Math.sqrt(1-a*a)}function Ed(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Ng*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Ng/b)}}function Fd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Gd(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Hd(a,b){a=hg.hcl(a),b=hg.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ka(c+f*a,d+g*a,e+h*a)+""}}function Id(a,b){a=hg.hsl(a),b=hg.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ia(c+f*a,d+g*a,e+h*a)+""}}function Jd(a,b){a=hg.lab(a),b=hg.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return ma(c+f*a,d+g*a,e+h*a)+""}}function Kd(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Ld(a){var b=[a.a,a.b],c=[a.c,a.d],d=Nd(b),e=Md(b,c),f=Nd(Od(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Rg,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Rg:0}function Md(a,b){return a[0]*b[0]+a[1]*b[1]}function Nd(a){var b=Math.sqrt(Md(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Od(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Pd(a){return a.length?a.pop()+",":""}function Qd(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push("translate(",null,",",null,")");d.push({i:e-4,x:qd(a[0],b[0])},{i:e-2,x:qd(a[1],b[1])})}else(b[0]||b[1])&&c.push("translate("+b+")")}function Rd(a,b,c,d){a!==b?(a-b>180?b+=360:b-a>180&&(a+=360),d.push({i:c.push(Pd(c)+"rotate(",null,")")-2,x:qd(a,b)})):b&&c.push(Pd(c)+"rotate("+b+")")}function Sd(a,b,c,d){a!==b?d.push({i:c.push(Pd(c)+"skewX(",null,")")-2,x:qd(a,b)}):b&&c.push(Pd(c)+"skewX("+b+")")}function Td(a,b,c,d){if(a[0]!==b[0]||a[1]!==b[1]){var e=c.push(Pd(c)+"scale(",null,",",null,")");d.push({i:e-4,x:qd(a[0],b[0])},{i:e-2,x:qd(a[1],b[1])})}else 1===b[0]&&1===b[1]||c.push(Pd(c)+"scale("+b+")")}function Ud(a,b){var c=[],d=[];return a=hg.transform(a),b=hg.transform(b),Qd(a.translate,b.translate,c,d),Rd(a.rotate,b.rotate,c,d),Sd(a.skew,b.skew,c,d),Td(a.scale,b.scale,c,d),a=b=null,function(a){for(var b,e=-1,f=d.length;++e<f;)c[(b=d[e]).i]=b.x(a);return c.join("")}}function Vd(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Wd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Xd(a){for(var b=a.source,c=a.target,d=Zd(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Yd(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Zd(a,b){if(a===b)return a;for(var c=Yd(a),d=Yd(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function $d(a){a.fixed|=2}function _d(a){a.fixed&=-7}function ae(a){a.fixed|=4,a.px=a.x,a.py=a.y}function be(a){a.fixed&=-5}function ce(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(ce(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function de(a,b){return hg.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=je,a}function ee(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function fe(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function ge(a){return a.children}function he(a){return a.value}function ie(a,b){return b.value-a.value}function je(a){return hg.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function ke(a){return a.x}function le(a){return a.y}function me(a,b,c){a.y0=b,a.y=c}function ne(a){return hg.range(a.length)}function oe(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function pe(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;c<f;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function qe(a){return a.reduce(re,0)}function re(a,b){return a+b[1]}function se(a,b){return te(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function te(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function ue(a){return[hg.min(a),hg.max(a)]}function ve(a,b){return a.value-b.value}function we(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function xe(a,b){a._pack_next=b,b._pack_prev=a}function ye(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function ze(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-(1/0),m=1/0,n=-(1/0);if(c.forEach(Ae),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],De(d,e,f),b(f),we(d,f),d._pack_prev=f,we(f,e),e=d._pack_next,g=3;g<j;g++){De(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(ye(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!ye(i,f);i=i._pack_prev,q++);o?(p<q||p==q&&e.r<d.r?xe(d,e=h):xe(d=i,e),g--):(we(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;g<j;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(Be)}}function Ae(a){a._pack_next=a._pack_prev=a}function Be(a){delete a._pack_next,delete a._pack_prev}function Ce(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)Ce(e[f],b,c,d)}function De(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function Ee(a,b){return a.parent==b.parent?1:2}function Fe(a){var b=a.children;return b.length?b[0]:a.t}function Ge(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function He(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Ie(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Je(a,b,c){return a.a.parent===b.parent?a.a:c}function Ke(a){return 1+hg.max(a,function(a){return a.y})}function Le(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Me(a){var b=a.children;return b&&b.length?Me(b[0]):a}function Ne(a){var b,c=a.children;return c&&(b=c.length)?Ne(c[b-1]):a}function Oe(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Pe(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return e<0&&(c+=e/2,e=0),f<0&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Qe(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function Re(a){return a.rangeExtent?a.rangeExtent():Qe(a.range())}function Se(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Te(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return g<f&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Ue(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:xi}function Ve(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=hg.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function We(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Ve:Se,i=d?Wd:Vd;return g=e(a,b,i,c),h=e(b,a,i,sd),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Kd)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return $e(a,b)},f.tickFormat=function(b,c){return _e(a,b,c)},f.nice=function(b){return Ye(a,b),e()},f.copy=function(){return We(a,b,c,d)},e()}function Xe(a,b){return hg.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ye(a,b){return Te(a,Ue(Ze(a,b)[2])),Te(a,Ue(Ze(a,b)[2])),a}function Ze(a,b){null==b&&(b=10);var c=Qe(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return f<=.15?e*=10:f<=.35?e*=5:f<=.75&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function $e(a,b){return hg.range.apply(hg,Ze(a,b))}function _e(a,b,c){var d=Ze(a,b);if(c){var e=lh.exec(c);if(e.shift(),"s"===e[8]){var f=hg.formatPrefix(Math.max(tg(d[0]),tg(d[1])));return e[7]||(e[7]="."+af(f.scale(d[2]))),e[8]="f",c=hg.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+bf(e[8],d)),c=e.join("")}else c=",."+af(d[2])+"f";return hg.format(c)}function af(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function bf(a,b){var c=af(b[2]);return a in yi?Math.abs(c-af(Math.max(tg(b[0]),tg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function cf(a,b,c,d){function e(a){return(c?Math.log(a<0?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Te(d.map(e),c?Math:Ai);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Qe(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;j<k;j++)for(var m=1;m<l;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,c){if(!arguments.length)return zi;arguments.length<2?c=zi:"function"!=typeof c&&(c=hg.format(c));var d=Math.max(1,b*a/g.ticks().length);return function(a){var g=a/f(Math.round(e(a)));return g*b<b-.5&&(g*=b),g<=d?c(a):""}},g.copy=function(){return cf(a.copy(),b,c,d)},Xe(g,a)}function df(a,b,c){function d(b){return a(e(b))}var e=ef(b),f=ef(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return $e(c,a)},d.tickFormat=function(a,b){return _e(c,a,b)},d.nice=function(a){return d.domain(Ye(c,a))},d.exponent=function(g){return arguments.length?(e=ef(b=g),f=ef(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return df(a.copy(),b,c)},Xe(d,a)}function ef(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function ff(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return hg.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new j;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Qe(b.a[0])},c.copy=function(){return ff(a,b)},c.domain(a)}function gf(a,b){function f(){var c=0,d=b.length;for(h=[];++c<d;)h[c-1]=hg.quantile(a,c/d);return g}function g(a){if(!isNaN(a=+a))return b[hg.bisect(h,a)]}var h;return g.domain=function(b){return arguments.length?(a=b.map(d).filter(e).sort(c),f()):a},g.range=function(a){return arguments.length?(b=a,f()):b},g.quantiles=function(){return h},g.invertExtent=function(c){return c=b.indexOf(c),c<0?[NaN,NaN]:[c>0?h[c-1]:a[0],c<h.length?h[c]:a[a.length-1]]},g.copy=function(){return gf(a,b)},f()}function hf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=b<0?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return hf(a,b,c)},e()}function jf(a,b){function c(c){if(c<=c)return b[hg.bisect(a,c)]}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return jf(a,b)},c}function kf(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return $e(a,b)},b.tickFormat=function(b,c){return _e(a,b,c)},b.copy=function(){return kf(a)},b}function lf(){return 0}function mf(a){return a.innerRadius}function nf(a){return a.outerRadius}function of(a){return a.startAngle}function pf(a){return a.endAngle}function qf(a){return a&&a.padAngle}function rf(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function sf(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(r<0?-1:1)*Math.sqrt(Math.max(0,t*t*s-u*u)),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function tf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Aa(c),o=Aa(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Cc,d=Dc,e=Db,f=uf,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Gi.get(a)||uf).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function uf(a){return a.length>1?a.join("L"):a+"Z"}function vf(a){return a.join("L")+"Z"}function wf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function xf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function yf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function zf(a,b){return a.length<4?uf(a):a[1]+Cf(a.slice(1,-1),Df(a,b))}function Af(a,b){return a.length<3?vf(a):a[0]+Cf((a.push(a[0]),a),Df([a[a.length-2]].concat(a,[a[1]]),b))}function Bf(a,b){return a.length<3?uf(a):a[0]+Cf(a,Df(a,b))}function Cf(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return uf(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function Df(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function Ef(a){if(a.length<3)return uf(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",If(Ji,g),",",If(Ji,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Jf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Ff(a){if(a.length<4)return uf(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(If(Ji,f)+","+If(Ji,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Jf(c,f,g);return c.join("")}function Gf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[If(Ji,g),",",If(Ji,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Jf(b,g,h);return b.join("")}function Hf(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return Ef(a)}function If(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Jf(a,b,c){a.push("C",If(Hi,b),",",If(Hi,c),",",If(Ii,b),",",If(Ii,c),",",If(Ji,b),",",If(Ji,c))}function Kf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Lf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Kf(e,f);++b<c;)d[b]=(g+(g=Kf(e=f,f=a[b+1])))/2;return d[b]=g,d}function Mf(a){for(var b,c,d,e,f=[],g=Lf(a),h=-1,i=a.length-1;++h<i;)b=Kf(a[h],a[h+1]),tg(b)<Kg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Nf(a){return a.length<3?uf(a):a[0]+Cf(a,Mf(a))}function Of(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Pg,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Pf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Aa(c),v=Aa(e),w=c===d?function(){return n}:Aa(d),x=e===f?function(){return o}:Aa(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Cc,d=Cc,e=0,f=Dc,g=Db,h=uf,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Gi.get(a)||uf).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Qf(a){return a.radius}function Rf(a){return[a.x,a.y]}function Sf(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Pg;return[c*Math.cos(d),c*Math.sin(d)]}}function Tf(){return 64}function Uf(){return"circle"}function Vf(a){var b=Math.sqrt(a/Mg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Wf(a){return function(){var b,c,d;(b=this[a])&&(d=b[c=b.active])&&(d.timer.c=null,d.timer.t=NaN,--b.count?delete b[c]:delete this[a],b.active+=.5,d.event&&d.event.interrupt.call(this,this.__data__,d.index))}}function Xf(a,b,c){return yg(a,Qi),a.namespace=b,a.id=c,a}function Yf(a,b,c,d){var e=a.id,f=a.namespace;return R(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function Zf(a){return null==a&&(a=""),function(){this.textContent=a}}function $f(a){return null==a?"__transition__":"__transition_"+a+"__"}function _f(a,b,c,d,e){function f(a){var b=p.delay;return k.t=b+i,b<=a?g(a-b):void(k.c=g)}function g(c){var e=o.active,f=o[e];f&&(f.timer.c=null,f.timer.t=NaN,--o.count,delete o[e],f.event&&f.event.interrupt.call(a,a.__data__,f.index));for(var g in o)if(+g<d){var j=o[g];j.timer.c=null,j.timer.t=NaN,--o.count,delete o[g]}k.c=h,Fa(function(){return k.c&&h(c||1)&&(k.c=null,k.t=NaN),1},0,i),o.active=d,p.event&&p.event.start.call(a,a.__data__,b),n=[],p.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&n.push(d)}),m=p.ease,l=p.duration}function h(e){for(var f=e/l,g=m(f),h=n.length;h>0;)n[--h].call(a,g);if(f>=1)return p.event&&p.event.end.call(a,a.__data__,b),--o.count?delete o[d]:delete a[c],1}var i,k,l,m,n,o=a[c]||(a[c]={active:0,count:0}),p=o[d];p||(i=e.time,k=Fa(f,0,i),p=o[d]={tween:new j,time:i,timer:k,delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++o.count)}function ag(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function bg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function cg(a){return a.toISOString()}function dg(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=hg.bisect(Zi,e);return f==Zi.length?[b.year,Ze(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Zi[f-1]<Zi[f]/e?f-1:f]:[aj,Ze(a,c)[2]]}return d.invert=function(b){return eg(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(eg)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,eg(+c+1),b).length}var f=d.domain(),g=Qe(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Te(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=eg(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=eg(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Qe(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],eg(+c[1]+1),b<1?1:b)},d.tickFormat=function(){return c},d.copy=function(){return dg(a.copy(),b,c)},Xe(d,a)}function eg(a){return new Date(a)}function fg(a){return JSON.parse(a.responseText)}function gg(a){var b=kg.createRange();return b.selectNode(kg.body),b.createContextualFragment(a.responseText)}var hg={version:"3.5.17"},ig=[].slice,jg=function(a){return ig.call(a)},kg=this.document;if(kg)try{jg(kg.documentElement.childNodes)[0].nodeType}catch(lg){jg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}if(Date.now||(Date.now=function(){return+new Date}),kg)try{kg.createElement("DIV").style.setProperty("opacity",0,"")}catch(mg){var ng=this.Element.prototype,og=ng.setAttribute,pg=ng.setAttributeNS,qg=this.CSSStyleDeclaration.prototype,rg=qg.setProperty;ng.setAttribute=function(a,b){og.call(this,a,b+"")},ng.setAttributeNS=function(a,b,c){pg.call(this,a,b,c+"")},qg.setProperty=function(a,b,c){rg.call(this,a,b+"",c)}}hg.ascending=c,hg.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},hg.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},hg.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},hg.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),e<d&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),e<d&&(e=d))}return[c,e]},hg.sum=function(a,b){var c,d=0,f=a.length,g=-1;if(1===arguments.length)for(;++g<f;)e(c=+a[g])&&(d+=c);else for(;++g<f;)e(c=+b.call(a,a[g],g))&&(d+=c);return d},hg.mean=function(a,b){var c,f=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)e(c=d(a[h]))?f+=c:--i;else for(;++h<g;)e(c=d(b.call(a,a[h],h)))?f+=c:--i;if(i)return f/i},hg.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},hg.median=function(a,b){var f,g=[],h=a.length,i=-1;if(1===arguments.length)for(;++i<h;)e(f=d(a[i]))&&g.push(f);else for(;++i<h;)e(f=d(b.call(a,a[i],i)))&&g.push(f);if(g.length)return hg.quantile(g.sort(c),.5)},hg.variance=function(a,b){var c,f,g=a.length,h=0,i=0,j=-1,k=0;if(1===arguments.length)for(;++j<g;)e(c=d(a[j]))&&(f=c-h,h+=f/++k,i+=f*(c-h));else for(;++j<g;)e(c=d(b.call(a,a[j],j)))&&(f=c-h,h+=f/++k,i+=f*(c-h));if(k>1)return i/(k-1)},hg.deviation=function(){var a=hg.variance.apply(this,arguments);return a?Math.sqrt(a):a};var sg=f(c);hg.bisectLeft=sg.left,hg.bisect=hg.bisectRight=sg.right,hg.bisector=function(a){return f(1===a.length?function(b,d){return c(a(b),d)}:a)},hg.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,f<2&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},hg.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},hg.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(d<0?0:d);c<d;)f[c]=[b=e,e=a[++c]];return f},hg.transpose=function(a){if(!(e=a.length))return[];for(var b=-1,c=hg.min(a,g),d=new Array(c);++b<c;)for(var e,f=-1,h=d[b]=new Array(e);++f<e;)h[f]=a[f][b];return d},hg.zip=function(){return hg.transpose(arguments)},hg.keys=function(a){var b=[];for(var c in a)b.push(c);return b},hg.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},hg.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},hg.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var tg=Math.abs;hg.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],f=h(tg(c)),g=-1;if(a*=f,b*=f,c*=f,c<0)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},hg.map=function(a,b){var c=new j;if(a instanceof j)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var ug="__proto__",vg="\0";i(j,{has:m,get:function(a){return this._[k(a)]},set:function(a,b){return this._[k(a)]=b},remove:n,keys:o,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:l(b),value:this._[b]});return a},size:p,empty:q,forEach:function(a){for(var b in this._)a.call(this,l(b),this._[b])}}),hg.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var i,k,l,m,n=-1,o=g.length,p=f[h++],q=new j;++n<o;)(m=q.get(i=p(k=g[n])))?m.push(k):q.set(i,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,h))}):(k={},l=function(c,d){k[c]=a(b,d,h)}),q.forEach(l),k}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(hg.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},hg.set=function(a){var b=new r;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b},i(r,{has:m,add:function(a){return this._[k(a+="")]=!0,a},remove:n,values:o,size:p,empty:q,forEach:function(a){for(var b in this._)a.call(this,l(b))}}),hg.behavior={},hg.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=t(a,b,b[c]);return a};var wg=["webkit","ms","moz","Moz","o","O"];hg.dispatch=function(){for(var a=new w,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=x(a);return a},w.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},hg.event=null,hg.requote=function(a){return a.replace(xg,"\\$&")};var xg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,yg={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},zg=function(a,b){return b.querySelector(a)},Ag=function(a,b){return b.querySelectorAll(a)},Bg=function(a,b){var c=a.matches||a[u(a,"matchesSelector")];return(Bg=function(a,b){return c.call(a,b)})(a,b)};"function"==typeof Sizzle&&(zg=function(a,b){
return Sizzle(a,b)[0]||null},Ag=Sizzle,Bg=Sizzle.matchesSelector),hg.selection=function(){return hg.select(kg.documentElement)};var Cg=hg.selection.prototype=[];Cg.select=function(a){var b,c,d,e,f=[];a=C(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return B(f)},Cg.selectAll=function(a){var b,c,d=[];a=D(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=jg(a.call(c,c.__data__,h,e))),b.parentNode=c);return B(d)};var Dg="http://www.w3.org/1999/xhtml",Eg={svg:"http://www.w3.org/2000/svg",xhtml:Dg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};hg.ns={prefix:Eg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&"xmlns"!==(c=a.slice(0,b))&&(a=a.slice(b+1)),Eg.hasOwnProperty(c)?{space:Eg[c],local:a}:a}},Cg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=hg.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(E(b,a[b]));return this}return this.each(E(a,b))},Cg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=H(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!G(a[e]).test(b))return!1;return!0}for(b in a)this.each(I(b,a[b]));return this}return this.each(I(a,b))},Cg.style=function(a,c,d){var e=arguments.length;if(e<3){if("string"!=typeof a){e<2&&(c="");for(d in a)this.each(K(d,a[d],c));return this}if(e<2){var f=this.node();return b(f).getComputedStyle(f,null).getPropertyValue(a)}d=""}return this.each(K(a,c,d))},Cg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(L(b,a[b]));return this}return this.each(L(a,b))},Cg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},Cg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},Cg.append=function(a){return a=M(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},Cg.insert=function(a,b){return a=M(a),b=C(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},Cg.remove=function(){return this.each(N)},Cg.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new j,s=new Array(g);for(d=-1;++d<g;)(e=a[d])&&(r.has(q=b.call(e,e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q);for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=O(f),r.set(q,!0);for(d=-1;++d<g;)d in s&&r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=O(f);for(;d<l;++d)o[d]=O(c[d]);for(;d<g;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),i.push(n),k.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=S([]),i=B([]),k=B([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return i.enter=function(){return h},i.exit=function(){return k},i},Cg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},Cg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=P(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return B(e)},Cg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},Cg.sort=function(a){a=Q.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},Cg.each=function(a){return R(this,function(b,c,d){a.call(b,b.__data__,c,d)})},Cg.call=function(a){var b=jg(arguments);return a.apply(b[0]=this,b),this},Cg.empty=function(){return!this.node()},Cg.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null},Cg.size=function(){var a=0;return R(this,function(){++a}),a};var Fg=[];hg.selection.enter=S,hg.selection.enter.prototype=Fg,Fg.append=Cg.append,Fg.empty=Cg.empty,Fg.node=Cg.node,Fg.call=Cg.call,Fg.size=Cg.size,Fg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return B(g)},Fg.insert=function(a,b){return arguments.length<2&&(b=T(this)),Cg.insert.call(this,a,b)},hg.select=function(b){var c;return"string"==typeof b?(c=[zg(b,kg)],c.parentNode=kg.documentElement):(c=[b],c.parentNode=a(b)),B([c])},hg.selectAll=function(a){var b;return"string"==typeof a?(b=jg(Ag(a,kg)),b.parentNode=kg.documentElement):(b=jg(a),b.parentNode=null),B([b])},Cg.on=function(a,b,c){var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b=!1);for(c in a)this.each(U(c,a[c],b));return this}if(d<2)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(U(a,b,c))};var Gg=hg.map({mouseenter:"mouseover",mouseleave:"mouseout"});kg&&Gg.forEach(function(a){"on"+a in kg&&Gg.remove(a)});var Hg,Ig=0;hg.mouse=function(a){return Y(a,z())};var Jg=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;hg.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=z().changedTouches),b)for(var d,e=0,f=b.length;e<f;++e)if((d=b[e]).identifier===c)return Y(a,d)},hg.behavior.drag=function(){function a(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function c(a,b,c,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o),n({type:"dragend"}))}var j,k=this,l=hg.event.target.correspondingElement||hg.event.target,m=k.parentNode,n=d.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=hg.select(c(l)).on(f+q,h).on(g+q,i),s=X(l),t=b(m,p);e?(j=e.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var d=A(a,"drag","dragstart","dragend"),e=null,f=c(v,hg.mouse,b,"mousemove","mouseup"),g=c(Z,hg.touch,s,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},hg.rebind(a,d,"on")},hg.touches=function(a,b){return arguments.length<2&&(b=z().touches),b?jg(b).map(function(b){var c=Y(a,b);return c.identifier=b.identifier,c}):[]};var Kg=1e-6,Lg=Kg*Kg,Mg=Math.PI,Ng=2*Mg,Og=Ng-Kg,Pg=Mg/2,Qg=Mg/180,Rg=180/Mg,Sg=Math.SQRT2,Tg=2,Ug=4;hg.interpolateZoom=function(a,b){var c,d,e=a[0],f=a[1],g=a[2],h=b[0],i=b[1],j=b[2],k=h-e,l=i-f,m=k*k+l*l;if(m<Lg)d=Math.log(j/g)/Sg,c=function(a){return[e+a*k,f+a*l,g*Math.exp(Sg*a*d)]};else{var n=Math.sqrt(m),o=(j*j-g*g+Ug*m)/(2*g*Tg*n),p=(j*j-g*g-Ug*m)/(2*j*Tg*n),q=Math.log(Math.sqrt(o*o+1)-o),r=Math.log(Math.sqrt(p*p+1)-p);d=(r-q)/Sg,c=function(a){var b=a*d,c=da(q),h=g/(Tg*n)*(c*ea(Sg*b+q)-ca(q));return[e+h*k,f+h*l,g*c/da(Sg*b+q)]}}return c.duration=1e3*d,c},hg.behavior.zoom=function(){function a(a){a.on(F,l).on(Wg+".zoom",n).on("dblclick.zoom",o).on(I,m)}function c(a){return[(a[0]-z.x)/z.k,(a[1]-z.y)/z.k]}function d(a){return[a[0]*z.k+z.x,a[1]*z.k+z.y]}function e(a){z.k=Math.max(C[0],Math.min(C[1],a))}function f(a,b){b=d(b),z.x+=a[0]-b[0],z.y+=a[1]-b[1]}function g(b,c,d,g){b.__chart__={x:z.x,y:z.y,k:z.k},e(Math.pow(2,g)),f(q=c,d),b=hg.select(b),D>0&&(b=b.transition().duration(D)),b.call(a.event)}function h(){v&&v.domain(u.range().map(function(a){return(a-z.x)/z.k}).map(u.invert)),x&&x.domain(w.range().map(function(a){return(a-z.y)/z.k}).map(w.invert))}function i(a){E++||a({type:"zoomstart"})}function j(a){h(),a({type:"zoom",scale:z.k,translate:[z.x,z.y]})}function k(a){--E||(a({type:"zoomend"}),q=null)}function l(){function a(){h=1,f(hg.mouse(e),m),j(g)}function d(){l.on(G,null).on(H,null),n(h),k(g)}var e=this,g=J.of(e,arguments),h=0,l=hg.select(b(e)).on(G,a).on(H,d),m=c(hg.mouse(e)),n=X(e);Pi.call(e),i(g)}function m(){function a(){var a=hg.touches(o);return n=z.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=c(a))}),a}function b(){var b=hg.event.target;hg.select(b).on(u,d).on(v,h),w.push(b);for(var c=hg.event.changedTouches,e=0,f=c.length;e<f;++e)q[c[e].identifier]=null;var i=a(),j=Date.now();if(1===i.length){if(j-t<500){var k=i[0];g(o,k,q[k.identifier],Math.floor(Math.log(z.k)/Math.LN2)+1),y()}t=j}else if(i.length>1){var k=i[0],l=i[1],m=k[0]-l[0],n=k[1]-l[1];r=m*m+n*n}}function d(){var a,b,c,d,g=hg.touches(o);Pi.call(o);for(var h=0,i=g.length;h<i;++h,d=null)if(c=g[h],d=q[c.identifier]){if(b)break;a=c,b=d}if(d){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+d[0])/2,(b[1]+d[1])/2],e(l*n)}t=null,f(a,b),j(p)}function h(){if(hg.event.touches.length){for(var b=hg.event.changedTouches,c=0,d=b.length;c<d;++c)delete q[b[c].identifier];for(var e in q)return void a()}hg.selectAll(w).on(s,null),x.on(F,l).on(I,m),A(),k(p)}var n,o=this,p=J.of(o,arguments),q={},r=0,s=".zoom-"+hg.event.changedTouches[0].identifier,u="touchmove"+s,v="touchend"+s,w=[],x=hg.select(o),A=X(o);b(),i(p),x.on(F,null).on(I,b)}function n(){var a=J.of(this,arguments);s?clearTimeout(s):(Pi.call(this),p=c(q=r||hg.mouse(this)),i(a)),s=setTimeout(function(){s=null,k(a)},50),y(),e(Math.pow(2,.002*Vg())*z.k),f(q,p),j(a)}function o(){var a=hg.mouse(this),b=Math.log(z.k)/Math.LN2;g(this,a,c(a),hg.event.shiftKey?Math.ceil(b)-1:Math.floor(b)+1)}var p,q,r,s,t,u,v,w,x,z={x:0,y:0,k:1},B=[960,500],C=Xg,D=250,E=0,F="mousedown.zoom",G="mousemove.zoom",H="mouseup.zoom",I="touchstart.zoom",J=A(a,"zoomstart","zoom","zoomend");return Wg||(Wg="onwheel"in kg?(Vg=function(){return-hg.event.deltaY*(hg.event.deltaMode?120:1)},"wheel"):"onmousewheel"in kg?(Vg=function(){return hg.event.wheelDelta},"mousewheel"):(Vg=function(){return-hg.event.detail},"MozMousePixelScroll")),a.event=function(a){a.each(function(){var a=J.of(this,arguments),b=z;Ni?hg.select(this).transition().each("start.zoom",function(){z=this.__chart__||{x:0,y:0,k:1},i(a)}).tween("zoom:zoom",function(){var c=B[0],d=B[1],e=q?q[0]:c/2,f=q?q[1]:d/2,g=hg.interpolateZoom([(e-z.x)/z.k,(f-z.y)/z.k,c/z.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=z={x:e-d[0]*h,y:f-d[1]*h,k:h},j(a)}}).each("interrupt.zoom",function(){k(a)}).each("end.zoom",function(){k(a)}):(this.__chart__=z,i(a),j(a),k(a))})},a.translate=function(b){return arguments.length?(z={x:+b[0],y:+b[1],k:z.k},h(),a):[z.x,z.y]},a.scale=function(b){return arguments.length?(z={x:z.x,y:z.y,k:null},e(+b),h(),a):z.k},a.scaleExtent=function(b){return arguments.length?(C=null==b?Xg:[+b[0],+b[1]],a):C},a.center=function(b){return arguments.length?(r=b&&[+b[0],+b[1]],a):r},a.size=function(b){return arguments.length?(B=b&&[+b[0],+b[1]],a):B},a.duration=function(b){return arguments.length?(D=+b,a):D},a.x=function(b){return arguments.length?(v=b,u=b.copy(),z={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),z={x:0,y:0,k:1},a):x},hg.rebind(a,J,"on")};var Vg,Wg,Xg=[0,1/0];hg.color=ga,ga.prototype.toString=function(){return this.rgb()+""},hg.hsl=ha;var Yg=ha.prototype=new ga;Yg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ha(this.h,this.s,this.l/a)},Yg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ha(this.h,this.s,a*this.l)},Yg.rgb=function(){return ia(this.h,this.s,this.l)},hg.hcl=ja;var Zg=ja.prototype=new ga;Zg.brighter=function(a){return new ja(this.h,this.c,Math.min(100,this.l+$g*(arguments.length?a:1)))},Zg.darker=function(a){return new ja(this.h,this.c,Math.max(0,this.l-$g*(arguments.length?a:1)))},Zg.rgb=function(){return ka(this.h,this.c,this.l).rgb()},hg.lab=la;var $g=18,_g=.95047,ah=1,bh=1.08883,ch=la.prototype=new ga;ch.brighter=function(a){return new la(Math.min(100,this.l+$g*(arguments.length?a:1)),this.a,this.b)},ch.darker=function(a){return new la(Math.max(0,this.l-$g*(arguments.length?a:1)),this.a,this.b)},ch.rgb=function(){return ma(this.l,this.a,this.b)},hg.rgb=ra;var dh=ra.prototype=new ga;dh.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e),new ra(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new ra(e,e,e)},dh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ra(a*this.r,a*this.g,a*this.b)},dh.hsl=function(){return wa(this.r,this.g,this.b)},dh.toString=function(){return"#"+ua(this.r)+ua(this.g)+ua(this.b)};var eh=hg.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});eh.forEach(function(a,b){eh.set(a,sa(b))}),hg.functor=Aa,hg.xhr=Ba(s),hg.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Ca(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;k<j;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new r,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},hg.csv=hg.dsv(",","text/csv"),hg.tsv=hg.dsv("\t","text/tab-separated-values");var fh,gh,hh,ih,jh=this[u(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};hg.timer=function(){Fa.apply(this,arguments)},hg.timer.flush=function(){Ha(),Ia()},hg.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var kh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Ka);hg.formatPrefix=function(a,b){var c=0;return(a=+a)&&(a<0&&(a*=-1),b&&(a=hg.round(a,Ja(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),kh[8+c/3]};var lh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,mh=hg.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=hg.round(a,Ja(a,b))).toFixed(Math.max(0,Math.min(20,Ja(a*(1+1e-15),b))))}}),nh=hg.time={},oh=Date;Na.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ph.setUTCDate.apply(this._,arguments)},setDay:function(){ph.setUTCDay.apply(this._,arguments)},setFullYear:function(){ph.setUTCFullYear.apply(this._,arguments)},setHours:function(){ph.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ph.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ph.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ph.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ph.setUTCSeconds.apply(this._,arguments)},setTime:function(){ph.setTime.apply(this._,arguments)}};var ph=Date.prototype;nh.year=Oa(function(a){return a=nh.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),nh.years=nh.year.range,nh.years.utc=nh.year.utc.range,nh.day=Oa(function(a){var b=new oh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),nh.days=nh.day.range,nh.days.utc=nh.day.utc.range,nh.dayOfYear=function(a){var b=nh.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=nh[a]=Oa(function(a){return(a=nh.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=nh.year(a).getDay();return Math.floor((nh.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});nh[a+"s"]=c.range,nh[a+"s"].utc=c.utc.range,nh[a+"OfYear"]=function(a){var c=nh.year(a).getDay();return Math.floor((nh.dayOfYear(a)+(c+b)%7)/7)}}),nh.week=nh.sunday,nh.weeks=nh.sunday.range,nh.weeks.utc=nh.sunday.utc.range,nh.weekOfYear=nh.sundayOfYear;var qh={"-":"",_:" ",0:"0"},rh=/^\s*\d+/,sh=/^%/;hg.locale=function(a){return{numberFormat:La(a),timeFormat:Qa(a)}};var th=hg.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});hg.format=th.numberFormat,hg.geo={},jb.prototype={s:0,t:0,add:function(a){kb(a,this.t,uh),kb(uh.s,this.s,this),this.s?this.t+=uh.t:this.s=uh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var uh=new jb;hg.geo.stream=function(a,b){a&&vh.hasOwnProperty(a.type)?vh[a.type](a,b):lb(a,b)};var vh={Feature:function(a,b){lb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)lb(c[d].geometry,b)}},wh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){mb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)mb(c[d],b,0)},Polygon:function(a,b){nb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)nb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)lb(c[d],b)}};hg.geo.area=function(a){return xh=0,hg.geo.stream(a,zh),xh};var xh,yh=new jb,zh={sphere:function(){xh+=4*Mg},point:v,lineStart:v,lineEnd:v,polygonStart:function(){yh.reset(),zh.lineStart=ob},polygonEnd:function(){var a=2*yh;xh+=a<0?4*Mg+a:a,zh.lineStart=zh.lineEnd=zh.point=v}};hg.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),b<l&&(l=b),b>n&&(n=b)}function b(b,c){var d=pb([b*Qg,c*Qg]);if(r){var e=rb(r,d),f=[e[1],-e[0],0],g=rb(f,e);ub(g),g=vb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Rg*j,q=tg(i)>180;if(q^(j*o<p&&p<j*b)){var s=g[1]*Rg;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(j*o<p&&p<j*b)){var s=-g[1]*Rg;s<l&&(l=s)}else c<l&&(l=c),c>n&&(n=c);q?b<o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(b<k&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=tg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;zh.point(a,c),b(a,c)}function f(){zh.lineStart()}function g(){e(p,q),zh.lineEnd(),tg(s)>Kg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,zh.polygonStart()},polygonEnd:function(){zh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,yh<0?(k=-(m=180),l=-(n=90)):s>Kg?n=90:s<-Kg&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],hg.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];d<b;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-(1/0),b=f.length-1,d=0,e=f[b];d<=b;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),hg.geo.centroid=function(a){Ah=Bh=Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=Kh=0,hg.geo.stream(a,Lh);var b=Ih,c=Jh,d=Kh,e=b*b+c*c+d*d;return e<Lg&&(b=Fh,c=Gh,d=Hh,Bh<Kg&&(b=Ch,c=Dh,d=Eh),e=b*b+c*c+d*d,e<Lg)?[NaN,NaN]:[Math.atan2(c,b)*Rg,ba(d/Math.sqrt(e))*Rg]};var Ah,Bh,Ch,Dh,Eh,Fh,Gh,Hh,Ih,Jh,Kh,Lh={sphere:v,point:xb,lineStart:zb,lineEnd:Ab,polygonStart:function(){Lh.lineStart=Bb},polygonEnd:function(){Lh.lineStart=zb}},Mh=Hb(Db,Lb,Nb,[-Mg,-Mg/2]),Nh=1e9;hg.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Rb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(hg.geo.conicEqualArea=function(){return Sb(Tb)}).raw=Tb,hg.geo.albers=function(){return hg.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},hg.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=hg.geo.albers(),g=hg.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=hg.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&e<.234&&d>=-.425&&d<-.214?g:e>=.166&&e<.234&&d>=-.214&&d<-.115?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Kg,l+.12*j+Kg],[k-.214*j-Kg,l+.234*j-Kg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Kg,l+.166*j+Kg],[k-.115*j-Kg,l+.234*j-Kg]]).stream(i).point,a},a.scale(1070)};var Oh,Ph,Qh,Rh,Sh,Th,Uh={point:v,lineStart:v,lineEnd:v,polygonStart:function(){Ph=0,Uh.lineStart=Ub},polygonEnd:function(){Uh.lineStart=Uh.lineEnd=Uh.point=v,Oh+=tg(Ph/2)}},Vh={point:Vb,lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},Wh={point:Yb,lineStart:Zb,lineEnd:$b,polygonStart:function(){Wh.lineStart=_b},polygonEnd:function(){Wh.point=Yb,Wh.lineStart=Zb,Wh.lineEnd=$b}};hg.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),hg.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Oh=0,hg.geo.stream(a,e(Uh)),Oh},a.centroid=function(a){return Ch=Dh=Eh=Fh=Gh=Hh=Ih=Jh=Kh=0,hg.geo.stream(a,e(Wh)),Kh?[Ih/Kh,Jh/Kh]:Hh?[Fh/Hh,Gh/Hh]:Eh?[Ch/Eh,Dh/Eh]:[NaN,NaN]},a.bounds=function(a){return Sh=Th=-(Qh=Rh=1/0),hg.geo.stream(a,e(Vh)),[[Qh,Rh],[Sh,Th]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||cc(a):s,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Wb:new ac(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(hg.geo.albersUsa()).context(null)},hg.geo.transform=function(a){return{stream:function(b){var c=new dc(b);for(var d in a)c[d]=a[d];return c}}},dc.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},hg.geo.projection=fc,hg.geo.projectionMutator=gc,(hg.geo.equirectangular=function(){return fc(ic)}).raw=ic.invert=ic,hg.geo.rotation=function(a){function b(b){return b=a(b[0]*Qg,b[1]*Qg),b[0]*=Rg,b[1]*=Rg,b}return a=kc(a[0]%360*Qg,a[1]*Qg,a.length>2?a[2]*Qg:0),b.invert=function(b){return b=a.invert(b[0]*Qg,b[1]*Qg),b[0]*=Rg,b[1]*=Rg,b},b},jc.invert=ic,hg.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=kc(-a[0]*Qg,-a[1]*Qg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Rg,a[1]*=Rg}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=oc((b=+d)*Qg,e*Qg),a):b},a.precision=function(d){return arguments.length?(c=oc(b*Qg,(e=+d)*Qg),a):e},a.angle(90)},hg.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Qg,e=a[1]*Qg,f=b[1]*Qg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},hg.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return hg.range(Math.ceil(f/q)*q,e,q).map(m).concat(hg.range(Math.ceil(j/r)*r,i,r).map(n)).concat(hg.range(Math.ceil(d/o)*o,c,o).filter(function(a){return tg(a%q)>Kg}).map(k)).concat(hg.range(Math.ceil(h/p)*p,g,p).filter(function(a){return tg(a%r)>Kg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=qc(h,g,90),l=rc(d,c,s),m=qc(j,i,90),n=rc(f,e,s),a):s},a.majorExtent([[-180,-90+Kg],[180,90-Kg]]).minorExtent([[-180,-80-Kg],[180,80+Kg]])},hg.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=sc,e=tc;return a.distance=function(){return hg.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},hg.geo.interpolate=function(a,b){return uc(a[0]*Qg,a[1]*Qg,b[0]*Qg,b[1]*Qg)},hg.geo.length=function(a){return Xh=0,hg.geo.stream(a,Yh),Xh};var Xh,Yh={sphere:v,point:v,lineStart:vc,
lineEnd:v,polygonStart:v,polygonEnd:v},Zh=wc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(hg.geo.azimuthalEqualArea=function(){return fc(Zh)}).raw=Zh;var $h=wc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},s);(hg.geo.azimuthalEquidistant=function(){return fc($h)}).raw=$h,(hg.geo.conicConformal=function(){return Sb(xc)}).raw=xc,(hg.geo.conicEquidistant=function(){return Sb(yc)}).raw=yc;var _h=wc(function(a){return 1/a},Math.atan);(hg.geo.gnomonic=function(){return fc(_h)}).raw=_h,zc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Pg]},(hg.geo.mercator=function(){return Ac(zc)}).raw=zc;var ai=wc(function(){return 1},Math.asin);(hg.geo.orthographic=function(){return fc(ai)}).raw=ai;var bi=wc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(hg.geo.stereographic=function(){return fc(bi)}).raw=bi,Bc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Pg]},(hg.geo.transverseMercator=function(){var a=Ac(Bc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Bc,hg.geom={},hg.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Aa(c),f=Aa(d),g=a.length,h=[],i=[];for(b=0;b<g;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Fc),b=0;b<g;b++)i.push([h[b][0],-h[b][1]]);var j=Ec(h),k=Ec(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Cc,d=Dc;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},hg.geom.polygon=function(a){return yg(a,ci),a};var ci=hg.geom.polygon.prototype=[];ci.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},ci.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},ci.clip=function(a){for(var b,c,d,e,f,g,h=Ic(a),i=-1,j=this.length-Ic(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Gc(g,k,e)?(Gc(f,k,e)||a.push(Hc(f,g,k,e)),a.push(g)):Gc(f,k,e)&&a.push(Hc(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var di,ei,fi,gi,hi,ii=[],ji=[];Qc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Sc),b.length},ad.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},bd.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=fd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(dd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ed(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(ed(this,c),a=c,c=a.U),c.C=!1,d.C=!0,dd(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?fd(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,dd(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,ed(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,dd(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,ed(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,dd(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,ed(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},hg.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return gd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Kg)*Kg,y:Math.round(g(a,b)/Kg)*Kg,i:b}})}var d=Cc,e=Dc,f=d,g=e,h=ki;return a?b(a):(b.links=function(a){return gd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return gd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Sc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&id(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Aa(d=a),b):d},b.y=function(a){return arguments.length?(g=Aa(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?ki:a,b):h===ki?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===ki?null:h&&h[1]},b)};var ki=[[-1e6,-1e6],[1e6,1e6]];hg.geom.delaunay=function(a){return hg.geom.voronoi().triangles(a)},hg.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(tg(i-c)+tg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=ld()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Aa(h),u=Aa(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;n<o;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;n<o;++n){var v=+t(k=a[n],n),w=+u(k,n);v<p&&(p=v),w<q&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=ld();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){md(a,z,p,q,r,s)},z.find=function(a){return nd(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Cc,i=Dc;return(g=arguments.length)?(h=jd,i=kd,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},hg.interpolateRgb=od,hg.interpolateObject=pd,hg.interpolateNumber=qd,hg.interpolateString=rd;var li=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mi=new RegExp(li.source,"g");hg.interpolate=sd,hg.interpolators=[function(a,b){var c=typeof b;return("string"===c?eh.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?od:rd:b instanceof ga?od:Array.isArray(b)?td:"object"===c&&isNaN(b)?pd:qd)(a,b)}],hg.interpolateArray=td;var ni=function(){return s},oi=hg.map({linear:ni,poly:Ad,quad:function(){return xd},cubic:function(){return yd},sin:function(){return Bd},exp:function(){return Cd},circle:function(){return Dd},elastic:Ed,back:Fd,bounce:function(){return Gd}}),pi=hg.map({"in":s,out:vd,"in-out":wd,"out-in":function(a){return wd(vd(a))}});hg.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=oi.get(c)||ni,d=pi.get(d)||s,ud(d(c.apply(null,ig.call(arguments,1))))},hg.interpolateHcl=Hd,hg.interpolateHsl=Id,hg.interpolateLab=Jd,hg.interpolateRound=Kd,hg.transform=function(a){var b=kg.createElementNS(hg.ns.prefix.svg,"g");return(hg.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Ld(c?c.matrix:qi)})(a)},Ld.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var qi={a:1,b:0,c:0,d:1,e:0,f:0};hg.interpolateTransform=Ud,hg.layout={},hg.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Xd(a[c]));return b}},hg.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=hg.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(hg.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Ng-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:p[s]},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},hg.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(h*h/r<i){if(i<p){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&i<p){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=hg.event.x,a.py=hg.event.y,i.resume()}var c,d,e,f,g,h,i={},j=hg.dispatch("start","tick","end"),k=[1,1],l=.9,m=ri,n=si,o=-30,p=ti,q=.1,r=.64,t=[],u=[];return i.tick=function(){if((e*=.99)<.005)return c=null,j.end({type:"end",alpha:e=0}),!0;var b,d,i,m,n,p,r,s,v,w=t.length,x=u.length;for(d=0;d<x;++d)i=u[d],m=i.source,n=i.target,s=n.x-m.x,v=n.y-m.y,(p=s*s+v*v)&&(p=e*g[d]*((p=Math.sqrt(p))-f[d])/p,s*=p,v*=p,n.x-=s*(r=m.weight+n.weight?m.weight/(m.weight+n.weight):.5),n.y-=v*r,m.x+=s*(r=1-r),m.y+=v*r);if((r=e*q)&&(s=k[0]/2,v=k[1]/2,d=-1,r))for(;++d<w;)i=t[d],i.x+=(s-i.x)*r,i.y+=(v-i.y)*r;if(o)for(ce(b=hg.geom.quadtree(t),e,h),d=-1;++d<w;)(i=t[d]).fixed||b.visit(a(i));for(d=-1;++d<w;)i=t[d],i.fixed?(i.x=i.px,i.y=i.py):(i.x-=(i.px-(i.px=i.x))*l,i.y-=(i.py-(i.py=i.y))*l);j.tick({type:"tick",alpha:e})},i.nodes=function(a){return arguments.length?(t=a,i):t},i.links=function(a){return arguments.length?(u=a,i):u},i.size=function(a){return arguments.length?(k=a,i):k},i.linkDistance=function(a){return arguments.length?(m="function"==typeof a?a:+a,i):m},i.distance=i.linkDistance,i.linkStrength=function(a){return arguments.length?(n="function"==typeof a?a:+a,i):n},i.friction=function(a){return arguments.length?(l=+a,i):l},i.charge=function(a){return arguments.length?(o="function"==typeof a?a:+a,i):o},i.chargeDistance=function(a){return arguments.length?(p=a*a,i):Math.sqrt(p)},i.gravity=function(a){return arguments.length?(q=+a,i):q},i.theta=function(a){return arguments.length?(r=a*a,i):Math.sqrt(r)},i.alpha=function(a){return arguments.length?(a=+a,e?a>0?e=a:(c.c=null,c.t=NaN,c=null,j.end({type:"end",alpha:e=0})):a>0&&(j.start({type:"start",alpha:e=a}),c=Fa(i.tick)),i):e},i.start=function(){function a(a,d){if(!c){for(c=new Array(e),i=0;i<e;++i)c[i]=[];for(i=0;i<j;++i){var f=u[i];c[f.source.index].push(f.target),c[f.target.index].push(f.source)}}for(var g,h=c[b],i=-1,k=h.length;++i<k;)if(!isNaN(g=h[i][a]))return g;return Math.random()*d}var b,c,d,e=t.length,j=u.length,l=k[0],p=k[1];for(b=0;b<e;++b)(d=t[b]).index=b,d.weight=0;for(b=0;b<j;++b)d=u[b],"number"==typeof d.source&&(d.source=t[d.source]),"number"==typeof d.target&&(d.target=t[d.target]),++d.source.weight,++d.target.weight;for(b=0;b<e;++b)d=t[b],isNaN(d.x)&&(d.x=a("x",l)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(f=[],"function"==typeof m)for(b=0;b<j;++b)f[b]=+m.call(this,u[b],b);else for(b=0;b<j;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;b<j;++b)g[b]=+n.call(this,u[b],b);else for(b=0;b<j;++b)g[b]=n;if(h=[],"function"==typeof o)for(b=0;b<e;++b)h[b]=+o.call(this,t[b],b);else for(b=0;b<e;++b)h[b]=o;return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){return d||(d=hg.behavior.drag().origin(s).on("dragstart.force",$d).on("drag.force",b).on("dragend.force",_d)),arguments.length?void this.on("mouseover.force",ae).on("mouseout.force",be).call(d):d},hg.rebind(i,j,"on")};var ri=20,si=1,ti=1/0;hg.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return fe(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=ie,c=ge,d=he;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(ee(b,function(a){a.children&&(a.value=0)}),fe(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},hg.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=hg.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},de(c,d)},hg.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(l<0?-1:1),o=hg.sum(j),p=o?(l-i*n)/o:0,q=hg.range(i),r=[];return null!=c&&q.sort(c===ui?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),q.forEach(function(a){r[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*p+n,padAngle:m}}),r}var b=Number,c=ui,d=0,e=Ng,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var ui={};hg.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=hg.permute(j,l),k=hg.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;o<r;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;n<m;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=s,c=ne,d=oe,e=me,f=ke,g=le;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:vi.get(b)||ne,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:wi.get(b)||oe,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var vi=hg.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(pe),f=a.map(qe),g=hg.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;b<d;++b)c=g[b],h<i?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return hg.range(a.length).reverse()},"default":ne}),wi=hg.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;c<f;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;c<m;++c){for(b=0,e=0;b<k;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];b<k;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);d<b;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,i<j&&(j=i)}for(c=0;c<m;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];if(d)for(b=0;b<e;b++)a[b][c][1]/=d;else for(b=0;b<e;b++)a[b][c][1]=g}for(c=0;c<f;++c)h[c]=0;return h},zero:oe});hg.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[hg.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=ue,e=se;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Aa(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return te(a,b)}:Aa(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},hg.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,fe(h,function(a){a.r=+k(a.value)}),fe(h,ze),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;fe(h,function(a){a.r+=l}),fe(h,ze),fe(h,function(a){a.r-=l})}return Ce(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=hg.layout.hierarchy().sort(ve),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},de(a,c)},hg.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(fe(m,c),m.parent.m=-m.z,ee(m,d),j)ee(l,f);else{var n=l,o=l,p=l;ee(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);ee(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;g<h;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Ie(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=Ge(g),e=Fe(e),g&&e;)i=Fe(i),f=Ge(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(He(Je(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!Ge(f)&&(f.t=g,f.m+=l-k),e&&!Fe(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=hg.layout.hierarchy().sort(null).value(null),h=Ee,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},de(a,g)},hg.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;fe(i,function(a){var b=a.children;b&&b.length?(a.x=Le(b),a.y=Ke(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Me(i),l=Ne(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return fe(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=hg.layout.hierarchy().sort(null).value(null),c=Ee,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},de(a,b)},hg.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(b<0?0:b),c.area=isNaN(d)||d<=0?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(c<f&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=f.y=0,f.value?(f.dx=j[0],f.dy=j[1]):f.dx=f.dy=0,g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=hg.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Oe,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Oe(b):Pe(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Pe(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Oe:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},de(f,h)},hg.random={normal:function(a,b){var c=arguments.length;return c<2&&(b=1),c<1&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=hg.random.normal.apply(hg,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=hg.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}},hg.scale={};var xi={floor:s,ceil:s};hg.scale.linear=function(){return We([0,1],[0,1],sd,!1)};var yi={s:1,g:1,p:1,r:1,e:1};hg.scale.log=function(){return cf(hg.scale.linear().domain([0,1]),10,!0,[1,10])};var zi=hg.format(".0e"),Ai={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};hg.scale.pow=function(){return df(hg.scale.linear(),1,[0,1])},hg.scale.sqrt=function(){return hg.scale.pow().exponent(.5)},hg.scale.ordinal=function(){return ff([],{t:"range",a:[[]]})},hg.scale.category10=function(){return hg.scale.ordinal().range(Bi)},hg.scale.category20=function(){return hg.scale.ordinal().range(Ci)},hg.scale.category20b=function(){return hg.scale.ordinal().range(Di)},hg.scale.category20c=function(){return hg.scale.ordinal().range(Ei)};var Bi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ta),Ci=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ta),Di=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ta),Ei=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ta);hg.scale.quantile=function(){return gf([],[])},hg.scale.quantize=function(){return hf(0,1,[0,1])},hg.scale.threshold=function(){return jf([.5],[0,1])},hg.scale.identity=function(){return kf([0,1])},hg.svg={},hg.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Pg,l=h.apply(this,arguments)-Pg,m=Math.abs(l-k),n=k>l?0:1;if(j<a&&(o=j,j=a,a=o),m>=Og)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===Fi?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=ba(q/j*Math.sin(r))),a&&(A=ba(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Mg?0:1;if(B&&rf(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Mg?0:1;if(A&&rf(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if(m>Kg&&(o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=a<j^n?0:1;var H=o,I=o;if(m<Mg){var J=null==y?[w,x]:null==u?[s,t]:Hc([s,t],[y,z],[u,v],[w,x]),K=s-J[0],L=t-J[1],M=u-J[0],N=v-J[1],O=1/Math.sin(Math.acos((K*M+L*N)/(Math.sqrt(K*K+L*L)*Math.sqrt(M*M+N*N)))/2),P=Math.sqrt(J[0]*J[0]+J[1]*J[1]);I=Math.min(o,(a-P)/(O-1)),H=Math.min(o,(j-P)/(O+1))}if(null!=u){var Q=sf(null==y?[w,x]:[y,z],[s,t],j,H,n),R=sf([u,v],[w,x],j,H,n);o===H?C.push("M",Q[0],"A",H,",",H," 0 0,",p," ",Q[1],"A",j,",",j," 0 ",1-n^rf(Q[1][0],Q[1][1],R[1][0],R[1][1]),",",n," ",R[1],"A",H,",",H," 0 0,",p," ",R[0]):C.push("M",Q[0],"A",H,",",H," 0 1,",p," ",R[0])}else C.push("M",s,",",t);if(null!=y){var S=sf([s,t],[y,z],a,-I,n),T=sf([w,x],null==u?[s,t]:[u,v],a,-I,n);o===I?C.push("L",T[0],"A",I,",",I," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^rf(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",I,",",I," 0 0,",p," ",S[0]):C.push("L",T[0],"A",I,",",I," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=mf,d=nf,e=lf,f=Fi,g=of,h=pf,i=qf;return a.innerRadius=function(b){return arguments.length?(c=Aa(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Aa(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Aa(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==Fi?Fi:Aa(b),a):f},a.startAngle=function(b){return arguments.length?(g=Aa(b),a):g},a.endAngle=function(b){return arguments.length?(h=Aa(b),a):h},a.padAngle=function(b){return arguments.length?(i=Aa(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Pg;return[Math.cos(b)*a,Math.sin(b)*a]},a};var Fi="auto";hg.svg.line=function(){return tf(s)};var Gi=hg.map({linear:uf,"linear-closed":vf,step:wf,"step-before":xf,"step-after":yf,basis:Ef,"basis-open":Ff,"basis-closed":Gf,bundle:Hf,cardinal:Bf,"cardinal-open":zf,"cardinal-closed":Af,monotone:Nf});Gi.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Hi=[0,2/3,1/3,0],Ii=[0,1/3,2/3,0],Ji=[0,1/6,2/3,1/6];hg.svg.line.radial=function(){var a=tf(Of);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},xf.reverse=yf,yf.reverse=xf,hg.svg.area=function(){return Pf(s)},hg.svg.area.radial=function(){var a=Pf(Of);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},hg.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Pg,k=j.call(a,e,d)-Pg;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Mg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=sc,g=tc,h=Qf,i=of,j=pf;return a.radius=function(b){return arguments.length?(h=Aa(b),a):h},a.source=function(b){return arguments.length?(f=Aa(b),a):f},a.target=function(b){return arguments.length?(g=Aa(b),a):g},a.startAngle=function(b){return arguments.length?(i=Aa(b),a):i},a.endAngle=function(b){return arguments.length?(j=Aa(b),a):j},a},hg.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=sc,c=tc,d=Rf;return a.source=function(c){return arguments.length?(b=Aa(c),a):b},a.target=function(b){return arguments.length?(c=Aa(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},hg.svg.diagonal.radial=function(){var a=hg.svg.diagonal(),b=Rf,c=a.projection;return a.projection=function(a){return arguments.length?c(Sf(b=a)):b},a},hg.svg.symbol=function(){function a(a,d){return(Ki.get(b.call(this,a,d))||Vf)(c.call(this,a,d))}var b=Uf,c=Tf;return a.type=function(c){return arguments.length?(b=Aa(c),a):b},a.size=function(b){return arguments.length?(c=Aa(b),a):c},a};var Ki=hg.map({circle:Vf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Mi)),c=b*Mi;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Li),c=b*Li/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Li),c=b*Li/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});hg.svg.symbolTypes=Ki.keys();var Li=Math.sqrt(3),Mi=Math.tan(30*Qg);Cg.transition=function(a){for(var b,c,d=Ni||++Ri,e=$f(a),f=[],g=Oi||{time:Date.now(),ease:zd,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&_f(c,k,e,d,g),b.push(c)}return Xf(f,e,d)},Cg.interrupt=function(a){return this.each(null==a?Pi:Wf($f(a)))};var Ni,Oi,Pi=Wf($f()),Qi=[],Ri=0;Qi.call=Cg.call,Qi.empty=Cg.empty,Qi.node=Cg.node,Qi.size=Cg.size,hg.transition=function(a,b){return a&&a.transition?Ni?a.transition(b):a:hg.selection().transition(a)},hg.transition.prototype=Qi,Qi.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=C(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),_f(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Xf(g,f,e)},Qi.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=D(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&_f(e,o,h,g,f),b.push(e)}return Xf(i,h,g)},Qi.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=P(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Xf(e,this.namespace,this.id)},Qi.tween=function(a,b){
var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):R(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Qi.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Ud:sd,h=hg.ns.qualify(a);return Yf(this,"attr."+a,b,h.local?f:e)},Qi.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=hg.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Qi.style=function(a,c,d){function e(){this.style.removeProperty(a)}function f(c){return null==c?e:(c+="",function(){var e,f=b(this).getComputedStyle(this,null).getPropertyValue(a);return f!==c&&(e=sd(f,c),function(b){this.style.setProperty(a,e(b),d)})})}var g=arguments.length;if(g<3){if("string"!=typeof a){g<2&&(c="");for(d in a)this.style(d,a[d],c);return this}d=""}return Yf(this,"style."+a,c,f)},Qi.styleTween=function(a,c,d){function e(e,f){var g=c.call(this,e,f,b(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),d)}}return arguments.length<3&&(d=""),this.tween("style."+a,e)},Qi.text=function(a){return Yf(this,"text",a,Zf)},Qi.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Qi.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=hg.ease.apply(hg,arguments)),R(this,function(d){d[c][b].ease=a}))},Qi.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:R(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Qi.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:R(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Qi.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Oi,f=Ni;try{Ni=c,R(this,function(b,e,f){Oi=b[d][c],a.call(b,b.__data__,e,f)})}finally{Oi=e,Ni=f}}else R(this,function(e){var f=e[d][c];(f.event||(f.event=hg.dispatch("start","end","interrupt"))).on(a,b)});return this},Qi.transition=function(){for(var a,b,c,d,e=this.id,f=++Ri,g=this.namespace,h=[],i=0,j=this.length;i<j;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;k<l;k++)(c=b[k])&&(d=c[g][e],_f(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Xf(h,g,f)},hg.svg.axis=function(){function a(a){a.each(function(){var a,j=hg.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):s:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Kg),q=hg.transition(o.exit()).style("opacity",Kg).remove(),r=hg.transition(o.order()).style("opacity",1),t=Math.max(e,0)+g,u=Re(l),v=j.selectAll(".domain").data([0]),w=(v.enter().append("path").attr("class","domain"),hg.transition(v));p.append("line"),p.append("text");var x,y,z,A,B=p.select("line"),C=r.select("line"),D=o.select("text").text(n),E=p.select("text"),F=r.select("text"),G="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=ag,x="x",z="y",y="x2",A="y2",D.attr("dy",G<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+u[0]+","+G*f+"V0H"+u[1]+"V"+G*f)):(a=bg,x="y",z="x",y="y2",A="x2",D.attr("dy",".32em").style("text-anchor",G<0?"end":"start"),w.attr("d","M"+G*f+","+u[0]+"H0V"+u[1]+"H"+G*f)),B.attr(A,G*e),E.attr(z,G*t),C.attr(y,0).attr(A,G*e),F.attr(x,0).attr(z,G*t),l.rangeBand){var H=l,I=H.rangeBand()/2;k=l=function(a){return H(a)+I}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=hg.scale.linear(),d=Si,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Ti?b+"":Si,a):d},a.ticks=function(){return arguments.length?(h=jg(arguments),a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Si="bottom",Ti={top:1,right:1,bottom:1,left:1};hg.svg.brush=function(){function a(b){b.each(function(){var b=hg.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=b.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),b.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=b.selectAll(".resize").data(p,s);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Ui[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var i,l=hg.transition(b),m=hg.transition(g);j&&(i=Re(j),m.attr("x",i[0]).attr("width",i[1]-i[0]),d(l)),k&&(i=Re(k),m.attr("y",i[0]).attr("height",i[1]-i[0]),e(l)),c(l)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",l[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",m[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function f(){32==hg.event.keyCode&&(D||(t=null,F[0]-=l[1],F[1]-=m[1],D=2),y())}function p(){32==hg.event.keyCode&&2==D&&(F[0]+=l[1],F[1]+=m[1],D=0,y())}function q(){var a=hg.mouse(v),b=!1;u&&(a[0]+=u[0],a[1]+=u[1]),D||(hg.event.altKey?(t||(t=[(l[0]+l[1])/2,(m[0]+m[1])/2]),F[0]=l[+(a[0]<t[0])],F[1]=m[+(a[1]<t[1])]):t=null),B&&r(a,j,0)&&(d(z),b=!0),C&&r(a,k,1)&&(e(z),b=!0),b&&(c(z),x({type:"brush",mode:D?"move":"resize"}))}function r(a,b,c){var d,e,f=Re(b),i=f[0],j=f[1],k=F[c],p=c?m:l,q=p[1]-p[0];if(D&&(i-=k,j-=q+k),d=(c?o:n)?Math.max(i,Math.min(j,a[c])):a[c],D?e=(d+=k)+q:(t&&(k=Math.max(i,Math.min(j,2*t[c]-d))),k<d?(e=d,d=k):e=k),p[0]!=d||p[1]!=e)return c?h=null:g=null,p[0]=d,p[1]=e,!0}function s(){q(),z.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),hg.select("body").style("cursor",null),G.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),x({type:"brushend"})}var t,u,v=this,w=hg.select(hg.event.target),x=i.of(v,arguments),z=hg.select(v),A=w.datum(),B=!/^(n|s)$/.test(A)&&j,C=!/^(e|w)$/.test(A)&&k,D=w.classed("extent"),E=X(v),F=hg.mouse(v),G=hg.select(b(v)).on("keydown.brush",f).on("keyup.brush",p);if(hg.event.changedTouches?G.on("touchmove.brush",q).on("touchend.brush",s):G.on("mousemove.brush",q).on("mouseup.brush",s),z.interrupt().selectAll("*").interrupt(),D)F[0]=l[0]-F[0],F[1]=m[0]-F[1];else if(A){var H=+/w$/.test(A),I=+/^n/.test(A);u=[l[1-H]-F[0],m[1-I]-F[1]],F[0]=l[H],F[1]=m[I]}else hg.event.altKey&&(t=F.slice());z.style("pointer-events","none").selectAll(".resize").style("display",null),hg.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),q()}var g,h,i=A(a,"brushstart","brush","brushend"),j=null,k=null,l=[0,0],m=[0,0],n=!0,o=!0,p=Vi[0];return a.event=function(a){a.each(function(){var a=i.of(this,arguments),b={x:l,y:m,i:g,j:h},c=this.__chart__||b;this.__chart__=b,Ni?hg.select(this).transition().each("start.brush",function(){g=c.i,h=c.j,l=c.x,m=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=td(l,b.x),d=td(m,b.y);return g=h=null,function(e){l=b.x=c(e),m=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i,h=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(j=b,p=Vi[!j<<1|!k],a):j},a.y=function(b){return arguments.length?(k=b,p=Vi[!j<<1|!k],a):k},a.clamp=function(b){return arguments.length?(j&&k?(n=!!b[0],o=!!b[1]):j?n=!!b:k&&(o=!!b),a):j&&k?[n,o]:j?n:k?o:null},a.extent=function(b){var c,d,e,f,i;return arguments.length?(j&&(c=b[0],d=b[1],k&&(c=c[0],d=d[0]),g=[c,d],j.invert&&(c=j(c),d=j(d)),d<c&&(i=c,c=d,d=i),c==l[0]&&d==l[1]||(l=[c,d])),k&&(e=b[0],f=b[1],j&&(e=e[1],f=f[1]),h=[e,f],k.invert&&(e=k(e),f=k(f)),f<e&&(i=e,e=f,f=i),e==m[0]&&f==m[1]||(m=[e,f])),a):(j&&(g?(c=g[0],d=g[1]):(c=l[0],d=l[1],j.invert&&(c=j.invert(c),d=j.invert(d)),d<c&&(i=c,c=d,d=i))),k&&(h?(e=h[0],f=h[1]):(e=m[0],f=m[1],k.invert&&(e=k.invert(e),f=k.invert(f)),f<e&&(i=e,e=f,f=i))),j&&k?[[c,e],[d,f]]:j?[c,d]:k&&[e,f])},a.clear=function(){return a.empty()||(l=[0,0],m=[0,0],g=h=null),a},a.empty=function(){return!!j&&l[0]==l[1]||!!k&&m[0]==m[1]},hg.rebind(a,i,"on")};var Ui={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wi=nh.format=th.timeFormat,Xi=Wi.utc,Yi=Xi("%Y-%m-%dT%H:%M:%S.%LZ");Wi.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?cg:Yi,cg.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},cg.toString=Yi.toString,nh.second=Oa(function(a){return new oh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),nh.seconds=nh.second.range,nh.seconds.utc=nh.second.utc.range,nh.minute=Oa(function(a){return new oh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),nh.minutes=nh.minute.range,nh.minutes.utc=nh.minute.utc.range,nh.hour=Oa(function(a){var b=a.getTimezoneOffset()/60;return new oh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),nh.hours=nh.hour.range,nh.hours.utc=nh.hour.utc.range,nh.month=Oa(function(a){return a=nh.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),nh.months=nh.month.range,nh.months.utc=nh.month.utc.range;var Zi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],$i=[[nh.second,1],[nh.second,5],[nh.second,15],[nh.second,30],[nh.minute,1],[nh.minute,5],[nh.minute,15],[nh.minute,30],[nh.hour,1],[nh.hour,3],[nh.hour,6],[nh.hour,12],[nh.day,1],[nh.day,2],[nh.week,1],[nh.month,1],[nh.month,3],[nh.year,1]],_i=Wi.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Db]]),aj={range:function(a,b,c){return hg.range(Math.ceil(a/c)*c,+b,c).map(eg)},floor:s,ceil:s};$i.year=nh.year,nh.scale=function(){return dg(hg.scale.linear(),$i,_i)};var bj=$i.map(function(a){return[a[0].utc,a[1]]}),cj=Xi.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Db]]);bj.year=nh.year.utc,nh.scale.utc=function(){return dg(hg.scale.linear(),bj,cj)},hg.text=Ba(function(a){return a.responseText}),hg.json=function(a,b){return Ca(a,"application/json",fg,b)},hg.html=function(a,b){return Ca(a,"text/html",gg,b)},hg.xml=Ba(function(a){return a.responseXML}),"function"==typeof define&&define.amd?(this.d3=hg,define(hg)):"object"==typeof module&&module.exports?module.exports=hg:this.d3=hg}(),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.topojson=a.topojson||{})}(this,function(a){"use strict";function b(){}function c(a){if(!a)return b;var c,d,e=a.scale[0],f=a.scale[1],g=a.translate[0],h=a.translate[1];return function(a,b){b||(c=d=0),a[0]=(c+=a[0])*e+g,a[1]=(d+=a[1])*f+h}}function d(a){if(!a)return b;var c,d,e=a.scale[0],f=a.scale[1],g=a.translate[0],h=a.translate[1];return function(a,b){b||(c=d=0);var i=Math.round((a[0]-g)/e),j=Math.round((a[1]-h)/f);a[0]=i-c,a[1]=j-d,c=i,d=j}}function e(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function f(a,b){for(var c=0,d=a.length;c<d;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function g(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return h(a,b)})}:h(a,b)}function h(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:i(a,b)};return null==b.id&&delete c.id,c}function i(a,b){function d(a,b){b.length&&b.pop();for(var c,d=l[a<0?~a:a],f=0,g=d.length;f<g;++f)b.push(c=d[f].slice()),k(c,f);a<0&&e(b,g)}function f(a){return a=a.slice(),k(a,0),a}function g(a){for(var b=[],c=0,e=a.length;c<e;++c)d(a[c],b);return b.length<2&&b.push(b[0].slice()),b}function h(a){for(var b=g(a);b.length<4;)b.push(b[0].slice());return b}function i(a){return a.map(h)}function j(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(j)}:b in m?{type:b,coordinates:m[b](a)}:null}var k=c(a.transform),l=a.arcs,m={Point:function(a){return f(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(f)},LineString:function(a){return g(a.arcs)},MultiLineString:function(a){return a.arcs.map(g)},Polygon:function(a){return i(a.arcs)},MultiPolygon:function(a){return a.arcs.map(i)}};return j(b)}function j(a,b){function c(b){var c,d=a.arcs[b<0?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],b<0?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[a<0?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[c<0?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[a<0?~a:a]||h.push([a])}),h}function k(a){return i(a,l.apply(this,arguments))}function l(a,b,c){function d(a){var b=a<0?~a:a;(k[b]||(k[b]=[])).push({i:a,g:i})}function e(a){a.forEach(d)}function f(a){a.forEach(e)}function g(a){"GeometryCollection"===a.type?a.geometries.forEach(g):a.type in l&&(i=a,l[a.type](a.arcs))}var h=[];if(arguments.length>1){var i,k=[],l={LineString:e,MultiLineString:f,Polygon:f,MultiPolygon:function(a){a.forEach(f)}};g(b),k.forEach(arguments.length<3?function(a){h.push(a[0].i)}:function(a){c(a[0].g,a[a.length-1].g)&&h.push(a[0].i)})}else for(var m=0,n=a.arcs.length;m<n;++m)h.push(m);return{type:"MultiLineString",arcs:j(a,h)}}function m(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function n(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return f/2}function o(a){return i(a,p.apply(this,arguments))}function p(a,b){function c(a){a.forEach(function(b){b.forEach(function(b){(e[b=b<0?~b:b]||(e[b]=[])).push(a)})}),f.push(a)}function d(b){return Math.abs(n(i(a,{type:"Polygon",arcs:[b]}).coordinates[0]))}var e={},f=[],g=[];return b.forEach(function(a){"Polygon"===a.type?c(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(c)}),f.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,g.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){e[a<0?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),f.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:g.map(function(b){var c,f=[];if(b.forEach(function(a){a.forEach(function(a){a.forEach(function(a){e[a<0?~a:a].length<2&&f.push(a)})})}),f=j(a,f),(c=f.length)>1)for(var g,h,i=1,k=d(f[0]);i<c;++i)(g=d(f[i]))>k&&(h=f[0],f[0]=f[i],f[i]=h,k=g);return f})}}function q(a){function b(a,b){a.forEach(function(a){a<0&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in h&&h[a.type](a.arcs,b)}var e={},g=a.map(function(){return[]}),h={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var i in e)for(var j=e[i],k=j.length,l=0;l<k;++l)for(var m=l+1;m<k;++m){var n,o=j[l],p=j[m];(n=g[o])[i=f(n,p)]!==p&&n.splice(i,0,p),(n=g[p])[i=f(n,o)]!==o&&n.splice(i,0,o)}return g}function r(a,b){return a[1][2]-b[1][2]}function s(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(r(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(f<e&&r(d[f],h)<0&&(h=d[g=f]),c<e&&r(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(e<=0)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;if(d[g]===c)return g!==--e&&(f=d[e],(r(f,c)<0?a:b)(d[f._=g]=f,g)),g},c}function t(a,b){function e(a){h.remove(a),a[1][2]=b(a),h.push(a)}var f=c(a.transform),g=d(a.transform),h=s();return b||(b=m),a.arcs.forEach(function(a){var c,d,i,j,k=[],l=0;for(d=0,i=a.length;d<i;++d)j=a[d],f(a[d]=[j[0],j[1],1/0],d);for(d=1,i=a.length-1;d<i;++d)c=a.slice(d-1,d+2),c[1][2]=b(c),k.push(c),h.push(c);for(d=0,i=k.length;d<i;++d)c=k[d],c.previous=k[d-1],c.next=k[d+1];for(;c=h.pop();){var m=c.previous,n=c.next;c[1][2]<l?c[1][2]=l:l=c[1][2],m&&(m.next=n,m[2]=c[2],e(m)),n&&(n.previous=m,n[0]=c[0],e(n))}a.forEach(g)}),a}var u="1.6.26";a.version=u,a.mesh=k,a.meshArcs=l,a.merge=o,a.mergeArcs=p,a.feature=g,a.neighbors=q,a.presimplify=t}),function(){var a={};a.dev=!1,a.tooltip=a.tooltip||{},a.utils=a.utils||{},a.models=a.models||{},a.charts={},a.logs={},a.dom={},"undefined"!=typeof module&&"undefined"!=typeof exports&&"undefined"==typeof d3&&(d3=require("d3")),a.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),a.dev&&(a.dispatch.on("render_start",function(b){a.logs.startTime=+new Date}),a.dispatch.on("render_end",function(b){a.logs.endTime=+new Date,a.logs.totalTime=a.logs.endTime-a.logs.startTime,a.log("total",a.logs.totalTime)})),a.log=function(){if(a.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(a.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){var b=Function.prototype.bind.call(console.log,console);b.apply(console,arguments)}return arguments[arguments.length-1]},a.deprecated=function(a,b){console&&console.warn&&console.warn("nvd3 warning: `"+a+"` has been deprecated. ",b||"")},a.render=function(b){b=b||1,a.render.active=!0,a.dispatch.render_start();var c=function(){for(var d,e,f=0;f<b&&(e=a.render.queue[f]);f++)d=e.generate(),typeof e.callback==typeof Function&&e.callback(d);a.render.queue.splice(0,f),a.render.queue.length?setTimeout(c):(a.dispatch.render_end(),a.render.active=!1)};setTimeout(c)},a.render.active=!1,a.render.queue=[],a.addGraph=function(b){typeof arguments[0]==typeof Function&&(b={generate:arguments[0],callback:arguments[1]}),a.render.queue.push(b),a.render.active||a.render()},"undefined"!=typeof module&&"undefined"!=typeof exports&&(module.exports=a),"undefined"!=typeof window&&(window.nv=a),a.dom.write=function(a){return void 0!==window.fastdom?fastdom.mutate(a):a()},a.dom.read=function(a){return void 0!==window.fastdom?fastdom.measure(a):a()},a.interactiveGuideline=function(){"use strict";function b(l){l.each(function(l){function m(){var a=d3.mouse(this),d=a[0],e=a[1],h=!0,i=!1;if(k&&(d=d3.event.offsetX,e=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(h=!1),d3.event.target.className.baseVal.match("nv-legend")&&(i=!0)),h&&(d-=c.left,e-=c.top),"mouseout"===d3.event.type||d<0||e<0||d>o||e>p||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||i){if(k&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(j.nvPointerEventsClass)))return;return g.elementMouseout({mouseX:d,mouseY:e}),b.renderGuideLine(null),void j.hidden(!0)}j.hidden(!1);var l="function"==typeof f.rangeBands,m=void 0;if(l){var n=d3.bisect(f.range(),d)-1;if(!(f.range()[n]+f.rangeBand()>=d))return g.elementMouseout({mouseX:d,mouseY:e}),b.renderGuideLine(null),void j.hidden(!0);m=f.domain()[d3.bisect(f.range(),d)-1]}else m=f.invert(d);g.elementMousemove({mouseX:d,mouseY:e,pointXValue:m}),"dblclick"===d3.event.type&&g.elementDblclick({mouseX:d,mouseY:e,pointXValue:m}),"click"===d3.event.type&&g.elementClick({mouseX:d,mouseY:e,pointXValue:m}),"mousedown"===d3.event.type&&g.elementMouseDown({mouseX:d,mouseY:e,pointXValue:m}),"mouseup"===d3.event.type&&g.elementMouseUp({mouseX:d,mouseY:e,pointXValue:m})}var n=d3.select(this),o=d||960,p=e||400,q=n.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([l]),r=q.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");r.append("g").attr("class","nv-interactiveGuideLine"),i&&(i.on("touchmove",m).on("mousemove",m,!0).on("mouseout",m,!0).on("mousedown",m,!0).on("mouseup",m,!0).on("dblclick",m).on("click",m),b.guideLine=null,b.renderGuideLine=function(c){h&&(b.guideLine&&b.guideLine.attr("x1")===c||a.dom.write(function(){var b=q.select(".nv-interactiveGuideLine").selectAll("line").data(null!=c?[a.utils.NaNtoZero(c)]:[],String);b.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",function(a){return a}).attr("y1",p).attr("y2",0),b.exit().remove()}))})})}var c={left:0,top:0},d=null,e=null,f=d3.scale.linear(),g=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),h=!0,i=null,j=a.models.tooltip(),k=window.ActiveXObject;return j.duration(0).hideDelay(0).hidden(!1),b.dispatch=g,b.tooltip=j,b.margin=function(a){return arguments.length?(c.top="undefined"!=typeof a.top?a.top:c.top,c.left="undefined"!=typeof a.left?a.left:c.left,b):c},b.width=function(a){return arguments.length?(d=a,b):d},b.height=function(a){return arguments.length?(e=a,b):e},b.xScale=function(a){return arguments.length?(f=a,b):f},b.showGuideLine=function(a){return arguments.length?(h=a,b):h},b.svgContainer=function(a){return arguments.length?(i=a,b):i},b},a.interactiveBisect=function(a,b,c){"use strict";if(!(a instanceof Array))return null;var d;d="function"!=typeof c?function(a){return a.x}:c;var e=function(a,b){return d(a)-b},f=d3.bisector(e).left,g=d3.max([0,f(a,b)-1]),h=d(a[g]);if("undefined"==typeof h&&(h=g),h===b)return g;var i=d3.min([g+1,a.length-1]),j=d(a[i]);return"undefined"==typeof j&&(j=i),Math.abs(j-b)>=Math.abs(h-b)?g:i},a.nearestValueIndex=function(a,b,c){"use strict";var d=1/0,e=null;return a.forEach(function(a,f){var g=Math.abs(b-a);null!=a&&g<=d&&g<c&&(d=g,e=f)}),e},a.models.tooltip=function(){"use strict";function b(){if(!l||!l.node()){var a=[1];l=d3.select(document.body).selectAll(".nvtooltip").data(a),l.enter().append("div").attr("class","nvtooltip "+(i?i:"xy-tooltip")).attr("id",d).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed(q,!0).classed(q,!0),l.exit().remove()}}function c(){if(n&&w(e))return a.dom.write(function(){b();var a=u(e);a&&(l.node().innerHTML=a),y()}),c}var d="nvtooltip-"+Math.floor(1e5*Math.random()),e=null,f="w",g=25,h=0,i=null,j=!0,k=200,l=null,m={left:null,top:null},n=!0,o=100,p=!0,q="nv-pointer-events-none",r=function(a,b){return a},s=function(a){return a},t=function(a,b){return a},u=function(a){if(null===a)return"";var b=d3.select(document.createElement("table"));if(p){var c=b.selectAll("thead").data([a]).enter().append("thead");c.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(s(a.value))}var d=b.selectAll("tbody").data([a]).enter().append("tbody"),e=d.selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});e.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color}),e.append("td").classed("key",!0).classed("total",function(a){return!!a.total}).html(function(a,b){return t(a.key,b)}),e.append("td").classed("value",!0).html(function(a,b){return r(a.value,b)}),e.filter(function(a,b){return void 0!==a.percent}).append("td").classed("percent",!0).html(function(a,b){return"("+d3.format("%")(a.percent)+")"}),e.selectAll("td").each(function(a){if(a.highlight){var b=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),c=.6;d3.select(this).style("border-bottom-color",b(c)).style("border-top-color",b(c))}});var f=b.node().outerHTML;return void 0!==a.footer&&(f+="<div class='footer'>"+a.footer+"</div>"),f},v=function(){var a={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};if("none"!=getComputedStyle(document.body).transform){var b=document.body.getBoundingClientRect();a.left-=b.left,a.top-=b.top}return a},w=function(b){if(b&&b.series){if(a.utils.isArray(b.series))return!0;if(a.utils.isObject(b.series))return b.series=[b.series],!0}return!1},x=function(a){var b,c,d,e=l.node().offsetHeight,h=l.node().offsetWidth,i=document.documentElement.clientWidth,j=document.documentElement.clientHeight;switch(f){case"e":b=-h-g,c=-(e/2),a.left+b<0&&(b=g),(d=a.top+c)<0&&(c-=d),(d=a.top+c+e)>j&&(c-=d-j);break;case"w":b=g,c=-(e/2),a.left+b+h>i&&(b=-h-g),(d=a.top+c)<0&&(c-=d),(d=a.top+c+e)>j&&(c-=d-j);break;case"n":b=-(h/2)-5,c=g,a.top+c+e>j&&(c=-e-g),(d=a.left+b)<0&&(b-=d),(d=a.left+b+h)>i&&(b-=d-i);break;case"s":b=-(h/2),c=-e-g,a.top+c<0&&(c=g),(d=a.left+b)<0&&(b-=d),(d=a.left+b+h)>i&&(b-=d-i);break;case"center":b=-(h/2),c=-(e/2);break;default:b=0,c=0}return{left:b,top:c}},y=function(){a.dom.read(function(){var a=v(),b=x(a),c=a.left+b.left,d=a.top+b.top;if(j)l.interrupt().transition().delay(k).duration(0).style("opacity",0);else{var e="translate("+m.left+"px, "+m.top+"px)",f="translate("+Math.round(c)+"px, "+Math.round(d)+"px)",g=d3.interpolateString(e,f),h=l.style("opacity")<.1;l.interrupt().transition().duration(h?0:o).styleTween("transform",function(a){return g},"important").styleTween("-webkit-transform",function(a){return g}).style("-ms-transform",f).style("opacity",1)}m.left=c,m.top=d})};return c.nvPointerEventsClass=q,c.options=a.utils.optionsFunc.bind(c),c._options=Object.create({},{duration:{get:function(){return o},set:function(a){o=a}},gravity:{get:function(){return f},set:function(a){f=a}},distance:{get:function(){return g},set:function(a){g=a}},snapDistance:{get:function(){return h},set:function(a){h=a}},classes:{get:function(){return i},set:function(a){i=a}},enabled:{get:function(){return n},set:function(a){n=a}},hideDelay:{get:function(){return k},set:function(a){k=a}},contentGenerator:{get:function(){return u},set:function(a){u=a}},valueFormatter:{get:function(){return r},set:function(a){r=a}},headerFormatter:{get:function(){return s},set:function(a){s=a}},keyFormatter:{get:function(){return t},set:function(a){t=a}},headerEnabled:{get:function(){return p},set:function(a){p=a}},position:{get:function(){return v},set:function(a){v=a}},chartContainer:{get:function(){return document.body},set:function(b){a.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(b){a.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(b){a.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return j},set:function(a){j!=a&&(j=!!a,c())}},data:{get:function(){return e},set:function(a){a.point&&(a.value=a.point.x,a.series=a.series||{},a.series.value=a.point.y,a.series.color=a.point.color||a.series.color),e=a}},node:{get:function(){return l.node()},set:function(a){}},id:{get:function(){return d},set:function(a){}}}),a.utils.initOptions(c),c},a.utils.windowSize=function(){var a={width:640,height:480};return window.innerWidth&&window.innerHeight?(a.width=window.innerWidth,a.height=window.innerHeight,a):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight,a):document.body&&document.body.offsetWidth?(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight,a):a},a.utils.isArray=Array.isArray,a.utils.isObject=function(a){return null!==a&&"object"==typeof a},a.utils.isFunction=function(a){return"function"==typeof a},a.utils.isDate=function(a){return"[object Date]"===toString.call(a)},a.utils.isNumber=function(a){return!isNaN(a)&&"number"==typeof a},a.utils.windowResize=function(b){return window.addEventListener?window.addEventListener("resize",b):a.log("ERROR: Failed to bind to window.resize with: ",b),{callback:b,clear:function(){window.removeEventListener("resize",b)}}},a.utils.getColor=function(b){if(void 0===b)return a.utils.defaultColor();if(a.utils.isArray(b)){var c=d3.scale.ordinal().range(b);return function(a,b){var d=void 0===b?a:b;return a.color||c(d)}}return b},a.utils.defaultColor=function(){return a.utils.getColor(d3.scale.category20().range())},a.utils.customTheme=function(b,c,d){c=c||function(a){return a.key},d=d||d3.scale.category20().range();var e=d.length;return function(f,g){var h=c(f);return a.utils.isFunction(b[h])?b[h]():void 0!==b[h]?b[h]:(e||(e=d.length),e-=1,d[e])}},a.utils.pjax=function(b,c){var d=function(d){d3.html(d,function(d){var e=d3.select(c).node();e.parentNode.replaceChild(d3.select(d).select(c).node(),e),a.utils.pjax(b,c)})};d3.selectAll(b).on("click",function(){history.pushState(this.href,this.textContent,this.href),d(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&d(d3.event.state)})},a.utils.calcApproxTextWidth=function(b){if(a.utils.isFunction(b.style)&&a.utils.isFunction(b.text)){var c=parseInt(b.style("font-size").replace("px",""),10),d=b.text().length;
return a.utils.NaNtoZero(d*c*.5)}return 0},a.utils.NaNtoZero=function(b){return!a.utils.isNumber(b)||isNaN(b)||null===b||b===1/0||b===-(1/0)?0:b},d3.selection.prototype.watchTransition=function(a){var b=[this].concat([].slice.call(arguments,1));return a.transition.apply(a,b)},a.utils.renderWatch=function(b,c){if(!(this instanceof a.utils.renderWatch))return new a.utils.renderWatch(b,c);var d=void 0!==c?c:250,e=[],f=this;this.models=function(a){return a=[].slice.call(arguments,0),a.forEach(function(a){a.__rendered=!1,function(a){a.dispatch.on("renderEnd",function(b){a.__rendered=!0,f.renderEnd("model")})}(a),e.indexOf(a)<0&&e.push(a)}),this},this.reset=function(a){void 0!==a&&(d=a),e=[]},this.transition=function(a,b,c){if(b=arguments.length>1?[].slice.call(arguments,1):[],c=b.length>1?b.pop():void 0!==d?d:250,a.__rendered=!1,e.indexOf(a)<0&&e.push(a),0===c)return a.__rendered=!0,a.delay=function(){return this},a.duration=function(){return this},a;0===a.length?a.__rendered=!0:a.every(function(a){return!a.length})?a.__rendered=!0:a.__rendered=!1;var g=0;return a.transition().duration(c).each(function(){++g}).each("end",function(c,d){0===--g&&(a.__rendered=!0,f.renderEnd.apply(this,b))})},this.renderEnd=function(){e.every(function(a){return a.__rendered})&&(e.forEach(function(a){a.__rendered=!1}),b.renderEnd.apply(this,arguments))}},a.utils.deepExtend=function(b){var c=arguments.length>1?[].slice.call(arguments,1):[];c.forEach(function(c){for(var d in c){var e=a.utils.isArray(b[d]),f=a.utils.isObject(b[d]),g=a.utils.isObject(c[d]);f&&!e&&g?a.utils.deepExtend(b[d],c[d]):b[d]=c[d]}})},a.utils.state=function(){if(!(this instanceof a.utils.state))return new a.utils.state;var b={},c=function(){},d=function(){return{}},e=null,f=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(a){c(a,!0)}),this.getter=function(a){return d=a,this},this.setter=function(a,b){return b||(b=function(){}),c=function(c,d){a(c),d&&b()},this},this.init=function(b){e=e||{},a.utils.deepExtend(e,b)};var g=function(){var a=d();if(JSON.stringify(a)===JSON.stringify(b))return!1;for(var c in a)void 0===b[c]&&(b[c]={}),b[c]=a[c],f=!0;return!0};this.update=function(){e&&(c(e,!1),e=null),g.call(this)&&this.dispatch.change(b)}},a.utils.optionsFunc=function(b){return b&&d3.map(b).forEach(function(b,c){a.utils.isFunction(this[b])&&this[b](c)}.bind(this)),this},a.utils.calcTicksX=function(b,c){var d=1,e=0;for(e;e<c.length;e+=1){var f=c[e]&&c[e].values?c[e].values.length:0;d=f>d?f:d}return a.log("Requested number of ticks: ",b),a.log("Calculated max values to be: ",d),b=b>d?b=d-1:b,b=b<1?1:b,b=Math.floor(b),a.log("Calculating tick count as: ",b),b},a.utils.calcTicksY=function(b,c){return a.utils.calcTicksX(b,c)},a.utils.initOption=function(a,b){a._calls&&a._calls[b]?a[b]=a._calls[b]:(a[b]=function(c){return arguments.length?(a._overrides[b]=!0,a._options[b]=c,a):a._options[b]},a["_"+b]=function(c){return arguments.length?(a._overrides[b]||(a._options[b]=c),a):a._options[b]})},a.utils.initOptions=function(b){b._overrides=b._overrides||{};var c=Object.getOwnPropertyNames(b._options||{}),d=Object.getOwnPropertyNames(b._calls||{});c=c.concat(d);for(var e in c)a.utils.initOption(b,c[e])},a.utils.inheritOptionsD3=function(a,b,c){a._d3options=c.concat(a._d3options||[]),c.unshift(b),c.unshift(a),d3.rebind.apply(this,c)},a.utils.arrayUnique=function(a){return a.sort().filter(function(b,c){return!c||b!=a[c-1]})},a.utils.symbolMap=d3.map(),a.utils.symbol=function(){function b(b,e){var f=c.call(this,b,e),g=d.call(this,b,e);return d3.svg.symbolTypes.indexOf(f)!==-1?d3.svg.symbol().type(f).size(g)():a.utils.symbolMap.get(f)(g)}var c,d=64;return b.type=function(a){return arguments.length?(c=d3.functor(a),b):c},b.size=function(a){return arguments.length?(d=d3.functor(a),b):d},b},a.utils.inheritOptions=function(b,c){var d=Object.getOwnPropertyNames(c._options||{}),e=Object.getOwnPropertyNames(c._calls||{}),f=c._inherited||[],g=c._d3options||[],h=d.concat(e).concat(f).concat(g);h.unshift(c),h.unshift(b),d3.rebind.apply(this,h),b._inherited=a.utils.arrayUnique(d.concat(e).concat(f).concat(d).concat(b._inherited||[])),b._d3options=a.utils.arrayUnique(g.concat(b._d3options||[]))},a.utils.initSVG=function(a){a.classed({"nvd3-svg":!0})},a.utils.sanitizeHeight=function(a,b){return a||parseInt(b.style("height"),10)||400},a.utils.sanitizeWidth=function(a,b){return a||parseInt(b.style("width"),10)||960},a.utils.availableHeight=function(b,c,d){return Math.max(0,a.utils.sanitizeHeight(b,c)-d.top-d.bottom)},a.utils.availableWidth=function(b,c,d){return Math.max(0,a.utils.sanitizeWidth(b,c)-d.left-d.right)},a.utils.noData=function(b,c){var d=b.options(),e=d.margin(),f=d.noData(),g=null==f?["No Data Available."]:[f],h=a.utils.availableHeight(null,c,e),i=a.utils.availableWidth(null,c,e),j=e.left+i/2,k=e.top+h/2;c.selectAll("g").remove();var l=c.selectAll(".nv-noData").data(g);l.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),l.attr("x",j).attr("y",k).text(function(a){return a})},a.utils.wrapTicks=function(a,b){a.each(function(){for(var a,c=d3.select(this),d=c.text().split(/\s+/).reverse(),e=[],f=0,g=1.1,h=c.attr("y"),i=parseFloat(c.attr("dy")),j=c.text(null).append("tspan").attr("x",0).attr("y",h).attr("dy",i+"em");a=d.pop();)e.push(a),j.text(e.join(" ")),j.node().getComputedTextLength()>b&&(e.pop(),j.text(e.join(" ")),e=[a],j=c.append("tspan").attr("x",0).attr("y",h).attr("dy",++f*g+i+"em").text(a))})},a.utils.arrayEquals=function(b,c){if(b===c)return!0;if(!b||!c)return!1;if(b.length!=c.length)return!1;for(var d=0,e=b.length;d<e;d++)if(b[d]instanceof Array&&c[d]instanceof Array){if(!a.arrayEquals(b[d],c[d]))return!1}else if(b[d]!=c[d])return!1;return!0},a.models.axis=function(){"use strict";function b(g){return t.reset(),g.each(function(b){var g=d3.select(this);a.utils.initSVG(g);var q=g.selectAll("g.nv-wrap.nv-axis").data([b]),r=q.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),u=(r.append("g"),q.select("g"));null!==n?c.ticks(n):"top"!=c.orient()&&"bottom"!=c.orient()||c.ticks(Math.abs(d.range()[1]-d.range()[0])/100),u.watchTransition(t,"axis").call(c),s=s||c.scale();var v=c.tickFormat();null==v&&(v=s.tickFormat());var w=u.selectAll("text.nv-axislabel").data([h||null]);w.exit().remove(),void 0!==p&&u.selectAll("g").select("text").style("font-size",p);var x,y,z;switch(c.orient()){case"top":w.enter().append("text").attr("class","nv-axislabel"),z=0,1===d.range().length?z=m?2*d.range()[0]+d.rangeBand():0:2===d.range().length?z=m?d.range()[0]+d.range()[1]+d.rangeBand():d.range()[1]:d.range().length>2&&(z=d.range()[d.range().length-1]+(d.range()[1]-d.range()[0])),w.attr("text-anchor","middle").attr("y",0).attr("x",z/2),i&&(y=q.selectAll("g.nv-axisMaxMin").data(d.domain()),y.enter().append("g").attr("class",function(a,b){return["nv-axisMaxMin","nv-axisMaxMin-x",0==b?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),y.exit().remove(),y.attr("transform",function(b,c){return"translate("+a.utils.NaNtoZero(d(b))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-c.tickPadding()).attr("text-anchor","middle").text(function(a,b){var c=v(a);return(""+c).match("NaN")?"":c}),y.watchTransition(t,"min-max top").attr("transform",function(b,c){return"translate("+a.utils.NaNtoZero(d.range()[c])+",0)"}));break;case"bottom":x=o+36;var A=30,B=0,C=u.selectAll("g").select("text"),D="";if(j%360){C.attr("transform",""),C.each(function(a,b){var c=this.getBoundingClientRect(),d=c.width;B=c.height,d>A&&(A=d)}),D="rotate("+j+" 0,"+(B/2+c.tickPadding())+")";var E=Math.abs(Math.sin(j*Math.PI/180));x=(E?E*A:A)+30,C.attr("transform",D).style("text-anchor",j%360>0?"start":"end")}else l?C.attr("transform",function(a,b){return"translate(0,"+(b%2==0?"0":"12")+")"}):C.attr("transform","translate(0,0)");w.enter().append("text").attr("class","nv-axislabel"),z=0,1===d.range().length?z=m?2*d.range()[0]+d.rangeBand():0:2===d.range().length?z=m?d.range()[0]+d.range()[1]+d.rangeBand():d.range()[1]:d.range().length>2&&(z=d.range()[d.range().length-1]+(d.range()[1]-d.range()[0])),w.attr("text-anchor","middle").attr("y",x).attr("x",z/2),i&&(y=q.selectAll("g.nv-axisMaxMin").data([d.domain()[0],d.domain()[d.domain().length-1]]),y.enter().append("g").attr("class",function(a,b){return["nv-axisMaxMin","nv-axisMaxMin-x",0==b?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),y.exit().remove(),y.attr("transform",function(b,c){return"translate("+a.utils.NaNtoZero(d(b)+(m?d.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",c.tickPadding()).attr("transform",D).style("text-anchor",j?j%360>0?"start":"end":"middle").text(function(a,b){var c=v(a);return(""+c).match("NaN")?"":c}),y.watchTransition(t,"min-max bottom").attr("transform",function(b,c){return"translate("+a.utils.NaNtoZero(d(b)+(m?d.rangeBand()/2:0))+",0)"}));break;case"right":w.enter().append("text").attr("class","nv-axislabel"),w.style("text-anchor",k?"middle":"begin").attr("transform",k?"rotate(90)":"").attr("y",k?-Math.max(e.right,f)+12-(o||0):-10).attr("x",k?d3.max(d.range())/2:c.tickPadding()),i&&(y=q.selectAll("g.nv-axisMaxMin").data(d.domain()),y.enter().append("g").attr("class",function(a,b){return["nv-axisMaxMin","nv-axisMaxMin-y",0==b?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),y.exit().remove(),y.attr("transform",function(b,c){return"translate(0,"+a.utils.NaNtoZero(d(b))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",c.tickPadding()).style("text-anchor","start").text(function(a,b){var c=v(a);return(""+c).match("NaN")?"":c}),y.watchTransition(t,"min-max right").attr("transform",function(b,c){return"translate(0,"+a.utils.NaNtoZero(d.range()[c])+")"}).select("text").style("opacity",1));break;case"left":w.enter().append("text").attr("class","nv-axislabel"),w.style("text-anchor",k?"middle":"end").attr("transform",k?"rotate(-90)":"").attr("y",k?-Math.max(e.left,f)+25-(o||0):-10).attr("x",k?-d3.max(d.range())/2:-c.tickPadding()),i&&(y=q.selectAll("g.nv-axisMaxMin").data(d.domain()),y.enter().append("g").attr("class",function(a,b){return["nv-axisMaxMin","nv-axisMaxMin-y",0==b?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),y.exit().remove(),y.attr("transform",function(b,c){return"translate(0,"+a.utils.NaNtoZero(s(b))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-c.tickPadding()).attr("text-anchor","end").text(function(a,b){var c=v(a);return(""+c).match("NaN")?"":c}),y.watchTransition(t,"min-max right").attr("transform",function(b,c){return"translate(0,"+a.utils.NaNtoZero(d.range()[c])+")"}).select("text").style("opacity",1))}if(w.text(function(a){return a}),!i||"left"!==c.orient()&&"right"!==c.orient()||(u.selectAll("g").each(function(a,b){d3.select(this).select("text").attr("opacity",1),(d(a)<d.range()[1]+10||d(a)>d.range()[0]-10)&&((a>1e-10||a<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),d.domain()[0]==d.domain()[1]&&0==d.domain()[0]&&q.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1})),i&&("top"===c.orient()||"bottom"===c.orient())){var F=[];q.selectAll("g.nv-axisMaxMin").each(function(a,b){try{b?F.push(d(a)-this.getBoundingClientRect().width-4):F.push(d(a)+this.getBoundingClientRect().width+4)}catch(c){b?F.push(d(a)-4):F.push(d(a)+4)}}),u.selectAll("g").each(function(a,b){(d(a)<F[0]||d(a)>F[1])&&(a>1e-10||a<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}u.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1e5*a)/1e6)&&void 0!==a}).classed("zero",!0),s=d.copy()}),t.renderEnd("axis immediate"),b}var c=d3.svg.axis(),d=d3.scale.linear(),e={top:0,right:0,bottom:0,left:0},f=75,g=60,h=null,i=!0,j=0,k=!0,l=!1,m=!1,n=null,o=0,p=void 0,q=250,r=d3.dispatch("renderEnd");c.scale(d).orient("bottom").tickFormat(function(a){return a});var s,t=a.utils.renderWatch(r,q);return b.axis=c,b.dispatch=r,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{axisLabelDistance:{get:function(){return o},set:function(a){o=a}},staggerLabels:{get:function(){return l},set:function(a){l=a}},rotateLabels:{get:function(){return j},set:function(a){j=a}},rotateYLabel:{get:function(){return k},set:function(a){k=a}},showMaxMin:{get:function(){return i},set:function(a){i=a}},axisLabel:{get:function(){return h},set:function(a){h=a}},height:{get:function(){return g},set:function(a){g=a}},ticks:{get:function(){return n},set:function(a){n=a}},width:{get:function(){return f},set:function(a){f=a}},fontSize:{get:function(){return p},set:function(a){p=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top,e.right=void 0!==a.right?a.right:e.right,e.bottom=void 0!==a.bottom?a.bottom:e.bottom,e.left=void 0!==a.left?a.left:e.left}},duration:{get:function(){return q},set:function(a){q=a,t.reset(q)}},scale:{get:function(){return d},set:function(e){d=e,c.scale(d),m="function"==typeof d.rangeBands,a.utils.inheritOptionsD3(b,d,["domain","range","rangeBand","rangeBands"])}}}),a.utils.initOptions(b),a.utils.inheritOptionsD3(b,c,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),a.utils.inheritOptionsD3(b,d,["domain","range","rangeBand","rangeBands"]),b},a.models.boxPlot=function(){"use strict";function b(l){return E.reset(),l.each(function(b){var l=j-i.left-i.right,F=k-i.top-i.bottom;A=d3.select(this),a.utils.initSVG(A),m.domain(c||b.map(function(a,b){return o(a,b)})).rangeBands(d||[0,l],.1);var G=[];if(!e){var H,I,J=[];b.forEach(function(a,b){var c=p(a),d=r(a),e=s(a),f=t(a),g=v(a);g&&g.forEach(function(a,b){J.push(w(a,b,void 0))}),e&&J.push(e),c&&J.push(c),d&&J.push(d),f&&J.push(f)}),H=d3.min(J),I=d3.max(J),G=[H,I]}n.domain(e||G),n.range(f||[F,0]),g=g||m,h=h||n.copy().range([n(0),n(0)]);var K=A.selectAll("g.nv-wrap").data([b]);K.enter().append("g").attr("class","nvd3 nv-wrap");K.attr("transform","translate("+i.left+","+i.top+")");var L=K.selectAll(".nv-boxplot").data(function(a){return a}),M=L.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);L.attr("class","nv-boxplot").attr("transform",function(a,b,c){return"translate("+(m(o(a,b))+.05*m.rangeBand())+", 0)"}).classed("hover",function(a){return a.hover}),L.watchTransition(E,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(a,c){return c*C/b.length}).attr("transform",function(a,b){return"translate("+(m(o(a,b))+.05*m.rangeBand())+", 0)"}),L.exit().remove(),M.each(function(a,b){var c=d3.select(this);[s,t].forEach(function(d){if(d(a)){var e=d===s?"low":"high";c.append("line").style("stroke",u(a)||z(a,b)).attr("class","nv-boxplot-whisker nv-boxplot-"+e),c.append("line").style("stroke",u(a)||z(a,b)).attr("class","nv-boxplot-tick nv-boxplot-"+e)}})});var N=function(){return null===D?.9*m.rangeBand():Math.min(75,.9*m.rangeBand())},O=function(){return.45*m.rangeBand()-N()/2},P=function(){return.45*m.rangeBand()+N()/2};[s,t].forEach(function(a){var b=a===s?"low":"high",c=a===s?p:r;L.select("line.nv-boxplot-whisker.nv-boxplot-"+b).watchTransition(E,"nv-boxplot: boxplots").attr("x1",.45*m.rangeBand()).attr("y1",function(b,c){return n(a(b))}).attr("x2",.45*m.rangeBand()).attr("y2",function(a,b){return n(c(a))}),L.select("line.nv-boxplot-tick.nv-boxplot-"+b).watchTransition(E,"nv-boxplot: boxplots").attr("x1",O).attr("y1",function(b,c){return n(a(b))}).attr("x2",P).attr("y2",function(b,c){return n(a(b))})}),[s,t].forEach(function(a){var b=a===s?"low":"high";M.selectAll(".nv-boxplot-"+b).on("mouseover",function(b,c,d){d3.select(this).classed("hover",!0),B.elementMouseover({series:{key:a(b),color:u(b)||z(b,d)},e:d3.event})}).on("mouseout",function(b,c,d){d3.select(this).classed("hover",!1),B.elementMouseout({series:{key:a(b),color:u(b)||z(b,d)},e:d3.event})}).on("mousemove",function(a,b){B.elementMousemove({e:d3.event})})}),M.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(a,b){d3.select(this).classed("hover",!0),B.elementMouseover({key:o(a),value:o(a),series:[{key:"Q3",value:r(a),color:u(a)||z(a,b)},{key:"Q2",value:q(a),color:u(a)||z(a,b)},{key:"Q1",value:p(a),color:u(a)||z(a,b)}],data:a,index:b,e:d3.event})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1),B.elementMouseout({key:o(a),value:o(a),series:[{key:"Q3",value:r(a),color:u(a)||z(a,b)},{key:"Q2",value:q(a),color:u(a)||z(a,b)},{key:"Q1",value:p(a),color:u(a)||z(a,b)}],data:a,index:b,e:d3.event})}).on("mousemove",function(a,b){B.elementMousemove({e:d3.event})}),L.select("rect.nv-boxplot-box").watchTransition(E,"nv-boxplot: boxes").attr("y",function(a,b){return n(r(a))}).attr("width",N).attr("x",O).attr("height",function(a,b){return Math.abs(n(r(a))-n(p(a)))||1}).style("fill",function(a,b){return u(a)||z(a,b)}).style("stroke",function(a,b){return u(a)||z(a,b)}),M.append("line").attr("class","nv-boxplot-median"),L.select("line.nv-boxplot-median").watchTransition(E,"nv-boxplot: boxplots line").attr("x1",O).attr("y1",function(a,b){return n(q(a))}).attr("x2",P).attr("y2",function(a,b){return n(q(a))});var Q=L.selectAll(".nv-boxplot-outlier").data(function(a){return v(a)||[]});Q.enter().append("circle").style("fill",function(a,b,c){return y(a,b,c)||z(a,c)}).style("stroke",function(a,b,c){return y(a,b,c)||z(a,c)}).style("z-index",9e3).on("mouseover",function(a,b,c){d3.select(this).classed("hover",!0),B.elementMouseover({series:{key:x(a,b,c),color:y(a,b,c)||z(a,c)},e:d3.event})}).on("mouseout",function(a,b,c){d3.select(this).classed("hover",!1),B.elementMouseout({series:{key:x(a,b,c),color:y(a,b,c)||z(a,c)},e:d3.event})}).on("mousemove",function(a,b){B.elementMousemove({e:d3.event})}),Q.attr("class","nv-boxplot-outlier"),Q.watchTransition(E,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*m.rangeBand()).attr("cy",function(a,b,c){return n(w(a,b,c))}).attr("r","3"),Q.exit().remove(),g=m.copy(),h=n.copy()}),E.renderEnd("nv-boxplot immediate"),b}var c,d,e,f,g,h,i={top:0,right:0,bottom:0,left:0},j=960,k=500,l=Math.floor(1e4*Math.random()),m=d3.scale.ordinal(),n=d3.scale.linear(),o=function(a){return a.label},p=function(a){return a.values.Q1},q=function(a){return a.values.Q2},r=function(a){return a.values.Q3},s=function(a){return a.values.whisker_low},t=function(a){return a.values.whisker_high},u=function(a){return a.color},v=function(a){return a.values.outliers},w=function(a,b,c){return a},x=function(a,b,c){return a},y=function(a,b,c){},z=a.utils.defaultColor(),A=null,B=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),C=250,D=null,E=a.utils.renderWatch(B,C);return b.dispatch=B,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return j},set:function(a){j=a}},height:{get:function(){return k},set:function(a){k=a}},maxBoxWidth:{get:function(){return D},set:function(a){D=a}},x:{get:function(){return o},set:function(a){o=a}},q1:{get:function(){return p},set:function(a){p=a}},q2:{get:function(){return q},set:function(a){q=a}},q3:{get:function(){return r},set:function(a){r=a}},wl:{get:function(){return s},set:function(a){s=a}},wh:{get:function(){return t},set:function(a){t=a}},itemColor:{get:function(){return u},set:function(a){u=a}},outliers:{get:function(){return v},set:function(a){v=a}},outlierValue:{get:function(){return w},set:function(a){w=a}},outlierLabel:{get:function(){return x},set:function(a){x=a}},outlierColor:{get:function(){return y},set:function(a){y=a}},xScale:{get:function(){return m},set:function(a){m=a}},yScale:{get:function(){return n},set:function(a){n=a}},xDomain:{get:function(){return c},set:function(a){c=a}},yDomain:{get:function(){return e},set:function(a){e=a}},xRange:{get:function(){return d},set:function(a){d=a}},yRange:{get:function(){return f},set:function(a){f=a}},id:{get:function(){return l},set:function(a){l=a}},y:{get:function(){return console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead."),{}},set:function(a){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},margin:{get:function(){return i},set:function(a){i.top=void 0!==a.top?a.top:i.top,i.right=void 0!==a.right?a.right:i.right,i.bottom=void 0!==a.bottom?a.bottom:i.bottom,i.left=void 0!==a.left?a.left:i.left}},color:{get:function(){return z},set:function(b){z=a.utils.getColor(b)}},duration:{get:function(){return C},set:function(a){C=a,E.reset(C)}}}),a.utils.initOptions(b),b},a.models.boxPlotChart=function(){"use strict";function b(k){return t.reset(),t.models(e),l&&t.models(f),m&&t.models(g),k.each(function(k){var p=d3.select(this);a.utils.initSVG(p);var t=(i||parseInt(p.style("width"))||960)-h.left-h.right,u=(j||parseInt(p.style("height"))||400)-h.top-h.bottom;if(b.update=function(){r.beforeUpdate(),p.transition().duration(s).call(b)},b.container=this,!k||!k.length){var v=p.selectAll(".nv-noData").data([q]);return v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",h.left+t/2).attr("y",h.top+u/2).text(function(a){return a}),b}p.selectAll(".nv-noData").remove(),c=e.xScale(),d=e.yScale().clamp(!0);var w=p.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([k]),x=w.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),y=x.append("defs"),z=w.select("g");x.append("g").attr("class","nv-x nv-axis"),x.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),x.append("g").attr("class","nv-barsWrap"),z.attr("transform","translate("+h.left+","+h.top+")"),n&&z.select(".nv-y.nv-axis").attr("transform","translate("+t+",0)"),e.width(t).height(u);var A=z.select(".nv-barsWrap").datum(k.filter(function(a){return!a.disabled}));if(A.transition().call(e),y.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect"),z.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",c.rangeBand()*(o?2:1)).attr("height",16).attr("x",-c.rangeBand()/(o?1:2)),l){f.scale(c).ticks(a.utils.calcTicksX(t/100,k)).tickSize(-u,0),z.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")"),z.select(".nv-x.nv-axis").call(f);var B=z.select(".nv-x.nv-axis").selectAll("g");o&&B.selectAll("text").attr("transform",function(a,b,c){return"translate(0,"+(c%2===0?"5":"17")+")"})}m&&(g.scale(d).ticks(Math.floor(u/36)).tickSize(-t,0),z.select(".nv-y.nv-axis").call(g)),z.select(".nv-zeroLine line").attr("x1",0).attr("x2",t).attr("y1",d(0)).attr("y2",d(0))}),t.renderEnd("nv-boxplot chart immediate"),b}var c,d,e=a.models.boxPlot(),f=a.models.axis(),g=a.models.axis(),h={top:15,right:10,bottom:50,left:60},i=null,j=null,k=a.utils.getColor(),l=!0,m=!0,n=!1,o=!1,p=a.models.tooltip(),q="No Data Available.",r=d3.dispatch("beforeUpdate","renderEnd"),s=250;f.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a}),g.orient(n?"right":"left").tickFormat(d3.format(",.1f")),p.duration(0);var t=a.utils.renderWatch(r,s);return e.dispatch.on("elementMouseover.tooltip",function(a){p.data(a).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(a){p.data(a).hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(a){p()}),b.dispatch=r,b.boxplot=e,b.xAxis=f,b.yAxis=g,b.tooltip=p,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return i},set:function(a){i=a}},height:{get:function(){return j},set:function(a){j=a}},staggerLabels:{get:function(){return o},set:function(a){o=a}},showXAxis:{get:function(){return l},set:function(a){l=a}},showYAxis:{get:function(){return m},set:function(a){m=a}},tooltipContent:{get:function(){return p},set:function(a){p=a}},noData:{get:function(){return q},set:function(a){q=a}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top,h.right=void 0!==a.right?a.right:h.right,h.bottom=void 0!==a.bottom?a.bottom:h.bottom,h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return s},set:function(a){s=a,t.reset(s),e.duration(s),f.duration(s),g.duration(s)}},color:{get:function(){return k},set:function(b){k=a.utils.getColor(b),e.color(k)}},rightAlignYAxis:{get:function(){return n},set:function(a){n=a,g.orient(a?"right":"left")}}}),a.utils.inheritOptions(b,e),a.utils.initOptions(b),b},a.models.bullet=function(){"use strict";function b(a,b){var c=a.slice();a.sort(function(a,d){var e=c.indexOf(a),f=c.indexOf(d);return d3.descending(b[e],b[f])})}function c(e){return e.each(function(c,e){var s=p-d.left-d.right,x=q-d.top-d.bottom;r=d3.select(this),a.utils.initSVG(r);var y=g.call(this,c,e).slice(),z=h.call(this,c,e).slice(),A=i.call(this,c,e).slice().sort(d3.descending),B=j.call(this,c,e).slice(),C=k.call(this,c,e).slice(),D=l.call(this,c,e).slice(),E=m.call(this,c,e).slice(),F=n.call(this,c,e).slice();b(C,y),b(D,z),b(E,A),b(F,B),y.sort(d3.descending),z.sort(d3.descending),B.sort(d3.descending);var G=d3.scale.linear().domain(d3.extent(d3.merge([o,y]))).range(f?[s,0]:[0,s]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(G.range());this.__chart__=G;for(var H=(d3.min(y),d3.max(y),y[1],r.selectAll("g.nv-wrap.nv-bullet").data([c])),I=H.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),J=I.append("g"),K=H.select("g"),e=0,L=y.length;e<L;e++){var M="nv-range nv-range"+e;e<=2&&(M=M+" nv-range"+w[e]),J.append("rect").attr("class",M)}J.append("rect").attr("class","nv-measure"),H.attr("transform","translate("+d.left+","+d.top+")");for(var N=function(a){return Math.abs(G(a)-G(0))},O=function(a){return G(a<0?a:0)},e=0,L=y.length;e<L;e++){var P=y[e];K.select("rect.nv-range"+e).attr("height",x).attr("width",N(P)).attr("x",O(P)).datum(P)}K.select("rect.nv-measure").style("fill",t).attr("height",x/3).attr("y",x/3).attr("width",B<0?G(0)-G(B[0]):G(B[0])-G(0)).attr("x",O(B)).on("mouseover",function(){u.elementMouseover({value:B[0],label:F[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){u.elementMousemove({value:B[0],label:F[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){u.elementMouseout({value:B[0],label:F[0]||"Current",color:d3.select(this).style("fill")})});var Q=x/6,R=z.map(function(a,b){return{value:a,label:D[b]}});J.selectAll("path.nv-markerTriangle").data(R).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+Q+"L"+Q+","+-Q+" "+-Q+","+-Q+"Z").on("mouseover",function(a){u.elementMouseover({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[G(a.value),x/2]})}).on("mousemove",function(a){u.elementMousemove({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,b){u.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}),K.selectAll("path.nv-markerTriangle").data(R).attr("transform",function(a){return"translate("+G(a.value)+","+x/2+")"});var S=A.map(function(a,b){return{value:a,label:E[b]}});J.selectAll("path.nv-markerLine").data(S).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",function(a){return G(a.value)}).attr("y1","2").attr("x2",function(a){return G(a.value)}).attr("y2",x-2).on("mouseover",function(a){u.elementMouseover({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[G(a.value),x/2]})}).on("mousemove",function(a){u.elementMousemove({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,b){u.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}),K.selectAll("path.nv-markerLines").data(S).attr("transform",function(a){return"translate("+G(a.value)+","+x/2+")"}),H.selectAll(".nv-range").on("mouseover",function(a,b){var c=C[b]||v[b];u.elementMouseover({value:a,label:c,color:d3.select(this).style("fill")})}).on("mousemove",function(){u.elementMousemove({value:B[0],label:F[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,b){var c=C[b]||v[b];u.elementMouseout({value:a,label:c,color:d3.select(this).style("fill")})})}),c}var d={top:0,right:0,bottom:0,left:0},e="left",f=!1,g=function(a){return a.ranges},h=function(a){return a.markers?a.markers:[]},i=function(a){return a.markerLines?a.markerLines:[0]},j=function(a){return a.measures},k=function(a){return a.rangeLabels?a.rangeLabels:[]},l=function(a){return a.markerLabels?a.markerLabels:[]},m=function(a){return a.markerLineLabels?a.markerLineLabels:[]},n=function(a){return a.measureLabels?a.measureLabels:[]},o=[0],p=380,q=30,r=null,s=null,t=a.utils.getColor(["#1f77b4"]),u=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),v=["Maximum","Mean","Minimum"],w=["Max","Avg","Min"];return c.dispatch=u,c.options=a.utils.optionsFunc.bind(c),c._options=Object.create({},{ranges:{get:function(){return g},set:function(a){g=a}},markers:{get:function(){return h},set:function(a){h=a}},measures:{get:function(){return j},set:function(a){j=a}},forceX:{get:function(){return o},set:function(a){o=a}},width:{get:function(){return p},set:function(a){p=a}},height:{get:function(){return q},set:function(a){q=a}},tickFormat:{get:function(){return s},set:function(a){s=a}},margin:{get:function(){return d},set:function(a){d.top=void 0!==a.top?a.top:d.top,d.right=void 0!==a.right?a.right:d.right,d.bottom=void 0!==a.bottom?a.bottom:d.bottom,d.left=void 0!==a.left?a.left:d.left}},orient:{get:function(){return e},set:function(a){e=a,f="right"==e||"bottom"==e}},color:{get:function(){return t},set:function(b){t=a.utils.getColor(b)}}}),a.utils.initOptions(c),c},a.models.bulletChart=function(){"use strict";function b(d){return d.each(function(e,o){var p=d3.select(this);a.utils.initSVG(p);var q=a.utils.availableWidth(k,p,g),r=l-g.top-g.bottom;if(b.update=function(){b(d)},b.container=this,!e||!h.call(this,e,o))return a.utils.noData(b,p),b;p.selectAll(".nv-noData").remove();var s=h.call(this,e,o).slice().sort(d3.descending),t=i.call(this,e,o).slice().sort(d3.descending),u=j.call(this,e,o).slice().sort(d3.descending),v=p.selectAll("g.nv-wrap.nv-bulletChart").data([e]),w=v.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),x=w.append("g"),y=v.select("g");x.append("g").attr("class","nv-bulletWrap"),x.append("g").attr("class","nv-titles"),v.attr("transform","translate("+g.left+","+g.top+")");var z=d3.scale.linear().domain([0,Math.max(s[0],t[0]||0,u[0])]).range(f?[q,0]:[0,q]),A=this.__chart__||d3.scale.linear().domain([0,1/0]).range(z.range());this.__chart__=z;var B=x.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(l-g.top-g.bottom)/2+")");B.append("text").attr("class","nv-title").text(function(a){return a.title}),B.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle}),c.width(q).height(r);var C=y.select(".nv-bulletWrap");d3.transition(C).call(c);var D=m||z.tickFormat(q/100),E=y.selectAll("g.nv-tick").data(z.ticks(n?n:q/50),function(a){return this.textContent||D(a)}),F=E.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+A(a)+",0)"}).style("opacity",1e-6);F.append("line").attr("y1",r).attr("y2",7*r/6),F.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*r/6).text(D);var G=d3.transition(E).attr("transform",function(a){return"translate("+z(a)+",0)"}).style("opacity",1);G.select("line").attr("y1",r).attr("y2",7*r/6),G.select("text").attr("y",7*r/6),d3.transition(E.exit()).attr("transform",function(a){return"translate("+z(a)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),b}var c=a.models.bullet(),d=a.models.tooltip(),e="left",f=!1,g={top:5,right:40,bottom:20,left:120},h=function(a){return a.ranges},i=function(a){return a.markers?a.markers:[]},j=function(a){return a.measures},k=null,l=55,m=null,n=null,o=null,p=d3.dispatch();return d.duration(0).headerEnabled(!1),c.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.label,value:a.value,color:a.color},d.data(a).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(a){d.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(a){
d()}),b.bullet=c,b.dispatch=p,b.tooltip=d,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{ranges:{get:function(){return h},set:function(a){h=a}},markers:{get:function(){return i},set:function(a){i=a}},measures:{get:function(){return j},set:function(a){j=a}},width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return l},set:function(a){l=a}},tickFormat:{get:function(){return m},set:function(a){m=a}},ticks:{get:function(){return n},set:function(a){n=a}},noData:{get:function(){return o},set:function(a){o=a}},margin:{get:function(){return g},set:function(a){g.top=void 0!==a.top?a.top:g.top,g.right=void 0!==a.right?a.right:g.right,g.bottom=void 0!==a.bottom?a.bottom:g.bottom,g.left=void 0!==a.left?a.left:g.left}},orient:{get:function(){return e},set:function(a){e=a,f="right"==e||"bottom"==e}}}),a.utils.inheritOptions(b,c),a.utils.initOptions(b),b},a.models.candlestickBar=function(){"use strict";function b(x){return x.each(function(b){c=d3.select(this);var x=a.utils.availableWidth(i,c,h),y=a.utils.availableHeight(j,c,h);a.utils.initSVG(c);var A=x/b[0].values.length*.45;l.domain(d||d3.extent(b[0].values.map(n).concat(t))),v?l.range(f||[.5*x/b[0].values.length,x*(b[0].values.length-.5)/b[0].values.length]):l.range(f||[5+A/2,x-A/2-5]),m.domain(e||[d3.min(b[0].values.map(s).concat(u)),d3.max(b[0].values.map(r).concat(u))]).range(g||[y,0]),l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]-.01*l.domain()[0],l.domain()[1]+.01*l.domain()[1]]):l.domain([-1,1])),m.domain()[0]===m.domain()[1]&&(m.domain()[0]?m.domain([m.domain()[0]+.01*m.domain()[0],m.domain()[1]-.01*m.domain()[1]]):m.domain([-1,1]));var B=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([b[0].values]),C=B.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),D=C.append("defs"),E=C.append("g"),F=B.select("g");E.append("g").attr("class","nv-ticks"),B.attr("transform","translate("+h.left+","+h.top+")"),c.on("click",function(a,b){z.chartClick({data:a,index:b,pos:d3.event,id:k})}),D.append("clipPath").attr("id","nv-chart-clip-path-"+k).append("rect"),B.select("#nv-chart-clip-path-"+k+" rect").attr("width",x).attr("height",y),F.attr("clip-path",w?"url(#nv-chart-clip-path-"+k+")":"");var G=B.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});G.exit().remove();var H=G.enter().append("g");G.attr("class",function(a,b,c){return(p(a,b)>q(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+c+"-"+b});H.append("line").attr("class","nv-candlestick-lines").attr("transform",function(a,b){return"translate("+l(n(a,b))+",0)"}).attr("x1",0).attr("y1",function(a,b){return m(r(a,b))}).attr("x2",0).attr("y2",function(a,b){return m(s(a,b))}),H.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(a,b){return"translate("+(l(n(a,b))-A/2)+","+(m(o(a,b))-(p(a,b)>q(a,b)?m(q(a,b))-m(p(a,b)):0))+")"}).attr("x",0).attr("y",0).attr("width",A).attr("height",function(a,b){var c=p(a,b),d=q(a,b);return c>d?m(d)-m(c):m(c)-m(d)});G.select(".nv-candlestick-lines").transition().attr("transform",function(a,b){return"translate("+l(n(a,b))+",0)"}).attr("x1",0).attr("y1",function(a,b){return m(r(a,b))}).attr("x2",0).attr("y2",function(a,b){return m(s(a,b))}),G.select(".nv-candlestick-rects").transition().attr("transform",function(a,b){return"translate("+(l(n(a,b))-A/2)+","+(m(o(a,b))-(p(a,b)>q(a,b)?m(q(a,b))-m(p(a,b)):0))+")"}).attr("x",0).attr("y",0).attr("width",A).attr("height",function(a,b){var c=p(a,b),d=q(a,b);return c>d?m(d)-m(c):m(c)-m(d)})}),b}var c,d,e,f,g,h={top:0,right:0,bottom:0,left:0},i=null,j=null,k=Math.floor(1e4*Math.random()),l=d3.scale.linear(),m=d3.scale.linear(),n=function(a){return a.x},o=function(a){return a.y},p=function(a){return a.open},q=function(a){return a.close},r=function(a){return a.high},s=function(a){return a.low},t=[],u=[],v=!1,w=!0,x=a.utils.defaultColor(),y=!1,z=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return b.highlightPoint=function(a,d){b.clearHighlights(),c.select(".nv-candlestickBar .nv-tick-0-"+a).classed("hover",d)},b.clearHighlights=function(){c.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},b.dispatch=z,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return i},set:function(a){i=a}},height:{get:function(){return j},set:function(a){j=a}},xScale:{get:function(){return l},set:function(a){l=a}},yScale:{get:function(){return m},set:function(a){m=a}},xDomain:{get:function(){return d},set:function(a){d=a}},yDomain:{get:function(){return e},set:function(a){e=a}},xRange:{get:function(){return f},set:function(a){f=a}},yRange:{get:function(){return g},set:function(a){g=a}},forceX:{get:function(){return t},set:function(a){t=a}},forceY:{get:function(){return u},set:function(a){u=a}},padData:{get:function(){return v},set:function(a){v=a}},clipEdge:{get:function(){return w},set:function(a){w=a}},id:{get:function(){return k},set:function(a){k=a}},interactive:{get:function(){return y},set:function(a){y=a}},x:{get:function(){return n},set:function(a){n=a}},y:{get:function(){return o},set:function(a){o=a}},open:{get:function(){return p()},set:function(a){p=a}},close:{get:function(){return q()},set:function(a){q=a}},high:{get:function(){return r},set:function(a){r=a}},low:{get:function(){return s},set:function(a){s=a}},margin:{get:function(){return h},set:function(a){h.top=void 0!=a.top?a.top:h.top,h.right=void 0!=a.right?a.right:h.right,h.bottom=void 0!=a.bottom?a.bottom:h.bottom,h.left=void 0!=a.left?a.left:h.left}},color:{get:function(){return x},set:function(b){x=a.utils.getColor(b)}}}),a.utils.initOptions(b),b},a.models.cumulativeLineChart=function(){"use strict";function b(l){return H.reset(),H.models(f),r&&H.models(g),s&&H.models(h),l.each(function(l){function A(a,c){d3.select(b.container).style("cursor","ew-resize")}function E(a,b){G.x=d3.event.x,G.i=Math.round(F.invert(G.x)),K()}function H(a,c){d3.select(b.container).style("cursor","auto"),y.index=G.i,C.stateChange(y)}function K(){aa.data([G]);var a=b.duration();b.duration(0),b.update(),b.duration(a)}var L=d3.select(this);a.utils.initSVG(L),L.classed("nv-chart-"+x,!0);var M=a.utils.availableWidth(o,L,m),N=a.utils.availableHeight(p,L,m);if(b.update=function(){0===D?L.call(b):L.transition().duration(D).call(b)},b.container=this,y.setter(J(l),b.update).getter(I(l)).update(),y.disabled=l.map(function(a){return!!a.disabled}),!z){var O;z={};for(O in y)y[O]instanceof Array?z[O]=y[O].slice(0):z[O]=y[O]}var P=d3.behavior.drag().on("dragstart",A).on("drag",E).on("dragend",H);if(!(l&&l.length&&l.filter(function(a){return a.values.length}).length))return a.utils.noData(b,L),b;if(L.selectAll(".nv-noData").remove(),d=f.xScale(),e=f.yScale(),w)f.yDomain(null);else{var Q=l.filter(function(a){return!a.disabled}).map(function(a,b){var c=d3.extent(a.values,f.y());return c[0]<-.95&&(c[0]=-.95),[(c[0]-c[1])/(1+c[1]),(c[1]-c[0])/(1+c[0])]}),R=[d3.min(Q,function(a){return a[0]}),d3.max(Q,function(a){return a[1]})];f.yDomain(R)}F.domain([0,l[0].values.length-1]).range([0,M]).clamp(!0);var l=c(G.i,l),S=v?"none":"all",T=L.selectAll("g.nv-wrap.nv-cumulativeLine").data([l]),U=T.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),V=T.select("g");if(U.append("g").attr("class","nv-interactive"),U.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),U.append("g").attr("class","nv-y nv-axis"),U.append("g").attr("class","nv-background"),U.append("g").attr("class","nv-linesWrap").style("pointer-events",S),U.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),U.append("g").attr("class","nv-legendWrap"),U.append("g").attr("class","nv-controlsWrap"),q?(i.width(M),V.select(".nv-legendWrap").datum(l).call(i),i.height()>m.top&&(m.top=i.height(),N=a.utils.availableHeight(p,L,m)),V.select(".nv-legendWrap").attr("transform","translate(0,"+-m.top+")")):V.select(".nv-legendWrap").selectAll("*").remove(),u){var W=[{key:"Re-scale y-axis",disabled:!w}];j.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),V.select(".nv-controlsWrap").datum(W).attr("transform","translate(0,"+-m.top+")").call(j)}else V.select(".nv-controlsWrap").selectAll("*").remove();T.attr("transform","translate("+m.left+","+m.top+")"),t&&V.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)");var X=l.filter(function(a){return a.tempDisabled});T.select(".tempDisabled").remove(),X.length&&T.append("text").attr("class","tempDisabled").attr("x",M/2).attr("y","-.71em").style("text-anchor","end").text(X.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period."),v&&(k.width(M).height(N).margin({left:m.left,top:m.top}).svgContainer(L).xScale(d),T.select(".nv-interactive").call(k)),U.select(".nv-background").append("rect"),V.select(".nv-background rect").attr("width",M).attr("height",N),f.y(function(a){return a.display.y}).width(M).height(N).color(l.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!l[b].disabled&&!l[b].tempDisabled}));var Y=V.select(".nv-linesWrap").datum(l.filter(function(a){return!a.disabled&&!a.tempDisabled}));Y.call(f),l.forEach(function(a,b){a.seriesIndex=b});var Z=l.filter(function(a){return!a.disabled&&!!B(a)}),$=V.select(".nv-avgLinesWrap").selectAll("line").data(Z,function(a){return a.key}),_=function(a){var b=e(B(a));return b<0?0:b>N?N:b};$.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a,b){return f.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",M).attr("y1",_).attr("y2",_),$.style("stroke-opacity",function(a){var b=e(B(a));return b<0||b>N?0:1}).attr("x1",0).attr("x2",M).attr("y1",_).attr("y2",_),$.exit().remove();var aa=Y.selectAll(".nv-indexLine").data([G]);aa.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(P),aa.attr("transform",function(a){return"translate("+F(a.i)+",0)"}).attr("height",N),r&&(g.scale(d)._ticks(a.utils.calcTicksX(M/70,l)).tickSize(-N,0),V.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),V.select(".nv-x.nv-axis").call(g)),s&&(h.scale(e)._ticks(a.utils.calcTicksY(N/36,l)).tickSize(-M,0),V.select(".nv-y.nv-axis").call(h)),V.select(".nv-background rect").on("click",function(){G.x=d3.mouse(this)[0],G.i=Math.round(F.invert(G.x)),y.index=G.i,C.stateChange(y),K()}),f.dispatch.on("elementClick",function(a){G.i=a.pointIndex,G.x=F(G.i),y.index=G.i,C.stateChange(y),K()}),j.dispatch.on("legendClick",function(a,c){a.disabled=!a.disabled,w=!a.disabled,y.rescaleY=w,C.stateChange(y),b.update()}),i.dispatch.on("stateChange",function(a){for(var c in a)y[c]=a[c];C.stateChange(y),b.update()}),k.dispatch.on("elementMousemove",function(c){f.clearHighlights();var d,e,i,j=[];if(l.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(g,h){e=a.interactiveBisect(g.values,c.pointXValue,b.x()),f.highlightPoint(h,e,!0);var k=g.values[e];"undefined"!=typeof k&&("undefined"==typeof d&&(d=k),"undefined"==typeof i&&(i=b.xScale()(b.x()(k,e))),j.push({key:g.key,value:b.y()(k,e),color:n(g,g.seriesIndex)}))}),j.length>2){var m=b.yScale().invert(c.mouseY),o=Math.abs(b.yScale().domain()[0]-b.yScale().domain()[1]),p=.03*o,q=a.nearestValueIndex(j.map(function(a){return a.value}),m,p);null!==q&&(j[q].highlight=!0)}var r=g.tickFormat()(b.x()(d,e),e);k.tooltip.valueFormatter(function(a,b){return h.tickFormat()(a)}).data({value:r,series:j})(),k.renderGuideLine(i)}),k.dispatch.on("elementMouseout",function(a){f.clearHighlights()}),C.on("changeState",function(a){"undefined"!=typeof a.disabled&&(l.forEach(function(b,c){b.disabled=a.disabled[c]}),y.disabled=a.disabled),"undefined"!=typeof a.index&&(G.i=a.index,G.x=F(G.i),y.index=a.index,aa.data([G])),"undefined"!=typeof a.rescaleY&&(w=a.rescaleY),b.update()})}),H.renderEnd("cumulativeLineChart immediate"),b}function c(a,b){return K||(K=f.y()),b.map(function(b,c){if(!b.values)return b;var d=b.values[a];if(null==d)return b;var e=K(d,a);return e<-.95&&!E?(b.tempDisabled=!0,b):(b.tempDisabled=!1,b.values=b.values.map(function(a,b){return a.display={y:(K(a,b)-e)/(1+e)},a}),b)})}var d,e,f=a.models.line(),g=a.models.axis(),h=a.models.axis(),i=a.models.legend(),j=a.models.legend(),k=a.interactiveGuideline(),l=a.models.tooltip(),m={top:30,right:30,bottom:50,left:60},n=a.utils.defaultColor(),o=null,p=null,q=!0,r=!0,s=!0,t=!1,u=!0,v=!1,w=!0,x=f.id(),y=a.utils.state(),z=null,A=null,B=function(a){return a.average},C=d3.dispatch("stateChange","changeState","renderEnd"),D=250,E=!1;y.index=0,y.rescaleY=w,g.orient("bottom").tickPadding(7),h.orient(t?"right":"left"),l.valueFormatter(function(a,b){return h.tickFormat()(a,b)}).headerFormatter(function(a,b){return g.tickFormat()(a,b)}),j.updateState(!1);var F=d3.scale.linear(),G={i:0,x:0},H=a.utils.renderWatch(C,D),I=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),index:G.i,rescaleY:w}}},J=function(a){return function(b){void 0!==b.index&&(G.i=b.index),void 0!==b.rescaleY&&(w=b.rescaleY),void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}};f.dispatch.on("elementMouseover.tooltip",function(a){var c={x:b.x()(a.point),y:b.y()(a.point),color:a.point.color};a.point=c,l.data(a).hidden(!1)}),f.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0)});var K=null;return b.dispatch=C,b.lines=f,b.legend=i,b.controls=j,b.xAxis=g,b.yAxis=h,b.interactiveLayer=k,b.state=y,b.tooltip=l,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return o},set:function(a){o=a}},height:{get:function(){return p},set:function(a){p=a}},rescaleY:{get:function(){return w},set:function(a){w=a}},showControls:{get:function(){return u},set:function(a){u=a}},showLegend:{get:function(){return q},set:function(a){q=a}},average:{get:function(){return B},set:function(a){B=a}},defaultState:{get:function(){return z},set:function(a){z=a}},noData:{get:function(){return A},set:function(a){A=a}},showXAxis:{get:function(){return r},set:function(a){r=a}},showYAxis:{get:function(){return s},set:function(a){s=a}},noErrorCheck:{get:function(){return E},set:function(a){E=a}},margin:{get:function(){return m},set:function(a){m.top=void 0!==a.top?a.top:m.top,m.right=void 0!==a.right?a.right:m.right,m.bottom=void 0!==a.bottom?a.bottom:m.bottom,m.left=void 0!==a.left?a.left:m.left}},color:{get:function(){return n},set:function(b){n=a.utils.getColor(b),i.color(n)}},useInteractiveGuideline:{get:function(){return v},set:function(a){v=a,a===!0&&(b.interactive(!1),b.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return t},set:function(a){t=a,h.orient(a?"right":"left")}},duration:{get:function(){return D},set:function(a){D=a,f.duration(D),g.duration(D),h.duration(D),H.reset(D)}}}),a.utils.inheritOptions(b,f),a.utils.initOptions(b),b},a.models.discreteBar=function(){"use strict";function b(m){return y.reset(),m.each(function(b){var m=k-j.left-j.right,x=l-j.top-j.bottom;c=d3.select(this),a.utils.initSVG(c),b.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});var z=d&&e?[]:b.map(function(a){return a.values.map(function(a,b){return{x:p(a,b),y:q(a,b),y0:a.y0}})});n.domain(d||d3.merge(z).map(function(a){return a.x})).rangeBands(f||[0,m],.1),o.domain(e||d3.extent(d3.merge(z).map(function(a){return a.y}).concat(r))),t?o.range(g||[x-(o.domain()[0]<0?12:0),o.domain()[1]>0?12:0]):o.range(g||[x,0]),h=h||n,i=i||o.copy().range([o(0),o(0)]);var A=c.selectAll("g.nv-wrap.nv-discretebar").data([b]),B=A.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),C=B.append("g");A.select("g");C.append("g").attr("class","nv-groups"),A.attr("transform","translate("+j.left+","+j.top+")");var D=A.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});D.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),D.exit().watchTransition(y,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),D.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}),D.watchTransition(y,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var E=D.selectAll("g.nv-bar").data(function(a){return a.values});E.exit().remove();var F=E.enter().append("g").attr("transform",function(a,b,c){return"translate("+(n(p(a,b))+.05*n.rangeBand())+", "+o(0)+")"}).on("mouseover",function(a,b){d3.select(this).classed("hover",!0),v.elementMouseover({data:a,index:b,color:d3.select(this).style("fill")})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1),v.elementMouseout({data:a,index:b,color:d3.select(this).style("fill")})}).on("mousemove",function(a,b){v.elementMousemove({data:a,index:b,color:d3.select(this).style("fill")})}).on("click",function(a,b){var c=this;v.elementClick({data:a,index:b,color:d3.select(this).style("fill"),event:d3.event,element:c}),d3.event.stopPropagation()}).on("dblclick",function(a,b){v.elementDblClick({data:a,index:b,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});F.append("rect").attr("height",0).attr("width",.9*n.rangeBand()/b.length),t?(F.append("text").attr("text-anchor","middle"),E.select("text").text(function(a,b){return u(q(a,b))}).watchTransition(y,"discreteBar: bars text").attr("x",.9*n.rangeBand()/2).attr("y",function(a,b){return q(a,b)<0?o(q(a,b))-o(0)+12:-4})):E.selectAll("text").remove(),E.attr("class",function(a,b){return q(a,b)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(a,b){return a.color||s(a,b)}).style("stroke",function(a,b){return a.color||s(a,b)}).select("rect").attr("class",w).watchTransition(y,"discreteBar: bars rect").attr("width",.9*n.rangeBand()/b.length),E.watchTransition(y,"discreteBar: bars").attr("transform",function(a,b){var c=n(p(a,b))+.05*n.rangeBand(),d=q(a,b)<0?o(0):o(0)-o(q(a,b))<1?o(0)-1:o(q(a,b));return"translate("+c+", "+d+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(o(q(a,b))-o(0)),1)}),h=n.copy(),i=o.copy()}),y.renderEnd("discreteBar immediate"),b}var c,d,e,f,g,h,i,j={top:0,right:0,bottom:0,left:0},k=960,l=500,m=Math.floor(1e4*Math.random()),n=d3.scale.ordinal(),o=d3.scale.linear(),p=function(a){return a.x},q=function(a){return a.y},r=[0],s=a.utils.defaultColor(),t=!1,u=d3.format(",.2f"),v=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),w="discreteBar",x=250,y=a.utils.renderWatch(v,x);return b.dispatch=v,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return l},set:function(a){l=a}},forceY:{get:function(){return r},set:function(a){r=a}},showValues:{get:function(){return t},set:function(a){t=a}},x:{get:function(){return p},set:function(a){p=a}},y:{get:function(){return q},set:function(a){q=a}},xScale:{get:function(){return n},set:function(a){n=a}},yScale:{get:function(){return o},set:function(a){o=a}},xDomain:{get:function(){return d},set:function(a){d=a}},yDomain:{get:function(){return e},set:function(a){e=a}},xRange:{get:function(){return f},set:function(a){f=a}},yRange:{get:function(){return g},set:function(a){g=a}},valueFormat:{get:function(){return u},set:function(a){u=a}},id:{get:function(){return m},set:function(a){m=a}},rectClass:{get:function(){return w},set:function(a){w=a}},margin:{get:function(){return j},set:function(a){j.top=void 0!==a.top?a.top:j.top,j.right=void 0!==a.right?a.right:j.right,j.bottom=void 0!==a.bottom?a.bottom:j.bottom,j.left=void 0!==a.left?a.left:j.left}},color:{get:function(){return s},set:function(b){s=a.utils.getColor(b)}},duration:{get:function(){return x},set:function(a){x=a,y.reset(x)}}}),a.utils.initOptions(b),b},a.models.discreteBarChart=function(){"use strict";function b(i){return x.reset(),x.models(e),o&&x.models(f),p&&x.models(g),i.each(function(i){var m=d3.select(this);a.utils.initSVG(m);var u=a.utils.availableWidth(k,m,j),x=a.utils.availableHeight(l,m,j);if(b.update=function(){v.beforeUpdate(),m.transition().duration(w).call(b)},b.container=this,!(i&&i.length&&i.filter(function(a){return a.values.length}).length))return a.utils.noData(b,m),b;m.selectAll(".nv-noData").remove(),c=e.xScale(),d=e.yScale().clamp(!0);var y=m.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([i]),z=y.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),A=z.append("defs"),B=y.select("g");z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),z.append("g").attr("class","nv-barsWrap"),z.append("g").attr("class","nv-legendWrap"),B.attr("transform","translate("+j.left+","+j.top+")"),n?(h.width(u),B.select(".nv-legendWrap").datum(i).call(h),h.height()>j.top&&(j.top=h.height(),x=a.utils.availableHeight(l,m,j)),y.select(".nv-legendWrap").attr("transform","translate(0,"+-j.top+")")):B.select(".nv-legendWrap").selectAll("*").remove(),q&&B.select(".nv-y.nv-axis").attr("transform","translate("+u+",0)"),e.width(u).height(x);var C=B.select(".nv-barsWrap").datum(i.filter(function(a){return!a.disabled}));if(C.transition().call(e),A.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect"),B.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",c.rangeBand()*(r?2:1)).attr("height",16).attr("x",-c.rangeBand()/(r?1:2)),o){f.scale(c)._ticks(a.utils.calcTicksX(u/100,i)).tickSize(-x,0),B.select(".nv-x.nv-axis").attr("transform","translate(0,"+(d.range()[0]+(e.showValues()&&d.domain()[0]<0?16:0))+")"),B.select(".nv-x.nv-axis").call(f);var D=B.select(".nv-x.nv-axis").selectAll("g");r&&D.selectAll("text").attr("transform",function(a,b,c){return"translate(0,"+(c%2==0?"5":"17")+")"}),t&&D.selectAll(".tick text").attr("transform","rotate("+t+" 0,0)").style("text-anchor",t>0?"start":"end"),s&&B.selectAll(".tick text").call(a.utils.wrapTicks,b.xAxis.rangeBand())}p&&(g.scale(d)._ticks(a.utils.calcTicksY(x/36,i)).tickSize(-u,0),B.select(".nv-y.nv-axis").call(g)),B.select(".nv-zeroLine line").attr("x1",0).attr("x2",q?-u:u).attr("y1",d(0)).attr("y2",d(0))}),x.renderEnd("discreteBar chart immediate"),b}var c,d,e=a.models.discreteBar(),f=a.models.axis(),g=a.models.axis(),h=a.models.legend(),i=a.models.tooltip(),j={top:15,right:10,bottom:50,left:60},k=null,l=null,m=a.utils.getColor(),n=!1,o=!0,p=!0,q=!1,r=!1,s=!1,t=0,u=null,v=d3.dispatch("beforeUpdate","renderEnd"),w=250;f.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a}),g.orient(q?"right":"left").tickFormat(d3.format(",.1f")),i.duration(0).headerEnabled(!1).valueFormatter(function(a,b){return g.tickFormat()(a,b)}).keyFormatter(function(a,b){return f.tickFormat()(a,b)});var x=a.utils.renderWatch(v,w);return e.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:b.x()(a.data),value:b.y()(a.data),color:a.color},i.data(a).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(a){i.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(a){i()}),b.dispatch=v,b.discretebar=e,b.legend=h,b.xAxis=f,b.yAxis=g,b.tooltip=i,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return l},set:function(a){l=a}},showLegend:{get:function(){return n},set:function(a){n=a}},staggerLabels:{get:function(){return r},set:function(a){r=a}},rotateLabels:{get:function(){return t},set:function(a){t=a}},wrapLabels:{get:function(){return s},set:function(a){s=!!a}},showXAxis:{get:function(){return o},set:function(a){o=a}},showYAxis:{get:function(){return p},set:function(a){p=a}},noData:{get:function(){return u},set:function(a){u=a}},margin:{get:function(){return j},set:function(a){j.top=void 0!==a.top?a.top:j.top,j.right=void 0!==a.right?a.right:j.right,j.bottom=void 0!==a.bottom?a.bottom:j.bottom,j.left=void 0!==a.left?a.left:j.left}},duration:{get:function(){return w},set:function(a){w=a,x.reset(w),e.duration(w),f.duration(w),g.duration(w)}},color:{get:function(){return m},set:function(b){m=a.utils.getColor(b),e.color(m),h.color(m)}},rightAlignYAxis:{get:function(){return q},set:function(a){q=a,g.orient(a?"right":"left")}}}),a.utils.inheritOptions(b,e),a.utils.initOptions(b),b},a.models.distribution=function(){"use strict";function b(k){return m.reset(),k.each(function(b){var k=(e-("x"===g?d.left+d.right:d.top+d.bottom),"x"==g?"y":"x"),l=d3.select(this);a.utils.initSVG(l),c=c||j;var n=l.selectAll("g.nv-distribution").data([b]),o=n.enter().append("g").attr("class","nvd3 nv-distribution"),p=(o.append("g"),n.select("g"));n.attr("transform","translate("+d.left+","+d.top+")");var q=p.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});q.enter().append("g"),q.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(a,b){return i(a,b)});var r=q.selectAll("line.nv-dist"+g).data(function(a){return a.values});r.enter().append("line").attr(g+"1",function(a,b){return c(h(a,b))}).attr(g+"2",function(a,b){return c(h(a,b))}),m.transition(q.exit().selectAll("line.nv-dist"+g),"dist exit").attr(g+"1",function(a,b){return j(h(a,b))}).attr(g+"2",function(a,b){return j(h(a,b))}).style("stroke-opacity",0).remove(),r.attr("class",function(a,b){return"nv-dist"+g+" nv-dist"+g+"-"+b}).attr(k+"1",0).attr(k+"2",f),m.transition(r,"dist").attr(g+"1",function(a,b){return j(h(a,b))}).attr(g+"2",function(a,b){return j(h(a,b))}),c=j.copy()}),m.renderEnd("distribution immediate"),b}var c,d={top:0,right:0,bottom:0,left:0},e=400,f=8,g="x",h=function(a){return a[g]},i=a.utils.defaultColor(),j=d3.scale.linear(),k=250,l=d3.dispatch("renderEnd"),m=a.utils.renderWatch(l,k);return b.options=a.utils.optionsFunc.bind(b),b.dispatch=l,b.margin=function(a){return arguments.length?(d.top="undefined"!=typeof a.top?a.top:d.top,d.right="undefined"!=typeof a.right?a.right:d.right,d.bottom="undefined"!=typeof a.bottom?a.bottom:d.bottom,d.left="undefined"!=typeof a.left?a.left:d.left,b):d},b.width=function(a){return arguments.length?(e=a,b):e},b.axis=function(a){return arguments.length?(g=a,b):g},b.size=function(a){return arguments.length?(f=a,b):f},b.getData=function(a){return arguments.length?(h=d3.functor(a),b):h},b.scale=function(a){return arguments.length?(j=a,b):j},b.color=function(c){return arguments.length?(i=a.utils.getColor(c),b):i},b.duration=function(a){return arguments.length?(k=a,m.reset(k),b):k},b},a.models.focus=function(b){"use strict";function c(t){return s.reset(),s.models(b),m&&s.models(f),n&&s.models(g),t.each(function(s){function t(a){var b=+("e"==a),c=b?1:-1,d=y/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)}function u(){h.empty()||h.extent(p),D.data([h.empty()?d.domain():p]).each(function(a,b){var c=d(a[0])-d.range()[0],e=x-d(a[1]);d3.select(this).select(".left").attr("width",c<0?0:c),d3.select(this).select(".right").attr("x",d(a[1])).attr("width",e<0?0:e)})}function v(){p=h.empty()?null:h.extent();var a=h.empty()?d.domain():h.extent();Math.abs(a[0]-a[1])<=1||(r.brush({extent:a,brush:h}),u(),r.onBrush(a))}var w=d3.select(this);a.utils.initSVG(w);var x=a.utils.availableWidth(k,w,i),y=l-i.top-i.bottom;c.update=function(){0===q?w.call(c):w.transition().duration(q).call(c)},c.container=this,d=b.xScale(),e=b.yScale();var z=w.selectAll("g.nv-focus").data([s]),A=z.enter().append("g").attr("class","nvd3 nv-focus").append("g"),B=z.select("g");z.attr("transform","translate("+i.left+","+i.top+")"),A.append("g").attr("class","nv-background").append("rect"),A.append("g").attr("class","nv-x nv-axis"),A.append("g").attr("class","nv-y nv-axis"),A.append("g").attr("class","nv-contentWrap"),A.append("g").attr("class","nv-brushBackground"),A.append("g").attr("class","nv-x nv-brush"),o&&B.select(".nv-y.nv-axis").attr("transform","translate("+x+",0)"),B.select(".nv-background rect").attr("width",x).attr("height",y),b.width(x).height(y).color(s.map(function(a,b){return a.color||j(a,b)}).filter(function(a,b){return!s[b].disabled}));var C=B.select(".nv-contentWrap").datum(s.filter(function(a){return!a.disabled}));d3.transition(C).call(b),h.x(d).on("brush",function(){v()}),p&&h.extent(p);var D=B.select(".nv-brushBackground").selectAll("g").data([p||h.extent()]),E=D.enter().append("g");E.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",y),E.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",y);var F=B.select(".nv-x.nv-brush").call(h);F.selectAll("rect").attr("height",y),F.selectAll(".resize").append("path").attr("d",t),v(),B.select(".nv-background rect").attr("width",x).attr("height",y),m&&(f.scale(d)._ticks(a.utils.calcTicksX(x/100,s)).tickSize(-y,0),B.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),d3.transition(B.select(".nv-x.nv-axis")).call(f)),n&&(g.scale(e)._ticks(a.utils.calcTicksY(y/36,s)).tickSize(-x,0),d3.transition(B.select(".nv-y.nv-axis")).call(g)),B.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")")}),s.renderEnd("focus immediate"),c}var d,e,b=b||a.models.line(),f=a.models.axis(),g=a.models.axis(),h=d3.svg.brush(),i={top:10,right:0,bottom:30,left:0},j=a.utils.defaultColor(),k=null,l=70,m=!0,n=!1,o=!1,p=null,q=250,r=d3.dispatch("brush","onBrush","renderEnd");b.interactive(!1),b.pointActive(function(a){return!1});var s=a.utils.renderWatch(r,q);return c.dispatch=r,c.content=b,c.brush=h,c.xAxis=f,c.yAxis=g,c.options=a.utils.optionsFunc.bind(c),c._options=Object.create({},{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return l},set:function(a){l=a}},showXAxis:{get:function(){return m},set:function(a){m=a}},showYAxis:{get:function(){return n},set:function(a){n=a}},brushExtent:{get:function(){return p},set:function(a){p=a}},margin:{get:function(){return i},set:function(a){i.top=void 0!==a.top?a.top:i.top,i.right=void 0!==a.right?a.right:i.right,i.bottom=void 0!==a.bottom?a.bottom:i.bottom,i.left=void 0!==a.left?a.left:i.left}},duration:{get:function(){return q},set:function(a){q=a,s.reset(q),b.duration(q),f.duration(q),g.duration(q)}},color:{get:function(){return j},set:function(c){j=a.utils.getColor(c),b.color(j)}},interpolate:{get:function(){return b.interpolate()},set:function(a){b.interpolate(a)}},xTickFormat:{get:function(){return f.tickFormat()},set:function(a){f.tickFormat(a)}},yTickFormat:{get:function(){return g.tickFormat()},set:function(a){g.tickFormat(a)}},x:{get:function(){return b.x()},set:function(a){b.x(a)}},y:{get:function(){return b.y()},set:function(a){b.y(a)}},rightAlignYAxis:{get:function(){return o},set:function(a){o=a,g.orient(o?"right":"left")}}}),a.utils.inheritOptions(c,b),a.utils.initOptions(c),c},a.models.forceDirectedGraph=function(){"use strict";function b(g){return u.reset(),g.each(function(g){f=d3.select(this),a.utils.initSVG(f);var j=a.utils.availableWidth(d,f,c),u=a.utils.availableHeight(e,f,c);if(f.attr("width",j).attr("height",u),!(g&&g.links&&g.nodes))return a.utils.noData(b,f),b;f.selectAll(".nv-noData").remove(),f.selectAll("*").remove();var v=new Set;g.nodes.forEach(function(a){var b=Object.keys(a);b.forEach(function(a){v.add(a)})});var w=d3.layout.force().nodes(g.nodes).links(g.links).size([j,u]).linkStrength(k).friction(l).linkDistance(m).charge(n).gravity(o).theta(p).alpha(q).start(),x=f.selectAll(".link").data(g.links).enter().append("line").attr("class","nv-force-link").style("stroke-width",function(a){return Math.sqrt(a.value)}),y=f.selectAll(".node").data(g.nodes).enter().append("g").attr("class","nv-force-node").call(w.drag);y.append("circle").attr("r",r).style("fill",function(a){return h(a)}).on("mouseover",function(a){f.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.py),
f.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.px);var b=h(a);a.series=[],v.forEach(function(c){a.series.push({color:b,key:c,value:a[c]})}),i.data(a).hidden(!1)}).on("mouseout",function(a){i.hidden(!0)}),i.headerFormatter(function(a){return"Node"}),t(x),s(y),w.on("tick",function(){x.attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y}),y.attr("transform",function(a){return"translate("+a.x+", "+a.y+")"})})}),b}var c={top:2,right:0,bottom:2,left:0},d=400,e=32,f=null,g=d3.dispatch("renderEnd"),h=a.utils.getColor(["#000"]),i=a.models.tooltip(),j=null,k=.1,l=.9,m=30,n=-120,o=.1,p=.8,q=.1,r=5,s=function(a){},t=function(a){},u=a.utils.renderWatch(g);return b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return d},set:function(a){d=a}},height:{get:function(){return e},set:function(a){e=a}},linkStrength:{get:function(){return k},set:function(a){k=a}},friction:{get:function(){return l},set:function(a){l=a}},linkDist:{get:function(){return m},set:function(a){m=a}},charge:{get:function(){return n},set:function(a){n=a}},gravity:{get:function(){return o},set:function(a){o=a}},theta:{get:function(){return p},set:function(a){p=a}},alpha:{get:function(){return q},set:function(a){q=a}},radius:{get:function(){return r},set:function(a){r=a}},x:{get:function(){return getX},set:function(a){getX=d3.functor(a)}},y:{get:function(){return getY},set:function(a){getY=d3.functor(a)}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top,c.right=void 0!==a.right?a.right:c.right,c.bottom=void 0!==a.bottom?a.bottom:c.bottom,c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return h},set:function(b){h=a.utils.getColor(b)}},noData:{get:function(){return j},set:function(a){j=a}},nodeExtras:{get:function(){return s},set:function(a){s=a}},linkExtras:{get:function(){return t},set:function(a){t=a}}}),b.dispatch=g,b.tooltip=i,a.utils.initOptions(b),b},a.models.furiousLegend=function(){"use strict";function b(r){function s(a,b){return"furious"!=q?"#000":o?a.disengaged?h(a,b):"#fff":o?void 0:a.disabled?h(a,b):"#fff"}function t(a,b){return o&&"furious"==q?a.disengaged?"#fff":h(a,b):a.disabled?"#fff":h(a,b)}return r.each(function(b){var r=d-c.left-c.right,u=d3.select(this);a.utils.initSVG(u);var v=u.selectAll("g.nv-legend").data([b]),w=(v.enter().append("g").attr("class","nvd3 nv-legend").append("g"),v.select("g"));v.attr("transform","translate("+c.left+","+c.top+")");var x,y=w.selectAll(".nv-series").data(function(a){return"furious"!=q?a:a.filter(function(a){return!!o||!a.disengaged})}),z=y.enter().append("g").attr("class","nv-series");if("classic"==q)z.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),x=y.select("circle");else if("furious"==q){z.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),x=y.select("rect"),z.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");var A=y.select(".nv-check-box");A.each(function(a,b){d3.select(this).selectAll("path").attr("stroke",s(a,b))})}z.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var B=y.select("text.nv-legend-text");y.on("mouseover",function(a,b){p.legendMouseover(a,b)}).on("mouseout",function(a,b){p.legendMouseout(a,b)}).on("click",function(a,b){p.legendClick(a,b);var c=y.data();if(m){if("classic"==q)n?(c.forEach(function(a){a.disabled=!0}),a.disabled=!1):(a.disabled=!a.disabled,c.every(function(a){return a.disabled})&&c.forEach(function(a){a.disabled=!1}));else if("furious"==q)if(o)a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled;else if(!o){a.disabled=!a.disabled,a.userDisabled=a.disabled;var d=c.filter(function(a){return!a.disengaged});d.every(function(a){return a.userDisabled})&&c.forEach(function(a){a.disabled=a.userDisabled=!1})}p.stateChange({disabled:c.map(function(a){return!!a.disabled}),disengaged:c.map(function(a){return!!a.disengaged})})}}).on("dblclick",function(a,b){if(("furious"!=q||!o)&&(p.legendDblclick(a,b),m)){var c=y.data();c.forEach(function(a){a.disabled=!0,"furious"==q&&(a.userDisabled=a.disabled)}),a.disabled=!1,"furious"==q&&(a.userDisabled=a.disabled),p.stateChange({disabled:c.map(function(a){return!!a.disabled})})}}),y.classed("nv-disabled",function(a){return a.userDisabled}),y.exit().remove(),B.attr("fill",s).text(function(a){return g(f(a))});var C;switch(q){case"furious":C=23;break;case"classic":C=20}if(j){var D=[];y.each(function(b,c){var d;if(g(f(b))&&g(f(b)).length>i){var e=g(f(b)).substring(0,i);d=d3.select(this).select("text").text(e+"..."),d3.select(this).append("svg:title").text(g(f(b)))}else d=d3.select(this).select("text");var h;try{if(h=d.node().getComputedTextLength(),h<=0)throw Error()}catch(j){h=a.utils.calcApproxTextWidth(d)}D.push(h+k)});for(var E=0,F=0,G=[];F<r&&E<D.length;)G[E]=D[E],F+=D[E++];for(0===E&&(E=1);F>r&&E>1;){G=[],E--;for(var H=0;H<D.length;H++)D[H]>(G[H%E]||0)&&(G[H%E]=D[H]);F=G.reduce(function(a,b,c,d){return a+b})}for(var I=[],J=0,K=0;J<E;J++)I[J]=K,K+=G[J];y.attr("transform",function(a,b){return"translate("+I[b%E]+","+(5+Math.floor(b/E)*C)+")"}),l?w.attr("transform","translate("+(d-c.right-F)+","+c.top+")"):w.attr("transform","translate(0,"+c.top+")"),e=c.top+c.bottom+Math.ceil(D.length/E)*C}else{var L,M=5,N=5,O=0;y.attr("transform",function(a,b){var e=d3.select(this).select("text").node().getComputedTextLength()+k;return L=N,d<c.left+c.right+L+e&&(N=L=5,M+=C),N+=e,N>O&&(O=N),"translate("+L+","+M+")"}),w.attr("transform","translate("+(d-c.right-O)+","+c.top+")"),e=c.top+c.bottom+M+15}"furious"==q&&x.attr("width",function(a,b){return B[0][b].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),x.style("fill",t).style("stroke",function(a,b){return a.color||h(a,b)})}),b}var c={top:5,right:0,bottom:5,left:0},d=400,e=20,f=function(a){return a.key},g=function(a){return a},h=a.utils.getColor(),i=20,j=!0,k=28,l=!0,m=!0,n=!1,o=!1,p=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),q="classic";return b.dispatch=p,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return d},set:function(a){d=a}},height:{get:function(){return e},set:function(a){e=a}},key:{get:function(){return f},set:function(a){f=a}},keyFormatter:{get:function(){return g},set:function(a){g=a}},align:{get:function(){return j},set:function(a){j=a}},rightAlign:{get:function(){return l},set:function(a){l=a}},maxKeyLength:{get:function(){return i},set:function(a){i=a}},padding:{get:function(){return k},set:function(a){k=a}},updateState:{get:function(){return m},set:function(a){m=a}},radioButtonMode:{get:function(){return n},set:function(a){n=a}},expanded:{get:function(){return o},set:function(a){o=a}},vers:{get:function(){return q},set:function(a){q=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top,c.right=void 0!==a.right?a.right:c.right,c.bottom=void 0!==a.bottom?a.bottom:c.bottom,c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return h},set:function(b){h=a.utils.getColor(b)}}}),a.utils.initOptions(b),b},a.models.historicalBar=function(){"use strict";function b(x){return x.each(function(b){w.reset(),k=d3.select(this);var x=a.utils.availableWidth(h,k,g),y=a.utils.availableHeight(i,k,g);a.utils.initSVG(k),l.domain(c||d3.extent(b[0].values.map(n).concat(p))),r?l.range(e||[.5*x/b[0].values.length,x*(b[0].values.length-.5)/b[0].values.length]):l.range(e||[0,x]),m.domain(d||d3.extent(b[0].values.map(o).concat(q))).range(f||[y,0]),l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]-.01*l.domain()[0],l.domain()[1]+.01*l.domain()[1]]):l.domain([-1,1])),m.domain()[0]===m.domain()[1]&&(m.domain()[0]?m.domain([m.domain()[0]+.01*m.domain()[0],m.domain()[1]-.01*m.domain()[1]]):m.domain([-1,1]));var z=k.selectAll("g.nv-wrap.nv-historicalBar-"+j).data([b[0].values]),A=z.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+j),B=A.append("defs"),C=A.append("g"),D=z.select("g");C.append("g").attr("class","nv-bars"),z.attr("transform","translate("+g.left+","+g.top+")"),k.on("click",function(a,b){u.chartClick({data:a,index:b,pos:d3.event,id:j})}),B.append("clipPath").attr("id","nv-chart-clip-path-"+j).append("rect"),z.select("#nv-chart-clip-path-"+j+" rect").attr("width",x).attr("height",y),D.attr("clip-path",s?"url(#nv-chart-clip-path-"+j+")":"");var E=z.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,b){return n(a,b)});E.exit().remove(),E.enter().append("rect").attr("x",0).attr("y",function(b,c){return a.utils.NaNtoZero(m(Math.max(0,o(b,c))))}).attr("height",function(b,c){return a.utils.NaNtoZero(Math.abs(m(o(b,c))-m(0)))}).attr("transform",function(a,c){return"translate("+(l(n(a,c))-x/b[0].values.length*.45)+",0)"}).on("mouseover",function(a,b){v&&(d3.select(this).classed("hover",!0),u.elementMouseover({data:a,index:b,color:d3.select(this).style("fill")}))}).on("mouseout",function(a,b){v&&(d3.select(this).classed("hover",!1),u.elementMouseout({data:a,index:b,color:d3.select(this).style("fill")}))}).on("mousemove",function(a,b){v&&u.elementMousemove({data:a,index:b,color:d3.select(this).style("fill")})}).on("click",function(a,b){v&&(u.elementClick({data:a,index:b,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(a,b){v&&(u.elementDblClick({data:a,index:b,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),E.attr("fill",function(a,b){return t(a,b)}).attr("class",function(a,b,c){return(o(a,b)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+c+"-"+b}).watchTransition(w,"bars").attr("transform",function(a,c){return"translate("+(l(n(a,c))-x/b[0].values.length*.45)+",0)"}).attr("width",x/b[0].values.length*.9),E.watchTransition(w,"bars").attr("y",function(b,c){var d=o(b,c)<0?m(0):m(0)-m(o(b,c))<1?m(0)-1:m(o(b,c));return a.utils.NaNtoZero(d)}).attr("height",function(b,c){return a.utils.NaNtoZero(Math.max(Math.abs(m(o(b,c))-m(0)),1))})}),w.renderEnd("historicalBar immediate"),b}var c,d,e,f,g={top:0,right:0,bottom:0,left:0},h=null,i=null,j=Math.floor(1e4*Math.random()),k=null,l=d3.scale.linear(),m=d3.scale.linear(),n=function(a){return a.x},o=function(a){return a.y},p=[],q=[0],r=!1,s=!0,t=a.utils.defaultColor(),u=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),v=!0,w=a.utils.renderWatch(u,0);return b.highlightPoint=function(a,b){k.select(".nv-bars .nv-bar-0-"+a).classed("hover",b)},b.clearHighlights=function(){k.select(".nv-bars .nv-bar.hover").classed("hover",!1)},b.dispatch=u,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return h},set:function(a){h=a}},height:{get:function(){return i},set:function(a){i=a}},forceX:{get:function(){return p},set:function(a){p=a}},forceY:{get:function(){return q},set:function(a){q=a}},padData:{get:function(){return r},set:function(a){r=a}},x:{get:function(){return n},set:function(a){n=a}},y:{get:function(){return o},set:function(a){o=a}},xScale:{get:function(){return l},set:function(a){l=a}},yScale:{get:function(){return m},set:function(a){m=a}},xDomain:{get:function(){return c},set:function(a){c=a}},yDomain:{get:function(){return d},set:function(a){d=a}},xRange:{get:function(){return e},set:function(a){e=a}},yRange:{get:function(){return f},set:function(a){f=a}},clipEdge:{get:function(){return s},set:function(a){s=a}},id:{get:function(){return j},set:function(a){j=a}},interactive:{get:function(){return v},set:function(a){v=a}},margin:{get:function(){return g},set:function(a){g.top=void 0!==a.top?a.top:g.top,g.right=void 0!==a.right?a.right:g.right,g.bottom=void 0!==a.bottom?a.bottom:g.bottom,g.left=void 0!==a.left?a.left:g.left}},color:{get:function(){return t},set:function(b){t=a.utils.getColor(b)}}}),a.utils.initOptions(b),b},a.models.historicalBarChart=function(b){"use strict";function c(b){return b.each(function(k){z.reset(),z.models(f),q&&z.models(g),r&&z.models(h);var w=d3.select(this);a.utils.initSVG(w);var A=a.utils.availableWidth(n,w,l),B=a.utils.availableHeight(o,w,l);if(c.update=function(){w.transition().duration(y).call(c)},c.container=this,u.disabled=k.map(function(a){return!!a.disabled}),!v){var C;v={};for(C in u)u[C]instanceof Array?v[C]=u[C].slice(0):v[C]=u[C]}if(!(k&&k.length&&k.filter(function(a){return a.values.length}).length))return a.utils.noData(c,w),c;w.selectAll(".nv-noData").remove(),d=f.xScale(),e=f.yScale();var D=w.selectAll("g.nv-wrap.nv-historicalBarChart").data([k]),E=D.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),F=D.select("g");E.append("g").attr("class","nv-x nv-axis"),E.append("g").attr("class","nv-y nv-axis"),E.append("g").attr("class","nv-barsWrap"),E.append("g").attr("class","nv-legendWrap"),E.append("g").attr("class","nv-interactive"),p?(i.width(A),F.select(".nv-legendWrap").datum(k).call(i),i.height()>l.top&&(l.top=i.height(),B=a.utils.availableHeight(o,w,l)),D.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")):F.select(".nv-legendWrap").selectAll("*").remove(),D.attr("transform","translate("+l.left+","+l.top+")"),s&&F.select(".nv-y.nv-axis").attr("transform","translate("+A+",0)"),t&&(j.width(A).height(B).margin({left:l.left,top:l.top}).svgContainer(w).xScale(d),D.select(".nv-interactive").call(j)),f.width(A).height(B).color(k.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!k[b].disabled}));var G=F.select(".nv-barsWrap").datum(k.filter(function(a){return!a.disabled}));G.transition().call(f),q&&(g.scale(d)._ticks(a.utils.calcTicksX(A/100,k)).tickSize(-B,0),F.select(".nv-x.nv-axis").attr("transform","translate(0,"+e.range()[0]+")"),F.select(".nv-x.nv-axis").transition().call(g)),r&&(h.scale(e)._ticks(a.utils.calcTicksY(B/36,k)).tickSize(-A,0),F.select(".nv-y.nv-axis").transition().call(h)),j.dispatch.on("elementMousemove",function(b){f.clearHighlights();var d,e,i,l=[];k.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(g,h){e=a.interactiveBisect(g.values,b.pointXValue,c.x()),f.highlightPoint(e,!0);var j=g.values[e];void 0!==j&&(void 0===d&&(d=j),void 0===i&&(i=c.xScale()(c.x()(j,e))),l.push({key:g.key,value:c.y()(j,e),color:m(g,g.seriesIndex),data:g.values[e]}))});var n=g.tickFormat()(c.x()(d,e));j.tooltip.valueFormatter(function(a,b){return h.tickFormat()(a)}).data({value:n,index:e,series:l})(),j.renderGuideLine(i)}),j.dispatch.on("elementMouseout",function(a){x.tooltipHide(),f.clearHighlights()}),i.dispatch.on("legendClick",function(a,d){a.disabled=!a.disabled,k.filter(function(a){return!a.disabled}).length||k.map(function(a){return a.disabled=!1,D.selectAll(".nv-series").classed("disabled",!1),a}),u.disabled=k.map(function(a){return!!a.disabled}),x.stateChange(u),b.transition().call(c)}),i.dispatch.on("legendDblclick",function(a){k.forEach(function(a){a.disabled=!0}),a.disabled=!1,u.disabled=k.map(function(a){return!!a.disabled}),x.stateChange(u),c.update()}),x.on("changeState",function(a){"undefined"!=typeof a.disabled&&(k.forEach(function(b,c){b.disabled=a.disabled[c]}),u.disabled=a.disabled),c.update()})}),z.renderEnd("historicalBarChart immediate"),c}var d,e,f=b||a.models.historicalBar(),g=a.models.axis(),h=a.models.axis(),i=a.models.legend(),j=a.interactiveGuideline(),k=a.models.tooltip(),l={top:30,right:90,bottom:50,left:90},m=a.utils.defaultColor(),n=null,o=null,p=!1,q=!0,r=!0,s=!1,t=!1,u={},v=null,w=null,x=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),y=250;g.orient("bottom").tickPadding(7),h.orient(s?"right":"left"),k.duration(0).headerEnabled(!1).valueFormatter(function(a,b){return h.tickFormat()(a,b)}).headerFormatter(function(a,b){return g.tickFormat()(a,b)});var z=a.utils.renderWatch(x,0);return f.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:c.x()(a.data),value:c.y()(a.data),color:a.color},k.data(a).hidden(!1)}),f.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)}),f.dispatch.on("elementMousemove.tooltip",function(a){k()}),c.dispatch=x,c.bars=f,c.legend=i,c.xAxis=g,c.yAxis=h,c.interactiveLayer=j,c.tooltip=k,c.options=a.utils.optionsFunc.bind(c),c._options=Object.create({},{width:{get:function(){return n},set:function(a){n=a}},height:{get:function(){return o},set:function(a){o=a}},showLegend:{get:function(){return p},set:function(a){p=a}},showXAxis:{get:function(){return q},set:function(a){q=a}},showYAxis:{get:function(){return r},set:function(a){r=a}},defaultState:{get:function(){return v},set:function(a){v=a}},noData:{get:function(){return w},set:function(a){w=a}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top,l.right=void 0!==a.right?a.right:l.right,l.bottom=void 0!==a.bottom?a.bottom:l.bottom,l.left=void 0!==a.left?a.left:l.left}},color:{get:function(){return m},set:function(b){m=a.utils.getColor(b),i.color(m),f.color(m)}},duration:{get:function(){return y},set:function(a){y=a,z.reset(y),h.duration(y),g.duration(y)}},rightAlignYAxis:{get:function(){return s},set:function(a){s=a,h.orient(a?"right":"left")}},useInteractiveGuideline:{get:function(){return t},set:function(a){t=a,a===!0&&c.interactive(!1)}}}),a.utils.inheritOptions(c,f),a.utils.initOptions(c),c},a.models.ohlcBarChart=function(){var b=a.models.historicalBarChart(a.models.ohlcBar());return b.useInteractiveGuideline(!0),b.interactiveLayer.tooltip.contentGenerator(function(a){var c=a.series[0].data,d=c.open<c.close?"2ca02c":"d62728";return'<h3 style="color: #'+d+'">'+a.value+"</h3><table><tr><td>open:</td><td>"+b.yAxis.tickFormat()(c.open)+"</td></tr><tr><td>close:</td><td>"+b.yAxis.tickFormat()(c.close)+"</td></tr><tr><td>high</td><td>"+b.yAxis.tickFormat()(c.high)+"</td></tr><tr><td>low:</td><td>"+b.yAxis.tickFormat()(c.low)+"</td></tr></table>"}),b},a.models.candlestickBarChart=function(){var b=a.models.historicalBarChart(a.models.candlestickBar());return b.useInteractiveGuideline(!0),b.interactiveLayer.tooltip.contentGenerator(function(a){var c=a.series[0].data,d=c.open<c.close?"2ca02c":"d62728";return'<h3 style="color: #'+d+'">'+a.value+"</h3><table><tr><td>open:</td><td>"+b.yAxis.tickFormat()(c.open)+"</td></tr><tr><td>close:</td><td>"+b.yAxis.tickFormat()(c.close)+"</td></tr><tr><td>high</td><td>"+b.yAxis.tickFormat()(c.high)+"</td></tr><tr><td>low:</td><td>"+b.yAxis.tickFormat()(c.low)+"</td></tr></table>"}),b},a.models.legend=function(){"use strict";function b(r){function s(a,b){return"furious"!=q?"#000":o?a.disengaged?"#000":"#fff":o?void 0:(a.color||(a.color=h(a,b)),a.disabled?a.color:"#fff")}function t(a,b){return o&&"furious"==q&&a.disengaged?"#eee":a.color||h(a,b)}function u(a,b){return o&&"furious"==q?1:a.disabled?0:1}return r.each(function(b){var h=d-c.left-c.right,r=d3.select(this);a.utils.initSVG(r);var v=r.selectAll("g.nv-legend").data([b]),w=v.enter().append("g").attr("class","nvd3 nv-legend").append("g"),x=v.select("g");v.attr("transform","translate("+c.left+","+c.top+")");var y,z,A=x.selectAll(".nv-series").data(function(a){return"furious"!=q?a:a.filter(function(a){return!!o||!a.disengaged})}),B=A.enter().append("g").attr("class","nv-series");switch(q){case"furious":z=23;break;case"classic":z=20}if("classic"==q)B.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),y=A.select(".nv-legend-symbol");else if("furious"==q){B.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),y=A.select(".nv-legend-symbol"),B.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");var C=A.select(".nv-check-box");C.each(function(a,b){d3.select(this).selectAll("path").attr("stroke",s(a,b))})}B.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var D=A.select("text.nv-legend-text");A.on("mouseover",function(a,b){p.legendMouseover(a,b)}).on("mouseout",function(a,b){p.legendMouseout(a,b)}).on("click",function(a,b){p.legendClick(a,b);var c=A.data();if(m){if("classic"==q)n?(c.forEach(function(a){a.disabled=!0}),a.disabled=!1):(a.disabled=!a.disabled,c.every(function(a){return a.disabled})&&c.forEach(function(a){a.disabled=!1}));else if("furious"==q)if(o)a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled;else if(!o){a.disabled=!a.disabled,a.userDisabled=a.disabled;var d=c.filter(function(a){return!a.disengaged});d.every(function(a){return a.userDisabled})&&c.forEach(function(a){a.disabled=a.userDisabled=!1})}p.stateChange({disabled:c.map(function(a){return!!a.disabled}),disengaged:c.map(function(a){return!!a.disengaged})})}}).on("dblclick",function(a,b){if(("furious"!=q||!o)&&(p.legendDblclick(a,b),m)){var c=A.data();c.forEach(function(a){a.disabled=!0,"furious"==q&&(a.userDisabled=a.disabled)}),a.disabled=!1,"furious"==q&&(a.userDisabled=a.disabled),p.stateChange({disabled:c.map(function(a){return!!a.disabled})})}}),A.classed("nv-disabled",function(a){return a.userDisabled}),A.exit().remove(),D.attr("fill",s).text(function(a){return g(f(a))});var E=0;if(j){var F=[];A.each(function(b,c){var d;if(g(f(b))&&g(f(b)).length>i){var e=g(f(b)).substring(0,i);d=d3.select(this).select("text").text(e+"..."),d3.select(this).append("svg:title").text(g(f(b)))}else d=d3.select(this).select("text");var h;try{if(h=d.node().getComputedTextLength(),h<=0)throw Error()}catch(j){h=a.utils.calcApproxTextWidth(d)}F.push(h+k)});var G=0,H=[];for(E=0;E<h&&G<F.length;)H[G]=F[G],E+=F[G++];for(0===G&&(G=1);E>h&&G>1;){H=[],G--;for(var I=0;I<F.length;I++)F[I]>(H[I%G]||0)&&(H[I%G]=F[I]);E=H.reduce(function(a,b,c,d){return a+b})}for(var J=[],K=0,L=0;K<G;K++)J[K]=L,L+=H[K];A.attr("transform",function(a,b){return"translate("+J[b%G]+","+(5+Math.floor(b/G)*z)+")"}),l?x.attr("transform","translate("+(d-c.right-E)+","+c.top+")"):x.attr("transform","translate(0,"+c.top+")"),e=c.top+c.bottom+Math.ceil(F.length/G)*z}else{var M,N=5,O=5,P=0;A.attr("transform",function(a,b){var e=d3.select(this).select("text").node().getComputedTextLength()+k;return M=O,d<c.left+c.right+M+e&&(O=M=5,N+=z),O+=e,O>P&&(P=O),E<M+P&&(E=M+P),"translate("+M+","+N+")"}),x.attr("transform","translate("+(d-c.right-P)+","+c.top+")"),e=c.top+c.bottom+N+15}if("furious"==q){y.attr("width",function(a,b){return D[0][b].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),w.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0);var Q=x.select(".nv-legend-bg");Q.transition().duration(300).attr("x",-z).attr("width",E+z-12).attr("height",e+10).attr("y",-c.top-10).attr("opacity",o?1:0)}y.style("fill",t).style("fill-opacity",u).style("stroke",t)}),b}var c={top:5,right:0,bottom:5,left:0},d=400,e=20,f=function(a){return a.key},g=function(a){return a},h=a.utils.getColor(),i=20,j=!0,k=32,l=!0,m=!0,n=!1,o=!1,p=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),q="classic";return b.dispatch=p,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return d},set:function(a){d=a}},height:{get:function(){return e},set:function(a){e=a}},key:{get:function(){return f},set:function(a){f=a}},keyFormatter:{get:function(){return g},set:function(a){g=a}},align:{get:function(){return j},set:function(a){j=a}},maxKeyLength:{get:function(){return i},set:function(a){i=a}},rightAlign:{get:function(){return l},set:function(a){l=a}},padding:{get:function(){return k},set:function(a){k=a}},updateState:{get:function(){return m},set:function(a){m=a}},radioButtonMode:{get:function(){return n},set:function(a){n=a}},expanded:{get:function(){return o},set:function(a){o=a}},vers:{get:function(){return q},set:function(a){q=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top,c.right=void 0!==a.right?a.right:c.right,c.bottom=void 0!==a.bottom?a.bottom:c.bottom,c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return h},set:function(b){h=a.utils.getColor(b)}}}),a.utils.initOptions(b),b},a.models.line=function(){"use strict";function b(r){return v.reset(),v.models(e),r.each(function(b){i=d3.select(this);var r=a.utils.availableWidth(g,i,f),s=a.utils.availableHeight(h,i,f);a.utils.initSVG(i),c=e.xScale(),d=e.yScale(),t=t||c,u=u||d;var w=i.selectAll("g.nv-wrap.nv-line").data([b]),x=w.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),y=x.append("defs"),z=x.append("g"),A=w.select("g");z.append("g").attr("class","nv-groups"),z.append("g").attr("class","nv-scatterWrap"),w.attr("transform","translate("+f.left+","+f.top+")"),e.width(r).height(s);var B=w.select(".nv-scatterWrap");B.call(e),y.append("clipPath").attr("id","nv-edge-clip-"+e.id()).append("rect"),w.select("#nv-edge-clip-"+e.id()+" rect").attr("width",r).attr("height",s>0?s:0),A.attr("clip-path",p?"url(#nv-edge-clip-"+e.id()+")":""),B.attr("clip-path",p?"url(#nv-edge-clip-"+e.id()+")":"");var C=w.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});C.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(a){return a.strokeWidth||j}).style("fill-opacity",1e-6),C.exit().remove(),C.attr("class",function(a,b){return(a.classed||"")+" nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return k(a,b)}).style("stroke",function(a,b){return k(a,b)}),C.watchTransition(v,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(a){return a.fillOpacity||.5});var D=C.selectAll("path.nv-area").data(function(a){return o(a)?[a]:[]});D.enter().append("path").attr("class","nv-area").attr("d",function(b){return d3.svg.area().interpolate(q).defined(n).x(function(b,c){return a.utils.NaNtoZero(t(l(b,c)))}).y0(function(b,c){return a.utils.NaNtoZero(u(m(b,c)))}).y1(function(a,b){return u(d.domain()[0]<=0?d.domain()[1]>=0?0:d.domain()[1]:d.domain()[0])}).apply(this,[b.values])}),C.exit().selectAll("path.nv-area").remove(),D.watchTransition(v,"line: areaPaths").attr("d",function(b){return d3.svg.area().interpolate(q).defined(n).x(function(b,d){return a.utils.NaNtoZero(c(l(b,d)))}).y0(function(b,c){return a.utils.NaNtoZero(d(m(b,c)))}).y1(function(a,b){return d(d.domain()[0]<=0?d.domain()[1]>=0?0:d.domain()[1]:d.domain()[0])}).apply(this,[b.values])});var E=C.selectAll("path.nv-line").data(function(a){return[a.values]});E.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(q).defined(n).x(function(b,c){return a.utils.NaNtoZero(t(l(b,c)))}).y(function(b,c){return a.utils.NaNtoZero(u(m(b,c)))})),E.watchTransition(v,"line: linePaths").attr("d",d3.svg.line().interpolate(q).defined(n).x(function(b,d){return a.utils.NaNtoZero(c(l(b,d)))}).y(function(b,c){return a.utils.NaNtoZero(d(m(b,c)))})),t=c.copy(),u=d.copy()}),v.renderEnd("line immediate"),b}var c,d,e=a.models.scatter(),f={top:0,right:0,bottom:0,left:0},g=960,h=500,i=null,j=1.5,k=a.utils.defaultColor(),l=function(a){return a.x},m=function(a){return a.y},n=function(a,b){return!isNaN(m(a,b))&&null!==m(a,b)},o=function(a){return a.area},p=!1,q="linear",r=250,s=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");e.pointSize(16).pointDomain([16,256]);var t,u,v=a.utils.renderWatch(s,r);return b.dispatch=s,b.scatter=e,e.dispatch.on("elementClick",function(){s.elementClick.apply(this,arguments)}),e.dispatch.on("elementMouseover",function(){s.elementMouseover.apply(this,arguments)}),e.dispatch.on("elementMouseout",function(){s.elementMouseout.apply(this,arguments)}),b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return h},set:function(a){h=a}},defined:{get:function(){return n},set:function(a){n=a}},interpolate:{get:function(){return q},set:function(a){q=a}},clipEdge:{get:function(){return p},set:function(a){p=a}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top,f.right=void 0!==a.right?a.right:f.right,f.bottom=void 0!==a.bottom?a.bottom:f.bottom,f.left=void 0!==a.left?a.left:f.left}},duration:{get:function(){return r},set:function(a){r=a,v.reset(r),e.duration(r)}},isArea:{get:function(){return o},set:function(a){o=d3.functor(a)}},x:{get:function(){return l},set:function(a){l=a,e.x(a)}},y:{get:function(){return m},set:function(a){m=a,e.y(a)}},color:{get:function(){return k},set:function(b){k=a.utils.getColor(b),e.color(k)}}}),a.utils.inheritOptions(b,e),a.utils.initOptions(b),b},a.models.lineChart=function(){"use strict";function b(j){return B.reset(),B.models(e),r&&B.models(f),s&&B.models(g),j.each(function(j){function y(){r&&L.select(".nv-focus .nv-x.nv-axis").transition().duration(A).call(f)}function B(){s&&L.select(".nv-focus .nv-y.nv-axis").transition().duration(A).call(g)}function E(a){var b=L.select(".nv-focus .nv-linesWrap").datum(j.filter(function(a){return!a.disabled}).map(function(b,c){return{key:b.key,area:b.area,classed:b.classed,values:b.values.filter(function(b,c){return e.x()(b,c)>=a[0]&&e.x()(b,c)<=a[1]}),disableTooltip:b.disableTooltip}}));b.transition().duration(A).call(e),y(),B()}var F=d3.select(this);a.utils.initSVG(F);var G=a.utils.availableWidth(n,F,l),H=a.utils.availableHeight(o,F,l)-(v?k.height():0);if(b.update=function(){0===A?F.call(b):F.transition().duration(A).call(b)},b.container=this,w.setter(D(j),b.update).getter(C(j)).update(),w.disabled=j.map(function(a){return!!a.disabled}),!x){var I;x={};for(I in w)w[I]instanceof Array?x[I]=w[I].slice(0):x[I]=w[I]}if(!(j&&j.length&&j.filter(function(a){return a.values.length}).length))return a.utils.noData(b,F),b;F.selectAll(".nv-noData").remove(),k.dispatch.on("onBrush",function(a){E(a)}),c=e.xScale(),d=e.yScale();var J=F.selectAll("g.nv-wrap.nv-lineChart").data([j]),K=J.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),L=J.select("g");K.append("g").attr("class","nv-legendWrap");var M=K.append("g").attr("class","nv-focus");M.append("g").attr("class","nv-background").append("rect"),M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y nv-axis"),M.append("g").attr("class","nv-linesWrap"),M.append("g").attr("class","nv-interactive");K.append("g").attr("class","nv-focusWrap");p?(h.width(G),L.select(".nv-legendWrap").datum(j).call(h),"bottom"===q?J.select(".nv-legendWrap").attr("transform","translate(0,"+H+")"):"top"===q&&(h.height()>l.top&&(l.top=h.height(),H=a.utils.availableHeight(o,F,l)-(v?k.height():0)),J.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")"))):L.select(".nv-legendWrap").selectAll("*").remove(),J.attr("transform","translate("+l.left+","+l.top+")"),t&&L.select(".nv-y.nv-axis").attr("transform","translate("+G+",0)"),u&&(i.width(G).height(H).margin({left:l.left,top:l.top}).svgContainer(F).xScale(c),J.select(".nv-interactive").call(i)),L.select(".nv-focus .nv-background rect").attr("width",G).attr("height",H),e.width(G).height(H).color(j.map(function(a,b){return a.color||m(a,b)}).filter(function(a,b){return!j[b].disabled}));var N=L.select(".nv-linesWrap").datum(j.filter(function(a){return!a.disabled}));if(r&&f.scale(c)._ticks(a.utils.calcTicksX(G/100,j)).tickSize(-H,0),s&&g.scale(d)._ticks(a.utils.calcTicksY(H/36,j)).tickSize(-G,0),L.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+H+")"),
v){k.width(G),L.select(".nv-focusWrap").attr("transform","translate(0,"+(H+l.bottom+k.margin().top)+")").datum(j.filter(function(a){return!a.disabled})).call(k);var O=k.brush.empty()?k.xDomain():k.brush.extent();null!==O&&E(O)}else N.call(e),y(),B();h.dispatch.on("stateChange",function(a){for(var c in a)w[c]=a[c];z.stateChange(w),b.update()}),i.dispatch.on("elementMousemove",function(d){e.clearHighlights();var f,h,l,n=[];if(j.filter(function(a,b){return a.seriesIndex=b,!a.disabled&&!a.disableTooltip}).forEach(function(g,i){var j=v?k.brush.empty()?k.xScale().domain():k.brush.extent():c.domain(),o=g.values.filter(function(a,b){return e.x()(a,b)>=j[0]&&e.x()(a,b)<=j[1]});h=a.interactiveBisect(o,d.pointXValue,e.x());var p=o[h],q=b.y()(p,h);null!==q&&e.highlightPoint(g.seriesIndex,h,!0),void 0!==p&&(void 0===f&&(f=p),void 0===l&&(l=b.xScale()(b.x()(p,h))),n.push({key:g.key,value:q,color:m(g,g.seriesIndex),data:p}))}),n.length>2){var o=b.yScale().invert(d.mouseY),p=Math.abs(b.yScale().domain()[0]-b.yScale().domain()[1]),q=.03*p,r=a.nearestValueIndex(n.map(function(a){return a.value}),o,q);null!==r&&(n[r].highlight=!0)}var s=function(a,b){return null==a?"N/A":g.tickFormat()(a)};i.tooltip.valueFormatter(i.tooltip.valueFormatter()||s).data({value:b.x()(f,h),index:h,series:n})(),i.renderGuideLine(l)}),i.dispatch.on("elementClick",function(c){var d,f=[];j.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(e){var g=a.interactiveBisect(e.values,c.pointXValue,b.x()),h=e.values[g];if("undefined"!=typeof h){"undefined"==typeof d&&(d=b.xScale()(b.x()(h,g)));var i=b.yScale()(b.y()(h,g));f.push({point:h,pointIndex:g,pos:[d,i],seriesIndex:e.seriesIndex,series:e})}}),e.dispatch.elementClick(f)}),i.dispatch.on("elementMouseout",function(a){e.clearHighlights()}),z.on("changeState",function(a){"undefined"!=typeof a.disabled&&j.length===a.disabled.length&&(j.forEach(function(b,c){b.disabled=a.disabled[c]}),w.disabled=a.disabled),b.update()})}),B.renderEnd("lineChart immediate"),b}var c,d,e=a.models.line(),f=a.models.axis(),g=a.models.axis(),h=a.models.legend(),i=a.interactiveGuideline(),j=a.models.tooltip(),k=a.models.focus(a.models.line()),l={top:30,right:20,bottom:50,left:60},m=a.utils.defaultColor(),n=null,o=null,p=!0,q="top",r=!0,s=!0,t=!1,u=!1,v=!1,w=a.utils.state(),x=null,y=null,z=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),A=250;f.orient("bottom").tickPadding(7),g.orient(t?"right":"left"),e.clipEdge(!0).duration(0),j.valueFormatter(function(a,b){return g.tickFormat()(a,b)}).headerFormatter(function(a,b){return f.tickFormat()(a,b)}),i.tooltip.valueFormatter(function(a,b){return g.tickFormat()(a,b)}).headerFormatter(function(a,b){return f.tickFormat()(a,b)});var B=a.utils.renderWatch(z,A),C=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},D=function(a){return function(b){void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}};return e.dispatch.on("elementMouseover.tooltip",function(a){a.series.disableTooltip||j.data(a).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(a){j.hidden(!0)}),b.dispatch=z,b.lines=e,b.legend=h,b.focus=k,b.xAxis=f,b.x2Axis=k.xAxis,b.yAxis=g,b.y2Axis=k.yAxis,b.interactiveLayer=i,b.tooltip=j,b.state=w,b.dispatch=z,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return n},set:function(a){n=a}},height:{get:function(){return o},set:function(a){o=a}},showLegend:{get:function(){return p},set:function(a){p=a}},legendPosition:{get:function(){return q},set:function(a){q=a}},showXAxis:{get:function(){return r},set:function(a){r=a}},showYAxis:{get:function(){return s},set:function(a){s=a}},defaultState:{get:function(){return x},set:function(a){x=a}},noData:{get:function(){return y},set:function(a){y=a}},focusEnable:{get:function(){return v},set:function(a){v=a}},focusHeight:{get:function(){return k.height()},set:function(a){k.height(a)}},focusShowAxisX:{get:function(){return k.showXAxis()},set:function(a){k.showXAxis(a)}},focusShowAxisY:{get:function(){return k.showYAxis()},set:function(a){k.showYAxis(a)}},brushExtent:{get:function(){return k.brushExtent()},set:function(a){k.brushExtent(a)}},focusMargin:{get:function(){return k.margin},set:function(a){k.margin.top=void 0!==a.top?a.top:k.margin.top,k.margin.right=void 0!==a.right?a.right:k.margin.right,k.margin.bottom=void 0!==a.bottom?a.bottom:k.margin.bottom,k.margin.left=void 0!==a.left?a.left:k.margin.left}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top,l.right=void 0!==a.right?a.right:l.right,l.bottom=void 0!==a.bottom?a.bottom:l.bottom,l.left=void 0!==a.left?a.left:l.left}},duration:{get:function(){return A},set:function(a){A=a,B.reset(A),e.duration(A),k.duration(A),f.duration(A),g.duration(A)}},color:{get:function(){return m},set:function(b){m=a.utils.getColor(b),h.color(m),e.color(m),k.color(m)}},interpolate:{get:function(){return e.interpolate()},set:function(a){e.interpolate(a),k.interpolate(a)}},xTickFormat:{get:function(){return f.tickFormat()},set:function(a){f.tickFormat(a),k.xTickFormat(a)}},yTickFormat:{get:function(){return g.tickFormat()},set:function(a){g.tickFormat(a),k.yTickFormat(a)}},x:{get:function(){return e.x()},set:function(a){e.x(a),k.x(a)}},y:{get:function(){return e.y()},set:function(a){e.y(a),k.y(a)}},rightAlignYAxis:{get:function(){return t},set:function(a){t=a,g.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return u},set:function(a){u=a,u&&(e.interactive(!1),e.useVoronoi(!1))}}}),a.utils.inheritOptions(b,e),a.utils.initOptions(b),b},a.models.lineWithFocusChart=function(){return a.models.lineChart().margin({bottom:30}).focusEnable(!0)},a.models.linePlusBarChart=function(){"use strict";function b(v){return v.each(function(v){function J(a){var b=+("e"==a),c=b?1:-1,d=Z/3;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)}function R(){u.empty()||u.extent(I),ma.data([u.empty()?e.domain():I]).each(function(a,b){var c=e(a[0])-e.range()[0],d=e.range()[1]-e(a[1]);d3.select(this).select(".left").attr("width",c<0?0:c),d3.select(this).select(".right").attr("x",e(a[1])).attr("width",d<0?0:d)})}function S(){I=u.empty()?null:u.extent(),c=u.empty()?e.domain():u.extent(),K.brush({extent:c,brush:u}),R(),l.width(X).height(Y).color(v.map(function(a,b){return a.color||C(a,b)}).filter(function(a,b){return!v[b].disabled&&v[b].bar})),j.width(X).height(Y).color(v.map(function(a,b){return a.color||C(a,b)}).filter(function(a,b){return!v[b].disabled&&!v[b].bar}));var b=fa.select(".nv-focus .nv-barsWrap").datum(_.length?_.map(function(a,b){return{key:a.key,values:a.values.filter(function(a,b){return l.x()(a,b)>=c[0]&&l.x()(a,b)<=c[1]})}}):[{values:[]}]),h=fa.select(".nv-focus .nv-linesWrap").datum(V(aa)?[{values:[]}]:aa.filter(function(a){return!a.disabled}).map(function(a,b){return{area:a.area,fillOpacity:a.fillOpacity,strokeWidth:a.strokeWidth,key:a.key,values:a.values.filter(function(a,b){return j.x()(a,b)>=c[0]&&j.x()(a,b)<=c[1]})}}));d=_.length&&!Q?l.xScale():j.xScale(),n.scale(d)._ticks(a.utils.calcTicksX(X/100,v)).tickSize(-Y,0),n.domain([Math.ceil(c[0]),Math.floor(c[1])]),fa.select(".nv-x.nv-axis").transition().duration(L).call(n),b.transition().duration(L).call(l),h.transition().duration(L).call(j),fa.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+f.range()[0]+")"),p.scale(f)._ticks(a.utils.calcTicksY(Y/36,v)).tickSize(-X,0),q.scale(g)._ticks(a.utils.calcTicksY(Y/36,v)),Q?q.tickSize(aa.length?0:-X,0):q.tickSize(_.length?0:-X,0);var i=_.length?1:0,k=aa.length&&!V(aa)?1:0,m=Q?k:i,o=Q?i:k;fa.select(".nv-focus .nv-y1.nv-axis").style("opacity",m),fa.select(".nv-focus .nv-y2.nv-axis").style("opacity",o).attr("transform","translate("+d.range()[1]+",0)"),fa.select(".nv-focus .nv-y1.nv-axis").transition().duration(L).call(p),fa.select(".nv-focus .nv-y2.nv-axis").transition().duration(L).call(q)}var W=d3.select(this);a.utils.initSVG(W);var X=a.utils.availableWidth(y,W,w),Y=a.utils.availableHeight(z,W,w)-(E?H:0),Z=H-x.top-x.bottom;if(b.update=function(){W.transition().duration(L).call(b)},b.container=this,M.setter(U(v),b.update).getter(T(v)).update(),M.disabled=v.map(function(a){return!!a.disabled}),!N){var $;N={};for($ in M)M[$]instanceof Array?N[$]=M[$].slice(0):N[$]=M[$]}if(!(v&&v.length&&v.filter(function(a){return a.values.length}).length))return a.utils.noData(b,W),b;W.selectAll(".nv-noData").remove();var _=v.filter(function(a){return!a.disabled&&a.bar}),aa=v.filter(function(a){return!a.bar});d=_.length&&!Q?l.xScale():j.xScale(),e=o.scale(),f=Q?j.yScale():l.yScale(),g=Q?l.yScale():j.yScale(),h=Q?k.yScale():m.yScale(),i=Q?m.yScale():k.yScale();var ba=v.filter(function(a){return!a.disabled&&(Q?!a.bar:a.bar)}).map(function(a){return a.values.map(function(a,b){return{x:A(a,b),y:B(a,b)}})}),ca=v.filter(function(a){return!a.disabled&&(Q?a.bar:!a.bar)}).map(function(a){return a.values.map(function(a,b){return{x:A(a,b),y:B(a,b)}})});d.range([0,X]),e.domain(d3.extent(d3.merge(ba.concat(ca)),function(a){return a.x})).range([0,X]);var da=W.selectAll("g.nv-wrap.nv-linePlusBar").data([v]),ea=da.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),fa=da.select("g");ea.append("g").attr("class","nv-legendWrap");var ga=ea.append("g").attr("class","nv-focus");ga.append("g").attr("class","nv-x nv-axis"),ga.append("g").attr("class","nv-y1 nv-axis"),ga.append("g").attr("class","nv-y2 nv-axis"),ga.append("g").attr("class","nv-barsWrap"),ga.append("g").attr("class","nv-linesWrap");var ha=ea.append("g").attr("class","nv-context");if(ha.append("g").attr("class","nv-x nv-axis"),ha.append("g").attr("class","nv-y1 nv-axis"),ha.append("g").attr("class","nv-y2 nv-axis"),ha.append("g").attr("class","nv-barsWrap"),ha.append("g").attr("class","nv-linesWrap"),ha.append("g").attr("class","nv-brushBackground"),ha.append("g").attr("class","nv-x nv-brush"),D){var ia=t.align()?X/2:X,ja=t.align()?ia:0;t.width(ia),fa.select(".nv-legendWrap").datum(v.map(function(a){return a.originalKey=void 0===a.originalKey?a.key:a.originalKey,Q?a.key=a.originalKey+(a.bar?P:O):a.key=a.originalKey+(a.bar?O:P),a})).call(t),t.height()>w.top&&(w.top=t.height(),Y=a.utils.availableHeight(z,W,w)-H),fa.select(".nv-legendWrap").attr("transform","translate("+ja+","+-w.top+")")}else fa.select(".nv-legendWrap").selectAll("*").remove();da.attr("transform","translate("+w.left+","+w.top+")"),fa.select(".nv-context").style("display",E?"initial":"none"),m.width(X).height(Z).color(v.map(function(a,b){return a.color||C(a,b)}).filter(function(a,b){return!v[b].disabled&&v[b].bar})),k.width(X).height(Z).color(v.map(function(a,b){return a.color||C(a,b)}).filter(function(a,b){return!v[b].disabled&&!v[b].bar}));var ka=fa.select(".nv-context .nv-barsWrap").datum(_.length?_:[{values:[]}]),la=fa.select(".nv-context .nv-linesWrap").datum(V(aa)?[{values:[]}]:aa.filter(function(a){return!a.disabled}));fa.select(".nv-context").attr("transform","translate(0,"+(Y+w.bottom+x.top)+")"),ka.transition().call(m),la.transition().call(k),G&&(o._ticks(a.utils.calcTicksX(X/100,v)).tickSize(-Z,0),fa.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+h.range()[0]+")"),fa.select(".nv-context .nv-x.nv-axis").transition().call(o)),F&&(r.scale(h)._ticks(Z/36).tickSize(-X,0),s.scale(i)._ticks(Z/36).tickSize(_.length?0:-X,0),fa.select(".nv-context .nv-y3.nv-axis").style("opacity",_.length?1:0).attr("transform","translate(0,"+e.range()[0]+")"),fa.select(".nv-context .nv-y2.nv-axis").style("opacity",aa.length?1:0).attr("transform","translate("+e.range()[1]+",0)"),fa.select(".nv-context .nv-y1.nv-axis").transition().call(r),fa.select(".nv-context .nv-y2.nv-axis").transition().call(s)),u.x(e).on("brush",S),I&&u.extent(I);var ma=fa.select(".nv-brushBackground").selectAll("g").data([I||u.extent()]),na=ma.enter().append("g");na.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",Z),na.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",Z);var oa=fa.select(".nv-x.nv-brush").call(u);oa.selectAll("rect").attr("height",Z),oa.selectAll(".resize").append("path").attr("d",J),t.dispatch.on("stateChange",function(a){for(var c in a)M[c]=a[c];K.stateChange(M),b.update()}),K.on("changeState",function(a){"undefined"!=typeof a.disabled&&(v.forEach(function(b,c){b.disabled=a.disabled[c]}),M.disabled=a.disabled),b.update()}),S()}),b}var c,d,e,f,g,h,i,j=a.models.line(),k=a.models.line(),l=a.models.historicalBar(),m=a.models.historicalBar(),n=a.models.axis(),o=a.models.axis(),p=a.models.axis(),q=a.models.axis(),r=a.models.axis(),s=a.models.axis(),t=a.models.legend(),u=d3.svg.brush(),v=a.models.tooltip(),w={top:30,right:30,bottom:30,left:60},x={top:0,right:30,bottom:20,left:60},y=null,z=null,A=function(a){return a.x},B=function(a){return a.y},C=a.utils.defaultColor(),D=!0,E=!0,F=!1,G=!0,H=50,I=null,J=null,K=d3.dispatch("brush","stateChange","changeState"),L=0,M=a.utils.state(),N=null,O=" (left axis)",P=" (right axis)",Q=!1;j.clipEdge(!0),k.interactive(!1),k.pointActive(function(a){return!1}),n.orient("bottom").tickPadding(5),p.orient("left"),q.orient("right"),o.orient("bottom").tickPadding(5),r.orient("left"),s.orient("right"),v.headerEnabled(!0).headerFormatter(function(a,b){return n.tickFormat()(a,b)});var R=function(){return Q?{main:q,focus:s}:{main:p,focus:r}},S=function(){return Q?{main:p,focus:r}:{main:q,focus:s}},T=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},U=function(a){return function(b){void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}},V=function(a){return a.every(function(a){return a.disabled})};return j.dispatch.on("elementMouseover.tooltip",function(a){v.duration(100).valueFormatter(function(a,b){return S().main.tickFormat()(a,b)}).data(a).hidden(!1)}),j.dispatch.on("elementMouseout.tooltip",function(a){v.hidden(!0)}),l.dispatch.on("elementMouseover.tooltip",function(a){a.value=b.x()(a.data),a.series={value:b.y()(a.data),color:a.color},v.duration(0).valueFormatter(function(a,b){return R().main.tickFormat()(a,b)}).data(a).hidden(!1)}),l.dispatch.on("elementMouseout.tooltip",function(a){v.hidden(!0)}),l.dispatch.on("elementMousemove.tooltip",function(a){v()}),b.dispatch=K,b.legend=t,b.lines=j,b.lines2=k,b.bars=l,b.bars2=m,b.xAxis=n,b.x2Axis=o,b.y1Axis=p,b.y2Axis=q,b.y3Axis=r,b.y4Axis=s,b.tooltip=v,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return y},set:function(a){y=a}},height:{get:function(){return z},set:function(a){z=a}},showLegend:{get:function(){return D},set:function(a){D=a}},brushExtent:{get:function(){return I},set:function(a){I=a}},noData:{get:function(){return J},set:function(a){J=a}},focusEnable:{get:function(){return E},set:function(a){E=a}},focusHeight:{get:function(){return H},set:function(a){H=a}},focusShowAxisX:{get:function(){return G},set:function(a){G=a}},focusShowAxisY:{get:function(){return F},set:function(a){F=a}},legendLeftAxisHint:{get:function(){return O},set:function(a){O=a}},legendRightAxisHint:{get:function(){return P},set:function(a){P=a}},margin:{get:function(){return w},set:function(a){w.top=void 0!==a.top?a.top:w.top,w.right=void 0!==a.right?a.right:w.right,w.bottom=void 0!==a.bottom?a.bottom:w.bottom,w.left=void 0!==a.left?a.left:w.left}},focusMargin:{get:function(){return x},set:function(a){x.top=void 0!==a.top?a.top:x.top,x.right=void 0!==a.right?a.right:x.right,x.bottom=void 0!==a.bottom?a.bottom:x.bottom,x.left=void 0!==a.left?a.left:x.left}},duration:{get:function(){return L},set:function(a){L=a}},color:{get:function(){return C},set:function(b){C=a.utils.getColor(b),t.color(C)}},x:{get:function(){return A},set:function(a){A=a,j.x(a),k.x(a),l.x(a),m.x(a)}},y:{get:function(){return B},set:function(a){B=a,j.y(a),k.y(a),l.y(a),m.y(a)}},switchYAxisOrder:{get:function(){return Q},set:function(a){if(Q!==a){var b=p;p=q,q=b;var c=r;r=s,s=c}Q=a,p.orient("left"),q.orient("right"),r.orient("left"),s.orient("right")}}}),a.utils.inheritOptions(b,j),a.utils.initOptions(b),b},a.models.multiBar=function(){"use strict";function b(F){return D.reset(),F.each(function(b){var F=k-j.left-j.right,G=l-j.top-j.bottom;p=d3.select(this),a.utils.initSVG(p);var H=0;if(x&&b.length&&(x=[{values:b[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]),u){var I=d3.layout.stack().offset(v).values(function(a){return a.values}).y(r)(!b.length&&x?x:b);I.forEach(function(a,c){a.nonStackable?(b[c].nonStackableSeries=H++,I[c]=b[c]):c>0&&I[c-1].nonStackable&&I[c].values.map(function(a,b){a.y0-=I[c-1].values[b].y,a.y1=a.y0+a.y})}),b=I}b.forEach(function(a,b){a.values.forEach(function(c){c.series=b,c.key=a.key})}),u&&b.length>0&&b[0].values.map(function(a,c){var d=0,e=0;b.map(function(a,f){if(!b[f].nonStackable){var g=a.values[c];g.size=Math.abs(g.y),g.y<0?(g.y1=e,e-=g.size):(g.y1=g.size+d,d+=g.size)}})});var J=d&&e?[]:b.map(function(a,b){return a.values.map(function(a,c){return{x:q(a,c),y:r(a,c),y0:a.y0,y1:a.y1,idx:b}})});m.domain(d||d3.merge(J).map(function(a){return a.x})).rangeBands(f||[0,F],A),n.domain(e||d3.extent(d3.merge(J).map(function(a){var c=a.y;return u&&!b[a.idx].nonStackable&&(c=a.y>0?a.y1:a.y1+a.y),c}).concat(s))).range(g||[G,0]),m.domain()[0]===m.domain()[1]&&(m.domain()[0]?m.domain([m.domain()[0]-.01*m.domain()[0],m.domain()[1]+.01*m.domain()[1]]):m.domain([-1,1])),n.domain()[0]===n.domain()[1]&&(n.domain()[0]?n.domain([n.domain()[0]+.01*n.domain()[0],n.domain()[1]-.01*n.domain()[1]]):n.domain([-1,1])),h=h||m,i=i||n;var K=p.selectAll("g.nv-wrap.nv-multibar").data([b]),L=K.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),M=L.append("defs"),N=L.append("g"),O=K.select("g");N.append("g").attr("class","nv-groups"),K.attr("transform","translate("+j.left+","+j.top+")"),M.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),K.select("#nv-edge-clip-"+o+" rect").attr("width",F).attr("height",G),O.attr("clip-path",t?"url(#nv-edge-clip-"+o+")":"");var P=K.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});P.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var Q=D.transition(P.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,z)).attr("y",function(a,c,d){var e=i(0)||0;return u&&b[a.series]&&!b[a.series].nonStackable&&(e=i(a.y0)),e}).attr("height",0).remove();Q.delay&&Q.delay(function(a,b){var c=b*(z/(E+1))-b;return c}),P.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return w(a,b)}).style("stroke",function(a,b){return w(a,b)}),P.style("stroke-opacity",1).style("fill-opacity",B);var R=P.selectAll("rect.nv-bar").data(function(a){return x&&!b.length?x.values:a.values});R.exit().remove();R.enter().append("rect").attr("class",function(a,b){return r(a,b)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(a,c,d){return u&&!b[d].nonStackable?0:d*m.rangeBand()/b.length}).attr("y",function(a,c,d){return i(u&&!b[d].nonStackable?a.y0:0)||0}).attr("height",0).attr("width",function(a,c,d){return m.rangeBand()/(u&&!b[d].nonStackable?1:b.length)}).attr("transform",function(a,b){return"translate("+m(q(a,b))+",0)"});R.style("fill",function(a,b,c){return w(a,c,b)}).style("stroke",function(a,b,c){return w(a,c,b)}).on("mouseover",function(a,b){d3.select(this).classed("hover",!0),C.elementMouseover({data:a,index:b,color:d3.select(this).style("fill")})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1),C.elementMouseout({data:a,index:b,color:d3.select(this).style("fill")})}).on("mousemove",function(a,b){C.elementMousemove({data:a,index:b,color:d3.select(this).style("fill")})}).on("click",function(a,b){var c=this;C.elementClick({data:a,index:b,color:d3.select(this).style("fill"),event:d3.event,element:c}),d3.event.stopPropagation()}).on("dblclick",function(a,b){C.elementDblClick({data:a,index:b,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),R.attr("class",function(a,b){return r(a,b)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,b){return"translate("+m(q(a,b))+",0)"}),y&&(c||(c=b.map(function(){return!0})),R.style("fill",function(a,b,d){return d3.rgb(y(a,b)).darker(c.map(function(a,b){return b}).filter(function(a,b){return!c[b]})[d]).toString()}).style("stroke",function(a,b,d){return d3.rgb(y(a,b)).darker(c.map(function(a,b){return b}).filter(function(a,b){return!c[b]})[d]).toString()}));var S=R.watchTransition(D,"multibar",Math.min(250,z)).delay(function(a,c){return c*z/b[0].values.length});u?S.attr("y",function(a,c,d){var e=0;return e=b[d].nonStackable?r(a,c)<0?n(0):n(0)-n(r(a,c))<-1?n(0)-1:n(r(a,c))||0:n(a.y1)}).attr("height",function(a,c,d){return b[d].nonStackable?Math.max(Math.abs(n(r(a,c))-n(0)),0)||0:Math.max(Math.abs(n(a.y+a.y0)-n(a.y0)),0)}).attr("x",function(a,c,d){var e=0;return b[d].nonStackable&&(e=a.series*m.rangeBand()/b.length,b.length!==H&&(e=b[d].nonStackableSeries*m.rangeBand()/(2*H))),e}).attr("width",function(a,c,d){if(b[d].nonStackable){var e=m.rangeBand()/H;return b.length!==H&&(e=m.rangeBand()/(2*H)),e}return m.rangeBand()}):S.attr("x",function(a,c){return a.series*m.rangeBand()/b.length}).attr("width",m.rangeBand()/b.length).attr("y",function(a,b){return r(a,b)<0?n(0):n(0)-n(r(a,b))<1?n(0)-1:n(r(a,b))||0}).attr("height",function(a,b){return Math.max(Math.abs(n(r(a,b))-n(0)),1)||0}),h=m.copy(),i=n.copy(),b[0]&&b[0].values&&(E=b[0].values.length)}),D.renderEnd("multibar immediate"),b}var c,d,e,f,g,h,i,j={top:0,right:0,bottom:0,left:0},k=960,l=500,m=d3.scale.ordinal(),n=d3.scale.linear(),o=Math.floor(1e4*Math.random()),p=null,q=function(a){return a.x},r=function(a){return a.y},s=[0],t=!0,u=!1,v="zero",w=a.utils.defaultColor(),x=!1,y=null,z=500,A=.1,B=.75,C=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),D=a.utils.renderWatch(C,z),E=0;return b.dispatch=C,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return l},set:function(a){l=a}},x:{get:function(){return q},set:function(a){q=a}},y:{get:function(){return r},set:function(a){r=a}},xScale:{get:function(){return m},set:function(a){m=a}},yScale:{get:function(){return n},set:function(a){n=a}},xDomain:{get:function(){return d},set:function(a){d=a}},yDomain:{get:function(){return e},set:function(a){e=a}},xRange:{get:function(){return f},set:function(a){f=a}},yRange:{get:function(){return g},set:function(a){g=a}},forceY:{get:function(){return s},set:function(a){s=a}},stacked:{get:function(){return u},set:function(a){u=a}},stackOffset:{get:function(){return v},set:function(a){v=a}},clipEdge:{get:function(){return t},set:function(a){t=a}},disabled:{get:function(){return c},set:function(a){c=a}},id:{get:function(){return o},set:function(a){o=a}},hideable:{get:function(){return x},set:function(a){x=a}},groupSpacing:{get:function(){return A},set:function(a){A=a}},fillOpacity:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return j},set:function(a){j.top=void 0!==a.top?a.top:j.top,j.right=void 0!==a.right?a.right:j.right,j.bottom=void 0!==a.bottom?a.bottom:j.bottom,j.left=void 0!==a.left?a.left:j.left}},duration:{get:function(){return z},set:function(a){z=a,D.reset(z)}},color:{get:function(){return w},set:function(b){w=a.utils.getColor(b)}},barColor:{get:function(){return y},set:function(b){y=b?a.utils.getColor(b):null}}}),a.utils.initOptions(b),b},a.models.multiBarChart=function(){"use strict";function b(B){return G.reset(),G.models(e),s&&G.models(f),t&&G.models(g),B.each(function(B){var G=d3.select(this);a.utils.initSVG(G);var K=a.utils.availableWidth(m,G,l),L=a.utils.availableHeight(n,G,l);if(b.update=function(){0===E?G.call(b):G.transition().duration(E).call(b)},b.container=this,z.setter(J(B),b.update).getter(I(B)).update(),z.disabled=B.map(function(a){return!!a.disabled}),!A){var M;A={};for(M in z)z[M]instanceof Array?A[M]=z[M].slice(0):A[M]=z[M]}if(!(B&&B.length&&B.filter(function(a){return a.values.length}).length))return a.utils.noData(b,G),b;G.selectAll(".nv-noData").remove(),c=e.xScale(),d=e.yScale();var N=G.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([B]),O=N.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),P=N.select("g");if(O.append("g").attr("class","nv-x nv-axis"),O.append("g").attr("class","nv-y nv-axis"),O.append("g").attr("class","nv-barsWrap"),O.append("g").attr("class","nv-legendWrap"),O.append("g").attr("class","nv-controlsWrap"),O.append("g").attr("class","nv-interactive"),r?(i.width(K-D()),P.select(".nv-legendWrap").datum(B).call(i),i.height()>l.top&&(l.top=i.height(),L=a.utils.availableHeight(n,G,l)),P.select(".nv-legendWrap").attr("transform","translate("+D()+","+-l.top+")")):P.select(".nv-legendWrap").selectAll("*").remove(),p){var Q=[{key:q.grouped||"Grouped",disabled:e.stacked()},{key:q.stacked||"Stacked",disabled:!e.stacked()}];j.width(D()).color(["#444","#444","#444"]),P.select(".nv-controlsWrap").datum(Q).attr("transform","translate(0,"+-l.top+")").call(j)}else P.select(".nv-controlsWrap").selectAll("*").remove();N.attr("transform","translate("+l.left+","+l.top+")"),u&&P.select(".nv-y.nv-axis").attr("transform","translate("+K+",0)"),e.disabled(B.map(function(a){return a.disabled})).width(K).height(L).color(B.map(function(a,b){return a.color||o(a,b)}).filter(function(a,b){return!B[b].disabled}));var R=P.select(".nv-barsWrap").datum(B.filter(function(a){return!a.disabled}));if(R.call(e),s){f.scale(c)._ticks(a.utils.calcTicksX(K/100,B)).tickSize(-L,0),P.select(".nv-x.nv-axis").attr("transform","translate(0,"+d.range()[0]+")"),P.select(".nv-x.nv-axis").call(f);var S=P.select(".nv-x.nv-axis > g").selectAll("g");if(S.selectAll("line, text").style("opacity",1),w){var T=function(a,b){return"translate("+a+","+b+")"},U=5,V=17;S.selectAll("text").attr("transform",function(a,b,c){return T(0,c%2==0?U:V)});var W=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;P.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,b){return T(0,0===b||W%2!==0?V:U)})}x&&P.selectAll(".tick text").call(a.utils.wrapTicks,b.xAxis.rangeBand()),v&&S.filter(function(a,b){return b%Math.ceil(B[0].values.length/(K/100))!==0}).selectAll("text, line").style("opacity",0),y&&S.selectAll(".tick text").attr("transform","rotate("+y+" 0,0)").style("text-anchor",y>0?"start":"end"),P.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}t&&(g.scale(d)._ticks(a.utils.calcTicksY(L/36,B)).tickSize(-K,0),P.select(".nv-y.nv-axis").call(g)),F&&(h.width(K).height(L).margin({left:l.left,top:l.top}).svgContainer(G).xScale(c),N.select(".nv-interactive").call(h)),i.dispatch.on("stateChange",function(a){for(var c in a)z[c]=a[c];C.stateChange(z),b.update()}),j.dispatch.on("legendClick",function(a,c){if(a.disabled){switch(Q=Q.map(function(a){return a.disabled=!0,a}),a.disabled=!1,a.key){case"Grouped":case q.grouped:e.stacked(!1);break;case"Stacked":case q.stacked:e.stacked(!0)}z.stacked=e.stacked(),C.stateChange(z),b.update()}}),C.on("changeState",function(a){"undefined"!=typeof a.disabled&&(B.forEach(function(b,c){b.disabled=a.disabled[c]}),z.disabled=a.disabled),"undefined"!=typeof a.stacked&&(e.stacked(a.stacked),z.stacked=a.stacked,H=a.stacked),b.update()}),F?(h.dispatch.on("elementMousemove",function(a){if(void 0!=a.pointXValue){var d,e,f,g,i=[];B.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(h,j){e=c.domain().indexOf(a.pointXValue);var k=h.values[e];void 0!==k&&(g=k.x,void 0===d&&(d=k),void 0===f&&(f=a.mouseX),i.push({key:h.key,value:b.y()(k,e),color:o(h,h.seriesIndex),data:h.values[e]}))}),h.tooltip.data({value:g,index:e,series:i})(),h.renderGuideLine(f)}}),h.dispatch.on("elementMouseout",function(a){h.tooltip.hidden(!0)})):(e.dispatch.on("elementMouseover.tooltip",function(a){a.value=b.x()(a.data),a.series={key:a.data.key,value:b.y()(a.data),color:a.color},k.data(a).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(a){k()}))}),G.renderEnd("multibarchart immediate"),b}var c,d,e=a.models.multiBar(),f=a.models.axis(),g=a.models.axis(),h=a.interactiveGuideline(),i=a.models.legend(),j=a.models.legend(),k=a.models.tooltip(),l={top:30,right:20,bottom:50,left:60},m=null,n=null,o=a.utils.defaultColor(),p=!0,q={},r=!0,s=!0,t=!0,u=!1,v=!0,w=!1,x=!1,y=0,z=a.utils.state(),A=null,B=null,C=d3.dispatch("stateChange","changeState","renderEnd"),D=function(){return p?180:0},E=250,F=!1;z.stacked=!1,e.stacked(!1),f.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(a){return a}),g.orient(u?"right":"left").tickFormat(d3.format(",.1f")),k.duration(0).valueFormatter(function(a,b){return g.tickFormat()(a,b)}).headerFormatter(function(a,b){return f.tickFormat()(a,b)}),j.updateState(!1);var G=a.utils.renderWatch(C),H=!1,I=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:H}}},J=function(a){return function(b){void 0!==b.stacked&&(H=b.stacked),void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}};return b.dispatch=C,b.multibar=e,b.legend=i,b.controls=j,b.xAxis=f,b.yAxis=g,b.state=z,b.tooltip=k,b.interactiveLayer=h,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return m},set:function(a){m=a}},height:{get:function(){return n},set:function(a){n=a}},showLegend:{get:function(){return r},set:function(a){r=a}},showControls:{get:function(){return p},set:function(a){p=a}},controlLabels:{get:function(){return q},set:function(a){q=a}},showXAxis:{get:function(){return s},set:function(a){s=a}},showYAxis:{get:function(){return t},set:function(a){t=a}},defaultState:{get:function(){return A},set:function(a){A=a}},noData:{get:function(){return B},set:function(a){B=a}},reduceXTicks:{get:function(){return v},set:function(a){v=a}},rotateLabels:{get:function(){return y},set:function(a){y=a}},staggerLabels:{get:function(){return w},set:function(a){w=a}},wrapLabels:{get:function(){return x},set:function(a){x=!!a}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top,l.right=void 0!==a.right?a.right:l.right,l.bottom=void 0!==a.bottom?a.bottom:l.bottom,l.left=void 0!==a.left?a.left:l.left}},duration:{get:function(){return E},set:function(a){E=a,e.duration(E),f.duration(E),g.duration(E),G.reset(E)}},color:{get:function(){return o},set:function(b){o=a.utils.getColor(b),i.color(o)}},rightAlignYAxis:{get:function(){return u},set:function(a){u=a,g.orient(u?"right":"left")}},useInteractiveGuideline:{get:function(){return F},set:function(a){F=a}},barColor:{get:function(){return e.barColor},set:function(a){e.barColor(a),i.color(function(a,b){return d3.rgb("#ccc").darker(1.5*b).toString()})}}}),a.utils.inheritOptions(b,e),a.utils.initOptions(b),b},a.models.multiBarHorizontal=function(){"use strict";function b(m){return F.reset(),m.each(function(b){var m=k-j.left-j.right,D=l-j.top-j.bottom;n=d3.select(this),a.utils.initSVG(n),w&&(b=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(r)(b)),b.forEach(function(a,b){a.values.forEach(function(c){c.series=b,c.key=a.key})}),w&&b[0].values.map(function(a,c){var d=0,e=0;b.map(function(a){var b=a.values[c];b.size=Math.abs(b.y),b.y<0?(b.y1=e-b.size,e-=b.size):(b.y1=d,d+=b.size)})});var G=d&&e?[]:b.map(function(a){return a.values.map(function(a,b){return{x:q(a,b),y:r(a,b),y0:a.y0,y1:a.y1}})});o.domain(d||d3.merge(G).map(function(a){return a.x})).rangeBands(f||[0,D],A),p.domain(e||d3.extent(d3.merge(G).map(function(a){return w?a.y>0?a.y1+a.y:a.y1:a.y}).concat(t))),x&&!w?p.range(g||[p.domain()[0]<0?z:0,m-(p.domain()[1]>0?z:0)]):p.range(g||[0,m]),h=h||o,i=i||d3.scale.linear().domain(p.domain()).range([p(0),p(0)]);
var H=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([b]),I=H.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),J=(I.append("defs"),I.append("g"));H.select("g");J.append("g").attr("class","nv-groups"),H.attr("transform","translate("+j.left+","+j.top+")");var K=H.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});K.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),K.exit().watchTransition(F,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),K.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return u(a,b)}).style("stroke",function(a,b){return u(a,b)}),K.watchTransition(F,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",B);var L=K.selectAll("g.nv-bar").data(function(a){return a.values});L.exit().remove();var M=L.enter().append("g").attr("transform",function(a,c,d){return"translate("+i(w?a.y0:0)+","+(w?0:d*o.rangeBand()/b.length+o(q(a,c)))+")"});M.append("rect").attr("width",0).attr("height",o.rangeBand()/(w?1:b.length)),L.on("mouseover",function(a,b){d3.select(this).classed("hover",!0),E.elementMouseover({data:a,index:b,color:d3.select(this).style("fill")})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1),E.elementMouseout({data:a,index:b,color:d3.select(this).style("fill")})}).on("mouseout",function(a,b){E.elementMouseout({data:a,index:b,color:d3.select(this).style("fill")})}).on("mousemove",function(a,b){E.elementMousemove({data:a,index:b,color:d3.select(this).style("fill")})}).on("click",function(a,b){var c=this;E.elementClick({data:a,index:b,color:d3.select(this).style("fill"),event:d3.event,element:c}),d3.event.stopPropagation()}).on("dblclick",function(a,b){E.elementDblClick({data:a,index:b,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),s(b[0],0)&&(M.append("polyline"),L.select("polyline").attr("fill","none").attr("points",function(a,c){var d=s(a,c),e=.8*o.rangeBand()/(2*(w?1:b.length));d=d.length?d:[-Math.abs(d),Math.abs(d)],d=d.map(function(a){return p(a)-p(0)});var f=[[d[0],-e],[d[0],e],[d[0],0],[d[1],0],[d[1],-e],[d[1],e]];return f.map(function(a){return a.join(",")}).join(" ")}).attr("transform",function(a,c){var d=o.rangeBand()/(2*(w?1:b.length));return"translate("+(r(a,c)<0?0:p(r(a,c))-p(0))+", "+d+")"})),M.append("text"),x&&!w?(L.select("text").attr("text-anchor",function(a,b){return r(a,b)<0?"end":"start"}).attr("y",o.rangeBand()/(2*b.length)).attr("dy",".32em").text(function(a,b){var c=C(r(a,b)),d=s(a,b);return void 0===d?c:d.length?c+"+"+C(Math.abs(d[1]))+"-"+C(Math.abs(d[0])):c+""+C(Math.abs(d))}),L.watchTransition(F,"multibarhorizontal: bars").select("text").attr("x",function(a,b){return r(a,b)<0?-4:p(r(a,b))-p(0)+4})):L.selectAll("text").text(""),y&&!w?(M.append("text").classed("nv-bar-label",!0),L.select("text.nv-bar-label").attr("text-anchor",function(a,b){return r(a,b)<0?"start":"end"}).attr("y",o.rangeBand()/(2*b.length)).attr("dy",".32em").text(function(a,b){return q(a,b)}),L.watchTransition(F,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(a,b){return r(a,b)<0?p(0)-p(r(a,b))+4:-4})):L.selectAll("text.nv-bar-label").text(""),L.attr("class",function(a,b){return r(a,b)<0?"nv-bar negative":"nv-bar positive"}),v&&(c||(c=b.map(function(){return!0})),L.style("fill",function(a,b,d){return d3.rgb(v(a,b)).darker(c.map(function(a,b){return b}).filter(function(a,b){return!c[b]})[d]).toString()}).style("stroke",function(a,b,d){return d3.rgb(v(a,b)).darker(c.map(function(a,b){return b}).filter(function(a,b){return!c[b]})[d]).toString()})),w?L.watchTransition(F,"multibarhorizontal: bars").attr("transform",function(a,b){return"translate("+p(a.y1)+","+o(q(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(p(r(a,b)+a.y0)-p(a.y0))||0}).attr("height",o.rangeBand()):L.watchTransition(F,"multibarhorizontal: bars").attr("transform",function(a,c){return"translate("+p(r(a,c)<0?r(a,c):0)+","+(a.series*o.rangeBand()/b.length+o(q(a,c)))+")"}).select("rect").attr("height",o.rangeBand()/b.length).attr("width",function(a,b){return Math.max(Math.abs(p(r(a,b))-p(0)),1)||0}),h=o.copy(),i=p.copy()}),F.renderEnd("multibarHorizontal immediate"),b}var c,d,e,f,g,h,i,j={top:0,right:0,bottom:0,left:0},k=960,l=500,m=Math.floor(1e4*Math.random()),n=null,o=d3.scale.ordinal(),p=d3.scale.linear(),q=function(a){return a.x},r=function(a){return a.y},s=function(a){return a.yErr},t=[0],u=a.utils.defaultColor(),v=null,w=!1,x=!1,y=!1,z=60,A=.1,B=.75,C=d3.format(",.2f"),D=250,E=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),F=a.utils.renderWatch(E,D);return b.dispatch=E,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return l},set:function(a){l=a}},x:{get:function(){return q},set:function(a){q=a}},y:{get:function(){return r},set:function(a){r=a}},yErr:{get:function(){return s},set:function(a){s=a}},xScale:{get:function(){return o},set:function(a){o=a}},yScale:{get:function(){return p},set:function(a){p=a}},xDomain:{get:function(){return d},set:function(a){d=a}},yDomain:{get:function(){return e},set:function(a){e=a}},xRange:{get:function(){return f},set:function(a){f=a}},yRange:{get:function(){return g},set:function(a){g=a}},forceY:{get:function(){return t},set:function(a){t=a}},stacked:{get:function(){return w},set:function(a){w=a}},showValues:{get:function(){return x},set:function(a){x=a}},disabled:{get:function(){return c},set:function(a){c=a}},id:{get:function(){return m},set:function(a){m=a}},valueFormat:{get:function(){return C},set:function(a){C=a}},valuePadding:{get:function(){return z},set:function(a){z=a}},groupSpacing:{get:function(){return A},set:function(a){A=a}},fillOpacity:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return j},set:function(a){j.top=void 0!==a.top?a.top:j.top,j.right=void 0!==a.right?a.right:j.right,j.bottom=void 0!==a.bottom?a.bottom:j.bottom,j.left=void 0!==a.left?a.left:j.left}},duration:{get:function(){return D},set:function(a){D=a,F.reset(D)}},color:{get:function(){return u},set:function(b){u=a.utils.getColor(b)}},barColor:{get:function(){return v},set:function(b){v=b?a.utils.getColor(b):null}}}),a.utils.initOptions(b),b},a.models.multiBarHorizontalChart=function(){"use strict";function b(j){return C.reset(),C.models(e),r&&C.models(f),s&&C.models(g),j.each(function(j){var w=d3.select(this);a.utils.initSVG(w);var C=a.utils.availableWidth(l,w,k),D=a.utils.availableHeight(m,w,k);if(b.update=function(){w.transition().duration(z).call(b)},b.container=this,t=e.stacked(),u.setter(B(j),b.update).getter(A(j)).update(),u.disabled=j.map(function(a){return!!a.disabled}),!v){var E;v={};for(E in u)u[E]instanceof Array?v[E]=u[E].slice(0):v[E]=u[E]}if(!(j&&j.length&&j.filter(function(a){return a.values.length}).length))return a.utils.noData(b,w),b;w.selectAll(".nv-noData").remove(),c=e.xScale(),d=e.yScale().clamp(!0);var F=w.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([j]),G=F.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),H=F.select("g");if(G.append("g").attr("class","nv-x nv-axis"),G.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),G.append("g").attr("class","nv-barsWrap"),G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap"),q?(h.width(C-y()),H.select(".nv-legendWrap").datum(j).call(h),h.height()>k.top&&(k.top=h.height(),D=a.utils.availableHeight(m,w,k)),H.select(".nv-legendWrap").attr("transform","translate("+y()+","+-k.top+")")):H.select(".nv-legendWrap").selectAll("*").remove(),o){var I=[{key:p.grouped||"Grouped",disabled:e.stacked()},{key:p.stacked||"Stacked",disabled:!e.stacked()}];i.width(y()).color(["#444","#444","#444"]),H.select(".nv-controlsWrap").datum(I).attr("transform","translate(0,"+-k.top+")").call(i)}else H.select(".nv-controlsWrap").selectAll("*").remove();F.attr("transform","translate("+k.left+","+k.top+")"),e.disabled(j.map(function(a){return a.disabled})).width(C).height(D).color(j.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!j[b].disabled}));var J=H.select(".nv-barsWrap").datum(j.filter(function(a){return!a.disabled}));if(J.transition().call(e),r){f.scale(c)._ticks(a.utils.calcTicksY(D/24,j)).tickSize(-C,0),H.select(".nv-x.nv-axis").call(f);var K=H.select(".nv-x.nv-axis").selectAll("g");K.selectAll("line, text")}s&&(g.scale(d)._ticks(a.utils.calcTicksX(C/100,j)).tickSize(-D,0),H.select(".nv-y.nv-axis").attr("transform","translate(0,"+D+")"),H.select(".nv-y.nv-axis").call(g)),H.select(".nv-zeroLine line").attr("x1",d(0)).attr("x2",d(0)).attr("y1",0).attr("y2",-D),h.dispatch.on("stateChange",function(a){for(var c in a)u[c]=a[c];x.stateChange(u),b.update()}),i.dispatch.on("legendClick",function(a,c){if(a.disabled){switch(I=I.map(function(a){return a.disabled=!0,a}),a.disabled=!1,a.key){case"Grouped":case p.grouped:e.stacked(!1);break;case"Stacked":case p.stacked:e.stacked(!0)}u.stacked=e.stacked(),x.stateChange(u),t=e.stacked(),b.update()}}),x.on("changeState",function(a){"undefined"!=typeof a.disabled&&(j.forEach(function(b,c){b.disabled=a.disabled[c]}),u.disabled=a.disabled),"undefined"!=typeof a.stacked&&(e.stacked(a.stacked),u.stacked=a.stacked,t=a.stacked),b.update()})}),C.renderEnd("multibar horizontal chart immediate"),b}var c,d,e=a.models.multiBarHorizontal(),f=a.models.axis(),g=a.models.axis(),h=a.models.legend().height(30),i=a.models.legend().height(30),j=a.models.tooltip(),k={top:30,right:20,bottom:50,left:60},l=null,m=null,n=a.utils.defaultColor(),o=!0,p={},q=!0,r=!0,s=!0,t=!1,u=a.utils.state(),v=null,w=null,x=d3.dispatch("stateChange","changeState","renderEnd"),y=function(){return o?180:0},z=250;u.stacked=!1,e.stacked(t),f.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(a){return a}),g.orient("bottom").tickFormat(d3.format(",.1f")),j.duration(0).valueFormatter(function(a,b){return g.tickFormat()(a,b)}).headerFormatter(function(a,b){return f.tickFormat()(a,b)}),i.updateState(!1);var A=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:t}}},B=function(a){return function(b){void 0!==b.stacked&&(t=b.stacked),void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}},C=a.utils.renderWatch(x,z);return e.dispatch.on("elementMouseover.tooltip",function(a){a.value=b.x()(a.data),a.series={key:a.data.key,value:b.y()(a.data),color:a.color},j.data(a).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(a){j.hidden(!0)}),e.dispatch.on("elementMousemove.tooltip",function(a){j()}),b.dispatch=x,b.multibar=e,b.legend=h,b.controls=i,b.xAxis=f,b.yAxis=g,b.state=u,b.tooltip=j,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return l},set:function(a){l=a}},height:{get:function(){return m},set:function(a){m=a}},showLegend:{get:function(){return q},set:function(a){q=a}},showControls:{get:function(){return o},set:function(a){o=a}},controlLabels:{get:function(){return p},set:function(a){p=a}},showXAxis:{get:function(){return r},set:function(a){r=a}},showYAxis:{get:function(){return s},set:function(a){s=a}},defaultState:{get:function(){return v},set:function(a){v=a}},noData:{get:function(){return w},set:function(a){w=a}},margin:{get:function(){return k},set:function(a){k.top=void 0!==a.top?a.top:k.top,k.right=void 0!==a.right?a.right:k.right,k.bottom=void 0!==a.bottom?a.bottom:k.bottom,k.left=void 0!==a.left?a.left:k.left}},duration:{get:function(){return z},set:function(a){z=a,C.reset(z),e.duration(z),f.duration(z),g.duration(z)}},color:{get:function(){return n},set:function(b){n=a.utils.getColor(b),h.color(n)}},barColor:{get:function(){return e.barColor},set:function(a){e.barColor(a),h.color(function(a,b){return d3.rgb("#ccc").darker(1.5*b).toString()})}}}),a.utils.inheritOptions(b,e),a.utils.initOptions(b),b},a.models.multiChart=function(){"use strict";function b(j){return j.each(function(j){function n(a){var b=2===j[a.seriesIndex].yAxis?E:D;a.value=a.point.x,a.series={value:a.point.y,color:a.point.color,key:a.series.key},G.duration(0).headerFormatter(function(a,b){return C.tickFormat()(a,b)}).valueFormatter(function(a,c){return b.tickFormat()(a,c)}).data(a).hidden(!1)}function H(a){var b=2===j[a.seriesIndex].yAxis?E:D;a.value=a.point.x,a.series={value:a.point.y,color:a.point.color,key:a.series.key},G.duration(100).headerFormatter(function(a,b){return C.tickFormat()(a,b)}).valueFormatter(function(a,c){return b.tickFormat()(a,c)}).data(a).hidden(!1)}function J(a){var b=2===j[a.seriesIndex].yAxis?E:D;a.point.x=A.x()(a.point),a.point.y=A.y()(a.point),G.duration(0).headerFormatter(function(a,b){return C.tickFormat()(a,b)}).valueFormatter(function(a,c){return b.tickFormat()(a,c)}).data(a).hidden(!1)}function K(a){var b=2===j[a.data.series].yAxis?E:D;a.value=y.x()(a.data),a.series={value:y.y()(a.data),color:a.color,key:a.data.key},G.duration(0).headerFormatter(function(a,b){return C.tickFormat()(a,b)}).valueFormatter(function(a,c){return b.tickFormat()(a,c)}).data(a).hidden(!1)}function L(){for(var a=0,b=I.length;a<b;a++){var c=I[a];try{c.clearHighlights()}catch(d){}}}function M(a,b,c){for(var d=0,e=I.length;d<e;d++){var f=I[d];try{f.highlightPoint(a,b,c)}catch(g){}}}var N=d3.select(this);a.utils.initSVG(N),b.update=function(){N.transition().call(b)},b.container=this;var O=a.utils.availableWidth(g,N,e),P=a.utils.availableHeight(h,N,e),Q=j.filter(function(a){return"line"==a.type&&1==a.yAxis}),R=j.filter(function(a){return"line"==a.type&&2==a.yAxis}),S=j.filter(function(a){return"scatter"==a.type&&1==a.yAxis}),T=j.filter(function(a){return"scatter"==a.type&&2==a.yAxis}),U=j.filter(function(a){return"bar"==a.type&&1==a.yAxis}),V=j.filter(function(a){return"bar"==a.type&&2==a.yAxis}),W=j.filter(function(a){return"area"==a.type&&1==a.yAxis}),X=j.filter(function(a){return"area"==a.type&&2==a.yAxis});if(!(j&&j.length&&j.filter(function(a){return a.values.length}).length))return a.utils.noData(b,N),b;N.selectAll(".nv-noData").remove();var Y=j.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:k(a),y:l(a)}})}),Z=j.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:k(a),y:l(a)}})});r.domain(d3.extent(d3.merge(Y.concat(Z)),function(a){return a.x})).range([0,O]);var $=N.selectAll("g.wrap.multiChart").data([j]),_=$.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");_.append("g").attr("class","nv-x nv-axis"),_.append("g").attr("class","nv-y1 nv-axis"),_.append("g").attr("class","nv-y2 nv-axis"),_.append("g").attr("class","stack1Wrap"),_.append("g").attr("class","stack2Wrap"),_.append("g").attr("class","bars1Wrap"),_.append("g").attr("class","bars2Wrap"),_.append("g").attr("class","scatters1Wrap"),_.append("g").attr("class","scatters2Wrap"),_.append("g").attr("class","lines1Wrap"),_.append("g").attr("class","lines2Wrap"),_.append("g").attr("class","legendWrap"),_.append("g").attr("class","nv-interactive");var aa=$.select("g"),ba=j.map(function(a,b){return j[b].color||f(a,b)});if(i){var ca=F.align()?O/2:O,da=F.align()?ca:0;F.width(ca),F.color(ba),aa.select(".legendWrap").datum(j.map(function(a){return a.originalKey=void 0===a.originalKey?a.key:a.originalKey,a.key=a.originalKey+(1==a.yAxis?"":q),a})).call(F),F.height()>e.top&&(e.top=F.height(),P=a.utils.availableHeight(h,N,e)),aa.select(".legendWrap").attr("transform","translate("+da+","+-e.top+")")}else aa.select(".legendWrap").selectAll("*").remove();u.width(O).height(P).interpolate(m).color(ba.filter(function(a,b){return!j[b].disabled&&1==j[b].yAxis&&"line"==j[b].type})),v.width(O).height(P).interpolate(m).color(ba.filter(function(a,b){return!j[b].disabled&&2==j[b].yAxis&&"line"==j[b].type})),w.width(O).height(P).color(ba.filter(function(a,b){return!j[b].disabled&&1==j[b].yAxis&&"scatter"==j[b].type})),x.width(O).height(P).color(ba.filter(function(a,b){return!j[b].disabled&&2==j[b].yAxis&&"scatter"==j[b].type})),y.width(O).height(P).color(ba.filter(function(a,b){return!j[b].disabled&&1==j[b].yAxis&&"bar"==j[b].type})),z.width(O).height(P).color(ba.filter(function(a,b){return!j[b].disabled&&2==j[b].yAxis&&"bar"==j[b].type})),A.width(O).height(P).interpolate(m).color(ba.filter(function(a,b){return!j[b].disabled&&1==j[b].yAxis&&"area"==j[b].type})),B.width(O).height(P).interpolate(m).color(ba.filter(function(a,b){return!j[b].disabled&&2==j[b].yAxis&&"area"==j[b].type})),aa.attr("transform","translate("+e.left+","+e.top+")");var ea=aa.select(".lines1Wrap").datum(Q.filter(function(a){return!a.disabled})),fa=aa.select(".scatters1Wrap").datum(S.filter(function(a){return!a.disabled})),ga=aa.select(".bars1Wrap").datum(U.filter(function(a){return!a.disabled})),ha=aa.select(".stack1Wrap").datum(W.filter(function(a){return!a.disabled})),ia=aa.select(".lines2Wrap").datum(R.filter(function(a){return!a.disabled})),ja=aa.select(".scatters2Wrap").datum(T.filter(function(a){return!a.disabled})),ka=aa.select(".bars2Wrap").datum(V.filter(function(a){return!a.disabled})),la=aa.select(".stack2Wrap").datum(X.filter(function(a){return!a.disabled})),ma=W.length?W.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,c){return{x:a.x,y:a.y+b[c].y}})}).concat([{x:0,y:0}]):[],na=X.length?X.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,c){return{x:a.x,y:a.y+b[c].y}})}).concat([{x:0,y:0}]):[];s.domain(c||d3.extent(d3.merge(Y).concat(ma),function(a){return a.y})).range([0,P]),t.domain(d||d3.extent(d3.merge(Z).concat(na),function(a){return a.y})).range([0,P]),u.yDomain(s.domain()),w.yDomain(s.domain()),y.yDomain(s.domain()),A.yDomain(s.domain()),v.yDomain(t.domain()),x.yDomain(t.domain()),z.yDomain(t.domain()),B.yDomain(t.domain()),W.length&&d3.transition(ha).call(A),X.length&&d3.transition(la).call(B),U.length&&d3.transition(ga).call(y),V.length&&d3.transition(ka).call(z),Q.length&&d3.transition(ea).call(u),R.length&&d3.transition(ia).call(v),S.length&&d3.transition(fa).call(w),T.length&&d3.transition(ja).call(x),C._ticks(a.utils.calcTicksX(O/100,j)).tickSize(-P,0),aa.select(".nv-x.nv-axis").attr("transform","translate(0,"+P+")"),d3.transition(aa.select(".nv-x.nv-axis")).call(C),D._ticks(a.utils.calcTicksY(P/36,j)).tickSize(-O,0),d3.transition(aa.select(".nv-y1.nv-axis")).call(D),E._ticks(a.utils.calcTicksY(P/36,j)).tickSize(-O,0),d3.transition(aa.select(".nv-y2.nv-axis")).call(E),aa.select(".nv-y1.nv-axis").classed("nv-disabled",!Y.length).attr("transform","translate("+r.range()[0]+",0)"),aa.select(".nv-y2.nv-axis").classed("nv-disabled",!Z.length).attr("transform","translate("+r.range()[1]+",0)"),F.dispatch.on("stateChange",function(a){b.update()}),p&&(o.width(O).height(P).margin({left:e.left,top:e.top}).svgContainer(N).xScale(r),$.select(".nv-interactive").call(o)),p?(o.dispatch.on("elementMousemove",function(c){L();var d,e,g,h=[];j.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(i,j){var k=r.domain(),l=i.values.filter(function(a,c){return b.x()(a,c)>=k[0]&&b.x()(a,c)<=k[1]});e=a.interactiveBisect(l,c.pointXValue,b.x());var m=l[e],n=b.y()(m,e);null!==n&&M(j,e,!0),void 0!==m&&(void 0===d&&(d=m),void 0===g&&(g=r(b.x()(m,e))),h.push({key:i.key,value:n,color:f(i,i.seriesIndex),data:m,yAxis:2==i.yAxis?E:D}))});var i=function(a,b){var c=h[b].yAxis;return null==a?"N/A":c.tickFormat()(a)};o.tooltip.headerFormatter(function(a,b){return C.tickFormat()(a,b)}).valueFormatter(o.tooltip.valueFormatter()||i).data({value:b.x()(d,e),index:e,series:h})(),o.renderGuideLine(g)}),o.dispatch.on("elementMouseout",function(a){L()})):(u.dispatch.on("elementMouseover.tooltip",n),v.dispatch.on("elementMouseover.tooltip",n),u.dispatch.on("elementMouseout.tooltip",function(a){G.hidden(!0)}),v.dispatch.on("elementMouseout.tooltip",function(a){G.hidden(!0)}),w.dispatch.on("elementMouseover.tooltip",H),x.dispatch.on("elementMouseover.tooltip",H),w.dispatch.on("elementMouseout.tooltip",function(a){G.hidden(!0)}),x.dispatch.on("elementMouseout.tooltip",function(a){G.hidden(!0)}),A.dispatch.on("elementMouseover.tooltip",J),B.dispatch.on("elementMouseover.tooltip",J),A.dispatch.on("elementMouseout.tooltip",function(a){G.hidden(!0)}),B.dispatch.on("elementMouseout.tooltip",function(a){G.hidden(!0)}),y.dispatch.on("elementMouseover.tooltip",K),z.dispatch.on("elementMouseover.tooltip",K),y.dispatch.on("elementMouseout.tooltip",function(a){G.hidden(!0)}),z.dispatch.on("elementMouseout.tooltip",function(a){G.hidden(!0)}),y.dispatch.on("elementMousemove.tooltip",function(a){G()}),z.dispatch.on("elementMousemove.tooltip",function(a){G()}))}),b}var c,d,e={top:30,right:20,bottom:50,left:60},f=a.utils.defaultColor(),g=null,h=null,i=!0,j=null,k=function(a){return a.x},l=function(a){return a.y},m="linear",n=!0,o=a.interactiveGuideline(),p=!1,q=" (right axis)",r=d3.scale.linear(),s=d3.scale.linear(),t=d3.scale.linear(),u=a.models.line().yScale(s),v=a.models.line().yScale(t),w=a.models.scatter().yScale(s),x=a.models.scatter().yScale(t),y=a.models.multiBar().stacked(!1).yScale(s),z=a.models.multiBar().stacked(!1).yScale(t),A=a.models.stackedArea().yScale(s),B=a.models.stackedArea().yScale(t),C=a.models.axis().scale(r).orient("bottom").tickPadding(5),D=a.models.axis().scale(s).orient("left"),E=a.models.axis().scale(t).orient("right"),F=a.models.legend().height(30),G=a.models.tooltip(),H=d3.dispatch(),I=[u,v,w,x,y,z,A,B];return b.dispatch=H,b.legend=F,b.lines1=u,b.lines2=v,b.scatters1=w,b.scatters2=x,b.bars1=y,b.bars2=z,b.stack1=A,b.stack2=B,b.xAxis=C,b.yAxis1=D,b.yAxis2=E,b.tooltip=G,b.interactiveLayer=o,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return h},set:function(a){h=a}},showLegend:{get:function(){return i},set:function(a){i=a}},yDomain1:{get:function(){return c},set:function(a){c=a}},yDomain2:{get:function(){return d},set:function(a){d=a}},noData:{get:function(){return j},set:function(a){j=a}},interpolate:{get:function(){return m},set:function(a){m=a}},legendRightAxisHint:{get:function(){return q},set:function(a){q=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top,e.right=void 0!==a.right?a.right:e.right,e.bottom=void 0!==a.bottom?a.bottom:e.bottom,e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return f},set:function(b){f=a.utils.getColor(b)}},x:{get:function(){return k},set:function(a){k=a,u.x(a),v.x(a),w.x(a),x.x(a),y.x(a),z.x(a),A.x(a),B.x(a)}},y:{get:function(){return l},set:function(a){l=a,u.y(a),v.y(a),w.y(a),x.y(a),A.y(a),B.y(a),y.y(a),z.y(a)}},useVoronoi:{get:function(){return n},set:function(a){n=a,u.useVoronoi(a),v.useVoronoi(a),A.useVoronoi(a),B.useVoronoi(a)}},useInteractiveGuideline:{get:function(){return p},set:function(a){p=a,p&&(u.interactive(!1),u.useVoronoi(!1),v.interactive(!1),v.useVoronoi(!1),A.interactive(!1),A.useVoronoi(!1),B.interactive(!1),B.useVoronoi(!1),w.interactive(!1),x.interactive(!1))}}}),a.utils.initOptions(b),b},a.models.ohlcBar=function(){"use strict";function b(y){return y.each(function(b){k=d3.select(this);var y=a.utils.availableWidth(h,k,g),A=a.utils.availableHeight(i,k,g);a.utils.initSVG(k);var B=y/b[0].values.length*.9;l.domain(c||d3.extent(b[0].values.map(n).concat(t))),v?l.range(e||[.5*y/b[0].values.length,y*(b[0].values.length-.5)/b[0].values.length]):l.range(e||[5+B/2,y-B/2-5]),m.domain(d||[d3.min(b[0].values.map(s).concat(u)),d3.max(b[0].values.map(r).concat(u))]).range(f||[A,0]),l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]-.01*l.domain()[0],l.domain()[1]+.01*l.domain()[1]]):l.domain([-1,1])),m.domain()[0]===m.domain()[1]&&(m.domain()[0]?m.domain([m.domain()[0]+.01*m.domain()[0],m.domain()[1]-.01*m.domain()[1]]):m.domain([-1,1]));var C=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([b[0].values]),D=C.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),E=D.append("defs"),F=D.append("g"),G=C.select("g");F.append("g").attr("class","nv-ticks"),C.attr("transform","translate("+g.left+","+g.top+")"),k.on("click",function(a,b){z.chartClick({data:a,index:b,pos:d3.event,id:j})}),E.append("clipPath").attr("id","nv-chart-clip-path-"+j).append("rect"),C.select("#nv-chart-clip-path-"+j+" rect").attr("width",y).attr("height",A),G.attr("clip-path",w?"url(#nv-chart-clip-path-"+j+")":"");var H=C.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});H.exit().remove(),H.enter().append("path").attr("class",function(a,b,c){return(p(a,b)>q(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+c+"-"+b}).attr("d",function(a,b){return"m0,0l0,"+(m(p(a,b))-m(r(a,b)))+"l"+-B/2+",0l"+B/2+",0l0,"+(m(s(a,b))-m(p(a,b)))+"l0,"+(m(q(a,b))-m(s(a,b)))+"l"+B/2+",0l"+-B/2+",0z"}).attr("transform",function(a,b){return"translate("+l(n(a,b))+","+m(r(a,b))+")"}).attr("fill",function(a,b){return x[0]}).attr("stroke",function(a,b){return x[0]}).attr("x",0).attr("y",function(a,b){return m(Math.max(0,o(a,b)))}).attr("height",function(a,b){return Math.abs(m(o(a,b))-m(0))}),H.attr("class",function(a,b,c){return(p(a,b)>q(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+c+"-"+b}),d3.transition(H).attr("transform",function(a,b){return"translate("+l(n(a,b))+","+m(r(a,b))+")"}).attr("d",function(a,c){var d=y/b[0].values.length*.9;return"m0,0l0,"+(m(p(a,c))-m(r(a,c)))+"l"+-d/2+",0l"+d/2+",0l0,"+(m(s(a,c))-m(p(a,c)))+"l0,"+(m(q(a,c))-m(s(a,c)))+"l"+d/2+",0l"+-d/2+",0z"})}),b}var c,d,e,f,g={top:0,right:0,bottom:0,left:0},h=null,i=null,j=Math.floor(1e4*Math.random()),k=null,l=d3.scale.linear(),m=d3.scale.linear(),n=function(a){return a.x},o=function(a){return a.y},p=function(a){return a.open},q=function(a){return a.close},r=function(a){return a.high},s=function(a){return a.low},t=[],u=[],v=!1,w=!0,x=a.utils.defaultColor(),y=!1,z=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return b.highlightPoint=function(a,c){b.clearHighlights(),k.select(".nv-ohlcBar .nv-tick-0-"+a).classed("hover",c)},b.clearHighlights=function(){k.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},b.dispatch=z,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return h},set:function(a){h=a}},height:{get:function(){return i},set:function(a){i=a}},xScale:{get:function(){return l},set:function(a){l=a}},yScale:{get:function(){return m},set:function(a){m=a}},xDomain:{get:function(){return c},set:function(a){c=a}},yDomain:{get:function(){return d},set:function(a){d=a}},xRange:{get:function(){return e},set:function(a){e=a}},yRange:{get:function(){return f},set:function(a){f=a}},forceX:{get:function(){return t},set:function(a){t=a}},forceY:{get:function(){return u},set:function(a){u=a}},padData:{get:function(){return v},set:function(a){v=a}},clipEdge:{get:function(){return w},set:function(a){w=a}},id:{get:function(){return j},set:function(a){j=a}},interactive:{get:function(){return y},set:function(a){y=a}},x:{get:function(){return n},set:function(a){n=a}},y:{get:function(){return o},set:function(a){o=a}},open:{get:function(){return p()},set:function(a){p=a}},close:{get:function(){return q()},set:function(a){q=a}},high:{get:function(){return r},set:function(a){r=a}},low:{get:function(){return s},set:function(a){s=a}},margin:{get:function(){return g},set:function(a){g.top=void 0!=a.top?a.top:g.top,g.right=void 0!=a.right?a.right:g.right,g.bottom=void 0!=a.bottom?a.bottom:g.bottom,g.left=void 0!=a.left?a.left:g.left}},color:{get:function(){return x},set:function(b){x=a.utils.getColor(b)}}}),a.utils.initOptions(b),b},a.models.parallelCoordinates=function(){"use strict";function b(B){return A.reset(),B.each(function(b){function A(a){return x(o.map(function(b){if(isNaN(a.values[b.key])||isNaN(parseFloat(a.values[b.key]))||O){var c=l[b.key].domain(),d=l[b.key].range(),e=c[0]-(c[1]-c[0])/9;if(v.indexOf(b.key)<0){var f=d3.scale.linear().domain([e,c[1]]).range([j-12,d[1]]);l[b.key].brush.y(f),v.push(b.key)}if(isNaN(a.values[b.key])||isNaN(parseFloat(a.values[b.key])))return[k(b.key),l[b.key](e)]}return void 0!==U&&(v.length>0||O?(U.style("display","inline"),V.style("display","inline")):(U.style("display","none"),V.style("display","none"))),[k(b.key),l[b.key](a.values[b.key])]}))}function B(a){s.forEach(function(b){var c=l[b.dimension].brush.y().domain();b.hasOnlyNaN&&(b.extent[1]=(l[b.dimension].domain()[1]-c[0])*(b.extent[1]-b.extent[0])/(N[b.dimension]-b.extent[0])+c[0]),b.hasNaN&&(b.extent[0]=c[0]),a&&l[b.dimension].brush.extent(b.extent)}),e.select(".nv-brushBackground").each(function(a){d3.select(this).call(l[a.key].brush)}).selectAll("rect").attr("x",-8).attr("width",16),F()}function C(){q===!1&&(q=!0,B(!0))}function D(){$=p.filter(function(a){return!l[a].brush.empty()}),_=$.map(function(a){return l[a].brush.extent()}),s=[],$.forEach(function(a,b){s[b]={dimension:a,extent:_[b],hasNaN:!1,hasOnlyNaN:!1}}),t=[],c.style("display",function(a){var b=$.every(function(b,c){return!(!isNaN(a.values[b])&&!isNaN(parseFloat(a.values[b]))||_[c][0]!=l[b].brush.y().domain()[0])||_[c][0]<=a.values[b]&&a.values[b]<=_[c][1]&&!isNaN(parseFloat(a.values[b]))});return b&&t.push(a),b?null:"none"}),F(),z.brush({filters:s,active:t})}function E(){var a=$.length>0;s.forEach(function(a){a.extent[0]===l[a.dimension].brush.y().domain()[0]&&v.indexOf(a.dimension)>=0&&(a.hasNaN=!0),a.extent[1]<l[a.dimension].domain()[0]&&(a.hasOnlyNaN=!0)}),z.brushEnd(t,a)}function F(){e.select(".nv-axis").each(function(a,b){var c=s.filter(function(b){return b.dimension==a.key});P[a.key]=l[a.key].domain(),0!=c.length&&q&&(P[a.key]=[],c[0].extent[1]>l[a.key].domain()[0]&&(P[a.key]=[c[0].extent[1]]),c[0].extent[0]>=l[a.key].domain()[0]&&P[a.key].push(c[0].extent[0])),d3.select(this).call(y.scale(l[a.key]).tickFormat(a.format).tickValues(P[a.key]))})}function G(a){u[a.key]=this.parentNode.__origin__=k(a.key),d.attr("visibility","hidden")}function H(a){u[a.key]=Math.min(i,Math.max(0,this.parentNode.__origin__+=d3.event.x)),c.attr("d",A),o.sort(function(a,b){return J(a.key)-J(b.key)}),o.forEach(function(a,b){return a.currentPosition=b}),k.domain(o.map(function(a){return a.key})),e.attr("transform",function(a){return"translate("+J(a.key)+")"})}function I(a,b){delete this.parentNode.__origin__,delete u[a.key],d3.select(this.parentNode).attr("transform","translate("+k(a.key)+")"),c.attr("d",A),d.attr("d",A).attr("visibility",null),z.dimensionsOrder(o)}function J(a){var b=u[a];return null==b?k(a):b}var K=d3.select(this);if(i=a.utils.availableWidth(g,K,f),j=a.utils.availableHeight(h,K,f),a.utils.initSVG(K),void 0===b[0].values){var L=[];b.forEach(function(a){var b={},c=Object.keys(a);c.forEach(function(c){"name"!==c&&(b[c]=a[c])}),L.push({key:a.name,values:b})}),b=L}var M=b.map(function(a){return a.values});0===t.length&&(t=b),p=n.sort(function(a,b){return a.currentPosition-b.currentPosition}).map(function(a){return a.key}),o=n.filter(function(a){return!a.disabled}),k.rangePoints([0,i],1).domain(o.map(function(a){return a.key}));var N={},O=!1,P=[];p.forEach(function(a){var b=d3.extent(M,function(b){return+b[a]}),c=b[0],d=b[1],e=!1;(isNaN(c)||isNaN(d))&&(e=!0,c=0,d=0),c===d&&(c-=1,d+=1);var f=s.filter(function(b){return b.dimension==a});0!==f.length&&(e?(c=l[a].domain()[0],d=l[a].domain()[1]):!f[0].hasOnlyNaN&&q?(c=c>f[0].extent[0]?f[0].extent[0]:c,d=d<f[0].extent[1]?f[0].extent[1]:d):f[0].hasNaN&&(d=d<f[0].extent[1]?f[0].extent[1]:d,N[a]=l[a].domain()[1],O=!0)),l[a]=d3.scale.linear().domain([c,d]).range([.9*(j-12),0]),v=[],l[a].brush=d3.svg.brush().y(l[a]).on("brushstart",C).on("brush",D).on("brushend",E)});var Q=K.selectAll("g.nv-wrap.nv-parallelCoordinates").data([b]),R=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates"),S=R.append("g"),T=Q.select("g");
S.append("g").attr("class","nv-parallelCoordinates background"),S.append("g").attr("class","nv-parallelCoordinates foreground"),S.append("g").attr("class","nv-parallelCoordinates missingValuesline"),Q.attr("transform","translate("+f.left+","+f.top+")"),x.interpolate("cardinal").tension(w),y.orient("left");var U,V,W=d3.behavior.drag().on("dragstart",G).on("drag",H).on("dragend",I),X=k.range()[1]-k.range()[0];if(!isNaN(X)){var Y=[0+X/2,j-12,i-X/2,j-12];U=Q.select(".missingValuesline").selectAll("line").data([Y]),U.enter().append("line"),U.exit().remove(),U.attr("x1",function(a){return a[0]}).attr("y1",function(a){return a[1]}).attr("x2",function(a){return a[2]}).attr("y2",function(a){return a[3]}),V=Q.select(".missingValuesline").selectAll("text").data([m]),V.append("text").data([m]),V.enter().append("text"),V.exit().remove(),V.attr("y",j).attr("x",i-92-X/2).text(function(a){return a})}d=Q.select(".background").selectAll("path").data(b),d.enter().append("path"),d.exit().remove(),d.attr("d",A),c=Q.select(".foreground").selectAll("path").data(b),c.enter().append("path"),c.exit().remove(),c.attr("d",A).style("stroke-width",function(a,b){return isNaN(a.strokeWidth)&&(a.strokeWidth=1),a.strokeWidth}).attr("stroke",function(a,b){return a.color||r(a,b)}),c.on("mouseover",function(a,b){d3.select(this).classed("hover",!0).style("stroke-width",a.strokeWidth+2+"px").style("stroke-opacity",1),z.elementMouseover({label:a.name,color:a.color||r(a,b),values:a.values,dimensions:o})}),c.on("mouseout",function(a,b){d3.select(this).classed("hover",!1).style("stroke-width",a.strokeWidth+"px").style("stroke-opacity",.7),z.elementMouseout({label:a.name,index:b})}),c.on("mousemove",function(a,b){z.elementMousemove()}),c.on("click",function(a){z.elementClick({id:a.id})}),e=T.selectAll(".dimension").data(o);var Z=e.enter().append("g").attr("class","nv-parallelCoordinates dimension");e.attr("transform",function(a){return"translate("+k(a.key)+",0)"}),Z.append("g").attr("class","nv-axis"),Z.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(a,b){z.elementMouseover({label:a.tooltip||a.key,color:a.color})}).on("mouseout",function(a,b){z.elementMouseout({label:a.tooltip})}).on("mousemove",function(a,b){z.elementMousemove()}).call(W),Z.append("g").attr("class","nv-brushBackground"),e.exit().remove(),e.select(".nv-label").text(function(a){return a.key}),B(q);var $=p.filter(function(a){return!l[a].brush.empty()}),_=$.map(function(a){return l[a].brush.extent()}),aa=t.slice(0);t=[],c.style("display",function(a){var b=$.every(function(b,c){return!(!isNaN(a.values[b])&&!isNaN(parseFloat(a.values[b]))||_[c][0]!=l[b].brush.y().domain()[0])||_[c][0]<=a.values[b]&&a.values[b]<=_[c][1]&&!isNaN(parseFloat(a.values[b]))});return b&&t.push(a),b?null:"none"}),(s.length>0||!a.utils.arrayEquals(t,aa))&&z.activeChanged(t)}),b}var c,d,e,f={top:30,right:0,bottom:10,left:0},g=null,h=null,i=null,j=null,k=d3.scale.ordinal(),l={},m="undefined values",n=[],o=[],p=[],q=!0,r=a.utils.defaultColor(),s=[],t=[],u=[],v=[],w=1,x=d3.svg.line(),y=d3.svg.axis(),z=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),A=a.utils.renderWatch(z);return b.dispatch=z,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return h},set:function(a){h=a}},dimensionData:{get:function(){return n},set:function(a){n=a}},displayBrush:{get:function(){return q},set:function(a){q=a}},filters:{get:function(){return s},set:function(a){s=a}},active:{get:function(){return t},set:function(a){t=a}},lineTension:{get:function(){return w},set:function(a){w=a}},undefinedValuesLabel:{get:function(){return m},set:function(a){m=a}},dimensions:{get:function(){return n.map(function(a){return a.key})},set:function(b){a.deprecated("dimensions","use dimensionData instead"),0===n.length?b.forEach(function(a){n.push({key:a})}):b.forEach(function(a,b){n[b].key=a})}},dimensionNames:{get:function(){return n.map(function(a){return a.key})},set:function(b){a.deprecated("dimensionNames","use dimensionData instead"),p=[],0===n.length?b.forEach(function(a){n.push({key:a})}):b.forEach(function(a,b){n[b].key=a})}},dimensionFormats:{get:function(){return n.map(function(a){return a.format})},set:function(b){a.deprecated("dimensionFormats","use dimensionData instead"),0===n.length?b.forEach(function(a){n.push({format:a})}):b.forEach(function(a,b){n[b].format=a})}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top,f.right=void 0!==a.right?a.right:f.right,f.bottom=void 0!==a.bottom?a.bottom:f.bottom,f.left=void 0!==a.left?a.left:f.left}},color:{get:function(){return r},set:function(b){r=a.utils.getColor(b)}}}),a.utils.initOptions(b),b},a.models.parallelCoordinatesChart=function(){"use strict";function b(e){return r.reset(),r.models(c),e.each(function(e){var j=d3.select(this);a.utils.initSVG(j);var o=a.utils.availableWidth(g,j,f),p=a.utils.availableHeight(h,j,f);if(b.update=function(){j.call(b)},b.container=this,k.setter(t(l),b.update).getter(s(l)).update(),k.disabled=l.map(function(a){return!!a.disabled}),l=l.map(function(a){return a.disabled=!!a.disabled,a}),l.forEach(function(a,b){a.originalPosition=isNaN(a.originalPosition)?b:a.originalPosition,a.currentPosition=isNaN(a.currentPosition)?b:a.currentPosition}),!n){var r;n={};for(r in k)k[r]instanceof Array?n[r]=k[r].slice(0):n[r]=k[r]}if(!e||!e.length)return a.utils.noData(b,j),b;j.selectAll(".nv-noData").remove();var u=j.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([e]),v=u.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),w=u.select("g");v.append("g").attr("class","nv-parallelCoordinatesWrap"),v.append("g").attr("class","nv-legendWrap"),w.select("rect").attr("width",o).attr("height",p>0?p:0),i?(d.width(o).color(function(a){return"rgb(188,190,192)"}),w.select(".nv-legendWrap").datum(l.sort(function(a,b){return a.originalPosition-b.originalPosition})).call(d),d.height()>f.top&&(f.top=d.height(),p=a.utils.availableHeight(h,j,f)),u.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-f.top+")")):w.select(".nv-legendWrap").selectAll("*").remove(),u.attr("transform","translate("+f.left+","+f.top+")"),c.width(o).height(p).dimensionData(l).displayBrush(m);var x=w.select(".nv-parallelCoordinatesWrap ").datum(e);x.transition().call(c),c.dispatch.on("brushEnd",function(a,b){b?(m=!0,q.brushEnd(a)):m=!1}),d.dispatch.on("stateChange",function(a){for(var c in a)k[c]=a[c];q.stateChange(k),b.update()}),c.dispatch.on("dimensionsOrder",function(a){l.sort(function(a,b){return a.currentPosition-b.currentPosition});var b=!1;l.forEach(function(a,c){a.currentPosition=c,a.currentPosition!==a.originalPosition&&(b=!0)}),q.dimensionsOrder(l,b)}),q.on("changeState",function(a){"undefined"!=typeof a.disabled&&(l.forEach(function(b,c){b.disabled=a.disabled[c]}),k.disabled=a.disabled),b.update()})}),r.renderEnd("parraleleCoordinateChart immediate"),b}var c=a.models.parallelCoordinates(),d=a.models.legend(),e=a.models.tooltip(),f=(a.models.tooltip(),{top:0,right:0,bottom:0,left:0}),g=null,h=null,i=!0,j=a.utils.defaultColor(),k=a.utils.state(),l=[],m=!0,n=null,o=null,p="undefined",q=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),r=a.utils.renderWatch(q),s=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},t=function(a){return function(b){void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}};return e.contentGenerator(function(a){var b='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+a.color+'"></div></td><td><strong>'+a.key+"</strong></td></tr></thead>";return 0!==a.series.length&&(b+='<tbody><tr><td height ="10px"></td></tr>',a.series.forEach(function(a){b=b+'<tr><td class="legend-color-guide"><div style="background-color:'+a.color+'"></div></td><td class="key">'+a.key+'</td><td class="value">'+a.value+"</td></tr>"}),b+="</tbody>"),b+="</table>"}),c.dispatch.on("elementMouseover.tooltip",function(a){var b={key:a.label,color:a.color,series:[]};a.values&&(Object.keys(a.values).forEach(function(c){var d=a.dimensions.filter(function(a){return a.key===c})[0];if(d){var e;e=isNaN(a.values[c])||isNaN(parseFloat(a.values[c]))?p:d.format(a.values[c]),b.series.push({idx:d.currentPosition,key:c,value:e,color:d.color})}}),b.series.sort(function(a,b){return a.idx-b.idx})),e.data(b).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(a){e.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(){e()}),b.dispatch=q,b.parallelCoordinates=c,b.legend=d,b.tooltip=e,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return h},set:function(a){h=a}},showLegend:{get:function(){return i},set:function(a){i=a}},defaultState:{get:function(){return n},set:function(a){n=a}},dimensionData:{get:function(){return l},set:function(a){l=a}},displayBrush:{get:function(){return m},set:function(a){m=a}},noData:{get:function(){return o},set:function(a){o=a}},nanValue:{get:function(){return p},set:function(a){p=a}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top,f.right=void 0!==a.right?a.right:f.right,f.bottom=void 0!==a.bottom?a.bottom:f.bottom,f.left=void 0!==a.left?a.left:f.left}},color:{get:function(){return j},set:function(b){j=a.utils.getColor(b),d.color(j),c.color(j)}}}),a.utils.inheritOptions(b,c),a.utils.initOptions(b),b},a.models.pie=function(){"use strict";function b(F){return E.reset(),F.each(function(b){function F(a,b){a.endAngle=isNaN(a.endAngle)?0:a.endAngle,a.startAngle=isNaN(a.startAngle)?0:a.startAngle,p||(a.innerRadius=0);var c=d3.interpolate(this._current,a);return this._current=c(0),function(a){return C[b](c(a))}}var G=d-c.left-c.right,H=e-c.top-c.bottom,I=Math.min(G,H)/2,J=[],K=[];if(i=d3.select(this),0===A.length)for(var L=I-I/5,M=y*I,N=0;N<b[0].length;N++)J.push(L),K.push(M);else r?(J=A.map(function(a){return(a.outer-a.outer/5)*I}),K=A.map(function(a){return(a.inner-a.inner/5)*I}),y=d3.min(A.map(function(a){return a.inner-a.inner/5}))):(J=A.map(function(a){return a.outer*I}),K=A.map(function(a){return a.inner*I}),y=d3.min(A.map(function(a){return a.inner})));a.utils.initSVG(i);var O=i.selectAll(".nv-wrap.nv-pie").data(b),P=O.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+h),Q=P.append("g"),R=O.select("g"),S=Q.append("g").attr("class","nv-pie");Q.append("g").attr("class","nv-pieLabels"),O.attr("transform","translate("+c.left+","+c.top+")"),R.select(".nv-pie").attr("transform","translate("+G/2+","+H/2+")"),R.select(".nv-pieLabels").attr("transform","translate("+G/2+","+H/2+")"),i.on("click",function(a,b){B.chartClick({data:a,index:b,pos:d3.event,id:h})}),C=[],D=[];for(var N=0;N<b[0].length;N++){var T=d3.svg.arc().outerRadius(J[N]),U=d3.svg.arc().outerRadius(J[N]+5);u!==!1&&(T.startAngle(u),U.startAngle(u)),w!==!1&&(T.endAngle(w),U.endAngle(w)),p&&(T.innerRadius(K[N]),U.innerRadius(K[N])),T.cornerRadius&&x&&(T.cornerRadius(x),U.cornerRadius(x)),C.push(T),D.push(U)}var V=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:g(a)});V.padAngle&&v&&V.padAngle(v),p&&q&&(S.append("text").attr("class","nv-pie-title"),O.select(".nv-pie-title").style("text-anchor","middle").text(function(a){return q}).style("font-size",Math.min(G,H)*y*2/(q.length+2)+"px").attr("dy","0.35em").attr("transform",function(a,b){return"translate(0, "+s+")"}));var W=O.select(".nv-pie").selectAll(".nv-slice").data(V),X=O.select(".nv-pieLabels").selectAll(".nv-label").data(V);W.exit().remove(),X.exit().remove();var Y=W.enter().append("g");Y.attr("class","nv-slice"),Y.on("mouseover",function(a,b){d3.select(this).classed("hover",!0),r&&d3.select(this).select("path").transition().duration(70).attr("d",D[b]),B.elementMouseover({data:a.data,index:b,color:d3.select(this).style("fill"),percent:(a.endAngle-a.startAngle)/(2*Math.PI)})}),Y.on("mouseout",function(a,b){d3.select(this).classed("hover",!1),r&&d3.select(this).select("path").transition().duration(50).attr("d",C[b]),B.elementMouseout({data:a.data,index:b})}),Y.on("mousemove",function(a,b){B.elementMousemove({data:a.data,index:b})}),Y.on("click",function(a,b){var c=this;B.elementClick({data:a.data,index:b,color:d3.select(this).style("fill"),event:d3.event,element:c})}),Y.on("dblclick",function(a,b){B.elementDblClick({data:a.data,index:b,color:d3.select(this).style("fill")})}),W.attr("fill",function(a,b){return j(a.data,b)}),W.attr("stroke",function(a,b){return j(a.data,b)});Y.append("path").each(function(a){this._current=a});if(W.select("path").transition().duration(z).attr("d",function(a,b){return C[b](a)}).attrTween("d",F),l){for(var Z=[],N=0;N<b[0].length;N++)Z.push(C[N]),m?p&&(Z[N]=d3.svg.arc().outerRadius(C[N].outerRadius()),u!==!1&&Z[N].startAngle(u),w!==!1&&Z[N].endAngle(w)):p||Z[N].innerRadius(0);X.enter().append("g").classed("nv-label",!0).each(function(a,b){var c=d3.select(this);c.attr("transform",function(a,b){if(t){a.outerRadius=J[b]+10,a.innerRadius=J[b]+15;var c=(a.startAngle+a.endAngle)/2*(180/Math.PI);return(a.startAngle+a.endAngle)/2<Math.PI?c-=90:c+=90,"translate("+Z[b].centroid(a)+") rotate("+c+")"}return a.outerRadius=I+10,a.innerRadius=I+15,"translate("+Z[b].centroid(a)+")"}),c.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),c.append("text").style("text-anchor",t?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var $={},_=14,aa=140,ba=function(a){return Math.floor(a[0]/aa)*aa+","+Math.floor(a[1]/_)*_},ca=function(a){return(a.endAngle-a.startAngle)/(2*Math.PI)};X.watchTransition(E,"pie labels").attr("transform",function(a,b){if(t){a.outerRadius=J[b]+10,a.innerRadius=J[b]+15;var c=(a.startAngle+a.endAngle)/2*(180/Math.PI);return(a.startAngle+a.endAngle)/2<Math.PI?c-=90:c+=90,"translate("+Z[b].centroid(a)+") rotate("+c+")"}a.outerRadius=I+10,a.innerRadius=I+15;var d=Z[b].centroid(a),e=ca(a);if(a.value&&e>=o){var f=ba(d);$[f]&&(d[1]-=_),$[ba(d)]=!0}return"translate("+d+")"}),X.select(".nv-label text").style("text-anchor",function(a,b){return t?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(a,b){var c=ca(a),d="";if(!a.value||c<o)return"";if("function"==typeof n)d=n(a,b,{key:f(a.data),value:g(a.data),percent:k(c)});else switch(n){case"key":d=f(a.data);break;case"value":d=k(g(a.data));break;case"percent":d=d3.format("%")(c)}return d})}}),E.renderEnd("pie immediate"),b}var c={top:0,right:0,bottom:0,left:0},d=500,e=500,f=function(a){return a.x},g=function(a){return a.y},h=Math.floor(1e4*Math.random()),i=null,j=a.utils.defaultColor(),k=d3.format(",.2f"),l=!0,m=!1,n="key",o=.02,p=!1,q=!1,r=!0,s=0,t=!1,u=!1,v=!1,w=!1,x=0,y=.5,z=250,A=[],B=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),C=[],D=[],E=a.utils.renderWatch(B);return b.dispatch=B,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{arcsRadius:{get:function(){return A},set:function(a){A=a}},width:{get:function(){return d},set:function(a){d=a}},height:{get:function(){return e},set:function(a){e=a}},showLabels:{get:function(){return l},set:function(a){l=a}},title:{get:function(){return q},set:function(a){q=a}},titleOffset:{get:function(){return s},set:function(a){s=a}},labelThreshold:{get:function(){return o},set:function(a){o=a}},valueFormat:{get:function(){return k},set:function(a){k=a}},x:{get:function(){return f},set:function(a){f=a}},id:{get:function(){return h},set:function(a){h=a}},endAngle:{get:function(){return w},set:function(a){w=a}},startAngle:{get:function(){return u},set:function(a){u=a}},padAngle:{get:function(){return v},set:function(a){v=a}},cornerRadius:{get:function(){return x},set:function(a){x=a}},donutRatio:{get:function(){return y},set:function(a){y=a}},labelsOutside:{get:function(){return m},set:function(a){m=a}},labelSunbeamLayout:{get:function(){return t},set:function(a){t=a}},donut:{get:function(){return p},set:function(a){p=a}},growOnHover:{get:function(){return r},set:function(a){r=a}},pieLabelsOutside:{get:function(){return m},set:function(b){m=b,a.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return m},set:function(b){m=b,a.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return k},set:function(b){k=b,a.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return c},set:function(a){c.top="undefined"!=typeof a.top?a.top:c.top,c.right="undefined"!=typeof a.right?a.right:c.right,c.bottom="undefined"!=typeof a.bottom?a.bottom:c.bottom,c.left="undefined"!=typeof a.left?a.left:c.left}},duration:{get:function(){return z},set:function(a){z=a,E.reset(z)}},y:{get:function(){return g},set:function(a){g=d3.functor(a)}},color:{get:function(){return j},set:function(b){j=a.utils.getColor(b)}},labelType:{get:function(){return n},set:function(a){n=a||"key"}}}),a.utils.initOptions(b),b},a.models.pieChart=function(){"use strict";function b(e){return r.reset(),r.models(c),e.each(function(e){var i=d3.select(this);a.utils.initSVG(i);var l=a.utils.availableWidth(g,i,f),o=a.utils.availableHeight(h,i,f);if(b.update=function(){i.transition().call(b)},b.container=this,m.setter(t(e),b.update).getter(s(e)).update(),m.disabled=e.map(function(a){return!!a.disabled}),!n){var p;n={};for(p in m)m[p]instanceof Array?n[p]=m[p].slice(0):n[p]=m[p]}if(!e||!e.length)return a.utils.noData(b,i),b;i.selectAll(".nv-noData").remove();var r=i.selectAll("g.nv-wrap.nv-pieChart").data([e]),u=r.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),v=r.select("g");if(u.append("g").attr("class","nv-pieWrap"),u.append("g").attr("class","nv-legendWrap"),j){if("top"===k)d.width(l).key(c.x()),r.select(".nv-legendWrap").datum(e).call(d),d.height()>f.top&&(f.top=d.height(),o=a.utils.availableHeight(h,i,f)),r.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")");else if("right"===k){var w=a.models.legend().width();l/2<w&&(w=l/2),d.height(o).key(c.x()),d.width(w),l-=d.width(),r.select(".nv-legendWrap").datum(e).call(d).attr("transform","translate("+l+",0)")}}else v.select(".nv-legendWrap").selectAll("*").remove();r.attr("transform","translate("+f.left+","+f.top+")"),c.width(l).height(o);var x=v.select(".nv-pieWrap").datum([e]);d3.transition(x).call(c),d.dispatch.on("stateChange",function(a){for(var c in a)m[c]=a[c];q.stateChange(m),b.update()}),q.on("changeState",function(a){"undefined"!=typeof a.disabled&&(e.forEach(function(b,c){b.disabled=a.disabled[c]}),m.disabled=a.disabled),b.update()})}),r.renderEnd("pieChart immediate"),b}var c=a.models.pie(),d=a.models.legend(),e=a.models.tooltip(),f={top:30,right:20,bottom:20,left:20},g=null,h=null,i=!1,j=!0,k="top",l=a.utils.defaultColor(),m=a.utils.state(),n=null,o=null,p=250,q=d3.dispatch("stateChange","changeState","renderEnd");e.duration(0).headerEnabled(!1).valueFormatter(function(a,b){return c.valueFormat()(a,b)});var r=a.utils.renderWatch(q),s=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},t=function(a){return function(b){void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}};return c.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:b.x()(a.data),value:b.y()(a.data),color:a.color,percent:a.percent},i||(delete a.percent,delete a.series.percent),e.data(a).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(a){e.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(a){e()}),b.legend=d,b.dispatch=q,b.pie=c,b.tooltip=e,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return h},set:function(a){h=a}},noData:{get:function(){return o},set:function(a){o=a}},showTooltipPercent:{get:function(){return i},set:function(a){i=a}},showLegend:{get:function(){return j},set:function(a){j=a}},legendPosition:{get:function(){return k},set:function(a){k=a}},defaultState:{get:function(){return n},set:function(a){n=a}},color:{get:function(){return l},set:function(a){l=a,d.color(l),c.color(l)}},duration:{get:function(){return p},set:function(a){p=a,r.reset(p),c.duration(p)}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top,f.right=void 0!==a.right?a.right:f.right,f.bottom=void 0!==a.bottom?a.bottom:f.bottom,f.left=void 0!==a.left?a.left:f.left}}}),a.utils.inheritOptions(b,c),a.utils.initOptions(b),b},a.models.scatter=function(){"use strict";function b(a){var b,c;return b=i=i||{},c=a[0].series,b=b[c]=b[c]||{},c=a[1],b=b[c]=b[c]||{}}function c(a){var c,d,e=a[0],f=b(a),g=!1;for(c=1;c<arguments.length;c++)d=arguments[c],f[d]===e[d]&&f.hasOwnProperty(d)||(f[d]=e[d],g=!0);return g}function d(b){return U.reset(),b.each(function(b){function i(){if(T=!1,!z)return!1;if(P===!0){var c=d3.merge(b.map(function(b,c){return b.values.map(function(b,d){var e=s(b,d),f=t(b,d);return[a.utils.NaNtoZero(p(e))+1e-4*Math.random(),a.utils.NaNtoZero(q(f))+1e-4*Math.random(),c,d,b]}).filter(function(a,b){return A(a[4],b)})}));if(0==c.length)return!1;c.length<3&&(c.push([p.range()[0]-20,q.range()[0]-20,null,null]),c.push([p.range()[1]+20,q.range()[1]+20,null,null]),c.push([p.range()[0]-20,q.range()[0]+20,null,null]),c.push([p.range()[1]+20,q.range()[1]-20,null,null]));var d=d3.geom.polygon([[-10,-10],[-10,l+10],[k+10,l+10],[k+10,-10]]),e=d3.geom.voronoi(c).map(function(a,b){return{data:d.clip(a),series:c[b][2],point:c[b][3]}});_.select(".nv-point-paths").selectAll("path").remove();var f=_.select(".nv-point-paths").selectAll("path").data(e),g=f.enter().append("svg:path").attr("d",function(a){return a&&a.data&&0!==a.data.length?"M"+a.data.join(",")+"Z":"M 0 0"}).attr("id",function(a,b){return"nv-path-"+b}).attr("clip-path",function(a,b){return"url(#nv-clip-"+n+"-"+b+")"});if(F&&g.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),E){_.select(".nv-point-clips").selectAll("*").remove();var h=_.select(".nv-point-clips").selectAll("clipPath").data(c);h.enter().append("svg:clipPath").attr("id",function(a,b){return"nv-clip-"+n+"-"+b}).append("svg:circle").attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}).attr("r",G)}var i=function(a,c){if(T)return 0;var d=b[a.series];if(void 0!==d){var e=d.values[a.point];e.color=m(d,a.series),e.x=s(e),e.y=t(e);var f=o.node().getBoundingClientRect(),g=window.pageYOffset||document.documentElement.scrollTop,h=window.pageXOffset||document.documentElement.scrollLeft,i={left:p(s(e,a.point))+f.left+h+j.left+10,top:q(t(e,a.point))+f.top+g+j.top+10};c({point:e,series:d,pos:i,relativePos:[p(s(e,a.point))+j.left,q(t(e,a.point))+j.top],seriesIndex:a.series,pointIndex:a.point})}};f.on("click",function(a){i(a,O.elementClick)}).on("dblclick",function(a){i(a,O.elementDblClick)}).on("mouseover",function(a){i(a,O.elementMouseover)}).on("mouseout",function(a,b){i(a,O.elementMouseout)})}else _.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(a,c){if(T||!b[a.series])return 0;var d=b[a.series],e=d.values[c],f=this;O.elementClick({point:e,series:d,pos:[p(s(e,c))+j.left,q(t(e,c))+j.top],relativePos:[p(s(e,c))+j.left,q(t(e,c))+j.top],seriesIndex:a.series,pointIndex:c,event:d3.event,element:f})}).on("dblclick",function(a,c){if(T||!b[a.series])return 0;var d=b[a.series],e=d.values[c];O.elementDblClick({point:e,series:d,pos:[p(s(e,c))+j.left,q(t(e,c))+j.top],relativePos:[p(s(e,c))+j.left,q(t(e,c))+j.top],seriesIndex:a.series,pointIndex:c})}).on("mouseover",function(a,c){if(T||!b[a.series])return 0;var d=b[a.series],e=d.values[c];O.elementMouseover({point:e,series:d,pos:[p(s(e,c))+j.left,q(t(e,c))+j.top],relativePos:[p(s(e,c))+j.left,q(t(e,c))+j.top],seriesIndex:a.series,pointIndex:c,color:m(a,c)})}).on("mouseout",function(a,c){if(T||!b[a.series])return 0;var d=b[a.series],e=d.values[c];O.elementMouseout({point:e,series:d,pos:[p(s(e,c))+j.left,q(t(e,c))+j.top],relativePos:[p(s(e,c))+j.left,q(t(e,c))+j.top],seriesIndex:a.series,pointIndex:c,color:m(a,c)})})}o=d3.select(this);var Q=a.utils.availableWidth(k,o,j),W=a.utils.availableHeight(l,o,j);a.utils.initSVG(o),b.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});var X=d.yScale().name===d3.scale.log().name,Y=H&&I&&L?[]:d3.merge(b.map(function(a){return a.values.map(function(a,b){return{x:s(a,b),y:t(a,b),size:u(a,b)}})}));if(p.domain(H||d3.extent(Y.map(function(a){return a.x}).concat(w))),B&&b[0]?p.range(J||[(Q*C+Q)/(2*b[0].values.length),Q-Q*(1+C)/(2*b[0].values.length)]):p.range(J||[0,Q]),X){var Z=d3.min(Y.map(function(a){if(0!==a.y)return a.y}));q.clamp(!0).domain(I||d3.extent(Y.map(function(a){return 0!==a.y?a.y:.1*Z}).concat(x))).range(K||[W,0])}else q.domain(I||d3.extent(Y.map(function(a){return a.y}).concat(x))).range(K||[W,0]);r.domain(L||d3.extent(Y.map(function(a){return a.size}).concat(y))).range(M||V),N=p.domain()[0]===p.domain()[1]||q.domain()[0]===q.domain()[1],p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1])),q.domain()[0]===q.domain()[1]&&(q.domain()[0]?q.domain([q.domain()[0]-.01*q.domain()[0],q.domain()[1]+.01*q.domain()[1]]):q.domain([-1,1])),isNaN(p.domain()[0])&&p.domain([-1,1]),isNaN(q.domain()[0])&&q.domain([-1,1]),e=e||p,f=f||q,g=g||r;var $=p(1)!==e(1)||q(1)!==f(1)||r(1)!==g(1),_=o.selectAll("g.nv-wrap.nv-scatter").data([b]),aa=_.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+n),ba=aa.append("defs"),ca=aa.append("g"),da=_.select("g");_.classed("nv-single-point",N),ca.append("g").attr("class","nv-groups"),ca.append("g").attr("class","nv-point-paths"),aa.append("g").attr("class","nv-point-clips"),_.attr("transform","translate("+j.left+","+j.top+")"),ba.append("clipPath").attr("id","nv-edge-clip-"+n).append("rect"),_.select("#nv-edge-clip-"+n+" rect").attr("width",Q).attr("height",W>0?W:0),da.attr("clip-path",D?"url(#nv-edge-clip-"+n+")":""),T=!0;var ea=_.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});ea.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),ea.exit().remove(),ea.attr("class",function(a,b){return(a.classed||"")+" nv-group nv-series-"+b}).classed("nv-noninteractive",!z).classed("hover",function(a){return a.hover}),ea.watchTransition(U,"scatter: groups").style("fill",function(a,b){return m(a,b)}).style("stroke",function(a,b){return m(a,b)}).style("stroke-opacity",1).style("fill-opacity",.5);var fa=ea.selectAll("path.nv-point").data(function(a){return a.values.map(function(a,b){return[a,b]}).filter(function(a,b){return A(a[0],b)})});if(fa.enter().append("path").attr("class",function(a){return"nv-point nv-point-"+a[1]}).style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("transform",function(b){return"translate("+a.utils.NaNtoZero(e(s(b[0],b[1])))+","+a.utils.NaNtoZero(f(t(b[0],b[1])))+")"}).attr("d",a.utils.symbol().type(function(a){return v(a[0])}).size(function(a){return r(u(a[0],a[1]))})),fa.exit().remove(),ea.exit().selectAll("path.nv-point").watchTransition(U,"scatter exit").attr("transform",function(b){return"translate("+a.utils.NaNtoZero(p(s(b[0],b[1])))+","+a.utils.NaNtoZero(q(t(b[0],b[1])))+")"}).remove(),fa.filter(function(a){return $||c(a,"x","y")}).watchTransition(U,"scatter points").attr("transform",function(b){return"translate("+a.utils.NaNtoZero(p(s(b[0],b[1])))+","+a.utils.NaNtoZero(q(t(b[0],b[1])))+")"}),fa.filter(function(a){return $||c(a,"shape","size")}).watchTransition(U,"scatter points").attr("d",a.utils.symbol().type(function(a){return v(a[0])}).size(function(a){return r(u(a[0],a[1]))})),S){var ga=ea.selectAll(".nv-label").data(function(a){return a.values.map(function(a,b){return[a,b]}).filter(function(a,b){return A(a[0],b)})});ga.enter().append("text").style("fill",function(a,b){return a.color}).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",function(b){var c=a.utils.NaNtoZero(e(s(b[0],b[1])))+Math.sqrt(r(u(b[0],b[1]))/Math.PI)+2;return"translate("+c+","+a.utils.NaNtoZero(f(t(b[0],b[1])))+")"}).text(function(a,b){return a[0].label}),ga.exit().remove(),ea.exit().selectAll("path.nv-label").watchTransition(U,"scatter exit").attr("transform",function(b){var c=a.utils.NaNtoZero(p(s(b[0],b[1])))+Math.sqrt(r(u(b[0],b[1]))/Math.PI)+2;return"translate("+c+","+a.utils.NaNtoZero(q(t(b[0],b[1])))+")"}).remove(),ga.each(function(a){d3.select(this).classed("nv-label",!0).classed("nv-label-"+a[1],!1).classed("hover",!1)}),ga.watchTransition(U,"scatter labels").attr("transform",function(b){var c=a.utils.NaNtoZero(p(s(b[0],b[1])))+Math.sqrt(r(u(b[0],b[1]))/Math.PI)+2;return"translate("+c+","+a.utils.NaNtoZero(q(t(b[0],b[1])))+")"})}R?(clearTimeout(h),h=setTimeout(i,R)):i(),e=p.copy(),f=q.copy(),g=r.copy()}),U.renderEnd("scatter immediate"),d}var e,f,g,h,i,j={top:0,right:0,bottom:0,left:0},k=null,l=null,m=a.utils.defaultColor(),n=Math.floor(1e5*Math.random()),o=null,p=d3.scale.linear(),q=d3.scale.linear(),r=d3.scale.linear(),s=function(a){return a.x},t=function(a){return a.y},u=function(a){return a.size||1},v=function(a){return a.shape||"circle"},w=[],x=[],y=[],z=!0,A=function(a){return!a.notActive},B=!1,C=.1,D=!1,E=!0,F=!1,G=function(){return 25},H=null,I=null,J=null,K=null,L=null,M=null,N=!1,O=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),P=!0,Q=250,R=300,S=!1,T=!1,U=a.utils.renderWatch(O,Q),V=[16,256];return d.dispatch=O,d.options=a.utils.optionsFunc.bind(d),d._calls=new function(){this.clearHighlights=function(){return a.dom.write(function(){o.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(b,c,d){a.dom.write(function(){o.select(".nv-groups").selectAll(".nv-series-"+b).selectAll(".nv-point-"+c).classed("hover",d)})}},O.on("elementMouseover.point",function(a){z&&d._calls.highlightPoint(a.seriesIndex,a.pointIndex,!0)}),O.on("elementMouseout.point",function(a){z&&d._calls.highlightPoint(a.seriesIndex,a.pointIndex,!1)}),d._options=Object.create({},{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return l},set:function(a){l=a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return q},set:function(a){q=a}},pointScale:{get:function(){return r},set:function(a){r=a}},xDomain:{get:function(){return H},set:function(a){H=a}},yDomain:{get:function(){return I},set:function(a){I=a}},pointDomain:{get:function(){return L},set:function(a){L=a}},xRange:{get:function(){return J},set:function(a){J=a}},yRange:{get:function(){return K},set:function(a){K=a}},pointRange:{get:function(){return M},set:function(a){M=a}},forceX:{get:function(){return w},set:function(a){w=a}},forceY:{get:function(){return x},set:function(a){x=a}},forcePoint:{get:function(){return y},set:function(a){y=a}},interactive:{get:function(){return z},set:function(a){z=a}},pointActive:{get:function(){return A},set:function(a){A=a}},padDataOuter:{get:function(){return C},set:function(a){C=a}},padData:{get:function(){return B},set:function(a){B=a}},clipEdge:{get:function(){return D},set:function(a){D=a}},clipVoronoi:{get:function(){return E},set:function(a){E=a}},clipRadius:{get:function(){return G},set:function(a){G=a}},showVoronoi:{get:function(){return F},set:function(a){F=a}},id:{get:function(){return n},set:function(a){n=a}},interactiveUpdateDelay:{get:function(){return R},set:function(a){R=a}},showLabels:{get:function(){return S},set:function(a){S=a}},x:{get:function(){return s},set:function(a){s=d3.functor(a)}},y:{get:function(){return t},set:function(a){t=d3.functor(a)}},pointSize:{
get:function(){return u},set:function(a){u=d3.functor(a)}},pointShape:{get:function(){return v},set:function(a){v=d3.functor(a)}},margin:{get:function(){return j},set:function(a){j.top=void 0!==a.top?a.top:j.top,j.right=void 0!==a.right?a.right:j.right,j.bottom=void 0!==a.bottom?a.bottom:j.bottom,j.left=void 0!==a.left?a.left:j.left}},duration:{get:function(){return Q},set:function(a){Q=a,U.reset(Q)}},color:{get:function(){return m},set:function(b){m=a.utils.getColor(b)}},useVoronoi:{get:function(){return P},set:function(a){P=a,P===!1&&(E=!1)}}}),a.utils.initOptions(d),d},a.models.scatterChart=function(){"use strict";function b(z){return E.reset(),E.models(c),t&&E.models(d),u&&E.models(e),q&&E.models(g),r&&E.models(h),z.each(function(z){m=d3.select(this),a.utils.initSVG(m);var H=a.utils.availableWidth(k,m,j),I=a.utils.availableHeight(l,m,j);if(b.update=function(){0===A?m.call(b):m.transition().duration(A).call(b)},b.container=this,w.setter(G(z),b.update).getter(F(z)).update(),w.disabled=z.map(function(a){return!!a.disabled}),!x){var J;x={};for(J in w)w[J]instanceof Array?x[J]=w[J].slice(0):x[J]=w[J]}if(!(z&&z.length&&z.filter(function(a){return a.values.length}).length))return a.utils.noData(b,m),E.renderEnd("scatter immediate"),b;m.selectAll(".nv-noData").remove(),o=c.xScale(),p=c.yScale();var K=m.selectAll("g.nv-wrap.nv-scatterChart").data([z]),L=K.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+c.id()),M=L.append("g"),N=K.select("g");if(M.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y nv-axis"),M.append("g").attr("class","nv-scatterWrap"),M.append("g").attr("class","nv-regressionLinesWrap"),M.append("g").attr("class","nv-distWrap"),M.append("g").attr("class","nv-legendWrap"),v&&N.select(".nv-y.nv-axis").attr("transform","translate("+H+",0)"),s){var O=H;f.width(O),K.select(".nv-legendWrap").datum(z).call(f),f.height()>j.top&&(j.top=f.height(),I=a.utils.availableHeight(l,m,j)),K.select(".nv-legendWrap").attr("transform","translate(0,"+-j.top+")")}else N.select(".nv-legendWrap").selectAll("*").remove();K.attr("transform","translate("+j.left+","+j.top+")"),c.width(H).height(I).color(z.map(function(a,b){return a.color=a.color||n(a,b),a.color}).filter(function(a,b){return!z[b].disabled})).showLabels(B),K.select(".nv-scatterWrap").datum(z.filter(function(a){return!a.disabled})).call(c),K.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+c.id()+")");var P=K.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});P.enter().append("g").attr("class","nv-regLines");var Q=P.selectAll(".nv-regLine").data(function(a){return[a]});Q.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),Q.filter(function(a){return a.intercept&&a.slope}).watchTransition(E,"scatterPlusLineChart: regline").attr("x1",o.range()[0]).attr("x2",o.range()[1]).attr("y1",function(a,b){return p(o.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,b){return p(o.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,c){return n(a,c)}).style("stroke-opacity",function(a,b){return a.disabled||"undefined"==typeof a.slope||"undefined"==typeof a.intercept?0:1}),t&&(d.scale(o)._ticks(a.utils.calcTicksX(H/100,z)).tickSize(-I,0),N.select(".nv-x.nv-axis").attr("transform","translate(0,"+p.range()[0]+")").call(d)),u&&(e.scale(p)._ticks(a.utils.calcTicksY(I/36,z)).tickSize(-H,0),N.select(".nv-y.nv-axis").call(e)),q&&(g.getData(c.x()).scale(o).width(H).color(z.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!z[b].disabled})),M.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),N.select(".nv-distributionX").attr("transform","translate(0,"+p.range()[0]+")").datum(z.filter(function(a){return!a.disabled})).call(g)),r&&(h.getData(c.y()).scale(p).width(I).color(z.map(function(a,b){return a.color||n(a,b)}).filter(function(a,b){return!z[b].disabled})),M.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),N.select(".nv-distributionY").attr("transform","translate("+(v?H:-h.size())+",0)").datum(z.filter(function(a){return!a.disabled})).call(h)),f.dispatch.on("stateChange",function(a){for(var c in a)w[c]=a[c];y.stateChange(w),b.update()}),y.on("changeState",function(a){"undefined"!=typeof a.disabled&&(z.forEach(function(b,c){b.disabled=a.disabled[c]}),w.disabled=a.disabled),b.update()}),c.dispatch.on("elementMouseout.tooltip",function(a){i.hidden(!0),m.select(".nv-chart-"+c.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0),m.select(".nv-chart-"+c.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",h.size())}),c.dispatch.on("elementMouseover.tooltip",function(a){m.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.relativePos[1]-I),m.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.relativePos[0]+g.size()),i.data(a).hidden(!1)}),C=o.copy(),D=p.copy()}),E.renderEnd("scatter with line immediate"),b}var c=a.models.scatter(),d=a.models.axis(),e=a.models.axis(),f=a.models.legend(),g=a.models.distribution(),h=a.models.distribution(),i=a.models.tooltip(),j={top:30,right:20,bottom:50,left:75},k=null,l=null,m=null,n=a.utils.defaultColor(),o=c.xScale(),p=c.yScale(),q=!1,r=!1,s=!0,t=!0,u=!0,v=!1,w=a.utils.state(),x=null,y=d3.dispatch("stateChange","changeState","renderEnd"),z=null,A=250,B=!1;c.xScale(o).yScale(p),d.orient("bottom").tickPadding(10),e.orient(v?"right":"left").tickPadding(10),g.axis("x"),h.axis("y"),i.headerFormatter(function(a,b){return d.tickFormat()(a,b)}).valueFormatter(function(a,b){return e.tickFormat()(a,b)});var C,D,E=a.utils.renderWatch(y,A),F=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},G=function(a){return function(b){void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}};return b.dispatch=y,b.scatter=c,b.legend=f,b.xAxis=d,b.yAxis=e,b.distX=g,b.distY=h,b.tooltip=i,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return l},set:function(a){l=a}},container:{get:function(){return m},set:function(a){m=a}},showDistX:{get:function(){return q},set:function(a){q=a}},showDistY:{get:function(){return r},set:function(a){r=a}},showLegend:{get:function(){return s},set:function(a){s=a}},showXAxis:{get:function(){return t},set:function(a){t=a}},showYAxis:{get:function(){return u},set:function(a){u=a}},defaultState:{get:function(){return x},set:function(a){x=a}},noData:{get:function(){return z},set:function(a){z=a}},duration:{get:function(){return A},set:function(a){A=a}},showLabels:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return j},set:function(a){j.top=void 0!==a.top?a.top:j.top,j.right=void 0!==a.right?a.right:j.right,j.bottom=void 0!==a.bottom?a.bottom:j.bottom,j.left=void 0!==a.left?a.left:j.left}},rightAlignYAxis:{get:function(){return v},set:function(a){v=a,e.orient(a?"right":"left")}},color:{get:function(){return n},set:function(b){n=a.utils.getColor(b),f.color(n),g.color(n),h.color(n)}}}),a.utils.inheritOptions(b,c),a.utils.initOptions(b),b},a.models.sparkline=function(){"use strict";function b(k){return t.reset(),k.each(function(b){var k=h-g.left-g.right,s=i-g.top-g.bottom;j=d3.select(this),a.utils.initSVG(j),l.domain(c||d3.extent(b,n)).range(e||[0,k]),m.domain(d||d3.extent(b,o)).range(f||[s,0]);var t=j.selectAll("g.nv-wrap.nv-sparkline").data([b]),u=t.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");u.append("g"),t.select("g");t.attr("transform","translate("+g.left+","+g.top+")");var v=t.selectAll("path").data(function(a){return[a]});v.enter().append("path"),v.exit().remove(),v.style("stroke",function(a,b){return a.color||p(a,b)}).attr("d",d3.svg.line().x(function(a,b){return l(n(a,b))}).y(function(a,b){return m(o(a,b))}));var w=t.selectAll("circle.nv-point").data(function(a){function b(b){if(b!=-1){var c=a[b];return c.pointIndex=b,c}return null}var c=a.map(function(a,b){return o(a,b)}),d=b(c.lastIndexOf(m.domain()[1])),e=b(c.indexOf(m.domain()[0])),f=b(c.length-1);return[q?e:null,q?d:null,r?f:null].filter(function(a){return null!=a})});w.enter().append("circle"),w.exit().remove(),w.attr("cx",function(a,b){return l(n(a,a.pointIndex))}).attr("cy",function(a,b){return m(o(a,a.pointIndex))}).attr("r",2).attr("class",function(a,b){return n(a,a.pointIndex)==l.domain()[1]?"nv-point nv-currentValue":o(a,a.pointIndex)==m.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),t.renderEnd("sparkline immediate"),b}var c,d,e,f,g={top:2,right:0,bottom:2,left:0},h=400,i=32,j=null,k=!0,l=d3.scale.linear(),m=d3.scale.linear(),n=function(a){return a.x},o=function(a){return a.y},p=a.utils.getColor(["#000"]),q=!0,r=!0,s=d3.dispatch("renderEnd"),t=a.utils.renderWatch(s);return b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return h},set:function(a){h=a}},height:{get:function(){return i},set:function(a){i=a}},xDomain:{get:function(){return c},set:function(a){c=a}},yDomain:{get:function(){return d},set:function(a){d=a}},xRange:{get:function(){return e},set:function(a){e=a}},yRange:{get:function(){return f},set:function(a){f=a}},xScale:{get:function(){return l},set:function(a){l=a}},yScale:{get:function(){return m},set:function(a){m=a}},animate:{get:function(){return k},set:function(a){k=a}},showMinMaxPoints:{get:function(){return q},set:function(a){q=a}},showCurrentPoint:{get:function(){return r},set:function(a){r=a}},x:{get:function(){return n},set:function(a){n=d3.functor(a)}},y:{get:function(){return o},set:function(a){o=d3.functor(a)}},margin:{get:function(){return g},set:function(a){g.top=void 0!==a.top?a.top:g.top,g.right=void 0!==a.right?a.right:g.right,g.bottom=void 0!==a.bottom?a.bottom:g.bottom,g.left=void 0!==a.left?a.left:g.left}},color:{get:function(){return p},set:function(b){p=a.utils.getColor(b)}}}),b.dispatch=s,a.utils.initOptions(b),b},a.models.sparklinePlus=function(){"use strict";function b(p){return r.reset(),r.models(e),p.each(function(p){function q(){if(!j){var a=z.selectAll(".nv-hoverValue").data(i),b=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),a.attr("transform",function(a){return"translate("+c(e.x()(p[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),i.length&&(b.append("line").attr("x1",0).attr("y1",-f.top).attr("x2",0).attr("y2",u),b.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-f.top).attr("text-anchor","end").attr("dy",".9em"),z.select(".nv-hoverValue .nv-xValue").text(k(e.x()(p[i[0]],i[0]))),b.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-f.top).attr("text-anchor","start").attr("dy",".9em"),z.select(".nv-hoverValue .nv-yValue").text(l(e.y()(p[i[0]],i[0]))))}}function r(){function a(a,b){for(var c=Math.abs(e.x()(a[0],0)-b),d=0,f=0;f<a.length;f++)Math.abs(e.x()(a[f],f)-b)<c&&(c=Math.abs(e.x()(a[f],f)-b),d=f);return d}if(!j){var b=d3.mouse(this)[0]-f.left;i=[a(p,Math.round(c.invert(b)))],q()}}var s=d3.select(this);a.utils.initSVG(s);var t=a.utils.availableWidth(g,s,f),u=a.utils.availableHeight(h,s,f);if(b.update=function(){s.call(b)},b.container=this,!p||!p.length)return a.utils.noData(b,s),b;s.selectAll(".nv-noData").remove();var v=e.y()(p[p.length-1],p.length-1);c=e.xScale(),d=e.yScale();var w=s.selectAll("g.nv-wrap.nv-sparklineplus").data([p]),x=w.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),y=x.append("g"),z=w.select("g");y.append("g").attr("class","nv-sparklineWrap"),y.append("g").attr("class","nv-valueWrap"),y.append("g").attr("class","nv-hoverArea"),w.attr("transform","translate("+f.left+","+f.top+")");var A=z.select(".nv-sparklineWrap");if(e.width(t).height(u),A.call(e),m){var B=z.select(".nv-valueWrap"),C=B.selectAll(".nv-currentValue").data([v]);C.enter().append("text").attr("class","nv-currentValue").attr("dx",o?-8:8).attr("dy",".9em").style("text-anchor",o?"end":"start"),C.attr("x",t+(o?f.right:0)).attr("y",n?function(a){return d(a)}:0).style("fill",e.color()(p[p.length-1],p.length-1)).text(l(v))}y.select(".nv-hoverArea").append("rect").on("mousemove",r).on("click",function(){j=!j}).on("mouseout",function(){i=[],q()}),z.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-f.left+","+-f.top+")"}).attr("width",t+f.left+f.right).attr("height",u+f.top)}),r.renderEnd("sparklinePlus immediate"),b}var c,d,e=a.models.sparkline(),f={top:15,right:100,bottom:10,left:50},g=null,h=null,i=[],j=!1,k=d3.format(",r"),l=d3.format(",.2f"),m=!0,n=!0,o=!1,p=null,q=d3.dispatch("renderEnd"),r=a.utils.renderWatch(q);return b.dispatch=q,b.sparkline=e,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return h},set:function(a){h=a}},xTickFormat:{get:function(){return k},set:function(a){k=a}},yTickFormat:{get:function(){return l},set:function(a){l=a}},showLastValue:{get:function(){return m},set:function(a){m=a}},alignValue:{get:function(){return n},set:function(a){n=a}},rightAlignValue:{get:function(){return o},set:function(a){o=a}},noData:{get:function(){return p},set:function(a){p=a}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top,f.right=void 0!==a.right?a.right:f.right,f.bottom=void 0!==a.bottom?a.bottom:f.bottom,f.left=void 0!==a.left?a.left:f.left}}}),a.utils.inheritOptions(b,e),a.utils.initOptions(b),b},a.models.stackedArea=function(){"use strict";function b(n){return v.reset(),v.models(s),n.each(function(n){var t=f-e.left-e.right,w=g-e.top-e.bottom;j=d3.select(this),a.utils.initSVG(j),c=s.xScale(),d=s.yScale();var x=n;n.forEach(function(a,b){a.seriesIndex=b,a.values=a.values.map(function(a,c){return a.index=c,a.seriesIndex=b,a})});var y=n.filter(function(a){return!a.disabled});n=d3.layout.stack().order(p).offset(o).values(function(a){return a.values}).x(k).y(l).out(function(a,b,c){a.display={y:c,y0:b}})(y);var z=j.selectAll("g.nv-wrap.nv-stackedarea").data([n]),A=z.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),B=A.append("defs"),C=A.append("g"),D=z.select("g");C.append("g").attr("class","nv-areaWrap"),C.append("g").attr("class","nv-scatterWrap"),z.attr("transform","translate("+e.left+","+e.top+")"),0==s.forceY().length&&s.forceY().push(0),s.width(t).height(w).x(k).y(function(a){if(void 0!==a.display)return a.display.y+a.display.y0}).color(n.map(function(a,b){return a.color=a.color||h(a,a.seriesIndex),a.color}));var E=D.select(".nv-scatterWrap").datum(n);E.call(s),B.append("clipPath").attr("id","nv-edge-clip-"+i).append("rect"),z.select("#nv-edge-clip-"+i+" rect").attr("width",t).attr("height",w),D.attr("clip-path",r?"url(#nv-edge-clip-"+i+")":"");var F=d3.svg.area().defined(m).x(function(a,b){return c(k(a,b))}).y0(function(a){return d(a.display.y0)}).y1(function(a){return d(a.display.y+a.display.y0)}).interpolate(q),G=d3.svg.area().defined(m).x(function(a,b){return c(k(a,b))}).y0(function(a){return d(a.display.y0)}).y1(function(a){return d(a.display.y0)}),H=D.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});H.enter().append("path").attr("class",function(a,b){return"nv-area nv-area-"+b}).attr("d",function(a,b){return G(a.values,a.seriesIndex)}).on("mouseover",function(a,b){d3.select(this).classed("hover",!0),u.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1),u.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,b){d3.select(this).classed("hover",!1),u.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}),H.exit().remove(),H.style("fill",function(a,b){return a.color||h(a,a.seriesIndex)}).style("stroke",function(a,b){return a.color||h(a,a.seriesIndex)}),H.watchTransition(v,"stackedArea path").attr("d",function(a,b){return F(a.values,b)}),s.dispatch.on("elementMouseover.area",function(a){D.select(".nv-chart-"+i+" .nv-area-"+a.seriesIndex).classed("hover",!0)}),s.dispatch.on("elementMouseout.area",function(a){D.select(".nv-chart-"+i+" .nv-area-"+a.seriesIndex).classed("hover",!1)}),b.d3_stackedOffset_stackPercent=function(a){var b,c,d,e=a.length,f=a[0].length,g=[];for(c=0;c<f;++c){for(b=0,d=0;b<x.length;b++)d+=l(x[b].values[c]);if(d)for(b=0;b<e;b++)a[b][c][1]/=d;else for(b=0;b<e;b++)a[b][c][1]=0}for(c=0;c<f;++c)g[c]=0;return g}}),v.renderEnd("stackedArea immediate"),b}var c,d,e={top:0,right:0,bottom:0,left:0},f=960,g=500,h=a.utils.defaultColor(),i=Math.floor(1e5*Math.random()),j=null,k=function(a){return a.x},l=function(a){return a.y},m=function(a,b){return!isNaN(l(a,b))&&null!==l(a,b)},n="stack",o="zero",p="default",q="linear",r=!1,s=a.models.scatter(),t=250,u=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");s.pointSize(2.2).pointDomain([2.2,2.2]);var v=a.utils.renderWatch(u,t);return b.dispatch=u,b.scatter=s,s.dispatch.on("elementClick",function(){u.elementClick.apply(this,arguments)}),s.dispatch.on("elementMouseover",function(){u.elementMouseover.apply(this,arguments)}),s.dispatch.on("elementMouseout",function(){u.elementMouseout.apply(this,arguments)}),b.interpolate=function(a){return arguments.length?(q=a,b):q},b.duration=function(a){return arguments.length?(t=a,v.reset(t),s.duration(t),b):t},b.dispatch=u,b.scatter=s,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return g},set:function(a){g=a}},defined:{get:function(){return m},set:function(a){m=a}},clipEdge:{get:function(){return r},set:function(a){r=a}},offset:{get:function(){return o},set:function(a){o=a}},order:{get:function(){return p},set:function(a){p=a}},interpolate:{get:function(){return q},set:function(a){q=a}},x:{get:function(){return k},set:function(a){k=d3.functor(a)}},y:{get:function(){return l},set:function(a){l=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top,e.right=void 0!==a.right?a.right:e.right,e.bottom=void 0!==a.bottom?a.bottom:e.bottom,e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return h},set:function(b){h=a.utils.getColor(b)}},style:{get:function(){return n},set:function(a){switch(n=a){case"stack":b.offset("zero"),b.order("default");break;case"stream":b.offset("wiggle"),b.order("inside-out");break;case"stream-center":b.offset("silhouette"),b.order("inside-out");break;case"expand":b.offset("expand"),b.order("default");break;case"stack_percent":b.offset(b.d3_stackedOffset_stackPercent),b.order("default")}}},duration:{get:function(){return t},set:function(a){t=a,v.reset(t),s.duration(t)}}}),a.utils.inheritOptions(b,s),a.utils.initOptions(b),b},a.models.stackedAreaChart=function(){"use strict";function b(k){return J.reset(),J.models(e),s&&J.models(f),t&&J.models(g),k.each(function(k){function B(){s&&V.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+R+")").transition().duration(G).call(f)}function J(){if(t){if("expand"===e.style()||"stack_percent"===e.style()){var a=g.tickFormat();H&&a===N||(H=a),g.tickFormat(N)}else H&&(g.tickFormat(H),H=null);V.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(g)}}function O(a){var b=V.select(".nv-focus .nv-stackedWrap").datum(k.filter(function(a){return!a.disabled}).map(function(b,c){return{key:b.key,area:b.area,classed:b.classed,values:b.values.filter(function(b,c){return e.x()(b,c)>=a[0]&&e.x()(b,c)<=a[1]}),disableTooltip:b.disableTooltip}}));b.transition().duration(G).call(e),B(),J()}var P=d3.select(this);a.utils.initSVG(P);var Q=a.utils.availableWidth(n,P,m),R=a.utils.availableHeight(o,P,m)-(v?l.height():0);if(b.update=function(){P.transition().duration(G).call(b)},b.container=this,z.setter(M(k),b.update).getter(L(k)).update(),z.disabled=k.map(function(a){return!!a.disabled}),!A){var S;A={};for(S in z)z[S]instanceof Array?A[S]=z[S].slice(0):A[S]=z[S]}if(!(k&&k.length&&k.filter(function(a){return a.values.length}).length))return a.utils.noData(b,P),b;P.selectAll(".nv-noData").remove(),c=e.xScale(),d=e.yScale();var T=P.selectAll("g.nv-wrap.nv-stackedAreaChart").data([k]),U=T.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),V=T.select("g");U.append("g").attr("class","nv-legendWrap"),U.append("g").attr("class","nv-controlsWrap");var W=U.append("g").attr("class","nv-focus");W.append("g").attr("class","nv-background").append("rect"),W.append("g").attr("class","nv-x nv-axis"),W.append("g").attr("class","nv-y nv-axis"),W.append("g").attr("class","nv-stackedWrap"),W.append("g").attr("class","nv-interactive");U.append("g").attr("class","nv-focusWrap");if(r){var X=q?Q-D:Q;h.width(X),V.select(".nv-legendWrap").datum(k).call(h),h.height()>m.top&&(m.top=h.height(),R=a.utils.availableHeight(o,P,m)-(v?l.height():0)),V.select(".nv-legendWrap").attr("transform","translate("+(Q-X)+","+-m.top+")")}else V.select(".nv-legendWrap").selectAll("*").remove();if(q){var Y=[{key:F.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=e.style(),style:"stack"},{key:F.stream||"Stream",metaKey:"Stream",disabled:"stream"!=e.style(),style:"stream"},{key:F.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=e.style(),style:"expand"},{key:F.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=e.style(),style:"stack_percent"}];D=E.length/3*260,Y=Y.filter(function(a){return E.indexOf(a.metaKey)!==-1}),i.width(D).color(["#444","#444","#444"]),V.select(".nv-controlsWrap").datum(Y).call(i),Math.max(i.height(),h.height())>m.top&&(m.top=Math.max(i.height(),h.height()),R=a.utils.availableHeight(o,P,m)),V.select(".nv-controlsWrap").attr("transform","translate(0,"+-m.top+")")}else V.select(".nv-controlsWrap").selectAll("*").remove();T.attr("transform","translate("+m.left+","+m.top+")"),u&&V.select(".nv-y.nv-axis").attr("transform","translate("+Q+",0)"),w&&(j.width(Q).height(R).margin({left:m.left,top:m.top}).svgContainer(P).xScale(c),T.select(".nv-interactive").call(j)),V.select(".nv-focus .nv-background rect").attr("width",Q).attr("height",R),e.width(Q).height(R).color(k.map(function(a,b){return a.color||p(a,b)}).filter(function(a,b){return!k[b].disabled}));var Z=V.select(".nv-focus .nv-stackedWrap").datum(k.filter(function(a){return!a.disabled}));if(s&&f.scale(c)._ticks(a.utils.calcTicksX(Q/100,k)).tickSize(-R,0),t){var $;$="wiggle"===e.offset()?0:a.utils.calcTicksY(R/36,k),g.scale(d)._ticks($).tickSize(-Q,0)}if(v){l.width(Q),V.select(".nv-focusWrap").attr("transform","translate(0,"+(R+m.bottom+l.margin().top)+")").datum(k.filter(function(a){return!a.disabled})).call(l);var _=l.brush.empty()?l.xDomain():l.brush.extent();null!==_&&O(_)}else Z.transition().call(e),B(),J();e.dispatch.on("areaClick.toggle",function(a){1===k.filter(function(a){return!a.disabled}).length?k.forEach(function(a){a.disabled=!1}):k.forEach(function(b,c){b.disabled=c!=a.seriesIndex}),z.disabled=k.map(function(a){return!!a.disabled}),C.stateChange(z),b.update()}),h.dispatch.on("stateChange",function(a){for(var c in a)z[c]=a[c];C.stateChange(z),b.update()}),i.dispatch.on("legendClick",function(a,c){a.disabled&&(Y=Y.map(function(a){return a.disabled=!0,a}),a.disabled=!1,e.style(a.style),z.style=e.style(),C.stateChange(z),b.update())}),j.dispatch.on("elementMousemove",function(c){e.clearHighlights();var d,f,g,h=[],i=0,l=!0;if(k.filter(function(a,b){return a.seriesIndex=b,!a.disabled}).forEach(function(j,k){f=a.interactiveBisect(j.values,c.pointXValue,b.x());var m=j.values[f],n=b.y()(m,f);if(null!=n&&e.highlightPoint(k,f,!0),"undefined"!=typeof m){"undefined"==typeof d&&(d=m),"undefined"==typeof g&&(g=b.xScale()(b.x()(m,f)));var o="expand"==e.style()?m.display.y:b.y()(m,f);h.push({key:j.key,value:o,color:p(j,j.seriesIndex),point:m}),x&&"expand"!=e.style()&&null!=o&&(i+=o,l=!1)}}),h.reverse(),h.length>2){var m=b.yScale().invert(c.mouseY),n=null;h.forEach(function(a,b){m=Math.abs(m);var c=Math.abs(a.point.display.y0),d=Math.abs(a.point.display.y);if(m>=c&&m<=d+c)return void(n=b)}),null!=n&&(h[n].highlight=!0)}x&&"expand"!=e.style()&&h.length>=2&&!l&&h.push({key:y,value:i,total:!0});var o=b.x()(d,f),q=j.tooltip.valueFormatter();"expand"===e.style()||"stack_percent"===e.style()?(I||(I=q),q=d3.format(".1%")):I&&(q=I,I=null),j.tooltip.valueFormatter(q).data({value:o,series:h})(),j.renderGuideLine(g)}),j.dispatch.on("elementMouseout",function(a){e.clearHighlights()}),l.dispatch.on("onBrush",function(a){O(a)}),C.on("changeState",function(a){"undefined"!=typeof a.disabled&&k.length===a.disabled.length&&(k.forEach(function(b,c){b.disabled=a.disabled[c]}),z.disabled=a.disabled),"undefined"!=typeof a.style&&(e.style(a.style),K=a.style),b.update()})}),J.renderEnd("stacked Area chart immediate"),b}var c,d,e=a.models.stackedArea(),f=a.models.axis(),g=a.models.axis(),h=a.models.legend(),i=a.models.legend(),j=a.interactiveGuideline(),k=a.models.tooltip(),l=a.models.focus(a.models.stackedArea()),m={top:30,right:25,bottom:50,left:60},n=null,o=null,p=a.utils.defaultColor(),q=!0,r=!0,s=!0,t=!0,u=!1,v=!1,w=!1,x=!0,y="TOTAL",z=a.utils.state(),A=null,B=null,C=d3.dispatch("stateChange","changeState","renderEnd"),D=250,E=["Stacked","Stream","Expanded"],F={},G=250;z.style=e.style(),f.orient("bottom").tickPadding(7),g.orient(u?"right":"left"),k.headerFormatter(function(a,b){return f.tickFormat()(a,b)}).valueFormatter(function(a,b){return g.tickFormat()(a,b)}),j.tooltip.headerFormatter(function(a,b){return f.tickFormat()(a,b)}).valueFormatter(function(a,b){return null==a?"N/A":g.tickFormat()(a,b)});var H=null,I=null;i.updateState(!1);var J=a.utils.renderWatch(C),K=e.style(),L=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),style:e.style()}}},M=function(a){return function(b){void 0!==b.style&&(K=b.style),void 0!==b.active&&a.forEach(function(a,c){a.disabled=!b.active[c]})}},N=d3.format("%");return e.dispatch.on("elementMouseover.tooltip",function(a){a.point.x=e.x()(a.point),a.point.y=e.y()(a.point),k.data(a).hidden(!1)}),e.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)}),b.dispatch=C,b.stacked=e,b.legend=h,b.controls=i,b.xAxis=f,b.x2Axis=l.xAxis,b.yAxis=g,b.y2Axis=l.yAxis,b.interactiveLayer=j,b.tooltip=k,b.focus=l,b.dispatch=C,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return n},set:function(a){n=a}},height:{get:function(){return o},set:function(a){o=a}},showLegend:{get:function(){return r},set:function(a){r=a}},showXAxis:{get:function(){return s},set:function(a){s=a}},showYAxis:{get:function(){return t},set:function(a){t=a}},defaultState:{get:function(){return A},set:function(a){A=a}},noData:{get:function(){return B},set:function(a){B=a}},showControls:{get:function(){return q},set:function(a){q=a}},controlLabels:{get:function(){return F},set:function(a){F=a}},controlOptions:{get:function(){return E},set:function(a){E=a}},showTotalInTooltip:{get:function(){return x},set:function(a){x=a}},totalLabel:{get:function(){return y},set:function(a){y=a}},focusEnable:{get:function(){return v},set:function(a){v=a}},focusHeight:{get:function(){return l.height()},set:function(a){l.height(a)}},brushExtent:{get:function(){return l.brushExtent()},set:function(a){l.brushExtent(a)}},margin:{get:function(){return m},set:function(a){m.top=void 0!==a.top?a.top:m.top,m.right=void 0!==a.right?a.right:m.right,m.bottom=void 0!==a.bottom?a.bottom:m.bottom,m.left=void 0!==a.left?a.left:m.left}},focusMargin:{get:function(){return l.margin},set:function(a){l.margin.top=void 0!==a.top?a.top:l.margin.top,l.margin.right=void 0!==a.right?a.right:l.margin.right,l.margin.bottom=void 0!==a.bottom?a.bottom:l.margin.bottom,l.margin.left=void 0!==a.left?a.left:l.margin.left}},duration:{get:function(){return G},set:function(a){G=a,J.reset(G),e.duration(G),f.duration(G),g.duration(G)}},color:{get:function(){return p},set:function(b){p=a.utils.getColor(b),h.color(p),e.color(p),l.color(p)}},x:{get:function(){return e.x()},set:function(a){e.x(a),l.x(a)}},y:{get:function(){return e.y()},set:function(a){e.y(a),l.y(a)}},rightAlignYAxis:{get:function(){return u},set:function(a){u=a,g.orient(u?"right":"left")}},useInteractiveGuideline:{get:function(){return w},set:function(a){w=!!a,b.interactive(!a),b.useVoronoi(!a),e.scatter.interactive(!a)}}}),a.utils.inheritOptions(b,e),a.utils.initOptions(b),b},a.models.stackedAreaWithFocusChart=function(){return a.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)},a.models.sunburst=function(){"use strict";function b(a){var b=c(a);return b>90?180:0}function c(a){var b=Math.max(0,Math.min(2*Math.PI,F(a.x))),c=Math.max(0,Math.min(2*Math.PI,F(a.x+a.dx))),d=(b+c)/2*(180/Math.PI)-90;return d}function d(a){var b=Math.max(0,Math.min(2*Math.PI,F(a.x))),c=Math.max(0,Math.min(2*Math.PI,F(a.x+a.dx)));return(c-b)/(2*Math.PI)}function e(a){var b=Math.max(0,Math.min(2*Math.PI,F(a.x))),c=Math.max(0,Math.min(2*Math.PI,F(a.x+a.dx))),d=c-b;return d>z}function f(a,b){var c=d3.interpolate(F.domain(),[l.x,l.x+l.dx]),d=d3.interpolate(G.domain(),[l.y,1]),e=d3.interpolate(G.range(),[l.y?20:0,o]);return 0===b?function(){return J(a)}:function(b){return F.domain(c(b)),G.domain(d(b)).range(e(b)),J(a)}}function g(a){var b=d3.interpolate({x:a.x0,dx:a.dx0,y:a.y0,dy:a.dy0},a);return function(c){var d=b(c);return a.x0=d.x,a.dx0=d.dx,a.y0=d.y,a.dy0=d.dy,J(d)}}function h(a){var b=B(a);I[b]||(I[b]={});var c=I[b];c.dx=a.dx,c.x=a.x,c.dy=a.dy,c.y=a.y}function i(a){a.forEach(function(a){var b=B(a),c=I[b];c?(a.dx0=c.dx,a.x0=c.x,a.dy0=c.dy,a.y0=c.y):(a.dx0=a.dx,a.x0=a.x,a.dy0=a.dy,a.y0=a.y),h(a)})}function j(a){var d=v.selectAll("text"),g=v.selectAll("path");d.transition().attr("opacity",0),l=a,g.transition().duration(D).attrTween("d",f).each("end",function(d){if(d.x>=a.x&&d.x<a.x+a.dx&&d.depth>=a.depth){var f=d3.select(this.parentNode),g=f.select("text");g.transition().duration(D).text(function(a){return y(a)}).attr("opacity",function(a){return e(a)?1:0}).attr("transform",function(){var e=this.getBBox().width;if(0===d.depth)return"translate("+e/2*-1+",0)";if(d.depth===a.depth)return"translate("+(G(d.y)+5)+",0)";var f=c(d),g=b(d);return 0===g?"rotate("+f+")translate("+(G(d.y)+5)+",0)":"rotate("+f+")translate("+(G(d.y)+e+5)+",0)rotate("+g+")"})}})}function k(f){return K.reset(),f.each(function(f){v=d3.select(this),m=a.utils.availableWidth(q,v,p),n=a.utils.availableHeight(r,v,p),o=Math.min(m,n)/2,G.range([0,o]);var h=v.select("g.nvd3.nv-wrap.nv-sunburst");h[0][0]?h.attr("transform","translate("+(m/2+p.left+p.right)+","+(n/2+p.top+p.bottom)+")"):h=v.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+u).attr("transform","translate("+(m/2+p.left+p.right)+","+(n/2+p.top+p.bottom)+")"),v.on("click",function(a,b){E.chartClick({data:a,index:b,pos:d3.event,id:u})}),H.value(t[s]||t.count);var k=H.nodes(f[0]).reverse();i(k);var l=h.selectAll(".arc-container").data(k,B),z=l.enter().append("g").attr("class","arc-container");z.append("path").attr("d",J).style("fill",function(a){return a.color?a.color:w(C?(a.children?a:a.parent).name:a.name)}).style("stroke","#FFF").on("click",j).on("mouseover",function(a,b){d3.select(this).classed("hover",!0).style("opacity",.8),E.elementMouseover({data:a,color:d3.select(this).style("fill"),percent:d(a)})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1).style("opacity",1),E.elementMouseout({data:a})}).on("mousemove",function(a,b){E.elementMousemove({data:a})}),l.each(function(a){d3.select(this).select("path").transition().duration(D).attrTween("d",g)}),x&&(l.selectAll("text").remove(),l.append("text").text(function(a){return y(a)}).transition().duration(D).attr("opacity",function(a){
return e(a)?1:0}).attr("transform",function(a){var d=this.getBBox().width;if(0===a.depth)return"rotate(0)translate("+d/2*-1+",0)";var e=c(a),f=b(a);return 0===f?"rotate("+e+")translate("+(G(a.y)+5)+",0)":"rotate("+e+")translate("+(G(a.y)+d+5)+",0)rotate("+f+")"})),j(k[k.length-1]),l.exit().transition().duration(D).attr("opacity",0).each("end",function(a){var b=B(a);I[b]=void 0}).remove()}),K.renderEnd("sunburst immediate"),k}var l,m,n,o,p={top:0,right:0,bottom:0,left:0},q=600,r=600,s="count",t={count:function(a){return 1},value:function(a){return a.value||a.size},size:function(a){return a.value||a.size}},u=Math.floor(1e4*Math.random()),v=null,w=a.utils.defaultColor(),x=!1,y=function(a){return"count"===s?a.name+" #"+a.value:a.name+" "+(a.value||a.size)},z=.02,A=function(a,b){return a.name>b.name},B=function(a,b){return a.name},C=!0,D=500,E=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),F=d3.scale.linear().range([0,2*Math.PI]),G=d3.scale.sqrt(),H=d3.layout.partition().sort(A),I={},J=d3.svg.arc().startAngle(function(a){return Math.max(0,Math.min(2*Math.PI,F(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,F(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,G(a.y))}).outerRadius(function(a){return Math.max(0,G(a.y+a.dy))}),K=a.utils.renderWatch(E);return k.dispatch=E,k.options=a.utils.optionsFunc.bind(k),k._options=Object.create({},{width:{get:function(){return q},set:function(a){q=a}},height:{get:function(){return r},set:function(a){r=a}},mode:{get:function(){return s},set:function(a){s=a}},id:{get:function(){return u},set:function(a){u=a}},duration:{get:function(){return D},set:function(a){D=a}},groupColorByParent:{get:function(){return C},set:function(a){C=!!a}},showLabels:{get:function(){return x},set:function(a){x=!!a}},labelFormat:{get:function(){return y},set:function(a){y=a}},labelThreshold:{get:function(){return z},set:function(a){z=a}},sort:{get:function(){return A},set:function(a){A=a}},key:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return p},set:function(a){p.top=void 0!=a.top?a.top:p.top,p.right=void 0!=a.right?a.right:p.right,p.bottom=void 0!=a.bottom?a.bottom:p.bottom,p.left=void 0!=a.left?a.left:p.left}},color:{get:function(){return w},set:function(b){w=a.utils.getColor(b)}}}),a.utils.initOptions(k),k},a.models.sunburstChart=function(){"use strict";function b(d){return n.reset(),n.models(c),d.each(function(d){var h=d3.select(this);a.utils.initSVG(h);var i=a.utils.availableWidth(f,h,e),j=a.utils.availableHeight(g,h,e);return b.update=function(){0===l?h.call(b):h.transition().duration(l).call(b)},b.container=h,d&&d.length?(h.selectAll(".nv-noData").remove(),c.width(i).height(j).margin(e),void h.call(c)):(a.utils.noData(b,h),b)}),n.renderEnd("sunburstChart immediate"),b}var c=a.models.sunburst(),d=a.models.tooltip(),e={top:30,right:20,bottom:20,left:20},f=null,g=null,h=a.utils.defaultColor(),i=!1,j=(Math.round(1e5*Math.random()),null),k=null,l=250,m=d3.dispatch("stateChange","changeState","renderEnd"),n=a.utils.renderWatch(m);return d.duration(0).headerEnabled(!1).valueFormatter(function(a){return a}),c.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.data.name,value:a.data.value||a.data.size,color:a.color,percent:a.percent},i||(delete a.percent,delete a.series.percent),d.data(a).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(a){d.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(a){d()}),b.dispatch=m,b.sunburst=c,b.tooltip=d,b.options=a.utils.optionsFunc.bind(b),b._options=Object.create({},{noData:{get:function(){return k},set:function(a){k=a}},defaultState:{get:function(){return j},set:function(a){j=a}},showTooltipPercent:{get:function(){return i},set:function(a){i=a}},color:{get:function(){return h},set:function(a){h=a,c.color(h)}},duration:{get:function(){return l},set:function(a){l=a,n.reset(l),c.duration(l)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top,e.right=void 0!==a.right?a.right:e.right,e.bottom=void 0!==a.bottom?a.bottom:e.bottom,e.left=void 0!==a.left?a.left:e.left,c.margin(e)}}}),a.utils.inheritOptions(b,c),a.utils.initOptions(b),b},a.version="1.8.4"}(),function(a){"use strict";var b=a.nv;"undefined"!=typeof exports&&(b=require("nvd3")),angular.module("nvd3",[]).directive("nvd3",["nvd3Utils",function(a){return{restrict:"AE",scope:{data:"=",options:"=",api:"=?",events:"=?",config:"=?",onReady:"&?"},link:function(c,d,e){function f(a,b,d){a&&b&&angular.forEach(a,function(e,h){"_"===h[0]||("dispatch"===h?(void 0!==b[h]&&null!==b[h]||c._config.extended&&(b[h]={}),g(e,b[h])):"tooltip"===h?(void 0!==b[h]&&null!==b[h]||c._config.extended&&(b[h]={}),f(a[h],b[h],d)):"contentGenerator"===h?b[h]&&a[h](b[h]):["axis","clearHighlights","defined","highlightPoint","nvPointerEventsClass","options","rangeBand","rangeBands","scatter","open","close","node"].indexOf(h)===-1&&(void 0===b[h]||null===b[h]?c._config.extended&&(b[h]=e()):a[h](b[h])))})}function g(a,b){a&&b&&angular.forEach(a,function(d,e){void 0===b[e]||null===b[e]?c._config.extended&&(b[e]=d.on):a.on(e+"._",b[e])})}function h(b){var e=a.deepExtend(j(b),c.options[b]||{});c._config.extended&&(c.options[b]=e);var f=angular.element("<div></div>").html(e.html||"").addClass(b).addClass(e.className).removeAttr("style").css(e.css);e.html||f.text(e.text),e.enable&&("title"===b?d.prepend(f):"subtitle"===b?angular.element(d[0].querySelector(".title")).after(f):"caption"===b&&d.append(f))}function i(){var b=a.deepExtend(k(),c.options.styles||{});c._config.extended&&(c.options.styles=b),angular.forEach(b.classes,function(a,b){a?d.addClass(b):d.removeClass(b)}),d.removeAttr("style").css(b.css)}function j(a){switch(a){case"title":return{enable:!1,text:"Write Your Title",className:"h4",css:{width:c.options.chart.width+"px",textAlign:"center"}};case"subtitle":return{enable:!1,text:"Write Your Subtitle",css:{width:c.options.chart.width+"px",textAlign:"center"}};case"caption":return{enable:!1,text:"Figure 1. Write Your Caption text.",css:{width:c.options.chart.width+"px",textAlign:"center"}}}}function k(){return{classes:{"with-3d-shadow":!0,"with-transitions":!0,gallery:!1},css:{}}}function l(a,b){a!==b&&(c._config.disabled||(c._config.refreshDataOnly?c.api.update():c.api.refresh()))}var m={extended:!1,visible:!0,disabled:!1,refreshDataOnly:!0,deepWatchOptions:!0,deepWatchData:!0,deepWatchDataDepth:2,debounce:10,debounceImmediate:!0};c.isReady=!1,c._config=angular.extend(m,c.config),c.api={refresh:function(){c.api.updateWithOptions(),c.isReady=!0},refreshWithTimeout:function(a){setTimeout(function(){c.api.refresh()},a)},update:function(){c.chart&&c.svg?"sunburstChart"===c.options.chart.type?c.svg.datum(angular.copy(c.data)).call(c.chart):c.svg.datum(c.data).call(c.chart):c.api.refresh()},updateWithTimeout:function(a){setTimeout(function(){c.api.update()},a)},updateWithOptions:function(d){if(arguments.length){if(c.options=d,c._config.deepWatchOptions&&!c._config.disabled)return}else d=c.options;c.api.clearElement(),angular.isDefined(d)!==!1&&c._config.visible&&(c.chart=b.models[d.chart.type](),c.chart.id=Math.random().toString(36).substr(2,15),angular.forEach(c.chart,function(a,b){"_"===b[0]||["clearHighlights","highlightPoint","id","options","resizeHandler","state","open","close","tooltipContent"].indexOf(b)>=0||("dispatch"===b?(void 0!==d.chart[b]&&null!==d.chart[b]||c._config.extended&&(d.chart[b]={}),g(c.chart[b],d.chart[b])):["bars","bars1","bars2","boxplot","bullet","controls","discretebar","distX","distY","focus","interactiveLayer","legend","lines","lines1","lines2","multibar","pie","scatter","scatters1","scatters2","sparkline","stack1","stack2","sunburst","tooltip","x2Axis","xAxis","y1Axis","y2Axis","y3Axis","y4Axis","yAxis","yAxis1","yAxis2"].indexOf(b)>=0||"stacked"===b&&"stackedAreaChart"===d.chart.type?(void 0!==d.chart[b]&&null!==d.chart[b]||c._config.extended&&(d.chart[b]={}),f(c.chart[b],d.chart[b],d.chart.type)):"focusHeight"===b&&"lineChart"===d.chart.type||"focusHeight"===b&&"lineWithFocusChart"===d.chart.type||("xTickFormat"!==b&&"yTickFormat"!==b||"lineWithFocusChart"!==d.chart.type)&&("tooltips"===b&&"boxPlotChart"===d.chart.type||("tooltipXContent"!==b&&"tooltipYContent"!==b||"scatterChart"!==d.chart.type)&&("x"!==b&&"y"!==b||"forceDirectedGraph"!==d.chart.type)&&(void 0===d.chart[b]||null===d.chart[b]?c._config.extended&&("barColor"===b?d.chart[b]=a()():d.chart[b]=a()):c.chart[b](d.chart[b]))))}),c.api.updateWithData(),(d.title||c._config.extended)&&h("title"),(d.subtitle||c._config.extended)&&h("subtitle"),(d.caption||c._config.extended)&&h("caption"),(d.styles||c._config.extended)&&i(),b.addGraph(function(){if(c.chart)return c.chart.resizeHandler&&c.chart.resizeHandler.clear(),c.chart.resizeHandler=b.utils.windowResize(function(){c.chart&&c.chart.update&&c.chart.update()}),void 0!==d.chart.zoom&&["scatterChart","lineChart","candlestickBarChart","cumulativeLineChart","historicalBarChart","ohlcBarChart","stackedAreaChart"].indexOf(d.chart.type)>-1&&a.zoom(c,d),c.chart},d.chart.callback))},updateWithData:function(a){if(arguments.length){if(c.data=a,c._config.deepWatchData&&!c._config.disabled)return}else a="sunburstChart"===c.options.chart.type?angular.copy(c.data):c.data;if(a){d3.select(d[0]).select("svg").remove();var b,e;c.svg=d3.select(d[0]).insert("svg",".caption"),(b=c.options.chart.height)&&(isNaN(+b)||(b+="px"),c.svg.attr("height",b).style({height:b})),(e=c.options.chart.width)?(isNaN(+e)||(e+="px"),c.svg.attr("width",e).style({width:e})):c.svg.attr("width","100%").style({width:"100%"}),c.svg.datum(a).call(c.chart),c.chart&&c.chart.zoomRender&&c.chart.zoomRender()}},clearElement:function(){if(d.find(".title").remove(),d.find(".subtitle").remove(),d.find(".caption").remove(),d.empty(),c.chart&&c.chart.tooltip&&c.chart.tooltip.id&&d3.select("#"+c.chart.tooltip.id()).remove(),b.graphs&&c.chart)for(var a=b.graphs.length-1;a>=0;a--)b.graphs[a]&&b.graphs[a].id===c.chart.id&&b.graphs.splice(a,1);b.tooltip&&b.tooltip.cleanup&&b.tooltip.cleanup(),c.chart&&c.chart.resizeHandler&&c.chart.resizeHandler.clear(),c.chart=null},getScope:function(){return c},getElement:function(){return d}},c._config.deepWatchOptions&&c.$watch("options",a.debounce(function(a){c._config.disabled||c.api.refresh()},c._config.debounce,c._config.debounceImmediate),!0),c._config.deepWatchData&&(1===c._config.deepWatchDataDepth?c.$watchCollection("data",l):c.$watch("data",l,2===c._config.deepWatchDataDepth)),c.$watch("config",function(a,b){a!==b&&(c._config=angular.extend(m,a),c.api.refresh())},!0),c._config.deepWatchOptions||c._config.deepWatchData||c.api.refresh(),angular.forEach(c.events,function(a,b){c.$on(b,function(b,d){return a(b,c,d)})}),d.on("$destroy",function(){c.api.clearElement()}),c.$watch("isReady",function(a){a&&c.onReady&&"function"==typeof c.onReady()&&c.onReady()(c,d)})}}}]).factory("nvd3Utils",function(){return{debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},deepExtend:function(a){var b=this;return angular.forEach(arguments,function(c){c!==a&&angular.forEach(c,function(c,d){a[d]&&a[d].constructor&&a[d].constructor===Object?b.deepExtend(a[d],c):a[d]=c})}),a},zoom:function(a,b){var c=b.chart.zoom,d="undefined"==typeof c.enabled||null===c.enabled||c.enabled;if(d){var e,f,g,h,i,j=a.chart.xAxis.scale(),k=a.chart.yAxis.scale(),l=a.chart.xDomain||j.domain,m=a.chart.yDomain||k.domain,n=j.domain().slice(),o=k.domain().slice(),p=c.scale||1,q=c.translate||[0,0],r=c.scaleExtent||[1,10],s=c.useFixedDomain||!1,t=c.useNiceScale||!1,u=c.horizontalOff||!1,v=c.verticalOff||!1,w=c.unzoomEventType||"dblclick.zoom";t&&(j.nice(),k.nice()),e=function(a,b){return a[0]=Math.min(Math.max(a[0],b[0]),b[1]-b[1]/r[1]),a[1]=Math.max(b[0]+b[1]/r[1],Math.min(a[1],b[1])),a},g=function(){if(void 0!==c.zoomed){var b=c.zoomed(j.domain(),k.domain());u||l([b.x1,b.x2]),v||m([b.y1,b.y2])}else u||l(s?e(j.domain(),n):j.domain()),v||m(s?e(k.domain(),o):k.domain());a.chart&&a.chart.update()},h=function(){if(void 0!==c.unzoomed){var b=c.unzoomed(j.domain(),k.domain());u||l([b.x1,b.x2]),v||m([b.y1,b.y2])}else u||l(n),v||m(o);f.scale(p).translate(q),a.chart&&a.chart.update()},i=function(){void 0!==c.zoomend&&c.zoomend()},f=d3.behavior.zoom().x(j).y(k).scaleExtent(r).on("zoom",g).on("zoomend",i),a.svg&&(a.svg.call(f),f.scale(p).translate(q).event(a.svg),"none"!==w&&a.svg.on(w,h)),a.chart&&(a.chart.zoomRender=function(){f.scale(p).translate(q),j=a.chart.xAxis.scale(),k=a.chart.yAxis.scale(),l=a.chart.xDomain||j.domain,m=a.chart.yDomain||k.domain,n=j.domain().slice(),o=k.domain().slice(),f.x(j).y(k),a.svg.call(f),"none"!==w&&a.svg.on(w,h)})}}}})}(window),function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(this,function(a){!function(a){"use strict";function b(b){var c=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return a.each(c,function(){b=b.replace(this.re,this.ch)}),b}function c(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c="(?:"+Object.keys(b).join("|")+")",d=new RegExp(c),e=new RegExp(c,"g"),f=null==a?"":""+a;return d.test(f)?f.replace(e,function(a){return b[a]}):f}function d(b,c){var d=arguments,f=b,g=c;[].shift.apply(d);var h,i=this.each(function(){var b=a(this);if(b.is("select")){var c=b.data("selectpicker"),i="object"==typeof f&&f;if(c){if(i)for(var j in i)i.hasOwnProperty(j)&&(c.options[j]=i[j])}else{var k=a.extend({},e.DEFAULTS,a.fn.selectpicker.defaults||{},b.data(),i);k.template=a.extend({},e.DEFAULTS.template,a.fn.selectpicker.defaults?a.fn.selectpicker.defaults.template:{},b.data().template,i.template),b.data("selectpicker",c=new e(this,k,g))}"string"==typeof f&&(h=c[f]instanceof Function?c[f].apply(c,d):c.options[f])}});return"undefined"!=typeof h?h:i}String.prototype.includes||!function(){var a={}.toString,b=function(){try{var a={},b=Object.defineProperty,c=b(a,a,a)&&b}catch(d){}return c}(),c="".indexOf,d=function(b){if(null==this)throw new TypeError;var d=String(this);if(b&&"[object RegExp]"==a.call(b))throw new TypeError;var e=d.length,f=String(b),g=f.length,h=arguments.length>1?arguments[1]:void 0,i=h?Number(h):0;i!=i&&(i=0);var j=Math.min(Math.max(i,0),e);return!(g+j>e)&&c.call(d,f,i)!=-1};b?b(String.prototype,"includes",{value:d,configurable:!0,writable:!0}):String.prototype.includes=d}(),String.prototype.startsWith||!function(){var a=function(){try{var a={},b=Object.defineProperty,c=b(a,a,a)&&b}catch(d){}return c}(),b={}.toString,c=function(a){if(null==this)throw new TypeError;var c=String(this);if(a&&"[object RegExp]"==b.call(a))throw new TypeError;var d=c.length,e=String(a),f=e.length,g=arguments.length>1?arguments[1]:void 0,h=g?Number(g):0;h!=h&&(h=0);var i=Math.min(Math.max(h,0),d);if(f+i>d)return!1;for(var j=-1;++j<f;)if(c.charCodeAt(i+j)!=e.charCodeAt(j))return!1;return!0};a?a(String.prototype,"startsWith",{value:c,configurable:!0,writable:!0}):String.prototype.startsWith=c}(),Object.keys||(Object.keys=function(a,b,c){c=[];for(b in a)c.hasOwnProperty.call(a,b)&&c.push(b);return c}),a.fn.triggerNative=function(a){var b,c=this[0];c.dispatchEvent?("function"==typeof Event?b=new Event(a,{bubbles:!0}):(b=document.createEvent("Event"),b.initEvent(a,!0,!1)),c.dispatchEvent(b)):(c.fireEvent&&(b=document.createEventObject(),b.eventType=a,c.fireEvent("on"+a,b)),this.trigger(a))},a.expr[":"].icontains=function(b,c,d){var e=a(b),f=(e.data("tokens")||e.text()).toUpperCase();return f.includes(d[3].toUpperCase())},a.expr[":"].ibegins=function(b,c,d){var e=a(b),f=(e.data("tokens")||e.text()).toUpperCase();return f.startsWith(d[3].toUpperCase())},a.expr[":"].aicontains=function(b,c,d){var e=a(b),f=(e.data("tokens")||e.data("normalizedText")||e.text()).toUpperCase();return f.includes(d[3].toUpperCase())},a.expr[":"].aibegins=function(b,c,d){var e=a(b),f=(e.data("tokens")||e.data("normalizedText")||e.text()).toUpperCase();return f.startsWith(d[3].toUpperCase())};var e=function(b,c,d){d&&(d.stopPropagation(),d.preventDefault()),this.$element=a(b),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=c,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=e.prototype.val,this.render=e.prototype.render,this.refresh=e.prototype.refresh,this.setStyle=e.prototype.setStyle,this.selectAll=e.prototype.selectAll,this.deselectAll=e.prototype.deselectAll,this.destroy=e.prototype.destroy,this.remove=e.prototype.remove,this.show=e.prototype.show,this.hide=e.prototype.hide,this.init()};e.VERSION="1.10.0",e.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(a,b){return 1==a?"{0} item selected":"{0} items selected"},maxOptionsText:function(a,b){return[1==a?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==b?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1},e.prototype={constructor:e,init:function(){var b=this,c=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement).appendTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element.removeClass("bs-select-hidden"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof c&&(this.$button.attr("data-id",c),a('label[for="'+c+'"]').click(function(a){a.preventDefault(),b.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(a){b.$element.trigger("hide.bs.select",a)},"hidden.bs.dropdown":function(a){b.$element.trigger("hidden.bs.select",a)},"show.bs.dropdown":function(a){b.$element.trigger("show.bs.select",a)},"shown.bs.dropdown":function(a){b.$element.trigger("shown.bs.select",a)}}),b.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){b.$button.addClass("bs-invalid").focus(),b.$element.on({"focus.bs.select":function(){b.$button.focus(),b.$element.off("focus.bs.select")},"shown.bs.select":function(){b.$element.val(b.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){this.validity.valid&&b.$button.removeClass("bs-invalid"),b.$element.off("rendered.bs.select")}})}),setTimeout(function(){b.$element.trigger("loaded.bs.select")})},createDropdown:function(){var b=this.multiple||this.options.showTick?" show-tick":"",d=this.$element.parent().hasClass("input-group")?" input-group-btn":"",e=this.autofocus?" autofocus":"",f=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",g=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+c(this.options.liveSearchPlaceholder)+'"')+"></div>":"",h=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",i=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",j='<div class="btn-group bootstrap-select'+b+d+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+e+'><span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret">'+this.options.template.caret+'</span></button><div class="dropdown-menu open">'+f+g+h+'<ul class="dropdown-menu inner" role="menu"></ul>'+i+"</div></div>";return a(j)},createView:function(){var a=this.createDropdown(),b=this.createLi();return a.find("ul")[0].innerHTML=b,a},reloadLi:function(){this.destroyLi();var a=this.createLi();this.$menuInner[0].innerHTML=a},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var d=this,e=[],f=0,g=document.createElement("option"),h=-1,i=function(a,b,c,d){return"<li"+("undefined"!=typeof c&""!==c?' class="'+c+'"':"")+("undefined"!=typeof b&null!==b?' data-original-index="'+b+'"':"")+("undefined"!=typeof d&null!==d?'data-optgroup="'+d+'"':"")+">"+a+"</li>"},j=function(a,e,f,g){return'<a tabindex="0"'+("undefined"!=typeof e?' class="'+e+'"':"")+("undefined"!=typeof f?' style="'+f+'"':"")+(d.options.liveSearchNormalize?' data-normalized-text="'+b(c(a))+'"':"")+("undefined"!=typeof g||null!==g?' data-tokens="'+g+'"':"")+">"+a+'<span class="'+d.options.iconBase+" "+d.options.tickIcon+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(h--,!this.$element.find(".bs-title-option").length)){var k=this.$element[0];g.className="bs-title-option",g.appendChild(document.createTextNode(this.options.title)),g.value="",k.insertBefore(g,k.firstChild),void 0===a(k.options[k.selectedIndex]).attr("selected")&&(g.selected=!0)}return this.$element.find("option").each(function(b){var c=a(this);if(h++,!c.hasClass("bs-title-option")){var g=this.className||"",k=this.style.cssText,l=c.data("content")?c.data("content"):c.html(),m=c.data("tokens")?c.data("tokens"):null,n="undefined"!=typeof c.data("subtext")?'<small class="text-muted">'+c.data("subtext")+"</small>":"",o="undefined"!=typeof c.data("icon")?'<span class="'+d.options.iconBase+" "+c.data("icon")+'"></span> ':"",p="OPTGROUP"===this.parentNode.tagName,q=this.disabled||p&&this.parentNode.disabled;if(""!==o&&q&&(o="<span>"+o+"</span>"),d.options.hideDisabled&&q&&!p)return void h--;if(c.data("content")||(l=o+'<span class="text">'+l+n+"</span>"),p&&c.data("divider")!==!0){var r=" "+this.parentNode.className||"";if(0===c.index()){f+=1;var s=this.parentNode.label,t="undefined"!=typeof c.parent().data("subtext")?'<small class="text-muted">'+c.parent().data("subtext")+"</small>":"",u=c.parent().data("icon")?'<span class="'+d.options.iconBase+" "+c.parent().data("icon")+'"></span> ':"";s=u+'<span class="text">'+s+t+"</span>",0!==b&&e.length>0&&(h++,e.push(i("",null,"divider",f+"div"))),h++,e.push(i(s,null,"dropdown-header"+r,f))}if(d.options.hideDisabled&&q)return void h--;e.push(i(j(l,"opt "+g+r,k,m),b,"",f))}else c.data("divider")===!0?e.push(i("",b,"divider")):c.data("hidden")===!0?e.push(i(j(l,g,k,m),b,"hidden is-hidden")):(this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName&&(h++,e.push(i("",null,"divider",f+"div"))),e.push(i(j(l,g,k,m),b)));d.liObj[b]=h}}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),e.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(b){var c,d=this;b!==!1&&this.$element.find("option").each(function(a){var b=d.findLis().eq(d.liObj[a]);d.setDisabled(a,this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled,b),d.setSelected(a,this.selected,b)}),this.tabIndex();var e=this.$element.find("option").map(function(){if(this.selected){if(d.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled))return;var b,c=a(this),e=c.data("icon")&&d.options.showIcon?'<i class="'+d.options.iconBase+" "+c.data("icon")+'"></i> ':"";return b=d.options.showSubtext&&c.data("subtext")&&!d.multiple?' <small class="text-muted">'+c.data("subtext")+"</small>":"","undefined"!=typeof c.attr("title")?c.attr("title"):c.data("content")&&d.options.showContent?c.data("content"):e+c.html()+b}}).toArray(),f=this.multiple?e.join(this.options.multipleSeparator):e[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var g=this.options.selectedTextFormat.split(">");if(g.length>1&&e.length>g[1]||1==g.length&&e.length>=2){c=this.options.hideDisabled?", [disabled]":"";var h=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+c).length,i="function"==typeof this.options.countSelectedText?this.options.countSelectedText(e.length,h):this.options.countSelectedText;f=i.replace("{0}",e.length.toString()).replace("{1}",h.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(f=this.options.title),f||(f="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",a.trim(f.replace(/<[^>]*>?/g,""))),this.$button.children(".filter-option").html(f),this.$element.trigger("rendered.bs.select")},setStyle:function(a,b){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var c=a?a:this.options.style;"add"==b?this.$button.addClass(c):"remove"==b?this.$button.removeClass(c):(this.$button.removeClass(this.options.style),this.$button.addClass(c))},liHeight:function(b){if(b||this.options.size!==!1&&!this.sizeInfo){var c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("ul"),f=document.createElement("li"),g=document.createElement("li"),h=document.createElement("a"),i=document.createElement("span"),j=this.options.header&&this.$menu.find(".popover-title").length>0?this.$menu.find(".popover-title")[0].cloneNode(!0):null,k=this.options.liveSearch?document.createElement("div"):null,l=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,m=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(i.className="text",c.className=this.$menu[0].parentNode.className+" open",d.className="dropdown-menu open",e.className="dropdown-menu inner",f.className="divider",i.appendChild(document.createTextNode("Inner text")),h.appendChild(i),g.appendChild(h),e.appendChild(g),e.appendChild(f),j&&d.appendChild(j),k){var n=document.createElement("span");k.className="bs-searchbox",n.className="form-control",k.appendChild(n),d.appendChild(k)}l&&d.appendChild(l),d.appendChild(e),m&&d.appendChild(m),c.appendChild(d),document.body.appendChild(c);var o=h.offsetHeight,p=j?j.offsetHeight:0,q=k?k.offsetHeight:0,r=l?l.offsetHeight:0,s=m?m.offsetHeight:0,t=a(f).outerHeight(!0),u="function"==typeof getComputedStyle&&getComputedStyle(d),v=u?null:a(d),w=parseInt(u?u.paddingTop:v.css("paddingTop"))+parseInt(u?u.paddingBottom:v.css("paddingBottom"))+parseInt(u?u.borderTopWidth:v.css("borderTopWidth"))+parseInt(u?u.borderBottomWidth:v.css("borderBottomWidth")),x=w+parseInt(u?u.marginTop:v.css("marginTop"))+parseInt(u?u.marginBottom:v.css("marginBottom"))+2;document.body.removeChild(c),this.sizeInfo={liHeight:o,headerHeight:p,searchHeight:q,actionsHeight:r,doneButtonHeight:s,dividerHeight:t,menuPadding:w,menuExtras:x}}},setSize:function(){if(this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),this.options.size!==!1){var b,c,d,e,f=this,g=this.$menu,h=this.$menuInner,i=a(window),j=this.$newElement[0].offsetHeight,k=this.sizeInfo.liHeight,l=this.sizeInfo.headerHeight,m=this.sizeInfo.searchHeight,n=this.sizeInfo.actionsHeight,o=this.sizeInfo.doneButtonHeight,p=this.sizeInfo.dividerHeight,q=this.sizeInfo.menuPadding,r=this.sizeInfo.menuExtras,s=this.options.hideDisabled?".disabled":"",t=function(){d=f.$newElement.offset().top-i.scrollTop(),e=i.height()-d-j};if(t(),"auto"===this.options.size){var u=function(){var i,j=function(b,c){return function(d){return c?d.classList?d.classList.contains(b):a(d).hasClass(b):!(d.classList?d.classList.contains(b):a(d).hasClass(b))}},p=f.$menuInner[0].getElementsByTagName("li"),s=Array.prototype.filter?Array.prototype.filter.call(p,j("hidden",!1)):f.$lis.not(".hidden"),u=Array.prototype.filter?Array.prototype.filter.call(s,j("dropdown-header",!0)):s.filter(".dropdown-header");t(),b=e-r,f.options.container?(g.data("height")||g.data("height",g.height()),c=g.data("height")):c=g.height(),f.options.dropupAuto&&f.$newElement.toggleClass("dropup",d>e&&b-r<c),f.$newElement.hasClass("dropup")&&(b=d-r),i=s.length+u.length>3?3*k+r-2:0,g.css({"max-height":b+"px",overflow:"hidden","min-height":i+l+m+n+o+"px"}),h.css({"max-height":b-l-m-n-o-q+"px","overflow-y":"auto","min-height":Math.max(i-q,0)+"px"})};u(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",u),i.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",u)}else if(this.options.size&&"auto"!=this.options.size&&this.$lis.not(s).length>this.options.size){var v=this.$lis.not(".divider").not(s).children().slice(0,this.options.size).last().parent().index(),w=this.$lis.slice(0,v+1).filter(".divider").length;b=k*this.options.size+w*p+q,f.options.container?(g.data("height")||g.data("height",g.height()),c=g.data("height")):c=g.height(),f.options.dropupAuto&&this.$newElement.toggleClass("dropup",d>e&&b-r<c),g.css({"max-height":b+l+m+n+o+"px",overflow:"hidden","min-height":""}),h.css({"max-height":b-q+"px","overflow-y":"auto","min-height":""})}}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var a=this.$menu.parent().clone().appendTo("body"),b=this.options.container?this.$newElement.clone().appendTo("body"):a,c=a.children(".dropdown-menu").outerWidth(),d=b.css("width","auto").children("button").outerWidth();a.remove(),b.remove(),this.$newElement.css("width",Math.max(c,d)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=a('<div class="bs-container" />');var b,c,d=this,e=function(a){d.$bsContainer.addClass(a.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",a.hasClass("dropup")),b=a.offset(),c=a.hasClass("dropup")?0:a[0].offsetHeight,d.$bsContainer.css({top:b.top+c,left:b.left,width:a[0].offsetWidth})};this.$button.on("click",function(){var b=a(this);d.isDisabled()||(e(d.$newElement),
d.$bsContainer.appendTo(d.options.container).toggleClass("open",!b.hasClass("open")).append(d.$menu))}),a(window).on("resize scroll",function(){e(d.$newElement)}),this.$element.on("hide.bs.select",function(){d.$menu.data("height",d.$menu.height()),d.$bsContainer.detach()})},setSelected:function(a,b,c){c||(c=this.findLis().eq(this.liObj[a])),c.toggleClass("selected",b)},setDisabled:function(a,b,c){c||(c=this.findLis().eq(this.liObj[a])),b?c.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):c.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var a=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled")),this.$button.attr("tabindex")!=-1||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!a.isDisabled()})},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&this.$element.attr("tabindex")!==-98&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var b=this,c=a(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(a){a.stopPropagation()}),c.data("spaceSelect",!1),this.$button.on("keyup",function(a){/(32)/.test(a.keyCode.toString(10))&&c.data("spaceSelect")&&(a.preventDefault(),c.data("spaceSelect",!1))}),this.$button.on("click",function(){b.setSize()}),this.$element.on("shown.bs.select",function(){if(b.options.liveSearch||b.multiple){if(!b.multiple){var a=b.liObj[b.$element[0].selectedIndex];if("number"!=typeof a||b.options.size===!1)return;var c=b.$lis.eq(a)[0].offsetTop-b.$menuInner[0].offsetTop;c=c-b.$menuInner[0].offsetHeight/2+b.sizeInfo.liHeight/2,b.$menuInner[0].scrollTop=c}}else b.$menuInner.find(".selected a").focus()}),this.$menuInner.on("click","li a",function(c){var d=a(this),e=d.parent().data("originalIndex"),f=b.$element.val(),g=b.$element.prop("selectedIndex");if(b.multiple&&c.stopPropagation(),c.preventDefault(),!b.isDisabled()&&!d.parent().hasClass("disabled")){var h=b.$element.find("option"),i=h.eq(e),j=i.prop("selected"),k=i.parent("optgroup"),l=b.options.maxOptions,m=k.data("maxOptions")||!1;if(b.multiple){if(i.prop("selected",!j),b.setSelected(e,!j),d.blur(),l!==!1||m!==!1){var n=l<h.filter(":selected").length,o=m<k.find("option:selected").length;if(l&&n||m&&o)if(l&&1==l)h.prop("selected",!1),i.prop("selected",!0),b.$menuInner.find(".selected").removeClass("selected"),b.setSelected(e,!0);else if(m&&1==m){k.find("option:selected").prop("selected",!1),i.prop("selected",!0);var p=d.parent().data("optgroup");b.$menuInner.find('[data-optgroup="'+p+'"]').removeClass("selected"),b.setSelected(e,!0)}else{var q="function"==typeof b.options.maxOptionsText?b.options.maxOptionsText(l,m):b.options.maxOptionsText,r=q[0].replace("{n}",l),s=q[1].replace("{n}",m),t=a('<div class="notify"></div>');q[2]&&(r=r.replace("{var}",q[2][l>1?0:1]),s=s.replace("{var}",q[2][m>1?0:1])),i.prop("selected",!1),b.$menu.append(t),l&&n&&(t.append(a("<div>"+r+"</div>")),b.$element.trigger("maxReached.bs.select")),m&&o&&(t.append(a("<div>"+s+"</div>")),b.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){b.setSelected(e,!1)},10),t.delay(750).fadeOut(300,function(){a(this).remove()})}}}else h.prop("selected",!1),i.prop("selected",!0),b.$menuInner.find(".selected").removeClass("selected"),b.setSelected(e,!0);b.multiple?b.options.liveSearch&&b.$searchbox.focus():b.$button.focus(),(f!=b.$element.val()&&b.multiple||g!=b.$element.prop("selectedIndex")&&!b.multiple)&&b.$element.trigger("changed.bs.select",[e,i.prop("selected"),j]).triggerNative("change")}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(c){c.currentTarget==this&&(c.preventDefault(),c.stopPropagation(),b.options.liveSearch&&!a(c.target).hasClass("close")?b.$searchbox.focus():b.$button.focus())}),this.$menuInner.on("click",".divider, .dropdown-header",function(a){a.preventDefault(),a.stopPropagation(),b.options.liveSearch?b.$searchbox.focus():b.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){b.$button.click()}),this.$searchbox.on("click",function(a){a.stopPropagation()}),this.$menu.on("click",".actions-btn",function(c){b.options.liveSearch?b.$searchbox.focus():b.$button.focus(),c.preventDefault(),c.stopPropagation(),a(this).hasClass("bs-select-all")?b.selectAll():b.deselectAll()}),this.$element.change(function(){b.render(!1)})},liveSearchListener:function(){var d=this,e=a('<li class="no-results"></li>');this.$button.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){d.$menuInner.find(".active").removeClass("active"),d.$searchbox.val()&&(d.$searchbox.val(""),d.$lis.not(".is-hidden").removeClass("hidden"),e.parent().length&&e.remove()),d.multiple||d.$menuInner.find(".selected").addClass("active"),setTimeout(function(){d.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(a){a.stopPropagation()}),this.$searchbox.on("input propertychange",function(){if(d.$searchbox.val()){var f=d.$lis.not(".is-hidden").removeClass("hidden").children("a");f=d.options.liveSearchNormalize?f.not(":a"+d._searchStyle()+'("'+b(d.$searchbox.val())+'")'):f.not(":"+d._searchStyle()+'("'+d.$searchbox.val()+'")'),f.parent().addClass("hidden"),d.$lis.filter(".dropdown-header").each(function(){var b=a(this),c=b.data("optgroup");0===d.$lis.filter("[data-optgroup="+c+"]").not(b).not(".hidden").length&&(b.addClass("hidden"),d.$lis.filter("[data-optgroup="+c+"div]").addClass("hidden"))});var g=d.$lis.not(".hidden");g.each(function(b){var c=a(this);c.hasClass("divider")&&(c.index()===g.first().index()||c.index()===g.last().index()||g.eq(b+1).hasClass("divider"))&&c.addClass("hidden")}),d.$lis.not(".hidden, .no-results").length?e.parent().length&&e.remove():(e.parent().length&&e.remove(),e.html(d.options.noneResultsText.replace("{0}",'"'+c(d.$searchbox.val())+'"')).show(),d.$menuInner.append(e))}else d.$lis.not(".is-hidden").removeClass("hidden"),e.parent().length&&e.remove();d.$lis.filter(".active").removeClass("active"),d.$searchbox.val()&&d.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus(),a(this).focus()})},_searchStyle:function(){var a={begins:"ibegins",startsWith:"ibegins"};return a[this.options.liveSearchStyle]||"icontains"},val:function(a){return"undefined"!=typeof a?(this.$element.val(a),this.render(),this.$element):this.$element.val()},changeAll:function(b){"undefined"==typeof b&&(b=!0),this.findLis();for(var c=this.$element.find("option"),d=this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").toggleClass("selected",b),e=d.length,f=[],g=0;g<e;g++){var h=d[g].getAttribute("data-original-index");f[f.length]=c.eq(h)[0]}a(f).prop("selected",b),this.render(!1),this.$element.trigger("changed.bs.select").triggerNative("change")},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(a){a=a||window.event,a&&a.stopPropagation(),this.$button.trigger("click")},keydown:function(c){var d,e,f,g,h,i,j,k,l,m=a(this),n=m.is("input")?m.parent().parent():m.parent(),o=n.data("this"),p=":not(.disabled, .hidden, .dropdown-header, .divider)",q={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(o.options.liveSearch&&(n=m.parent().parent()),o.options.container&&(n=o.$menu),d=a("[role=menu] li",n),l=o.$newElement.hasClass("open"),!l&&(c.keyCode>=48&&c.keyCode<=57||c.keyCode>=96&&c.keyCode<=105||c.keyCode>=65&&c.keyCode<=90)&&(o.options.container?o.$button.trigger("click"):(o.setSize(),o.$menu.parent().addClass("open"),l=!0),o.$searchbox.focus()),o.options.liveSearch&&(/(^9$|27)/.test(c.keyCode.toString(10))&&l&&0===o.$menu.find(".active").length&&(c.preventDefault(),o.$menu.parent().removeClass("open"),o.options.container&&o.$newElement.removeClass("open"),o.$button.focus()),d=a("[role=menu] li"+p,n),m.val()||/(38|40)/.test(c.keyCode.toString(10))||0===d.filter(".active").length&&(d=o.$menuInner.find("li"),d=o.options.liveSearchNormalize?d.filter(":a"+o._searchStyle()+"("+b(q[c.keyCode])+")"):d.filter(":"+o._searchStyle()+"("+q[c.keyCode]+")"))),d.length){if(/(38|40)/.test(c.keyCode.toString(10)))e=d.index(d.find("a").filter(":focus").parent()),g=d.filter(p).first().index(),h=d.filter(p).last().index(),f=d.eq(e).nextAll(p).eq(0).index(),i=d.eq(e).prevAll(p).eq(0).index(),j=d.eq(f).prevAll(p).eq(0).index(),o.options.liveSearch&&(d.each(function(b){a(this).hasClass("disabled")||a(this).data("index",b)}),e=d.index(d.filter(".active")),g=d.first().data("index"),h=d.last().data("index"),f=d.eq(e).nextAll().eq(0).data("index"),i=d.eq(e).prevAll().eq(0).data("index"),j=d.eq(f).prevAll().eq(0).data("index")),k=m.data("prevIndex"),38==c.keyCode?(o.options.liveSearch&&e--,e!=j&&e>i&&(e=i),e<g&&(e=g),e==k&&(e=h)):40==c.keyCode&&(o.options.liveSearch&&e++,e==-1&&(e=0),e!=j&&e<f&&(e=f),e>h&&(e=h),e==k&&(e=g)),m.data("prevIndex",e),o.options.liveSearch?(c.preventDefault(),m.hasClass("dropdown-toggle")||(d.removeClass("active").eq(e).addClass("active").children("a").focus(),m.focus())):d.eq(e).children("a").focus();else if(!m.is("input")){var r,s,t=[];d.each(function(){a(this).hasClass("disabled")||a.trim(a(this).children("a").text().toLowerCase()).substring(0,1)==q[c.keyCode]&&t.push(a(this).index())}),r=a(document).data("keycount"),r++,a(document).data("keycount",r),s=a.trim(a(":focus").text().toLowerCase()).substring(0,1),s!=q[c.keyCode]?(r=1,a(document).data("keycount",r)):r>=t.length&&(a(document).data("keycount",0),r>t.length&&(r=1)),d.eq(t[r-1]).children("a").focus()}if((/(13|32)/.test(c.keyCode.toString(10))||/(^9$)/.test(c.keyCode.toString(10))&&o.options.selectOnTab)&&l){if(/(32)/.test(c.keyCode.toString(10))||c.preventDefault(),o.options.liveSearch)/(32)/.test(c.keyCode.toString(10))||(o.$menuInner.find(".active a").click(),m.focus());else{var u=a(":focus");u.click(),u.focus(),c.preventDefault(),a(document).data("spaceSelect",!0)}a(document).data("keycount",0)}(/(^9$|27)/.test(c.keyCode.toString(10))&&l&&(o.multiple||o.options.liveSearch)||/(27)/.test(c.keyCode.toString(10))&&!l)&&(o.$menu.parent().removeClass("open"),o.options.container&&o.$newElement.removeClass("open"),o.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){this.$lis=null,this.liObj={},this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var f=a.fn.selectpicker;a.fn.selectpicker=d,a.fn.selectpicker.Constructor=e,a.fn.selectpicker.noConflict=function(){return a.fn.selectpicker=f,this},a(document).data("keycount",0).on("keydown.bs.select",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',e.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',function(a){a.stopPropagation()}),a(window).on("load.bs.select.data-api",function(){a(".selectpicker").each(function(){var b=a(this);d.call(b,b.data())})})}(a)}),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["angular"],b):"object"==typeof module&&module.exports?module.exports=b(require("angular")):b(a.angular)}(this,function(a,b){"use strict";return a.module("angular-google-analytics",[]).provider("Analytics",function(){var c,d,e,f,g,h=!0,i="auto",j=!1,k=!1,l="USD",m=!1,n=!1,o=!1,p=!1,q=!1,r=!1,s=!1,t=!1,u=!1,v=!1,w=!1,x="$routeChangeSuccess",y=!1,z=!1,A=!1,B="",C=!0,D=!1;this.log=[],this.offlineQueue=[],this.setAccount=function(d){return c=a.isUndefined(d)||d===!1?b:a.isArray(d)?d:a.isObject(d)?[d]:[{tracker:d,trackEvent:!0}],this},this.trackPages=function(a){return C=!!a,this},this.trackPrefix=function(a){return B=a,this},this.setDomainName=function(a){return e=a,this},this.useDisplayFeatures=function(a){return o=!!a,this},this.useAnalytics=function(a){return h=!!a,this},this.useEnhancedLinkAttribution=function(a){return s=!!a,this},this.useCrossDomainLinker=function(a){return k=!!a,this},this.setCrossLinkDomains=function(a){return d=a,this},this.setPageEvent=function(a){return x=a,this},this.setCookieConfig=function(a){return i=a,this},this.useECommerce=function(a,b){return q=!!a,r=!!b,this},this.setCurrency=function(a){return l=a,this},this.setRemoveRegExp=function(a){return a instanceof RegExp&&(g=a),this},this.setExperimentId=function(a){return f=a,this},this.ignoreFirstPageLoad=function(a){return t=!!a,this},this.trackUrlParams=function(a){return D=!!a,this},this.disableAnalytics=function(a){return p=!!a,this},this.setHybridMobileSupport=function(a){return v=!!a,this},this.startOffline=function(a){return w=!!a,w===!0&&this.delayScriptTag(!0),this},this.delayScriptTag=function(a){return n=!!a,this},this.logAllCalls=function(a){return u=!!a,this},this.enterTestMode=function(){return z=!0,this},this.enterDebugMode=function(a){return m=!0,A=!!a,this},this.readFromRoute=function(a){return y=!!a,this},this.$get=["$document","$location","$log","$rootScope","$window","$injector",function(E,F,G,H,I,J){var K=this,L=function(b,c){return a.isObject(c)&&a.isDefined(c[b])},M=function(a,b,c){return L(a,b)&&b[a]===c},N=function(b,c){return a.isString(c)?c+"."+b:L("name",c)?c.name+"."+b:b},O={};y&&(J.has("$route")?O=J.get("$route"):G.warn("$route service is not available. Make sure you have included ng-route in your application dependencies."));var P=function(){if(y&&O.current&&"pageTrack"in O.current)return O.current.pageTrack;var a=D?F.url():F.path();return g?a.replace(g,""):a},Q=function(){var b={utm_source:"campaignSource",utm_medium:"campaignMedium",utm_term:"campaignTerm",utm_content:"campaignContent",utm_campaign:"campaignName"},c={};return a.forEach(F.search(),function(d,e){var f=b[e];a.isDefined(f)&&(c[f]=d)}),c},R=function(a,b,c,d,e,f,g,h,i){var j={};return a&&(j.id=a),b&&(j.affiliation=b),c&&(j.revenue=c),d&&(j.tax=d),e&&(j.shipping=e),f&&(j.coupon=f),g&&(j.list=g),h&&(j.step=h),i&&(j.option=i),j},S=function(a){!h&&I._gaq&&"function"==typeof a&&a()},T=function(){var a=Array.prototype.slice.call(arguments);return w===!0?void K.offlineQueue.push([T,a]):(I._gaq||(I._gaq=[]),u===!0&&K._log.apply(K,a),void I._gaq.push(a))},U=function(a){h&&I.ga&&"function"==typeof a&&a()},V=function(){var a=Array.prototype.slice.call(arguments);return w===!0?void K.offlineQueue.push([V,a]):"function"!=typeof I.ga?void K._log("warn","ga function not set on window"):(u===!0&&K._log.apply(K,a),void I.ga.apply(null,a))},W=function(a){var b=Array.prototype.slice.call(arguments,1),d=b[0],e=[];return"function"==typeof a?c.forEach(function(b){a(b)&&e.push(b)}):e=c,0===e.length?void V.apply(K,b):void e.forEach(function(a){L("select",a)&&"function"==typeof a.select&&!a.select(b)||(b[0]=N(d,a),V.apply(K,b))})};return this._log=function(){var a=Array.prototype.slice.call(arguments);if(a.length>0){if(a.length>1)switch(a[0]){case"debug":case"error":case"info":case"log":case"warn":G[a[0]](a.slice(1))}K.log.push(a)}},this._createScriptTag=function(){if(!c||c.length<1)return void K._log("warn","No account id set to create script tag");if(c.length>1&&(K._log("warn","Multiple trackers are not supported with ga.js. Using first tracker only"),c=c.slice(0,1)),j===!0)return void K._log("warn","ga.js or analytics.js script tag already created");p===!0&&(K._log("info","Analytics disabled: "+c[0].tracker),I["ga-disable-"+c[0].tracker]=!0),T("_setAccount",c[0].tracker),e&&T("_setDomainName",e),s&&T("_require","inpage_linkid","//www.google-analytics.com/plugins/ga/inpage_linkid.js"),C&&!t&&(g?T("_trackPageview",P()):T("_trackPageview"));var a,b=E[0];return a=o===!0?("https:"===b.location.protocol?"https://":"http://")+"stats.g.doubleclick.net/dc.js":("https:"===b.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",z!==!0?!function(){var c=b.createElement("script");c.type="text/javascript",c.async=!0,c.src=a;var d=b.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}():K._log("inject",a),j=!0,!0},this._createAnalyticsScriptTag=function(){if(!c)return void K._log("warn","No account id set to create analytics script tag");if(j===!0)return void K._log("warn","ga.js or analytics.js script tag already created");p===!0&&c.forEach(function(a){K._log("info","Analytics disabled: "+a.tracker),I["ga-disable-"+a.tracker]=!0});var b=E[0],e=v===!0?"https:":"",g=e+"//www.google-analytics.com/"+(m?"analytics_debug.js":"analytics.js");if(z!==!0?!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,b,"script",g,"ga"):("function"!=typeof I.ga&&(I.ga=function(){}),K._log("inject",g)),A&&(I.ga_debug={trace:!0}),c.forEach(function(b){b.crossDomainLinker=L("crossDomainLinker",b)?b.crossDomainLinker:k,b.crossLinkDomains=L("crossLinkDomains",b)?b.crossLinkDomains:d,b.displayFeatures=L("displayFeatures",b)?b.displayFeatures:o,b.enhancedLinkAttribution=L("enhancedLinkAttribution",b)?b.enhancedLinkAttribution:s,b.set=L("set",b)?b.set:{},b.trackEcommerce=L("trackEcommerce",b)?b.trackEcommerce:q,b.trackEvent=!!L("trackEvent",b)&&b.trackEvent;var c={};L("fields",b)?c=b.fields:L("cookieConfig",b)?a.isString(b.cookieConfig)?c.cookieDomain=b.cookieConfig:c=b.cookieConfig:a.isString(i)?c.cookieDomain=i:i&&(c=i),b.crossDomainLinker===!0&&(c.allowLinker=!0),L("name",b)&&(c.name=b.name),b.fields=c,V("create",b.tracker,b.fields),v===!0&&V(N("set",b),"checkProtocolTask",null);for(var e in b.set)b.set.hasOwnProperty(e)&&V(N("set",b),e,b.set[e]);b.crossDomainLinker===!0&&(V(N("require",b),"linker"),a.isDefined(b.crossLinkDomains)&&V(N("linker:autoLink",b),b.crossLinkDomains)),b.displayFeatures&&V(N("require",b),"displayfeatures"),b.trackEcommerce&&(r?(V(N("require",b),"ec"),V(N("set",b),"&cu",l)):V(N("require",b),"ecommerce")),b.enhancedLinkAttribution&&V(N("require",b),"linkid"),C&&!t&&V(N("send",b),"pageview",B+P())}),f){var h=b.createElement("script"),n=b.getElementsByTagName("script")[0];h.src=e+"//www.google-analytics.com/cx/api.js?experiment="+f,n.parentNode.insertBefore(h,n)}return j=!0,!0},this._ecommerceEnabled=function(a,b){var c=q&&!r;return a===!0&&c===!1&&(q&&r?K._log("warn",b+" is not available when Enhanced Ecommerce is enabled with analytics.js"):K._log("warn","Ecommerce must be enabled to use "+b+" with analytics.js")),c},this._enhancedEcommerceEnabled=function(a,b){var c=q&&r;return a===!0&&c===!1&&K._log("warn","Enhanced Ecommerce must be enabled to use "+b+" with analytics.js"),c},this._trackPage=function(c,d,e){c=c?c:P(),d=d?d:E[0].title,S(function(){T("_set","title",d),T("_trackPageview",B+c)}),U(function(){var f={page:B+c,title:d};a.extend(f,Q()),a.isObject(e)&&a.extend(f,e),W(b,"send","pageview",f)})},this._trackEvent=function(b,c,d,e,f,g){S(function(){T("_trackEvent",b,c,d,e,!!f)}),U(function(){var h={},i=function(a){return M("trackEvent",a,!0)};a.isDefined(f)&&(h.nonInteraction=!!f),a.isObject(g)&&a.extend(h,g),a.isDefined(h.page)||(h.page=P()),W(i,"send","event",b,c,d,e,h)})},this._addTrans=function(a,b,c,d,e,f,g,h,i){S(function(){T("_addTrans",a,b,c,d,e,f,g,h)}),U(function(){if(K._ecommerceEnabled(!0,"addTrans")){var f=function(a){return M("trackEcommerce",a,!0)};W(f,"ecommerce:addTransaction",{id:a,affiliation:b,revenue:c,tax:d,shipping:e,currency:i||"USD"})}})},this._addItem=function(a,b,c,d,e,f){S(function(){T("_addItem",a,b,c,d,e,f)}),U(function(){if(K._ecommerceEnabled(!0,"addItem")){var g=function(a){return M("trackEcommerce",a,!0)};W(g,"ecommerce:addItem",{id:a,name:c,sku:b,category:d,price:e,quantity:f})}})},this._trackTrans=function(){S(function(){T("_trackTrans")}),U(function(){if(K._ecommerceEnabled(!0,"trackTrans")){var a=function(a){return M("trackEcommerce",a,!0)};W(a,"ecommerce:send")}})},this._clearTrans=function(){U(function(){if(K._ecommerceEnabled(!0,"clearTrans")){var a=function(a){return M("trackEcommerce",a,!0)};W(a,"ecommerce:clear")}})},this._addProduct=function(b,c,d,e,f,g,h,i,j,k){S(function(){T("_addProduct",b,c,d,e,f,g,h,i,j)}),U(function(){if(K._enhancedEcommerceEnabled(!0,"addProduct")){var l=function(a){return M("trackEcommerce",a,!0)},m={id:b,name:c,category:d,brand:e,variant:f,price:g,quantity:h,coupon:i,position:j};a.isObject(k)&&a.extend(m,k),W(l,"ec:addProduct",m)}})},this._addImpression=function(a,b,c,d,e,f,g,h){S(function(){T("_addImpression",a,b,c,d,e,f,g,h)}),U(function(){if(K._enhancedEcommerceEnabled(!0,"addImpression")){var i=function(a){return M("trackEcommerce",a,!0)};W(i,"ec:addImpression",{id:a,name:b,category:e,brand:d,variant:f,list:c,position:g,price:h})}})},this._addPromo=function(a,b,c,d){S(function(){T("_addPromo",a,b,c,d)}),U(function(){if(K._enhancedEcommerceEnabled(!0,"addPromo")){var e=function(a){return M("trackEcommerce",a,!0)};W(e,"ec:addPromo",{id:a,name:b,creative:c,position:d})}})},this._setAction=function(a,b){S(function(){T("_setAction",a,b)}),U(function(){if(K._enhancedEcommerceEnabled(!0,"setAction")){var c=function(a){return M("trackEcommerce",a,!0)};W(c,"ec:setAction",a,b)}})},this._trackTransaction=function(a,b,c,d,e,f,g,h,i){this._setAction("purchase",R(a,b,c,d,e,f,g,h,i))},this._trackRefund=function(a){this._setAction("refund",R(a))},this._trackCheckOut=function(a,b){this._setAction("checkout",R(null,null,null,null,null,null,null,a,b))},this._trackDetail=function(){this._setAction("detail"),this._pageView()},this._trackCart=function(a,b){["add","remove"].indexOf(a)!==-1&&(this._setAction(a,{list:b}),this._trackEvent("UX","click",a+("add"===a?" to cart":" from cart")))},this._promoClick=function(a){this._setAction("promo_click"),this._trackEvent("Internal Promotions","click",a)},this._productClick=function(a){this._setAction("click",R(null,null,null,null,null,null,a,null,null)),this._trackEvent("UX","click",a)},this._pageView=function(a){U(function(){V(N("send",a),"pageview")})},this._send=function(){var a=Array.prototype.slice.call(arguments);a.unshift("send"),U(function(){V.apply(K,a)})},this._set=function(a,b,c){U(function(){V(N("set",c),a,b)})},this._trackTimings=function(a,c,d,e){U(function(){W(b,"send","timing",a,c,d,e)})},this._trackException=function(a,c){U(function(){W(b,"send","exception",{exDescription:a,exFatal:!!c})})},n||(h?this._createAnalyticsScriptTag():this._createScriptTag()),C&&H.$on(x,function(){(!y||O.current&&O.current.templateUrl&&!O.current.doNotTrack)&&K._trackPage()}),{log:K.log,offlineQueue:K.offlineQueue,configuration:{accounts:c,universalAnalytics:h,crossDomainLinker:k,crossLinkDomains:d,currency:l,debugMode:m,delayScriptTag:n,disableAnalytics:p,displayFeatures:o,domainName:e,ecommerce:K._ecommerceEnabled(),enhancedEcommerce:K._enhancedEcommerceEnabled(),enhancedLinkAttribution:s,experimentId:f,hybridMobileSupport:v,ignoreFirstPageLoad:t,logAllCalls:u,pageEvent:x,readFromRoute:y,removeRegExp:g,testMode:z,traceDebuggingMode:A,trackPrefix:B,trackRoutes:C,trackUrlParams:D},getUrl:P,setCookieConfig:K._setCookieConfig,getCookieConfig:function(){return i},createAnalyticsScriptTag:function(a){return a&&(i=a),K._createAnalyticsScriptTag()},createScriptTag:function(){return K._createScriptTag()},offline:function(a){if(a===!0&&w===!1&&(w=!0),a===!1&&w===!0)for(w=!1;K.offlineQueue.length>0;){var b=K.offlineQueue.shift();b[0].apply(K,b[1])}return w},trackPage:function(a,b,c){K._trackPage.apply(K,arguments)},trackEvent:function(a,b,c,d,e,f){K._trackEvent.apply(K,arguments)},addTrans:function(a,b,c,d,e,f,g,h,i){K._addTrans.apply(K,arguments)},addItem:function(a,b,c,d,e,f){K._addItem.apply(K,arguments)},trackTrans:function(){K._trackTrans.apply(K,arguments)},clearTrans:function(){K._clearTrans.apply(K,arguments)},addProduct:function(a,b,c,d,e,f,g,h,i,j){K._addProduct.apply(K,arguments)},addPromo:function(a,b,c,d){K._addPromo.apply(K,arguments)},addImpression:function(a,b,c,d,e,f,g,h){K._addImpression.apply(K,arguments)},productClick:function(a){K._productClick.apply(K,arguments)},promoClick:function(a){K._promoClick.apply(K,arguments)},trackDetail:function(){K._trackDetail.apply(K,arguments)},trackCart:function(a,b){K._trackCart.apply(K,arguments)},trackCheckout:function(a,b){K._trackCheckOut.apply(K,arguments)},trackTimings:function(a,b,c,d){K._trackTimings.apply(K,arguments)},trackTransaction:function(a,b,c,d,e,f,g,h,i){K._trackTransaction.apply(K,arguments)},trackException:function(a,b){K._trackException.apply(K,arguments)},setAction:function(a,b){K._setAction.apply(K,arguments)},pageView:function(){K._pageView.apply(K,arguments)},send:function(a){K._send.apply(K,arguments)},set:function(a,b,c){K._set.apply(K,arguments)}}}]}).directive("gaTrackEvent",["Analytics","$parse",function(a,b){return{restrict:"A",link:function(c,d,e){var f=b(e.gaTrackEvent);d.bind("click",function(){e.gaTrackEventIf&&!c.$eval(e.gaTrackEventIf)||f.length>1&&a.trackEvent.apply(a,f(c))})}}}]),a.module("angular-google-analytics")});var mod;mod=angular.module("infinite-scroll",[]),mod.value("THROTTLE_MILLISECONDS",null),mod.directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(a,b,c,d){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return z=angular.element(b),u=null,v=null,j=null,k=null,r=!0,y=!1,x=null,i=!1,q=function(a){return a=a[0]||a,isNaN(a.offsetHeight)?a.document.documentElement.clientHeight:a.offsetHeight},s=function(a){if(a[0].getBoundingClientRect&&!a.css("none"))return a[0].getBoundingClientRect().top+t(a)},t=function(a){return a=a[0]||a,isNaN(window.pageYOffset)?a.document.documentElement.scrollTop:a.ownerDocument.defaultView.pageYOffset},p=function(){var b,d,g,h,l;return k===z?(b=q(k)+t(k[0].document.documentElement),g=s(f)+q(f)):(b=q(k),d=0,void 0!==s(k)&&(d=s(k)),g=s(f)-d+q(f)),y&&(g=q((f[0].ownerDocument||f[0].document).documentElement)),h=g-b,l=h<=q(k)*u+1,l?(j=!0,v?e.$$phase||a.$$phase?e.infiniteScroll():e.$apply(e.infiniteScroll):void 0):(i&&c.cancel(i),j=!1)},w=function(a,b){var d,e,f;return f=null,e=0,d=function(){var b;return e=(new Date).getTime(),c.cancel(f),f=null,a.call(),b=null},function(){var g,h;return g=(new Date).getTime(),h=b-(g-e),h<=0?(clearTimeout(f),c.cancel(f),f=null,e=g,a.call()):f?void 0:f=c(d,h,1)}},null!=d&&(p=w(p,d)),e.$on("$destroy",function(){if(k.unbind("scroll",p),null!=x)return x(),x=null}),n=function(a){return u=parseFloat(a)||0},e.$watch("infiniteScrollDistance",n),n(e.infiniteScrollDistance),m=function(a){if(v=!a,v&&j)return j=!1,p()},e.$watch("infiniteScrollDisabled",m),m(e.infiniteScrollDisabled),o=function(a){return y=a},e.$watch("infiniteScrollUseDocumentBottom",o),o(e.infiniteScrollUseDocumentBottom),h=function(a){if(null!=k&&k.unbind("scroll",p),k=a,null!=a)return k.bind("scroll",p)},h(z),e.infiniteScrollListenForEvent&&(x=a.$on(e.infiniteScrollListenForEvent,p)),l=function(a){if(null!=a&&0!==a.length){if(a instanceof HTMLElement?a=angular.element(a):"function"==typeof a.append?a=angular.element(a[a.length-1]):"string"==typeof a&&(a=angular.element(document.querySelector(a))),null!=a)return h(a);throw new Exception("invalid infinite-scroll-container attribute.")}},e.$watch("infiniteScrollContainer",l),l(e.infiniteScrollContainer||[]),null!=g.infiniteScrollParent&&h(angular.element(f.parent())),null!=g.infiniteScrollImmediateCheck&&(r=e.$eval(g.infiniteScrollImmediateCheck)),i=c(function(){if(r)return p()},0)}}}]),!function(a,b,c){var d=a.L,e={};e.version="0.7.7","object"==typeof module&&"object"==typeof module.exports?module.exports=e:"function"==typeof define&&define.amd&&define(e),e.noConflict=function(){return a.L=d,this},a.L=e,e.Util={extend:function(a){var b,c,d,e,f=Array.prototype.slice.call(arguments,1);for(c=0,d=f.length;d>c;c++){e=f[c]||{};for(b in e)e.hasOwnProperty(b)&&(a[b]=e[b])}return a},bind:function(a,b){var c=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return a.apply(b,c||arguments)}},stamp:function(){var a=0,b="_leaflet_id";return function(c){return c[b]=c[b]||++a,c[b]}}(),invokeEach:function(a,b,c){var d,e;if("object"==typeof a){e=Array.prototype.slice.call(arguments,3);for(d in a)b.apply(c,[d,a[d]].concat(e));return!0}return!1},limitExecByInterval:function(a,b,c){var d,e;return function f(){var g=arguments;return d?void(e=!0):(d=!0,setTimeout(function(){d=!1,e&&(f.apply(c,g),e=!1)},b),void a.apply(c,g))}},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return e.Util.trim(a).split(/\s+/)},setOptions:function(a,b){return a.options=e.extend({},a.options,b),a.options},getParamString:function(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&-1!==b.indexOf("?")?"&":"?")+d.join("&")},template:function(a,b){return a.replace(/\{ *([\w_]+) *\}/g,function(a,d){var e=b[d];if(e===c)throw new Error("No value provided for variable "+a);return"function"==typeof e&&(e=e(b)),e})},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){var c,d,e=["webkit","moz","o","ms"];for(c=0;c<e.length&&!d;c++)d=a[e[c]+b];return d}function c(b){var c=+new Date,e=Math.max(0,16-(c-d));return d=c+e,a.setTimeout(b,e)}var d=0,f=a.requestAnimationFrame||b("RequestAnimationFrame")||c,g=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};e.Util.requestAnimFrame=function(b,d,g,h){return b=e.bind(b,d),g&&f===c?void b():f.call(a,b,h)},e.Util.cancelAnimFrame=function(b){b&&g.call(a,b)}}(),e.extend=e.Util.extend,e.bind=e.Util.bind,e.stamp=e.Util.stamp,e.setOptions=e.Util.setOptions,e.Class=function(){},e.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},c=function(){};c.prototype=this.prototype;var d=new c;d.constructor=b,b.prototype=d;for(var f in this)this.hasOwnProperty(f)&&"prototype"!==f&&(b[f]=this[f]);a.statics&&(e.extend(b,a.statics),delete a.statics),a.includes&&(e.Util.extend.apply(null,[d].concat(a.includes)),delete a.includes),a.options&&d.options&&(a.options=e.extend({},d.options,a.options)),e.extend(d,a),d._initHooks=[];var g=this;return b.__super__=g.prototype,d.callInitHooks=function(){if(!this._initHooksCalled){g.prototype.callInitHooks&&g.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=d._initHooks.length;b>a;a++)d._initHooks[a].call(this)}},b},e.Class.include=function(a){
e.extend(this.prototype,a)},e.Class.mergeOptions=function(a){e.extend(this.prototype.options,a)},e.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c)};var f="_leaflet_events";e.Mixin={},e.Mixin.Events={addEventListener:function(a,b,c){if(e.Util.invokeEach(a,this.addEventListener,this,b,c))return this;var d,g,h,i,j,k,l,m=this[f]=this[f]||{},n=c&&c!==this&&e.stamp(c);for(a=e.Util.splitWords(a),d=0,g=a.length;g>d;d++)h={action:b,context:c||this},i=a[d],n?(j=i+"_idx",k=j+"_len",l=m[j]=m[j]||{},l[n]||(l[n]=[],m[k]=(m[k]||0)+1),l[n].push(h)):(m[i]=m[i]||[],m[i].push(h));return this},hasEventListeners:function(a){var b=this[f];return!!b&&(a in b&&b[a].length>0||a+"_idx"in b&&b[a+"_idx_len"]>0)},removeEventListener:function(a,b,c){if(!this[f])return this;if(!a)return this.clearAllEventListeners();if(e.Util.invokeEach(a,this.removeEventListener,this,b,c))return this;var d,g,h,i,j,k,l,m,n,o=this[f],p=c&&c!==this&&e.stamp(c);for(a=e.Util.splitWords(a),d=0,g=a.length;g>d;d++)if(h=a[d],k=h+"_idx",l=k+"_len",m=o[k],b){if(i=p&&m?m[p]:o[h]){for(j=i.length-1;j>=0;j--)i[j].action!==b||c&&i[j].context!==c||(n=i.splice(j,1),n[0].action=e.Util.falseFn);c&&m&&0===i.length&&(delete m[p],o[l]--)}}else delete o[h],delete o[k],delete o[l];return this},clearAllEventListeners:function(){return delete this[f],this},fireEvent:function(a,b){if(!this.hasEventListeners(a))return this;var c,d,g,h,i,j=e.Util.extend({},b,{type:a,target:this}),k=this[f];if(k[a])for(c=k[a].slice(),d=0,g=c.length;g>d;d++)c[d].action.call(c[d].context,j);h=k[a+"_idx"];for(i in h)if(c=h[i].slice())for(d=0,g=c.length;g>d;d++)c[d].action.call(c[d].context,j);return this},addOneTimeEventListener:function(a,b,c){if(e.Util.invokeEach(a,this.addOneTimeEventListener,this,b,c))return this;var d=e.bind(function(){this.removeEventListener(a,b,c).removeEventListener(a,d,c)},this);return this.addEventListener(a,b,c).addEventListener(a,d,c)}},e.Mixin.Events.on=e.Mixin.Events.addEventListener,e.Mixin.Events.off=e.Mixin.Events.removeEventListener,e.Mixin.Events.once=e.Mixin.Events.addOneTimeEventListener,e.Mixin.Events.fire=e.Mixin.Events.fireEvent,function(){var d="ActiveXObject"in a,f=d&&!b.addEventListener,g=navigator.userAgent.toLowerCase(),h=-1!==g.indexOf("webkit"),i=-1!==g.indexOf("chrome"),j=-1!==g.indexOf("phantom"),k=-1!==g.indexOf("android"),l=-1!==g.search("android [23]"),m=-1!==g.indexOf("gecko"),n=typeof orientation!=c+"",o=!a.PointerEvent&&a.MSPointerEvent,p=a.PointerEvent&&a.navigator.pointerEnabled||o,q="devicePixelRatio"in a&&a.devicePixelRatio>1||"matchMedia"in a&&a.matchMedia("(min-resolution:144dpi)")&&a.matchMedia("(min-resolution:144dpi)").matches,r=b.documentElement,s=d&&"transition"in r.style,t="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!l,u="MozPerspective"in r.style,v="OTransition"in r.style,w=!a.L_DISABLE_3D&&(s||t||u||v)&&!j,x=!a.L_NO_TOUCH&&!j&&(p||"ontouchstart"in a||a.DocumentTouch&&b instanceof a.DocumentTouch);e.Browser={ie:d,ielt9:f,webkit:h,gecko:m&&!h&&!a.opera&&!d,android:k,android23:l,chrome:i,ie3d:s,webkit3d:t,gecko3d:u,opera3d:v,any3d:w,mobile:n,mobileWebkit:n&&h,mobileWebkit3d:n&&t,mobileOpera:n&&a.opera,touch:x,msPointer:o,pointer:p,retina:q}}(),e.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},add:function(a){return this.clone()._add(e.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(e.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(a){a=e.point(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=e.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=e.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+e.Util.formatNum(this.x)+", "+e.Util.formatNum(this.y)+")"}},e.point=function(a,b,d){return a instanceof e.Point?a:e.Util.isArray(a)?new e.Point(a[0],a[1]):a===c||null===a?a:new e.Point(a,b,d)},e.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},e.Bounds.prototype={extend:function(a){return a=e.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new e.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new e.Point(this.min.x,this.max.y)},getTopRight:function(){return new e.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof e.Point?e.point(a):e.bounds(a),a instanceof e.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=e.bounds(a);var b=this.min,c=this.max,d=a.min,f=a.max,g=f.x>=b.x&&d.x<=c.x,h=f.y>=b.y&&d.y<=c.y;return g&&h},isValid:function(){return!(!this.min||!this.max)}},e.bounds=function(a,b){return!a||a instanceof e.Bounds?a:new e.Bounds(a,b)},e.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},e.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new e.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},e.DomUtil={get:function(a){return"string"==typeof a?b.getElementById(a):a},getStyle:function(a,c){var d=a.style[c];if(!d&&a.currentStyle&&(d=a.currentStyle[c]),(!d||"auto"===d)&&b.defaultView){var e=b.defaultView.getComputedStyle(a,null);d=e?e[c]:null}return"auto"===d?null:d},getViewportOffset:function(a){var c,d=0,f=0,g=a,h=b.body,i=b.documentElement;do{if(d+=g.offsetTop||0,f+=g.offsetLeft||0,d+=parseInt(e.DomUtil.getStyle(g,"borderTopWidth"),10)||0,f+=parseInt(e.DomUtil.getStyle(g,"borderLeftWidth"),10)||0,c=e.DomUtil.getStyle(g,"position"),g.offsetParent===h&&"absolute"===c)break;if("fixed"===c){d+=h.scrollTop||i.scrollTop||0,f+=h.scrollLeft||i.scrollLeft||0;break}if("relative"===c&&!g.offsetLeft){var j=e.DomUtil.getStyle(g,"width"),k=e.DomUtil.getStyle(g,"max-width"),l=g.getBoundingClientRect();("none"!==j||"none"!==k)&&(f+=l.left+g.clientLeft),d+=l.top+(h.scrollTop||i.scrollTop||0);break}g=g.offsetParent}while(g);g=a;do{if(g===h)break;d-=g.scrollTop||0,f-=g.scrollLeft||0,g=g.parentNode}while(g);return new e.Point(f,d)},documentIsLtr:function(){return e.DomUtil._docIsLtrCached||(e.DomUtil._docIsLtrCached=!0,e.DomUtil._docIsLtr="ltr"===e.DomUtil.getStyle(b.body,"direction")),e.DomUtil._docIsLtr},create:function(a,c,d){var e=b.createElement(a);return e.className=c,d&&d.appendChild(e),e},hasClass:function(a,b){if(a.classList!==c)return a.classList.contains(b);var d=e.DomUtil._getClass(a);return d.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(d)},addClass:function(a,b){if(a.classList!==c)for(var d=e.Util.splitWords(b),f=0,g=d.length;g>f;f++)a.classList.add(d[f]);else if(!e.DomUtil.hasClass(a,b)){var h=e.DomUtil._getClass(a);e.DomUtil._setClass(a,(h?h+" ":"")+b)}},removeClass:function(a,b){a.classList!==c?a.classList.remove(b):e.DomUtil._setClass(a,e.Util.trim((" "+e.DomUtil._getClass(a)+" ").replace(" "+b+" "," ")))},_setClass:function(a,b){a.className.baseVal===c?a.className=b:a.className.baseVal=b},_getClass:function(a){return a.className.baseVal===c?a.className:a.className.baseVal},setOpacity:function(a,b){if("opacity"in a.style)a.style.opacity=b;else if("filter"in a.style){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(e){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"}},testProp:function(a){for(var c=b.documentElement.style,d=0;d<a.length;d++)if(a[d]in c)return a[d];return!1},getTranslateString:function(a){var b=e.Browser.webkit3d,c="translate"+(b?"3d":"")+"(",d=(b?",0":"")+")";return c+a.x+"px,"+a.y+"px"+d},getScaleString:function(a,b){var c=e.DomUtil.getTranslateString(b.add(b.multiplyBy(-1*a))),d=" scale("+a+") ";return c+d},setPosition:function(a,b,c){a._leaflet_pos=b,!c&&e.Browser.any3d?a.style[e.DomUtil.TRANSFORM]=e.DomUtil.getTranslateString(b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos}},e.DomUtil.TRANSFORM=e.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),e.DomUtil.TRANSITION=e.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),e.DomUtil.TRANSITION_END="webkitTransition"===e.DomUtil.TRANSITION||"OTransition"===e.DomUtil.TRANSITION?e.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in b)e.extend(e.DomUtil,{disableTextSelection:function(){e.DomEvent.on(a,"selectstart",e.DomEvent.preventDefault)},enableTextSelection:function(){e.DomEvent.off(a,"selectstart",e.DomEvent.preventDefault)}});else{var c=e.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);e.extend(e.DomUtil,{disableTextSelection:function(){if(c){var a=b.documentElement.style;this._userSelect=a[c],a[c]="none"}},enableTextSelection:function(){c&&(b.documentElement.style[c]=this._userSelect,delete this._userSelect)}})}e.extend(e.DomUtil,{disableImageDrag:function(){e.DomEvent.on(a,"dragstart",e.DomEvent.preventDefault)},enableImageDrag:function(){e.DomEvent.off(a,"dragstart",e.DomEvent.preventDefault)}})}(),e.LatLng=function(a,b,d){if(a=parseFloat(a),b=parseFloat(b),isNaN(a)||isNaN(b))throw new Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=a,this.lng=b,d!==c&&(this.alt=parseFloat(d))},e.extend(e.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),e.LatLng.prototype={equals:function(a){if(!a)return!1;a=e.latLng(a);var b=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return b<=e.LatLng.MAX_MARGIN},toString:function(a){return"LatLng("+e.Util.formatNum(this.lat,a)+", "+e.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){a=e.latLng(a);var b=6378137,c=e.LatLng.DEG_TO_RAD,d=(a.lat-this.lat)*c,f=(a.lng-this.lng)*c,g=this.lat*c,h=a.lat*c,i=Math.sin(d/2),j=Math.sin(f/2),k=i*i+j*j*Math.cos(g)*Math.cos(h);return 2*b*Math.atan2(Math.sqrt(k),Math.sqrt(1-k))},wrap:function(a,b){var c=this.lng;return a=a||-180,b=b||180,c=(c+b)%(b-a)+(a>c||c===b?b:a),new e.LatLng(this.lat,c)}},e.latLng=function(a,b){return a instanceof e.LatLng?a:e.Util.isArray(a)?"number"==typeof a[0]||"string"==typeof a[0]?new e.LatLng(a[0],a[1],a[2]):null:a===c||null===a?a:"object"==typeof a&&"lat"in a?new e.LatLng(a.lat,"lng"in a?a.lng:a.lon):b===c?null:new e.LatLng(a,b)},e.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},e.LatLngBounds.prototype={extend:function(a){if(!a)return this;var b=e.latLng(a);return a=null!==b?b:e.latLngBounds(a),a instanceof e.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(a.lat,this._southWest.lat),this._southWest.lng=Math.min(a.lng,this._southWest.lng),this._northEast.lat=Math.max(a.lat,this._northEast.lat),this._northEast.lng=Math.max(a.lng,this._northEast.lng)):(this._southWest=new e.LatLng(a.lat,a.lng),this._northEast=new e.LatLng(a.lat,a.lng)):a instanceof e.LatLngBounds&&(this.extend(a._southWest),this.extend(a._northEast)),this},pad:function(a){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*a,f=Math.abs(b.lng-c.lng)*a;return new e.LatLngBounds(new e.LatLng(b.lat-d,b.lng-f),new e.LatLng(c.lat+d,c.lng+f))},getCenter:function(){return new e.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new e.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new e.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof e.LatLng?e.latLng(a):e.latLngBounds(a);var b,c,d=this._southWest,f=this._northEast;return a instanceof e.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=d.lat&&c.lat<=f.lat&&b.lng>=d.lng&&c.lng<=f.lng},intersects:function(a){a=e.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),f=a.getNorthEast(),g=f.lat>=b.lat&&d.lat<=c.lat,h=f.lng>=b.lng&&d.lng<=c.lng;return g&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return!!a&&(a=e.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},e.latLngBounds=function(a,b){return!a||a instanceof e.LatLngBounds?a:new e.LatLngBounds(a,b)},e.Projection={},e.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(a){var b=e.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),f=a.lng*b,g=d*b;return g=Math.log(Math.tan(Math.PI/4+g/2)),new e.Point(f,g)},unproject:function(a){var b=e.LatLng.RAD_TO_DEG,c=a.x*b,d=(2*Math.atan(Math.exp(a.y))-Math.PI/2)*b;return new e.LatLng(d,c)}},e.Projection.LonLat={project:function(a){return new e.Point(a.lng,a.lat)},unproject:function(a){return new e.LatLng(a.y,a.x)}},e.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},scale:function(a){return 256*Math.pow(2,a)},getSize:function(a){var b=this.scale(a);return e.point(b,b)}},e.CRS.Simple=e.extend({},e.CRS,{projection:e.Projection.LonLat,transformation:new e.Transformation(1,0,(-1),0),scale:function(a){return Math.pow(2,a)}}),e.CRS.EPSG3857=e.extend({},e.CRS,{code:"EPSG:3857",projection:e.Projection.SphericalMercator,transformation:new e.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(a){var b=this.projection.project(a),c=6378137;return b.multiplyBy(c)}}),e.CRS.EPSG900913=e.extend({},e.CRS.EPSG3857,{code:"EPSG:900913"}),e.CRS.EPSG4326=e.extend({},e.CRS,{code:"EPSG:4326",projection:e.Projection.LonLat,transformation:new e.Transformation(1/360,.5,-1/360,.5)}),e.Map=e.Class.extend({includes:e.Mixin.Events,options:{crs:e.CRS.EPSG3857,fadeAnimation:e.DomUtil.TRANSITION&&!e.Browser.android23,trackResize:!0,markerZoomAnimation:e.DomUtil.TRANSITION&&e.Browser.any3d},initialize:function(a,b){b=e.setOptions(this,b),this._initContainer(a),this._initLayout(),this._onResize=e.bind(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.center&&b.zoom!==c&&this.setView(e.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(b.layers)},setView:function(a,b){return b=b===c?this.getZoom():b,this._resetView(e.latLng(a),this._limitZoom(b)),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=this._limitZoom(a),this)},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,c){var d=this.getZoomScale(b),f=this.getSize().divideBy(2),g=a instanceof e.Point?a:this.latLngToContainerPoint(a),h=g.subtract(f).multiplyBy(1-1/d),i=this.containerPointToLatLng(f.add(h));return this.setView(i,b,{zoom:c})},fitBounds:function(a,b){b=b||{},a=a.getBounds?a.getBounds():e.latLngBounds(a);var c=e.point(b.paddingTopLeft||b.padding||[0,0]),d=e.point(b.paddingBottomRight||b.padding||[0,0]),f=this.getBoundsZoom(a,!1,c.add(d));f=b.maxZoom?Math.min(b.maxZoom,f):f;var g=d.subtract(c).divideBy(2),h=this.project(a.getSouthWest(),f),i=this.project(a.getNorthEast(),f),j=this.unproject(h.add(i).divideBy(2).add(g),f);return this.setView(j,f,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(e.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){return a=e.latLngBounds(a),this.options.maxBounds=a,a?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(a,b){var c=this.getCenter(),d=this._limitCenter(c,this._zoom,a);return c.equals(d)?this:this.panTo(d,b)},addLayer:function(a){var b=e.stamp(a);return this._layers[b]?this:(this._layers[b]=a,!a.options||isNaN(a.options.maxZoom)&&isNaN(a.options.minZoom)||(this._zoomBoundLayers[b]=a,this._updateZoomLevels()),this.options.zoomAnimation&&e.TileLayer&&a instanceof e.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,a.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(a),this)},removeLayer:function(a){var b=e.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),delete this._layers[b],this._loaded&&this.fire("layerremove",{layer:a}),this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels()),this.options.zoomAnimation&&e.TileLayer&&a instanceof e.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,a.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(a){return!!a&&e.stamp(a)in this._layers},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},invalidateSize:function(a){if(!this._loaded)return this;a=e.extend({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var c=this.getSize(),d=b.divideBy(2).round(),f=c.divideBy(2).round(),g=d.subtract(f);return g.x||g.y?(a.animate&&a.pan?this.panBy(g):(a.pan&&this._rawPanBy(g),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(e.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(a){this._container._leaflet=c}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new e.LatLngBounds(b,c)},getMinZoom:function(){return this.options.minZoom===c?this._layersMinZoom===c?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===c?this._layersMaxZoom===c?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=e.latLngBounds(a);var d,f=this.getMinZoom()-(b?1:0),g=this.getMaxZoom(),h=this.getSize(),i=a.getNorthWest(),j=a.getSouthEast(),k=!0;c=e.point(c||[0,0]);do f++,d=this.project(j,f).subtract(this.project(i,f)).add(c),k=b?d.x<h.x||d.y<h.y:h.contains(d);while(k&&g>=f);return k&&b?null:b?f:f-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new e.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var a=this._getTopLeftPoint();return new e.Bounds(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a){var b=this.options.crs;return b.scale(a)/b.scale(this._zoom)},getScaleZoom:function(a){return this._zoom+Math.log(a)/Math.LN2},project:function(a,b){return b=b===c?this._zoom:b,this.options.crs.latLngToPoint(e.latLng(a),b)},unproject:function(a,b){return b=b===c?this._zoom:b,this.options.crs.pointToLatLng(e.point(a),b)},layerPointToLatLng:function(a){var b=e.point(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(e.latLng(a))._round();return b._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(a){return e.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return e.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(e.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(e.latLng(a)))},mouseEventToContainerPoint:function(a){return e.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=e.DomUtil.get(a);if(!b)throw new Error("Map container not found.");if(b._leaflet)throw new Error("Map container is already initialized.");b._leaflet=!0},_initLayout:function(){var a=this._container;e.DomUtil.addClass(a,"leaflet-container"+(e.Browser.touch?" leaflet-touch":"")+(e.Browser.retina?" leaflet-retina":"")+(e.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var b=e.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._mapPane=a.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=a.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),a.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),a.shadowPane=this._createPane("leaflet-shadow-pane"),a.overlayPane=this._createPane("leaflet-overlay-pane"),a.markerPane=this._createPane("leaflet-marker-pane"),a.popupPane=this._createPane("leaflet-popup-pane");var b=" leaflet-zoom-hide";this.options.markerZoomAnimation||(e.DomUtil.addClass(a.markerPane,b),e.DomUtil.addClass(a.shadowPane,b),e.DomUtil.addClass(a.popupPane,b))},_createPane:function(a,b){return e.DomUtil.create("div",a,b||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(a){a=a?e.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;c>b;b++)this.addLayer(a[b])},_resetView:function(a,b,c,d){var f=this._zoom!==b;d||(this.fire("movestart"),f&&this.fire("zoomstart")),this._zoom=b,this._initialCenter=a,this._initialTopLeftPoint=this._getNewTopLeftPoint(a),c?this._initialTopLeftPoint._add(this._getMapPanePos()):e.DomUtil.setPosition(this._mapPane,new e.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var g=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!c}),g&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(f||d)&&this.fire("zoomend"),this.fire("moveend",{hard:!c})},_rawPanBy:function(a){e.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var a,b=1/0,d=-(1/0),e=this._getZoomSpan();for(a in this._zoomBoundLayers){var f=this._zoomBoundLayers[a];isNaN(f.options.minZoom)||(b=Math.min(b,f.options.minZoom)),isNaN(f.options.maxZoom)||(d=Math.max(d,f.options.maxZoom))}a===c?this._layersMaxZoom=this._layersMinZoom=c:(this._layersMaxZoom=d,this._layersMinZoom=b),e!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){if(e.DomEvent){b=b||"on",e.DomEvent[b](this._container,"click",this._onMouseClick,this);var c,d,f=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(c=0,d=f.length;d>c;c++)e.DomEvent[b](this._container,f[c],this._fireMouseEvent,this);this.options.trackResize&&e.DomEvent[b](a,"resize",this._onResize,this)}},_onResize:function(){e.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=e.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(a){!this._loaded||!a._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||e.DomEvent._skipped(a)||(this.fire("preclick"),this._fireMouseEvent(a))},_fireMouseEvent:function(a){if(this._loaded&&!e.DomEvent._skipped(a)){var b=a.type;if(b="mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,this.hasEventListeners(b)){"contextmenu"===b&&e.DomEvent.preventDefault(a);var c=this.mouseEventToContainerPoint(a),d=this.containerPointToLayerPoint(c),f=this.layerPointToLatLng(d);this.fire(b,{latlng:f,layerPoint:d,containerPoint:c,originalEvent:a})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var a=0,b=this._handlers.length;b>a;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,this):this.on("load",a,b),this},_layerAdd:function(a){a.onAdd(this),this.fire("layeradd",{layer:a})},_getMapPanePos:function(){return e.DomUtil.getPosition(this._mapPane)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewTopLeftPoint(c,b).add(this._getMapPanePos());return this.project(a,b)._subtract(d)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;var d=this.project(a,b),f=this.getSize().divideBy(2),g=new e.Bounds(d.subtract(f),d.add(f)),h=this._getBoundsOffset(g,c,b);return this.unproject(d.add(h),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),d=new e.Bounds(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,b,c){var d=this.project(b.getNorthWest(),c).subtract(a.min),f=this.project(b.getSouthEast(),c).subtract(a.max),g=this._rebound(d.x,-f.x),h=this._rebound(d.y,-f.y);return new e.Point(g,h)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return Math.max(b,Math.min(c,a))}}),e.map=function(a,b){return new e.Map(a,b)},e.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(a){var b=e.LatLng.DEG_TO_RAD,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),f=this.R_MAJOR,g=this.R_MINOR,h=a.lng*b*f,i=d*b,j=g/f,k=Math.sqrt(1-j*j),l=k*Math.sin(i);l=Math.pow((1-l)/(1+l),.5*k);var m=Math.tan(.5*(.5*Math.PI-i))/l;return i=-f*Math.log(m),new e.Point(h,i)},unproject:function(a){for(var b,c=e.LatLng.RAD_TO_DEG,d=this.R_MAJOR,f=this.R_MINOR,g=a.x*c/d,h=f/d,i=Math.sqrt(1-h*h),j=Math.exp(-a.y/d),k=Math.PI/2-2*Math.atan(j),l=15,m=1e-7,n=l,o=.1;Math.abs(o)>m&&--n>0;)b=i*Math.sin(k),o=Math.PI/2-2*Math.atan(j*Math.pow((1-b)/(1+b),.5*i))-k,k+=o;return new e.LatLng(k*c,g)}},e.CRS.EPSG3395=e.extend({},e.CRS,{code:"EPSG:3395",projection:e.Projection.Mercator,transformation:function(){var a=e.Projection.Mercator,b=a.R_MAJOR,c=.5/(Math.PI*b);return new e.Transformation(c,.5,(-c),.5)}()}),e.TileLayer=e.Class.extend({includes:e.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:e.Browser.mobile,updateWhenIdle:e.Browser.mobile},initialize:function(a,b){b=e.setOptions(this,b),b.detectRetina&&e.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,b.minZoom>0&&b.minZoom--,this.options.maxZoom--),b.bounds&&(b.bounds=e.latLngBounds(b.bounds)),this._url=a;var c=this.options.subdomains;"string"==typeof c&&(this.options.subdomains=c.split(""))},onAdd:function(a){this._map=a,this._animated=a._zoomAnimated,this._initContainer(),a.on({viewreset:this._reset,moveend:this._update},this),this._animated&&a.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=e.Util.limitExecByInterval(this._update,150,this),a.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this._container.parentNode.removeChild(this._container),a.off({viewreset:this._reset,moveend:this._update},this),this._animated&&a.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||a.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var a=this._map._panes.tilePane;return this._container&&(a.appendChild(this._container),this._setAutoZIndex(a,Math.max)),this},bringToBack:function(){var a=this._map._panes.tilePane;return this._container&&(a.insertBefore(this._container,a.firstChild),this._setAutoZIndex(a,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==c&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a,b){var c,d,e,f=a.children,g=-b(1/0,-(1/0));for(d=0,e=f.length;e>d;d++)f[d]!==this._container&&(c=parseInt(f[d].style.zIndex,10),isNaN(c)||(g=b(g,c)));this.options.zIndex=this._container.style.zIndex=(isFinite(g)?g:0)+b(1,-1)},_updateOpacity:function(){var a,b=this._tiles;if(e.Browser.ielt9)for(a in b)e.DomUtil.setOpacity(b[a],this.options.opacity);else e.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var a=this._map._panes.tilePane;if(!this._container){if(this._container=e.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var b="leaflet-tile-container";this._bgBuffer=e.DomUtil.create("div",b,this._container),this._tileContainer=e.DomUtil.create("div",b,this._container)}else this._tileContainer=this._container;a.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(a){for(var b in this._tiles)this.fire("tileunload",{
tile:this._tiles[b]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&a&&a.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var a=this._map,b=a.getZoom()+this.options.zoomOffset,c=this.options.maxNativeZoom,d=this.options.tileSize;return c&&b>c&&(d=Math.round(a.getZoomScale(b)/a.getZoomScale(c)*d)),d},_update:function(){if(this._map){var a=this._map,b=a.getPixelBounds(),c=a.getZoom(),d=this._getTileSize();if(!(c>this.options.maxZoom||c<this.options.minZoom)){var f=e.bounds(b.min.divideBy(d)._floor(),b.max.divideBy(d)._floor());this._addTilesFromCenterOut(f),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(f)}}},_addTilesFromCenterOut:function(a){var c,d,f,g=[],h=a.getCenter();for(c=a.min.y;c<=a.max.y;c++)for(d=a.min.x;d<=a.max.x;d++)f=new e.Point(d,c),this._tileShouldBeLoaded(f)&&g.push(f);var i=g.length;if(0!==i){g.sort(function(a,b){return a.distanceTo(h)-b.distanceTo(h)});var j=b.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=i,d=0;i>d;d++)this._addTile(g[d],j);this._tileContainer.appendChild(j)}},_tileShouldBeLoaded:function(a){if(a.x+":"+a.y in this._tiles)return!1;var b=this.options;if(!b.continuousWorld){var c=this._getWrapTileNum();if(b.noWrap&&(a.x<0||a.x>=c.x)||a.y<0||a.y>=c.y)return!1}if(b.bounds){var d=this._getTileSize(),e=a.multiplyBy(d),f=e.add([d,d]),g=this._map.unproject(e),h=this._map.unproject(f);if(b.continuousWorld||b.noWrap||(g=g.wrap(),h=h.wrap()),!b.bounds.intersects([g,h]))return!1}return!0},_removeOtherTiles:function(a){var b,c,d,e;for(e in this._tiles)b=e.split(":"),c=parseInt(b[0],10),d=parseInt(b[1],10),(c<a.min.x||c>a.max.x||d<a.min.y||d>a.max.y)&&this._removeTile(e)},_removeTile:function(a){var b=this._tiles[a];this.fire("tileunload",{tile:b,url:b.src}),this.options.reuseTiles?(e.DomUtil.removeClass(b,"leaflet-tile-loaded"),this._unusedTiles.push(b)):b.parentNode===this._tileContainer&&this._tileContainer.removeChild(b),e.Browser.android||(b.onload=null,b.src=e.Util.emptyImageUrl),delete this._tiles[a]},_addTile:function(a,b){var c=this._getTilePos(a),d=this._getTile();e.DomUtil.setPosition(d,c,e.Browser.chrome),this._tiles[a.x+":"+a.y]=d,this._loadTile(d,a),d.parentNode!==this._tileContainer&&b.appendChild(d)},_getZoomForUrl:function(){var a=this.options,b=this._map.getZoom();return a.zoomReverse&&(b=a.maxZoom-b),b+=a.zoomOffset,a.maxNativeZoom?Math.min(b,a.maxNativeZoom):b},_getTilePos:function(a){var b=this._map.getPixelOrigin(),c=this._getTileSize();return a.multiplyBy(c).subtract(b)},getTileUrl:function(a){return e.Util.template(this._url,e.extend({s:this._getSubdomain(a),z:a.z,x:a.x,y:a.y},this.options))},_getWrapTileNum:function(){var a=this._map.options.crs,b=a.getSize(this._map.getZoom());return b.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(a){var b=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(a.x=(a.x%b.x+b.x)%b.x),this.options.tms&&(a.y=b.y-a.y-1),a.z=this._getZoomForUrl()},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var a=this._unusedTiles.pop();return this._resetTile(a),a}return this._createTile()},_resetTile:function(){},_createTile:function(){var a=e.DomUtil.create("img","leaflet-tile");return a.style.width=a.style.height=this._getTileSize()+"px",a.galleryimg="no",a.onselectstart=a.onmousemove=e.Util.falseFn,e.Browser.ielt9&&this.options.opacity!==c&&e.DomUtil.setOpacity(a,this.options.opacity),e.Browser.mobileWebkit3d&&(a.style.WebkitBackfaceVisibility="hidden"),a},_loadTile:function(a,b){a._layer=this,a.onload=this._tileOnLoad,a.onerror=this._tileOnError,this._adjustTilePoint(b),a.src=this.getTileUrl(b),this.fire("tileloadstart",{tile:a,url:a.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&e.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(e.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var a=this._layer;this.src!==e.Util.emptyImageUrl&&(e.DomUtil.addClass(this,"leaflet-tile-loaded"),a.fire("tileload",{tile:this,url:this.src})),a._tileLoaded()},_tileOnError:function(){var a=this._layer;a.fire("tileerror",{tile:this,url:this.src});var b=a.options.errorTileUrl;b&&(this.src=b),a._tileLoaded()}}),e.tileLayer=function(a,b){return new e.TileLayer(a,b)},e.TileLayer.WMS=e.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(a,b){this._url=a;var c=e.extend({},this.defaultWmsParams),d=b.tileSize||this.options.tileSize;b.detectRetina&&e.Browser.retina?c.width=c.height=2*d:c.width=c.height=d;for(var f in b)this.options.hasOwnProperty(f)||"crs"===f||(c[f]=b[f]);this.wmsParams=c,e.setOptions(this,b)},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,e.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._map,c=this.options.tileSize,d=a.multiplyBy(c),f=d.add([c,c]),g=this._crs.project(b.unproject(d,a.z)),h=this._crs.project(b.unproject(f,a.z)),i=this._wmsVersion>=1.3&&this._crs===e.CRS.EPSG4326?[h.y,g.x,g.y,h.x].join(","):[g.x,h.y,h.x,g.y].join(","),j=e.Util.template(this._url,{s:this._getSubdomain(a)});return j+e.Util.getParamString(this.wmsParams,j,!0)+"&BBOX="+i},setParams:function(a,b){return e.extend(this.wmsParams,a),b||this.redraw(),this}}),e.tileLayer.wms=function(a,b){return new e.TileLayer.WMS(a,b)},e.TileLayer.Canvas=e.TileLayer.extend({options:{async:!1},initialize:function(a){e.setOptions(this,a)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var a in this._tiles)this._redrawTile(this._tiles[a]);return this},_redrawTile:function(a){this.drawTile(a,a._tilePoint,this._map._zoom)},_createTile:function(){var a=e.DomUtil.create("canvas","leaflet-tile");return a.width=a.height=this.options.tileSize,a.onselectstart=a.onmousemove=e.Util.falseFn,a},_loadTile:function(a,b){a._layer=this,a._tilePoint=b,this._redrawTile(a),this.options.async||this.tileDrawn(a)},drawTile:function(){},tileDrawn:function(a){this._tileOnLoad.call(a)}}),e.tileLayer.canvas=function(a){return new e.TileLayer.Canvas(a)},e.ImageOverlay=e.Class.extend({includes:e.Mixin.Events,options:{opacity:1},initialize:function(a,b,c){this._url=a,this._bounds=e.latLngBounds(b),e.setOptions(this,c)},onAdd:function(a){this._map=a,this._image||this._initImage(),a._panes.overlayPane.appendChild(this._image),a.on("viewreset",this._reset,this),a.options.zoomAnimation&&e.Browser.any3d&&a.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._image),a.off("viewreset",this._reset,this),a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var a=this._map._panes.overlayPane;return this._image&&a.insertBefore(this._image,a.firstChild),this},setUrl:function(a){this._url=a,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=e.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&e.Browser.any3d?e.DomUtil.addClass(this._image,"leaflet-zoom-animated"):e.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),e.extend(this._image,{galleryimg:"no",onselectstart:e.Util.falseFn,onmousemove:e.Util.falseFn,onload:e.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(a){var b=this._map,c=this._image,d=b.getZoomScale(a.zoom),f=this._bounds.getNorthWest(),g=this._bounds.getSouthEast(),h=b._latLngToNewLayerPoint(f,a.zoom,a.center),i=b._latLngToNewLayerPoint(g,a.zoom,a.center)._subtract(h),j=h._add(i._multiplyBy(.5*(1-1/d)));c.style[e.DomUtil.TRANSFORM]=e.DomUtil.getTranslateString(j)+" scale("+d+") "},_reset:function(){var a=this._image,b=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),c=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(b);e.DomUtil.setPosition(a,b),a.style.width=c.x+"px",a.style.height=c.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){e.DomUtil.setOpacity(this._image,this.options.opacity)}}),e.imageOverlay=function(a,b,c){return new e.ImageOverlay(a,b,c)},e.Icon=e.Class.extend({options:{className:""},initialize:function(a){e.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d;return d=b&&"IMG"===b.tagName?this._createImg(c,b):this._createImg(c),this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c,d=this.options,f=e.point(d[b+"Size"]);c="shadow"===b?e.point(d.shadowAnchor||d.iconAnchor):e.point(d.iconAnchor),!c&&f&&(c=f.divideBy(2,!0)),a.className="leaflet-marker-"+b+" "+d.className,c&&(a.style.marginLeft=-c.x+"px",a.style.marginTop=-c.y+"px"),f&&(a.style.width=f.x+"px",a.style.height=f.y+"px")},_createImg:function(a,c){return c=c||b.createElement("img"),c.src=a,c},_getIconUrl:function(a){return e.Browser.retina&&this.options[a+"RetinaUrl"]?this.options[a+"RetinaUrl"]:this.options[a+"Url"]}}),e.icon=function(a){return new e.Icon(a)},e.Icon.Default=e.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];e.Browser.retina&&"icon"===a&&(a+="-2x");var c=e.Icon.Default.imagePath;if(!c)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return c+"/marker-"+a+".png"}}),e.Icon.Default.imagePath=function(){var a,c,d,e,f,g=b.getElementsByTagName("script"),h=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(a=0,c=g.length;c>a;a++)if(d=g[a].src,e=d.match(h))return f=d.split(h)[0],(f?f+"/":"")+"images"}(),e.Marker=e.Class.extend({includes:e.Mixin.Events,options:{icon:new e.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(a,b){e.setOptions(this,b),this._latlng=e.latLng(a)},onAdd:function(a){this._map=a,a.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),a.options.zoomAnimation&&a.options.markerZoomAnimation&&a.on("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),a.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=e.latLng(a),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update(),this},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){return this._icon&&this._setPos(this._map.latLngToLayerPoint(this._latlng).round()),this},_initIcon:function(){var a=this.options,b=this._map,c=b.options.zoomAnimation&&b.options.markerZoomAnimation,d=c?"leaflet-zoom-animated":"leaflet-zoom-hide",f=a.icon.createIcon(this._icon),g=!1;f!==this._icon&&(this._icon&&this._removeIcon(),g=!0,a.title&&(f.title=a.title),a.alt&&(f.alt=a.alt)),e.DomUtil.addClass(f,d),a.keyboard&&(f.tabIndex="0"),this._icon=f,this._initInteraction(),a.riseOnHover&&e.DomEvent.on(f,"mouseover",this._bringToFront,this).on(f,"mouseout",this._resetZIndex,this);var h=a.icon.createShadow(this._shadow),i=!1;h!==this._shadow&&(this._removeShadow(),i=!0),h&&e.DomUtil.addClass(h,d),this._shadow=h,a.opacity<1&&this._updateOpacity();var j=this._map._panes;g&&j.markerPane.appendChild(this._icon),h&&i&&j.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&e.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(a){e.DomUtil.setPosition(this._icon,a),this._shadow&&e.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.clickable){var a=this._icon,b=["dblclick","mousedown","mouseover","mouseout","contextmenu"];e.DomUtil.addClass(a,"leaflet-clickable"),e.DomEvent.on(a,"click",this._onMouseClick,this),e.DomEvent.on(a,"keypress",this._onKeyPress,this);for(var c=0;c<b.length;c++)e.DomEvent.on(a,b[c],this._fireMouseEvent,this);e.Handler.MarkerDrag&&(this.dragging=new e.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(a){var b=this.dragging&&this.dragging.moved();(this.hasEventListeners(a.type)||b)&&e.DomEvent.stopPropagation(a),b||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(a.type,{originalEvent:a,latlng:this._latlng})},_onKeyPress:function(a){13===a.keyCode&&this.fire("click",{originalEvent:a,latlng:this._latlng})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a,latlng:this._latlng}),"contextmenu"===a.type&&this.hasEventListeners(a.type)&&e.DomEvent.preventDefault(a),"mousedown"!==a.type?e.DomEvent.stopPropagation(a):e.DomEvent.preventDefault(a)},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){e.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&e.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),e.marker=function(a,b){return new e.Marker(a,b)},e.DivIcon=e.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){var c=a&&"DIV"===a.tagName?a:b.createElement("div"),d=this.options;return d.html!==!1?c.innerHTML=d.html:c.innerHTML="",d.bgPos&&(c.style.backgroundPosition=-d.bgPos.x+"px "+-d.bgPos.y+"px"),this._setIconStyles(c,"icon"),c},createShadow:function(){return null}}),e.divIcon=function(a){return new e.DivIcon(a)},e.Map.mergeOptions({closePopupOnClick:!0}),e.Popup=e.Class.extend({includes:e.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(a,b){e.setOptions(this,a),this._source=b,this._animated=e.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(a){this._map=a,this._container||this._initLayout();var b=a.options.fadeAnimation;b&&e.DomUtil.setOpacity(this._container,0),a._panes.popupPane.appendChild(this._container),a.on(this._getEvents(),this),this.update(),b&&e.DomUtil.setOpacity(this._container,1),this.fire("open"),a.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(a){return a.addLayer(this),this},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._panes.popupPane.removeChild(this._container),e.Util.falseFn(this._container.offsetWidth),a.off(this._getEvents(),this),a.options.fadeAnimation&&e.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),a.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=e.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var a={viewreset:this._updatePosition};return this._animated&&(a.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a,b="leaflet-popup",c=b+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),d=this._container=e.DomUtil.create("div",c);this.options.closeButton&&(a=this._closeButton=e.DomUtil.create("a",b+"-close-button",d),a.href="#close",a.innerHTML="&#215;",e.DomEvent.disableClickPropagation(a),e.DomEvent.on(a,"click",this._onCloseButtonClick,this));var f=this._wrapper=e.DomUtil.create("div",b+"-content-wrapper",d);e.DomEvent.disableClickPropagation(f),this._contentNode=e.DomUtil.create("div",b+"-content",f),e.DomEvent.disableScrollPropagation(this._contentNode),e.DomEvent.on(f,"contextmenu",e.DomEvent.stopPropagation),this._tipContainer=e.DomUtil.create("div",b+"-tip-container",d),this._tip=e.DomUtil.create("div",b+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var d=a.offsetHeight,f=this.options.maxHeight,g="leaflet-popup-scrolled";f&&d>f?(b.height=f+"px",e.DomUtil.addClass(a,g)):e.DomUtil.removeClass(a,g),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=this._animated,c=e.point(this.options.offset);b&&e.DomUtil.setPosition(this._container,a),this._containerBottom=-c.y-(b?0:a.y),this._containerLeft=-Math.round(this._containerWidth/2)+c.x+(b?0:a.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);e.DomUtil.setPosition(this._container,b)},_adjustPan:function(){if(this.options.autoPan){var a=this._map,b=this._container.offsetHeight,c=this._containerWidth,d=new e.Point(this._containerLeft,-b-this._containerBottom);this._animated&&d._add(e.DomUtil.getPosition(this._container));var f=a.layerPointToContainerPoint(d),g=e.point(this.options.autoPanPadding),h=e.point(this.options.autoPanPaddingTopLeft||g),i=e.point(this.options.autoPanPaddingBottomRight||g),j=a.getSize(),k=0,l=0;f.x+c+i.x>j.x&&(k=f.x+c-j.x+i.x),f.x-k-h.x<0&&(k=f.x-h.x),f.y+b+i.y>j.y&&(l=f.y+b-j.y+i.y),f.y-l-h.y<0&&(l=f.y-h.y),(k||l)&&a.fire("autopanstart").panBy([k,l])}},_onCloseButtonClick:function(a){this._close(),e.DomEvent.stop(a)}}),e.popup=function(a,b){return new e.Popup(a,b)},e.Map.include({openPopup:function(a,b,c){if(this.closePopup(),!(a instanceof e.Popup)){var d=a;a=new e.Popup(c).setLatLng(b).setContent(d)}return a._isOpen=!0,this._popup=a,this.addLayer(a)},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&(this.removeLayer(a),a._isOpen=!1),this}}),e.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(a,b){var c=e.point(this.options.icon.options.popupAnchor||[0,0]);return c=c.add(e.Popup.prototype.options.offset),b&&b.offset&&(c=c.add(b.offset)),b=e.extend({offset:c},b),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),a instanceof e.Popup?(e.setOptions(a,b),this._popup=a,a._source=this):this._popup=new e.Popup(b,this).setContent(a),this},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),e.LayerGroup=e.Class.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;c>b;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return!!a&&(a in this._layers||this.getLayerId(a)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],c[a]&&c[a].apply(c,d);return this},onAdd:function(a){this._map=a,this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a),this._map=null},addTo:function(a){return a.addLayer(this),this},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return e.stamp(a)}}),e.layerGroup=function(a){return new e.LayerGroup(a)},e.FeatureGroup=e.LayerGroup.extend({includes:e.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(a){return this.hasLayer(a)?this:("on"in a&&a.on(e.FeatureGroup.EVENTS,this._propagateEvent,this),e.LayerGroup.prototype.addLayer.call(this,a),this._popupContent&&a.bindPopup&&a.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),"off"in a&&a.off(e.FeatureGroup.EVENTS,this._propagateEvent,this),e.LayerGroup.prototype.removeLayer.call(this,a),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:a})):this},bindPopup:function(a,b){return this._popupContent=a,this._popupOptions=b,this.invoke("bindPopup",a,b)},openPopup:function(a){for(var b in this._layers){this._layers[b].openPopup(a);break}return this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new e.LatLngBounds;return this.eachLayer(function(b){a.extend(b instanceof e.Marker?b.getLatLng():b.getBounds())}),a},_propagateEvent:function(a){a=e.extend({layer:a.target,target:this},a),this.fire(a.type,a)}}),e.featureGroup=function(a){return new e.FeatureGroup(a)},e.Path=e.Class.extend({includes:[e.Mixin.Events],statics:{CLIP_PADDING:function(){var b=e.Browser.mobile?1280:2e3,c=(b/Math.max(a.outerWidth,a.outerHeight)-1)/2;return Math.max(0,Math.min(.5,c))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(a){e.setOptions(this,a)},onAdd:function(a){this._map=a,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),a.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(a){return a.addLayer(this),this},onRemove:function(a){a._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,e.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),a.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(a){return e.setOptions(this,a),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),e.Map.include({_updatePathViewport:function(){var a=e.Path.CLIP_PADDING,b=this.getSize(),c=e.DomUtil.getPosition(this._mapPane),d=c.multiplyBy(-1)._subtract(b.multiplyBy(a)._round()),f=d.add(b.multiplyBy(1+2*a)._round());this._pathViewport=new e.Bounds(d,f)}}),e.Path.SVG_NS="http://www.w3.org/2000/svg",e.Browser.svg=!(!b.createElementNS||!b.createElementNS(e.Path.SVG_NS,"svg").createSVGRect),e.Path=e.Path.extend({statics:{SVG:e.Browser.svg},bringToFront:function(){var a=this._map._pathRoot,b=this._container;return b&&a.lastChild!==b&&a.appendChild(b),this},bringToBack:function(){var a=this._map._pathRoot,b=this._container,c=a.firstChild;return b&&c!==b&&a.insertBefore(b,c),this},getPathString:function(){},_createElement:function(a){return b.createElementNS(e.Path.SVG_NS,a)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&e.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var a=this.getPathString();a||(a="M0 0"),this._path.setAttribute("d",a)},_initEvents:function(){if(this.options.clickable){(e.Browser.svg||!e.Browser.vml)&&e.DomUtil.addClass(this._path,"leaflet-clickable"),e.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var a=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],b=0;b<a.length;b++)e.DomEvent.on(this._container,a[b],this._fireMouseEvent,this)}},_onMouseClick:function(a){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(a)},_fireMouseEvent:function(a){if(this._map&&this.hasEventListeners(a.type)){var b=this._map,c=b.mouseEventToContainerPoint(a),d=b.containerPointToLayerPoint(c),f=b.layerPointToLatLng(d);this.fire(a.type,{latlng:f,layerPoint:d,containerPoint:c,originalEvent:a}),"contextmenu"===a.type&&e.DomEvent.preventDefault(a),"mousemove"!==a.type&&e.DomEvent.stopPropagation(a)}}}),e.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=e.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&e.Browser.any3d?(e.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):e.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(a){var b=this.getZoomScale(a.zoom),c=this._getCenterOffset(a.center)._multiplyBy(-b)._add(this._pathViewport.min);this._pathRoot.style[e.DomUtil.TRANSFORM]=e.DomUtil.getTranslateString(c)+" scale("+b+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max,d=c.x-b.x,f=c.y-b.y,g=this._pathRoot,h=this._panes.overlayPane;e.Browser.mobileWebkit&&h.removeChild(g),e.DomUtil.setPosition(g,b),g.setAttribute("width",d),g.setAttribute("height",f),g.setAttribute("viewBox",[b.x,b.y,d,f].join(" ")),e.Browser.mobileWebkit&&h.appendChild(g)}}}),e.Path.include({bindPopup:function(a,b){return a instanceof e.Popup?this._popup=a:((!this._popup||b)&&(this._popup=new e.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(a){return this._popup&&(a=a||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:a})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(a){this._popup.setLatLng(a.latlng),this._map.openPopup(this._popup)}}),e.Browser.vml=!e.Browser.svg&&function(){try{var a=b.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&"object"==typeof c.adj}catch(d){return!1}}(),e.Path=e.Browser.svg||!e.Browser.vml?e.Path:e.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return b.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return b.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var a=this._container=this._createElement("shape");e.DomUtil.addClass(a,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&e.DomUtil.addClass(a,"leaflet-clickable"),a.coordsize="1 1",this._path=this._createElement("path"),a.appendChild(this._path),this._map._pathRoot.appendChild(a)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var a=this._stroke,b=this._fill,c=this.options,d=this._container;d.stroked=c.stroke,d.filled=c.fill,c.stroke?(a||(a=this._stroke=this._createElement("stroke"),a.endcap="round",d.appendChild(a)),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,c.dashArray?a.dashStyle=e.Util.isArray(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):a.dashStyle="",c.lineCap&&(a.endcap=c.lineCap.replace("butt","flat")),c.lineJoin&&(a.joinstyle=c.lineJoin)):a&&(d.removeChild(a),this._stroke=null),c.fill?(b||(b=this._fill=this._createElement("fill"),d.appendChild(b)),b.color=c.fillColor||c.color,
b.opacity=c.fillOpacity):b&&(d.removeChild(b),this._fill=null)},_updatePath:function(){var a=this._container.style;a.display="none",this._path.v=this.getPathString()+" ",a.display=""}}),e.Map.include(e.Browser.svg||!e.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var a=this._pathRoot=b.createElement("div");a.className="leaflet-vml-container",this._panes.overlayPane.appendChild(a),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),e.Browser.canvas=function(){return!!b.createElement("canvas").getContext}(),e.Path=e.Path.SVG&&!a.L_PREFER_CANVAS||!e.Browser.canvas?e.Path:e.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(a){return e.setOptions(this,a),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(a){a.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!e.Path._updateRequest&&(e.Path._updateRequest=e.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){e.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var a=this.options;a.stroke&&(this._ctx.lineWidth=a.weight,this._ctx.strokeStyle=a.color),a.fill&&(this._ctx.fillStyle=a.fillColor||a.color),a.lineCap&&(this._ctx.lineCap=a.lineCap),a.lineJoin&&(this._ctx.lineJoin=a.lineJoin)},_drawPath:function(){var a,b,c,d,f,g;for(this._ctx.beginPath(),a=0,c=this._parts.length;c>a;a++){for(b=0,d=this._parts[a].length;d>b;b++)f=this._parts[a][b],g=(0===b?"move":"line")+"To",this._ctx[g](f.x,f.y);this instanceof e.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var a=this._ctx,b=this.options;this._drawPath(),a.save(),this._updateStyle(),b.fill&&(a.globalAlpha=b.fillOpacity,a.fill(b.fillRule||"evenodd")),b.stroke&&(a.globalAlpha=b.opacity,a.stroke()),a.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click dblclick contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(a){this._containsPoint(a.layerPoint)&&this.fire(a.type,a)},_onMouseMove:function(a){this._map&&!this._map._animatingZoom&&(this._containsPoint(a.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",a)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",a)))}}),e.Map.include(e.Path.SVG&&!a.L_PREFER_CANVAS||!e.Browser.canvas?{}:{_initPathRoot:function(){var a,c=this._pathRoot;c||(c=this._pathRoot=b.createElement("canvas"),c.style.position="absolute",a=this._canvasCtx=c.getContext("2d"),a.lineCap="round",a.lineJoin="round",this._panes.overlayPane.appendChild(c),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var a=this._pathViewport,b=a.min,c=a.max.subtract(b),d=this._pathRoot;e.DomUtil.setPosition(d,b),d.width=c.x,d.height=c.y,d.getContext("2d").translate(-b.x,-b.y)}}}),e.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var d=a.length,e=typeof Uint8Array!=c+""?Uint8Array:Array,f=new e(d);f[0]=f[d-1]=1,this._simplifyDPStep(a,f,b,0,d-1);var g,h=[];for(g=0;d>g;g++)f[g]&&h.push(a[g]);return h},_simplifyDPStep:function(a,b,c,d,e){var f,g,h,i=0;for(g=d+1;e-1>=g;g++)h=this._sqClosestPointOnSegment(a[g],a[d],a[e],!0),h>i&&(f=g,i=h);i>c&&(b[f]=1,this._simplifyDPStep(a,b,c,d,f),this._simplifyDPStep(a,b,c,f,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;f>d;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),e=d);return f-1>e&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d){var e,f,g,h=d?this._lastCode:this._getBitCode(a,c),i=this._getBitCode(b,c);for(this._lastCode=i;;){if(!(h|i))return[a,b];if(h&i)return!1;e=h||i,f=this._getEdgeIntersection(a,b,e,c),g=this._getBitCode(f,c),e===h?(a=f,h=g):(b=f,i=g)}},_getEdgeIntersection:function(a,b,c,d){var f=b.x-a.x,g=b.y-a.y,h=d.min,i=d.max;return 8&c?new e.Point(a.x+f*(i.y-a.y)/g,i.y):4&c?new e.Point(a.x+f*(h.y-a.y)/g,h.y):2&c?new e.Point(i.x,a.y+g*(i.x-a.x)/f):1&c?new e.Point(h.x,a.y+g*(h.x-a.x)/f):void 0},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,d){var f,g=b.x,h=b.y,i=c.x-g,j=c.y-h,k=i*i+j*j;return k>0&&(f=((a.x-g)*i+(a.y-h)*j)/k,f>1?(g=c.x,h=c.y):f>0&&(g+=i*f,h+=j*f)),i=a.x-g,j=a.y-h,d?i*i+j*j:new e.Point(g,h)}},e.Polyline=e.Path.extend({initialize:function(a,b){e.Path.prototype.initialize.call(this,b),this._latlngs=this._convertLatLngs(a)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var a=0,b=this._latlngs.length;b>a;a++)this._originalPoints[a]=this._map.latLngToLayerPoint(this._latlngs[a])},getPathString:function(){for(var a=0,b=this._parts.length,c="";b>a;a++)c+=this._getPathPartStr(this._parts[a]);return c},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._latlngs=this._convertLatLngs(a),this.redraw()},addLatLng:function(a){return this._latlngs.push(e.latLng(a)),this.redraw()},spliceLatLngs:function(){var a=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),a},closestLayerPoint:function(a){for(var b,c,d=1/0,f=this._parts,g=null,h=0,i=f.length;i>h;h++)for(var j=f[h],k=1,l=j.length;l>k;k++){b=j[k-1],c=j[k];var m=e.LineUtil._sqClosestPointOnSegment(a,b,c,!0);d>m&&(d=m,g=e.LineUtil._sqClosestPointOnSegment(a,b,c))}return g&&(g.distance=Math.sqrt(d)),g},getBounds:function(){return new e.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(a,b){var c,d,f=b?a:[];for(c=0,d=a.length;d>c;c++){if(e.Util.isArray(a[c])&&"number"!=typeof a[c][0])return;f[c]=e.latLng(a[c])}return f},_initEvents:function(){e.Path.prototype._initEvents.call(this)},_getPathPartStr:function(a){for(var b,c=e.Path.VML,d=0,f=a.length,g="";f>d;d++)b=a[d],c&&b._round(),g+=(d?"L":"M")+b.x+" "+b.y;return g},_clipPoints:function(){var a,b,c,d=this._originalPoints,f=d.length;if(this.options.noClip)return void(this._parts=[d]);this._parts=[];var g=this._parts,h=this._map._pathViewport,i=e.LineUtil;for(a=0,b=0;f-1>a;a++)c=i.clipSegment(d[a],d[a+1],h,a),c&&(g[b]=g[b]||[],g[b].push(c[0]),(c[1]!==d[a+1]||a===f-2)&&(g[b].push(c[1]),b++))},_simplifyPoints:function(){for(var a=this._parts,b=e.LineUtil,c=0,d=a.length;d>c;c++)a[c]=b.simplify(a[c],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),e.Path.prototype._updatePath.call(this))}}),e.polyline=function(a,b){return new e.Polyline(a,b)},e.PolyUtil={},e.PolyUtil.clipPolygon=function(a,b){var c,d,f,g,h,i,j,k,l,m=[1,4,2,8],n=e.LineUtil;for(d=0,j=a.length;j>d;d++)a[d]._code=n._getBitCode(a[d],b);for(g=0;4>g;g++){for(k=m[g],c=[],d=0,j=a.length,f=j-1;j>d;f=d++)h=a[d],i=a[f],h._code&k?i._code&k||(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)):(i._code&k&&(l=n._getEdgeIntersection(i,h,k,b),l._code=n._getBitCode(l,b),c.push(l)),c.push(h));a=c}return a},e.Polygon=e.Polyline.extend({options:{fill:!0},initialize:function(a,b){e.Polyline.prototype.initialize.call(this,a,b),this._initWithHoles(a)},_initWithHoles:function(a){var b,c,d;if(a&&e.Util.isArray(a[0])&&"number"!=typeof a[0][0])for(this._latlngs=this._convertLatLngs(a[0]),this._holes=a.slice(1),b=0,c=this._holes.length;c>b;b++)d=this._holes[b]=this._convertLatLngs(this._holes[b]),d[0].equals(d[d.length-1])&&d.pop();a=this._latlngs,a.length>=2&&a[0].equals(a[a.length-1])&&a.pop()},projectLatlngs:function(){if(e.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var a,b,c,d;for(a=0,c=this._holes.length;c>a;a++)for(this._holePoints[a]=[],b=0,d=this._holes[a].length;d>b;b++)this._holePoints[a][b]=this._map.latLngToLayerPoint(this._holes[a][b])}},setLatLngs:function(a){return a&&e.Util.isArray(a[0])&&"number"!=typeof a[0][0]?(this._initWithHoles(a),this.redraw()):e.Polyline.prototype.setLatLngs.call(this,a)},_clipPoints:function(){var a=this._originalPoints,b=[];if(this._parts=[a].concat(this._holePoints),!this.options.noClip){for(var c=0,d=this._parts.length;d>c;c++){var f=e.PolyUtil.clipPolygon(this._parts[c],this._map._pathViewport);f.length&&b.push(f)}this._parts=b}},_getPathPartStr:function(a){var b=e.Polyline.prototype._getPathPartStr.call(this,a);return b+(e.Browser.svg?"z":"x")}}),e.polygon=function(a,b){return new e.Polygon(a,b)},function(){function a(a){return e.FeatureGroup.extend({initialize:function(a,b){this._layers={},this._options=b,this.setLatLngs(a)},setLatLngs:function(b){var c=0,d=b.length;for(this.eachLayer(function(a){d>c?a.setLatLngs(b[c++]):this.removeLayer(a)},this);d>c;)this.addLayer(new a(b[c++],this._options));return this},getLatLngs:function(){var a=[];return this.eachLayer(function(b){a.push(b.getLatLngs())}),a}})}e.MultiPolyline=a(e.Polyline),e.MultiPolygon=a(e.Polygon),e.multiPolyline=function(a,b){return new e.MultiPolyline(a,b)},e.multiPolygon=function(a,b){return new e.MultiPolygon(a,b)}}(),e.Rectangle=e.Polygon.extend({initialize:function(a,b){e.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=e.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),e.rectangle=function(a,b){return new e.Rectangle(a,b)},e.Circle=e.Path.extend({initialize:function(a,b,c){e.Path.prototype.initialize.call(this,c),this._latlng=e.latLng(a),this._mRadius=b},options:{fill:!0},setLatLng:function(a){return this._latlng=e.latLng(a),this.redraw()},setRadius:function(a){return this._mRadius=a,this.redraw()},projectLatlngs:function(){var a=this._getLngRadius(),b=this._latlng,c=this._map.latLngToLayerPoint([b.lat,b.lng-a]);this._point=this._map.latLngToLayerPoint(b),this._radius=Math.max(this._point.x-c.x,1)},getBounds:function(){var a=this._getLngRadius(),b=this._mRadius/40075017*360,c=this._latlng;return new e.LatLngBounds([c.lat-b,c.lng-a],[c.lat+b,c.lng+a])},getLatLng:function(){return this._latlng},getPathString:function(){var a=this._point,b=this._radius;return this._checkIfEmpty()?"":e.Browser.svg?"M"+a.x+","+(a.y-b)+"A"+b+","+b+",0,1,1,"+(a.x-.1)+","+(a.y-b)+" z":(a._round(),b=Math.round(b),"AL "+a.x+","+a.y+" "+b+","+b+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(e.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var a=this._map._pathViewport,b=this._radius,c=this._point;return c.x-b>a.max.x||c.y-b>a.max.y||c.x+b<a.min.x||c.y+b<a.min.y}}),e.circle=function(a,b,c){return new e.Circle(a,b,c)},e.CircleMarker=e.Circle.extend({options:{radius:10,weight:2},initialize:function(a,b){e.Circle.prototype.initialize.call(this,a,null,b),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){e.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(a){return e.Circle.prototype.setLatLng.call(this,a),this._popup&&this._popup._isOpen&&this._popup.setLatLng(a),this},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius}}),e.circleMarker=function(a,b){return new e.CircleMarker(a,b)},e.Polyline.include(e.Path.CANVAS?{_containsPoint:function(a,b){var c,d,f,g,h,i,j,k=this.options.weight/2;for(e.Browser.touch&&(k+=10),c=0,g=this._parts.length;g>c;c++)for(j=this._parts[c],d=0,h=j.length,f=h-1;h>d;f=d++)if((b||0!==d)&&(i=e.LineUtil.pointToSegmentDistance(a,j[f],j[d]),k>=i))return!0;return!1}}:{}),e.Polygon.include(e.Path.CANVAS?{_containsPoint:function(a){var b,c,d,f,g,h,i,j,k=!1;if(e.Polyline.prototype._containsPoint.call(this,a,!0))return!0;for(f=0,i=this._parts.length;i>f;f++)for(b=this._parts[f],g=0,j=b.length,h=j-1;j>g;h=g++)c=b[g],d=b[h],c.y>a.y!=d.y>a.y&&a.x<(d.x-c.x)*(a.y-c.y)/(d.y-c.y)+c.x&&(k=!k);return k}}:{}),e.Circle.include(e.Path.CANVAS?{_drawPath:function(){var a=this._point;this._ctx.beginPath(),this._ctx.arc(a.x,a.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(a){var b=this._point,c=this.options.stroke?this.options.weight/2:0;return a.distanceTo(b)<=this._radius+c}}:{}),e.CircleMarker.include(e.Path.CANVAS?{_updateStyle:function(){e.Path.prototype._updateStyle.call(this)}}:{}),e.GeoJSON=e.FeatureGroup.extend({initialize:function(a,b){e.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,c,d,f=e.Util.isArray(a)?a:a.features;if(f){for(b=0,c=f.length;c>b;b++)d=f[b],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(f[b]);return this}var g=this.options;if(!g.filter||g.filter(a)){var h=e.GeoJSON.geometryToLayer(a,g.pointToLayer,g.coordsToLatLng,g);return h.feature=e.GeoJSON.asFeature(a),h.defaultOptions=h.options,this.resetStyle(h),g.onEachFeature&&g.onEachFeature(a,h),this.addLayer(h)}},resetStyle:function(a){var b=this.options.style;b&&(e.Util.extend(a.options,a.defaultOptions),this._setLayerStyle(a,b))},setStyle:function(a){this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),e.extend(e.GeoJSON,{geometryToLayer:function(a,b,c,d){var f,g,h,i,j="Feature"===a.type?a.geometry:a,k=j.coordinates,l=[];switch(c=c||this.coordsToLatLng,j.type){case"Point":return f=c(k),b?b(a,f):new e.Marker(f);case"MultiPoint":for(h=0,i=k.length;i>h;h++)f=c(k[h]),l.push(b?b(a,f):new e.Marker(f));return new e.FeatureGroup(l);case"LineString":return g=this.coordsToLatLngs(k,0,c),new e.Polyline(g,d);case"Polygon":if(2===k.length&&!k[1].length)throw new Error("Invalid GeoJSON object.");return g=this.coordsToLatLngs(k,1,c),new e.Polygon(g,d);case"MultiLineString":return g=this.coordsToLatLngs(k,1,c),new e.MultiPolyline(g,d);case"MultiPolygon":return g=this.coordsToLatLngs(k,2,c),new e.MultiPolygon(g,d);case"GeometryCollection":for(h=0,i=j.geometries.length;i>h;h++)l.push(this.geometryToLayer({geometry:j.geometries[h],type:"Feature",properties:a.properties},b,c,d));return new e.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new e.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){var d,e,f,g=[];for(e=0,f=a.length;f>e;e++)d=b?this.coordsToLatLngs(a[e],b-1,c):(c||this.coordsToLatLng)(a[e]),g.push(d);return g},latLngToCoords:function(a){var b=[a.lng,a.lat];return a.alt!==c&&b.push(a.alt),b},latLngsToCoords:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(e.GeoJSON.latLngToCoords(a[c]));return b},getFeature:function(a,b){return a.feature?e.extend({},a.feature,{geometry:b}):e.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var g={toGeoJSON:function(){return e.GeoJSON.getFeature(this,{type:"Point",coordinates:e.GeoJSON.latLngToCoords(this.getLatLng())})}};e.Marker.include(g),e.Circle.include(g),e.CircleMarker.include(g),e.Polyline.include({toGeoJSON:function(){return e.GeoJSON.getFeature(this,{type:"LineString",coordinates:e.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),e.Polygon.include({toGeoJSON:function(){var a,b,c,d=[e.GeoJSON.latLngsToCoords(this.getLatLngs())];if(d[0].push(d[0][0]),this._holes)for(a=0,b=this._holes.length;b>a;a++)c=e.GeoJSON.latLngsToCoords(this._holes[a]),c.push(c[0]),d.push(c);return e.GeoJSON.getFeature(this,{type:"Polygon",coordinates:d})}}),function(){function a(a){return function(){var b=[];return this.eachLayer(function(a){b.push(a.toGeoJSON().geometry.coordinates)}),e.GeoJSON.getFeature(this,{type:a,coordinates:b})}}e.MultiPolyline.include({toGeoJSON:a("MultiLineString")}),e.MultiPolygon.include({toGeoJSON:a("MultiPolygon")}),e.LayerGroup.include({toGeoJSON:function(){var b,c=this.feature&&this.feature.geometry,d=[];if(c&&"MultiPoint"===c.type)return a("MultiPoint").call(this);var f=c&&"GeometryCollection"===c.type;return this.eachLayer(function(a){a.toGeoJSON&&(b=a.toGeoJSON(),d.push(f?b.geometry:e.GeoJSON.asFeature(b)))}),f?e.GeoJSON.getFeature(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}})}(),e.geoJson=function(a,b){return new e.GeoJSON(a,b)},e.DomEvent={addListener:function(a,b,c,d){var f,g,h,i=e.stamp(c),j="_leaflet_"+b+i;return a[j]?this:(f=function(b){return c.call(d||a,b||e.DomEvent._getEvent())},e.Browser.pointer&&0===b.indexOf("touch")?this.addPointerListener(a,b,f,i):(e.Browser.touch&&"dblclick"===b&&this.addDoubleTapListener&&this.addDoubleTapListener(a,f,i),"addEventListener"in a?"mousewheel"===b?(a.addEventListener("DOMMouseScroll",f,!1),a.addEventListener(b,f,!1)):"mouseenter"===b||"mouseleave"===b?(g=f,h="mouseenter"===b?"mouseover":"mouseout",f=function(b){return e.DomEvent._checkMouse(a,b)?g(b):void 0},a.addEventListener(h,f,!1)):"click"===b&&e.Browser.android?(g=f,f=function(a){return e.DomEvent._filterClick(a,g)},a.addEventListener(b,f,!1)):a.addEventListener(b,f,!1):"attachEvent"in a&&a.attachEvent("on"+b,f),a[j]=f,this))},removeListener:function(a,b,c){var d=e.stamp(c),f="_leaflet_"+b+d,g=a[f];return g?(e.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,d):e.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,d):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):"mouseenter"===b||"mouseleave"===b?a.removeEventListener("mouseenter"===b?"mouseover":"mouseout",g,!1):a.removeEventListener(b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[f]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,e.DomEvent._skipped(a),this},disableScrollPropagation:function(a){var b=e.DomEvent.stopPropagation;return e.DomEvent.on(a,"mousewheel",b).on(a,"MozMousePixelScroll",b)},disableClickPropagation:function(a){for(var b=e.DomEvent.stopPropagation,c=e.Draggable.START.length-1;c>=0;c--)e.DomEvent.on(a,e.Draggable.START[c],b);return e.DomEvent.on(a,"click",e.DomEvent._fakeStop).on(a,"dblclick",b)},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return e.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new e.Point(a.clientX,a.clientY);var c=b.getBoundingClientRect();return new e.Point(a.clientX-c.left-b.clientLeft,a.clientY-c.top-b.clientTop)},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/120),a.detail&&(b=-a.detail/3),b},_skipEvents:{},_fakeStop:function(a){e.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_checkMouse:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(d){return!1}return c!==a},_getEvent:function(){var b=a.event;if(!b)for(var c=arguments.callee.caller;c&&(b=c.arguments[0],!b||a.Event!==b.constructor);)c=c.caller;return b},_filterClick:function(a,b){var c=a.timeStamp||a.originalEvent.timeStamp,d=e.DomEvent._lastClick&&c-e.DomEvent._lastClick;return d&&d>100&&500>d||a.target._simulatedClick&&!a._simulated?void e.DomEvent.stop(a):(e.DomEvent._lastClick=c,b(a))}},e.DomEvent.on=e.DomEvent.addListener,e.DomEvent.off=e.DomEvent.removeListener,e.Draggable=e.Class.extend({includes:e.Mixin.Events,statics:{START:e.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b){this._element=a,this._dragStartTarget=b||a},enable:function(){if(!this._enabled){for(var a=e.Draggable.START.length-1;a>=0;a--)e.DomEvent.on(this._dragStartTarget,e.Draggable.START[a],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var a=e.Draggable.START.length-1;a>=0;a--)e.DomEvent.off(this._dragStartTarget,e.Draggable.START[a],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(a){if(this._moved=!1,!a.shiftKey&&(1===a.which||1===a.button||a.touches)&&(e.DomEvent.stopPropagation(a),!e.Draggable._disabled&&(e.DomUtil.disableImageDrag(),e.DomUtil.disableTextSelection(),!this._moving))){var c=a.touches?a.touches[0]:a;this._startPoint=new e.Point(c.clientX,c.clientY),this._startPos=this._newPos=e.DomUtil.getPosition(this._element),e.DomEvent.on(b,e.Draggable.MOVE[a.type],this._onMove,this).on(b,e.Draggable.END[a.type],this._onUp,this)}},_onMove:function(a){if(a.touches&&a.touches.length>1)return void(this._moved=!0);var c=a.touches&&1===a.touches.length?a.touches[0]:a,d=new e.Point(c.clientX,c.clientY),f=d.subtract(this._startPoint);(f.x||f.y)&&(e.Browser.touch&&Math.abs(f.x)+Math.abs(f.y)<3||(e.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=e.DomUtil.getPosition(this._element).subtract(f),e.DomUtil.addClass(b.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,e.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,e.Util.cancelAnimFrame(this._animRequest),this._animRequest=e.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),e.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){e.DomUtil.removeClass(b.body,"leaflet-dragging"),this._lastTarget&&(e.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var a in e.Draggable.MOVE)e.DomEvent.off(b,e.Draggable.MOVE[a],this._onMove).off(b,e.Draggable.END[a],this._onUp);e.DomUtil.enableImageDrag(),e.DomUtil.enableTextSelection(),this._moved&&this._moving&&(e.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),e.Handler=e.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),e.Map.mergeOptions({dragging:!0,inertia:!e.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:e.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),e.Map.Drag=e.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new e.Draggable(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),a.on("viewreset",this._onViewReset,this),a.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var a=this._map;a._panAnim&&a._panAnim.stop(),a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var a=this._lastTime=+new Date,b=this._lastPos=this._draggable._newPos;this._positions.push(b),this._times.push(a),a-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var a=this._map.getSize()._divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._newPos.x=g},_onDragEnd:function(a){var b=this._map,c=b.options,d=+new Date-this._lastTime,f=!c.inertia||d>c.inertiaThreshold||!this._positions[0];if(b.fire("dragend",a),f)b.fire("moveend");else{var g=this._lastPos.subtract(this._positions[0]),h=(this._lastTime+d-this._times[0])/1e3,i=c.easeLinearity,j=g.multiplyBy(i/h),k=j.distanceTo([0,0]),l=Math.min(c.inertiaMaxSpeed,k),m=j.multiplyBy(l/k),n=l/(c.inertiaDeceleration*i),o=m.multiplyBy(-n/2).round();o.x&&o.y?(o=b._limitOffset(o,b.options.maxBounds),e.Util.requestAnimFrame(function(){b.panBy(o,{duration:n,easeLinearity:i,noMoveStart:!0})})):b.fire("moveend")}}}),e.Map.addInitHook("addHandler","dragging",e.Map.Drag),e.Map.mergeOptions({doubleClickZoom:!0}),e.Map.DoubleClickZoom=e.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom()+(a.originalEvent.shiftKey?-1:1);"center"===b.options.doubleClickZoom?b.setZoom(c):b.setZoomAround(a.containerPoint,c)}}),e.Map.addInitHook("addHandler","doubleClickZoom",e.Map.DoubleClickZoom),e.Map.mergeOptions({scrollWheelZoom:!0}),e.Map.ScrollWheelZoom=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),e.DomEvent.on(this._map._container,"MozMousePixelScroll",e.DomEvent.preventDefault),this._delta=0},removeHooks:function(){e.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),e.DomEvent.off(this._map._container,"MozMousePixelScroll",e.DomEvent.preventDefault)},_onWheelScroll:function(a){var b=e.DomEvent.getWheelDelta(a);this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var c=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(e.bind(this._performZoom,this),c),e.DomEvent.preventDefault(a),e.DomEvent.stopPropagation(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom();b=b>0?Math.ceil(b):Math.floor(b),b=Math.max(Math.min(b,4),-4),b=a._limitZoom(c+b)-c,this._delta=0,this._startTime=null,b&&("center"===a.options.scrollWheelZoom?a.setZoom(c+b):a.setZoomAround(this._lastMousePos,c+b))}}),e.Map.addInitHook("addHandler","scrollWheelZoom",e.Map.ScrollWheelZoom),e.extend(e.DomEvent,{_touchstart:e.Browser.msPointer?"MSPointerDown":e.Browser.pointer?"pointerdown":"touchstart",_touchend:e.Browser.msPointer?"MSPointerUp":e.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,c,d){function f(a){var b;if(e.Browser.pointer?(o.push(a.pointerId),b=o.length):b=a.touches.length,!(b>1)){var c=Date.now(),d=c-(h||c);i=a.touches?a.touches[0]:a,j=d>0&&k>=d,h=c}}function g(a){if(e.Browser.pointer){var b=o.indexOf(a.pointerId);if(-1===b)return;o.splice(b,1)}if(j){if(e.Browser.pointer){var d,f={};for(var g in i)d=i[g],"function"==typeof d?f[g]=d.bind(i):f[g]=d;i=f}i.type="dblclick",c(i),h=null}}var h,i,j=!1,k=250,l="_leaflet_",m=this._touchstart,n=this._touchend,o=[];a[l+m+d]=f,a[l+n+d]=g;var p=e.Browser.pointer?b.documentElement:a;return a.addEventListener(m,f,!1),p.addEventListener(n,g,!1),e.Browser.pointer&&p.addEventListener(e.DomEvent.POINTER_CANCEL,g,!1),this},removeDoubleTapListener:function(a,c){var d="_leaflet_";return a.removeEventListener(this._touchstart,a[d+this._touchstart+c],!1),(e.Browser.pointer?b.documentElement:a).removeEventListener(this._touchend,a[d+this._touchend+c],!1),e.Browser.pointer&&b.documentElement.removeEventListener(e.DomEvent.POINTER_CANCEL,a[d+this._touchend+c],!1),this}}),e.extend(e.DomEvent,{POINTER_DOWN:e.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:e.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:e.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:e.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(a,b,c,d){switch(b){case"touchstart":return this.addPointerListenerStart(a,b,c,d);case"touchend":return this.addPointerListenerEnd(a,b,c,d);case"touchmove":return this.addPointerListenerMove(a,b,c,d);default:throw"Unknown touch event type"}},addPointerListenerStart:function(a,c,d,f){var g="_leaflet_",h=this._pointers,i=function(a){"mouse"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&e.DomEvent.preventDefault(a);for(var b=!1,c=0;c<h.length;c++)if(h[c].pointerId===a.pointerId){b=!0;break}b||h.push(a),a.touches=h.slice(),a.changedTouches=[a],d(a)};if(a[g+"touchstart"+f]=i,a.addEventListener(this.POINTER_DOWN,i,!1),!this._pointerDocumentListener){var j=function(a){for(var b=0;b<h.length;b++)if(h[b].pointerId===a.pointerId){h.splice(b,1);break}};b.documentElement.addEventListener(this.POINTER_UP,j,!1),b.documentElement.addEventListener(this.POINTER_CANCEL,j,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(a,b,c,d){function e(a){if(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons){for(var b=0;b<g.length;b++)if(g[b].pointerId===a.pointerId){g[b]=a;break}a.touches=g.slice(),a.changedTouches=[a],c(a)}}var f="_leaflet_",g=this._pointers;return a[f+"touchmove"+d]=e,a.addEventListener(this.POINTER_MOVE,e,!1),this},addPointerListenerEnd:function(a,b,c,d){var e="_leaflet_",f=this._pointers,g=function(a){for(var b=0;b<f.length;b++)if(f[b].pointerId===a.pointerId){f.splice(b,1);break}a.touches=f.slice(),a.changedTouches=[a],c(a)};return a[e+"touchend"+d]=g,a.addEventListener(this.POINTER_UP,g,!1),a.addEventListener(this.POINTER_CANCEL,g,!1),this},removePointerListener:function(a,b,c){var d="_leaflet_",e=a[d+b+c];switch(b){case"touchstart":a.removeEventListener(this.POINTER_DOWN,e,!1);break;case"touchmove":a.removeEventListener(this.POINTER_MOVE,e,!1);break;case"touchend":a.removeEventListener(this.POINTER_UP,e,!1),a.removeEventListener(this.POINTER_CANCEL,e,!1)}return this}}),e.Map.mergeOptions({touchZoom:e.Browser.touch&&!e.Browser.android23,bounceAtZoomLimits:!0}),e.Map.TouchZoom=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){e.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(a.touches&&2===a.touches.length&&!c._animatingZoom&&!this._zooming){var d=c.mouseEventToLayerPoint(a.touches[0]),f=c.mouseEventToLayerPoint(a.touches[1]),g=c._getCenterLayerPoint();this._startCenter=d.add(f)._divideBy(2),this._startDist=d.distanceTo(f),this._moved=!1,this._zooming=!0,this._centerOffset=g.subtract(this._startCenter),c._panAnim&&c._panAnim.stop(),e.DomEvent.on(b,"touchmove",this._onTouchMove,this).on(b,"touchend",this._onTouchEnd,this),e.DomEvent.preventDefault(a)}},_onTouchMove:function(a){var b=this._map;if(a.touches&&2===a.touches.length&&this._zooming){var c=b.mouseEventToLayerPoint(a.touches[0]),d=b.mouseEventToLayerPoint(a.touches[1]);this._scale=c.distanceTo(d)/this._startDist,this._delta=c._add(d)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(b.options.bounceAtZoomLimits||!(b.getZoom()===b.getMinZoom()&&this._scale<1||b.getZoom()===b.getMaxZoom()&&this._scale>1))&&(this._moved||(e.DomUtil.addClass(b._mapPane,"leaflet-touching"),b.fire("movestart").fire("zoomstart"),
this._moved=!0),e.Util.cancelAnimFrame(this._animRequest),this._animRequest=e.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),e.DomEvent.preventDefault(a))}},_updateOnMove:function(){var a=this._map,b=this._getScaleOrigin(),c=a.layerPointToLatLng(b),d=a.getScaleZoom(this._scale);a._animateZoom(c,d,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var a=this._map;this._zooming=!1,e.DomUtil.removeClass(a._mapPane,"leaflet-touching"),e.Util.cancelAnimFrame(this._animRequest),e.DomEvent.off(b,"touchmove",this._onTouchMove).off(b,"touchend",this._onTouchEnd);var c=this._getScaleOrigin(),d=a.layerPointToLatLng(c),f=a.getZoom(),g=a.getScaleZoom(this._scale)-f,h=g>0?Math.ceil(g):Math.floor(g),i=a._limitZoom(f+h),j=a.getZoomScale(i)/this._scale;a._animateZoom(d,i,c,j)},_getScaleOrigin:function(){var a=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(a)}}),e.Map.addInitHook("addHandler","touchZoom",e.Map.TouchZoom),e.Map.mergeOptions({tap:!0,tapTolerance:15}),e.Map.Tap=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){e.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(e.DomEvent.preventDefault(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var c=a.touches[0],d=c.target;this._startPos=this._newPos=new e.Point(c.clientX,c.clientY),d.tagName&&"a"===d.tagName.toLowerCase()&&e.DomUtil.addClass(d,"leaflet-active"),this._holdTimeout=setTimeout(e.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",c))},this),1e3),e.DomEvent.on(b,"touchmove",this._onMove,this).on(b,"touchend",this._onUp,this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),e.DomEvent.off(b,"touchmove",this._onMove,this).off(b,"touchend",this._onUp,this),this._fireClick&&a&&a.changedTouches){var c=a.changedTouches[0],d=c.target;d&&d.tagName&&"a"===d.tagName.toLowerCase()&&e.DomUtil.removeClass(d,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",c)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new e.Point(b.clientX,b.clientY)},_simulateEvent:function(c,d){var e=b.createEvent("MouseEvents");e._simulated=!0,d.target._simulatedClick=!0,e.initMouseEvent(c,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),e.Browser.touch&&!e.Browser.pointer&&e.Map.addInitHook("addHandler","tap",e.Map.Tap),e.Map.mergeOptions({boxZoom:!0}),e.Map.BoxZoom=e.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._moved=!1},addHooks:function(){e.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){e.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(a){return this._moved=!1,!(!a.shiftKey||1!==a.which&&1!==a.button)&&(e.DomUtil.disableTextSelection(),e.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(a),void e.DomEvent.on(b,"mousemove",this._onMouseMove,this).on(b,"mouseup",this._onMouseUp,this).on(b,"keydown",this._onKeyDown,this))},_onMouseMove:function(a){this._moved||(this._box=e.DomUtil.create("div","leaflet-zoom-box",this._pane),e.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var b=this._startLayerPoint,c=this._box,d=this._map.mouseEventToLayerPoint(a),f=d.subtract(b),g=new e.Point(Math.min(d.x,b.x),Math.min(d.y,b.y));e.DomUtil.setPosition(c,g),this._moved=!0,c.style.width=Math.max(0,Math.abs(f.x)-4)+"px",c.style.height=Math.max(0,Math.abs(f.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),e.DomUtil.enableTextSelection(),e.DomUtil.enableImageDrag(),e.DomEvent.off(b,"mousemove",this._onMouseMove).off(b,"mouseup",this._onMouseUp).off(b,"keydown",this._onKeyDown)},_onMouseUp:function(a){this._finish();var b=this._map,c=b.mouseEventToLayerPoint(a);if(!this._startLayerPoint.equals(c)){var d=new e.LatLngBounds(b.layerPointToLatLng(this._startLayerPoint),b.layerPointToLatLng(c));b.fitBounds(d),b.fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),e.Map.addInitHook("addHandler","boxZoom",e.Map.BoxZoom),e.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),e.Map.Keyboard=e.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(a){this._map=a,this._setPanOffset(a.options.keyboardPanOffset),this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;-1===a.tabIndex&&(a.tabIndex="0"),e.DomEvent.on(a,"focus",this._onFocus,this).on(a,"blur",this._onBlur,this).on(a,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var a=this._map._container;e.DomEvent.off(a,"focus",this._onFocus,this).off(a,"blur",this._onBlur,this).off(a,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var c=b.body,d=b.documentElement,e=c.scrollTop||d.scrollTop,f=c.scrollLeft||d.scrollLeft;this._map._container.focus(),a.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;for(b=0,c=e.left.length;c>b;b++)d[e.left[b]]=[-1*a,0];for(b=0,c=e.right.length;c>b;b++)d[e.right[b]]=[a,0];for(b=0,c=e.down.length;c>b;b++)d[e.down[b]]=[0,a];for(b=0,c=e.up.length;c>b;b++)d[e.up[b]]=[0,-1*a]},_setZoomOffset:function(a){var b,c,d=this._zoomKeys={},e=this.keyCodes;for(b=0,c=e.zoomIn.length;c>b;b++)d[e.zoomIn[b]]=a;for(b=0,c=e.zoomOut.length;c>b;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){e.DomEvent.on(b,"keydown",this._onKeyDown,this)},_removeHooks:function(){e.DomEvent.off(b,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){var b=a.keyCode,c=this._map;if(b in this._panKeys){if(c._panAnim&&c._panAnim._inProgress)return;c.panBy(this._panKeys[b]),c.options.maxBounds&&c.panInsideBounds(c.options.maxBounds)}else{if(!(b in this._zoomKeys))return;c.setZoom(c.getZoom()+this._zoomKeys[b])}e.DomEvent.stop(a)}}),e.Map.addInitHook("addHandler","keyboard",e.Map.Keyboard),e.Handler.MarkerDrag=e.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new e.Draggable(a,a)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),e.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),e.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var a=this._marker,b=a._shadow,c=e.DomUtil.getPosition(a._icon),d=a._map.layerPointToLatLng(c);b&&e.DomUtil.setPosition(b,c),a._latlng=d,a.fire("move",{latlng:d}).fire("drag")},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}}),e.Control=e.Class.extend({options:{position:"topright"},initialize:function(a){e.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),d=a._controlCorners[c];return e.DomUtil.addClass(b,"leaflet-control"),-1!==c.indexOf("bottom")?d.insertBefore(b,d.firstChild):d.appendChild(b),this},removeFrom:function(a){var b=this.getPosition(),c=a._controlCorners[b];return c.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(a),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),e.control=function(a){return new e.Control(a)},e.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.removeFrom(this),this},_initControlPos:function(){function a(a,f){var g=c+a+" "+c+f;b[a+f]=e.DomUtil.create("div",g,d)}var b=this._controlCorners={},c="leaflet-",d=this._controlContainer=e.DomUtil.create("div",c+"control-container",this._container);a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),e.Control.Zoom=e.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b="leaflet-control-zoom",c=e.DomUtil.create("div",b+" leaflet-bar");return this._map=a,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,b+"-in",c,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,b+"-out",c,this._zoomOut,this),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(a){this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,d,f,g){var h=e.DomUtil.create("a",c,d);h.innerHTML=a,h.href="#",h.title=b;var i=e.DomEvent.stopPropagation;return e.DomEvent.on(h,"click",i).on(h,"mousedown",i).on(h,"dblclick",i).on(h,"click",e.DomEvent.preventDefault).on(h,"click",f,g).on(h,"click",this._refocusOnMap,g),h},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";e.DomUtil.removeClass(this._zoomInButton,b),e.DomUtil.removeClass(this._zoomOutButton,b),a._zoom===a.getMinZoom()&&e.DomUtil.addClass(this._zoomOutButton,b),a._zoom===a.getMaxZoom()&&e.DomUtil.addClass(this._zoomInButton,b)}}),e.Map.mergeOptions({zoomControl:!0}),e.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new e.Control.Zoom,this.addControl(this.zoomControl))}),e.control.zoom=function(a){return new e.Control.Zoom(a)},e.Control.Attribution=e.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){e.setOptions(this,a),this._attributions={}},onAdd:function(a){this._container=e.DomUtil.create("div","leaflet-control-attribution"),e.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return a.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(a){a.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):void 0},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):void 0},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}},_onLayerAdd:function(a){a.layer.getAttribution&&this.addAttribution(a.layer.getAttribution())},_onLayerRemove:function(a){a.layer.getAttribution&&this.removeAttribution(a.layer.getAttribution())}}),e.Map.mergeOptions({attributionControl:!0}),e.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new e.Control.Attribution).addTo(this))}),e.control.attribution=function(a){return new e.Control.Attribution(a)},e.Control.Scale=e.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(a){this._map=a;var b="leaflet-control-scale",c=e.DomUtil.create("div",b),d=this.options;return this._addScales(d,b,c),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=e.DomUtil.create("div",b+"-line",c)),a.imperial&&(this._iScale=e.DomUtil.create("div",b+"-line",c))},_update:function(){var a=this._map.getBounds(),b=a.getCenter().lat,c=6378137*Math.PI*Math.cos(b*Math.PI/180),d=c*(a.getNorthEast().lng-a.getSouthWest().lng)/180,e=this._map.getSize(),f=this.options,g=0;e.x>0&&(g=d*(f.maxWidth/e.x)),this._updateScales(f,g)},_updateScales:function(a,b){a.metric&&b&&this._updateMetric(b),a.imperial&&b&&this._updateImperial(b)},_updateMetric:function(a){var b=this._getRoundNum(a);this._mScale.style.width=this._getScaleWidth(b/a)+"px",this._mScale.innerHTML=1e3>b?b+" m":b/1e3+" km"},_updateImperial:function(a){var b,c,d,e=3.2808399*a,f=this._iScale;e>5280?(b=e/5280,c=this._getRoundNum(b),f.style.width=this._getScaleWidth(c/b)+"px",f.innerHTML=c+" mi"):(d=this._getRoundNum(e),f.style.width=this._getScaleWidth(d/e)+"px",f.innerHTML=d+" ft")},_getScaleWidth:function(a){return Math.round(this.options.maxWidth*a)-10},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),e.control.scale=function(a){return new e.Control.Scale(a)},e.Control.Layers=e.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(a,b,c){e.setOptions(this,c),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(a){return this._initLayout(),this._update(),a.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(a){a.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update(),this},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update(),this},removeLayer:function(a){var b=e.stamp(a);return delete this._layers[b],this._update(),this},_initLayout:function(){var a="leaflet-control-layers",b=this._container=e.DomUtil.create("div",a);b.setAttribute("aria-haspopup",!0),e.Browser.touch?e.DomEvent.on(b,"click",e.DomEvent.stopPropagation):e.DomEvent.disableClickPropagation(b).disableScrollPropagation(b);var c=this._form=e.DomUtil.create("form",a+"-list");if(this.options.collapsed){e.Browser.android||e.DomEvent.on(b,"mouseover",this._expand,this).on(b,"mouseout",this._collapse,this);var d=this._layersLink=e.DomUtil.create("a",a+"-toggle",b);d.href="#",d.title="Layers",e.Browser.touch?e.DomEvent.on(d,"click",e.DomEvent.stop).on(d,"click",this._expand,this):e.DomEvent.on(d,"focus",this._expand,this),e.DomEvent.on(c,"click",function(){setTimeout(e.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=e.DomUtil.create("div",a+"-base",c),this._separator=e.DomUtil.create("div",a+"-separator",c),this._overlaysList=e.DomUtil.create("div",a+"-overlays",c),b.appendChild(c)},_addLayer:function(a,b,c){var d=e.stamp(a);this._layers[d]={layer:a,name:b,overlay:c},this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var a,b,c=!1,d=!1;for(a in this._layers)b=this._layers[a],this._addItem(b),d=d||b.overlay,c=c||!b.overlay;this._separator.style.display=d&&c?"":"none"}},_onLayerChange:function(a){var b=this._layers[e.stamp(a.layer)];if(b){this._handlingClick||this._update();var c=b.overlay?"layeradd"===a.type?"overlayadd":"overlayremove":"layeradd"===a.type?"baselayerchange":null;c&&this._map.fire(c,b)}},_createRadioElement:function(a,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"';c&&(d+=' checked="checked"'),d+="/>";var e=b.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var c,d=b.createElement("label"),f=this._map.hasLayer(a.layer);a.overlay?(c=b.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=f):c=this._createRadioElement("leaflet-base-layers",f),c.layerId=e.stamp(a.layer),e.DomEvent.on(c,"click",this._onInputClick,this);var g=b.createElement("span");g.innerHTML=" "+a.name,d.appendChild(c),d.appendChild(g);var h=a.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(d),d},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=d.length;for(this._handlingClick=!0,a=0;e>a;a++)b=d[a],c=this._layers[b.layerId],b.checked&&!this._map.hasLayer(c.layer)?this._map.addLayer(c.layer):!b.checked&&this._map.hasLayer(c.layer)&&this._map.removeLayer(c.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){e.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),e.control.layers=function(a,b,c){return new e.Control.Layers(a,b,c)},e.PosAnimation=e.Class.extend({includes:e.Mixin.Events,run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._newPos=b,this.fire("start"),a.style[e.DomUtil.TRANSITION]="all "+(c||.25)+"s cubic-bezier(0,0,"+(d||.5)+",1)",e.DomEvent.on(a,e.DomUtil.TRANSITION_END,this._onTransitionEnd,this),e.DomUtil.setPosition(a,b),e.Util.falseFn(a.offsetWidth),this._stepTimer=setInterval(e.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(e.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),e.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var a=this._getPos();return a?(this._el._leaflet_pos=a,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var b,c,d,f=this._el,g=a.getComputedStyle(f);if(e.Browser.any3d){if(d=g[e.DomUtil.TRANSFORM].match(this._transformRe),!d)return;b=parseFloat(d[1]),c=parseFloat(d[2])}else b=parseFloat(g.left),c=parseFloat(g.top);return new e.Point(b,c,(!0))},_onTransitionEnd:function(){e.DomEvent.off(this._el,e.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[e.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),e.Map.include({setView:function(a,b,d){if(b=b===c?this._zoom:this._limitZoom(b),a=this._limitCenter(e.latLng(a),b,this.options.maxBounds),d=d||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==c&&(d.zoom=e.extend({animate:d.animate},d.zoom),d.pan=e.extend({animate:d.animate},d.pan));var f=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,d.zoom):this._tryAnimatedPan(a,d.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},panBy:function(a,b){if(a=e.point(a).round(),b=b||{},!a.x&&!a.y)return this;if(this._panAnim||(this._panAnim=new e.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){e.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a);this._panAnim.run(this._mapPane,c,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){e.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return!((b&&b.animate)!==!0&&!this.getSize().contains(c))&&(this.panBy(c,b),!0)}}),e.PosAnimation=e.DomUtil.TRANSITION?e.PosAnimation:e.PosAnimation.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=e.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=e.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var a=+new Date-this._startTime,b=1e3*this._duration;b>a?this._runFrame(this._easeOut(a/b)):(this._runFrame(1),this._complete())},_runFrame:function(a){var b=this._startPos.add(this._offset.multiplyBy(a));e.DomUtil.setPosition(this._el,b),this.fire("step")},_complete:function(){e.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),e.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),e.DomUtil.TRANSITION&&e.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&e.DomUtil.TRANSITION&&e.Browser.any3d&&!e.Browser.android23&&!e.Browser.mobileOpera,this._zoomAnimated&&e.DomEvent.on(this._mapPane,e.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),e.Map.include(e.DomUtil.TRANSITION?{_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),e=this._getCenterOffset(a)._divideBy(1-1/d),f=this._getCenterLayerPoint()._add(e);return!(c.animate!==!0&&!this.getSize().contains(e))&&(this.fire("movestart").fire("zoomstart"),this._animateZoom(a,b,f,d,null,!0),!0)},_animateZoom:function(a,b,c,d,f,g,h){h||(this._animatingZoom=!0),e.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=a,this._animateToZoom=b,e.Draggable&&(e.Draggable._disabled=!0),e.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:a,zoom:b,origin:c,scale:d,delta:f,backwards:g}),setTimeout(e.bind(this._onZoomTransitionEnd,this),250)},this)},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._animatingZoom=!1,e.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),e.Util.requestAnimFrame(function(){this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),e.Draggable&&(e.Draggable._disabled=!1)},this))}}:{}),e.TileLayer.include({_animateZoom:function(a){this._animating||(this._animating=!0,this._prepareBgBuffer());var b=this._bgBuffer,c=e.DomUtil.TRANSFORM,d=a.delta?e.DomUtil.getTranslateString(a.delta):b.style[c],f=e.DomUtil.getScaleString(a.scale,a.origin);b.style[c]=a.backwards?f+" "+d:d+" "+f},_endZoomAnim:function(){var a=this._tileContainer,b=this._bgBuffer;a.style.visibility="",a.parentNode.appendChild(a),e.Util.falseFn(b.offsetWidth);var c=this._map.getZoom();(c>this.options.maxZoom||c<this.options.minZoom)&&this._clearBgBuffer(),this._animating=!1},_clearBgBuffer:function(){var a=this._map;!a||a._animatingZoom||a.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[e.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var a=this._tileContainer,b=this._bgBuffer,c=this._getLoadedTilesPercentage(b),d=this._getLoadedTilesPercentage(a);return b&&c>.5&&.5>d?(a.style.visibility="hidden",void this._stopLoadingImages(a)):(b.style.visibility="hidden",b.style[e.DomUtil.TRANSFORM]="",this._tileContainer=b,b=this._bgBuffer=a,this._stopLoadingImages(b),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(a){var b,c,d=a.getElementsByTagName("img"),e=0;for(b=0,c=d.length;c>b;b++)d[b].complete&&e++;return e/c},_stopLoadingImages:function(a){var b,c,d,f=Array.prototype.slice.call(a.getElementsByTagName("img"));for(b=0,c=f.length;c>b;b++)d=f[b],d.complete||(d.onload=e.Util.falseFn,d.onerror=e.Util.falseFn,d.src=e.Util.emptyImageUrl,d.parentNode.removeChild(d))}}),e.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(a){if(a=this._locateOptions=e.extend(this._defaultLocateOptions,a),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=e.bind(this._handleGeolocationResponse,this),c=e.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new e.LatLng(b,c),f=180*a.coords.accuracy/40075017,g=f/Math.cos(e.LatLng.DEG_TO_RAD*b),h=e.latLngBounds([b-f,c-g],[b+f,c+g]),i=this._locateOptions;if(i.setView){var j=Math.min(this.getBoundsZoom(h),i.maxZoom);this.setView(d,j)}var k={latlng:d,bounds:h,timestamp:a.timestamp};for(var l in a.coords)"number"==typeof a.coords[l]&&(k[l]=a.coords[l]);this.fire("locationfound",k)}})}(window,document),function(a){"function"==typeof define&&define.amd?define(["leaflet"],function(b){return a(b)}):"object"==typeof module&&"object"==typeof module.exports&&(module.exports=a(require("leaflet"))),"undefined"!=typeof window&&window.L&&a(window.L)}(function(a){var b={VERSION:"1.0.3",Layers:{},Services:{},Controls:{},Tasks:{},Util:{},Support:{CORS:!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),pointerEvents:""===document.documentElement.style.pointerEvents}};return"undefined"!=typeof window&&window.L&&(window.L.esri=b),function(b){function c(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function d(a,b){for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}function e(a){return d(a[0],a[a.length-1])||a.push(a[0]),a}function f(a){var b,c=0,d=0,e=a.length,f=a[d];for(d;d<e-1;d++)b=a[d+1],c+=(b[0]-f[0])*(b[1]+f[1]),f=b;return c>=0}function g(a,b,c,d){var e=(d[0]-c[0])*(a[1]-c[1])-(d[1]-c[1])*(a[0]-c[0]),f=(b[0]-a[0])*(a[1]-c[1])-(b[1]-a[1])*(a[0]-c[0]),g=(d[1]-c[1])*(b[0]-a[0])-(d[0]-c[0])*(b[1]-a[1]);if(0!==g){var h=e/g,i=f/g;if(0<=h&&h<=1&&0<=i&&i<=1)return!0}return!1}function h(a,b){for(var c=0;c<a.length-1;c++)for(var d=0;d<b.length-1;d++)if(g(a[c],a[c+1],b[d],b[d+1]))return!0;return!1}function i(a,b){for(var c=!1,d=-1,e=a.length,f=e-1;++d<e;f=d)(a[d][1]<=b[1]&&b[1]<a[f][1]||a[f][1]<=b[1]&&b[1]<a[d][1])&&b[0]<(a[f][0]-a[d][0])*(b[1]-a[d][1])/(a[f][1]-a[d][1])+a[d][0]&&(c=!c);return c}function j(a,b){var c=h(a,b),d=i(a,b[0]);return!(c||!d)}function k(a){for(var b,c,d,g=[],i=[],k=0;k<a.length;k++){var l=e(a[k].slice(0));if(!(l.length<4))if(f(l)){var m=[l];g.push(m)}else i.push(l)}for(var n=[];i.length;){d=i.pop();var o=!1;for(b=g.length-1;b>=0;b--)if(c=g[b][0],j(c,d)){g[b].push(d),o=!0;break}o||n.push(d)}for(;n.length;){d=n.pop();var p=!1;for(b=g.length-1;b>=0;b--)if(c=g[b][0],h(c,d)){g[b].push(d),p=!0;break}p||g.push([d.reverse()])}return 1===g.length?{type:"Polygon",coordinates:g[0]}:{type:"MultiPolygon",coordinates:g}}function l(a){var b=[],c=a.slice(0),d=e(c.shift().slice(0));if(d.length>=4){f(d)||d.reverse(),b.push(d);for(var g=0;g<c.length;g++){var h=e(c[g].slice(0));h.length>=4&&(f(h)&&h.reverse(),b.push(h))}}return b}function m(a){for(var b=[],c=0;c<a.length;c++)for(var d=l(a[c]),e=d.length-1;e>=0;e--){var f=d[e].slice(0);b.push(f)}return b}var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)};b.Util.extentToBounds=function(b){var c=new a.LatLng(b.ymin,b.xmin),d=new a.LatLng(b.ymax,b.xmax);return new a.LatLngBounds(c,d)},b.Util.boundsToExtent=function(b){return b=a.latLngBounds(b),{xmin:b.getSouthWest().lng,ymin:b.getSouthWest().lat,xmax:b.getNorthEast().lng,ymax:b.getNorthEast().lat,spatialReference:{wkid:4326}}},b.Util.arcgisToGeojson=function(a,d){var e={};return"number"==typeof a.x&&"number"==typeof a.y&&(e.type="Point",e.coordinates=[a.x,a.y]),a.points&&(e.type="MultiPoint",e.coordinates=a.points.slice(0)),a.paths&&(1===a.paths.length?(e.type="LineString",e.coordinates=a.paths[0].slice(0)):(e.type="MultiLineString",e.coordinates=a.paths.slice(0))),a.rings&&(e=k(a.rings.slice(0))),(a.geometry||a.attributes)&&(e.type="Feature",e.geometry=a.geometry?b.Util.arcgisToGeojson(a.geometry):null,e.properties=a.attributes?c(a.attributes):null,a.attributes&&(e.id=a.attributes[d]||a.attributes.OBJECTID||a.attributes.FID)),e},b.Util.geojsonToArcGIS=function(a,d){d=d||"OBJECTID";var e,f={wkid:4326},g={};switch(a.type){case"Point":g.x=a.coordinates[0],g.y=a.coordinates[1],g.spatialReference=f;break;case"MultiPoint":g.points=a.coordinates.slice(0),g.spatialReference=f;break;case"LineString":g.paths=[a.coordinates.slice(0)],g.spatialReference=f;break;case"MultiLineString":g.paths=a.coordinates.slice(0),g.spatialReference=f;break;case"Polygon":g.rings=l(a.coordinates.slice(0)),g.spatialReference=f;break;case"MultiPolygon":g.rings=m(a.coordinates.slice(0)),g.spatialReference=f;break;case"Feature":a.geometry&&(g.geometry=b.Util.geojsonToArcGIS(a.geometry,d)),g.attributes=a.properties?c(a.properties):{},a.id&&(g.attributes[d]=a.id);break;case"FeatureCollection":for(g=[],e=0;e<a.features.length;e++)g.push(b.Util.geojsonToArcGIS(a.features[e],d));break;case"GeometryCollection":for(g=[],e=0;e<a.geometries.length;e++)g.push(b.Util.geojsonToArcGIS(a.geometries[e],d))}return g},b.Util.responseToFeatureCollection=function(a,c){var d;if(c)d=c;else if(a.objectIdFieldName)d=a.objectIdFieldName;else if(a.fields){for(var e=0;e<=a.fields.length-1;e++)if("esriFieldTypeOID"===a.fields[e].type){d=a.fields[e].name;break}}else d="OBJECTID";var f={type:"FeatureCollection",features:[]},g=a.features||a.results;if(g.length)for(var h=g.length-1;h>=0;h--)f.features.push(b.Util.arcgisToGeojson(g[h],d));return f},b.Util.cleanUrl=function(a){return a=a.replace(/^\s+|\s+$|\A\s+|\s+\z/g,""),"/"!==a[a.length-1]&&(a+="/"),a},b.Util.isArcgisOnline=function(a){return/\.arcgis\.com.*?FeatureServer/g.test(a)},b.Util.geojsonTypeToArcGIS=function(a){var b;switch(a){case"Point":b="esriGeometryPoint";break;case"MultiPoint":b="esriGeometryMultipoint";break;case"LineString":b="esriGeometryPolyline";break;case"MultiLineString":b="esriGeometryPolyline";break;case"Polygon":b="esriGeometryPolygon";break;case"MultiPolygon":b="esriGeometryPolygon"}return b},b.Util.requestAnimationFrame=a.Util.bind(n,window),b.Util.warn=function(a){console&&console.warn&&console.warn(a)}}(b),function(b){function c(a){var b="";a.f=a.f||"json";for(var c in a)if(a.hasOwnProperty(c)){var d,e=a[c],f=Object.prototype.toString.call(e);b.length&&(b+="&"),d="[object Array]"===f?"[object Object]"===Object.prototype.toString.call(e[0])?JSON.stringify(e):e.join(","):"[object Object]"===f?JSON.stringify(e):"[object Date]"===f?e.valueOf():e,
b+=encodeURIComponent(c)+"="+encodeURIComponent(d)}return b}function d(b,c){var d=new XMLHttpRequest;return d.onerror=function(e){d.onreadystatechange=a.Util.falseFn,b.call(c,{error:{code:500,message:"XMLHttpRequest error"}},null)},d.onreadystatechange=function(){var b,e;if(4===d.readyState){try{b=JSON.parse(d.responseText)}catch(f){b=null,e={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!e&&b.error&&(e=b.error,b=null),d.onerror=a.Util.falseFn,f.call(c,e,b)}},d}var e=0;window._EsriLeafletCallbacks={},b.Request={request:function(e,f,g,h){var i=c(f),j=d(g,h),k=(e+"?"+i).length;if(k<=2e3&&a.esri.Support.CORS)j.open("GET",e+"?"+i),j.send(null);else{if(!(k>2e3&&a.esri.Support.CORS))return k<=2e3&&!a.esri.Support.CORS?a.esri.Request.get.JSONP(e,f,g,h):void b.Util.warn("a request to "+e+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");j.open("POST",e),j.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),j.send(i)}return j},post:{XMLHTTP:function(a,b,e,f){var g=d(e,f);return g.open("POST",a),g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),g.send(c(b)),g}},get:{CORS:function(a,b,e,f){var g=d(e,f);return g.open("GET",a+"?"+c(b),!0),g.send(null),g},JSONP:function(b,d,f,g){var h="c"+e;d.callback="window._EsriLeafletCallbacks."+h;var i=a.DomUtil.create("script",null,document.body);return i.type="text/javascript",i.src=b+"?"+c(d),i.id=h,window._EsriLeafletCallbacks[h]=function(a){if(window._EsriLeafletCallbacks[h]!==!0){var b,c=Object.prototype.toString.call(a);"[object Object]"!==c&&"[object Array]"!==c&&(b={error:{code:500,message:"Expected array or object as JSONP response"}},a=null),!b&&a.error&&(b=a,a=null),f.call(g,b,a),window._EsriLeafletCallbacks[h]=!0}},e++,{id:h,url:i.src,abort:function(){window._EsriLeafletCallbacks._callback[h]({code:0,message:"Request aborted."})}}}}},b.get=b.Support.CORS?b.Request.get.CORS:b.Request.get.JSONP,b.post=b.Request.post.XMLHTTP,b.request=b.Request.request}(b),b.Services.Service=a.Class.extend({includes:a.Mixin.Events,options:{proxy:!1,useCors:b.Support.CORS},initialize:function(c){c=c||{},this._requestQueue=[],this._authenticating=!1,a.Util.setOptions(this,c),this.options.url=b.Util.cleanUrl(this.options.url)},get:function(a,b,c,d){return this._request("get",a,b,c,d)},post:function(a,b,c,d){return this._request("post",a,b,c,d)},request:function(a,b,c,d){return this._request("request",a,b,c,d)},metadata:function(a,b){return this._request("get","",{},a,b)},authenticate:function(a){return this._authenticating=!1,this.options.token=a,this._runQueue(),this},_request:function(a,c,d,e,f){this.fire("requeststart",{url:this.options.url+c,params:d,method:a});var g=this._createServiceCallback(a,c,d,e,f);if(this.options.token&&(d.token=this.options.token),this._authenticating)return void this._requestQueue.push([a,c,d,e,f]);var h=this.options.proxy?this.options.proxy+"?"+this.options.url+c:this.options.url+c;return"get"!==a&&"request"!==a||this.options.useCors?b[a](h,d,g):b.Request.get.JSONP(h,d,g)},_createServiceCallback:function(b,c,d,e,f){return a.Util.bind(function(g,h){!g||499!==g.code&&498!==g.code||(this._authenticating=!0,this._requestQueue.push([b,c,d,e,f]),this.fire("authenticationrequired",{authenticate:a.Util.bind(this.authenticate,this)}),g.authenticate=a.Util.bind(this.authenticate,this)),e.call(f,g,h),g?this.fire("requesterror",{url:this.options.url+c,params:d,message:g.message,code:g.code,method:b}):this.fire("requestsuccess",{url:this.options.url+c,params:d,response:h,method:b}),this.fire("requestend",{url:this.options.url+c,params:d,method:b})},this)},_runQueue:function(){for(var a=this._requestQueue.length-1;a>=0;a--){var b=this._requestQueue[a],c=b.shift();this[c].apply(this,b)}this._requestQueue=[]}}),b.Services.service=function(a){return new b.Services.Service(a)},b.Services.FeatureLayerService=b.Services.Service.extend({options:{idAttribute:"OBJECTID"},query:function(){return new b.Tasks.Query(this)},addFeature:function(a,c,d){return delete a.id,a=b.Util.geojsonToArcGIS(a),this.post("addFeatures",{features:[a]},function(a,b){var e=b&&b.addResults?b.addResults[0]:void 0;c&&c.call(d,a||b.addResults[0].error,e)},d)},updateFeature:function(a,c,d){return a=b.Util.geojsonToArcGIS(a,this.options.idAttribute),this.post("updateFeatures",{features:[a]},function(a,b){var e=b&&b.updateResults?b.updateResults[0]:void 0;c&&c.call(d,a||b.updateResults[0].error,e)},d)},deleteFeature:function(a,b,c){return this.post("deleteFeatures",{objectIds:a},function(a,d){var e=d&&d.deleteResults?d.deleteResults[0]:void 0;b&&b.call(c,a||d.deleteResults[0].error,e)},c)},deleteFeatures:function(a,b,c){return this.post("deleteFeatures",{objectIds:a},function(a,d){var e=d&&d.deleteResults?d.deleteResults:void 0;b&&b.call(c,a||d.deleteResults[0].error,e)},c)}}),b.Services.featureLayerService=function(a){return new b.Services.FeatureLayerService(a)},b.Services.MapService=b.Services.Service.extend({identify:function(){return new b.Tasks.identifyFeatures(this)},find:function(){return new b.Tasks.Find(this)},query:function(){return new b.Tasks.Query(this)}}),b.Services.mapService=function(a){return new b.Services.MapService(a)},b.Services.ImageService=b.Services.Service.extend({query:function(){return new b.Tasks.Query(this)},identify:function(){return new b.Tasks.IdentifyImage(this)}}),b.Services.imageService=function(a){return new b.Services.ImageService(a)},b.Tasks.Task=a.Class.extend({options:{proxy:!1,useCors:b.Support.CORS},generateSetter:function(b,c){return a.Util.bind(function(a){return this.params[b]=a,this},c)},initialize:function(b){if(b.request&&b.options?(this._service=b,a.Util.setOptions(this,b.options)):(a.Util.setOptions(this,b),this.options.url=a.esri.Util.cleanUrl(b.url)),this.params=a.Util.extend({},this.params||{}),this.setters)for(var c in this.setters){var d=this.setters[c];this[c]=this.generateSetter(d,this)}},token:function(a){return this._service?this._service.authenticate(a):this.params.token=a,this},request:function(a,b){return this._service?this._service.request(this.path,this.params,a,b):this._request("request",this.path,this.params,a,b)},_request:function(a,c,d,e,f){var g=this.options.proxy?this.options.proxy+"?"+this.options.url+c:this.options.url+c;return"get"!==a&&"request"!==a||this.options.useCors?b[a](g,d,e,f):b.Request.get.JSONP(g,d,e,f)}}),b.Tasks.Query=b.Tasks.Task.extend({setters:{offset:"offset",limit:"limit",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSr:4326,outFields:"*"},within:function(a){return this._setGeometry(a),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(a){return this._setGeometry(a),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(a){return this._setGeometry(a),this.params.spatialRel="esriSpatialRelWithin",this},overlaps:function(a){return this._setGeometry(a),this.params.spatialRel="esriSpatialRelOverlaps",this},nearby:function(b,c){return b=a.latLng(b),this.params.geometry=[b.lng,b.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=c,this.params.inSr=4326,this},where:function(a){return this.params.where=a,this},between:function(a,b){return this.params.time=[a.valueOf(),b.valueOf()],this},simplify:function(a,b){var c=Math.abs(a.getBounds().getWest()-a.getBounds().getEast());return this.params.maxAllowableOffset=c/a.getSize().y*b,this},orderBy:function(a,b){return b=b||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[a,b].join(" "),this},run:function(a,c){return this._cleanParams(),b.Util.isArcgisOnline(this.options.url)?(this.params.f="geojson",this.request(function(b,d){this._trapSQLerrors(b),a.call(c,b,d,d)},this)):this.request(function(d,e){this._trapSQLerrors(d),a.call(c,d,e&&b.Util.responseToFeatureCollection(e),e)},this)},count:function(a,b){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(b,c){a.call(this,b,c&&c.count,c)},b)},ids:function(a,b){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(b,c){a.call(this,b,c&&c.objectIds,c)},b)},bounds:function(a,c){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(d,e){a.call(c,d,e&&e.extent&&b.Util.extentToBounds(e.extent),e)},c)},pixelSize:function(b){return b=a.point(b),this.params.pixelSize=[b.x,b.y],this},layer:function(a){return this.path=a+"/query",this},_trapSQLerrors:function(a){a&&"400"===a.code&&b.Util.warn("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometry:function(c){return this.params.inSr=4326,c instanceof a.LatLngBounds?(this.params.geometry=b.Util.boundsToExtent(c),void(this.params.geometryType="esriGeometryEnvelope")):(c.getLatLng&&(c=c.getLatLng()),c instanceof a.LatLng&&(c={type:"Point",coordinates:[c.lng,c.lat]}),c instanceof a.GeoJSON&&(c=c.getLayers()[0].feature.geometry,this.params.geometry=b.Util.geojsonToArcGIS(c),this.params.geometryType=b.Util.geojsonTypeToArcGIS(c.type)),c.toGeoJSON&&(c=c.toGeoJSON()),"Feature"===c.type&&(c=c.geometry),"Point"===c.type||"LineString"===c.type||"Polygon"===c.type?(this.params.geometry=b.Util.geojsonToArcGIS(c),void(this.params.geometryType=b.Util.geojsonTypeToArcGIS(c.type))):void b.Util.warn("invalid geometry passed to spatial query. Should be an L.LatLng, L.LatLngBounds or L.Marker or a GeoJSON Point Line or Polygon object"))}}),b.Tasks.query=function(a){return new b.Tasks.Query(a)},b.Tasks.Find=b.Tasks.Task.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(a,b){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[a,b].join(":"),this},simplify:function(a,b){var c=Math.abs(a.getBounds().getWest()-a.getBounds().getEast());return this.params.maxAllowableOffset=c/a.getSize().y*b,this},run:function(a,c){return this.request(function(d,e){a.call(c,d,e&&b.Util.responseToFeatureCollection(e),e)},c)}}),b.Tasks.find=function(a){return new b.Tasks.Find(a)},b.Tasks.Identify=b.Tasks.Task.extend({path:"identify",between:function(a,b){return this.params.time=[a.valueOf(),b.valueOf()],this}}),b.Tasks.IdentifyImage=b.Tasks.Identify.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(b){return b=a.latLng(b),this.params.geometry=JSON.stringify({x:b.lng,y:b.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(a,b){return this.request(function(c,d){a.call(b,c,d&&this._responseToGeoJSON(d),d)},this)},_responseToGeoJSON:function(a){var c=a.location,d=a.catalogItems,e=a.catalogItemVisibilities,f={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[c.x,c.y]},crs:{type:"EPSG",properties:{code:c.spatialReference.wkid}},properties:{OBJECTID:a.objectId,name:a.name,value:a.value},id:a.objectId}};if(a.properties&&a.properties.Values&&(f.pixel.properties.values=a.properties.Values),d&&d.features&&(f.catalogItems=b.Util.responseToFeatureCollection(d),e&&e.length===f.catalogItems.features.length))for(var g=e.length-1;g>=0;g--)f.catalogItems.features[g].properties.catalogItemVisibility=e[g];return f}}),b.Tasks.identifyImage=function(a){return new b.Tasks.IdentifyImage(a)},b.Tasks.IdentifyFeatures=b.Tasks.Identify.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(a){var c=b.Util.boundsToExtent(a.getBounds()),d=a.getSize();return this.params.imageDisplay=[d.x,d.y,96],this.params.mapExtent=[c.xmin,c.ymin,c.xmax,c.ymax],this},at:function(b){return b=a.latLng(b),this.params.geometry=[b.lng,b.lat],this.params.geometryType="esriGeometryPoint",this},layerDef:function(a,b){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[a,b].join(":"),this},simplify:function(a,b){var c=Math.abs(a.getBounds().getWest()-a.getBounds().getEast());return this.params.maxAllowableOffset=c/a.getSize().y*(1-b),this},run:function(a,c){return this.request(function(d,e){if(d)return void a.call(c,d,void 0,e);var f=b.Util.responseToFeatureCollection(e);e.results=e.results.reverse();for(var g=0;g<f.features.length;g++){var h=f.features[g];h.layerId=e.results[g].layerId}a.call(c,void 0,f,e)})}}),b.Tasks.identifyFeatures=function(a){return new b.Tasks.IdentifyFeatures(a)},function(b){var c="https:"!==window.location.protocol?"http:":"https:";b.Layers.BasemapLayer=a.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"Esri"}},Topographic:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"Esri"}},Oceans:{urlTemplate:c+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"Esri"}},OceansLabels:{urlTemplate:c+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"]}},NationalGeographic:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"Esri"}},DarkGray:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"Esri, DeLorme, HERE"}},DarkGrayLabels:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"]}},Gray:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"Esri, NAVTEQ, DeLorme"}},GrayLabels:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:16,subdomains:["server","services"]}},Imagery:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"Esri, DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community"}},ImageryLabels:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:19,subdomains:["server","services"]}},ImageryTransportation:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:19,subdomains:["server","services"]}},ShadedRelief:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"Esri, NAVTEQ, DeLorme"}},ShadedReliefLabels:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:12,subdomains:["server","services"]}},Terrain:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!1,logoPosition:"bottomright",minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"Esri, USGS, NOAA"}},TerrainLabels:{urlTemplate:c+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{hideLogo:!0,logoPosition:"bottomright",minZoom:1,maxZoom:13,subdomains:["server","services"]}}}},initialize:function(c,d){var e;if("object"==typeof c&&c.urlTemplate&&c.options)e=c;else{if("string"!=typeof c||!b.BasemapLayer.TILES[c])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ShadedRelief", "ShadedReliefLabels", "Terrain" or "TerrainLabels"');e=b.BasemapLayer.TILES[c]}var f=a.Util.extend(e.options,d);a.TileLayer.prototype.initialize.call(this,e.urlTemplate,a.Util.setOptions(this,f)),e.attributionUrl&&this._getAttributionData(e.attributionUrl),this._logo=new b.Controls.Logo({position:this.options.logoPosition})},onAdd:function(b){this.options.hideLogo||b._hasEsriLogo||(this._logo.addTo(b),b._hasEsriLogo=!0),a.TileLayer.prototype.onAdd.call(this,b),b.on("moveend",this._updateMapAttribution,this)},onRemove:function(b){b._hasEsriLogo&&this._logo&&this._logo._container&&(b.removeControl(this._logo),b._hasEsriLogo=!1),a.TileLayer.prototype.onRemove.call(this,b),b.off("moveend",this._updateMapAttribution,this)},getAttribution:function(){var a='<span class="esri-attributions" style="line-height:14px; vertical-align: -3px; text-overflow:ellipsis; white-space:nowrap; overflow:hidden; display:inline-block;">'+this.options.attribution+"</span>";return a},_getAttributionData:function(b){a.esri.Request.get.JSONP(b,{},a.Util.bind(function(b,c){this._attributions=[];for(var d=0;d<c.contributors.length;d++)for(var e=c.contributors[d],f=0;f<e.coverageAreas.length;f++){var g=e.coverageAreas[f],h=new a.LatLng(g.bbox[0],g.bbox[1]),i=new a.LatLng(g.bbox[2],g.bbox[3]);this._attributions.push({attribution:e.attribution,score:g.score,bounds:new a.LatLngBounds(h,i),minZoom:g.zoomMin,maxZoom:g.zoomMax})}this._attributions.sort(function(a,b){return b.score-a.score}),this._updateMapAttribution()},this))},_updateMapAttribution:function(){if(this._map&&this._map.attributionControl&&this._attributions){for(var a="",b=this._map.getBounds(),c=this._map.getZoom(),d=0;d<this._attributions.length;d++){var e=this._attributions[d],f=e.attribution;!a.match(f)&&b.intersects(e.bounds)&&c>=e.minZoom&&c<=e.maxZoom&&(a+=", "+f)}a=a.substr(2);var g=this._map.attributionControl._container.querySelector(".esri-attributions");g.innerHTML=a,g.style.maxWidth=.65*this._map.getSize().x+"px",this.fire("attributionupdated",{attribution:a})}}}),b.BasemapLayer=b.Layers.BasemapLayer,b.Layers.basemapLayer=function(a,c){return new b.Layers.BasemapLayer(a,c)},b.basemapLayer=function(a,c){return new b.Layers.BasemapLayer(a,c)}}(b),b.Layers.RasterLayer=a.Class.extend({includes:a.Mixin.Events,options:{opacity:1,position:"front",f:"image"},onAdd:function(b){if(this._map=b,this._update=a.Util.limitExecByInterval(this._update,this.options.updateInterval,this),b.options.crs&&b.options.crs.code){var c=b.options.crs.code.split(":")[1];this.options.bboxSR=c,this.options.imageSR=c}b.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?b.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this))},bindPopup:function(b,c){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=a.popup(c),this._popupFunction=b,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},onRemove:function(a){this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this),this._map=null},addTo:function(a){return a.addLayer(this),this},removeFrom:function(a){return a.removeLayer(this),this},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(a){return this.options.opacity=a,this._currentImage.setOpacity(a),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(a,b){return this.options.from=a,this.options.to=b,this._update(),this},metadata:function(a,b){return this._service.metadata(a,b),this},authenticate:function(a){return this._service.authenticate(a),this},_renderImage:function(b,c){if(this._map){var d=new a.ImageOverlay(b,c,{opacity:0}).addTo(this._map);d.once("load",function(a){var b=a.target,d=this._currentImage;b._bounds.equals(c)&&b._bounds.equals(this._map.getBounds())?(this._currentImage=b,"front"===this.options.position?this.bringToFront():this.bringToBack(),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),d&&this._map&&this._map.removeLayer(d),d&&d._map&&d._map.removeLayer(d)):this._map.removeLayer(b),this.fire("load",{bounds:c})},this),this.fire("loading",{bounds:c})}},_update:function(){if(this._map){var a=this._map.getZoom(),b=this._map.getBounds();if(!(this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress)){if(a>this.options.maxZoom||a<this.options.minZoom)return void(this._currentImage&&this._currentImage._map.removeLayer(this._currentImage));var c=this._buildExportParams();this._requestExport(c,b)}}},_renderPopup:function(b,c,d,e){if(b=a.latLng(b),this._shouldRenderPopup&&this._lastClick.equals(b)){var f=this._popupFunction(c,d,e);f&&this._popup.setLatLng(b).setContent(f).openOn(this._map)}},_resetPopupState:function(a){this._shouldRenderPopup=!1,this._lastClick=a.latlng},_propagateEvent:function(b){b=a.extend({layer:b.target,target:this},b),this.fire(b.type,b)}}),b.Layers.DynamicMapLayer=b.Layers.RasterLayer.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png24",transparent:!0,f:"json"},initialize:function(c){c.url=b.Util.cleanUrl(c.url),this._service=new b.Services.MapService(c),this._service.on("authenticationrequired requeststart requestend requesterror requestsuccess",this._propagateEvent,this),(c.proxy||c.token)&&"json"!==c.f&&(c.f="json"),a.Util.setOptions(this,c)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(a){return this.options.dynamicLayers=a,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(a){return this.options.layers=a,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(a){return this.options.layerDefs=a,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(a){return this.options.timeOptions=a,this._update(),this},query:function(){return this._service.query()},identify:function(){return this._service.identify()},find:function(){return this._service.find()},_getPopupData:function(b){var c=a.Util.bind(function(c,d,e){c||setTimeout(a.Util.bind(function(){this._renderPopup(b.latlng,c,d,e)},this),300)},this),d=this.identify().on(this._map).at(b.latlng);this.options.layers?d.layers("visible:"+this.options.layers.join(",")):d.layers("visible"),d.run(c),this._shouldRenderPopup=!0,this._lastClick=b.latlng},_buildExportParams:function(){var a=this._map.getBounds(),b=this._map.getSize(),c=this._map.options.crs.project(a._northEast),d=this._map.options.crs.project(a._southWest),e=this._map.latLngToLayerPoint(a._northEast),f=this._map.latLngToLayerPoint(a._southWest);(e.y>0||f.y<b.y)&&(b.y=f.y-e.y);var g={bbox:[d.x,d.y,c.x,c.y].join(","),size:b.x+","+b.y,dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:this.options.bboxSR,imageSR:this.options.imageSR};return this.options.dynamicLayers&&(g.dynamicLayers=this.options.dynamicLayers),this.options.layers&&(g.layers="show:"+this.options.layers.join(",")),this.options.layerDefs&&(g.layerDefs=JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(g.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(g.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this._service.options.token&&(g.token=this._service.options.token),g},_requestExport:function(b,c){"json"===this.options.f?this._service.request("export",b,function(a,b){a||this._renderImage(b.href,c)},this):(b.f="image",this._renderImage(this.options.url+"export"+a.Util.getParamString(b),c))}}),b.DynamicMapLayer=b.Layers.DynamicMapLayer,b.Layers.dynamicMapLayer=function(a){return new b.Layers.DynamicMapLayer(a)},b.dynamicMapLayer=function(a){return new b.Layers.DynamicMapLayer(a)},b.Layers.ImageMapLayer=b.Layers.RasterLayer.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"json"},query:function(){return this._service.query()},identify:function(){return this._service.identify()},initialize:function(c){c.url=b.Util.cleanUrl(c.url),this._service=new b.Services.ImageService(c),this._service.on("authenticationrequired requeststart requestend requesterror requestsuccess",this._propagateEvent,this),a.Util.setOptions(this,c)},setPixelType:function(a){return this.options.pixelType=a,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(b){return a.Util.isArray(b)?this.options.bandIds=b.join(","):this.options.bandIds=b.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(b,c){return a.Util.isArray(b)?this.options.noData=b.join(","):this.options.noData=b.toString(),c&&(this.options.noDataInterpretation=c),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(a){this.options.renderingRule=a,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(a){this.options.mosaicRule=a,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(b){var c=a.Util.bind(function(c,d,e){c||setTimeout(a.Util.bind(function(){this._renderPopup(b.latlng,c,d,e)},this),300)},this),d=this.identify().at(b.latlng);this.options.mosaicRule&&d.setMosaicRule(this.options.mosaicRule),d.run(c),this._shouldRenderPopup=!0,this._lastClick=b.latlng},_buildExportParams:function(){var a=this._map.getBounds(),b=this._map.getSize(),c=this._map.options.crs.project(a._northEast),d=this._map.options.crs.project(a._southWest),e={bbox:[d.x,d.y,c.x,c.y].join(","),size:b.x+","+b.y,format:this.options.format,transparent:this.options.transparent,bboxSR:this.options.bboxSR,imageSR:this.options.imageSR};return this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(e.pixelType=this.options.pixelType),this.options.interpolation&&(e.interpolation=this.options.interpolation),this.options.compressionQuality&&(e.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(e.bandIds=this.options.bandIds),this.options.noData&&(e.noData=this.options.noData),this.options.noDataInterpretation&&(e.noDataInterpretation=this.options.noDataInterpretation),this._service.options.token&&(e.token=this._service.options.token),this.options.renderingRule&&(e.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(e.mosaicRule=JSON.stringify(this.options.mosaicRule)),e},_requestExport:function(b,c){"json"===this.options.f?this._service.request("exportImage",b,function(a,b){a||this._renderImage(b.href,c)},this):(b.f="image",this._renderImage(this.options.url+"exportImage"+a.Util.getParamString(b),c))}}),b.ImageMapLayer=b.Layers.ImageMapLayer,b.Layers.imageMapLayer=function(a){return new b.Layers.ImageMapLayer(a)},b.imageMapLayer=function(a){return new b.Layers.ImageMapLayer(a)},b.Layers.TiledMapLayer=a.TileLayer.extend({options:{zoomOffsetAllowance:.1,correctZoomLevels:!0},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(c){c.url=b.Util.cleanUrl(c.url),c=a.Util.setOptions(this,c),this.tileUrl=a.esri.Util.cleanUrl(c.url)+"tile/{z}/{y}/{x}",this._service=new a.esri.Services.MapService(c),this._service.on("authenticationrequired requeststart requestend requesterror requestsuccess",this._propagateEvent,this),this.tileUrl.match("://tiles.arcgisonline.com")&&(this.tileUrl=this.tileUrl.replace("://tiles.arcgisonline.com","://tiles{s}.arcgisonline.com"),c.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),a.TileLayer.prototype.initialize.call(this,this.tileUrl,c)},getTileUrl:function(b){return a.Util.template(this.tileUrl,a.extend({s:this._getSubdomain(b),z:this._lodMap[b.z]||b.z,x:b.x,y:b.y},this.options))},onAdd:function(c){!this._lodMap&&this.options.correctZoomLevels?(this._lodMap={},this.metadata(function(d,e){if(!d){var f=e.spatialReference.latestWkid||e.spatialReference.wkid;if(102100===f||3857===f)for(var g=e.tileInfo.lods,h=b.Layers.TiledMapLayer.MercatorZoomLevels,i=0;i<g.length;i++){var j=g[i];for(var k in h){var l=h[k];if(this._withinPercentage(j.resolution,l,this.options.zoomOffsetAllowance)){
this._lodMap[k]=j.level;break}}}else b.Util.warn("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html")}a.TileLayer.prototype.onAdd.call(this,c)},this)):a.TileLayer.prototype.onAdd.call(this,c)},metadata:function(a,b){return this._service.metadata(a,b),this},identify:function(){return this._service.identify()},authenticate:function(a){var b="?token="+a;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,b):this.tileUrl+b,this.options.token=a,this._service.authenticate(a),this},_propagateEvent:function(b){b=a.extend({layer:b.target,target:this},b),this.fire(b.type,b)},_withinPercentage:function(a,b,c){var d=Math.abs(a/b-1);return d<c}}),a.esri.TiledMapLayer=a.esri.Layers.tiledMapLayer,a.esri.Layers.tiledMapLayer=function(b){return new a.esri.Layers.TiledMapLayer(b)},a.esri.tiledMapLayer=function(b){return new a.esri.Layers.TiledMapLayer(b)},b.Layers.FeatureGrid=a.Class.extend({includes:a.Mixin.Events,options:{cellSize:512,updateInterval:150},initialize:function(b){b=a.setOptions(this,b)},onAdd:function(b){this._map=b,this._update=a.Util.limitExecByInterval(this._update,this.options.updateInterval,this),this._map.addEventListener(this.getEvents(),this),this._reset(),this._update()},onRemove:function(){this._map.removeEventListener(this.getEvents(),this),this._removeCells()},getEvents:function(){var a={viewreset:this._reset,moveend:this._update,zoomend:this._onZoom};return a},addTo:function(a){return a.addLayer(this),this},removeFrom:function(a){return a.removeLayer(this),this},_onZoom:function(){var a=this._map.getZoom();a>this.options.maxZoom||a<this.options.minZoom?(this.removeFrom(this._map),this._map.addEventListener("zoomend",this.getEvents().zoomend,this)):this._map.hasLayer(this)||(this._map.removeEventListener("zoomend",this.getEvents().zoomend,this),this.addTo(this._map))},_reset:function(){this._removeCells(),this._cells={},this._activeCells={},this._cellsToLoad=0,this._cellsTotal=0,this._resetWrap()},_resetWrap:function(){var a=this._map,b=a.options.crs;if(!b.infinite){var c=this._getCellSize();b.wrapLng&&(this._wrapLng=[Math.floor(a.project([0,b.wrapLng[0]]).x/c),Math.ceil(a.project([0,b.wrapLng[1]]).x/c)]),b.wrapLat&&(this._wrapLat=[Math.floor(a.project([b.wrapLat[0],0]).y/c),Math.ceil(a.project([b.wrapLat[1],0]).y/c)])}},_getCellSize:function(){return this.options.cellSize},_update:function(){if(this._map){var b=this._map.getPixelBounds(),c=this._map.getZoom(),d=this._getCellSize(),e=[d/2,d/2];if(!(c>this.options.maxZoom||c<this.options.minZoom)){var f=b.min.subtract(e).divideBy(d).floor();f.x=Math.max(f.x,0),f.y=Math.max(f.y,0);var g=a.bounds(f,b.max.add(e).divideBy(d).floor());this._removeOtherCells(g),this._addCells(g)}}},_addCells:function(b){var c,d,e,f=[],g=b.getCenter(),h=this._map.getZoom();for(c=b.min.y;c<=b.max.y;c++)for(d=b.min.x;d<=b.max.x;d++)e=new a.Point(d,c),e.z=h,f.push(e);var i=f.length;if(0!==i)for(this._cellsToLoad+=i,this._cellsTotal+=i,f.sort(function(a,b){return a.distanceTo(g)-b.distanceTo(g)}),d=0;d<i;d++)this._addCell(f[d])},_cellCoordsToBounds:function(b){var c=this._map,d=this.options.cellSize,e=b.multiplyBy(d),f=e.add([d,d]),g=c.unproject(e,b.z).wrap(),h=c.unproject(f,b.z).wrap();return new a.LatLngBounds(g,h)},_cellCoordsToKey:function(a){return a.x+":"+a.y},_keyToCellCoords:function(b){var c=b.split(":"),d=parseInt(c[0],10),e=parseInt(c[1],10);return new a.Point(d,e)},_removeOtherCells:function(a){for(var b in this._cells)a.contains(this._keyToCellCoords(b))||this._removeCell(b)},_removeCell:function(a){var b=this._activeCells[a];b&&(delete this._activeCells[a],this.cellLeave&&this.cellLeave(b.bounds,b.coords),this.fire("cellleave",{bounds:b.bounds,coords:b.coords}))},_removeCells:function(){for(var a in this._cells){var b=this._cells[a].bounds,c=this._cells[a].coords;this.cellLeave&&this.cellLeave(b,c),this.fire("cellleave",{bounds:b,coords:c})}},_addCell:function(a){this._wrapCoords(a);var b=this._cellCoordsToKey(a),c=this._cells[b];c&&!this._activeCells[b]&&(this.cellEnter&&this.cellEnter(c.bounds,a),this.fire("cellenter",{bounds:c.bounds,coords:a}),this._activeCells[b]=c),c||(c={coords:a,bounds:this._cellCoordsToBounds(a)},this._cells[b]=c,this._activeCells[b]=c,this.createCell&&this.createCell(c.bounds,a),this.fire("cellcreate",{bounds:c.bounds,coords:a}))},_wrapCoords:function(b){b.x=this._wrapLng?a.Util.wrapNum(b.x,this._wrapLng):b.x,b.y=this._wrapLat?a.Util.wrapNum(b.y,this._wrapLat):b.y}}),function(b){function c(a){this.values=a||[]}b.Layers.FeatureManager=b.Layers.FeatureGrid.extend({options:{where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6},initialize:function(d){if(b.Layers.FeatureGrid.prototype.initialize.call(this,d),d.url=b.Util.cleanUrl(d.url),d=a.setOptions(this,d),this._service=new b.Services.FeatureLayerService(d),"*"!==this.options.fields[0]){for(var e=!1,f=0;f<this.options.fields.length;f++)this.options.fields[f].match(/^(OBJECTID|FID|OID|ID)$/i)&&(e=!0);e===!1&&b.Util.warn("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this._service.on("authenticationrequired requeststart requestend requesterror requestsuccess",function(b){b=a.extend({target:this},b),this.fire(b.type,b)},this),this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new c,this._endTimeIndex=new c):this.options.timeField&&(this._timeIndex=new c),this._cache={},this._currentSnapshot=[],this._activeRequests=0,this._pendingRequests=[]},onAdd:function(a){return b.Layers.FeatureGrid.prototype.onAdd.call(this,a)},onRemove:function(a){return b.Layers.FeatureGrid.prototype.onRemove.call(this,a)},getAttribution:function(){return this.options.attribution},createCell:function(a,b){this._requestFeatures(a,b)},_requestFeatures:function(c,d,e){this._activeRequests++,1===this._activeRequests&&this.fire("loading",{bounds:c}),this._buildQuery(c).run(function(f,g,h){h&&h.exceededTransferLimit&&this.fire("drawlimitexceeded"),!f&&g&&g.features.length&&!this._removed&&b.Util.requestAnimationFrame(a.Util.bind(function(){this._addFeatures(g.features,d),this._postProcessFeatures(c)},this)),f||!g||g.features.length||this._postProcessFeatures(c),e&&e.call(this,f,g)},this)},_postProcessFeatures:function(a){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:a})},_cacheKey:function(a){return a.z+":"+a.x+":"+a.y},_addFeatures:function(a,b){var c=this._cacheKey(b);this._cache[c]=this._cache[c]||[];for(var d=a.length-1;d>=0;d--){var e=a[d].id;this._currentSnapshot.push(e),this._cache[c].push(e)}this.options.timeField&&this._buildTimeIndexes(a);var f=this._map.getZoom();f>this.options.maxZoom||f<this.options.minZoom||this.createLayers(a)},_buildQuery:function(a){var b=this._service.query().intersects(a).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.simplifyFactor&&b.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&b.between(this.options.from,this.options.to),b},setWhere:function(c,d,e){this.options.where=c&&c.length?c:"1=1";for(var f=[],g=[],h=0,i=null,j=a.Util.bind(function(c,j){if(h--,c&&(i=c),j)for(var k=j.features.length-1;k>=0;k--)g.push(j.features[k].id);h<=0&&(this._currentSnapshot=g,b.Util.requestAnimationFrame(a.Util.bind(function(){this.removeLayers(f),this.addLayers(g),d&&d.call(e,i)},this)))},this),k=this._currentSnapshot.length-1;k>=0;k--)f.push(this._currentSnapshot[k]);for(var l in this._activeCells){h++;var m=this._keyToCellCoords(l),n=this._cellCoordsToBounds(m);this._requestFeatures(n,l,j)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(b,c,d,e){var f=this.options.from,g=this.options.to,h=0,i=null,j=a.Util.bind(function(a){a&&(i=a),this._filterExistingFeatures(f,g,b,c),h--,d&&h<=0&&d.call(e,i)},this);if(this.options.from=b,this.options.to=c,this._filterExistingFeatures(f,g,b,c),"server"===this.options.timeFilterMode)for(var k in this._activeCells){h++;var l=this._keyToCellCoords(k),m=this._cellCoordsToBounds(l);this._requestFeatures(m,k,j)}},refresh:function(){for(var a in this._activeCells){var b=this._keyToCellCoords(a),c=this._cellCoordsToBounds(b);this._requestFeatures(c,a)}this.redraw&&this.once("load",function(){this.eachFeature(function(a){this._redraw(a.feature.id)},this)},this)},_filterExistingFeatures:function(c,d,e,f){var g=c&&d?this._getFeaturesInTimeRange(c,d):this._currentSnapshot,h=this._getFeaturesInTimeRange(e,f);if(h.indexOf)for(var i=0;i<h.length;i++){var j=g.indexOf(h[i]);j>=0&&g.splice(j,1)}b.Util.requestAnimationFrame(a.Util.bind(function(){this.removeLayers(g),this.addLayers(h)},this))},_getFeaturesInTimeRange:function(a,b){var c,d=[];if(this.options.timeField.start&&this.options.timeField.end){var e=this._startTimeIndex.between(a,b),f=this._endTimeIndex.between(a,b);c=e.concat(f)}else c=this._timeIndex.between(a,b);for(var g=c.length-1;g>=0;g--)d.push(c[g].id);return d},_buildTimeIndexes:function(a){var b,c;if(this.options.timeField.start&&this.options.timeField.end){var d=[],e=[];for(b=a.length-1;b>=0;b--)c=a[b],d.push({id:c.id,value:new Date(c.properties[this.options.timeField.start])}),e.push({id:c.id,value:new Date(c.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(d),this._endTimeIndex.bulkAdd(e)}else{var f=[];for(b=a.length-1;b>=0;b--)c=a[b],f.push({id:c.id,value:new Date(c.properties[this.options.timeField])});this._timeIndex.bulkAdd(f)}},_featureWithinTimeRange:function(a){if(!this.options.from||!this.options.to)return!0;var b=+this.options.from.valueOf(),c=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var d=+a.properties[this.options.timeField];return d>=b&&d<=c}if(this.options.timeField.start&&this.options.timeField.end){var e=+a.properties[this.options.timeField.start],f=+a.properties[this.options.timeField.end];return e>=b&&e<=c||f>=b&&f<=c}},authenticate:function(a){return this._service.authenticate(a),this},metadata:function(a,b){return this._service.metadata(a,b),this},query:function(){return this._service.query()},_getMetadata:function(b){if(this._metadata){var c;b(c,this._metadata)}else this.metadata(a.Util.bind(function(a,c){this._metadata=c,b(a,this._metadata)},this))},addFeature:function(b,c,d){this._getMetadata(a.Util.bind(function(e,f){this._service.addFeature(b,a.Util.bind(function(a,e){a||(b.properties[f.objectIdField]=e.objectId,b.id=e.objectId,this.createLayers([b])),c&&c.call(d,a,e)},this))},this))},updateFeature:function(a,b,c){this._service.updateFeature(a,function(d,e){d||(this.removeLayers([a.id],!0),this.createLayers([a])),b&&b.call(c,d,e)},this)},deleteFeature:function(a,b,c){this._service.deleteFeature(a,function(a,d){!a&&d.objectId&&this.removeLayers([d.objectId],!0),b&&b.call(c,a,d)},this)},deleteFeatures:function(a,b,c){return this._service.deleteFeatures(a,function(a,d){if(!a&&d.length>0)for(var e=0;e<d.length;e++)this.removeLayers([d[e].objectId],!0);b&&b.call(c,a,d)},this)}}),c.prototype._query=function(a){for(var b,c,d,e=0,f=this.values.length-1;e<=f;)if(d=b=(e+f)/2|0,c=this.values[Math.round(b)],+c.value<+a)e=b+1;else{if(!(+c.value>+a))return b;f=b-1}return~f},c.prototype.sort=function(){this.values.sort(function(a,b){return+b.value-+a.value}).reverse(),this.dirty=!1},c.prototype.between=function(a,b){this.dirty&&this.sort();var c=this._query(a),d=this._query(b);return 0===c&&0===d?[]:(c=Math.abs(c),d=d<0?Math.abs(d):d+1,this.values.slice(c,d))},c.prototype.bulkAdd=function(a){this.dirty=!0,this.values=this.values.concat(a)}}(b),b.Layers.FeatureLayer=b.Layers.FeatureManager.extend({statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},options:{cacheLayers:!0},initialize:function(c){b.Layers.FeatureManager.prototype.initialize.call(this,c),c=a.setOptions(this,c),this._layers={},this._leafletIds={},this._key="c"+(1e9*Math.random()).toString(36).replace(".","_")},onAdd:function(a){return a.on("zoomstart zoomend",function(a){this._zooming="zoomstart"===a.type},this),this._removed=!1,b.Layers.FeatureManager.prototype.onAdd.call(this,a)},onRemove:function(a){this._removed=!0;for(var c in this._layers)a.removeLayer(this._layers[c]),this.fire("removefeature",{feature:this._layers[c].feature});return b.Layers.FeatureManager.prototype.onRemove.call(this,a)},createNewLayer:function(b){return a.GeoJSON.geometryToLayer(b,this.options.pointToLayer,a.GeoJSON.coordsToLatLng,this.options)},_updateLayer:function(b,c){var d=[],e=this.options.coordsToLatLng||a.GeoJSON.coordsToLatLng;switch(c.properties&&(b.feature.properties=c.properties),c.geometry.type){case"Point":d=a.GeoJSON.coordsToLatLng(c.geometry.coordinates),b.setLatLng(d);break;case"LineString":d=a.GeoJSON.coordsToLatLngs(c.geometry.coordinates,0,e),b.setLatLngs(d);break;case"MultiLineString":d=a.GeoJSON.coordsToLatLngs(c.geometry.coordinates,1,e),b.setLatLngs(d);break;case"Polygon":d=a.GeoJSON.coordsToLatLngs(c.geometry.coordinates,1,e),b.setLatLngs(d);break;case"MultiPolygon":d=a.GeoJSON.coordsToLatLngs(c.geometry.coordinates,2,e),b.setLatLngs(d)}},createLayers:function(a){for(var c=a.length-1;c>=0;c--){var d,e=a[c],f=this._layers[e.id];f&&!this._map.hasLayer(f)&&(this._map.addLayer(f),this.fire("addfeature",{feature:f.feature})),f&&(f.setLatLngs||f.setLatLng)&&this._updateLayer(f,e),f||(d=this.createNewLayer(e),d.feature=e,this.options.style?d._originalStyle=this.options.style:d.setStyle&&(d._originalStyle=d.options),d._leaflet_id=this._key+"_"+e.id,this._leafletIds[d._leaflet_id]=e.id,d.on(b.Layers.FeatureLayer.EVENTS,this._propagateEvent,this),this._popup&&d.bindPopup&&d.bindPopup(this._popup(d.feature,d),this._popupOptions),this.options.onEachFeature&&this.options.onEachFeature(d.feature,d),this._layers[d.feature.id]=d,this.resetStyle(d.feature.id),this.fire("createfeature",{feature:d.feature}),(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(e))&&(this._map.addLayer(d),this.fire("addfeature",{feature:d.feature})))}},addLayers:function(a){for(var b=a.length-1;b>=0;b--){var c=this._layers[a[b]];c&&(this.fire("addfeature",{feature:c.feature}),this._map.addLayer(c))}},removeLayers:function(a,b){for(var c=a.length-1;c>=0;c--){var d=a[c],e=this._layers[d];e&&(this.fire("removefeature",{feature:e.feature,permanent:b}),this._map.removeLayer(e)),e&&b&&delete this._layers[d]}},cellEnter:function(c,d){this._zooming||b.Util.requestAnimationFrame(a.Util.bind(function(){var a=this._cacheKey(d),b=this._cellCoordsToKey(d),c=this._cache[a];this._activeCells[b]&&c&&this.addLayers(c)},this))},cellLeave:function(c,d){this._zooming||b.Util.requestAnimationFrame(a.Util.bind(function(){var a=this._cacheKey(d),b=this._cellCoordsToKey(d),c=this._cache[a],e=this._map.getBounds();if(!this._activeCells[b]&&c){for(var f=!0,g=0;g<c.length;g++){var h=this._layers[c[g]];h&&h.getBounds&&e.intersects(h.getBounds())&&(f=!1)}f&&this.removeLayers(c,!this.options.cacheLayers),!this.options.cacheLayers&&f&&(delete this._cache[a],delete this._cells[b],delete this._activeCells[b])}},this))},resetStyle:function(a){var b=this._layers[a];return b&&this.setFeatureStyle(b.feature.id,b._originalStyle),this},setStyle:function(a){return this.options.style=a,this.eachFeature(function(b){this.setFeatureStyle(b.feature.id,a)},this),this},setFeatureStyle:function(b,c){var d=this._layers[b];return"function"==typeof c&&(c=c(d.feature)),c||d.defaultOptions||(c=a.Path.prototype.options,c.fill=!0),d&&d.setStyle&&d.setStyle(c),this},bindPopup:function(a,b){this._popup=a,this._popupOptions=b;for(var c in this._layers){var d=this._layers[c],e=this._popup(d.feature,d);d.bindPopup(e,b)}return this},unbindPopup:function(){this._popup=!1;for(var a in this._layers){var b=this._layers[a];if(b.unbindPopup)b.unbindPopup();else if(b.getLayers){var c=b.getLayers();for(var d in c){var e=c[d];e.unbindPopup()}}}return this},eachFeature:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getFeature:function(a){return this._layers[a]},bringToBack:function(){this.eachFeature(function(a){a.bringToBack&&a.bringToBack()})},bringToFront:function(){this.eachFeature(function(a){a.bringToFront&&a.bringToFront()})},redraw:function(a){return a&&this._redraw(a),this},_redraw:function(b){var c=this._layers[b],d=c.feature;if(c&&c.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var e=this.options.pointToLayer(d,a.latLng(d.geometry.coordinates[1],d.geometry.coordinates[0])),f=e.options.icon;c.setIcon(f)}if(c&&c.setStyle&&this.options.pointToLayer){var g=this.options.pointToLayer(d,a.latLng(d.geometry.coordinates[1],d.geometry.coordinates[0])),h=g.options;this.setFeatureStyle(d.id,h)}c&&c.setStyle&&this.options.style&&this.resetStyle(d.id)},_propagateEvent:function(a){a.layer=this._layers[this._leafletIds[a.target._leaflet_id]],a.target=this,this.fire(a.type,a)}}),b.FeatureLayer=b.Layers.FeatureLayer,b.Layers.featureLayer=function(a){return new b.Layers.FeatureLayer(a)},b.featureLayer=function(a){return new b.Layers.FeatureLayer(a)},b.Controls.Logo=a.Control.extend({options:{position:"bottomright",marginTop:0,marginLeft:0,marginBottom:0,marginRight:0},onAdd:function(){var b=a.DomUtil.create("div","esri-leaflet-logo");return b.style.marginTop=this.options.marginTop,b.style.marginLeft=this.options.marginLeft,b.style.marginBottom=this.options.marginBottom,b.style.marginRight=this.options.marginRight,b.innerHTML=this._adjustLogo(this._map._size),this._map.on("resize",function(a){b.innerHTML=this._adjustLogo(a.newSize)},this),b},_adjustLogo:function(a){return a.x<=600||a.y<=600?'<a href="https://developers.arcgis.com" style="border: none;"><img src="https://js.arcgis.com/3.13/esri/images/map/logo-sm.png" alt="Powered by Esri" style="border: none;"></a>':'<a href="https://developers.arcgis.com" style="border: none;"><img src="https://js.arcgis.com/3.13/esri/images/map/logo-med.png" alt="Powered by Esri" style="border: none;"></a>'}}),b.Controls.logo=function(b){return new a.esri.Controls.Logo(b)},b}),function(a,b){"use strict";"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],function(a){return b(a)}):b(a.jQuery)}(this,function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"!=typeof this.options.autoSelect||this.options.autoSelect,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=a(this.options.menu),this.$appendTo=this.options.appendTo?a(this.options.appendTo):null,this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus&&this.options.showHintOnFocus,this.afterSelect=this.options.afterSelect,this.addItem=!1};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").data("value");if(this.$element.data("active",a),this.autoSelect||a){var b=this.updater(a);b||(b=""),this.$element.val(this.displayText(b)||b).change(),this.afterSelect(b)}return this.hide()},updater:function(a){return a},setSource:function(a){this.source=a},show:function(){var b,c=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),d="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight;b=this.shown?this.$menu:this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element);var e=a(b).parent().hasClass("dropup"),f=e?"auto":c.top+c.height+d,g=a(b).hasClass("dropdown-menu-right"),h=g?"auto":c.left;return b.css({top:f,left:h}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){if("undefined"!=typeof b&&null!==b?this.query=b:this.query=this.$element.val()||"",this.query.length<this.options.minLength&&!this.options.showHintOnFocus)return this.shown?this.hide():this;var c=a.proxy(function(){a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(c,this.delay)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length||this.options.addItem?(b.length>0?this.$element.data("active",b[0]):this.$element.data("active",null),this.options.addItem&&b.push(this.options.addItem),"all"==this.options.items?this.render(b).show():this.render(b.slice(0,this.options.items)).show()):this.shown?this.hide():this},matcher:function(a){var b=this.displayText(a);return~b.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();){var f=this.displayText(b);f.toLowerCase().indexOf(this.query.toLowerCase())?~f.indexOf(this.query)?d.push(b):e.push(b):c.push(b)}return c.concat(d,e)},highlighter:function(b){var c,d,e,f,g=a("<div></div>"),h=this.query,i=b.toLowerCase().indexOf(h.toLowerCase()),j=h.length;if(0===j)return g.text(b).html();for(;i>-1;)c=b.substr(0,i),d=b.substr(i,j),e=b.substr(i+j),f=a("<strong></strong>").text(d),g.append(document.createTextNode(c)).append(f),b=e,i=b.toLowerCase().indexOf(h.toLowerCase());return g.append(document.createTextNode(b)).html()},render:function(b){var c=this,d=this,e=!1,f=[],g=c.options.separator;return a.each(b,function(a,c){a>0&&c[g]!==b[a-1][g]&&f.push({__type:"divider"}),!c[g]||0!==a&&c[g]===b[a-1][g]||f.push({__type:"category",name:c[g]}),f.push(c)}),b=a(f).map(function(b,f){if("category"==(f.__type||!1))return a(c.options.headerHtml).text(f.name)[0];if("divider"==(f.__type||!1))return a(c.options.headerDivider)[0];var g=d.displayText(f);return b=a(c.options.item).data("value",f),b.find("a").html(c.highlighter(g,f)),g==d.$element.val()&&(b.addClass("active"),d.$element.data("active",f),e=!0),b[0]}),this.autoSelect&&!e&&(b.filter(":not(.dropdown-header)").first().addClass("active"),this.$element.data("active",b.first().data("value"))),this.$menu.html(b),this},displayText:function(a){return"undefined"!=typeof a&&"undefined"!=typeof a.name&&a.name||a},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("input",a.proxy(this.input,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this)).on("mousedown",a.proxy(this.mousedown,this))},mousedown:function(a){this.mouseddown=!0,a.stopPropagation(),a.preventDefault()},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("input").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown)switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:if(a.shiftKey)return;a.preventDefault(),this.prev();break;case 40:if(a.shiftKey)return;a.preventDefault(),this.next()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.shown||40!=b.keyCode?this.move(b):this.lookup()},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},input:function(a){this.lookup(),a.preventDefault()},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide()}a.preventDefault()},focus:function(a){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup())},blur:function(a){this.focused=!1,!this.mousedover&&this.shown&&(this.mouseddown&&a.originalEvent?this.mouseddown=!1:this.hide())},click:function(a){a.preventDefault(),this.select(),this.$element.focus(),this.hide()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(a){this.mousedover=!1}};var c=a.fn.typeahead;a.fn.typeahead=function(c){var d=arguments;return"string"==typeof c&&"getActive"==c?this.data("active"):this.each(function(){var e=a(this),f=e.data("typeahead"),g="object"==typeof c&&c;f||e.data("typeahead",f=new b(this,g)),"string"==typeof c&&f[c]&&(d.length>1?f[c].apply(f,Array.prototype.slice.call(d,1)):f[c]())})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:a.noop,addItem:!1,delay:0,separator:"category",headerHtml:'<li class="dropdown-header"></li>',headerDivider:'<li class="divider" role="separator"></li>'},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);c.data("typeahead")||c.typeahead(c.data())})});var tableSortModule=angular.module("tableSort",[]);tableSortModule.directive("tsWrapper",["$log","$parse",function(a,b){"use strict";return{scope:!0,controller:["$scope",function(a){a.sortExpression=[],a.headings=[];var c=function(a){return[b(a),null,!1]};this.setSortField=function(b,d){var e,f=c(b);if(1===a.sortExpression.length&&a.sortExpression[0][0]===f[0])a.sortExpression[0][2]?(d.removeClass("tablesort-desc"),d.addClass("tablesort-asc"),a.sortExpression[0][2]=!1):(d.removeClass("tablesort-asc"),d.addClass("tablesort-desc"),a.sortExpression[0][2]=!0);else{for(e=0;e<a.headings.length;e+=1)a.headings[e].removeClass("tablesort-desc").removeClass("tablesort-asc");d.addClass("tablesort-asc"),a.sortExpression=[f]}},this.addSortField=function(b,d){var e,f=!1,g=c(b);for(e=0;e<a.sortExpression.length;e+=1)a.sortExpression[e][0]===g[0]&&(a.sortExpression[e][2]?(d.removeClass("tablesort-desc"),d.addClass("tablesort-asc"),a.sortExpression[e][2]=!1):(d.removeClass("tablesort-asc"),d.addClass("tablesort-desc"),a.sortExpression[e][2]=!0),f=!0);f||(d.addClass("tablesort-asc"),a.sortExpression.push(g))},this.setTrackBy=function(b){a.trackBy=b},this.registerHeading=function(b){a.headings.push(b)},a.sortFun=function(b,c){var d,e,f,g,h;for(d=0;d<a.sortExpression.length;d+=1){if(e=a.sortExpression[d][0](b),f=a.sortExpression[d][0](c),h=c[a.sortExpression[d][1]],h&&(e=h(e),f=h(f)),void 0!==e&&null!==e||(e=""),void 0!==f&&null!==f||(f=""),g=a.sortExpression[d][2],e>f)return g?-1:1;if(e<f)return g?1:-1}if(a.trackBy){if(e=b[a.trackBy],f=c[a.trackBy],void 0!==e&&null!==e||(e=""),void 0!==f&&null!==f||(f=""),e>f)return g?-1:1;if(e<f)return g?1:-1}return 0}}]}}]),tableSortModule.directive("tsCriteria",function(){return{require:"^tsWrapper",link:function(a,b,c,d){var e=function(e){a.$apply(function(){e.shiftKey?d.addSortField(c.tsCriteria,b):d.setSortField(c.tsCriteria,b)})};b.bind("click",e),b.addClass("tablesort-sortable"),"tsDefault"in c&&"0"!==c.tsDefault&&(d.addSortField(c.tsCriteria,b),"descending"==c.tsDefault&&d.addSortField(c.tsCriteria,b)),d.registerHeading(b)}}}),tableSortModule.directive("tsRepeat",["$compile",function(a){return{terminal:!0,multiElement:!0,require:"^tsWrapper",priority:1e6,link:function(b,c,d,e){for(var f=["ng-repeat","data-ng-repeat","ng-repeat-start","data-ng-repeat-start"],g=f[0],h="ts-repeat",i=0;i<f.length;i++)if(angular.isDefined(c.attr(f[i]))){g=f[i],h=g.replace(/^(data-)?ng/,"$1ts");break}var j=c.attr(g),k=null,l=j.match(/\s+track\s+by\s+\S+?\.(\S+)/);if(l&&(k=l[1],e.setTrackBy(k)),j=j.search(/tablesort/)!=-1?j.replace(/tablesort/,"tablesortOrderBy:sortFun"):j.replace(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(\s+track\s+by\s+[\s\S]+?)?\s*$/,"$1 in $2 | tablesortOrderBy:sortFun$3"),angular.isUndefined(d.tsHideNoData)){var m=angular.element(c[0]).clone();m.removeAttr(g),m.removeAttr(h),m.addClass("showIfLast"),m.children().remove(),m.append('<td colspan="'+c[0].childElementCount+'"></td>'),m=a(m)(b),c.parent().prepend(m)}angular.element(c[0]).attr(g,j),a(c,null,1e6)(b)}}}]),tableSortModule.filter("tablesortOrderBy",function(){return function(a,b){if(a){for(var c=[],d=0;d<a.length;d++)c.push(a[d]);return c.sort(b)}}}),tableSortModule.filter("parseInt",function(){return function(a){return parseInt(a)||null}}),tableSortModule.filter("parseFloat",function(){return function(a){return parseFloat(a)||null}}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Plotly=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("../src/plotly"),e={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;",
"X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var f in e){var g=f.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");d.Lib.addStyleRule(g,e[f])}},{"../src/plotly":1070}],2:[function(a,b,c){"use strict";b.exports={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",ascent:850,descent:-150},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",ascent:850,descent:-150},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",ascent:850,descent:-150},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",ascent:850,descent:-150},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",ascent:850,descent:-150},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",ascent:850,descent:-150},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150},lasso:{width:1031,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",ascent:850,descent:-150},selectbox:{width:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",ascent:850,descent:-150}}},{}],3:[function(a,b,c){"use strict";function d(a){this._components=a.slice(),this._time=[0],this.prevMatrix=a.slice(),this.nextMatrix=a.slice(),this.computedMatrix=a.slice(),this.computedInverse=a.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-(1/0),1/0]}function e(a){a=a||{};var b=a.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new d(b)}var f=a("binary-search-bounds"),g=a("mat4-interpolate"),h=a("gl-mat4/invert"),i=a("gl-mat4/rotateX"),j=a("gl-mat4/rotateY"),k=a("gl-mat4/rotateZ"),l=a("gl-mat4/lookAt"),m=a("gl-mat4/translate"),n=(a("gl-mat4/scale"),a("gl-vec3/normalize")),o=[0,0,0];b.exports=e;var p=d.prototype;p.recalcMatrix=function(a){var b=this._time,c=f.le(b,a),d=this.computedMatrix;if(!(c<0)){var e=this._components;if(c===b.length-1)for(var i=16*c,j=0;j<16;++j)d[j]=e[i++];else{for(var k=b[c+1]-b[c],i=16*c,l=this.prevMatrix,m=!0,j=0;j<16;++j)l[j]=e[i++];for(var o=this.nextMatrix,j=0;j<16;++j)o[j]=e[i++],m=m&&l[j]===o[j];if(k<1e-6||m)for(var j=0;j<16;++j)d[j]=l[j];else g(d,l,o,(a-b[c])/k)}var p=this.computedUp;p[0]=d[1],p[1]=d[5],p[2]=d[6],n(p,p);var q=this.computedInverse;h(q,d);var r=this.computedEye,s=q[15];r[0]=q[12]/s,r[1]=q[13]/s,r[2]=q[14]/s;for(var t=this.computedCenter,u=Math.exp(this.computedRadius[0]),j=0;j<3;++j)t[j]=r[j]-d[2+4*j]*u}},p.idle=function(a){if(!(a<this.lastT())){for(var b=this._components,c=b.length-16,d=0;d<16;++d)b.push(b[c++]);this._time.push(a)}},p.flush=function(a){var b=f.gt(this._time,a)-2;b<0||(this._time.slice(0,b),this._components.slice(0,16*b))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(a,b,c,d){this.recalcMatrix(a),b=b||this.computedEye,c=c||o,d=d||this.computedUp,this.setMatrix(a,l(this.computedMatrix,b,c,d));for(var e=0,f=0;f<3;++f)e+=Math.pow(c[f]-b[f],2);e=Math.log(Math.sqrt(e)),this.computedRadius[0]=e},p.rotate=function(a,b,c,d){this.recalcMatrix(a);var e=this.computedInverse;b&&j(e,e,b),c&&i(e,e,c),d&&k(e,e,d),this.setMatrix(a,h(this.computedMatrix,e))};var q=[0,0,0];p.pan=function(a,b,c,d){q[0]=-(b||0),q[1]=-(c||0),q[2]=-(d||0),this.recalcMatrix(a);var e=this.computedInverse;m(e,e,q),this.setMatrix(a,h(e,e))},p.translate=function(a,b,c,d){q[0]=b||0,q[1]=c||0,q[2]=d||0,this.recalcMatrix(a);var e=this.computedMatrix;m(e,e,q),this.setMatrix(a,e)},p.setMatrix=function(a,b){if(!(a<this.lastT())){this._time.push(a);for(var c=0;c<16;++c)this._components.push(b[c])}},p.setDistance=function(a,b){this.computedRadius[0]=b},p.setDistanceLimits=function(a,b){var c=this._limits;c[0]=a,c[1]=b},p.getDistanceLimits=function(a){var b=this._limits;return a?(a[0]=b[0],a[1]=b[1],a):b}},{"binary-search-bounds":4,"gl-mat4/invert":214,"gl-mat4/lookAt":215,"gl-mat4/rotateX":219,"gl-mat4/rotateY":220,"gl-mat4/rotateZ":221,"gl-mat4/scale":222,"gl-mat4/translate":223,"gl-vec3/normalize":9,"mat4-interpolate":10}],4:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=["function ",a,"(a,l,h,",d.join(","),"){",f?"":"var i=",c?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",e?".get(m)":"[m]"];return f?b.indexOf("c")<0?g.push(";if(x===y){return m}else if(x<=y){"):g.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):g.push(";if(",b,"){i=m;"),c?g.push("l=m+1}else{h=m-1}"):g.push("h=m-1}else{l=m+1}"),g.push("}"),f?g.push("return -1};"):g.push("return i};"),g.join("")}function e(a,b,c,e){var f=new Function([d("A","x"+a+"y",b,["y"],!1,e),d("B","x"+a+"y",b,["y"],!0,e),d("P","c(x,y)"+a+"0",b,["y","c"],!1,e),d("Q","c(x,y)"+a+"0",b,["y","c"],!0,e),"function dispatchBsearch",c,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",c].join(""));return f()}b.exports={ge:e(">=",!1,"GE"),gt:e(">",!1,"GT"),lt:e("<",!0,"LT"),le:e("<=",!0,"LE"),eq:e("-",!0,"EQ",!0)}},{}],5:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a}b.exports=d},{}],6:[function(a,b,c){function d(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}b.exports=d},{}],7:[function(a,b,c){function d(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)}b.exports=d},{}],8:[function(a,b,c){function d(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a}b.exports=d},{}],9:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a}b.exports=d},{}],10:[function(a,b,c){function d(a,b,c,d){if(0===k(b)||0===k(c))return!1;var e=j(b,m.translate,m.scale,m.skew,m.perspective,m.quaternion),f=j(c,n.translate,n.scale,n.skew,n.perspective,n.quaternion);return!(!e||!f)&&(h(o.translate,m.translate,n.translate,d),h(o.skew,m.skew,n.skew,d),h(o.scale,m.scale,n.scale,d),h(o.perspective,m.perspective,n.perspective,d),l(o.quaternion,m.quaternion,n.quaternion,d),i(a,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function e(){return{translate:f(),scale:f(1),skew:f(),perspective:g(),quaternion:g()}}function f(a){return[a||0,a||0,a||0]}function g(){return[0,0,0,1]}var h=a("gl-vec3/lerp"),i=a("mat4-recompose"),j=a("mat4-decompose"),k=a("gl-mat4/determinant"),l=a("quat-slerp"),m=e(),n=e(),o=e();b.exports=d},{"gl-mat4/determinant":210,"gl-vec3/lerp":8,"mat4-decompose":11,"mat4-recompose":13,"quat-slerp":14}],11:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a}function e(a,b){a[0][0]=b[0],a[0][1]=b[1],a[0][2]=b[2],a[1][0]=b[4],a[1][1]=b[5],a[1][2]=b[6],a[2][0]=b[8],a[2][1]=b[9],a[2][2]=b[10]}function f(a,b,c,d,e){a[0]=b[0]*d+c[0]*e,a[1]=b[1]*d+c[1]*e,a[2]=b[2]*d+c[2]*e}var g=a("./normalize"),h=a("gl-mat4/create"),i=a("gl-mat4/clone"),j=a("gl-mat4/determinant"),k=a("gl-mat4/invert"),l=a("gl-mat4/transpose"),m={length:a("gl-vec3/length"),normalize:a("gl-vec3/normalize"),dot:a("gl-vec3/dot"),cross:a("gl-vec3/cross")},n=h(),o=h(),p=[0,0,0,0],q=[[0,0,0],[0,0,0],[0,0,0]],r=[0,0,0];b.exports=function(a,b,c,h,s,t){if(b||(b=[0,0,0]),c||(c=[0,0,0]),h||(h=[0,0,0]),s||(s=[0,0,0,1]),t||(t=[0,0,0,1]),!g(n,a))return!1;if(i(o,n),o[3]=0,o[7]=0,o[11]=0,o[15]=1,Math.abs(j(o)<1e-8))return!1;var u=n[3],v=n[7],w=n[11],x=n[12],y=n[13],z=n[14],A=n[15];if(0!==u||0!==v||0!==w){p[0]=u,p[1]=v,p[2]=w,p[3]=A;var B=k(o,o);if(!B)return!1;l(o,o),d(s,p,o)}else s[0]=s[1]=s[2]=0,s[3]=1;if(b[0]=x,b[1]=y,b[2]=z,e(q,n),c[0]=m.length(q[0]),m.normalize(q[0],q[0]),h[0]=m.dot(q[0],q[1]),f(q[1],q[1],q[0],1,-h[0]),c[1]=m.length(q[1]),m.normalize(q[1],q[1]),h[0]/=c[1],h[1]=m.dot(q[0],q[2]),f(q[2],q[2],q[0],1,-h[1]),h[2]=m.dot(q[1],q[2]),f(q[2],q[2],q[1],1,-h[2]),c[2]=m.length(q[2]),m.normalize(q[2],q[2]),h[1]/=c[2],h[2]/=c[2],m.cross(r,q[1],q[2]),m.dot(q[0],r)<0)for(var C=0;C<3;C++)c[C]*=-1,q[C][0]*=-1,q[C][1]*=-1,q[C][2]*=-1;return t[0]=.5*Math.sqrt(Math.max(1+q[0][0]-q[1][1]-q[2][2],0)),t[1]=.5*Math.sqrt(Math.max(1-q[0][0]+q[1][1]-q[2][2],0)),t[2]=.5*Math.sqrt(Math.max(1-q[0][0]-q[1][1]+q[2][2],0)),t[3]=.5*Math.sqrt(Math.max(1+q[0][0]+q[1][1]+q[2][2],0)),q[2][1]>q[1][2]&&(t[0]=-t[0]),q[0][2]>q[2][0]&&(t[1]=-t[1]),q[1][0]>q[0][1]&&(t[2]=-t[2]),!0}},{"./normalize":12,"gl-mat4/clone":208,"gl-mat4/create":209,"gl-mat4/determinant":210,"gl-mat4/invert":214,"gl-mat4/transpose":224,"gl-vec3/cross":5,"gl-vec3/dot":6,"gl-vec3/length":7,"gl-vec3/normalize":9}],12:[function(a,b,c){b.exports=function(a,b){var c=b[15];if(0===c)return!1;for(var d=1/c,e=0;e<16;e++)a[e]=b[e]*d;return!0}},{}],13:[function(a,b,c){var d={identity:a("gl-mat4/identity"),translate:a("gl-mat4/translate"),multiply:a("gl-mat4/multiply"),create:a("gl-mat4/create"),scale:a("gl-mat4/scale"),fromRotationTranslation:a("gl-mat4/fromRotationTranslation")},e=(d.create(),d.create());b.exports=function(a,b,c,f,g,h){return d.identity(a),d.fromRotationTranslation(a,h,b),a[3]=g[0],a[7]=g[1],a[11]=g[2],a[15]=g[3],d.identity(e),0!==f[2]&&(e[9]=f[2],d.multiply(a,a,e)),0!==f[1]&&(e[9]=0,e[8]=f[1],d.multiply(a,a,e)),0!==f[0]&&(e[8]=0,e[4]=f[0],d.multiply(a,a,e)),d.scale(a,a,c),a}},{"gl-mat4/create":209,"gl-mat4/fromRotationTranslation":212,"gl-mat4/identity":213,"gl-mat4/multiply":216,"gl-mat4/scale":222,"gl-mat4/translate":223}],14:[function(a,b,c){b.exports=a("gl-quat/slerp")},{"gl-quat/slerp":15}],15:[function(a,b,c){function d(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,f<0&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a}b.exports=d},{}],16:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j){var k=b+f+j;if(l>0){var l=Math.sqrt(k+1);a[0]=.5*(g-i)/l,a[1]=.5*(h-d)/l,a[2]=.5*(c-f)/l,a[3]=.5*l}else{var m=Math.max(b,f,j),l=Math.sqrt(2*m-k+1);b>=m?(a[0]=.5*l,a[1]=.5*(e+c)/l,a[2]=.5*(h+d)/l,a[3]=.5*(g-i)/l):f>=m?(a[0]=.5*(c+e)/l,a[1]=.5*l,a[2]=.5*(i+g)/l,a[3]=.5*(h-d)/l):(a[0]=.5*(d+h)/l,a[1]=.5*(g+i)/l,a[2]=.5*l,a[3]=.5*(c-e)/l)}return a}b.exports=d},{}],17:[function(a,b,c){"use strict";function d(a,b,c){return Math.min(b,Math.max(a,c))}function e(a,b,c){this.dimension=a.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-(1/0),this.bounds[1][d]=1/0;this._state=a.slice().reverse(),this._velocity=b.slice().reverse(),this._time=[c],this._scratch=[a.slice(),a.slice(),a.slice(),a.slice(),a.slice()]}function f(a){for(var b=new Array(a),c=0;c<a;++c)b[c]=0;return b}function g(a,b,c){switch(arguments.length){case 0:return new e([0],[0],0);case 1:if("number"==typeof a){var d=f(a);return new e(d,d,0)}return new e(a,f(a.length),0);case 2:if("number"==typeof b){var d=f(a.length);return new e(a,d,(+b))}c=0;case 3:if(a.length!==b.length)throw new Error("state and velocity lengths must match");return new e(a,b,c)}}b.exports=g;var h=a("cubic-hermite"),i=a("binary-search-bounds"),j=e.prototype;j.flush=function(a){var b=i.gt(this._time,a)-1;b<=0||(this._time.splice(0,b),this._state.splice(0,b*this.dimension),this._velocity.splice(0,b*this.dimension))},j.curve=function(a){var b=this._time,c=b.length,e=i.le(b,a),f=this._scratch[0],g=this._state,j=this._velocity,k=this.dimension,l=this.bounds;if(e<0)for(var m=k-1,n=0;n<k;++n,--m)f[n]=g[m];else if(e>=c-1)for(var m=g.length-1,o=a-b[c-1],n=0;n<k;++n,--m)f[n]=g[m]+o*j[m];else{for(var m=k*(e+1)-1,p=b[e],q=b[e+1],r=q-p||1,s=this._scratch[1],t=this._scratch[2],u=this._scratch[3],v=this._scratch[4],w=!0,n=0;n<k;++n,--m)s[n]=g[m],u[n]=j[m]*r,t[n]=g[m+k],v[n]=j[m+k]*r,w=w&&s[n]===t[n]&&u[n]===v[n]&&0===u[n];if(w)for(var n=0;n<k;++n)f[n]=s[n];else h(s,u,t,v,(a-p)/r,f)}for(var x=l[0],y=l[1],n=0;n<k;++n)f[n]=d(x[n],y[n],f[n]);return f},j.dcurve=function(a){var b=this._time,c=b.length,d=i.le(b,a),e=this._scratch[0],f=this._state,g=this._velocity,j=this.dimension;if(d>=c-1)for(var k=f.length-1,l=(a-b[c-1],0);l<j;++l,--k)e[l]=g[k];else{for(var k=j*(d+1)-1,m=b[d],n=b[d+1],o=n-m||1,p=this._scratch[1],q=this._scratch[2],r=this._scratch[3],s=this._scratch[4],t=!0,l=0;l<j;++l,--k)p[l]=f[k],r[l]=g[k]*o,q[l]=f[k+j],s[l]=g[k+j]*o,t=t&&p[l]===q[l]&&r[l]===s[l]&&0===r[l];if(t)for(var l=0;l<j;++l)e[l]=0;else{h.derivative(p,r,q,s,(a-m)/o,e);for(var l=0;l<j;++l)e[l]/=o}}return e},j.lastT=function(){var a=this._time;return a[a.length-1]},j.stable=function(){for(var a=this._velocity,b=a.length,c=this.dimension-1;c>=0;--c)if(a[--b])return!1;return!0},j.jump=function(a){var b=this.lastT(),c=this.dimension;if(!(a<b||arguments.length!==c+1)){var e=this._state,f=this._velocity,g=e.length-this.dimension,h=this.bounds,i=h[0],j=h[1];this._time.push(b,a);for(var k=0;k<2;++k)for(var l=0;l<c;++l)e.push(e[g++]),f.push(0);this._time.push(a);for(var l=c;l>0;--l)e.push(d(i[l-1],j[l-1],arguments[l])),f.push(0)}},j.push=function(a){var b=this.lastT(),c=this.dimension;if(!(a<b||arguments.length!==c+1)){var e=this._state,f=this._velocity,g=e.length-this.dimension,h=a-b,i=this.bounds,j=i[0],k=i[1],l=h>1e-6?1/h:0;this._time.push(a);for(var m=c;m>0;--m){var n=d(j[m-1],k[m-1],arguments[m]);e.push(n),f.push((n-e[g++])*l)}}},j.set=function(a){var b=this.dimension;if(!(a<this.lastT()||arguments.length!==b+1)){var c=this._state,e=this._velocity,f=this.bounds,g=f[0],h=f[1];this._time.push(a);for(var i=b;i>0;--i)c.push(d(g[i-1],h[i-1],arguments[i])),e.push(0)}},j.move=function(a){var b=this.lastT(),c=this.dimension;if(!(a<=b||arguments.length!==c+1)){var e=this._state,f=this._velocity,g=e.length-this.dimension,h=this.bounds,i=h[0],j=h[1],k=a-b,l=k>1e-6?1/k:0;this._time.push(a);for(var m=c;m>0;--m){var n=arguments[m];e.push(d(i[m-1],j[m-1],e[g++]+n)),f.push(n*l)}}},j.idle=function(a){var b=this.lastT();if(!(a<b)){var c=this.dimension,e=this._state,f=this._velocity,g=e.length-c,h=this.bounds,i=h[0],j=h[1],k=a-b;this._time.push(a);for(var l=c-1;l>=0;--l)e.push(d(i[l],j[l],e[g]+k*f[g])),f.push(0),g+=1}}},{"binary-search-bounds":18,"cubic-hermite":19}],18:[function(a,b,c){arguments[4][4][0].apply(c,arguments)},{dup:4}],19:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){var g=6*e*e-6*e,h=3*e*e-4*e+1,i=-6*e*e+6*e,j=3*e*e-2*e;if(a.length){f||(f=new Array(a.length));for(var k=a.length-1;k>=0;--k)f[k]=g*a[k]+h*b[k]+i*c[k]+j*d[k];return f}return g*a+h*b+i*c[k]+j*d}function e(a,b,c,d,e,f){var g=e-1,h=e*e,i=g*g,j=(1+2*e)*i,k=e*i,l=h*(3-2*e),m=h*g;if(a.length){f||(f=new Array(a.length));for(var n=a.length-1;n>=0;--n)f[n]=j*a[n]+k*b[n]+l*c[n]+m*d[n];return f}return j*a+k*b+l*c+m*d}b.exports=e,b.exports.derivative=d},{}],20:[function(a,b,c){"use strict";function d(a,b,c){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2))}function e(a,b,c,d){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2)+Math.pow(d,2))}function f(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],h=e(c,d,f,g);h>1e-6?(a[0]=c/h,a[1]=d/h,a[2]=f/h,a[3]=g/h):(a[0]=a[1]=a[2]=0,a[3]=1)}function g(a,b,c){this.radius=i([c]),this.center=i(b),this.rotation=i(a),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}function h(a){a=a||{};var b=a.center||[0,0,0],c=a.rotation||[0,0,0,1],d=a.radius||1;b=[].slice.call(b,0,3),c=[].slice.call(c,0,4),f(c,c);var e=new g(c,b,Math.log(d));return e.setDistanceLimits(a.zoomMin,a.zoomMax),("eye"in a||"up"in a)&&e.lookAt(0,a.eye,a.center,a.up),e}b.exports=h;var i=a("filtered-vector"),j=a("gl-mat4/lookAt"),k=a("gl-mat4/fromQuat"),l=a("gl-mat4/invert"),m=a("./lib/quatFromFrame"),n=g.prototype;n.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},n.recalcMatrix=function(a){this.radius.curve(a),this.center.curve(a),this.rotation.curve(a);var b=this.computedRotation;f(b,b);var c=this.computedMatrix;k(c,b);var d=this.computedCenter,e=this.computedEye,g=this.computedUp,h=Math.exp(this.computedRadius[0]);e[0]=d[0]+h*c[2],e[1]=d[1]+h*c[6],e[2]=d[2]+h*c[10],g[0]=c[1],g[1]=c[5],g[2]=c[9];for(var i=0;i<3;++i){for(var j=0,l=0;l<3;++l)j+=c[i+4*l]*e[l];c[12+i]=-j}},n.getMatrix=function(a,b){this.recalcMatrix(a);var c=this.computedMatrix;if(b){for(var d=0;d<16;++d)b[d]=c[d];return b}return c},n.idle=function(a){this.center.idle(a),this.radius.idle(a),this.rotation.idle(a)},n.flush=function(a){this.center.flush(a),this.radius.flush(a),this.rotation.flush(a)},n.pan=function(a,b,c,e){b=b||0,c=c||0,e=e||0,this.recalcMatrix(a);var f=this.computedMatrix,g=f[1],h=f[5],i=f[9],j=d(g,h,i);g/=j,h/=j,i/=j;var k=f[0],l=f[4],m=f[8],n=k*g+l*h+m*i;k-=g*n,l-=h*n,m-=i*n;var o=d(k,l,m);k/=o,l/=o,m/=o;var p=f[2],q=f[6],r=f[10],s=p*g+q*h+r*i,t=p*k+q*l+r*m;p-=s*g+t*k,q-=s*h+t*l,r-=s*i+t*m;var u=d(p,q,r);p/=u,q/=u,r/=u;var v=k*b+g*c,w=l*b+h*c,x=m*b+i*c;this.center.move(a,v,w,x);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+e),this.radius.set(a,Math.log(y))},n.rotate=function(a,b,c,f){this.recalcMatrix(a),b=b||0,c=c||0;var g=this.computedMatrix,h=g[0],i=g[4],j=g[8],k=g[1],l=g[5],m=g[9],n=g[2],o=g[6],p=g[10],q=b*h+c*k,r=b*i+c*l,s=b*j+c*m,t=-(o*s-p*r),u=-(p*q-n*s),v=-(n*r-o*q),w=Math.sqrt(Math.max(0,1-Math.pow(t,2)-Math.pow(u,2)-Math.pow(v,2))),x=e(t,u,v,w);x>1e-6?(t/=x,u/=x,v/=x,w/=x):(t=u=v=0,w=1);var y=this.computedRotation,z=y[0],A=y[1],B=y[2],C=y[3],D=z*w+C*t+A*v-B*u,E=A*w+C*u+B*t-z*v,F=B*w+C*v+z*u-A*t,G=C*w-z*t-A*u-B*v;if(f){t=n,u=o,v=p;var H=Math.sin(f)/d(t,u,v);t*=H,u*=H,v*=H,w=Math.cos(b),D=D*w+G*t+E*v-F*u,E=E*w+G*u+F*t-D*v,F=F*w+G*v+D*u-E*t,G=G*w-D*t-E*u-F*v}var I=e(D,E,F,G);I>1e-6?(D/=I,E/=I,F/=I,G/=I):(D=E=F=0,G=1),this.rotation.set(a,D,E,F,G)},n.lookAt=function(a,b,c,d){this.recalcMatrix(a),c=c||this.computedCenter,b=b||this.computedEye,d=d||this.computedUp;var e=this.computedMatrix;j(e,b,c,d);var g=this.computedRotation;m(g,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),f(g,g),this.rotation.set(a,g[0],g[1],g[2],g[3]);for(var h=0,i=0;i<3;++i)h+=Math.pow(c[i]-b[i],2);this.radius.set(a,.5*Math.log(Math.max(h,1e-6))),this.center.set(a,c[0],c[1],c[2])},n.translate=function(a,b,c,d){this.center.move(a,b||0,c||0,d||0)},n.setMatrix=function(a,b){var c=this.computedRotation;m(c,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),f(c,c),this.rotation.set(a,c[0],c[1],c[2],c[3]);var d=this.computedMatrix;l(d,b);var e=d[15];if(Math.abs(e)>1e-6){var g=d[12]/e,h=d[13]/e,i=d[14]/e;this.recalcMatrix(a);var j=Math.exp(this.computedRadius[0]);this.center.set(a,g-d[2]*j,h-d[6]*j,i-d[10]*j),this.radius.idle(a)}else this.center.idle(a),this.radius.idle(a)},n.setDistance=function(a,b){b>0&&this.radius.set(a,Math.log(b))},n.setDistanceLimits=function(a,b){a=a>0?Math.log(a):-(1/0),b=b>0?Math.log(b):1/0,b=Math.max(b,a),this.radius.bounds[0][0]=a,this.radius.bounds[1][0]=b},n.getDistanceLimits=function(a){var b=this.radius.bounds;return a?(a[0]=Math.exp(b[0][0]),a[1]=Math.exp(b[1][0]),a):[Math.exp(b[0][0]),Math.exp(b[1][0])]},n.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},n.fromJSON=function(a){var b=this.lastT(),c=a.center;c&&this.center.set(b,c[0],c[1],c[2]);var d=a.rotation;d&&this.rotation.set(b,d[0],d[1],d[2],d[3]);var e=a.distance;e&&e>0&&this.radius.set(b,Math.log(e)),this.setDistanceLimits(a.zoomMin,a.zoomMax)}},{"./lib/quatFromFrame":16,"filtered-vector":17,"gl-mat4/fromQuat":211,"gl-mat4/invert":214,"gl-mat4/lookAt":215}],21:[function(a,b,c){arguments[4][17][0].apply(c,arguments)},{"binary-search-bounds":22,"cubic-hermite":23,dup:17}],22:[function(a,b,c){arguments[4][4][0].apply(c,arguments)},{dup:4}],23:[function(a,b,c){arguments[4][19][0].apply(c,arguments)},{dup:19}],24:[function(a,b,c){arguments[4][5][0].apply(c,arguments)},{dup:5}],25:[function(a,b,c){arguments[4][6][0].apply(c,arguments)},{dup:6}],26:[function(a,b,c){arguments[4][9][0].apply(c,arguments)},{dup:9}],27:[function(a,b,c){"use strict";function d(a,b,c){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2)+Math.pow(c,2))}function e(a){return Math.min(1,Math.max(-1,a))}function f(a){var b=Math.abs(a[0]),c=Math.abs(a[1]),d=Math.abs(a[2]),e=[0,0,0];b>Math.max(c,d)?e[2]=1:c>Math.max(b,d)?e[0]=1:e[1]=1;for(var f=0,g=0,h=0;h<3;++h)f+=a[h]*a[h],g+=e[h]*a[h];for(var h=0;h<3;++h)e[h]-=g/f*a[h];return m(e,e),e}function g(a,b,c,d,e,f,g,h){this.center=i(c),this.up=i(d),this.right=i(e),this.radius=i([f]),this.angle=i([g,h]),this.angle.bounds=[[-(1/0),-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(a,b),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var j=0;j<16;++j)this.computedMatrix[j]=.5;this.recalcMatrix(0)}function h(a){a=a||{};var b=a.center||[0,0,0],c=a.up||[0,1,0],e=a.right||f(c),h=a.radius||1,i=a.theta||0,j=a.phi||0;if(b=[].slice.call(b,0,3),c=[].slice.call(c,0,3),m(c,c),e=[].slice.call(e,0,3),m(e,e),"eye"in a){var k=a.eye,o=[k[0]-b[0],k[1]-b[1],k[2]-b[2]];l(e,o,c),d(e[0],e[1],e[2])<1e-6?e=f(c):m(e,e),h=d(o[0],o[1],o[2]);var p=n(c,o)/h,q=n(e,o)/h;j=Math.acos(p),i=Math.acos(q)}return h=Math.log(h),new g(a.zoomMin,a.zoomMax,b,c,e,h,i,j)}b.exports=h;var i=a("filtered-vector"),j=a("gl-mat4/invert"),k=a("gl-mat4/rotate"),l=a("gl-vec3/cross"),m=a("gl-vec3/normalize"),n=a("gl-vec3/dot"),o=g.prototype;o.setDistanceLimits=function(a,b){a=a>0?Math.log(a):-(1/0),b=b>0?Math.log(b):1/0,b=Math.max(b,a),this.radius.bounds[0][0]=a,this.radius.bounds[1][0]=b},o.getDistanceLimits=function(a){var b=this.radius.bounds[0];return a?(a[0]=Math.exp(b[0][0]),a[1]=Math.exp(b[1][0]),a):[Math.exp(b[0][0]),Math.exp(b[1][0])]},o.recalcMatrix=function(a){this.center.curve(a),this.up.curve(a),this.right.curve(a),this.radius.curve(a),this.angle.curve(a);for(var b=this.computedUp,c=this.computedRight,e=0,f=0,g=0;g<3;++g)f+=b[g]*c[g],e+=b[g]*b[g];for(var h=Math.sqrt(e),i=0,g=0;g<3;++g)c[g]-=b[g]*f/e,i+=c[g]*c[g],b[g]/=h;for(var j=Math.sqrt(i),g=0;g<3;++g)c[g]/=j;var k=this.computedToward;l(k,b,c),m(k,k);for(var n=Math.exp(this.computedRadius[0]),o=this.computedAngle[0],p=this.computedAngle[1],q=Math.cos(o),r=Math.sin(o),s=Math.cos(p),t=Math.sin(p),u=this.computedCenter,v=q*s,w=r*s,x=t,y=-q*t,z=-r*t,A=s,B=this.computedEye,C=this.computedMatrix,g=0;g<3;++g){var D=v*c[g]+w*k[g]+x*b[g];C[4*g+1]=y*c[g]+z*k[g]+A*b[g],C[4*g+2]=D,C[4*g+3]=0}var E=C[1],F=C[5],G=C[9],H=C[2],I=C[6],J=C[10],K=F*J-G*I,L=G*H-E*J,M=E*I-F*H,N=d(K,L,M);K/=N,L/=N,M/=N,C[0]=K,C[4]=L,C[8]=M;for(var g=0;g<3;++g)B[g]=u[g]+C[2+4*g]*n;for(var g=0;g<3;++g){for(var i=0,O=0;O<3;++O)i+=C[g+4*O]*B[O];C[12+g]=-i}C[15]=1},o.getMatrix=function(a,b){this.recalcMatrix(a);var c=this.computedMatrix;if(b){for(var d=0;d<16;++d)b[d]=c[d];return b}return c};var p=[0,0,0];o.rotate=function(a,b,c,d){if(this.angle.move(a,b,c),d){this.recalcMatrix(a);var e=this.computedMatrix;p[0]=e[2],p[1]=e[6],p[2]=e[10];for(var f=this.computedUp,g=this.computedRight,h=this.computedToward,i=0;i<3;++i)e[4*i]=f[i],e[4*i+1]=g[i],e[4*i+2]=h[i];k(e,e,d,p);for(var i=0;i<3;++i)f[i]=e[4*i],g[i]=e[4*i+1];this.up.set(a,f[0],f[1],f[2]),this.right.set(a,g[0],g[1],g[2])}},o.pan=function(a,b,c,e){b=b||0,c=c||0,e=e||0,this.recalcMatrix(a);var f=this.computedMatrix,g=(Math.exp(this.computedRadius[0]),f[1]),h=f[5],i=f[9],j=d(g,h,i);g/=j,h/=j,i/=j;var k=f[0],l=f[4],m=f[8],n=k*g+l*h+m*i;k-=g*n,l-=h*n,m-=i*n;var o=d(k,l,m);
k/=o,l/=o,m/=o;var p=k*b+g*c,q=l*b+h*c,r=m*b+i*c;this.center.move(a,p,q,r);var s=Math.exp(this.computedRadius[0]);s=Math.max(1e-4,s+e),this.radius.set(a,Math.log(s))},o.translate=function(a,b,c,d){this.center.move(a,b||0,c||0,d||0)},o.setMatrix=function(a,b,c,f){var g=1;"number"==typeof c&&(g=0|c),(g<0||g>3)&&(g=1);var h=(g+2)%3;b||(this.recalcMatrix(a),b=this.computedMatrix);var i=b[g],k=b[g+4],l=b[g+8];if(f){var m=Math.abs(i),n=Math.abs(k),o=Math.abs(l),p=Math.max(m,n,o);m===p?(i=i<0?-1:1,k=l=0):o===p?(l=l<0?-1:1,i=k=0):(k=k<0?-1:1,i=l=0)}else{var q=d(i,k,l);i/=q,k/=q,l/=q}var r=b[h],s=b[h+4],t=b[h+8],u=r*i+s*k+t*l;r-=i*u,s-=k*u,t-=l*u;var v=d(r,s,t);r/=v,s/=v,t/=v;var w=k*t-l*s,x=l*r-i*t,y=i*s-k*r,z=d(w,x,y);w/=z,x/=z,y/=z,this.center.jump(a,S,T,U),this.radius.idle(a),this.up.jump(a,i,k,l),this.right.jump(a,r,s,t);var A,B;if(2===g){var C=b[1],D=b[5],E=b[9],F=C*r+D*s+E*t,G=C*w+D*x+E*y;A=K<0?-Math.PI/2:Math.PI/2,B=Math.atan2(G,F)}else{var H=b[2],I=b[6],J=b[10],K=H*i+I*k+J*l,L=H*r+I*s+J*t,M=H*w+I*x+J*y;A=Math.asin(e(K)),B=Math.atan2(M,L)}this.angle.jump(a,B,A),this.recalcMatrix(a);var N=b[2],O=b[6],P=b[10],Q=this.computedMatrix;j(Q,b);var R=Q[15],S=Q[12]/R,T=Q[13]/R,U=Q[14]/R,V=Math.exp(this.computedRadius[0]);this.center.jump(a,S-N*V,T-O*V,U-P*V)},o.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},o.idle=function(a){this.center.idle(a),this.up.idle(a),this.right.idle(a),this.radius.idle(a),this.angle.idle(a)},o.flush=function(a){this.center.flush(a),this.up.flush(a),this.right.flush(a),this.radius.flush(a),this.angle.flush(a)},o.setDistance=function(a,b){b>0&&this.radius.set(a,Math.log(b))},o.lookAt=function(a,b,c,f){this.recalcMatrix(a),b=b||this.computedEye,c=c||this.computedCenter,f=f||this.computedUp;var g=f[0],h=f[1],i=f[2],j=d(g,h,i);if(!(j<1e-6)){g/=j,h/=j,i/=j;var k=b[0]-c[0],l=b[1]-c[1],m=b[2]-c[2],n=d(k,l,m);if(!(n<1e-6)){k/=n,l/=n,m/=n;var o=this.computedRight,p=o[0],q=o[1],r=o[2],s=g*p+h*q+i*r;p-=s*g,q-=s*h,r-=s*i;var t=d(p,q,r);if(!(t<.01&&(p=h*m-i*l,q=i*k-g*m,r=g*l-h*k,t=d(p,q,r),t<1e-6))){p/=t,q/=t,r/=t,this.up.set(a,g,h,i),this.right.set(a,p,q,r),this.center.set(a,c[0],c[1],c[2]),this.radius.set(a,Math.log(n));var u=h*r-i*q,v=i*p-g*r,w=g*q-h*p,x=d(u,v,w);u/=x,v/=x,w/=x;var y=g*k+h*l+i*m,z=p*k+q*l+r*m,A=u*k+v*l+w*m,B=Math.asin(e(y)),C=Math.atan2(A,z),D=this.angle._state,E=D[D.length-1],F=D[D.length-2];E%=2*Math.PI;var G=Math.abs(E+2*Math.PI-C),H=Math.abs(E-C),I=Math.abs(E-2*Math.PI-C);G<H&&(E+=2*Math.PI),I<H&&(E-=2*Math.PI),this.angle.jump(this.angle.lastT(),E,F),this.angle.set(a,C,B)}}}}},{"filtered-vector":21,"gl-mat4/invert":214,"gl-mat4/rotate":218,"gl-vec3/cross":24,"gl-vec3/dot":25,"gl-vec3/normalize":26}],28:[function(a,b,c){"use strict";function d(a,b){this._controllerNames=Object.keys(a),this._controllerList=this._controllerNames.map(function(b){return a[b]}),this._mode=b,this._active=a[b],this._active||(this._mode="turntable",this._active=a.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}function e(a){a=a||{};var b=a.eye||[0,0,1],c=a.center||[0,0,0],e=a.up||[0,1,0],i=a.distanceLimits||[0,1/0],j=a.mode||"turntable",k=f(),l=g(),m=h();return k.setDistanceLimits(i[0],i[1]),k.lookAt(0,b,c,e),l.setDistanceLimits(i[0],i[1]),l.lookAt(0,b,c,e),m.setDistanceLimits(i[0],i[1]),m.lookAt(0,b,c,e),new d({turntable:k,orbit:l,matrix:m},j)}b.exports=e;var f=a("turntable-camera-controller"),g=a("orbit-camera-controller"),h=a("matrix-camera-controller"),i=d.prototype,j=[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]];j.forEach(function(a){for(var b=a[0],c=[],d=0;d<a[1];++d)c.push("a"+d);var e="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+a[0]+"("+c.join()+")}";i[b]=Function.apply(null,c.concat(e))}),i.recalcMatrix=function(a){this._active.recalcMatrix(a)},i.getDistance=function(a){return this._active.getDistance(a)},i.getDistanceLimits=function(a){return this._active.getDistanceLimits(a)},i.lastT=function(){return this._active.lastT()},i.setMode=function(a){if(a!==this._mode){var b=this._controllerNames.indexOf(a);if(!(b<0)){var c=this._active,d=this._controllerList[b],e=Math.max(c.lastT(),d.lastT());c.recalcMatrix(e),d.setMatrix(e,c.computedMatrix),this._active=d,this._mode=a,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},i.getMode=function(){return this._mode}},{"matrix-camera-controller":3,"orbit-camera-controller":20,"turntable-camera-controller":27}],29:[function(a,b,c){function d(a,b){return f(e(a,b))}b.exports=d;var e=a("alpha-complex"),f=a("simplicial-complex-boundary")},{"alpha-complex":30,"simplicial-complex-boundary":41}],30:[function(a,b,c){"use strict";function d(a,b){return e(b).filter(function(c){for(var d=new Array(c.length),e=0;e<c.length;++e)d[e]=b[c[e]];return f(d)*a<1})}b.exports=d;var e=a("delaunay-triangulate"),f=a("circumradius")},{circumradius:31,"delaunay-triangulate":70}],31:[function(a,b,c){function d(a){for(var b=e(a),c=0,d=0;d<a.length;++d)for(var f=a[d],g=0;g<b.length;++g)c+=Math.pow(f[g]-b[g],2);return Math.sqrt(c/a.length)}b.exports=d;var e=a("circumcenter")},{circumcenter:32}],32:[function(a,b,c){"use strict";function d(a,b){for(var c=0,d=a.length,e=0;e<d;++e)c+=a[e]*b[e];return c}function e(a){var b=a.length;if(0===b)return[];var c=(a[0].length,g([a.length+1,a.length+1],1)),e=g([a.length+1],1);c[b][b]=0;for(var f=0;f<b;++f){for(var i=0;i<=f;++i)c[i][f]=c[f][i]=2*d(a[f],a[i]);e[f]=d(a[f],a[f])}for(var j=h(c,e),k=0,l=j[b+1],f=0;f<l.length;++f)k+=l[f];for(var m=new Array(b),f=0;f<b;++f){for(var l=j[f],n=0,i=0;i<l.length;++i)n+=l[i];m[f]=n/k}return m}function f(a){if(0===a.length)return[];for(var b=a[0].length,c=g([b]),d=e(a),f=0;f<a.length;++f)for(var h=0;h<b;++h)c[h]+=a[f][h]*d[f];return c}var g=a("dup"),h=a("robust-linear-solve");f.barycenetric=e,b.exports=f},{dup:33,"robust-linear-solve":34}],33:[function(a,b,c){"use strict";function d(a,b,c){var e=0|a[c];if(e<=0)return[];var f,g=new Array(e);if(c===a.length-1)for(f=0;f<e;++f)g[f]=b;else for(f=0;f<e;++f)g[f]=d(a,b,c+1);return g}function e(a,b){var c,d;for(c=new Array(a),d=0;d<a;++d)c[d]=b;return c}function f(a,b){switch("undefined"==typeof b&&(b=0),typeof a){case"number":if(a>0)return e(0|a,b);break;case"object":if("number"==typeof a.length)return d(a,b,0)}return[]}b.exports=f},{}],34:[function(a,b,c){"use strict";function d(a){for(var b="robustLinearSolve"+a+"d",c=["function ",b,"(A,b){return ["],d=0;d<a;++d){c.push("det([");for(var e=0;e<a;++e){e>0&&c.push(","),c.push("[");for(var f=0;f<a;++f)f>0&&c.push(","),f===d?c.push("+b[",e,"]"):c.push("+A[",e,"][",f,"]");c.push("]")}c.push("]),")}c.push("det(A)]}return ",b);var g=new Function("det",c.join(""));return g(a<6?h[a]:h)}function e(){return[0]}function f(a,b){return[[b[0]],[a[0][0]]]}function g(){for(;j.length<i;)j.push(d(j.length));for(var a=[],c=["function dispatchLinearSolve(A,b){switch(A.length){"],e=0;e<i;++e)a.push("s"+e),c.push("case ",e,":return s",e,"(A,b);");c.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),a.push("CACHE","g",c.join(""));var f=Function.apply(void 0,a);b.exports=f.apply(void 0,j.concat([j,d]));for(var e=0;e<i;++e)b.exports[e]=j[e]}var h=a("robust-determinant"),i=6,j=[e,f];g()},{"robust-determinant":40}],35:[function(a,b,c){"use strict";function d(a){for(var b=a.length,c=a[a.length-1],d=b,e=b-2;e>=0;--e){var f=c,g=a[e];c=f+g;var h=c-f,i=g-h;i&&(a[--d]=c,c=i)}for(var j=0,e=d;e<b;++e){var f=a[e],g=c;c=f+g;var h=c-f,i=g-h;i&&(a[j++]=i)}return a[j++]=c,a.length=j,a}b.exports=d},{}],36:[function(a,b,c){"use strict";function d(a,b,c){var d=a+b,e=d-a,f=d-e,g=b-e,h=a-f;return c?(c[0]=h+g,c[1]=d,c):[h+g,d]}b.exports=d},{}],37:[function(a,b,c){"use strict";function d(a,b){var c=a.length;if(1===c){var d=e(a[0],b);return d[0]?d:[d[1]]}var g=new Array(2*c),h=[.1,.1],i=[.1,.1],j=0;e(a[0],b,h),h[0]&&(g[j++]=h[0]);for(var k=1;k<c;++k){e(a[k],b,i);var l=h[1];f(l,i[0],h),h[0]&&(g[j++]=h[0]);var m=i[1],n=h[1],o=m+n,p=o-m,q=n-p;h[1]=o,q&&(g[j++]=q)}return h[1]&&(g[j++]=h[1]),0===j&&(g[j++]=0),g.length=j,g}var e=a("two-product"),f=a("two-sum");b.exports=d},{"two-product":39,"two-sum":36}],38:[function(a,b,c){"use strict";function d(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;return h?[h,c]:[c]}function e(a,b){var c=0|a.length,e=0|b.length;if(1===c&&1===e)return d(a[0],b[0]);var f,g,h=c+e,i=new Array(h),j=0,k=0,l=0,m=Math.abs,n=a[k],o=m(n),p=b[l],q=m(p);o<q?(g=n,k+=1,k<c&&(n=a[k],o=m(n))):(g=p,l+=1,l<e&&(p=b[l],q=m(p))),k<c&&o<q||l>=e?(f=n,k+=1,k<c&&(n=a[k],o=m(n))):(f=p,l+=1,l<e&&(p=b[l],q=m(p)));for(var r,s,t,u,v,w=f+g,x=w-f,y=g-x,z=y,A=w;k<c&&l<e;)o<q?(f=n,k+=1,k<c&&(n=a[k],o=m(n))):(f=p,l+=1,l<e&&(p=b[l],q=m(p))),g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r;for(;k<c;)f=n,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,k+=1,k<c&&(n=a[k]);for(;l<e;)f=p,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,l+=1,l<e&&(p=b[l]);return z&&(i[j++]=z),A&&(i[j++]=A),j||(i[j++]=0),i.length=j,i}b.exports=e},{}],39:[function(a,b,c){"use strict";function d(a,b,c){var d=a*b,f=e*a,g=f-a,h=f-g,i=a-h,j=e*b,k=j-b,l=j-k,m=b-l,n=d-h*l,o=n-i*l,p=o-h*m,q=i*m-p;return c?(c[0]=q,c[1]=d,c):[q,d]}b.exports=d;var e=+(Math.pow(2,27)+1)},{}],40:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;c<a;++c){b[c]=new Array(a);for(var d=0;d<a;++d)b[c][d]=["m[",c,"][",d,"]"].join("")}return b}function f(a){return 1&a?"-":""}function g(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",g(a.slice(0,b)),",",g(a.slice(b)),")"].join("")}function h(a){if(2===a.length)return["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("");for(var b=[],c=0;c<a.length;++c)b.push(["scale(",h(d(a,c)),",",f(c),a[0][c],")"].join(""));return g(b)}function i(a){var b=new Function("sum","scale","prod","compress",["function robustDeterminant",a,"(m){return compress(",h(e(a)),")};return robustDeterminant",a].join(""));return b(l,m,k,n)}function j(){for(;p.length<o;)p.push(i(p.length));for(var a=[],c=["function robustDeterminant(m){switch(m.length){"],d=0;d<o;++d)a.push("det"+d),c.push("case ",d,":return det",d,"(m);");c.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),a.push("CACHE","gen",c.join(""));var e=Function.apply(void 0,a);b.exports=e.apply(void 0,p.concat([p,i]));for(var d=0;d<p.length;++d)b.exports[d]=p[d]}var k=a("two-product"),l=a("robust-sum"),m=a("robust-scale"),n=a("robust-compress"),o=6,p=[function(){return[0]},function(a){return[a[0][0]]}];j()},{"robust-compress":35,"robust-scale":37,"robust-sum":38,"two-product":39}],41:[function(a,b,c){"use strict";function d(a){return f(e(a))}b.exports=d;var e=a("boundary-cells"),f=a("reduce-simplicial-complex")},{"boundary-cells":42,"reduce-simplicial-complex":46}],42:[function(a,b,c){"use strict";function d(a){for(var b=a.length,c=0,d=0;d<b;++d)c+=a[d].length;for(var e=new Array(c),f=0,d=0;d<b;++d)for(var g=a[d],h=g.length,i=0;i<h;++i)for(var j=e[f++]=new Array(h-1),k=1;k<h;++k)j[k-1]=g[(i+k)%h];return e}b.exports=d},{}],43:[function(a,b,c){"use strict";function d(a){for(var b=1,c=1;c<a.length;++c)for(var d=0;d<c;++d)if(a[c]<a[d])b=-b;else if(a[d]===a[c])return 0;return b}b.exports=d},{}],44:[function(a,b,c){function d(a,b){return a-b}function e(a,b){var c=a.length,e=a.length-b.length;if(e)return e;switch(c){case 0:return 0;case 1:return a[0]-b[0];case 2:return a[0]+a[1]-b[0]-b[1]||f(a[0],a[1])-f(b[0],b[1]);case 3:var g=a[0]+a[1],h=b[0]+b[1];if(e=g+a[2]-(h+b[2]))return e;var i=f(a[0],a[1]),j=f(b[0],b[1]);return f(i,a[2])-f(j,b[2])||f(i+a[2],g)-f(j+b[2],h);case 4:var k=a[0],l=a[1],m=a[2],n=a[3],o=b[0],p=b[1],q=b[2],r=b[3];return k+l+m+n-(o+p+q+r)||f(k,l,m,n)-f(o,p,q,r,o)||f(k+l,k+m,k+n,l+m,l+n,m+n)-f(o+p,o+q,o+r,p+q,p+r,q+r)||f(k+l+m,k+l+n,k+m+n,l+m+n)-f(o+p+q,o+p+r,o+q+r,p+q+r);default:for(var s=a.slice().sort(d),t=b.slice().sort(d),u=0;u<c;++u)if(e=s[u]-t[u])return e;return 0}}b.exports=e;var f=Math.min},{}],45:[function(a,b,c){"use strict";function d(a,b){return e(a,b)||f(a)-f(b)}var e=a("compare-cell"),f=a("cell-orientation");b.exports=d},{"cell-orientation":43,"compare-cell":44}],46:[function(a,b,c){"use strict";function d(a){a.sort(f);for(var b=a.length,c=0,d=0;d<b;++d){var h=a[d],i=g(h);if(0!==i){if(c>0){var j=a[c-1];if(0===e(h,j)&&g(j)!==i){c-=1;continue}}a[c++]=h}}return a.length=c,a}var e=a("compare-cell"),f=a("compare-oriented-cell"),g=a("cell-orientation");b.exports=d},{"cell-orientation":43,"compare-cell":44,"compare-oriented-cell":45}],47:[function(a,b,c){"use strict";var d=function(){function a(a){return!Array.isArray(a)&&null!==a&&"object"==typeof a}function b(a,b,c){for(var d=(b-a)/(c-1),e=[],f=0;f<c;f++)e.push(a+f*d);return e}function c(){for(var a=[].slice.call(arguments),b=a.map(function(a){return a.length}),c=Math.min.apply(null,b),d=[],e=0;e<c;e++){d[e]=[];for(var f=0;f<a.length;++f)d[e][f]=a[f][e]}return d}function d(a,b,c){for(var d=Math.min.apply(null,[a.length,b.length,c.length]),e=[],f=0;f<d;f++)e.push([a[f],b[f],c[f]]);return e}function e(a){function b(a){for(var d=0;d<a.length;d++)Array.isArray(a[d])?b(a[d],c):c+=a[d]}var c=0;return b(a,c),c}function f(a){for(var b=[],c=0;c<a.length;++c){b[c]=[];for(var d=0;d<a[c].length;++d)b[c][d]=a[c][d]}return b}function g(a){for(var b=[],c=0;c<a.length;++c)b[c]=a[c];return b}function h(a,b){if(a.length!==b.length)return!1;for(var c=a.length;c--;)if(a[c]!==b[c])return!1;return!0}function i(a,b){var c,d;if("string"!=typeof a)return a;if(c=[],"#"===a[0]?(a=a.substr(1),3===a.length&&(a+=a),d=parseInt(a,16),c[0]=d>>16&255,c[1]=d>>8&255,c[2]=255&d):l.test(a)&&(d=a.match(m),c[0]=parseInt(d[1]),c[1]=parseInt(d[2]),c[2]=parseInt(d[3])),!b)for(var e=0;e<3;++e)c[e]=c[e]/255;return c}function j(a,b){var c,d;if("string"!=typeof a)return a;if(c=[],"#"===a[0]?(a=a.substr(1),3===a.length&&(a+=a),d=parseInt(a,16),c[0]=d>>16&255,c[1]=d>>8&255,c[2]=255&d):l.test(a)&&(d=a.match(m),c[0]=parseInt(d[1]),c[1]=parseInt(d[2]),c[2]=parseInt(d[3]),d[4]?c[3]=parseFloat(d[4]):c[3]=1),!b)for(var e=0;e<3;++e)c[e]=c[e]/255;return c}var k={},l=/^rgba?\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*(,.*)?\)$/,m=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?\s*(.*)?\)$/;return k.isPlainObject=a,k.linspace=b,k.zip3=d,k.sum=e,k.zip=c,k.isEqual=h,k.copy2D=f,k.copy1D=g,k.str2RgbArray=i,k.str2RgbaArray=j,k};b.exports=d()},{}],48:[function(a,b,c){(function(b){"use strict";function d(){function a(){}try{var b=new Uint8Array(1);return b.foo=function(){return 42},b.constructor=a,42===b.foo()&&b.constructor===a&&"function"==typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(c){return!1}}function e(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(a){return this instanceof f?(f.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof a?g(this,a):"string"==typeof a?h(this,a,arguments.length>1?arguments[1]:"utf8"):i(this,a)):arguments.length>1?new f(a,arguments[1]):new f(a)}function g(a,b){if(a=p(a,b<0?0:0|q(b)),!f.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;c++)a[c]=0;return a}function h(a,b,c){"string"==typeof c&&""!==c||(c="utf8");var d=0|s(b,c);return a=p(a,d),a.write(b,c),a}function i(a,b){if(f.isBuffer(b))return j(a,b);if(Y(b))return k(a,b);if(null==b)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(b.buffer instanceof ArrayBuffer)return l(a,b);if(b instanceof ArrayBuffer)return m(a,b)}return b.length?n(a,b):o(a,b)}function j(a,b){var c=0|q(b.length);return a=p(a,c),b.copy(a,0,0,c),a}function k(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function l(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function m(a,b){return f.TYPED_ARRAY_SUPPORT?(b.byteLength,a=f._augment(new Uint8Array(b))):a=l(a,new Uint8Array(b)),a}function n(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function o(a,b){var c,d=0;"Buffer"===b.type&&Y(b.data)&&(c=b.data,d=0|q(c.length)),a=p(a,d);for(var e=0;e<d;e+=1)a[e]=255&c[e];return a}function p(a,b){f.TYPED_ARRAY_SUPPORT?(a=f._augment(new Uint8Array(b)),a.__proto__=f.prototype):(a.length=b,a._isBuffer=!0);var c=0!==b&&b<=f.poolSize>>>1;return c&&(a.parent=Z),a}function q(a){if(a>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|a}function r(a,b){if(!(this instanceof r))return new r(a,b);var c=new f(a,b);return delete c.parent,c}function s(a,b){"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return R(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return U(a).length;default:if(d)return R(a).length;b=(""+b).toLowerCase(),d=!0}}function t(a,b,c){var d=!1;if(b=0|b,c=void 0===c||c===1/0?this.length:0|c,a||(a="utf8"),b<0&&(b=0),c>this.length&&(c=this.length),c<=b)return"";for(;;)switch(a){case"hex":return F(this,b,c);case"utf8":case"utf-8":return B(this,b,c);case"ascii":return D(this,b,c);case"binary":return E(this,b,c);case"base64":return A(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function u(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function v(a,b,c,d){return V(R(b,a.length-c),a,c,d)}function w(a,b,c,d){return V(S(b),a,c,d)}function x(a,b,c,d){return w(a,b,c,d)}function y(a,b,c,d){return V(U(b),a,c,d)}function z(a,b,c,d){return V(T(b,a.length-c),a,c,d)}function A(a,b,c){return 0===b&&c===a.length?W.fromByteArray(a):W.fromByteArray(a.slice(b,c))}function B(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(l<55296||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&l<1114112&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return C(d)}function C(a){var b=a.length;if(b<=$)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=$));return c}function D(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;e++)d+=String.fromCharCode(127&a[e]);return d}function E(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;e++)d+=String.fromCharCode(a[e]);return d}function F(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;f++)e+=Q(a[f]);return e}function G(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function H(a,b,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function I(a,b,c,d,e,g){if(!f.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>e||b<g)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range")}function J(a,b,c,d){b<0&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function K(a,b,c,d){b<0&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function L(a,b,c,d,e,f){if(b>e||b<f)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(c<0)throw new RangeError("index out of range")}function M(a,b,c,d,e){return e||L(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(a,b,c,d,23,4),c+4}function N(a,b,c,d,e){return e||L(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(a,b,c,d,52,8),c+8}function O(a){if(a=P(a).replace(aa,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function P(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function Q(a){return a<16?"0"+a.toString(16):a.toString(16)}function R(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;g++){if(c=a.charCodeAt(g),c>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function S(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function T(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function U(a){return W.toByteArray(O(a))}function V(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}var W=a("base64-js"),X=a("ieee754"),Y=a("isarray");c.Buffer=f,c.SlowBuffer=r,c.INSPECT_MAX_BYTES=50,f.poolSize=8192;var Z={};f.TYPED_ARRAY_SUPPORT=void 0!==b.TYPED_ARRAY_SUPPORT?b.TYPED_ARRAY_SUPPORT:d(),f.TYPED_ARRAY_SUPPORT?(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array):(f.prototype.length=void 0,f.prototype.parent=void 0),f.isBuffer=function(a){return!(null==a||!a._isBuffer)},f.compare=function(a,b){if(!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);e<g&&a[e]===b[e];)++e;return e!==g&&(c=a[e],d=b[e]),c<d?-1:d<c?1:0},f.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(a,b){if(!Y(a))throw new TypeError("list argument must be an Array of Buffers.");if(0===a.length)return new f(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var d=new f(b),e=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(d,e),e+=g.length}return d},f.byteLength=s,f.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?B(this,0,a):t.apply(this,arguments)},f.prototype.equals=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===f.compare(this,a)},f.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},f.prototype.compare=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?0:f.compare(this,a)},f.prototype.indexOf=function(a,b){function c(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[d===-1?0:e-d]){if(d===-1&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b>>=0,0===this.length)return-1;if(b>=this.length)return-1;if(b<0&&(b=Math.max(this.length+b,0)),"string"==typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,b);if(f.isBuffer(a))return c(this,a,b);if("number"==typeof a)return f.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,b):c(this,[a],b);throw new TypeError("val must be string, number or Buffer")},f.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},f.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},f.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0);else{var e=d;d=b,b=0|c,c=e}var f=this.length-b;if((void 0===c||c>f)&&(c=f),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(var g=!1;;)switch(d){case"hex":return u(this,a,b,c);case"utf8":case"utf-8":return v(this,a,b,c);case"ascii":return w(this,a,b,c);case"binary":return x(this,a,b,c);case"base64":return y(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,a,b,c);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;f.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),b<0?(b+=c,b<0&&(b=0)):b>c&&(b=c),b<a&&(b=a);var d;if(f.TYPED_ARRAY_SUPPORT)d=f._augment(this.subarray(a,b));else{var e=b-a;d=new f(e,(void 0));for(var g=0;g<e;g++)d[g]=this[g+a]}return d.length&&(d.parent=this.parent||this),d},f.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},f.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},f.prototype.readUInt8=function(a,b){return b||H(a,1,this.length),this[a]},f.prototype.readUInt16LE=function(a,b){return b||H(a,2,this.length),this[a]|this[a+1]<<8},f.prototype.readUInt16BE=function(a,b){return b||H(a,2,this.length),this[a]<<8|this[a+1]},f.prototype.readUInt32LE=function(a,b){return b||H(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},f.prototype.readUInt32BE=function(a,b){return b||H(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},f.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},f.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},f.prototype.readInt8=function(a,b){return b||H(a,1,this.length),128&this[a]?(255-this[a]+1)*-1:this[a]},f.prototype.readInt16LE=function(a,b){b||H(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt16BE=function(a,b){b||H(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt32LE=function(a,b){return b||H(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},f.prototype.readInt32BE=function(a,b){return b||H(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},f.prototype.readFloatLE=function(a,b){return b||H(a,4,this.length),X.read(this,a,!0,23,4)},f.prototype.readFloatBE=function(a,b){return b||H(a,4,this.length),X.read(this,a,!1,23,4)},f.prototype.readDoubleLE=function(a,b){return b||H(a,8,this.length),X.read(this,a,!0,52,8)},f.prototype.readDoubleBE=function(a,b){return b||H(a,8,this.length),X.read(this,a,!1,52,8)},f.prototype.writeUIntLE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||I(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},f.prototype.writeUIntBE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||I(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},f.prototype.writeUInt8=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,1,255,0),f.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},f.prototype.writeUInt16LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):J(this,a,b,!0),b+2},f.prototype.writeUInt16BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):J(this,a,b,!1),b+2},f.prototype.writeUInt32LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):K(this,a,b,!0),b+4},f.prototype.writeUInt32BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):K(this,a,b,!1),b+4},f.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=0,g=1,h=a<0?1:0;for(this[b]=255&a;++f<c&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=a<0?1:0;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeInt8=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,1,127,-128),f.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),a<0&&(a=255+a+1),this[b]=255&a,b+1},f.prototype.writeInt16LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):J(this,a,b,!0),b+2},f.prototype.writeInt16BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):J(this,a,b,!1),b+2},f.prototype.writeInt32LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):K(this,a,b,!0),b+4},f.prototype.writeInt32BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):K(this,a,b,!1),b+4},f.prototype.writeFloatLE=function(a,b,c){return M(this,a,b,!0,c)},f.prototype.writeFloatBE=function(a,b,c){return M(this,a,b,!1,c)},f.prototype.writeDoubleLE=function(a,b,c){return N(this,a,b,!0,c)},f.prototype.writeDoubleBE=function(a,b,c){return N(this,a,b,!1,c)},f.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,g=d-c;if(this===a&&c<b&&b<d)for(e=g-1;e>=0;e--)a[e+b]=this[e+c];else if(g<1e3||!f.TYPED_ARRAY_SUPPORT)for(e=0;e<g;e++)a[e+b]=this[e+c];else a._set(this.subarray(c,c+g),b);return g},f.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),c<b)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(b<0||b>=this.length)throw new RangeError("start out of bounds");if(c<0||c>this.length)throw new RangeError("end out of bounds");var d;if("number"==typeof a)for(d=b;d<c;d++)this[d]=a;else{var e=R(a.toString()),f=e.length;for(d=b;d<c;d++)this[d]=e[d%f]}return this;
}},f.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(f.TYPED_ARRAY_SUPPORT)return new f(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;b<c;b+=1)a[b]=this[b];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var _=f.prototype;f._augment=function(a){return a.constructor=f,a._isBuffer=!0,a._set=a.set,a.get=_.get,a.set=_.set,a.write=_.write,a.toString=_.toString,a.toLocaleString=_.toString,a.toJSON=_.toJSON,a.equals=_.equals,a.compare=_.compare,a.indexOf=_.indexOf,a.copy=_.copy,a.slice=_.slice,a.readUIntLE=_.readUIntLE,a.readUIntBE=_.readUIntBE,a.readUInt8=_.readUInt8,a.readUInt16LE=_.readUInt16LE,a.readUInt16BE=_.readUInt16BE,a.readUInt32LE=_.readUInt32LE,a.readUInt32BE=_.readUInt32BE,a.readIntLE=_.readIntLE,a.readIntBE=_.readIntBE,a.readInt8=_.readInt8,a.readInt16LE=_.readInt16LE,a.readInt16BE=_.readInt16BE,a.readInt32LE=_.readInt32LE,a.readInt32BE=_.readInt32BE,a.readFloatLE=_.readFloatLE,a.readFloatBE=_.readFloatBE,a.readDoubleLE=_.readDoubleLE,a.readDoubleBE=_.readDoubleBE,a.writeUInt8=_.writeUInt8,a.writeUIntLE=_.writeUIntLE,a.writeUIntBE=_.writeUIntBE,a.writeUInt16LE=_.writeUInt16LE,a.writeUInt16BE=_.writeUInt16BE,a.writeUInt32LE=_.writeUInt32LE,a.writeUInt32BE=_.writeUInt32BE,a.writeIntLE=_.writeIntLE,a.writeIntBE=_.writeIntBE,a.writeInt8=_.writeInt8,a.writeInt16LE=_.writeInt16LE,a.writeInt16BE=_.writeInt16BE,a.writeInt32LE=_.writeInt32LE,a.writeInt32BE=_.writeInt32BE,a.writeFloatLE=_.writeFloatLE,a.writeFloatBE=_.writeFloatBE,a.writeDoubleLE=_.writeDoubleLE,a.writeDoubleBE=_.writeDoubleBE,a.fill=_.fill,a.inspect=_.inspect,a.toArrayBuffer=_.toArrayBuffer,a};var aa=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":49,ieee754:50,isarray:51}],49:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g||b===l?62:b===h||b===m?63:b<i?-1:b<i+10?b-i+26+26:b<k+26?b-k:b<j+26?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;d<g;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;e<g;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0),l="-".charCodeAt(0),m="_".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],50:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],51:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],52:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],53:[function(a,b,c){function d(){k=!1,h.length?j=h.concat(j):l=-1,j.length&&e()}function e(){if(!k){var a=setTimeout(d);k=!0;for(var b=j.length;b;){for(h=j,j=[];++l<b;)h&&h[l].run();l=-1,b=j.length}h=null,k=!1,clearTimeout(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i=b.exports={},j=[],k=!1,l=-1;i.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];j.push(new f(a,b)),1!==j.length||k||setTimeout(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(a){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(a){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],54:[function(a,b,c){"use strict";function d(a){var b=a.length;if(0===b)return[];if(1===b)return[[0]];var c=a[0].length;return 0===c?[]:1===c?e(a):2===c?f(a):g(a,c)}var e=a("./lib/ch1d"),f=a("./lib/ch2d"),g=a("./lib/chnd");b.exports=d},{"./lib/ch1d":55,"./lib/ch2d":56,"./lib/chnd":57}],55:[function(a,b,c){"use strict";function d(a){for(var b=0,c=0,d=1;d<a.length;++d)a[d][0]<a[b][0]&&(b=d),a[d][0]>a[c][0]&&(c=d);return b<c?[[b],[c]]:b>c?[[c],[b]]:[[b]]}b.exports=d},{}],56:[function(a,b,c){"use strict";function d(a){var b=e(a),c=b.length;if(c<=2)return[];for(var d=new Array(c),f=b[c-1],g=0;g<c;++g){var h=b[g];d[g]=[f,h],f=h}return d}b.exports=d;var e=a("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":63}],57:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length,d=new Array(c),e=0;e<b.length;++e)d[e]=a[b[e]];for(var f=b.length,e=0;e<c;++e)b.indexOf(e)<0&&(d[f++]=a[e]);return d}function e(a,b){for(var c=a.length,d=b.length,e=0;e<c;++e)for(var f=a[e],g=0;g<f.length;++g){var h=f[g];if(h<d)f[g]=b[h];else{h-=d;for(var i=0;i<d;++i)h>=b[i]&&(h+=1);f[g]=h}}return a}function f(a,b){try{return g(a,!0)}catch(c){var f=h(a);if(f.length<=b)return[];var i=d(a,f),j=g(i,!0);return e(j,f)}}b.exports=f;var g=a("incremental-convex-hull"),h=a("affine-hull")},{"affine-hull":58,"incremental-convex-hull":59}],58:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(b+1),d=0;d<a.length;++d)c[d]=a[d];for(var d=0;d<=a.length;++d){for(var e=a.length;e<=b;++e){for(var g=new Array(b),h=0;h<b;++h)g[h]=Math.pow(e+1-d,h);c[e]=g}var i=f.apply(void 0,c);if(i)return!0}return!1}function e(a){var b=a.length;if(0===b)return[];if(1===b)return[0];for(var c=a[0].length,e=[a[0]],f=[0],g=1;g<b;++g)if(e.push(a[g]),d(e,c)){if(f.push(g),f.length===c+1)return f}else e.pop();return f}b.exports=e;var f=a("robust-orientation")},{"robust-orientation":996}],59:[function(a,b,c){"use strict";function d(a,b,c){this.vertices=a,this.adjacent=b,this.boundary=c,this.lastVisited=-1}function e(a,b,c){this.vertices=a,this.cell=b,this.index=c}function f(a,b){return k(a.vertices,b.vertices)}function g(a){for(var b=["function orient(){var tuple=this.tuple;return test("],c=0;c<=a;++c)c>0&&b.push(","),b.push("tuple[",c,"]");b.push(")}return orient");var d=new Function("test",b.join("")),e=j[a+1];return e||(e=j),d(e)}function h(a,b,c){this.dimension=a,this.vertices=b,this.simplices=c,this.interior=c.filter(function(a){return!a.boundary}),this.tuple=new Array(a+1);for(var d=0;d<=a;++d)this.tuple[d]=this.vertices[d];var e=l[a];e||(e=l[a]=g(a)),this.orient=e}function i(a,b){var c=a.length;if(0===c)throw new Error("Must have at least d+1 points");var e=a[0].length;if(c<=e)throw new Error("Must input at least d+1 points");var f=a.slice(0,e+1),g=j.apply(void 0,f);if(0===g)throw new Error("Input not in general position");for(var i=new Array(e+1),k=0;k<=e;++k)i[k]=k;g<0&&(i[0]=1,i[1]=0);for(var l=new d(i,new Array(e+1),(!1)),m=l.adjacent,n=new Array(e+2),k=0;k<=e;++k){for(var o=i.slice(),p=0;p<=e;++p)p===k&&(o[p]=-1);var q=o[0];o[0]=o[1],o[1]=q;var r=new d(o,new Array(e+1),(!0));m[k]=r,n[k]=r}n[e+1]=l;for(var k=0;k<=e;++k)for(var o=m[k].vertices,s=m[k].adjacent,p=0;p<=e;++p){var t=o[p];if(t<0)s[p]=l;else for(var u=0;u<=e;++u)m[u].vertices.indexOf(t)<0&&(s[p]=m[u])}for(var v=new h(e,f,n),w=!!b,k=e+1;k<c;++k)v.insert(a[k],w);return v.boundary()}b.exports=i;var j=a("robust-orientation"),k=a("simplicial-complex").compareCells;d.prototype.flip=function(){var a=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=a;var b=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=b};var l=[],m=h.prototype;m.handleBoundaryDegeneracy=function(a,b){var c=this.dimension,d=this.vertices.length-1,e=this.tuple,f=this.vertices,g=[a];for(a.lastVisited=-d;g.length>0;){a=g.pop();for(var h=(a.vertices,a.adjacent),i=0;i<=c;++i){var j=h[i];if(j.boundary&&!(j.lastVisited<=-d)){for(var k=j.vertices,l=0;l<=c;++l){var m=k[l];m<0?e[l]=b:e[l]=f[m]}var n=this.orient();if(n>0)return j;j.lastVisited=-d,0===n&&g.push(j)}}}return null},m.walk=function(a,b){var c=this.vertices.length-1,d=this.dimension,e=this.vertices,f=this.tuple,g=b?this.interior.length*Math.random()|0:this.interior.length-1,h=this.interior[g];a:for(;!h.boundary;){for(var i=h.vertices,j=h.adjacent,k=0;k<=d;++k)f[k]=e[i[k]];h.lastVisited=c;for(var k=0;k<=d;++k){var l=j[k];if(!(l.lastVisited>=c)){var m=f[k];f[k]=a;var n=this.orient();if(f[k]=m,n<0){h=l;continue a}l.boundary?l.lastVisited=-c:l.lastVisited=c}}return}return h},m.addPeaks=function(a,b){var c=this.vertices.length-1,g=this.dimension,h=this.vertices,i=this.tuple,j=this.interior,k=this.simplices,l=[b];b.lastVisited=c,b.vertices[b.vertices.indexOf(-1)]=c,b.boundary=!1,j.push(b);for(var m=[];l.length>0;){var b=l.pop(),n=b.vertices,o=b.adjacent,p=n.indexOf(c);if(!(p<0))for(var q=0;q<=g;++q)if(q!==p){var r=o[q];if(r.boundary&&!(r.lastVisited>=c)){var s=r.vertices;if(r.lastVisited!==-c){for(var t=0,u=0;u<=g;++u)s[u]<0?(t=u,i[u]=a):i[u]=h[s[u]];var v=this.orient();if(v>0){s[t]=c,r.boundary=!1,j.push(r),l.push(r),r.lastVisited=c;continue}r.lastVisited=-c}var w=r.adjacent,x=n.slice(),y=o.slice(),z=new d(x,y,(!0));k.push(z);var A=w.indexOf(b);if(!(A<0)){w[A]=z,y[p]=r,x[q]=-1,y[q]=b,o[q]=z,z.flip();for(var u=0;u<=g;++u){var B=x[u];if(!(B<0||B===c)){for(var C=new Array(g-1),D=0,E=0;E<=g;++E){var F=x[E];F<0||E===u||(C[D++]=F)}m.push(new e(C,z,u))}}}}}}m.sort(f);for(var q=0;q+1<m.length;q+=2){var G=m[q],H=m[q+1],I=G.index,J=H.index;I<0||J<0||(G.cell.adjacent[G.index]=H.cell,H.cell.adjacent[H.index]=G.cell)}},m.insert=function(a,b){var c=this.vertices;c.push(a);var d=this.walk(a,b);if(d){for(var e=this.dimension,f=this.tuple,g=0;g<=e;++g){var h=d.vertices[g];h<0?f[g]=a:f[g]=c[h]}var i=this.orient(f);i<0||(0!==i||(d=this.handleBoundaryDegeneracy(d,a)))&&this.addPeaks(a,d)}},m.boundary=function(){for(var a=this.dimension,b=[],c=this.simplices,d=c.length,e=0;e<d;++e){var f=c[e];if(f.boundary){for(var g=new Array(a),h=f.vertices,i=0,j=0,k=0;k<=a;++k)h[k]>=0?g[i++]=h[k]:j=1&k;if(j===(1&a)){var l=g[0];g[0]=g[1],g[1]=l}b.push(g)}}return b}},{"robust-orientation":996,"simplicial-complex":62}],60:[function(a,b,c){"use strict";"use restrict";function d(a){var b=32;return a&=-a,a&&b--,65535&a&&(b-=16),16711935&a&&(b-=8),252645135&a&&(b-=4),858993459&a&&(b-=2),1431655765&a&&(b-=1),b}var e=32;c.INT_BITS=e,c.INT_MAX=2147483647,c.INT_MIN=-1<<e-1,c.sign=function(a){return(a>0)-(a<0)},c.abs=function(a){var b=a>>e-1;return(a^b)-b},c.min=function(a,b){return b^(a^b)&-(a<b)},c.max=function(a,b){return a^(a^b)&-(a<b)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,b|=c,b|a>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return a-=a>>>1&1431655765,a=(858993459&a)+(a>>>2&858993459),16843009*(a+(a>>>4)&252645135)>>>24},c.countTrailingZeros=d,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,a&=15,27030>>>a&1};var f=new Array(256);!function(a){for(var b=0;b<256;++b){var c=b,d=b,e=7;for(c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--e;a[b]=d<<e&255}}(f),c.reverse=function(a){return f[255&a]<<24|f[a>>>8&255]<<16|f[a>>>16&255]<<8|f[a>>>24&255]},c.interleave2=function(a,b){return a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1},c.deinterleave2=function(a,b){return a=a>>>b&1431655765,a=858993459&(a|a>>>1),a=252645135&(a|a>>>2),a=16711935&(a|a>>>4),a=65535&(a|a>>>16),a<<16>>16},c.interleave3=function(a,b,c){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),a|=b<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),a|c<<2},c.deinterleave3=function(a,b){return a=a>>>b&1227133513,a=3272356035&(a|a>>>2),a=251719695&(a|a>>>4),a=4278190335&(a|a>>>8),a=1023&(a|a>>>16),a<<22>>22},c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>d(a)+1}},{}],61:[function(a,b,c){"use strict";"use restrict";function d(a){this.roots=new Array(a),this.ranks=new Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}b.exports=d;var e=d.prototype;Object.defineProperty(e,"length",{get:function(){return this.roots.length}}),e.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},e.find=function(a){for(var b=a,c=this.roots;c[a]!==a;)a=c[a];for(;c[b]!==a;){var d=c[b];c[b]=a,b=d}return a},e.link=function(a,b){var c=this.find(a),d=this.find(b);if(c!==d){var e=this.ranks,f=this.roots,g=e[c],h=e[d];g<h?f[c]=d:h<g?f[d]=c:(f[d]=c,++e[c])}}},{}],62:[function(a,b,c){"use strict";"use restrict";function d(a){for(var b=0,c=Math.max,d=0,e=a.length;d<e;++d)b=c(b,a[d].length);return b-1}function e(a){for(var b=-1,c=Math.max,d=0,e=a.length;d<e;++d)for(var f=a[d],g=0,h=f.length;g<h;++g)b=c(b,f[g]);return b+1}function f(a){for(var b=new Array(a.length),c=0,d=a.length;c<d;++c)b[c]=a[c].slice(0);return b}function g(a,b){var c=a.length,d=a.length-b.length,e=Math.min;if(d)return d;switch(c){case 0:return 0;case 1:return a[0]-b[0];case 2:var f=a[0]+a[1]-b[0]-b[1];return f?f:e(a[0],a[1])-e(b[0],b[1]);case 3:var g=a[0]+a[1],h=b[0]+b[1];if(f=g+a[2]-(h+b[2]))return f;var i=e(a[0],a[1]),j=e(b[0],b[1]),f=e(i,a[2])-e(j,b[2]);return f?f:e(i+a[2],g)-e(j+b[2],h);default:var k=a.slice(0);k.sort();var l=b.slice(0);l.sort();for(var m=0;m<c;++m)if(d=k[m]-l[m])return d;return 0}}function h(a,b){return g(a[0],b[0])}function i(a,b){if(b){for(var c=a.length,d=new Array(c),e=0;e<c;++e)d[e]=[a[e],b[e]];d.sort(h);for(var e=0;e<c;++e)a[e]=d[e][0],b[e]=d[e][1];return a}return a.sort(g),a}function j(a){if(0===a.length)return[];for(var b=1,c=a.length,d=1;d<c;++d){var e=a[d];if(g(e,a[d-1])){if(d===b){b++;continue}a[b++]=e}}return a.length=b,a}function k(a,b){for(var c=0,d=a.length-1,e=-1;c<=d;){var f=c+d>>1,h=g(a[f],b);h<=0?(0===h&&(e=f),c=f+1):h>0&&(d=f-1)}return e}function l(a,b){for(var c=new Array(a.length),d=0,e=c.length;d<e;++d)c[d]=[];for(var f=[],d=0,h=b.length;d<h;++d)for(var i=b[d],j=i.length,l=1,m=1<<j;l<m;++l){f.length=t.popCount(l);for(var n=0,o=0;o<j;++o)l&1<<o&&(f[n++]=i[o]);var p=k(a,f);if(!(p<0))for(;;)if(c[p++].push(d),p>=a.length||0!==g(a[p],f))break}return c}function m(a,b){if(!b)return l(j(o(a,0)),a,0);for(var c=new Array(b),d=0;d<b;++d)c[d]=[];for(var d=0,e=a.length;d<e;++d)for(var f=a[d],g=0,h=f.length;g<h;++g)c[f[g]].push(d);return c}function n(a){for(var b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=0|e.length,g=1,h=1<<f;g<h;++g){for(var j=[],k=0;k<f;++k)g>>>k&1&&j.push(e[k]);b.push(j)}return i(b)}function o(a,b){if(b<0)return[];for(var c=[],d=(1<<b+1)-1,e=0;e<a.length;++e)for(var f=a[e],g=d;g<1<<f.length;g=t.nextCombination(g)){for(var h=new Array(b+1),j=0,k=0;k<f.length;++k)g&1<<k&&(h[j++]=f[k]);c.push(h)}return i(c)}function p(a){for(var b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=0,g=e.length;f<g;++f){for(var h=new Array(e.length-1),j=0,k=0;j<g;++j)j!==f&&(h[k++]=e[j]);b.push(h)}return i(b)}function q(a,b){for(var c=new u(b),d=0;d<a.length;++d)for(var e=a[d],f=0;f<e.length;++f)for(var g=f+1;g<e.length;++g)c.link(e[f],e[g]);for(var h=[],i=c.ranks,d=0;d<i.length;++d)i[d]=-1;for(var d=0;d<a.length;++d){var j=c.find(a[d][0]);i[j]<0?(i[j]=h.length,h.push([a[d].slice(0)])):h[i[j]].push(a[d].slice(0))}return h}function r(a){for(var b=j(i(o(a,0))),c=new u(b.length),d=0;d<a.length;++d)for(var e=a[d],f=0;f<e.length;++f)for(var g=k(b,[e[f]]),h=f+1;h<e.length;++h)c.link(g,k(b,[e[h]]));for(var l=[],m=c.ranks,d=0;d<m.length;++d)m[d]=-1;for(var d=0;d<a.length;++d){var n=c.find(k(b,[a[d][0]]));m[n]<0?(m[n]=l.length,l.push([a[d].slice(0)])):l[m[n]].push(a[d].slice(0))}return l}function s(a,b){return b?q(a,b):r(a)}var t=a("bit-twiddle"),u=a("union-find");c.dimension=d,c.countVertices=e,c.cloneCells=f,c.compareCells=g,c.normalize=i,c.unique=j,c.findCell=k,c.incidence=l,c.dual=m,c.explode=n,c.skeleton=o,c.boundary=p,c.connectedComponents=s},{"bit-twiddle":60,"union-find":61}],63:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b<3){for(var c=new Array(b),d=0;d<b;++d)c[d]=d;return 2===b&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:c}for(var f=new Array(b),d=0;d<b;++d)f[d]=d;f.sort(function(b,c){var d=a[b][0]-a[c][0];return d?d:a[b][1]-a[c][1]});for(var g=[f[0],f[1]],h=[f[0],f[1]],d=2;d<b;++d){for(var i=f[d],j=a[i],k=g.length;k>1&&e(a[g[k-2]],a[g[k-1]],j)<=0;)k-=1,g.pop();for(g.push(i),k=h.length;k>1&&e(a[h[k-2]],a[h[k-1]],j)>=0;)k-=1,h.pop();h.push(i)}for(var c=new Array(h.length+g.length-2),l=0,d=0,m=g.length;d<m;++d)c[l++]=g[d];for(var n=h.length-2;n>0;--n)c[l++]=h[n];return c}b.exports=d;var e=a("robust-orientation")[3]},{"robust-orientation":996}],64:[function(b,c,d){!function(){function b(a){return a&&(a.ownerDocument||a.document||a).documentElement}function d(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function e(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}function f(a){return null===a?NaN:+a}function g(a){return!isNaN(a)}function h(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);d<e;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function i(a){return a.length}function j(a){for(var b=1;a*b%1;)b*=10;return b}function k(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function l(){this._=Object.create(null)}function m(a){return(a+="")===qg||a[0]===rg?rg+a:a}function n(a){return(a+="")[0]===rg?a.slice(1):a}function o(a){return m(a)in this._}function p(a){return(a=m(a))in this._&&delete this._[a]}function q(){var a=[];for(var b in this._)a.push(n(b));return a}function r(){var a=0;for(var b in this._)++a;return a}function s(){for(var a in this._)return!1;return!0}function t(){this._=Object.create(null)}function u(a){return a}function v(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function w(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=sg.length;c<d;++c){var e=sg[c]+b;if(e in a)return e}}function x(){}function y(){}function z(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new l;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function A(){dg.event.preventDefault()}function B(){for(var a,b=dg.event;a=b.sourceEvent;)b=a;return b}function C(a){for(var b=new y,c=0,d=arguments.length;++c<d;)b[arguments[c]]=z(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=dg.event;e.target=a,dg.event=e,b[e.type].apply(c,d)}finally{dg.event=f}}},b}function D(a){return ug(a,yg),a}function E(a){return"function"==typeof a?a:function(){return vg(a,this)}}function F(a){return"function"==typeof a?a:function(){return wg(a,this)}}function G(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=dg.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function H(a){return a.trim().replace(/\s+/g," ")}function I(a){return new RegExp("(?:^|\\s+)"+dg.requote(a)+"(?:\\s+|$)","g")}function J(a){return(a+"").trim().split(/^|\s+/)}function K(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=J(a).map(L);var e=a.length;return"function"==typeof b?d:c}function L(a){var b=I(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",H(e+" "+a))):c.setAttribute("class",H(e.replace(b," ")))}}function M(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function N(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function O(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return c?b.createElementNS(c,a):b.createElement(a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"==typeof a?a:(a=dg.ns.qualify(a)).local?c:b}function P(){var a=this.parentNode;a&&a.removeChild(this)}function Q(a){return{__data__:a}}function R(a){return function(){return xg(this,a)}}function S(a){return arguments.length||(a=e),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function T(a,b){for(var c=0,d=a.length;c<d;c++)for(var e,f=a[c],g=0,h=f.length;g<h;g++)(e=f[g])&&b(e,g,c);return a}function U(a){return ug(a,Ag),a}function V(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function W(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,fg(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+dg.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=X;h>0&&(a=a.slice(0,h));var j=Bg.get(a);return j&&(a=j,i=Y),h?b?e:d:b?x:f}function X(a,b){return function(c){var d=dg.event;dg.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{dg.event=d}}}function Y(a,b){var c=X(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function Z(a){var c=".dragsuppress-"+ ++Dg,e="click"+c,f=dg.select(d(a)).on("touchmove"+c,A).on("dragstart"+c,A).on("selectstart"+c,A);if(null==Cg&&(Cg=!("onselectstart"in a)&&w(a.style,"userSelect")),Cg){var g=b(a).style,h=g[Cg];g[Cg]="none"}return function(a){if(f.on(c,null),Cg&&(g[Cg]=h),a){var b=function(){f.on(e,null)};f.on(e,function(){A(),b()},!0),setTimeout(b,0)}}}function $(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var e=c.createSVGPoint();if(Eg<0){var f=d(a);if(f.scrollX||f.scrollY){c=dg.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=c[0][0].getScreenCTM();Eg=!(g.f||g.e),c.remove()}}return Eg?(e.x=b.pageX,e.y=b.pageY):(e.x=b.clientX,e.y=b.clientY),e=e.matrixTransform(a.getScreenCTM().inverse()),[e.x,e.y]}var h=a.getBoundingClientRect();return[b.clientX-h.left-a.clientLeft,b.clientY-h.top-a.clientTop]}function _(){return dg.event.changedTouches[0].identifier}function aa(a){return a>0?1:a<0?-1:0}function ba(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ca(a){return a>1?0:a<-1?Hg:Math.acos(a)}function da(a){return a>1?Kg:a<-1?-Kg:Math.asin(a)}function ea(a){return((a=Math.exp(a))-1/a)/2}function fa(a){return((a=Math.exp(a))+1/a)/2}function ga(a){return((a=Math.exp(2*a))-1)/(a+1)}function ha(a){return(a=Math.sin(a/2))*a}function ia(){}function ja(a,b,c){return this instanceof ja?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ja?new ja(a.h,a.s,a.l):xa(""+a,ya,ja):new ja(a,b,c)}function ka(a,b,c){function d(a){return a>360?a-=360:a<0&&(a+=360),a<60?f+(g-f)*a/60:a<180?g:a<240?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:b<0?0:b>1?1:b,c=c<0?0:c>1?1:c,g=c<=.5?c*(1+b):c+b-c*b,f=2*c-g,new ta(e(a+120),e(a),e(a-120))}function la(a,b,c){return this instanceof la?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof la?new la(a.h,a.c,a.l):a instanceof na?pa(a.l,a.a,a.b):pa((a=za((a=dg.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new la(a,b,c)}function ma(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new na(c,Math.cos(a*=Lg)*b,Math.sin(a)*b)}function na(a,b,c){return this instanceof na?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof na?new na(a.l,a.a,a.b):a instanceof la?ma(a.h,a.c,a.l):za((a=ta(a)).r,a.g,a.b):new na(a,b,c)}function oa(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=qa(e)*Wg,d=qa(d)*Xg,f=qa(f)*Yg,new ta(sa(3.2404542*e-1.5371385*d-.4985314*f),sa(-.969266*e+1.8760108*d+.041556*f),sa(.0556434*e-.2040259*d+1.0572252*f))}function pa(a,b,c){return a>0?new la(Math.atan2(c,b)*Mg,Math.sqrt(b*b+c*c),a):new la(NaN,NaN,a)}function qa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function ra(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function sa(a){return Math.round(255*(a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function ta(a,b,c){return this instanceof ta?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof ta?new ta(a.r,a.g,a.b):xa(""+a,ta,ka):new ta(a,b,c)}function ua(a){return new ta(a>>16,a>>8&255,255&a)}function va(a){return ua(a)+""}function wa(a){return a<16?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function xa(a,b,c){a=a.toLowerCase();var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(Ba(e[0]),Ba(e[1]),Ba(e[2]))}return(f=_g.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function ya(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=i<.5?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(b<c?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&i<1?0:d),new ja(d,e,i)}function za(a,b,c){a=Aa(a),b=Aa(b),c=Aa(c);var d=ra((.4124564*a+.3575761*b+.1804375*c)/Wg),e=ra((.2126729*a+.7151522*b+.072175*c)/Xg),f=ra((.0193339*a+.119192*b+.9503041*c)/Yg);return na(116*e-16,500*(d-e),200*(e-f))}function Aa(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Ba(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Ca(a){return"function"==typeof a?a:function(){return a}}function Da(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Ea(b,c,a,d)}}function Ea(a,b,c,d){function e(){var a,b=i.status;if(!b&&Ga(i)||b>=200&&b<300||304===b){
try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=dg.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=dg.event;dg.event=a;try{g.progress.call(f,i)}finally{dg.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(fg(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},dg.rebind(f,g,"on"),null==d?f:f.get(Fa(d))}function Fa(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Ga(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Ha(){var a=Ia(),b=Ja()-a;b>24?(isFinite(b)&&(clearTimeout(dh),dh=setTimeout(Ha,b)),ch=0):(ch=1,fh(Ha))}function Ia(){var a=Date.now();for(eh=ah;eh;)a>=eh.t&&(eh.f=eh.c(a-eh.t)),eh=eh.n;return a}function Ja(){for(var a,b=ah,c=1/0;b;)b.f?b=a?a.n=b.n:ah=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return bh=a,c}function Ka(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function La(a,b){var c=Math.pow(10,3*pg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Ma(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:u;return function(a){var c=hh.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):"e"!=n&&"f"!=n||(m=Math.max(0,Math.min(20,m)))),n=ih.get(n)||Na;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=a<0||0===a&&1/a<0?(a=-a,"-"):"-"===h?"":h;if(o<0){var i=dg.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(w<0){var x=s?a.lastIndexOf("e"):-1;x<0?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=y<k?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Na(a){return a+""}function Oa(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Pa(a,b,c){function d(b){var c=a(b),d=f(c,1);return b-c<d-b?c:d}function e(c){return b(c=a(new kh(c-1)),1),c}function f(a,c){return b(a=new kh((+a)),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;g<d;)c(g)%f||h.push(new Date((+g))),b(g,1);else for(;g<d;)h.push(new Date((+g))),b(g,1);return h}function h(a,b,c){try{kh=Oa;var d=new Oa;return d._=a,g(d,b,c)}finally{kh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Qa(a);return i.floor=i,i.round=Qa(d),i.ceil=Qa(e),i.offset=Qa(f),i.range=h,a}function Qa(a){return function(b,c){try{kh=Oa;var d=new Oa;return d._=b,a(d,c)._}finally{kh=Date}}}function Ra(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=mh[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&kh!==Oa,g=new(f?Oa:kh);return"j"in d?g.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;h<i;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in mh?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{kh=Oa;var b=new kh;return b._=a,d(b)}finally{kh=Date}}var d=b(a);return c.parse=function(a){try{kh=Oa;var b=d.parse(a);return b&&b._}finally{kh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=jb;var t=dg.map(),u=Ta(p),v=Ua(p),w=Ta(q),x=Ua(q),y=Ta(r),z=Ua(r),A=Ta(s),B=Ua(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Sa(a.getDate(),b,2)},e:function(a,b){return Sa(a.getDate(),b,2)},H:function(a,b){return Sa(a.getHours(),b,2)},I:function(a,b){return Sa(a.getHours()%12||12,b,2)},j:function(a,b){return Sa(1+jh.dayOfYear(a),b,3)},L:function(a,b){return Sa(a.getMilliseconds(),b,3)},m:function(a,b){return Sa(a.getMonth()+1,b,2)},M:function(a,b){return Sa(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Sa(a.getSeconds(),b,2)},U:function(a,b){return Sa(jh.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Sa(jh.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Sa(a.getFullYear()%100,b,2)},Y:function(a,b){return Sa(a.getFullYear()%1e4,b,4)},Z:hb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:bb,e:bb,H:db,I:db,j:cb,L:gb,m:ab,M:eb,p:k,S:fb,U:Wa,w:Va,W:Xa,x:i,X:j,y:Za,Y:Ya,Z:$a,"%":ib};return b}function Sa(a,b,c){var d=a<0?"-":"",e=(d?-a:a)+"",f=e.length;return d+(f<c?new Array(c-f+1).join(b)+e:e)}function Ta(a){return new RegExp("^(?:"+a.map(dg.requote).join("|")+")","i")}function Ua(a){for(var b=new l,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Va(a,b,c){nh.lastIndex=0;var d=nh.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Wa(a,b,c){nh.lastIndex=0;var d=nh.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Xa(a,b,c){nh.lastIndex=0;var d=nh.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Ya(a,b,c){nh.lastIndex=0;var d=nh.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Za(a,b,c){nh.lastIndex=0;var d=nh.exec(b.slice(c,c+2));return d?(a.y=_a(+d[0]),c+d[0].length):-1}function $a(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function _a(a){return a+(a>68?1900:2e3)}function ab(a,b,c){nh.lastIndex=0;var d=nh.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function bb(a,b,c){nh.lastIndex=0;var d=nh.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function cb(a,b,c){nh.lastIndex=0;var d=nh.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function db(a,b,c){nh.lastIndex=0;var d=nh.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function eb(a,b,c){nh.lastIndex=0;var d=nh.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function fb(a,b,c){nh.lastIndex=0;var d=nh.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function gb(a,b,c){nh.lastIndex=0;var d=nh.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function hb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=pg(b)/60|0,e=pg(b)%60;return c+Sa(d,"0",2)+Sa(e,"0",2)}function ib(a,b,c){oh.lastIndex=0;var d=oh.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function jb(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function kb(){}function lb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function mb(a,b){a&&sh.hasOwnProperty(a.type)&&sh[a.type](a,b)}function nb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function ob(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)nb(a[c],b,1);b.polygonEnd()}function pb(){function a(a,b){a*=Lg,b=b*Lg/2+Hg/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);uh.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;vh.point=function(g,h){vh.point=a,d=(b=g)*Lg,e=Math.cos(h=(c=h)*Lg/2+Hg/4),f=Math.sin(h)},vh.lineEnd=function(){a(b,c)}}function qb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function rb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function sb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function tb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function ub(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function vb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function wb(a){return[Math.atan2(a[1],a[0]),da(a[2])]}function xb(a,b){return pg(a[0]-b[0])<Fg&&pg(a[1]-b[1])<Fg}function yb(a,b){a*=Lg;var c=Math.cos(b*=Lg);zb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function zb(a,b,c){++wh,yh+=(a-yh)/wh,zh+=(b-zh)/wh,Ah+=(c-Ah)/wh}function Ab(){function a(a,e){a*=Lg;var f=Math.cos(e*=Lg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);xh+=j,Bh+=j*(b+(b=g)),Ch+=j*(c+(c=h)),Dh+=j*(d+(d=i)),zb(b,c,d)}var b,c,d;Hh.point=function(e,f){e*=Lg;var g=Math.cos(f*=Lg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Hh.point=a,zb(b,c,d)}}function Bb(){Hh.point=yb}function Cb(){function a(a,b){a*=Lg;var c=Math.cos(b*=Lg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-ca(n)/m,p=Math.atan2(m,n);Eh+=o*j,Fh+=o*k,Gh+=o*l,xh+=p,Bh+=p*(d+(d=g)),Ch+=p*(e+(e=h)),Dh+=p*(f+(f=i)),zb(d,e,f)}var b,c,d,e,f;Hh.point=function(g,h){b=g,c=h,Hh.point=a,g*=Lg;var i=Math.cos(h*=Lg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),zb(d,e,f)},Hh.lineEnd=function(){a(b,c),Hh.lineEnd=Bb,Hh.point=yb}}function Db(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Eb(){return!0}function Fb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(xb(c,d)){e.lineStart();for(var h=0;h<b;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Hb(c,a,null,(!0)),j=new Hb(c,null,i,(!1));i.o=j,f.push(i),g.push(j),i=new Hb(d,a,null,(!1)),j=new Hb(d,null,i,(!0)),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Gb(f),Gb(g),f.length){for(var h=0,i=c,j=g.length;h<j;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;h<j;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Gb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Hb(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Ib(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Jb))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=dg.merge(n);var a=Pb(r,o);n.length?(v||(f.polygonStart(),v=!0),Fb(n,Lb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Kb(),u=b(t),v=!1;return s}}function Jb(a){return a.length>1}function Kb(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:x,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Lb(a,b){return((a=a.x)[0]<0?a[1]-Kg-Fg:Kg-a[1])-((b=b.x)[0]<0?b[1]-Kg-Fg:Kg-b[1])}function Mb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Hg:-Hg,i=pg(f-c);pg(i-Hg)<Fg?(a.point(c,d=(d+g)/2>0?Kg:-Kg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Hg&&(pg(c-e)<Fg&&(c-=e*Fg),pg(f-h)<Fg&&(f-=h*Fg),d=Nb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Nb(a,b,c,d){var e,f,g=Math.sin(a-c);return pg(g)>Fg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Ob(a,b,c,d){var e;if(null==a)e=c*Kg,d.point(-Hg,e),d.point(0,e),d.point(Hg,e),d.point(Hg,0),d.point(Hg,-e),d.point(0,-e),d.point(-Hg,-e),d.point(-Hg,0),d.point(-Hg,e);else if(pg(a[0]-b[0])>Fg){var f=a[0]<b[0]?Hg:-Hg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Pb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;uh.reset();for(var h=0,i=b.length;h<i;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Hg/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Hg/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Hg,z=o*t;if(uh.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Ig:v,y^m>=c^r>=c){var A=sb(qb(l),qb(a));vb(A);var B=sb(e,A);vb(B);var C=(y^v>=0?-1:1)*da(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(f<-Fg||f<Fg&&uh<0)^1&g}function Qb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(l<0?Hg:-Hg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(xb(c,n)||xb(o,n))&&(o[0]+=Fg,o[1]+=Fg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&xb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=qb(a),e=qb(b),g=[1,0,0],h=sb(d,e),i=rb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=sb(g,h),o=ub(g,l),p=ub(h,m);tb(o,p);var q=n,r=rb(o,q),s=rb(q,q),t=r*r-s*(rb(o,o)-1);if(!(t<0)){var u=Math.sqrt(t),v=ub(q,(-r-u)/s);if(tb(v,o),v=wb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];y<x&&(w=x,x=y,y=w);var B=y-x,C=pg(B-Hg)<Fg,D=C||B<Fg;if(!C&&A<z&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(pg(v[0]-x)<Fg?z:A):z<=v[1]&&v[1]<=A:B>Hg^(x<=v[0]&&v[0]<=y)){var E=ub(q,(-r+u)/s);return tb(E,o),[v,wb(E)]}}}function e(b,c){var d=g?a:Hg-a,e=0;return b<-d?e|=1:b>d&&(e|=2),c<-d?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=pg(f)>Fg,i=pc(a,6*Lg);return Ib(b,c,i,g?[0,-a]:[-Hg,a-Hg])}function Rb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,o<0){if(f<m)return;f<n&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(f<0)){if(f/=o,o<0){if(f>n)return;f>m&&(m=f)}else if(o>0){if(f<m)return;f<n&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,p<0){if(f<m)return;f<n&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(f<0)){if(f/=p,p<0){if(f>n)return;f>m&&(m=f)}else if(p>0){if(f<m)return;f<n&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),n<1&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Sb(a,b,c,d){function e(d,e){return pg(d[0]-a)<Fg?e>0?0:3:pg(d[0]-c)<Fg?e>0?2:1:pg(d[1]-b)<Fg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;e<c;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];g<i;++g)f=h[g],j[1]<=d?f[1]>d&&ba(j,f,a)>0&&++b:f[1]<=d&&ba(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return a<=e&&e<=c&&b<=f&&f<=d}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Jh,Math.min(Jh,a)),b=Math.max(-Jh,Math.min(Jh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Kb(),C=Rb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=dg.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Fb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Tb(a){var b=0,c=Hg/3,d=hc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Hg/180,c=a[1]*Hg/180):[b/Hg*180,c/Hg*180]},e}function Ub(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,da((f-(a*a+c*c)*e*e)/(2*e))]},c}function Vb(){function a(a,b){Lh+=e*a-d*b,d=a,e=b}var b,c,d,e;Qh.point=function(f,g){Qh.point=a,b=d=f,c=e=g},Qh.lineEnd=function(){a(b,c)}}function Wb(a,b){a<Mh&&(Mh=a),a>Oh&&(Oh=a),b<Nh&&(Nh=b),b>Ph&&(Ph=b)}function Xb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Yb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Yb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Yb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Zb(a,b){yh+=a,zh+=b,++Ah}function $b(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);Bh+=g*(b+a)/2,Ch+=g*(c+d)/2,Dh+=g,Zb(b=a,c=d)}var b,c;Sh.point=function(d,e){Sh.point=a,Zb(b=d,c=e)}}function _b(){Sh.point=Zb}function ac(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);Bh+=g*(d+a)/2,Ch+=g*(e+b)/2,Dh+=g,g=e*a-d*b,Eh+=g*(d+a),Fh+=g*(e+b),Gh+=3*g,Zb(d=a,e=b)}var b,c,d,e;Sh.point=function(f,g){Sh.point=a,Zb(b=d=f,c=e=g)},Sh.lineEnd=function(){a(b,c)}}function bc(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Ig)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:x};return h}function cc(a){function b(a){return(h?d:c)(a)}function c(b){return fc(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=qb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=pg(pg(x)-1)<Fg||pg(d-m)<Fg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||pg((s*E+t*F)/u-.5)>.3||h*n+i*o+j*p<g)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Lg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function dc(a){var b=cc(function(b,c){return a([b*Mg,c*Mg])});return function(a){return ic(b(a))}}function ec(a){this.stream=a}function fc(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function gc(a){return hc(function(){return a})()}function hc(a){function b(a){return a=h(a[0]*Lg,a[1]*Lg),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Mg,a[1]*Mg]}function d(){h=Db(g=lc(r,s,t),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=cc(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,t=0,v=Ih,w=u,x=null,y=null;return b.stream=function(a){return k&&(k.valid=!1),k=ic(v(g,l(w(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(v=null==a?(x=a,Ih):Qb((x=+a)*Lg),e()):x},b.clipExtent=function(a){return arguments.length?(y=a,w=a?Sb(a[0][0],a[0][1],a[1][0],a[1][1]):u,e()):y},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Lg,q=a[1]%360*Lg,d()):[p*Mg,q*Mg]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Lg,s=a[1]%360*Lg,t=a.length>2?a[2]%360*Lg:0,d()):[r*Mg,s*Mg,t*Mg]},dg.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function ic(a){return fc(a,function(b,c){a.point(b*Lg,c*Lg)})}function jc(a,b){return[a,b]}function kc(a,b){return[a>Hg?a-Ig:a<-Hg?a+Ig:a,b]}function lc(a,b,c){return a?b||c?Db(nc(a),oc(b,c)):nc(a):b||c?oc(b,c):kc}function mc(a){return function(b,c){return b+=a,[b>Hg?b-Ig:b<-Hg?b+Ig:b,c]}}function nc(a){var b=mc(a);return b.invert=mc(-a),b}function oc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),da(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),da(k*d-h*e)]},c}function pc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=qc(c,e),f=qc(c,f),(g>0?e<f:e>f)&&(e+=g*Ig)):(e=a+g*Ig,f=a-.5*i);for(var j,k=e;g>0?k>f:k<f;k-=i)h.point((j=wb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function qc(a,b){var c=qb(b);c[0]-=a,vb(c);var d=ca(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Fg)%(2*Math.PI)}function rc(a,b,c){var d=dg.range(a,b-Fg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function sc(a,b,c){var d=dg.range(a,b-Fg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function tc(a){return a.source}function uc(a){return a.target}function vc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(ha(d-b)+e*g*ha(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Mg,Math.atan2(g,Math.sqrt(d*d+e*e))*Mg]}:function(){return[a*Mg,b*Mg]};return o.distance=m,o}function wc(){function a(a,e){var f=Math.sin(e*=Lg),g=Math.cos(e),h=pg((a*=Lg)-b),i=Math.cos(h);Th+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Uh.point=function(e,f){b=e*Lg,c=Math.sin(f*=Lg),d=Math.cos(f),Uh.point=a},Uh.lineEnd=function(){Uh.point=Uh.lineEnd=x}}function xc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function yc(a,b){function c(a,b){g>0?b<-Kg+Fg&&(b=-Kg+Fg):b>Kg-Fg&&(b=Kg-Fg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Hg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=aa(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Kg]},c):Ac}function zc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return pg(e)<Fg?jc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-aa(e)*Math.sqrt(a*a+c*c)]},c)}function Ac(a,b){return[a,Math.log(Math.tan(Hg/4+b/2))]}function Bc(a){var b,c=gc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Hg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Cc(a,b){return[Math.log(Math.tan(Hg/4+b/2)),-a]}function Dc(a){return a[0]}function Ec(a){return a[1]}function Fc(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;d>1&&ba(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Gc(a,b){return a[0]-b[0]||a[1]-b[1]}function Hc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Ic(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Jc(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Kc(){dd(this),this.edge=this.site=this.circle=null}function Lc(a){var b=ei.pop()||new Kc;return b.site=a,b}function Mc(a){Wc(a),bi.remove(a),ei.push(a),dd(a)}function Nc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Mc(a);for(var i=f;i.circle&&pg(c-i.circle.x)<Fg&&pg(d-i.circle.cy)<Fg;)f=i.P,h.unshift(i),Mc(i),i=f;h.unshift(i),Wc(i);for(var j=g;j.circle&&pg(c-j.circle.x)<Fg&&pg(d-j.circle.cy)<Fg;)g=j.N,h.push(j),Mc(j),j=g;h.push(j),Wc(j);var k,l=h.length;for(k=1;k<l;++k)j=h[k],i=h[k-1],ad(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=$c(i.site,j.site,null,e),Vc(i),Vc(j)}function Oc(a){for(var b,c,d,e,f=a.x,g=a.y,h=bi._;h;)if(d=Pc(h,g)-f,d>Fg)h=h.L;else{if(e=f-Qc(h,g),!(e>Fg)){d>-Fg?(b=h.P,c=h):e>-Fg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Lc(a);if(bi.insert(b,i),b||c){if(b===c)return Wc(b),c=Lc(b.site),bi.insert(i,c),i.edge=c.edge=$c(b.site,i.site),Vc(b),void Vc(c);if(!c)return void(i.edge=$c(b.site,i.site));Wc(b),Wc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};ad(c.edge,j,o,u),i.edge=$c(j,a,null,u),c.edge=$c(a,o,null,u),Vc(b),Vc(c)}}function Pc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Qc(a,b){var c=a.N;if(c)return Pc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Rc(a){this.site=a,this.edges=[]}function Sc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=ai,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;g<i;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(pg(d-b)>Fg||pg(e-c)>Fg)&&(h.splice(g,0,new bd(_c(f.site,k,pg(d-l)<Fg&&o-e>Fg?{x:l,y:pg(b-l)<Fg?c:o}:pg(e-o)<Fg&&m-d>Fg?{x:pg(c-o)<Fg?b:m,y:o}:pg(d-m)<Fg&&e-n>Fg?{x:m,y:pg(b-m)<Fg?c:n}:pg(e-n)<Fg&&d-l>Fg?{x:pg(c-n)<Fg?b:l,y:n}:null),f.site,null)),++i)}function Tc(a,b){return b.angle-a.angle}function Uc(){dd(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Gg)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=fi.pop()||new Uc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=di._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}di.insert(s,r),s||(ci=r)}}}}function Wc(a){var b=a.circle;b&&(b.P||(ci=b.N),di.remove(b),fi.push(b),dd(b),a.circle=null)}function Xc(a){for(var b,c=_h,d=Rb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Yc(b,a)||!d(b)||pg(b.a.x-b.b.x)<Fg&&pg(b.a.y-b.b.y)<Fg)&&(b.a=b.b=null,c.splice(e,1))}function Yc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(q<g||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,d<-1||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(n<p){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Zc(a,b){this.l=a,this.r=b,this.a=this.b=null}function $c(a,b,c,d){var e=new Zc(a,b);return _h.push(e),c&&ad(e,a,b,c),d&&ad(e,b,a,d),ai[a.i].edges.push(new bd(e,a,b)),ai[b.i].edges.push(new bd(e,b,a)),e}function _c(a,b,c){var d=new Zc(a,null);return d.a=b,d.b=c,_h.push(d),d}function ad(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,
a.l=b,a.r=c)}function bd(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function cd(){this._=null}function dd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function ed(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function fd(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function gd(a){for(;a.L;)a=a.L;return a}function hd(a,b){var c,d,e,f=a.sort(id).pop();for(_h=[],ai=new Array(a.length),bi=new cd,di=new cd;;)if(e=ci,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))f.x===c&&f.y===d||(ai[f.i]=new Rc(f),Oc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Nc(e.arc)}b&&(Xc(b),Sc(b));var g={cells:ai,edges:_h};return bi=di=_h=ai=null,g}function id(a,b){return b.y-a.y||b.x-a.x}function jd(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function kd(a){return a.x}function ld(a){return a.y}function md(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function nd(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&nd(a,i[0],c,d,g,h),i[1]&&nd(a,i[1],g,d,e,h),i[2]&&nd(a,i[2],c,h,g,f),i[3]&&nd(a,i[3],g,h,e,f)}}function od(a,b,c,d,e,f,g){var h,i=1/0;return function j(a,k,l,m,n){if(!(k>f||l>g||m<d||n<e)){if(o=a.point){var o,p=b-a.x,q=c-a.y,r=p*p+q*q;if(r<i){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=a.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;y<z;++y)if(a=t[3&y])switch(3&y){case 0:j(a,k,l,u,v);break;case 1:j(a,u,l,m,v);break;case 2:j(a,k,v,u,n);break;case 3:j(a,u,v,m,n)}}}(a,d,e,f,g),h}function pd(a,b){a=dg.rgb(a),b=dg.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+wa(Math.round(c+f*a))+wa(Math.round(d+g*a))+wa(Math.round(e+h*a))}}function qd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=td(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function rd(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function sd(a,b){var c,d,e,f=hi.lastIndex=ii.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=hi.exec(a))&&(d=ii.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:rd(c,d)})),f=ii.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;d<b;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function td(a,b){for(var c,d=dg.interpolators.length;--d>=0&&!(c=dg.interpolators[d](a,b)););return c}function ud(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;c<h;++c)d.push(td(a[c],b[c]));for(;c<f;++c)e[c]=a[c];for(;c<g;++c)e[c]=b[c];return function(a){for(c=0;c<h;++c)e[c]=d[c](a);return e}}function vd(a){return function(b){return b<=0?0:b>=1?1:a(b)}}function wd(a){return function(b){return 1-a(1-b)}}function xd(a){return function(b){return.5*(b<.5?a(2*b):2-a(2-2*b))}}function yd(a){return a*a}function zd(a){return a*a*a}function Ad(a){if(a<=0)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(a<.5?c:3*(a-b)+c-.75)}function Bd(a){return function(b){return Math.pow(b,a)}}function Cd(a){return 1-Math.cos(a*Kg)}function Dd(a){return Math.pow(2,10*(a-1))}function Ed(a){return 1-Math.sqrt(1-a*a)}function Fd(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Ig*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Ig/b)}}function Gd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Hd(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Id(a,b){a=dg.hcl(a),b=dg.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ma(c+f*a,d+g*a,e+h*a)+""}}function Jd(a,b){a=dg.hsl(a),b=dg.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:f<-180&&(f+=360),function(a){return ka(c+f*a,d+g*a,e+h*a)+""}}function Kd(a,b){a=dg.lab(a),b=dg.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return oa(c+f*a,d+g*a,e+h*a)+""}}function Ld(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Md(a){var b=[a.a,a.b],c=[a.c,a.d],d=Od(b),e=Nd(b,c),f=Od(Pd(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Mg,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Mg:0}function Nd(a,b){return a[0]*b[0]+a[1]*b[1]}function Od(a){var b=Math.sqrt(Nd(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Pd(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Qd(a,b){var c,d=[],e=[],f=dg.transform(a),g=dg.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:rd(h[0],i[0])},{i:3,x:rd(h[1],i[1])})):i[0]||i[1]?d.push("translate("+i+")"):d.push(""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:rd(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:rd(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:rd(n[0],o[0])},{i:c-2,x:rd(n[1],o[1])})):1==o[0]&&1==o[1]||d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Rd(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Sd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Td(a){for(var b=a.source,c=a.target,d=Vd(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Ud(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Vd(a,b){if(a===b)return a;for(var c=Ud(a),d=Ud(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Wd(a){a.fixed|=2}function Xd(a){a.fixed&=-7}function Yd(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Zd(a){a.fixed&=-5}function $d(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&($d(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function _d(a,b){return dg.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=fe,a}function ae(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function be(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function ce(a){return a.children}function de(a){return a.value}function ee(a,b){return b.value-a.value}function fe(a){return dg.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function ge(a){return a.x}function he(a){return a.y}function ie(a,b,c){a.y0=b,a.y=c}function je(a){return dg.range(a.length)}function ke(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function le(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;c<f;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function me(a){return a.reduce(ne,0)}function ne(a,b){return a+b[1]}function oe(a,b){return pe(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function pe(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function qe(a){return[dg.min(a),dg.max(a)]}function re(a,b){return a.value-b.value}function se(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function te(a,b){a._pack_next=b,b._pack_prev=a}function ue(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function ve(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-(1/0),m=1/0,n=-(1/0);if(c.forEach(we),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],ze(d,e,f),b(f),se(d,f),d._pack_prev=f,se(f,e),e=d._pack_next,g=3;g<j;g++){ze(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(ue(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!ue(i,f);i=i._pack_prev,q++);o?(p<q||p==q&&e.r<d.r?te(d,e=h):te(d=i,e),g--):(se(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;g<j;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(xe)}}function we(a){a._pack_next=a._pack_prev=a}function xe(a){delete a._pack_next,delete a._pack_prev}function ye(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)ye(e[f],b,c,d)}function ze(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function Ae(a,b){return a.parent==b.parent?1:2}function Be(a){var b=a.children;return b.length?b[0]:a.t}function Ce(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function De(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Ee(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Fe(a,b,c){return a.a.parent===b.parent?a.a:c}function Ge(a){return 1+dg.max(a,function(a){return a.y})}function He(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Ie(a){var b=a.children;return b&&b.length?Ie(b[0]):a}function Je(a){var b,c=a.children;return c&&(b=c.length)?Je(c[b-1]):a}function Ke(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Le(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return e<0&&(c+=e/2,e=0),f<0&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Me(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function Ne(a){return a.rangeExtent?a.rangeExtent():Me(a.range())}function Oe(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Pe(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return g<f&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Qe(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:ti}function Re(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=dg.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Se(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Re:Oe,i=d?Sd:Rd;return g=e(a,b,i,c),h=e(b,a,i,td),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Ld)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return We(a,b)},f.tickFormat=function(b,c){return Xe(a,b,c)},f.nice=function(b){return Ue(a,b),e()},f.copy=function(){return Se(a,b,c,d)},e()}function Te(a,b){return dg.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ue(a,b){return Pe(a,Qe(Ve(a,b)[2]))}function Ve(a,b){null==b&&(b=10);var c=Me(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return f<=.15?e*=10:f<=.35?e*=5:f<=.75&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function We(a,b){return dg.range.apply(dg,Ve(a,b))}function Xe(a,b,c){var d=Ve(a,b);if(c){var e=hh.exec(c);if(e.shift(),"s"===e[8]){var f=dg.formatPrefix(Math.max(pg(d[0]),pg(d[1])));return e[7]||(e[7]="."+Ye(f.scale(d[2]))),e[8]="f",c=dg.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+Ze(e[8],d)),c=e.join("")}else c=",."+Ye(d[2])+"f";return dg.format(c)}function Ye(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Ze(a,b){var c=Ye(b[2]);return a in ui?Math.abs(c-Ye(Math.max(pg(b[0]),pg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function $e(a,b,c,d){function e(a){return(c?Math.log(a<0?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Pe(d.map(e),c?Math:wi);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Me(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;j<k;j++)for(var m=1;m<l;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,b){if(!arguments.length)return vi;arguments.length<2?b=vi:"function"!=typeof b&&(b=dg.format(b));var d,h=Math.max(.1,a/g.ticks().length),i=c?(d=1e-12,Math.ceil):(d=-1e-12,Math.floor);return function(a){return a/f(i(e(a)+d))<=h?b(a):""}},g.copy=function(){return $e(a.copy(),b,c,d)},Te(g,a)}function _e(a,b,c){function d(b){return a(e(b))}var e=af(b),f=af(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return We(c,a)},d.tickFormat=function(a,b){return Xe(c,a,b)},d.nice=function(a){return d.domain(Ue(c,a))},d.exponent=function(g){return arguments.length?(e=af(b=g),f=af(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return _e(a.copy(),b,c)},Te(d,a)}function af(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function bf(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return dg.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new l;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Me(b.a[0])},c.copy=function(){return bf(a,b)},c.domain(a)}function cf(a,b){function c(){var c=0,e=b.length;for(h=[];++c<e;)h[c-1]=dg.quantile(a,c/e);return d}function d(a){if(!isNaN(a=+a))return b[dg.bisect(h,a)]}var h;return d.domain=function(b){return arguments.length?(a=b.map(f).filter(g).sort(e),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return h},d.invertExtent=function(c){return c=b.indexOf(c),c<0?[NaN,NaN]:[c>0?h[c-1]:a[0],c<h.length?h[c]:a[a.length-1]]},d.copy=function(){return cf(a,b)},c()}function df(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=b<0?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return df(a,b,c)},e()}function ef(a,b){function c(c){if(c<=c)return b[dg.bisect(a,c)]}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return ef(a,b)},c}function ff(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return We(a,b)},b.tickFormat=function(b,c){return Xe(a,b,c)},b.copy=function(){return ff(a)},b}function gf(){return 0}function hf(a){return a.innerRadius}function jf(a){return a.outerRadius}function kf(a){return a.startAngle}function lf(a){return a.endAngle}function mf(a){return a&&a.padAngle}function nf(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function of(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(r<0?-1:1)*Math.sqrt(t*t*s-u*u),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function pf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Ca(c),o=Ca(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Dc,d=Ec,e=Eb,f=qf,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Ci.get(a)||qf).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function qf(a){return a.join("L")}function rf(a){return qf(a)+"Z"}function sf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function tf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function uf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function vf(a,b){return a.length<4?qf(a):a[1]+yf(a.slice(1,-1),zf(a,b))}function wf(a,b){return a.length<3?qf(a):a[0]+yf((a.push(a[0]),a),zf([a[a.length-2]].concat(a,[a[1]]),b))}function xf(a,b){return a.length<3?qf(a):a[0]+yf(a,zf(a,b))}function yf(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return qf(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function zf(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function Af(a){if(a.length<3)return qf(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Ef(Fi,g),",",Ef(Fi,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Ff(i,g,h);return a.pop(),i.push("L",d),i.join("")}function Bf(a){if(a.length<4)return qf(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Ef(Fi,f)+","+Ef(Fi,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Ff(c,f,g);return c.join("")}function Cf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Ef(Fi,g),",",Ef(Fi,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Ff(b,g,h);return b.join("")}function Df(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return Af(a)}function Ef(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Ff(a,b,c){a.push("C",Ef(Di,b),",",Ef(Di,c),",",Ef(Ei,b),",",Ef(Ei,c),",",Ef(Fi,b),",",Ef(Fi,c))}function Gf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Hf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Gf(e,f);++b<c;)d[b]=(g+(g=Gf(e=f,f=a[b+1])))/2;return d[b]=g,d}function If(a){for(var b,c,d,e,f=[],g=Hf(a),h=-1,i=a.length-1;++h<i;)b=Gf(a[h],a[h+1]),pg(b)<Fg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Jf(a){return a.length<3?qf(a):a[0]+yf(a,If(a))}function Kf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Kg,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Lf(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Ca(c),v=Ca(e),w=c===d?function(){return n}:Ca(d),x=e===f?function(){return o}:Ca(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Dc,d=Dc,e=0,f=Ec,g=Eb,h=qf,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Ci.get(a)||qf).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Mf(a){return a.radius}function Nf(a){return[a.x,a.y]}function Of(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Kg;return[c*Math.cos(d),c*Math.sin(d)]}}function Pf(){return 64}function Qf(){return"circle"}function Rf(a){var b=Math.sqrt(a/Hg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Sf(a){return function(){var b,c;(b=this[a])&&(c=b[b.active])&&(--b.count?delete b[b.active]:delete this[a],b.active+=.5,c.event&&c.event.interrupt.call(this,this.__data__,c.index))}}function Tf(a,b,c){return ug(a,Mi),a.namespace=b,a.id=c,a}function Uf(a,b,c,d){var e=a.id,f=a.namespace;return T(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function Vf(a){return null==a&&(a=""),function(){this.textContent=a}}function Wf(a){return null==a?"__transition__":"__transition_"+a+"__"}function Xf(a,b,c,d,e){var f=a[c]||(a[c]={active:0,count:0}),g=f[d];if(!g){var h=e.time;g=f[d]={tween:new l,time:h,delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++f.count,dg.timer(function(e){function i(c){if(f.active>d)return k();var e=f[f.active];e&&(--f.count,delete f[f.active],e.event&&e.event.interrupt.call(a,a.__data__,e.index)),f.active=d,g.event&&g.event.start.call(a,a.__data__,b),g.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&p.push(d)}),m=g.ease,l=g.duration,dg.timer(function(){return o.c=j(c||1)?Eb:j,1},0,h)}function j(c){if(f.active!==d)return 1;for(var e=c/l,h=m(e),i=p.length;i>0;)p[--i].call(a,h);return e>=1?(g.event&&g.event.end.call(a,a.__data__,b),k()):void 0}function k(){return--f.count?delete f[d]:delete a[c],1}var l,m,n=g.delay,o=eh,p=[];return o.t=n+h,n<=e?i(e-n):void(o.c=i)},0,h)}}function Yf(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function Zf(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function $f(a){return a.toISOString()}function _f(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=dg.bisect(Vi,e);return f==Vi.length?[b.year,Ve(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Vi[f-1]<Vi[f]/e?f-1:f]:[Yi,Ve(a,c)[2]]}return d.invert=function(b){return ag(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(ag)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,ag(+c+1),b).length}var f=d.domain(),g=Me(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Pe(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=ag(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=ag(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Me(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],ag(+c[1]+1),b<1?1:b)},d.tickFormat=function(){return c},d.copy=function(){return _f(a.copy(),b,c)},Te(d,a)}function ag(a){return new Date(a)}function bg(a){return JSON.parse(a.responseText)}function cg(a){var b=gg.createRange();return b.selectNode(gg.body),b.createContextualFragment(a.responseText)}var dg={version:"3.5.6"},eg=[].slice,fg=function(a){return eg.call(a)},gg=this.document;if(gg)try{fg(gg.documentElement.childNodes)[0].nodeType}catch(hg){fg=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}if(Date.now||(Date.now=function(){return+new Date}),gg)try{gg.createElement("DIV").style.setProperty("opacity",0,"")}catch(ig){var jg=this.Element.prototype,kg=jg.setAttribute,lg=jg.setAttributeNS,mg=this.CSSStyleDeclaration.prototype,ng=mg.setProperty;jg.setAttribute=function(a,b){kg.call(this,a,b+"")},jg.setAttributeNS=function(a,b,c){lg.call(this,a,b,c+"")},mg.setProperty=function(a,b,c){ng.call(this,a,b+"",c)}}dg.ascending=e,dg.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},dg.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},dg.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},dg.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),e<d&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),e<d&&(e=d))}return[c,e]},dg.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)g(c=+a[f])&&(d+=c);else for(;++f<e;)g(c=+b.call(a,a[f],f))&&(d+=c);return d},dg.mean=function(a,b){var c,d=0,e=a.length,h=-1,i=e;if(1===arguments.length)for(;++h<e;)g(c=f(a[h]))?d+=c:--i;else for(;++h<e;)g(c=f(b.call(a,a[h],h)))?d+=c:--i;if(i)return d/i},dg.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},dg.median=function(a,b){var c,d=[],h=a.length,i=-1;if(1===arguments.length)for(;++i<h;)g(c=f(a[i]))&&d.push(c);else for(;++i<h;)g(c=f(b.call(a,a[i],i)))&&d.push(c);if(d.length)return dg.quantile(d.sort(e),.5)},dg.variance=function(a,b){var c,d,e=a.length,h=0,i=0,j=-1,k=0;if(1===arguments.length)for(;++j<e;)g(c=f(a[j]))&&(d=c-h,h+=d/++k,i+=d*(c-h));else for(;++j<e;)g(c=f(b.call(a,a[j],j)))&&(d=c-h,h+=d/++k,i+=d*(c-h));if(k>1)return i/(k-1)},dg.deviation=function(){var a=dg.variance.apply(this,arguments);return a?Math.sqrt(a):a};var og=h(e);dg.bisectLeft=og.left,dg.bisect=dg.bisectRight=og.right,dg.bisector=function(a){return h(1===a.length?function(b,c){return e(a(b),c)}:a)},dg.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,f<2&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},dg.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},dg.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(d<0?0:d);c<d;)f[c]=[b=e,e=a[++c]];return f},dg.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,b=dg.min(arguments,i),c=new Array(b);++a<b;)for(var d,e=-1,f=c[a]=new Array(d);++e<d;)f[e]=arguments[e][a];return c},dg.transpose=function(a){return dg.zip.apply(dg,a)},dg.keys=function(a){var b=[];for(var c in a)b.push(c);return b},dg.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},dg.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},dg.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var pg=Math.abs;dg.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],f=j(pg(c)),g=-1;if(a*=f,b*=f,c*=f,c<0)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},dg.map=function(a,b){var c=new l;if(a instanceof l)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var qg="__proto__",rg="\0";k(l,{has:o,get:function(a){return this._[m(a)]},set:function(a,b){return this._[m(a)]=b},remove:p,keys:q,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:n(b),value:this._[b]});return a},size:r,empty:s,forEach:function(a){for(var b in this._)a.call(this,n(b),this._[b])}}),dg.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var i,j,k,m,n=-1,o=g.length,p=f[h++],q=new l;++n<o;)(m=q.get(i=p(j=g[n])))?m.push(j):q.set(i,[j]);return b?(j=b(),k=function(c,d){j.set(c,a(b,d,h))}):(j={},k=function(c,d){j[c]=a(b,d,h)}),q.forEach(k),j}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(dg.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},dg.set=function(a){var b=new t;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b},k(t,{has:o,add:function(a){return this._[m(a+="")]=!0,a},remove:p,values:q,size:r,empty:s,forEach:function(a){for(var b in this._)a.call(this,n(b))}}),dg.behavior={},dg.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=v(a,b,b[c]);return a};var sg=["webkit","ms","moz","Moz","o","O"];dg.dispatch=function(){for(var a=new y,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=z(a);return a},y.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},dg.event=null,dg.requote=function(a){return a.replace(tg,"\\$&")};var tg=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ug={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},vg=function(a,b){return b.querySelector(a)},wg=function(a,b){
return b.querySelectorAll(a)},xg=function(a,b){var c=a.matches||a[w(a,"matchesSelector")];return(xg=function(a,b){return c.call(a,b)})(a,b)};"function"==typeof Sizzle&&(vg=function(a,b){return Sizzle(a,b)[0]||null},wg=Sizzle,xg=Sizzle.matchesSelector),dg.selection=function(){return dg.select(gg.documentElement)};var yg=dg.selection.prototype=[];yg.select=function(a){var b,c,d,e,f=[];a=E(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return D(f)},yg.selectAll=function(a){var b,c,d=[];a=F(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=fg(a.call(c,c.__data__,h,e))),b.parentNode=c);return D(d)};var zg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};dg.ns={prefix:zg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.slice(0,b),a=a.slice(b+1)),zg.hasOwnProperty(c)?{space:zg[c],local:a}:a}},yg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=dg.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(G(b,a[b]));return this}return this.each(G(a,b))},yg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=J(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!I(a[e]).test(b))return!1;return!0}for(b in a)this.each(K(b,a[b]));return this}return this.each(K(a,b))},yg.style=function(a,b,c){var e=arguments.length;if(e<3){if("string"!=typeof a){e<2&&(b="");for(c in a)this.each(M(c,a[c],b));return this}if(e<2){var f=this.node();return d(f).getComputedStyle(f,null).getPropertyValue(a)}c=""}return this.each(M(a,b,c))},yg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(N(b,a[b]));return this}return this.each(N(a,b))},yg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},yg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},yg.append=function(a){return a=O(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},yg.insert=function(a,b){return a=O(a),b=E(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},yg.remove=function(){return this.each(P)},yg.data=function(a,b){function c(a,c){var d,e,f,g=a.length,k=c.length,m=Math.min(g,k),n=new Array(k),o=new Array(k),p=new Array(g);if(b){var q,r=new l,s=new Array(g);for(d=-1;++d<g;)r.has(q=b.call(e=a[d],e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q;for(d=-1;++d<k;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=Q(f),r.set(q,!0);for(d=-1;++d<g;)r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=Q(f);for(;d<k;++d)o[d]=Q(c[d]);for(;d<g;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),i.push(n),j.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=U([]),i=D([]),j=D([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return i.enter=function(){return h},i.exit=function(){return j},i},yg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},yg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=R(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return D(e)},yg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},yg.sort=function(a){a=S.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},yg.each=function(a){return T(this,function(b,c,d){a.call(b,b.__data__,c,d)})},yg.call=function(a){var b=fg(arguments);return a.apply(b[0]=this,b),this},yg.empty=function(){return!this.node()},yg.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null},yg.size=function(){var a=0;return T(this,function(){++a}),a};var Ag=[];dg.selection.enter=U,dg.selection.enter.prototype=Ag,Ag.append=yg.append,Ag.empty=yg.empty,Ag.node=yg.node,Ag.call=yg.call,Ag.size=yg.size,Ag.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return D(g)},Ag.insert=function(a,b){return arguments.length<2&&(b=V(this)),yg.insert.call(this,a,b)},dg.select=function(a){var c;return"string"==typeof a?(c=[vg(a,gg)],c.parentNode=gg.documentElement):(c=[a],c.parentNode=b(a)),D([c])},dg.selectAll=function(a){var b;return"string"==typeof a?(b=fg(wg(a,gg)),b.parentNode=gg.documentElement):(b=a,b.parentNode=null),D([b])},yg.on=function(a,b,c){var d=arguments.length;if(d<3){if("string"!=typeof a){d<2&&(b=!1);for(c in a)this.each(W(c,a[c],b));return this}if(d<2)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(W(a,b,c))};var Bg=dg.map({mouseenter:"mouseover",mouseleave:"mouseout"});gg&&Bg.forEach(function(a){"on"+a in gg&&Bg.remove(a)});var Cg,Dg=0;dg.mouse=function(a){return $(a,B())};var Eg=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;dg.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=B().changedTouches),b)for(var d,e=0,f=b.length;e<f;++e)if((d=b[e]).identifier===c)return $(a,d)},dg.behavior.drag=function(){function a(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function b(a,b,d,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o&&dg.event.target===l),n({type:"dragend"}))}var j,k=this,l=dg.event.target,m=k.parentNode,n=c.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=dg.select(d(l)).on(f+q,h).on(g+q,i),s=Z(l),t=b(m,p);e?(j=e.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var c=C(a,"drag","dragstart","dragend"),e=null,f=b(x,dg.mouse,d,"mousemove","mouseup"),g=b(_,dg.touch,u,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},dg.rebind(a,c,"on")},dg.touches=function(a,b){return arguments.length<2&&(b=B().touches),b?fg(b).map(function(b){var c=$(a,b);return c.identifier=b.identifier,c}):[]};var Fg=1e-6,Gg=Fg*Fg,Hg=Math.PI,Ig=2*Hg,Jg=Ig-Fg,Kg=Hg/2,Lg=Hg/180,Mg=180/Hg,Ng=Math.SQRT2,Og=2,Pg=4;dg.interpolateZoom=function(a,b){function c(a){var b=a*s;if(r){var c=fa(p),g=f/(Og*m)*(c*ga(Ng*b+p)-ea(p));return[d+g*j,e+g*k,f*c/fa(Ng*b+p)]}return[d+a*j,e+a*k,f*Math.exp(Ng*b)]}var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2],j=g-d,k=h-e,l=j*j+k*k,m=Math.sqrt(l),n=(i*i-f*f+Pg*l)/(2*f*Og*m),o=(i*i-f*f-Pg*l)/(2*i*Og*m),p=Math.log(Math.sqrt(n*n+1)-n),q=Math.log(Math.sqrt(o*o+1)-o),r=q-p,s=(r||Math.log(i/f))/Ng;return c.duration=1e3*s,c},dg.behavior.zoom=function(){function a(a){a.on(F,l).on(Rg+".zoom",n).on("dblclick.zoom",o).on(I,m)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function c(a){return[a[0]*y.k+y.x,a[1]*y.k+y.y]}function e(a){y.k=Math.max(B[0],Math.min(B[1],a))}function f(a,b){b=c(b),y.x+=a[0]-b[0],y.y+=a[1]-b[1]}function g(b,c,d,g){b.__chart__={x:y.x,y:y.y,k:y.k},e(Math.pow(2,g)),f(q=c,d),b=dg.select(b),D>0&&(b=b.transition().duration(D)),b.call(a.event)}function h(){v&&v.domain(u.range().map(function(a){return(a-y.x)/y.k}).map(u.invert)),x&&x.domain(w.range().map(function(a){return(a-y.y)/y.k}).map(w.invert))}function i(a){E++||a({type:"zoomstart"})}function j(a){h(),a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function k(a){--E||(a({type:"zoomend"}),q=null)}function l(){function a(){l=1,f(dg.mouse(e),n),j(h)}function c(){m.on(G,null).on(H,null),o(l&&dg.event.target===g),k(h)}var e=this,g=dg.event.target,h=J.of(e,arguments),l=0,m=dg.select(d(e)).on(G,a).on(H,c),n=b(dg.mouse(e)),o=Z(e);Li.call(e),i(h)}function m(){function a(){var a=dg.touches(o);return n=y.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=b(a))}),a}function c(){var b=dg.event.target;dg.select(b).on(u,d).on(v,h),w.push(b);for(var c=dg.event.changedTouches,e=0,f=c.length;e<f;++e)q[c[e].identifier]=null;var i=a(),j=Date.now();if(1===i.length){if(j-t<500){var k=i[0];g(o,k,q[k.identifier],Math.floor(Math.log(y.k)/Math.LN2)+1),A()}t=j}else if(i.length>1){var k=i[0],l=i[1],m=k[0]-l[0],n=k[1]-l[1];r=m*m+n*n}}function d(){var a,b,c,d,g=dg.touches(o);Li.call(o);for(var h=0,i=g.length;h<i;++h,d=null)if(c=g[h],d=q[c.identifier]){if(b)break;a=c,b=d}if(d){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+d[0])/2,(b[1]+d[1])/2],e(l*n)}t=null,f(a,b),j(p)}function h(){if(dg.event.touches.length){for(var b=dg.event.changedTouches,c=0,d=b.length;c<d;++c)delete q[b[c].identifier];for(var e in q)return void a()}dg.selectAll(w).on(s,null),x.on(F,l).on(I,m),z(),k(p)}var n,o=this,p=J.of(o,arguments),q={},r=0,s=".zoom-"+dg.event.changedTouches[0].identifier,u="touchmove"+s,v="touchend"+s,w=[],x=dg.select(o),z=Z(o);c(),i(p),x.on(F,null).on(I,c)}function n(){var a=J.of(this,arguments);s?clearTimeout(s):(Li.call(this),p=b(q=r||dg.mouse(this)),i(a)),s=setTimeout(function(){s=null,k(a)},50),A(),e(Math.pow(2,.002*Qg())*y.k),f(q,p),j(a)}function o(){var a=dg.mouse(this),c=Math.log(y.k)/Math.LN2;g(this,a,b(a),dg.event.shiftKey?Math.ceil(c)-1:Math.floor(c)+1)}var p,q,r,s,t,u,v,w,x,y={x:0,y:0,k:1},z=[960,500],B=Sg,D=250,E=0,F="mousedown.zoom",G="mousemove.zoom",H="mouseup.zoom",I="touchstart.zoom",J=C(a,"zoomstart","zoom","zoomend");return Rg||(Rg="onwheel"in gg?(Qg=function(){return-dg.event.deltaY*(dg.event.deltaMode?120:1)},"wheel"):"onmousewheel"in gg?(Qg=function(){return dg.event.wheelDelta},"mousewheel"):(Qg=function(){return-dg.event.detail},"MozMousePixelScroll")),a.event=function(a){a.each(function(){var a=J.of(this,arguments),b=y;Ji?dg.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},i(a)}).tween("zoom:zoom",function(){var c=z[0],d=z[1],e=q?q[0]:c/2,f=q?q[1]:d/2,g=dg.interpolateZoom([(e-y.x)/y.k,(f-y.y)/y.k,c/y.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=y={x:e-d[0]*h,y:f-d[1]*h,k:h},j(a)}}).each("interrupt.zoom",function(){k(a)}).each("end.zoom",function(){k(a)}):(this.__chart__=y,i(a),j(a),k(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},h(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:+b},h(),a):y.k},a.scaleExtent=function(b){return arguments.length?(B=null==b?Sg:[+b[0],+b[1]],a):B},a.center=function(b){return arguments.length?(r=b&&[+b[0],+b[1]],a):r},a.size=function(b){return arguments.length?(z=b&&[+b[0],+b[1]],a):z},a.duration=function(b){return arguments.length?(D=+b,a):D},a.x=function(b){return arguments.length?(v=b,u=b.copy(),y={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),y={x:0,y:0,k:1},a):x},dg.rebind(a,J,"on")};var Qg,Rg,Sg=[0,1/0];dg.color=ia,ia.prototype.toString=function(){return this.rgb()+""},dg.hsl=ja;var Tg=ja.prototype=new ia;Tg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ja(this.h,this.s,this.l/a)},Tg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ja(this.h,this.s,a*this.l)},Tg.rgb=function(){return ka(this.h,this.s,this.l)},dg.hcl=la;var Ug=la.prototype=new ia;Ug.brighter=function(a){return new la(this.h,this.c,Math.min(100,this.l+Vg*(arguments.length?a:1)))},Ug.darker=function(a){return new la(this.h,this.c,Math.max(0,this.l-Vg*(arguments.length?a:1)))},Ug.rgb=function(){return ma(this.h,this.c,this.l).rgb()},dg.lab=na;var Vg=18,Wg=.95047,Xg=1,Yg=1.08883,Zg=na.prototype=new ia;Zg.brighter=function(a){return new na(Math.min(100,this.l+Vg*(arguments.length?a:1)),this.a,this.b)},Zg.darker=function(a){return new na(Math.max(0,this.l-Vg*(arguments.length?a:1)),this.a,this.b)},Zg.rgb=function(){return oa(this.l,this.a,this.b)},dg.rgb=ta;var $g=ta.prototype=new ia;$g.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e),new ta(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new ta(e,e,e)},$g.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ta(a*this.r,a*this.g,a*this.b)},$g.hsl=function(){return ya(this.r,this.g,this.b)},$g.toString=function(){return"#"+wa(this.r)+wa(this.g)+wa(this.b)};var _g=dg.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});_g.forEach(function(a,b){_g.set(a,ua(b))}),dg.functor=Ca,dg.xhr=Da(u),dg.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Ea(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;k<j;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new t,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},dg.csv=dg.dsv(",","text/csv"),dg.tsv=dg.dsv("\t","text/tab-separated-values");var ah,bh,ch,dh,eh,fh=this[w(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};dg.timer=function(a,b,c){var d=arguments.length;d<2&&(b=0),d<3&&(c=Date.now());var e=c+b,f={c:a,t:e,f:!1,n:null};bh?bh.n=f:ah=f,bh=f,ch||(dh=clearTimeout(dh),ch=1,fh(Ha))},dg.timer.flush=function(){Ia(),Ja()},dg.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var gh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(La);dg.formatPrefix=function(a,b){var c=0;return a&&(a<0&&(a*=-1),b&&(a=dg.round(a,Ka(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),gh[8+c/3]};var hh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ih=dg.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=dg.round(a,Ka(a,b))).toFixed(Math.max(0,Math.min(20,Ka(a*(1+1e-15),b))))}}),jh=dg.time={},kh=Date;Oa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){lh.setUTCDate.apply(this._,arguments)},setDay:function(){lh.setUTCDay.apply(this._,arguments)},setFullYear:function(){lh.setUTCFullYear.apply(this._,arguments)},setHours:function(){lh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){lh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){lh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){lh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){lh.setUTCSeconds.apply(this._,arguments)},setTime:function(){lh.setTime.apply(this._,arguments)}};var lh=Date.prototype;jh.year=Pa(function(a){return a=jh.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),jh.years=jh.year.range,jh.years.utc=jh.year.utc.range,jh.day=Pa(function(a){var b=new kh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),jh.days=jh.day.range,jh.days.utc=jh.day.utc.range,jh.dayOfYear=function(a){var b=jh.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=jh[a]=Pa(function(a){return(a=jh.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=jh.year(a).getDay();return Math.floor((jh.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});jh[a+"s"]=c.range,jh[a+"s"].utc=c.utc.range,jh[a+"OfYear"]=function(a){var c=jh.year(a).getDay();return Math.floor((jh.dayOfYear(a)+(c+b)%7)/7)}}),jh.week=jh.sunday,jh.weeks=jh.sunday.range,jh.weeks.utc=jh.sunday.utc.range,jh.weekOfYear=jh.sundayOfYear;var mh={"-":"",_:" ",0:"0"},nh=/^\s*\d+/,oh=/^%/;dg.locale=function(a){return{numberFormat:Ma(a),timeFormat:Ra(a)}};var ph=dg.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});dg.format=ph.numberFormat,dg.geo={},kb.prototype={s:0,t:0,add:function(a){lb(a,this.t,qh),lb(qh.s,this.s,this),this.s?this.t+=qh.t:this.s=qh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var qh=new kb;dg.geo.stream=function(a,b){a&&rh.hasOwnProperty(a.type)?rh[a.type](a,b):mb(a,b)};var rh={Feature:function(a,b){mb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)mb(c[d].geometry,b)}},sh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){nb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)nb(c[d],b,0)},Polygon:function(a,b){ob(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ob(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)mb(c[d],b)}};dg.geo.area=function(a){return th=0,dg.geo.stream(a,vh),th};var th,uh=new kb,vh={sphere:function(){th+=4*Hg},point:x,lineStart:x,lineEnd:x,polygonStart:function(){uh.reset(),vh.lineStart=pb},polygonEnd:function(){var a=2*uh;th+=a<0?4*Hg+a:a,vh.lineStart=vh.lineEnd=vh.point=x}};dg.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),b<l&&(l=b),b>n&&(n=b)}function b(b,c){var d=qb([b*Lg,c*Lg]);if(r){var e=sb(r,d),f=[e[1],-e[0],0],g=sb(f,e);vb(g),g=wb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Mg*j,q=pg(i)>180;if(q^(j*o<p&&p<j*b)){var s=g[1]*Mg;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(j*o<p&&p<j*b)){var s=-g[1]*Mg;s<l&&(l=s)}else c<l&&(l=c),c>n&&(n=c);q?b<o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(b<k&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=pg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;vh.point(a,c),b(a,c)}function f(){vh.lineStart()}function g(){e(p,q),vh.lineEnd(),pg(s)>Fg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,vh.polygonStart()},polygonEnd:function(){vh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,uh<0?(k=-(m=180),l=-(n=90)):s>Fg?n=90:s<-Fg&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],dg.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];d<b;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-(1/0),b=f.length-1,d=0,e=f[b];d<=b;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),dg.geo.centroid=function(a){wh=xh=yh=zh=Ah=Bh=Ch=Dh=Eh=Fh=Gh=0,dg.geo.stream(a,Hh);var b=Eh,c=Fh,d=Gh,e=b*b+c*c+d*d;return e<Gg&&(b=Bh,c=Ch,d=Dh,xh<Fg&&(b=yh,c=zh,d=Ah),e=b*b+c*c+d*d,e<Gg)?[NaN,NaN]:[Math.atan2(c,b)*Mg,da(d/Math.sqrt(e))*Mg]};var wh,xh,yh,zh,Ah,Bh,Ch,Dh,Eh,Fh,Gh,Hh={sphere:x,point:yb,lineStart:Ab,lineEnd:Bb,polygonStart:function(){Hh.lineStart=Cb},polygonEnd:function(){Hh.lineStart=Ab}},Ih=Ib(Eb,Mb,Ob,[-Hg,-Hg/2]),Jh=1e9;dg.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Sb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(dg.geo.conicEqualArea=function(){return Tb(Ub)}).raw=Ub,dg.geo.albers=function(){return dg.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},dg.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=dg.geo.albers(),g=dg.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=dg.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&e<.234&&d>=-.425&&d<-.214?g:e>=.166&&e<.234&&d>=-.214&&d<-.115?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Fg,l+.12*j+Fg],[k-.214*j-Fg,l+.234*j-Fg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Fg,l+.166*j+Fg],[k-.115*j-Fg,l+.234*j-Fg]]).stream(i).point,a},a.scale(1070)};var Kh,Lh,Mh,Nh,Oh,Ph,Qh={point:x,lineStart:x,lineEnd:x,polygonStart:function(){Lh=0,Qh.lineStart=Vb},polygonEnd:function(){Qh.lineStart=Qh.lineEnd=Qh.point=x,Kh+=pg(Lh/2)}},Rh={point:Wb,lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},Sh={point:Zb,lineStart:$b,lineEnd:_b,polygonStart:function(){Sh.lineStart=ac},polygonEnd:function(){Sh.point=Zb,Sh.lineStart=$b,Sh.lineEnd=_b}};dg.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),dg.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Kh=0,dg.geo.stream(a,e(Qh)),Kh},a.centroid=function(a){return yh=zh=Ah=Bh=Ch=Dh=Eh=Fh=Gh=0,dg.geo.stream(a,e(Sh)),Gh?[Eh/Gh,Fh/Gh]:Dh?[Bh/Dh,Ch/Dh]:Ah?[yh/Ah,zh/Ah]:[NaN,NaN]},a.bounds=function(a){return Oh=Ph=-(Mh=Nh=1/0),dg.geo.stream(a,e(Rh)),[[Mh,Nh],[Oh,Ph]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||dc(a):u,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Xb:new bc(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(dg.geo.albersUsa()).context(null)},dg.geo.transform=function(a){return{stream:function(b){var c=new ec(b);for(var d in a)c[d]=a[d];return c}}},ec.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},dg.geo.projection=gc,dg.geo.projectionMutator=hc,(dg.geo.equirectangular=function(){return gc(jc)}).raw=jc.invert=jc,dg.geo.rotation=function(a){function b(b){return b=a(b[0]*Lg,b[1]*Lg),b[0]*=Mg,b[1]*=Mg,b}return a=lc(a[0]%360*Lg,a[1]*Lg,a.length>2?a[2]*Lg:0),b.invert=function(b){return b=a.invert(b[0]*Lg,b[1]*Lg),b[0]*=Mg,b[1]*=Mg,b},b},kc.invert=jc,dg.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=lc(-a[0]*Lg,-a[1]*Lg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Mg,a[1]*=Mg}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=pc((b=+d)*Lg,e*Lg),a):b},a.precision=function(d){return arguments.length?(c=pc(b*Lg,(e=+d)*Lg),a):e},a.angle(90)},dg.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Lg,e=a[1]*Lg,f=b[1]*Lg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},dg.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return dg.range(Math.ceil(f/q)*q,e,q).map(m).concat(dg.range(Math.ceil(j/r)*r,i,r).map(n)).concat(dg.range(Math.ceil(d/o)*o,c,o).filter(function(a){return pg(a%q)>Fg}).map(k)).concat(dg.range(Math.ceil(h/p)*p,g,p).filter(function(a){return pg(a%r)>Fg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=rc(h,g,90),l=sc(d,c,s),m=rc(j,i,90),n=sc(f,e,s),a):s},a.majorExtent([[-180,-90+Fg],[180,90-Fg]]).minorExtent([[-180,-80-Fg],[180,80+Fg]])},dg.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=tc,e=uc;return a.distance=function(){return dg.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,
a):e},a.precision=function(){return arguments.length?a:0},a},dg.geo.interpolate=function(a,b){return vc(a[0]*Lg,a[1]*Lg,b[0]*Lg,b[1]*Lg)},dg.geo.length=function(a){return Th=0,dg.geo.stream(a,Uh),Th};var Th,Uh={sphere:x,point:x,lineStart:wc,lineEnd:x,polygonStart:x,polygonEnd:x},Vh=xc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(dg.geo.azimuthalEqualArea=function(){return gc(Vh)}).raw=Vh;var Wh=xc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},u);(dg.geo.azimuthalEquidistant=function(){return gc(Wh)}).raw=Wh,(dg.geo.conicConformal=function(){return Tb(yc)}).raw=yc,(dg.geo.conicEquidistant=function(){return Tb(zc)}).raw=zc;var Xh=xc(function(a){return 1/a},Math.atan);(dg.geo.gnomonic=function(){return gc(Xh)}).raw=Xh,Ac.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Kg]},(dg.geo.mercator=function(){return Bc(Ac)}).raw=Ac;var Yh=xc(function(){return 1},Math.asin);(dg.geo.orthographic=function(){return gc(Yh)}).raw=Yh;var Zh=xc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(dg.geo.stereographic=function(){return gc(Zh)}).raw=Zh,Cc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Kg]},(dg.geo.transverseMercator=function(){var a=Bc(Cc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Cc,dg.geom={},dg.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Ca(c),f=Ca(d),g=a.length,h=[],i=[];for(b=0;b<g;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Gc),b=0;b<g;b++)i.push([h[b][0],-h[b][1]]);var j=Fc(h),k=Fc(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Dc,d=Ec;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},dg.geom.polygon=function(a){return ug(a,$h),a};var $h=dg.geom.polygon.prototype=[];$h.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},$h.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},$h.clip=function(a){for(var b,c,d,e,f,g,h=Jc(a),i=-1,j=this.length-Jc(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Hc(g,k,e)?(Hc(f,k,e)||a.push(Ic(f,g,k,e)),a.push(g)):Hc(f,k,e)&&a.push(Ic(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var _h,ai,bi,ci,di,ei=[],fi=[];Rc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Tc),b.length},bd.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},cd.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=gd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(ed(this,c),a=c,c=a.U),c.C=!1,d.C=!0,fd(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(fd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ed(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?gd(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,ed(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,fd(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,ed(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,fd(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,ed(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,fd(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},dg.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return hd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Fg)*Fg,y:Math.round(g(a,b)/Fg)*Fg,i:b}})}var d=Dc,e=Ec,f=d,g=e,h=gi;return a?b(a):(b.links=function(a){return hd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return hd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Tc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&jd(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Ca(d=a),b):d},b.y=function(a){return arguments.length?(g=Ca(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?gi:a,b):h===gi?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===gi?null:h&&h[1]},b)};var gi=[[-1e6,-1e6],[1e6,1e6]];dg.geom.delaunay=function(a){return dg.geom.voronoi().triangles(a)},dg.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(pg(i-c)+pg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=md()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Ca(h),u=Ca(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;n<o;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;n<o;++n){var v=+t(k=a[n],n),w=+u(k,n);v<p&&(p=v),w<q&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=md();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){nd(a,z,p,q,r,s)},z.find=function(a){return od(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Dc,i=Ec;return(g=arguments.length)?(h=kd,i=ld,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},dg.interpolateRgb=pd,dg.interpolateObject=qd,dg.interpolateNumber=rd,dg.interpolateString=sd;var hi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ii=new RegExp(hi.source,"g");dg.interpolate=td,dg.interpolators=[function(a,b){var c=typeof b;return("string"===c?_g.has(b.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(b)?pd:sd:b instanceof ia?pd:Array.isArray(b)?ud:"object"===c&&isNaN(b)?qd:rd)(a,b)}],dg.interpolateArray=ud;var ji=function(){return u},ki=dg.map({linear:ji,poly:Bd,quad:function(){return yd},cubic:function(){return zd},sin:function(){return Cd},exp:function(){return Dd},circle:function(){return Ed},elastic:Fd,back:Gd,bounce:function(){return Hd}}),li=dg.map({"in":u,out:wd,"in-out":xd,"out-in":function(a){return xd(wd(a))}});dg.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=ki.get(c)||ji,d=li.get(d)||u,vd(d(c.apply(null,eg.call(arguments,1))))},dg.interpolateHcl=Id,dg.interpolateHsl=Jd,dg.interpolateLab=Kd,dg.interpolateRound=Ld,dg.transform=function(a){var b=gg.createElementNS(dg.ns.prefix.svg,"g");return(dg.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Md(c?c.matrix:mi)})(a)},Md.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var mi={a:1,b:0,c:0,d:1,e:0,f:0};dg.interpolateTransform=Qd,dg.layout={},dg.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Td(a[c]));return b}},dg.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=dg.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(dg.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Ig-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},dg.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(h*h/q<i){if(i<o){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&i<o){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=dg.event.x,a.py=dg.event.y,h.resume()}var c,d,e,f,g,h={},i=dg.dispatch("start","tick","end"),j=[1,1],k=.9,l=ni,m=oi,n=-30,o=pi,p=.1,q=.64,r=[],s=[];return h.tick=function(){if((d*=.99)<.005)return i.end({type:"end",alpha:d=0}),!0;var b,c,h,l,m,o,q,t,u,v=r.length,w=s.length;for(c=0;c<w;++c)h=s[c],l=h.source,m=h.target,t=m.x-l.x,u=m.y-l.y,(o=t*t+u*u)&&(o=d*f[c]*((o=Math.sqrt(o))-e[c])/o,t*=o,u*=o,m.x-=t*(q=l.weight/(m.weight+l.weight)),m.y-=u*q,l.x+=t*(q=1-q),l.y+=u*q);if((q=d*p)&&(t=j[0]/2,u=j[1]/2,c=-1,q))for(;++c<v;)h=r[c],h.x+=(t-h.x)*q,h.y+=(u-h.y)*q;if(n)for($d(b=dg.geom.quadtree(r),d,g),c=-1;++c<v;)(h=r[c]).fixed||b.visit(a(h));for(c=-1;++c<v;)h=r[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*k,h.y-=(h.py-(h.py=h.y))*k);i.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(r=a,h):r},h.links=function(a){return arguments.length?(s=a,h):s},h.size=function(a){return arguments.length?(j=a,h):j},h.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,h):l},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,h):m},h.friction=function(a){return arguments.length?(k=+a,h):k},h.charge=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.chargeDistance=function(a){return arguments.length?(o=a*a,h):Math.sqrt(o)},h.gravity=function(a){return arguments.length?(p=+a,h):p},h.theta=function(a){return arguments.length?(q=a*a,h):Math.sqrt(q)},h.alpha=function(a){return arguments.length?(a=+a,d?d=a>0?a:0:a>0&&(i.start({type:"start",alpha:d=a}),dg.timer(h.tick)),h):d},h.start=function(){function a(a,d){if(!c){for(c=new Array(i),h=0;h<i;++h)c[h]=[];for(h=0;h<k;++h){var e=s[h];c[e.source.index].push(e.target),c[e.target.index].push(e.source)}}for(var f,g=c[b],h=-1,j=g.length;++h<j;)if(!isNaN(f=g[h][a]))return f;return Math.random()*d}var b,c,d,i=r.length,k=s.length,o=j[0],p=j[1];for(b=0;b<i;++b)(d=r[b]).index=b,d.weight=0;for(b=0;b<k;++b)d=s[b],"number"==typeof d.source&&(d.source=r[d.source]),"number"==typeof d.target&&(d.target=r[d.target]),++d.source.weight,++d.target.weight;for(b=0;b<i;++b)d=r[b],isNaN(d.x)&&(d.x=a("x",o)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof l)for(b=0;b<k;++b)e[b]=+l.call(this,s[b],b);else for(b=0;b<k;++b)e[b]=l;if(f=[],"function"==typeof m)for(b=0;b<k;++b)f[b]=+m.call(this,s[b],b);else for(b=0;b<k;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;b<i;++b)g[b]=+n.call(this,r[b],b);else for(b=0;b<i;++b)g[b]=n;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=dg.behavior.drag().origin(u).on("dragstart.force",Wd).on("drag.force",b).on("dragend.force",Xd)),arguments.length?void this.on("mouseover.force",Yd).on("mouseout.force",Zd).call(c):c},dg.rebind(h,i,"on")};var ni=20,oi=1,pi=1/0;dg.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return be(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=ee,c=ce,d=de;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(ae(b,function(a){a.children&&(a.value=0)}),be(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},dg.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=dg.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},_d(c,d)},dg.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(l<0?-1:1),o=(l-i*n)/dg.sum(j),p=dg.range(i),q=[];return null!=c&&p.sort(c===qi?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),p.forEach(function(a){q[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*o+n,padAngle:m}}),q}var b=Number,c=qi,d=0,e=Ig,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var qi={};dg.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=dg.permute(j,l),k=dg.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;o<r;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;n<m;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=u,c=je,d=ke,e=ie,f=ge,g=he;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:ri.get(b)||je,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:si.get(b)||ke,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var ri=dg.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(le),f=a.map(me),g=dg.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;b<d;++b)c=g[b],h<i?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return dg.range(a.length).reverse()},"default":je}),si=dg.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;c<f;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;c<m;++c){for(b=0,e=0;b<k;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];b<k;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);d<b;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,i<j&&(j=i)}for(c=0;c<m;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;c<f;++c){for(b=0,d=0;b<e;b++)d+=a[b][c][1];if(d)for(b=0;b<e;b++)a[b][c][1]/=d;else for(b=0;b<e;b++)a[b][c][1]=g}for(c=0;c<f;++c)h[c]=0;return h},zero:ke});dg.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[dg.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=qe,e=oe;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Ca(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return pe(a,b)}:Ca(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},dg.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,be(h,function(a){a.r=+k(a.value)}),be(h,ve),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;be(h,function(a){a.r+=l}),be(h,ve),be(h,function(a){a.r-=l})}return ye(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=dg.layout.hierarchy().sort(re),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},_d(a,c)},dg.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(be(m,c),m.parent.m=-m.z,ae(m,d),j)ae(l,f);else{var n=l,o=l,p=l;ae(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);ae(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;g<h;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Ee(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=Ce(g),e=Be(e),g&&e;)i=Be(i),f=Ce(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(De(Fe(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!Ce(f)&&(f.t=g,f.m+=l-k),e&&!Be(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=dg.layout.hierarchy().sort(null).value(null),h=Ae,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},_d(a,g)},dg.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;be(i,function(a){var b=a.children;b&&b.length?(a.x=He(b),a.y=Ge(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Ie(i),l=Je(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return be(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=dg.layout.hierarchy().sort(null).value(null),c=Ae,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},_d(a,b)},dg.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(b<0?0:b),c.area=isNaN(d)||d<=0?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(c<f&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=dg.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Ke,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Ke(b):Le(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Le(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Ke:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},_d(f,h)},dg.random={normal:function(a,b){var c=arguments.length;return c<2&&(b=1),c<1&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=dg.random.normal.apply(dg,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=dg.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}},dg.scale={};var ti={floor:u,ceil:u};dg.scale.linear=function(){return Se([0,1],[0,1],td,!1)};var ui={s:1,g:1,p:1,r:1,e:1};dg.scale.log=function(){return $e(dg.scale.linear().domain([0,1]),10,!0,[1,10])};var vi=dg.format(".0e"),wi={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};dg.scale.pow=function(){return _e(dg.scale.linear(),1,[0,1])},dg.scale.sqrt=function(){return dg.scale.pow().exponent(.5)},dg.scale.ordinal=function(){return bf([],{t:"range",a:[[]]})},dg.scale.category10=function(){return dg.scale.ordinal().range(xi)},dg.scale.category20=function(){return dg.scale.ordinal().range(yi)},dg.scale.category20b=function(){return dg.scale.ordinal().range(zi)},dg.scale.category20c=function(){return dg.scale.ordinal().range(Ai)};var xi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(va),yi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(va),zi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(va),Ai=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(va);dg.scale.quantile=function(){return cf([],[])},dg.scale.quantize=function(){return df(0,1,[0,1])},dg.scale.threshold=function(){return ef([.5],[0,1])},dg.scale.identity=function(){return ff([0,1])},dg.svg={},dg.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Kg,l=h.apply(this,arguments)-Kg,m=Math.abs(l-k),n=k>l?0:1;if(j<a&&(o=j,j=a,a=o),m>=Jg)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===Bi?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=da(q/j*Math.sin(r))),a&&(A=da(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Hg?0:1;if(B&&nf(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Hg?0:1;if(A&&nf(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if((o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=a<j^n?0:1;var H=null==y?[w,x]:null==u?[s,t]:Ic([s,t],[y,z],[u,v],[w,x]),I=s-H[0],J=t-H[1],K=u-H[0],L=v-H[1],M=1/Math.sin(Math.acos((I*K+J*L)/(Math.sqrt(I*I+J*J)*Math.sqrt(K*K+L*L)))/2),N=Math.sqrt(H[0]*H[0]+H[1]*H[1]);if(null!=u){var O=Math.min(o,(j-N)/(M+1)),P=of(null==y?[w,x]:[y,z],[s,t],j,O,n),Q=of([u,v],[w,x],j,O,n);o===O?C.push("M",P[0],"A",O,",",O," 0 0,",p," ",P[1],"A",j,",",j," 0 ",1-n^nf(P[1][0],P[1][1],Q[1][0],Q[1][1]),",",n," ",Q[1],"A",O,",",O," 0 0,",p," ",Q[0]):C.push("M",P[0],"A",O,",",O," 0 1,",p," ",Q[0])}else C.push("M",s,",",t);if(null!=y){var R=Math.min(o,(a-N)/(M-1)),S=of([s,t],[y,z],a,-R,n),T=of([w,x],null==u?[s,t]:[u,v],a,-R,n);o===R?C.push("L",T[0],"A",R,",",R," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^nf(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",R,",",R," 0 0,",p," ",S[0]):C.push("L",T[0],"A",R,",",R," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=hf,d=jf,e=gf,f=Bi,g=kf,h=lf,i=mf;return a.innerRadius=function(b){return arguments.length?(c=Ca(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Ca(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Ca(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==Bi?Bi:Ca(b),a):f},a.startAngle=function(b){return arguments.length?(g=Ca(b),a):g},a.endAngle=function(b){return arguments.length?(h=Ca(b),a):h},a.padAngle=function(b){return arguments.length?(i=Ca(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Kg;return[Math.cos(b)*a,Math.sin(b)*a]},a};var Bi="auto";dg.svg.line=function(){return pf(u)};var Ci=dg.map({linear:qf,"linear-closed":rf,step:sf,"step-before":tf,"step-after":uf,basis:Af,"basis-open":Bf,"basis-closed":Cf,bundle:Df,cardinal:xf,"cardinal-open":vf,"cardinal-closed":wf,monotone:Jf});Ci.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Di=[0,2/3,1/3,0],Ei=[0,1/3,2/3,0],Fi=[0,1/6,2/3,1/6];dg.svg.line.radial=function(){var a=pf(Kf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},tf.reverse=uf,uf.reverse=tf,dg.svg.area=function(){return Lf(u)},dg.svg.area.radial=function(){var a=Lf(Kf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},dg.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Kg,k=j.call(a,e,d)-Kg;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Hg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=tc,g=uc,h=Mf,i=kf,j=lf;return a.radius=function(b){return arguments.length?(h=Ca(b),a):h},a.source=function(b){return arguments.length?(f=Ca(b),a):f},a.target=function(b){return arguments.length?(g=Ca(b),a):g},a.startAngle=function(b){return arguments.length?(i=Ca(b),a):i},a.endAngle=function(b){return arguments.length?(j=Ca(b),a):j},a},dg.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=tc,c=uc,d=Nf;return a.source=function(c){return arguments.length?(b=Ca(c),a):b},a.target=function(b){return arguments.length?(c=Ca(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},dg.svg.diagonal.radial=function(){var a=dg.svg.diagonal(),b=Nf,c=a.projection;return a.projection=function(a){return arguments.length?c(Of(b=a)):b},a},dg.svg.symbol=function(){function a(a,d){return(Gi.get(b.call(this,a,d))||Rf)(c.call(this,a,d))}var b=Qf,c=Pf;return a.type=function(c){return arguments.length?(b=Ca(c),a):b},a.size=function(b){return arguments.length?(c=Ca(b),a):c},a};var Gi=dg.map({circle:Rf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Ii)),c=b*Ii;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Hi),c=b*Hi/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Hi),c=b*Hi/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});dg.svg.symbolTypes=Gi.keys();var Hi=Math.sqrt(3),Ii=Math.tan(30*Lg);yg.transition=function(a){for(var b,c,d=Ji||++Ni,e=Wf(a),f=[],g=Ki||{time:Date.now(),ease:Ad,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&Xf(c,k,e,d,g),b.push(c)}return Tf(f,e,d)},yg.interrupt=function(a){return this.each(null==a?Li:Sf(Wf(a)))};var Ji,Ki,Li=Sf(Wf()),Mi=[],Ni=0;Mi.call=yg.call,Mi.empty=yg.empty,Mi.node=yg.node,Mi.size=yg.size,dg.transition=function(a,b){return a&&a.transition?Ji?a.transition(b):a:dg.selection().transition(a)},dg.transition.prototype=Mi,Mi.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=E(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),Xf(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Tf(g,f,e)},Mi.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=F(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&Xf(e,o,h,g,f),b.push(e)}return Tf(i,h,g)},Mi.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=R(a));for(var f=0,g=this.length;f<g;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;h<i;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d);
}return Tf(e,this.namespace,this.id)},Mi.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):T(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Mi.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Qd:td,h=dg.ns.qualify(a);return Uf(this,"attr."+a,b,h.local?f:e)},Mi.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=dg.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Mi.style=function(a,b,c){function e(){this.style.removeProperty(a)}function f(b){return null==b?e:(b+="",function(){var e,f=d(this).getComputedStyle(this,null).getPropertyValue(a);return f!==b&&(e=td(f,b),function(b){this.style.setProperty(a,e(b),c)})})}var g=arguments.length;if(g<3){if("string"!=typeof a){g<2&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Uf(this,"style."+a,b,f)},Mi.styleTween=function(a,b,c){function e(e,f){var g=b.call(this,e,f,d(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,e)},Mi.text=function(a){return Uf(this,"text",a,Vf)},Mi.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Mi.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=dg.ease.apply(dg,arguments)),T(this,function(d){d[c][b].ease=a}))},Mi.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:T(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Mi.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:T(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Mi.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Ki,f=Ji;try{Ji=c,T(this,function(b,e,f){Ki=b[d][c],a.call(b,b.__data__,e,f)})}finally{Ki=e,Ji=f}}else T(this,function(e){var f=e[d][c];(f.event||(f.event=dg.dispatch("start","end","interrupt"))).on(a,b)});return this},Mi.transition=function(){for(var a,b,c,d,e=this.id,f=++Ni,g=this.namespace,h=[],i=0,j=this.length;i<j;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;k<l;k++)(c=b[k])&&(d=c[g][e],Xf(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Tf(h,g,f)},dg.svg.axis=function(){function a(a){a.each(function(){var a,j=dg.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):u:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Fg),q=dg.transition(o.exit()).style("opacity",Fg).remove(),r=dg.transition(o.order()).style("opacity",1),s=Math.max(e,0)+g,t=Ne(l),v=j.selectAll(".domain").data([0]),w=(v.enter().append("path").attr("class","domain"),dg.transition(v));p.append("line"),p.append("text");var x,y,z,A,B=p.select("line"),C=r.select("line"),D=o.select("text").text(n),E=p.select("text"),F=r.select("text"),G="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=Yf,x="x",z="y",y="x2",A="y2",D.attr("dy",G<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+t[0]+","+G*f+"V0H"+t[1]+"V"+G*f)):(a=Zf,x="y",z="x",y="y2",A="x2",D.attr("dy",".32em").style("text-anchor",G<0?"end":"start"),w.attr("d","M"+G*f+","+t[0]+"H0V"+t[1]+"H"+G*f)),B.attr(A,G*e),E.attr(z,G*s),C.attr(y,0).attr(A,G*e),F.attr(x,0).attr(z,G*s),l.rangeBand){var H=l,I=H.rangeBand()/2;k=l=function(a){return H(a)+I}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=dg.scale.linear(),d=Oi,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Pi?b+"":Oi,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Oi="bottom",Pi={top:1,right:1,bottom:1,left:1};dg.svg.brush=function(){function a(d){d.each(function(){var d=dg.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=d.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),d.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=d.selectAll(".resize").data(p,u);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Qi[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var i,l=dg.transition(d),m=dg.transition(g);j&&(i=Ne(j),m.attr("x",i[0]).attr("width",i[1]-i[0]),c(l)),k&&(i=Ne(k),m.attr("y",i[0]).attr("height",i[1]-i[0]),e(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",l[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",m[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function f(){32==dg.event.keyCode&&(D||(t=null,F[0]-=l[1],F[1]-=m[1],D=2),A())}function p(){32==dg.event.keyCode&&2==D&&(F[0]+=l[1],F[1]+=m[1],D=0,A())}function q(){var a=dg.mouse(v),d=!1;u&&(a[0]+=u[0],a[1]+=u[1]),D||(dg.event.altKey?(t||(t=[(l[0]+l[1])/2,(m[0]+m[1])/2]),F[0]=l[+(a[0]<t[0])],F[1]=m[+(a[1]<t[1])]):t=null),B&&r(a,j,0)&&(c(y),d=!0),C&&r(a,k,1)&&(e(y),d=!0),d&&(b(y),x({type:"brush",mode:D?"move":"resize"}))}function r(a,b,c){var d,e,f=Ne(b),i=f[0],j=f[1],k=F[c],p=c?m:l,q=p[1]-p[0];if(D&&(i-=k,j-=q+k),d=(c?o:n)?Math.max(i,Math.min(j,a[c])):a[c],D?e=(d+=k)+q:(t&&(k=Math.max(i,Math.min(j,2*t[c]-d))),k<d?(e=d,d=k):e=k),p[0]!=d||p[1]!=e)return c?h=null:g=null,p[0]=d,p[1]=e,!0}function s(){q(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),dg.select("body").style("cursor",null),G.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),x({type:"brushend"})}var t,u,v=this,w=dg.select(dg.event.target),x=i.of(v,arguments),y=dg.select(v),z=w.datum(),B=!/^(n|s)$/.test(z)&&j,C=!/^(e|w)$/.test(z)&&k,D=w.classed("extent"),E=Z(v),F=dg.mouse(v),G=dg.select(d(v)).on("keydown.brush",f).on("keyup.brush",p);if(dg.event.changedTouches?G.on("touchmove.brush",q).on("touchend.brush",s):G.on("mousemove.brush",q).on("mouseup.brush",s),y.interrupt().selectAll("*").interrupt(),D)F[0]=l[0]-F[0],F[1]=m[0]-F[1];else if(z){var H=+/w$/.test(z),I=+/^n/.test(z);u=[l[1-H]-F[0],m[1-I]-F[1]],F[0]=l[H],F[1]=m[I]}else dg.event.altKey&&(t=F.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),dg.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),q()}var g,h,i=C(a,"brushstart","brush","brushend"),j=null,k=null,l=[0,0],m=[0,0],n=!0,o=!0,p=Ri[0];return a.event=function(a){a.each(function(){var a=i.of(this,arguments),b={x:l,y:m,i:g,j:h},c=this.__chart__||b;this.__chart__=b,Ji?dg.select(this).transition().each("start.brush",function(){g=c.i,h=c.j,l=c.x,m=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=ud(l,b.x),d=ud(m,b.y);return g=h=null,function(e){l=b.x=c(e),m=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i,h=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(j=b,p=Ri[!j<<1|!k],a):j},a.y=function(b){return arguments.length?(k=b,p=Ri[!j<<1|!k],a):k},a.clamp=function(b){return arguments.length?(j&&k?(n=!!b[0],o=!!b[1]):j?n=!!b:k&&(o=!!b),a):j&&k?[n,o]:j?n:k?o:null},a.extent=function(b){var c,d,e,f,i;return arguments.length?(j&&(c=b[0],d=b[1],k&&(c=c[0],d=d[0]),g=[c,d],j.invert&&(c=j(c),d=j(d)),d<c&&(i=c,c=d,d=i),c==l[0]&&d==l[1]||(l=[c,d])),k&&(e=b[0],f=b[1],j&&(e=e[1],f=f[1]),h=[e,f],k.invert&&(e=k(e),f=k(f)),f<e&&(i=e,e=f,f=i),e==m[0]&&f==m[1]||(m=[e,f])),a):(j&&(g?(c=g[0],d=g[1]):(c=l[0],d=l[1],j.invert&&(c=j.invert(c),d=j.invert(d)),d<c&&(i=c,c=d,d=i))),k&&(h?(e=h[0],f=h[1]):(e=m[0],f=m[1],k.invert&&(e=k.invert(e),f=k.invert(f)),f<e&&(i=e,e=f,f=i))),j&&k?[[c,e],[d,f]]:j?[c,d]:k&&[e,f])},a.clear=function(){return a.empty()||(l=[0,0],m=[0,0],g=h=null),a},a.empty=function(){return!!j&&l[0]==l[1]||!!k&&m[0]==m[1]},dg.rebind(a,i,"on")};var Qi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ri=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Si=jh.format=ph.timeFormat,Ti=Si.utc,Ui=Ti("%Y-%m-%dT%H:%M:%S.%LZ");Si.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?$f:Ui,$f.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},$f.toString=Ui.toString,jh.second=Pa(function(a){return new kh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),jh.seconds=jh.second.range,jh.seconds.utc=jh.second.utc.range,jh.minute=Pa(function(a){return new kh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),jh.minutes=jh.minute.range,jh.minutes.utc=jh.minute.utc.range,jh.hour=Pa(function(a){var b=a.getTimezoneOffset()/60;return new kh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),jh.hours=jh.hour.range,jh.hours.utc=jh.hour.utc.range,jh.month=Pa(function(a){return a=jh.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),jh.months=jh.month.range,jh.months.utc=jh.month.utc.range;var Vi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Wi=[[jh.second,1],[jh.second,5],[jh.second,15],[jh.second,30],[jh.minute,1],[jh.minute,5],[jh.minute,15],[jh.minute,30],[jh.hour,1],[jh.hour,3],[jh.hour,6],[jh.hour,12],[jh.day,1],[jh.day,2],[jh.week,1],[jh.month,1],[jh.month,3],[jh.year,1]],Xi=Si.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Eb]]),Yi={range:function(a,b,c){return dg.range(Math.ceil(a/c)*c,+b,c).map(ag)},floor:u,ceil:u};Wi.year=jh.year,jh.scale=function(){return _f(dg.scale.linear(),Wi,Xi)};var Zi=Wi.map(function(a){return[a[0].utc,a[1]]}),$i=Ti.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Eb]]);Zi.year=jh.year.utc,jh.scale.utc=function(){return _f(dg.scale.linear(),Zi,$i)},dg.text=Da(function(a){return a.responseText}),dg.json=function(a,b){return Ea(a,"application/json",bg,b)},dg.html=function(a,b){return Ea(a,"text/html",cg,b)},dg.xml=Da(function(a){return a.responseXML}),"function"==typeof a&&a.amd?a(dg):"object"==typeof c&&c.exports&&(c.exports=dg),this.d3=dg}()},{}],65:[function(a,b,c){arguments[4][59][0].apply(c,arguments)},{dup:59,"robust-orientation":996,"simplicial-complex":68}],66:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],67:[function(a,b,c){arguments[4][61][0].apply(c,arguments)},{dup:61}],68:[function(a,b,c){arguments[4][62][0].apply(c,arguments)},{"bit-twiddle":66,dup:62,"union-find":67}],69:[function(a,b,c){"use strict";function d(a,b){for(var c=1,d=a.length,e=a[0],f=a[0],g=1;g<d;++g)if(f=e,e=a[g],b(e,f)){if(g===c){c++;continue}a[c++]=e}return a.length=c,a}function e(a){for(var b=1,c=a.length,d=a[0],e=a[0],f=1;f<c;++f,e=d)if(e=d,d=a[f],d!==e){if(f===b){b++;continue}a[b++]=d}return a.length=b,a}function f(a,b,c){return 0===a.length?a:b?(c||a.sort(b),d(a,b)):(c||a.sort(),e(a))}b.exports=f},{}],70:[function(a,b,c){"use strict";function d(a,b){this.point=a,this.index=b}function e(a,b){for(var c=a.point,d=b.point,e=c.length,f=0;f<e;++f){var g=d[f]-c[f];if(g)return g}return 0}function f(a,b,c){if(1===a)return c?[[-1,0]]:[];var d=b.map(function(a,b){return[a[0],b]});d.sort(function(a,b){return a[0]-b[0]});for(var e=new Array(a-1),f=1;f<a;++f){var g=d[f-1],h=d[f];e[f-1]=[g[1],h[1]]}return c&&e.push([-1,e[0][1]],[e[a-1][1],-1]),e}function g(a,b){var c=a.length;if(0===c)return[];var g=a[0].length;if(g<1)return[];if(1===g)return f(c,a,b);for(var j=new Array(c),k=1,l=0;l<c;++l){for(var m=a[l],n=new Array(g+1),o=0,p=0;p<g;++p){var q=m[p];n[p]=q,o+=q*q}n[g]=o,j[l]=new d(n,l),k=Math.max(o,k)}i(j,e),c=j.length;for(var r=new Array(c+g+1),s=new Array(c+g+1),t=(g+1)*(g+1)*k,u=new Array(g+1),l=0;l<=g;++l)u[l]=0;u[g]=t,r[0]=u.slice(),s[0]=-1;for(var l=0;l<=g;++l){var n=u.slice();n[l]=1,r[l+1]=n,s[l+1]=-1}for(var l=0;l<c;++l){var v=j[l];r[l+g+1]=v.point,s[l+g+1]=v.index}var w=h(r,!1);if(w=b?w.filter(function(a){for(var b=0,c=0;c<=g;++c){var d=s[a[c]];if(d<0&&++b>=2)return!1;a[c]=d}return!0}):w.filter(function(a){for(var b=0;b<=g;++b){var c=s[a[b]];if(c<0)return!1;a[b]=c}return!0}),1&g)for(var l=0;l<w.length;++l){var v=w[l],n=v[0];v[0]=v[1],v[1]=n}return w}var h=a("incremental-convex-hull"),i=a("uniq");b.exports=g},{"incremental-convex-hull":65,uniq:69}],71:[function(b,c,d){(function(d,e){(function(){"use strict";function f(a){return"function"==typeof a||"object"==typeof a&&null!==a}function g(a){return"function"==typeof a}function h(a){return"object"==typeof a&&null!==a}function i(a){U=a}function j(a){Y=a}function k(){return function(){d.nextTick(p)}}function l(){return function(){T(p)}}function m(){var a=0,b=new _(p),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function n(){var a=new MessageChannel;return a.port1.onmessage=p,function(){a.port2.postMessage(0)}}function o(){return function(){setTimeout(p,1)}}function p(){for(var a=0;a<X;a+=2){var b=ca[a],c=ca[a+1];b(c),ca[a]=void 0,ca[a+1]=void 0}X=0}function q(){try{var a=b,c=a("vertx");return T=c.runOnLoop||c.runOnContext,l()}catch(d){return o()}}function r(){}function s(){return new TypeError("You cannot resolve a promise with itself")}function t(){return new TypeError("A promises callback cannot return that same promise.")}function u(a){try{return a.then}catch(b){return ga.error=b,ga}}function v(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function w(a,b,c){Y(function(a){var d=!1,e=v(c,b,function(c){d||(d=!0,b!==c?z(a,c):B(a,c))},function(b){d||(d=!0,C(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,C(a,e))},a)}function x(a,b){b._state===ea?B(a,b._result):b._state===fa?C(a,b._result):D(b,void 0,function(b){z(a,b)},function(b){C(a,b)})}function y(a,b){if(b.constructor===a.constructor)x(a,b);else{var c=u(b);c===ga?C(a,ga.error):void 0===c?B(a,b):g(c)?w(a,b,c):B(a,b)}}function z(a,b){a===b?C(a,s()):f(b)?y(a,b):B(a,b)}function A(a){a._onerror&&a._onerror(a._result),E(a)}function B(a,b){a._state===da&&(a._result=b,a._state=ea,0!==a._subscribers.length&&Y(E,a))}function C(a,b){a._state===da&&(a._state=fa,a._result=b,Y(A,a))}function D(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+ea]=c,e[f+fa]=d,0===f&&a._state&&Y(E,a)}function E(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?H(c,d,e,f):e(f);a._subscribers.length=0}}function F(){this.error=null}function G(a,b){try{return a(b)}catch(c){return ha.error=c,ha}}function H(a,b,c,d){var e,f,h,i,j=g(c);if(j){if(e=G(c,d),e===ha?(i=!0,f=e.error,e=null):h=!0,b===e)return void C(b,t())}else e=d,h=!0;b._state!==da||(j&&h?z(b,e):i?C(b,f):a===ea?B(b,e):a===fa&&C(b,e))}function I(a,b){try{b(function(b){z(a,b)},function(b){C(a,b)})}catch(c){C(a,c)}}function J(a,b){var c=this;c._instanceConstructor=a,c.promise=new a(r),c._validateInput(b)?(c._input=b,c.length=b.length,c._remaining=b.length,c._init(),0===c.length?B(c.promise,c._result):(c.length=c.length||0,c._enumerate(),0===c._remaining&&B(c.promise,c._result))):C(c.promise,c._validationError())}function K(a){return new ia(this,a).promise}function L(a){function b(a){z(e,a)}function c(a){C(e,a)}var d=this,e=new d(r);if(!W(a))return C(e,new TypeError("You must pass an array to race.")),e;for(var f=a.length,g=0;e._state===da&&g<f;g++)D(d.resolve(a[g]),void 0,b,c);return e}function M(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(r);return z(c,a),c}function N(a){var b=this,c=new b(r);return C(c,a),c}function O(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Q(a){this._id=na++,this._state=void 0,this._result=void 0,this._subscribers=[],r!==a&&(g(a)||O(),this instanceof Q||P(),I(this,a))}function R(){var a;if("undefined"!=typeof e)a=e;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(b){throw new Error("polyfill failed because global object is unavailable in this environment")}var c=a.Promise;c&&"[object Promise]"===Object.prototype.toString.call(c.resolve())&&!c.cast||(a.Promise=oa)}var S;S=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var T,U,V,W=S,X=0,Y=({}.toString,function(a,b){ca[X]=a,ca[X+1]=b,X+=2,2===X&&(U?U(p):V())}),Z="undefined"!=typeof window?window:void 0,$=Z||{},_=$.MutationObserver||$.WebKitMutationObserver,aa="undefined"!=typeof d&&"[object process]"==={}.toString.call(d),ba="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ca=new Array(1e3);V=aa?k():_?m():ba?n():void 0===Z&&"function"==typeof b?q():o();var da=void 0,ea=1,fa=2,ga=new F,ha=new F;J.prototype._validateInput=function(a){return W(a)},J.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},J.prototype._init=function(){this._result=new Array(this.length)};var ia=J;J.prototype._enumerate=function(){for(var a=this,b=a.length,c=a.promise,d=a._input,e=0;c._state===da&&e<b;e++)a._eachEntry(d[e],e)},J.prototype._eachEntry=function(a,b){var c=this,d=c._instanceConstructor;h(a)?a.constructor===d&&a._state!==da?(a._onerror=null,c._settledAt(a._state,b,a._result)):c._willSettleAt(d.resolve(a),b):(c._remaining--,c._result[b]=a)},J.prototype._settledAt=function(a,b,c){var d=this,e=d.promise;e._state===da&&(d._remaining--,a===fa?C(e,c):d._result[b]=c),0===d._remaining&&B(e,d._result)},J.prototype._willSettleAt=function(a,b){var c=this;D(a,void 0,function(a){c._settledAt(ea,b,a)},function(a){c._settledAt(fa,b,a)})};var ja=K,ka=L,la=M,ma=N,na=0,oa=Q;Q.all=ja,Q.race=ka,Q.resolve=la,Q.reject=ma,Q._setScheduler=i,Q._setAsap=j,Q._asap=Y,Q.prototype={constructor:Q,then:function(a,b){var c=this,d=c._state;if(d===ea&&!a||d===fa&&!b)return this;var e=new this.constructor(r),f=c._result;if(d){var g=arguments[d-1];Y(function(){H(d,e,g,f)})}else D(c,e,a,b);return e},"catch":function(a){return this.then(null,a)}};var pa=R,qa={Promise:oa,polyfill:pa};"function"==typeof a&&a.amd?a(function(){return qa}):"undefined"!=typeof c&&c.exports?c.exports=qa:"undefined"!=typeof this&&(this.ES6Promise=qa),pa()}).call(this)}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:53}],72:[function(a,b,c){"use strict";function d(a){for(var b,c=a.length,d=0;d<c;d++)if(b=a.charCodeAt(d),(b<9||b>13)&&32!==b&&133!==b&&160!==b&&5760!==b&&6158!==b&&(b<8192||b>8205)&&8232!==b&&8233!==b&&8239!==b&&8287!==b&&8288!==b&&12288!==b&&65279!==b)return!1;return!0}b.exports=function(a){var b=typeof a;if("string"===b){var c=a;if(a=+a,0===a&&d(c))return!1}else if("number"!==b)return!1;return a-a<1}},{}],73:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.shader=b,this.buffer=c,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.numPoints=0,this.color=[0,0,0,1]}function e(a,b){var c=f(a.gl,i.vertex,i.fragment),e=g(a.gl),h=new d(a,c,e);return h.update(b),a.addObject(h),h}var f=a("gl-shader"),g=a("gl-buffer"),h=a("typedarray-pool"),i=a("./lib/shaders");b.exports=e;var j=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]],k=d.prototype;k.draw=function(){var a=[1,0,0,0,1,0,0,0,1],b=[1,1];return function(){var c=this.plot,d=this.shader,e=this.buffer,f=this.bounds,g=this.numPoints,h=(this.color,c.gl),i=c.dataBox,k=c.viewBox,l=c.pixelRatio,m=f[2]-f[0],n=f[3]-f[1],o=i[2]-i[0],p=i[3]-i[1];a[0]=2*m/o,a[4]=2*n/p,a[6]=2*(f[0]-i[0])/o-1,a[7]=2*(f[1]-i[1])/p-1;var q=k[2]-k[0],r=k[3]-k[1];b[0]=2*l/q,b[1]=2*l/r,e.bind(),d.bind(),d.uniforms.viewTransform=a,d.uniforms.pixelScale=b,d.uniforms.color=this.color,d.attributes.position.pointer(h.FLOAT,!1,16,0),d.attributes.pixelOffset.pointer(h.FLOAT,!1,16,8),h.drawArrays(h.TRIANGLES,0,g*j.length)}}(),k.drawPick=function(a){return a},k.pick=function(a,b){return null},k.update=function(a){a=a||{};var b=a.positions||[],c=a.errors||[],d=1;"lineWidth"in a&&(d=+a.lineWidth);var e=5;"capSize"in a&&(e=+a.capSize),this.color=(a.color||[0,0,0,1]).slice();for(var f=this.bounds=[1/0,1/0,-(1/0),-(1/0)],g=this.numPoints=b.length>>1,i=0;i<g;++i){var k=b[2*i],l=b[2*i+1];f[0]=Math.min(k,f[0]),f[1]=Math.min(l,f[1]),f[2]=Math.max(k,f[2]),f[3]=Math.max(l,f[3])}f[2]===f[0]&&(f[2]+=1),f[3]===f[1]&&(f[3]+=1);for(var m=1/(f[2]-f[0]),n=1/(f[3]-f[1]),o=f[0],p=f[1],q=h.mallocFloat32(g*j.length*4),r=0,i=0;i<g;++i)for(var k=b[2*i],l=b[2*i+1],s=c[4*i],t=c[4*i+1],u=c[4*i+2],v=c[4*i+3],w=0;w<j.length;++w){var x=j[w],y=x[0],z=x[1];y<0?y*=s:y>0&&(y*=t),z<0?z*=u:z>0&&(z*=v),q[r++]=m*(k-o+y),q[r++]=n*(l-p+z),q[r++]=d*x[2]+(e+d)*x[4],q[r++]=d*x[3]+(e+d)*x[5]}this.buffer.update(q),h.free(q)},k.dispose=function(){this.plot.removeObject(this),this.shader.dispose(),this.buffer.dispose()}},{"./lib/shaders":74,"gl-buffer":75,"gl-shader":76,"typedarray-pool":102}],74:[function(a,b,c){b.exports={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute vec2 pixelOffset;\n\nuniform mat3 viewTransform;\nuniform vec2 pixelScale;\n\nvoid main() {\n  vec3 scrPosition = viewTransform * vec3(position, 1);\n  gl_Position = vec4(\n    scrPosition.xy + scrPosition.z * pixelScale * pixelOffset,\n    0,\n    scrPosition.z);\n}\n",fragment:"#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"}},{}],75:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.gl=a,this.type=b,this.handle=c,this.length=d,this.usage=e}function e(a,b,c,d,e,f){var g=e.length*e.BYTES_PER_ELEMENT;if(f<0)return a.bufferData(b,e,d),g;if(g+f>c)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return a.bufferSubData(b,f,e),c}function f(a,b){for(var c=i.malloc(a.length,b),d=a.length,e=0;e<d;++e)c[e]=a[e];return c}function g(a,b){for(var c=1,d=b.length-1;d>=0;--d){if(b[d]!==c)return!1;c*=a[d]}return!0}function h(a,b,c,e){if(c=c||a.ARRAY_BUFFER,e=e||a.DYNAMIC_DRAW,c!==a.ARRAY_BUFFER&&c!==a.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(e!==a.DYNAMIC_DRAW&&e!==a.STATIC_DRAW&&e!==a.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var f=a.createBuffer(),g=new d(a,c,f,0,e);return g.update(b),g}var i=a("typedarray-pool"),j=a("ndarray-ops"),k=a("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],m=d.prototype;m.bind=function(){this.gl.bindBuffer(this.type,this.handle)},m.unbind=function(){this.gl.bindBuffer(this.type,null)},m.dispose=function(){this.gl.deleteBuffer(this.handle)},m.update=function(a,b){if("number"!=typeof b&&(b=-1),this.bind(),"object"==typeof a&&"undefined"!=typeof a.shape){var c=a.dtype;if(l.indexOf(c)<0&&(c="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var d=gl.getExtension("OES_element_index_uint");c=d&&"uint16"!==c?"uint32":"uint16"}if(c===a.dtype&&g(a.shape,a.stride))0===a.offset&&a.data.length===a.shape[0]?this.length=e(this.gl,this.type,this.length,this.usage,a.data,b):this.length=e(this.gl,this.type,this.length,this.usage,a.data.subarray(a.offset,a.shape[0]),b);else{var h=i.malloc(a.size,c),m=k(h,a.shape);j.assign(m,a),b<0?this.length=e(this.gl,this.type,this.length,this.usage,h,b):this.length=e(this.gl,this.type,this.length,this.usage,h.subarray(0,a.size),b),i.free(h)}}else if(Array.isArray(a)){var n;n=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(a,"uint16"):f(a,"float32"),b<0?this.length=e(this.gl,this.type,this.length,this.usage,n,b):this.length=e(this.gl,this.type,this.length,this.usage,n.subarray(0,a.length),b),i.free(n)}else if("object"==typeof a&&"number"==typeof a.length)this.length=e(this.gl,this.type,this.length,this.usage,a,b);else{if("number"!=typeof a&&void 0!==a)throw new Error("gl-buffer: Invalid data type");if(b>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");a=0|a,a<=0&&(a=1),this.gl.bufferData(this.type,0|a,this.usage),this.length=a}},b.exports=h},{ndarray:987,"ndarray-ops":982,"typedarray-pool":102}],76:[function(a,b,c){"use strict";function d(a){this.gl=a,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function e(a,b){return a.name<b.name?-1:1}function f(a,b,c,e,f){var g=new d(a);return g.update(b,c,e,f),g}var g=a("./lib/create-uniforms"),h=a("./lib/create-attributes"),i=a("./lib/reflect"),j=a("./lib/shader-cache"),k=a("./lib/runtime-reflect"),l=a("./lib/GLError"),m=d.prototype;m.bind=function(){this.program||this._relink(),this.gl.useProgram(this.program)},m.dispose=function(){this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},m.update=function(a,b,c,d){function f(){n.program=j.program(o,n._vref,n._fref,u,v);for(var a=0;a<c.length;++a)C[a]=o.getUniformLocation(n.program,c[a].name)}if(!b||1===arguments.length){var m=a;a=m.vertex,b=m.fragment,c=m.uniforms,d=m.attributes}var n=this,o=n.gl,p=n._vref;n._vref=j.shader(o,o.VERTEX_SHADER,a),p&&p.dispose(),n.vertShader=n._vref.shader;var q=this._fref;if(n._fref=j.shader(o,o.FRAGMENT_SHADER,b),q&&q.dispose(),n.fragShader=n._fref.shader,!c||!d){var r=o.createProgram();if(o.attachShader(r,n.fragShader),o.attachShader(r,n.vertShader),o.linkProgram(r),!o.getProgramParameter(r,o.LINK_STATUS)){var s=o.getProgramInfoLog(r);throw new l(s,"Error linking program:"+s)}c=c||k.uniforms(o,r),d=d||k.attributes(o,r),o.deleteProgram(r)}d=d.slice(),d.sort(e);for(var t=[],u=[],v=[],w=0;w<d.length;++w){var x=d[w];if(x.type.indexOf("mat")>=0){for(var y=0|x.type.charAt(x.type.length-1),z=new Array(y),A=0;A<y;++A)z[A]=v.length,u.push(x.name+"["+A+"]"),"number"==typeof x.location?v.push(x.location+A):Array.isArray(x.location)&&x.location.length===y&&"number"==typeof x.location[A]?v.push(0|x.location[A]):v.push(-1);t.push({name:x.name,type:x.type,locations:z})}else t.push({name:x.name,type:x.type,locations:[v.length]}),u.push(x.name),"number"==typeof x.location?v.push(0|x.location):v.push(-1)}for(var B=0,w=0;w<v.length;++w)if(v[w]<0){for(;v.indexOf(B)>=0;)B+=1;v[w]=B}var C=new Array(c.length);f(),n._relink=f,n.types={uniforms:i(c),attributes:i(d)},n.attributes=h(o,n,t,v),Object.defineProperty(n,"uniforms",g(o,n,c,C))},b.exports=f},{"./lib/GLError":77,"./lib/create-attributes":78,"./lib/create-uniforms":79,"./lib/reflect":80,"./lib/runtime-reflect":81,"./lib/shader-cache":82}],77:[function(a,b,c){function d(a,b,c){this.shortMessage=b||"",this.longMessage=c||"",this.rawError=a||"",this.message="gl-shader: "+(b||a||"")+(c?"\n"+c:""),this.stack=(new Error).stack}d.prototype=new Error,d.prototype.name="GLError",d.prototype.constructor=d,b.exports=d},{}],78:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this._gl=a,this._wrapper=b,this._index=c,this._locations=d,this._dimension=e,this._constFunc=f}function e(a,b,c,e,f,g,h){for(var i=["gl","v"],j=[],k=0;k<f;++k)i.push("x"+k),j.push("x"+k);i.push("if(x0.length===void 0){return gl.vertexAttrib"+f+"f(v,"+j.join()+")}else{return gl.vertexAttrib"+f+"fv(v,x0)}");var l=Function.apply(null,i),m=new d(a,b,c,e,f,l);Object.defineProperty(g,h,{set:function(b){return a.disableVertexAttribArray(e[c]),l(a,e[c],b),b},get:function(){return m},enumerable:!0})}function f(a,b,c,d,f,g,h){for(var i=new Array(f),j=new Array(f),k=0;k<f;++k)e(a,b,c[k],d,f,i,k),j[k]=i[k];Object.defineProperty(i,"location",{set:function(a){if(Array.isArray(a))for(var b=0;b<f;++b)j[b].location=a[b];else for(var b=0;b<f;++b)j[b].location=a+b;return a},get:function(){for(var a=new Array(f),b=0;b<f;++b)a[b]=d[c[b]];return a},enumerable:!0}),i.pointer=function(b,e,g,h){b=b||a.FLOAT,e=!!e,g=g||f*f,h=h||0;for(var i=0;i<f;++i){var j=d[c[i]];a.vertexAttribPointer(j,f,b,e,g,h+i*f),a.enableVertexAttribArray(j)}};var l=new Array(f),m=a["vertexAttrib"+f+"fv"];Object.defineProperty(g,h,{set:function(b){for(var e=0;e<f;++e){var g=d[c[e]];if(a.disableVertexAttribArray(g),Array.isArray(b[0]))m.call(a,g,b[e]);else{for(var h=0;h<f;++h)l[h]=b[f*e+h];m.call(a,g,l)}}return b},get:function(){return i},enumerable:!0})}function g(a,b,c,d){for(var g={},i=0,j=c.length;i<j;++i){var k=c[i],l=k.name,m=k.type,n=k.locations;switch(m){case"bool":case"int":case"float":e(a,b,n[0],d,1,g,l);break;default:if(m.indexOf("vec")>=0){var o=m.charCodeAt(m.length-1)-48;if(o<2||o>4)throw new h("","Invalid data type for attribute "+l+": "+m);
e(a,b,n[0],d,o,g,l)}else{if(!(m.indexOf("mat")>=0))throw new h("","Unknown data type for attribute "+l+": "+m);var o=m.charCodeAt(m.length-1)-48;if(o<2||o>4)throw new h("","Invalid data type for attribute "+l+": "+m);f(a,b,n,d,o,g,l)}}}return g}b.exports=g;var h=a("./GLError"),i=d.prototype;i.pointer=function(a,b,c,d){var e=this,f=e._gl,g=e._locations[e._index];f.vertexAttribPointer(g,e._dimension,a||f.FLOAT,!!b,c||0,d||0),f.enableVertexAttribArray(g)},i.set=function(a,b,c,d){return this._constFunc(this._locations[this._index],a,b,c,d)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(a){return a!==this._locations[this._index]&&(this._locations[this._index]=0|a,this._wrapper.program=null),0|a}})},{"./GLError":77}],79:[function(a,b,c){"use strict";function d(a){var b=new Function("y","return function(){return y}");return b(a)}function e(a,b){for(var c=new Array(a),d=0;d<a;++d)c[d]=b;return c}function f(a,b,c,f){function i(c){var d=new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+c+"])}");return d(a,b,f)}function j(a,b,c){switch(c){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+b+"],obj"+a+")";case"float":return"gl.uniform1f(locations["+b+"],obj"+a+")";default:var d=c.indexOf("vec");if(!(0<=d&&d<=1&&c.length===4+d)){if(0===c.indexOf("mat")&&4===c.length){var e=c.charCodeAt(c.length-1)-48;if(e<2||e>4)throw new h("","Invalid uniform dimension type for matrix "+name+": "+c);return"gl.uniformMatrix"+e+"fv(locations["+b+"],false,obj"+a+")"}throw new h("","Unknown uniform data type for "+name+": "+c)}var e=c.charCodeAt(c.length-1)-48;if(e<2||e>4)throw new h("","Invalid data type");switch(c.charAt(0)){case"b":case"i":return"gl.uniform"+e+"iv(locations["+b+"],obj"+a+")";case"v":return"gl.uniform"+e+"fv(locations["+b+"],obj"+a+")";default:throw new h("","Unrecognized data type for vector "+name+": "+c)}}}function k(a,b){if("object"!=typeof b)return[[a,b]];var c=[];for(var d in b){var e=b[d],f=a;f+=parseInt(d)+""===d?"["+d+"]":"."+d,"object"==typeof e?c.push.apply(c,k(f,e)):c.push([f,e])}return c}function l(b){for(var d=["return function updateProperty(obj){"],e=k("",b),g=0;g<e.length;++g){var h=e[g],i=h[0],l=h[1];f[l]&&d.push(j(i,l,c[l].type))}d.push("return obj}");var m=new Function("gl","locations",d.join("\n"));return m(a,f)}function m(a){switch(a){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var b=a.indexOf("vec");if(0<=b&&b<=1&&a.length===4+b){var c=a.charCodeAt(a.length-1)-48;if(c<2||c>4)throw new h("","Invalid data type");return"b"===a.charAt(0)?e(c,!1):e(c,0)}if(0===a.indexOf("mat")&&4===a.length){var c=a.charCodeAt(a.length-1)-48;if(c<2||c>4)throw new h("","Invalid uniform dimension type for matrix "+name+": "+a);return e(c*c,0)}throw new h("","Unknown uniform data type for "+name+": "+a)}}function n(a,b,e){if("object"==typeof e){var g=o(e);Object.defineProperty(a,b,{get:d(g),set:l(e),enumerable:!0,configurable:!1})}else f[e]?Object.defineProperty(a,b,{get:i(e),set:l(e),enumerable:!0,configurable:!1}):a[b]=m(c[e].type)}function o(a){var b;if(Array.isArray(a)){b=new Array(a.length);for(var c=0;c<a.length;++c)n(b,c,a[c])}else{b={};for(var d in a)n(b,d,a[d])}return b}var p=g(c,!0);return{get:d(o(p)),set:l(p),enumerable:!0,configurable:!0}}var g=a("./reflect"),h=a("./GLError");b.exports=f},{"./GLError":77,"./reflect":80}],80:[function(a,b,c){"use strict";function d(a,b){for(var c={},d=0;d<a.length;++d)for(var e=a[d].name,f=e.split("."),g=c,h=0;h<f.length;++h){var i=f[h].split("[");if(i.length>1){i[0]in g||(g[i[0]]=[]),g=g[i[0]];for(var j=1;j<i.length;++j){var k=parseInt(i[j]);j<i.length-1||h<f.length-1?(k in g||(j<i.length-1?g[k]=[]:g[k]={}),g=g[k]):b?g[k]=d:g[k]=a[d].type}}else h<f.length-1?(i[0]in g||(g[i[0]]={}),g=g[i[0]]):b?g[i[0]]=d:g[i[0]]=a[d].type}return c}b.exports=d},{}],81:[function(a,b,c){"use strict";function d(a,b){if(!h){var c=Object.keys(g);h={};for(var d=0;d<c.length;++d){var e=c[d];h[a[e]]=g[e]}}return h[b]}function e(a,b){for(var c=a.getProgramParameter(b,a.ACTIVE_UNIFORMS),e=[],f=0;f<c;++f){var g=a.getActiveUniform(b,f);if(g){var h=d(a,g.type);if(g.size>1)for(var i=0;i<g.size;++i)e.push({name:g.name.replace("[0]","["+i+"]"),type:h});else e.push({name:g.name,type:h})}}return e}function f(a,b){for(var c=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),e=[],f=0;f<c;++f){var g=a.getActiveAttrib(b,f);g&&e.push({name:g.name,type:d(a,g.type)})}return e}c.uniforms=e,c.attributes=f;var g={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},h=null},{}],82:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){this.id=a,this.src=b,this.type=c,this.shader=d,this.count=f,this.programs=[],this.cache=g}function e(a){this.gl=a,this.shaders=[{},{}],this.programs={}}function f(a,b,c){var d=a.createShader(b);if(a.shaderSource(d,c),a.compileShader(d),!a.getShaderParameter(d,a.COMPILE_STATUS)){var e=a.getShaderInfoLog(d);try{var f=l(e,c,b)}catch(g){throw console.warn("Failed to format compiler error: "+g),new k(e,"Error compiling shader:\n"+e)}throw new k(e,f["short"],f["long"])}return d}function g(a,b,c,d,e){var f=a.createProgram();a.attachShader(f,b),a.attachShader(f,c);for(var g=0;g<d.length;++g)a.bindAttribLocation(f,e[g],d[g]);if(a.linkProgram(f),!a.getProgramParameter(f,a.LINK_STATUS)){var h=a.getProgramInfoLog(f);throw new k(h,"Error linking program: "+h)}return f}function h(a){var b=n.get(a);return b||(b=new e(a),n.set(a,b)),b}function i(a,b,c){return h(a).getShaderReference(b,c)}function j(a,b,c,d,e){return h(a).getProgram(b,c,d,e)}c.shader=i,c.program=j;var k=a("./GLError"),l=a("gl-format-compiler-error"),m="undefined"==typeof WeakMap?a("weakmap-shim"):WeakMap,n=new m,o=0;d.prototype.dispose=function(){if(0===--this.count){for(var a=this.cache,b=a.gl,c=this.programs,d=0,e=c.length;d<e;++d){var f=a.programs[c[d]];f&&(delete a.programs[d],b.deleteProgram(f))}b.deleteShader(this.shader),delete a.shaders[this.type===b.FRAGMENT_SHADER|0][this.src]}};var p=e.prototype;p.getShaderReference=function(a,b){var c=this.gl,e=this.shaders[a===c.FRAGMENT_SHADER|0],g=e[b];if(g&&c.isShader(g.shader))g.count+=1;else{var h=f(c,a,b);g=e[b]=new d((o++),b,a,h,[],1,this)}return g},p.getProgram=function(a,b,c,d){var e=[a.id,b.id,c.join(":"),d.join(":")].join("@"),f=this.programs[e];return f&&this.gl.isProgram(f)||(this.programs[e]=f=g(this.gl,a.shader,b.shader,c,d),a.programs.push(e),b.programs.push(e)),f}},{"./GLError":77,"gl-format-compiler-error":83,"weakmap-shim":99}],83:[function(a,b,c){function d(a,b,c){"use strict";var d=g(b)||"of unknown name (see npm glsl-shader-name)",i="unknown type";void 0!==c&&(i=c===f.FRAGMENT_SHADER?"fragment":"vertex");for(var j=e("Error compiling %s shader %s:\n",i,d),k=e("%s%s",j,a),l=a.split("\n"),m={},n=0;n<l.length;n++){var o=l[n];if(""!==o){var p=parseInt(o.split(":")[2]);if(isNaN(p))throw new Error(e("Could not parse error: %s",o));m[p]=o}}for(var q=h(b).split("\n"),n=0;n<q.length;n++)if(m[n+3]||m[n+2]||m[n+1]){var r=q[n];if(j+=r+"\n",m[n+1]){var s=m[n+1];s=s.substr(s.split(":",3).join(":").length+1).trim(),j+=e("^^^ %s\n\n",s)}}return{"long":j.trim(),"short":k.trim()}}var e=a("sprintf-js").sprintf,f=a("gl-constants/lookup"),g=a("glsl-shader-name"),h=a("add-line-numbers");b.exports=d},{"add-line-numbers":84,"gl-constants/lookup":88,"glsl-shader-name":89,"sprintf-js":96}],84:[function(a,b,c){function d(a,b,c){b="number"==typeof b?b:1,c=c||": ";var d=a.split(/\r?\n/),f=String(d.length+b-1).length;return d.map(function(a,d){var g=d+b,h=String(g).length,i=e(g,f-h);return i+c+a}).join("\n")}var e=a("pad-left");b.exports=d},{"pad-left":85}],85:[function(a,b,c){"use strict";var d=a("repeat-string");b.exports=function(a,b,c){return c="undefined"!=typeof c?c+"":" ",d(c,b)+a}},{"repeat-string":86}],86:[function(a,b,c){"use strict";function d(a,b){if("string"!=typeof a)throw new TypeError("repeat-string expects a string.");if(1===b)return a;if(2===b)return a+a;var c=a.length*b;for(e===a&&"undefined"!=typeof e||(e=a,f="");c>f.length&&b>0&&(1&b&&(f+=a),b>>=1);)a+=a;return f.substr(0,c)}b.exports=d;var e,f=""},{}],87:[function(a,b,c){b.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],88:[function(a,b,c){var d=a("./1.0/numbers");b.exports=function(a){return d[a]}},{"./1.0/numbers":87}],89:[function(a,b,c){function d(a){for(var b=Array.isArray(a)?a:e(a),c=0;c<b.length;c++){var d=b[c];if("preprocessor"===d.type){var g=d.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(g&&g[2]){var h=g[1],i=g[2];return(h?f(i):i).trim()}}}}var e=a("glsl-tokenizer"),f=a("atob-lite");b.exports=d},{"atob-lite":90,"glsl-tokenizer":95}],90:[function(a,b,c){b.exports=function(a){return atob(a)}},{}],91:[function(a,b,c){function d(){function a(a){a.length&&N.push({type:v[L],data:a,position:Q,line:O,column:P})}function b(a){J=0,T+=a,I=T.length;for(var b;G=T[J],J<I;){switch(b=J,L){case j:J=z();break;case k:J=y();break;case l:J=x();break;case m:J=A();break;case n:J=D();break;case u:J=C();break;case o:J=E();break;case i:J=F();break;case s:J=w();break;case h:J=d()}if(b!==J)switch(T[b]){case"\n":P=0,++O;break;default:++P}}return K+=J,T=T.slice(J),N}function c(b){return M.length&&a(M.join("")),L=t,a("(eof)"),N}function d(){return M=M.length?[]:M,"/"===H&&"*"===G?(Q=K+J-1,L=j,H=G,J+1):"/"===H&&"/"===G?(Q=K+J-1,L=k,H=G,J+1):"#"===G?(L=l,Q=K+J,J):/\s/.test(G)?(L=s,Q=K+J,J):(R=/\d/.test(G),S=/[^\w_]/.test(G),Q=K+J,L=R?n:S?m:i,J)}function w(){return/[^\s]/g.test(G)?(a(M.join("")),L=h,J):(M.push(G),H=G,J+1)}function x(){return"\n"===G&&"\\"!==H?(a(M.join("")),L=h,J):(M.push(G),H=G,J+1)}function y(){return x()}function z(){return"/"===G&&"*"===H?(M.push(G),a(M.join("")),L=h,J+1):(M.push(G),H=G,J+1)}function A(){if("."===H&&/\d/.test(G))return L=o,J;if("/"===H&&"*"===G)return L=j,J;if("/"===H&&"/"===G)return L=k,J;if("."===G&&M.length){for(;B(M););return L=o,J}if(";"===G||")"===G||"("===G){if(M.length)for(;B(M););return a(G),L=h,J+1}var b=2===M.length&&"="!==G;if(/[\w_\d\s]/.test(G)||b){for(;B(M););return L=h,J}return M.push(G),H=G,J+1}function B(b){for(var c,d,e=0;;){if(c=f.indexOf(b.slice(0,b.length+e).join("")),d=f[c],c===-1){if(e--+b.length>0)continue;d=b.slice(0,1).join("")}return a(d),Q+=d.length,M=M.slice(d.length),M.length}}function C(){return/[^a-fA-F0-9]/.test(G)?(a(M.join("")),L=h,J):(M.push(G),H=G,J+1)}function D(){return"."===G?(M.push(G),L=o,H=G,J+1):/[eE]/.test(G)?(M.push(G),L=o,H=G,J+1):"x"===G&&1===M.length&&"0"===M[0]?(L=u,M.push(G),H=G,J+1):/[^\d]/.test(G)?(a(M.join("")),L=h,J):(M.push(G),H=G,J+1)}function E(){return"f"===G&&(M.push(G),H=G,J+=1),/[eE]/.test(G)?(M.push(G),H=G,J+1):/[^\d]/.test(G)?(a(M.join("")),L=h,J):(M.push(G),H=G,J+1)}function F(){if(/[^\d\w_]/.test(G)){var b=M.join("");return L=e.indexOf(b)>-1?r:g.indexOf(b)>-1?q:p,a(M.join("")),L=h,J}return M.push(G),H=G,J+1}var G,H,I,J=0,K=0,L=h,M=[],N=[],O=1,P=0,Q=0,R=!1,S=!1,T="";return function(a){return N=[],null!==a?b(a):c()}}b.exports=d;var e=a("./lib/literals"),f=a("./lib/operators"),g=a("./lib/builtins"),h=999,i=9999,j=0,k=1,l=2,m=3,n=4,o=5,p=6,q=7,r=8,s=9,t=10,u=11,v=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":92,"./lib/literals":93,"./lib/operators":94}],92:[function(a,b,c){b.exports=["gl_Position","gl_PointSize","gl_ClipVertex","gl_FragCoord","gl_FrontFacing","gl_FragColor","gl_FragData","gl_FragDepth","gl_Color","gl_SecondaryColor","gl_Normal","gl_Vertex","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_FogCoord","gl_MaxLights","gl_MaxClipPlanes","gl_MaxTextureUnits","gl_MaxTextureCoords","gl_MaxVertexAttribs","gl_MaxVertexUniformComponents","gl_MaxVaryingFloats","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformComponents","gl_MaxDrawBuffers","gl_ModelViewMatrix","gl_ProjectionMatrix","gl_ModelViewProjectionMatrix","gl_TextureMatrix","gl_NormalMatrix","gl_ModelViewMatrixInverse","gl_ProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverse","gl_TextureMatrixInverse","gl_ModelViewMatrixTranspose","gl_ProjectionMatrixTranspose","gl_ModelViewProjectionMatrixTranspose","gl_TextureMatrixTranspose","gl_ModelViewMatrixInverseTranspose","gl_ProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixInverseTranspose","gl_TextureMatrixInverseTranspose","gl_NormalScale","gl_DepthRangeParameters","gl_DepthRange","gl_ClipPlane","gl_PointParameters","gl_Point","gl_MaterialParameters","gl_FrontMaterial","gl_BackMaterial","gl_LightSourceParameters","gl_LightSource","gl_LightModelParameters","gl_LightModel","gl_LightModelProducts","gl_FrontLightModelProduct","gl_BackLightModelProduct","gl_LightProducts","gl_FrontLightProduct","gl_BackLightProduct","gl_FogParameters","gl_Fog","gl_TextureEnvColor","gl_EyePlaneS","gl_EyePlaneT","gl_EyePlaneR","gl_EyePlaneQ","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_ObjectPlaneR","gl_ObjectPlaneQ","gl_FrontColor","gl_BackColor","gl_FrontSecondaryColor","gl_BackSecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_Color","gl_SecondaryColor","gl_TexCoord","gl_FogFragCoord","gl_PointCoord","radians","degrees","sin","cos","tan","asin","acos","atan","pow","exp","log","exp2","log2","sqrt","inversesqrt","abs","sign","floor","ceil","fract","mod","min","max","clamp","mix","step","smoothstep","length","distance","dot","cross","normalize","faceforward","reflect","refract","matrixCompMult","lessThan","lessThanEqual","greaterThan","greaterThanEqual","equal","notEqual","any","all","not","texture2D","texture2DProj","texture2DLod","texture2DProjLod","textureCube","textureCubeLod","dFdx","dFdy"]},{}],93:[function(a,b,c){b.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],94:[function(a,b,c){b.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],95:[function(a,b,c){function d(a){var b=e(),c=[];return c=c.concat(b(a)),c=c.concat(b(null))}var e=a("./index");b.exports=d},{"./index":91}],96:[function(b,c,d){!function(b){function c(){var a=arguments[0],b=c.cache;return b[a]&&b.hasOwnProperty(a)||(b[a]=c.parse(a)),c.format.call(null,b[a],arguments)}function e(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function f(a,b){return Array(b+1).join(a)}var g={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};c.format=function(a,b){var d,h,i,j,k,l,m,n=1,o=a.length,p="",q=[],r=!0,s="";for(h=0;h<o;h++)if(p=e(a[h]),"string"===p)q[q.length]=a[h];else if("array"===p){if(j=a[h],j[2])for(d=b[n],i=0;i<j[2].length;i++){if(!d.hasOwnProperty(j[2][i]))throw new Error(c("[sprintf] property '%s' does not exist",j[2][i]));d=d[j[2][i]]}else d=j[1]?b[j[1]]:b[n++];if("function"==e(d)&&(d=d()),g.not_string.test(j[8])&&g.not_json.test(j[8])&&"number"!=e(d)&&isNaN(d))throw new TypeError(c("[sprintf] expecting number but found %s",e(d)));switch(g.number.test(j[8])&&(r=d>=0),j[8]){case"b":d=d.toString(2);break;case"c":d=String.fromCharCode(d);break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,j[6]?parseInt(j[6]):0);break;case"e":d=j[7]?d.toExponential(j[7]):d.toExponential();break;case"f":d=j[7]?parseFloat(d).toFixed(j[7]):parseFloat(d);break;case"g":d=j[7]?parseFloat(d).toPrecision(j[7]):parseFloat(d);break;case"o":d=d.toString(8);break;case"s":d=(d=String(d))&&j[7]?d.substring(0,j[7]):d;break;case"u":d>>>=0;break;case"x":d=d.toString(16);break;case"X":d=d.toString(16).toUpperCase()}g.json.test(j[8])?q[q.length]=d:(!g.number.test(j[8])||r&&!j[3]?s="":(s=r?"+":"-",d=d.toString().replace(g.sign,"")),l=j[4]?"0"===j[4]?"0":j[4].charAt(1):" ",m=j[6]-(s+d).length,k=j[6]&&m>0?f(l,m):"",q[q.length]=j[5]?s+d+k:"0"===l?s+k+d:k+s+d)}return q.join("")},c.cache={},c.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=g.text.exec(b)))d[d.length]=c[0];else if(null!==(c=g.modulo.exec(b)))d[d.length]="%";else{if(null===(c=g.placeholder.exec(b)))throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){e|=1;var f=[],h=c[2],i=[];if(null===(i=g.key.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(f[f.length]=i[1];""!==(h=h.substring(i[0].length));)if(null!==(i=g.key_access.exec(h)))f[f.length]=i[1];else{if(null===(i=g.index_access.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");f[f.length]=i[1]}c[2]=f}else e|=2;if(3===e)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d[d.length]=c}b=b.substring(c[0].length)}return d};var h=function(a,b,d){return d=(b||[]).slice(0),d.splice(0,0,a),c.apply(null,d)};"undefined"!=typeof d?(d.sprintf=c,d.vsprintf=h):(b.sprintf=c,b.vsprintf=h,"function"==typeof a&&a.amd&&a(function(){return{sprintf:c,vsprintf:h}}))}("undefined"==typeof window?this:window)},{}],97:[function(a,b,c){function d(){var a={};return function(b){if(("object"!=typeof b||null===b)&&"function"!=typeof b)throw new Error("Weakmap-shim: Key must be object");var c=b.valueOf(a);return c&&c.identity===a?c:e(b,a)}}var e=a("./hidden-store.js");b.exports=d},{"./hidden-store.js":98}],98:[function(a,b,c){function d(a,b){var c={identity:b},d=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(a){return a!==b?d.apply(this,arguments):c},writable:!0}),c}b.exports=d},{}],99:[function(a,b,c){function d(){var a=e();return{get:function(b,c){var d=a(b);return d.hasOwnProperty("value")?d.value:c},set:function(b,c){a(b).value=c},has:function(b){return"value"in a(b)},"delete":function(b){return delete a(b).value}}}var e=a("./create-store.js");b.exports=d},{"./create-store.js":97}],100:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],101:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],102:[function(a,b,c){(function(b,d){"use strict";function e(a){if(a){var b=a.length||a.byteLength,c=s.log2(b);w[c].push(a)}}function f(a){e(a.buffer)}function g(a){var a=s.nextPow2(a),b=s.log2(a),c=w[b];return c.length>0?c.pop():new ArrayBuffer(a)}function h(a){return new Uint8Array(g(a),0,a)}function i(a){return new Uint16Array(g(2*a),0,a)}function j(a){return new Uint32Array(g(4*a),0,a)}function k(a){return new Int8Array(g(a),0,a)}function l(a){return new Int16Array(g(2*a),0,a)}function m(a){return new Int32Array(g(4*a),0,a)}function n(a){return new Float32Array(g(4*a),0,a)}function o(a){return new Float64Array(g(8*a),0,a)}function p(a){return u?new Uint8ClampedArray(g(a),0,a):h(a)}function q(a){return new DataView(g(a),0,a)}function r(a){a=s.nextPow2(a);var b=s.log2(a),c=x[b];return c.length>0?c.pop():new d(a)}var s=a("bit-twiddle"),t=a("dup");b.__TYPEDARRAY_POOL||(b.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var u="undefined"!=typeof Uint8ClampedArray,v=b.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=t([32,0])),v.BUFFER||(v.BUFFER=t([32,0]));var w=v.DATA,x=v.BUFFER;c.free=function(a){if(d.isBuffer(a))x[s.log2(a.length)].push(a);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(a)&&(a=a.buffer),!a)return;var b=a.length||a.byteLength,c=0|s.log2(b);w[c].push(a)}},c.freeUint8=c.freeUint16=c.freeUint32=c.freeInt8=c.freeInt16=c.freeInt32=c.freeFloat32=c.freeFloat=c.freeFloat64=c.freeDouble=c.freeUint8Clamped=c.freeDataView=f,c.freeArrayBuffer=e,c.freeBuffer=function(a){x[s.log2(a.length)].push(a)},c.malloc=function(a,b){if(void 0===b||"arraybuffer"===b)return g(a);switch(b){case"uint8":return h(a);case"uint16":return i(a);case"uint32":return j(a);case"int8":return k(a);case"int16":return l(a);case"int32":return m(a);case"float":case"float32":return n(a);case"double":case"float64":return o(a);case"uint8_clamped":return p(a);case"buffer":return r(a);case"data":case"dataview":return q(a);default:return null}return null},c.mallocArrayBuffer=g,c.mallocUint8=h,c.mallocUint16=i,c.mallocUint32=j,c.mallocInt8=k,c.mallocInt16=l,c.mallocInt32=m,c.mallocFloat32=c.mallocFloat=n,c.mallocFloat64=c.mallocDouble=o,c.mallocUint8Clamped=p,c.mallocDataView=q,c.mallocBuffer=r,c.clearCache=function(){for(var a=0;a<32;++a)v.UINT8[a].length=0,v.UINT16[a].length=0,v.UINT32[a].length=0,v.INT8[a].length=0,v.INT16[a].length=0,v.INT32[a].length=0,v.FLOAT[a].length=0,v.DOUBLE[a].length=0,v.UINT8C[a].length=0,w[a].length=0,x[a].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"bit-twiddle":100,buffer:48,dup:101}],103:[function(a,b,c){"use strict";function d(a,b,c,d){this.gl=a,this.shader=d,this.buffer=b,this.vao=c,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1}function e(a,b){for(var c=0;c<3;++c)a[0][c]=Math.min(a[0][c],b[c]),a[1][c]=Math.max(a[1][c],b[c])}function f(a,b,c,d){for(var e=m[d],f=0;f<e.length;++f){var g=e[f];a.push(b[0],b[1],b[2],c[0],c[1],c[2],c[3],g[0],g[1],g[2])}return e.length}function g(a){var b=a.gl,c=h(b),e=i(b,[{buffer:c,type:b.FLOAT,size:3,offset:0,stride:40},{buffer:c,type:b.FLOAT,size:4,offset:12,stride:40},{buffer:c,type:b.FLOAT,size:3,offset:28,stride:40}]),f=j(b);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.offset.location=2;var g=new d(b,c,e,f);return g.update(a),g}b.exports=g;var h=a("gl-buffer"),i=a("gl-vao"),j=a("./shaders/index"),k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l=d.prototype;l.isOpaque=function(){return this.opacity>=1},l.isTransparent=function(){return this.opacity<1},l.drawTransparent=l.draw=function(a){var b=this.gl,c=this.shader.uniforms;this.shader.bind();var d=c.view=a.view||k,e=c.projection=a.projection||k;c.model=a.model||k,c.clipBounds=this.clipBounds,c.opacity=this.opacity;var f=d[12],g=d[13],h=d[14],i=d[15],j=this.pixelRatio*(e[3]*f+e[7]*g+e[11]*h+e[15]*i)/b.drawingBufferHeight;this.vao.bind();for(var l=0;l<3;++l)b.lineWidth(this.lineWidth[l]),c.capSize=this.capSize[l]*j,b.drawArrays(b.LINES,this.lineOffset[l],this.lineCount[l]);this.vao.unbind()};var m=function(){for(var a=new Array(3),b=0;b<3;++b){for(var c=[],d=1;d<=2;++d)for(var e=-1;e<=1;e+=2){var f=(d+b)%3,g=[0,0,0];g[f]=e,c.push(g)}a[b]=c}return a}();l.update=function(a){a=a||{},"lineWidth"in a&&(this.lineWidth=a.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in a&&(this.capSize=a.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),"opacity"in a&&(this.opacity=a.opacity);var b=a.color||[[0,0,0],[0,0,0],[0,0,0]],c=a.position,d=a.error;if(Array.isArray(b[0])||(b=[b,b,b]),c&&d){var g=[],h=c.length,i=0;this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.lineCount=[0,0,0];for(var j=0;j<3;++j){this.lineOffset[j]=i;a:for(var k=0;k<h;++k){for(var l=c[k],m=0;m<3;++m)if(isNaN(l[m])||!isFinite(l[m]))continue a;var n=d[k],o=b[j];if(Array.isArray(o[0])&&(o=b[k]),3===o.length&&(o=[o[0],o[1],o[2],1]),!isNaN(n[0][j])&&!isNaN(n[1][j])){if(n[0][j]<0){var p=l.slice();p[j]+=n[0][j],g.push(l[0],l[1],l[2],o[0],o[1],o[2],o[3],0,0,0,p[0],p[1],p[2],o[0],o[1],o[2],o[3],0,0,0),e(this.bounds,p),i+=2+f(g,p,o,j)}if(n[1][j]>0){var p=l.slice();p[j]+=n[1][j],g.push(l[0],l[1],l[2],o[0],o[1],o[2],o[3],0,0,0,p[0],p[1],p[2],o[0],o[1],o[2],o[3],0,0,0),e(this.bounds,p),i+=2+f(g,p,o,j)}}}this.lineCount[j]=i-this.lineOffset[j]}this.buffer.update(g)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":136,"gl-buffer":104,"gl-vao":135
}],104:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":107}],105:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],106:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],107:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":105,buffer:48,dup:102}],108:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{"./lib/GLError":109,"./lib/create-attributes":110,"./lib/create-uniforms":111,"./lib/reflect":112,"./lib/runtime-reflect":113,"./lib/shader-cache":114,dup:76}],109:[function(a,b,c){arguments[4][77][0].apply(c,arguments)},{dup:77}],110:[function(a,b,c){arguments[4][78][0].apply(c,arguments)},{"./GLError":109,dup:78}],111:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{"./GLError":109,"./reflect":112,dup:79}],112:[function(a,b,c){arguments[4][80][0].apply(c,arguments)},{dup:80}],113:[function(a,b,c){arguments[4][81][0].apply(c,arguments)},{dup:81}],114:[function(a,b,c){arguments[4][82][0].apply(c,arguments)},{"./GLError":109,dup:82,"gl-format-compiler-error":115,"weakmap-shim":131}],115:[function(a,b,c){arguments[4][83][0].apply(c,arguments)},{"add-line-numbers":116,dup:83,"gl-constants/lookup":120,"glsl-shader-name":121,"sprintf-js":128}],116:[function(a,b,c){arguments[4][84][0].apply(c,arguments)},{dup:84,"pad-left":117}],117:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85,"repeat-string":118}],118:[function(a,b,c){arguments[4][86][0].apply(c,arguments)},{dup:86}],119:[function(a,b,c){arguments[4][87][0].apply(c,arguments)},{dup:87}],120:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{"./1.0/numbers":119,dup:88}],121:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{"atob-lite":122,dup:89,"glsl-tokenizer":127}],122:[function(a,b,c){arguments[4][90][0].apply(c,arguments)},{dup:90}],123:[function(a,b,c){arguments[4][91][0].apply(c,arguments)},{"./lib/builtins":124,"./lib/literals":125,"./lib/operators":126,dup:91}],124:[function(a,b,c){arguments[4][92][0].apply(c,arguments)},{dup:92}],125:[function(a,b,c){arguments[4][93][0].apply(c,arguments)},{dup:93}],126:[function(a,b,c){arguments[4][94][0].apply(c,arguments)},{dup:94}],127:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{"./index":123,dup:95}],128:[function(a,b,c){arguments[4][96][0].apply(c,arguments)},{dup:96}],129:[function(a,b,c){arguments[4][97][0].apply(c,arguments)},{"./hidden-store.js":130,dup:97}],130:[function(a,b,c){arguments[4][98][0].apply(c,arguments)},{dup:98}],131:[function(a,b,c){arguments[4][99][0].apply(c,arguments)},{"./create-store.js":129,dup:99}],132:[function(a,b,c){"use strict";function d(a,b,c){b?b.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var d=0|a.getParameter(a.MAX_VERTEX_ATTRIBS);if(c){if(c.length>d)throw new Error("gl-vao: Too many vertex attributes");for(var e=0;e<c.length;++e){var f=c[e];if(f.buffer){var g=f.buffer,h=f.size||4,i=f.type||a.FLOAT,j=!!f.normalized,k=f.stride||0,l=f.offset||0;g.bind(),a.enableVertexAttribArray(e),a.vertexAttribPointer(e,h,i,j,k,l)}else{if("number"==typeof f)a.vertexAttrib1f(e,f);else if(1===f.length)a.vertexAttrib1f(e,f[0]);else if(2===f.length)a.vertexAttrib2f(e,f[0],f[1]);else if(3===f.length)a.vertexAttrib3f(e,f[0],f[1],f[2]);else{if(4!==f.length)throw new Error("gl-vao: Invalid vertex attribute");a.vertexAttrib4f(e,f[0],f[1],f[2],f[3])}a.disableVertexAttribArray(e)}}for(;e<d;++e)a.disableVertexAttribArray(e)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var e=0;e<d;++e)a.disableVertexAttribArray(e)}}b.exports=d},{}],133:[function(a,b,c){"use strict";function d(a){this.gl=a,this._elements=null,this._attributes=null,this._elementsType=a.UNSIGNED_SHORT}function e(a){return new d(a)}var f=a("./do-bind.js");d.prototype.bind=function(){f(this.gl,this._elements,this._attributes)},d.prototype.update=function(a,b,c){this._elements=b,this._attributes=a,this._elementsType=c||this.gl.UNSIGNED_SHORT},d.prototype.dispose=function(){},d.prototype.unbind=function(){},d.prototype.draw=function(a,b,c){c=c||0;var d=this.gl;this._elements?d.drawElements(a,b,this._elementsType,c):d.drawArrays(a,c,b)},b.exports=e},{"./do-bind.js":132}],134:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this.location=a,this.dimension=b,this.a=c,this.b=d,this.c=e,this.d=f}function e(a,b,c){this.gl=a,this._ext=b,this.handle=c,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}function f(a,b){return new e(a,b,b.createVertexArrayOES())}var g=a("./do-bind.js");d.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},e.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},e.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},e.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},e.prototype.update=function(a,b,c){if(this.bind(),g(this.gl,b,a),this.unbind(),this._attribs.length=0,a)for(var e=0;e<a.length;++e){var f=a[e];"number"==typeof f?this._attribs.push(new d(e,1,f)):Array.isArray(f)&&this._attribs.push(new d(e,f.length,f[0],f[1],f[2],f[3]))}this._useElements=!!b,this._elementsType=c||this.gl.UNSIGNED_SHORT},e.prototype.draw=function(a,b,c){c=c||0;var d=this.gl;this._useElements?d.drawElements(a,b,this._elementsType,c):d.drawArrays(a,c,b)},b.exports=f},{"./do-bind.js":132}],135:[function(a,b,c){"use strict";function d(a,b,c,d){var g,h=a.getExtension("OES_vertex_array_object");return g=h?e(a,h):f(a),g.update(b,c,d),g}var e=a("./lib/vao-native.js"),f=a("./lib/vao-emulated.js");b.exports=d},{"./lib/vao-emulated.js":133,"./lib/vao-native.js":134}],136:[function(a,b,c){"use strict";var d=a("gl-shader"),e="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}",f="#define GLSLIFY 1\nprecision mediump float;\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(fragPosition, clipBounds[0])) || any(greaterThan(fragPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = opacity * fragColor;\n}";b.exports=function(a){return d(a,e,f,null,[{name:"position",type:"vec3"},{name:"offset",type:"vec3"},{name:"color",type:"vec4"}])}},{"gl-shader":108}],137:[function(a,b,c){c.lineVertex="#define GLSLIFY 1\nprecision mediump float;\n\nfloat inverse_1_0(float m) {\n  return 1.0 / m;\n}\n\nmat2 inverse_1_0(mat2 m) {\n  return mat2(m[1][1],-m[0][1],\n             -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\n\nmat3 inverse_1_0(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n              b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n              b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse_1_0(mat4 m) {\n  float\n      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n      a11 * b11 - a12 * b10 + a13 * b09,\n      a02 * b10 - a01 * b11 - a03 * b09,\n      a31 * b05 - a32 * b04 + a33 * b03,\n      a22 * b04 - a21 * b05 - a23 * b03,\n      a12 * b08 - a10 * b11 - a13 * b07,\n      a00 * b11 - a02 * b08 + a03 * b07,\n      a32 * b02 - a30 * b05 - a33 * b01,\n      a20 * b05 - a22 * b02 + a23 * b01,\n      a10 * b10 - a11 * b08 + a13 * b06,\n      a01 * b08 - a00 * b10 - a03 * b06,\n      a30 * b04 - a31 * b02 + a33 * b00,\n      a21 * b02 - a20 * b04 - a23 * b00,\n      a11 * b07 - a10 * b09 - a12 * b06,\n      a00 * b09 - a01 * b07 + a02 * b06,\n      a31 * b01 - a30 * b03 - a32 * b00,\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n\n\nattribute vec2 a, d;\n\nuniform mat3 matrix;\nuniform vec2 screenShape;\nuniform float width;\n\nvarying vec2 direction;\n\nvoid main() {\n  vec2 dir = (matrix * vec3(d, 0)).xy;\n  vec3 base = matrix * vec3(a, 1);\n  vec2 n = 0.5 * width *\n    normalize(screenShape.yx * vec2(dir.y, -dir.x)) / screenShape.xy;\n  vec2 tangent = normalize(screenShape.xy * dir);\n  if(dir.x < 0.0 || (dir.x == 0.0 && dir.y < 0.0)) {\n    direction = -tangent;\n  } else {\n    direction = tangent;\n  }\n  gl_Position = vec4(base.xy/base.z + n, 0, 1);\n}\n",c.lineFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\nuniform vec2 screenShape;\nuniform sampler2D dashPattern;\nuniform float dashLength;\n\nvarying vec2 direction;\n\nvoid main() {\n  float t = fract(dot(direction, gl_FragCoord.xy) / dashLength);\n  vec4 pcolor = color * texture2D(dashPattern, vec2(t, 0.0)).r;\n  gl_FragColor = vec4(pcolor.rgb * pcolor.a, pcolor.a);\n}\n",c.mitreVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 p;\n\nuniform mat3  matrix;\nuniform vec2 screenShape;\nuniform float radius;\n\nvoid main() {\n  vec3 pp = matrix * vec3(p, 1);\n  gl_Position  = vec4(pp.xy, 0, pp.z);\n  gl_PointSize = radius;\n}\n",c.mitreFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n  if(length(gl_PointCoord.xy - 0.5) > 0.25) {\n    discard;\n  }\n  gl_FragColor = vec4(color.rgb, color.a);\n}\n",c.pickVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 a, d;\nattribute vec4 pick0, pick1;\n\nuniform mat3 matrix;\nuniform vec2 screenShape;\nuniform float width;\n\nvarying vec4 pickA, pickB;\n\nfloat inverse_1_0(float m) {\n  return 1.0 / m;\n}\n\nmat2 inverse_1_0(mat2 m) {\n  return mat2(m[1][1],-m[0][1],\n             -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);\n}\n\nmat3 inverse_1_0(mat3 m) {\n  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n  float b01 = a22 * a11 - a12 * a21;\n  float b11 = -a22 * a10 + a12 * a20;\n  float b21 = a21 * a10 - a11 * a20;\n\n  float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n              b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n              b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nmat4 inverse_1_0(mat4 m) {\n  float\n      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n      a11 * b11 - a12 * b10 + a13 * b09,\n      a02 * b10 - a01 * b11 - a03 * b09,\n      a31 * b05 - a32 * b04 + a33 * b03,\n      a22 * b04 - a21 * b05 - a23 * b03,\n      a12 * b08 - a10 * b11 - a13 * b07,\n      a00 * b11 - a02 * b08 + a03 * b07,\n      a32 * b02 - a30 * b05 - a33 * b01,\n      a20 * b05 - a22 * b02 + a23 * b01,\n      a10 * b10 - a11 * b08 + a13 * b06,\n      a01 * b08 - a00 * b10 - a03 * b06,\n      a30 * b04 - a31 * b02 + a33 * b00,\n      a21 * b02 - a20 * b04 - a23 * b00,\n      a11 * b07 - a10 * b09 - a12 * b06,\n      a00 * b09 - a01 * b07 + a02 * b06,\n      a31 * b01 - a30 * b03 - a32 * b00,\n      a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n\n\nvoid main() {\n  vec3 base = matrix * vec3(a, 1);\n  vec2 n = width *\n    normalize(screenShape.yx * vec2(d.y, -d.x)) / screenShape.xy;\n  gl_Position = vec4(base.xy/base.z + n, 0, 1);\n  pickA = pick0;\n  pickB = pick1;\n}\n",c.pickFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 pickOffset;\n\nvarying vec4 pickA, pickB;\n\nvoid main() {\n  vec4 fragId = vec4(pickA.xyz, 0.0);\n  if(pickB.w > pickA.w) {\n    fragId.xyz = pickB.xyz;\n  }\n\n  fragId += pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  gl_FragColor = fragId / 255.0;\n}\n",c.fillVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 a, d;\n\nuniform mat3 matrix;\nuniform vec2 projectAxis;\nuniform float projectValue;\nuniform float depth;\n\nvoid main() {\n  vec3 base = matrix * vec3(a, 1);\n  vec2 p = base.xy / base.z;\n  if(d.y < 0.0 || (d.y == 0.0 && d.x < 0.0)) {\n    if(dot(p, projectAxis) < projectValue) {\n      p = p * (1.0 - abs(projectAxis)) + projectAxis * projectValue;\n    }\n  }\n  gl_Position = vec4(p, depth, 1);\n}\n",c.fillFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"},{}],138:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){this.plot=a,this.dashPattern=b,this.lineBuffer=c,this.pickBuffer=d,this.lineShader=e,this.mitreShader=f,this.fillShader=g,this.pickShader=h,this.usingDashes=!1,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.width=1,this.color=[0,0,1,1],this.fill=[!1,!1,!1,!1],this.fillColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.data=null,this.numPoints=0,this.vertCount=0,this.pickOffset=0,this.lodBuffer=[]}function e(a){return a.map(function(a){return a.slice()})}function f(a,b){var c=a.gl,e=h(c),f=h(c),j=i(c,[1,1]),k=g(c,l.lineVertex,l.lineFragment),m=g(c,l.mitreVertex,l.mitreFragment),n=g(c,l.fillVertex,l.fillFragment),o=g(c,l.pickVertex,l.pickFragment),p=new d(a,j,e,f,k,m,n,o);return a.addObject(p),p.update(b),p}b.exports=f;var g=a("gl-shader"),h=a("gl-buffer"),i=a("gl-texture2d"),j=a("ndarray"),k=a("typedarray-pool"),l=a("./lib/shaders"),m=d.prototype;m.draw=function(){var a=[1,0,0,0,1,0,0,0,1],b=[0,0],c=[1,0],d=[-1,0],e=[0,1],f=[0,-1];return function(){var g=this.plot,h=this.color,i=this.width,j=(this.numPoints,this.bounds),k=this.vertCount,l=g.gl,m=g.viewBox,n=g.dataBox,o=g.pixelRatio,p=j[2]-j[0],q=j[3]-j[1],r=n[2]-n[0],s=n[3]-n[1],t=m[2]-m[0],u=m[3]-m[1];a[0]=2*p/r,a[4]=2*q/s,a[6]=2*(j[0]-n[0])/r-1,a[7]=2*(j[1]-n[1])/s-1,b[0]=t,b[1]=u;var v=this.lineBuffer;v.bind();var w=this.fill;if(w[0]||w[1]||w[2]||w[3]){var x=this.fillShader;x.bind();var y=x.uniforms;y.matrix=a,y.depth=g.nextDepthValue();var z=x.attributes;z.a.pointer(l.FLOAT,!1,16,0),z.d.pointer(l.FLOAT,!1,16,8),l.depthMask(!0),l.enable(l.DEPTH_TEST);var A=this.fillColor;w[0]&&(y.color=A[0],y.projectAxis=d,y.projectValue=1,l.drawArrays(l.TRIANGLES,0,k)),w[1]&&(y.color=A[1],y.projectAxis=f,y.projectValue=1,l.drawArrays(l.TRIANGLES,0,k)),w[2]&&(y.color=A[2],y.projectAxis=c,y.projectValue=1,l.drawArrays(l.TRIANGLES,0,k)),w[3]&&(y.color=A[3],y.projectAxis=e,y.projectValue=1,l.drawArrays(l.TRIANGLES,0,k)),l.depthMask(!1),l.disable(l.DEPTH_TEST)}var B=this.lineShader;B.bind();var C=B.uniforms;C.matrix=a,C.color=h,C.width=i*o,C.screenShape=b,C.dashPattern=this.dashPattern.bind(),C.dashLength=this.dashLength*o;var D=B.attributes;if(D.a.pointer(l.FLOAT,!1,16,0),D.d.pointer(l.FLOAT,!1,16,8),l.drawArrays(l.TRIANGLES,0,k),i>2&&!this.usingDashes){var E=this.mitreShader;E.bind();var F=E.uniforms;F.matrix=a,F.color=h,F.screenShape=b,F.radius=i*o,E.attributes.p.pointer(l.FLOAT,!1,48,0),l.drawArrays(l.POINTS,0,k/3|0)}}}(),m.drawPick=function(){var a=[1,0,0,0,1,0,0,0,1],b=[0,0],c=[0,0,0,0];return function(d){var e=this.plot,f=this.pickShader,g=this.lineBuffer,h=this.pickBuffer,i=this.width,j=this.numPoints,k=this.bounds,l=this.vertCount,m=e.gl,n=e.viewBox,o=e.dataBox,p=e.pickPixelRatio,q=k[2]-k[0],r=k[3]-k[1],s=o[2]-o[0],t=o[3]-o[1],u=n[2]-n[0],v=n[3]-n[1];this.pickOffset=d,a[0]=2*q/s,a[4]=2*r/t,a[6]=2*(k[0]-o[0])/s-1,a[7]=2*(k[1]-o[1])/t-1,b[0]=u,b[1]=v,c[0]=255&d,c[1]=d>>>8&255,c[2]=d>>>16&255,c[3]=d>>>24,f.bind();var w=f.uniforms;w.matrix=a,w.width=i*p,w.pickOffset=c,w.screenShape=b;var x=f.attributes;return g.bind(),x.a.pointer(m.FLOAT,!1,16,0),x.d.pointer(m.FLOAT,!1,16,8),h.bind(),x.pick0.pointer(m.UNSIGNED_BYTE,!1,8,0),x.pick1.pointer(m.UNSIGNED_BYTE,!1,8,4),m.drawArrays(m.TRIANGLES,0,l),d+j}}(),m.pick=function(a,b,c){var d=this.pickOffset,e=this.numPoints;if(c<d||c>=d+e)return null;var f=c-d,g=this.data;return{object:this,pointId:f,dataCoord:[g[2*f],g[2*f+1]]}},m.update=function(a){a=a||{};var b=this.plot.gl;this.color=(a.color||[0,0,1,1]).slice(),this.width=+(a.width||1),this.fill=(a.fill||[!1,!1,!1,!1]).slice(),this.fillColor=e(a.fillColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);for(var c=a.dashes||[1],d=0,f=0;f<c.length;++f)d+=c[f];for(var g=k.mallocUint8(d),h=0,l=255,f=0;f<c.length;++f){for(var m=0;m<c[f];++m)g[h++]=l;l^=255}this.dashPattern.dispose(),this.usingDashes=c.length>1,this.dashPattern=i(b,j(g,[d,1,4],[1,0,0])),this.dashPattern.minFilter=b.NEAREST,this.dashPattern.magFilter=b.NEAREST,this.dashLength=d,k.free(g);var n=a.positions;this.data=n;var o=this.bounds;o[0]=o[1]=1/0,o[2]=o[3]=-(1/0);var p=this.numPoints=n.length>>>1;if(0!==p){for(var f=0;f<p;++f){var q=n[2*f],r=n[2*f+1];o[0]=Math.min(o[0],q),o[1]=Math.min(o[1],r),o[2]=Math.max(o[2],q),o[3]=Math.max(o[3],r)}o[0]===o[2]&&(o[2]+=1),o[3]===o[1]&&(o[3]+=1);var s=k.mallocFloat32(24*(p-1)),t=k.mallocUint32(12*(p-1)),u=s.length,v=t.length,h=p;for(this.vertCount=6*(p-1);h>1;){var w=--h,q=n[2*h],r=n[2*h+1];q=(q-o[0])/(o[2]-o[0]),r=(r-o[1])/(o[3]-o[1]);var x=w-1,y=n[2*x],z=n[2*x+1];y=(y-o[0])/(o[2]-o[0]),z=(z-o[1])/(o[3]-o[1]);var A=y-q,B=z-r,C=w|1<<24,D=w-1,E=w,F=w-1|1<<24;s[--u]=-B,s[--u]=-A,s[--u]=r,s[--u]=q,t[--v]=C,t[--v]=D,s[--u]=B,s[--u]=A,s[--u]=z,s[--u]=y,t[--v]=E,t[--v]=F,s[--u]=-B,s[--u]=-A,s[--u]=z,s[--u]=y,t[--v]=E,t[--v]=F,s[--u]=B,s[--u]=A,s[--u]=z,s[--u]=y,t[--v]=E,t[--v]=F,s[--u]=-B,s[--u]=-A,s[--u]=r,s[--u]=q,t[--v]=C,t[--v]=D,s[--u]=B,s[--u]=A,s[--u]=r,s[--u]=q,t[--v]=C,t[--v]=D}this.lineBuffer.update(s),this.pickBuffer.update(t),k.free(s),k.free(t)}},m.dispose=function(){this.plot.removeObject(this),this.lineBuffer.dispose(),this.pickBuffer.dispose(),this.lineShader.dispose(),this.mitreShader.dispose(),this.fillShader.dispose(),this.pickShader.dispose(),this.dashPattern.dispose()}},{"./lib/shaders":137,"gl-buffer":139,"gl-shader":140,"gl-texture2d":164,ndarray:987,"typedarray-pool":167}],139:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":167}],140:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{"./lib/GLError":141,"./lib/create-attributes":142,"./lib/create-uniforms":143,"./lib/reflect":144,"./lib/runtime-reflect":145,"./lib/shader-cache":146,dup:76}],141:[function(a,b,c){arguments[4][77][0].apply(c,arguments)},{dup:77}],142:[function(a,b,c){arguments[4][78][0].apply(c,arguments)},{"./GLError":141,dup:78}],143:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{"./GLError":141,"./reflect":144,dup:79}],144:[function(a,b,c){arguments[4][80][0].apply(c,arguments)},{dup:80}],145:[function(a,b,c){arguments[4][81][0].apply(c,arguments)},{dup:81}],146:[function(a,b,c){arguments[4][82][0].apply(c,arguments)},{"./GLError":141,dup:82,"gl-format-compiler-error":147,"weakmap-shim":163}],147:[function(a,b,c){arguments[4][83][0].apply(c,arguments)},{"add-line-numbers":148,dup:83,"gl-constants/lookup":152,"glsl-shader-name":153,"sprintf-js":160}],148:[function(a,b,c){arguments[4][84][0].apply(c,arguments)},{dup:84,"pad-left":149}],149:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85,"repeat-string":150}],150:[function(a,b,c){arguments[4][86][0].apply(c,arguments)},{dup:86}],151:[function(a,b,c){arguments[4][87][0].apply(c,arguments)},{dup:87}],152:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{"./1.0/numbers":151,dup:88}],153:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{"atob-lite":154,dup:89,"glsl-tokenizer":159}],154:[function(a,b,c){arguments[4][90][0].apply(c,arguments)},{dup:90}],155:[function(a,b,c){arguments[4][91][0].apply(c,arguments)},{"./lib/builtins":156,"./lib/literals":157,"./lib/operators":158,dup:91}],156:[function(a,b,c){arguments[4][92][0].apply(c,arguments)},{dup:92}],157:[function(a,b,c){arguments[4][93][0].apply(c,arguments)},{dup:93}],158:[function(a,b,c){arguments[4][94][0].apply(c,arguments)},{dup:94}],159:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{"./index":155,dup:95}],160:[function(a,b,c){arguments[4][96][0].apply(c,arguments)},{dup:96}],161:[function(a,b,c){arguments[4][97][0].apply(c,arguments)},{"./hidden-store.js":162,dup:97}],162:[function(a,b,c){arguments[4][98][0].apply(c,arguments)},{dup:98}],163:[function(a,b,c){arguments[4][99][0].apply(c,arguments)},{"./create-store.js":161,dup:99}],164:[function(a,b,c){"use strict";function d(a){q=[a.LINEAR,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_NEAREST],r=[a.NEAREST,a.LINEAR,a.NEAREST_MIPMAP_NEAREST,a.NEAREST_MIPMAP_LINEAR,a.LINEAR_MIPMAP_NEAREST,a.LINEAR_MIPMAP_LINEAR],s=[a.REPEAT,a.CLAMP_TO_EDGE,a.MIRRORED_REPEAT]}function e(a,b,c){var d=a.gl,e=d.getParameter(d.MAX_TEXTURE_SIZE);if(b<0||b>e||c<0||c>e)throw new Error("gl-texture2d: Invalid texture size");return a._shape=[b,c],a.bind(),d.texImage2D(d.TEXTURE_2D,0,a.format,b,c,0,a.format,a.type,null),a._mipLevels=[0],a}function f(a,b,c,d,e,f){this.gl=a,this.handle=b,this.format=e,this.type=f,this._shape=[c,d],this._mipLevels=[0],this._magFilter=a.NEAREST,this._minFilter=a.NEAREST,this._wrapS=a.CLAMP_TO_EDGE,this._wrapT=a.CLAMP_TO_EDGE,this._anisoSamples=1;var g=this,h=[this._wrapS,this._wrapT];Object.defineProperties(h,[{get:function(){return g._wrapS},set:function(a){return g.wrapS=a}},{get:function(){return g._wrapT},set:function(a){return g.wrapT=a}}]),this._wrapVector=h;var i=[this._shape[0],this._shape[1]];Object.defineProperties(i,[{get:function(){return g._shape[0]},set:function(a){return g.width=a}},{get:function(){return g._shape[1]},set:function(a){return g.height=a}}]),this._shapeVector=i}function g(a,b){return 3===a.length?1===b[2]&&b[1]===a[0]*a[2]&&b[0]===a[2]:1===b[0]&&b[1]===a[0]}function h(a,b,c,d,e,f,h,i){var j=i.dtype,k=i.shape.slice();if(k.length<2||k.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var l=0,m=0,q=g(k,i.stride.slice());"float32"===j?l=a.FLOAT:"float64"===j?(l=a.FLOAT,q=!1,j="float32"):"uint8"===j?l=a.UNSIGNED_BYTE:(l=a.UNSIGNED_BYTE,q=!1,j="uint8");var r=1;if(2===k.length)m=a.LUMINANCE,k=[k[0],k[1],1],i=n(i.data,k,[i.stride[0],i.stride[1],1],i.offset);else{if(3!==k.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===k[2])m=a.ALPHA;else if(2===k[2])m=a.LUMINANCE_ALPHA;else if(3===k[2])m=a.RGB;else{if(4!==k[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");m=a.RGBA}r=k[2]}if(m!==a.LUMINANCE&&m!==a.ALPHA||e!==a.LUMINANCE&&e!==a.ALPHA||(m=e),m!==e)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var s=i.size,u=h.indexOf(d)<0;if(u&&h.push(d),l===f&&q)0===i.offset&&i.data.length===s?u?a.texImage2D(a.TEXTURE_2D,d,e,k[0],k[1],0,e,f,i.data):a.texSubImage2D(a.TEXTURE_2D,d,b,c,k[0],k[1],e,f,i.data):u?a.texImage2D(a.TEXTURE_2D,d,e,k[0],k[1],0,e,f,i.data.subarray(i.offset,i.offset+s)):a.texSubImage2D(a.TEXTURE_2D,d,b,c,k[0],k[1],e,f,i.data.subarray(i.offset,i.offset+s));else{var v;v=f===a.FLOAT?p.mallocFloat32(s):p.mallocUint8(s);var w=n(v,k,[k[2],k[2]*k[0],1]);l===a.FLOAT&&f===a.UNSIGNED_BYTE?t(w,i):o.assign(w,i),u?a.texImage2D(a.TEXTURE_2D,d,e,k[0],k[1],0,e,f,v.subarray(0,s)):a.texSubImage2D(a.TEXTURE_2D,d,b,c,k[0],k[1],e,f,v.subarray(0,s)),f===a.FLOAT?p.freeFloat32(v):p.freeUint8(v)}}function i(a){var b=a.createTexture();return a.bindTexture(a.TEXTURE_2D,b),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),b}function j(a,b,c,d,e){var g=a.getParameter(a.MAX_TEXTURE_SIZE);if(b<0||b>g||c<0||c>g)throw new Error("gl-texture2d: Invalid texture shape");if(e===a.FLOAT&&!a.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var h=i(a);return a.texImage2D(a.TEXTURE_2D,0,d,b,c,0,d,e,null),new f(a,h,b,c,d,e)}function k(a,b,c,d){var e=i(a);return a.texImage2D(a.TEXTURE_2D,0,c,c,d,b),new f(a,e,0|b.width,0|b.height,c,d)}function l(a,b){var c=b.dtype,d=b.shape.slice(),e=a.getParameter(a.MAX_TEXTURE_SIZE);if(d[0]<0||d[0]>e||d[1]<0||d[1]>e)throw new Error("gl-texture2d: Invalid texture size");var h=g(d,b.stride.slice()),j=0;"float32"===c?j=a.FLOAT:"float64"===c?(j=a.FLOAT,h=!1,c="float32"):"uint8"===c?j=a.UNSIGNED_BYTE:(j=a.UNSIGNED_BYTE,h=!1,c="uint8");var k=0;if(2===d.length)k=a.LUMINANCE,d=[d[0],d[1],1],b=n(b.data,d,[b.stride[0],b.stride[1],1],b.offset);else{if(3!==d.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===d[2])k=a.ALPHA;else if(2===d[2])k=a.LUMINANCE_ALPHA;else if(3===d[2])k=a.RGB;else{if(4!==d[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");k=a.RGBA}}j!==a.FLOAT||a.getExtension("OES_texture_float")||(j=a.UNSIGNED_BYTE,h=!1);var l,m,q=b.size;if(h)l=0===b.offset&&b.data.length===q?b.data:b.data.subarray(b.offset,b.offset+q);else{var r=[d[2],d[2]*d[0],1];m=p.malloc(q,c);var s=n(m,d,r,0);"float32"!==c&&"float64"!==c||j!==a.UNSIGNED_BYTE?o.assign(s,b):t(s,b),l=m.subarray(0,q)}var u=i(a);return a.texImage2D(a.TEXTURE_2D,0,k,d[0],d[1],0,k,j,l),h||p.free(m),new f(a,u,d[0],d[1],k,j)}function m(a){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(q||d(a),"number"==typeof arguments[1])return j(a,arguments[1],arguments[2],arguments[3]||a.RGBA,arguments[4]||a.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return j(a,0|arguments[1][0],0|arguments[1][1],arguments[2]||a.RGBA,arguments[3]||a.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var b=arguments[1];if(b instanceof HTMLCanvasElement||b instanceof HTMLImageElement||b instanceof HTMLVideoElement||b instanceof ImageData)return k(a,b,arguments[2]||a.RGBA,arguments[3]||a.UNSIGNED_BYTE);if(b.shape&&b.data&&b.stride)return l(a,b)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}var n=a("ndarray"),o=a("ndarray-ops"),p=a("typedarray-pool");b.exports=m;var q=null,r=null,s=null,t=function(a,b){o.muls(a,b,255)},u=f.prototype;Object.defineProperties(u,{minFilter:{get:function(){return this._minFilter},set:function(a){this.bind();var b=this.gl;if(this.type===b.FLOAT&&q.indexOf(a)>=0&&(b.getExtension("OES_texture_float_linear")||(a=b.NEAREST)),r.indexOf(a)<0)throw new Error("gl-texture2d: Unknown filter mode "+a);return b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a),this._minFilter=a}},magFilter:{get:function(){return this._magFilter},set:function(a){this.bind();var b=this.gl;if(this.type===b.FLOAT&&q.indexOf(a)>=0&&(b.getExtension("OES_texture_float_linear")||(a=b.NEAREST)),r.indexOf(a)<0)throw new Error("gl-texture2d: Unknown filter mode "+a);return b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a),this._magFilter=a}},mipSamples:{get:function(){return this._anisoSamples},set:function(a){var b=this._anisoSamples;if(this._anisoSamples=0|Math.max(a,1),b!==this._anisoSamples){var c=gl.getExtension("EXT_texture_filter_anisotropic");c&&this.gl.texParameterf(this.gl.TEXTURE_2D,c.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(a){if(this.bind(),s.indexOf(a)<0)throw new Error("gl-texture2d: Unknown wrap mode "+a);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,a),this._wrapS=a}},wrapT:{get:function(){return this._wrapT},set:function(a){if(this.bind(),s.indexOf(a)<0)throw new Error("gl-texture2d: Unknown wrap mode "+a);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,a),this._wrapT=a}},wrap:{get:function(){return this._wrapVector},set:function(a){if(Array.isArray(a)||(a=[a,a]),2!==a.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var b=0;b<2;++b)if(s.indexOf(a[b])<0)throw new Error("gl-texture2d: Unknown wrap mode "+a);this._wrapS=a[0],this._wrapT=a[1];var c=this.gl;return this.bind(),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,this._wrapS),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this._wrapT),a}},shape:{get:function(){return this._shapeVector},set:function(a){if(Array.isArray(a)){if(2!==a.length)throw new Error("gl-texture2d: Invalid texture shape")}else a=[0|a,0|a];return e(this,0|a[0],0|a[1]),[0|a[0],0|a[1]]}},width:{get:function(){return this._shape[0]},set:function(a){return a=0|a,e(this,a,this._shape[1]),a}},height:{get:function(){return this._shape[1]},set:function(a){return a=0|a,e(this,this._shape[0],a),a}}}),u.bind=function(a){var b=this.gl;return void 0!==a&&b.activeTexture(b.TEXTURE0+(0|a)),b.bindTexture(b.TEXTURE_2D,this.handle),void 0!==a?0|a:b.getParameter(b.ACTIVE_TEXTURE)-b.TEXTURE0},u.dispose=function(){this.gl.deleteTexture(this.handle)},u.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var a=Math.min(this._shape[0],this._shape[1]),b=0;a>0;++b,a>>>=1)this._mipLevels.indexOf(b)<0&&this._mipLevels.push(b)},u.setPixels=function(a,b,c,d){var e=this.gl;if(this.bind(),Array.isArray(b)?(d=c,c=0|b[1],b=0|b[0]):(b=b||0,c=c||0),d=d||0,a instanceof HTMLCanvasElement||a instanceof ImageData||a instanceof HTMLImageElement||a instanceof HTMLVideoElement){var f=this._mipLevels.indexOf(d)<0;f?(e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,a),this._mipLevels.push(d)):e.texSubImage2D(e.TEXTURE_2D,d,b,c,this.format,this.type,a)}else{if(!(a.shape&&a.stride&&a.data))throw new Error("gl-texture2d: Unsupported data type");if(a.shape.length<2||b+a.shape[1]>this._shape[1]>>>d||c+a.shape[0]>this._shape[0]>>>d||b<0||c<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");h(e,b,c,d,this.format,this.type,this._mipLevels,a)}}},{ndarray:987,"ndarray-ops":982,"typedarray-pool":167}],165:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],166:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{
dup:33}],167:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":165,buffer:48,dup:102}],168:[function(a,b,c){var d=a("gl-shader"),e="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvoid main() {\n  vec4 projected = projection * view * model * vec4(position, 1.0);\n  vec4 tangentClip = projection * view * model * vec4(nextPosition - position, 0.0);\n  vec2 tangent = normalize(screenShape * tangentClip.xy);\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(tangent.y, -tangent.x) / screenShape;\n\n  gl_Position = vec4(projected.xy + projected.w * offset, projected.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n",f="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n",g="#define GLSLIFY 1\nprecision mediump float;\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1_0(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\n\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId/255.0, encode_float_1_0(pixelArcLength).xyz);\n}",h=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];c.createShader=function(a){return d(a,e,f,null,h)},c.createPickShader=function(a){return d(a,e,g,null,h)}},{"gl-shader":175}],169:[function(a,b,c){"use strict";function d(a,b){for(var c=0,d=0;d<3;++d){var e=a[d]-b[d];c+=e*e}return Math.sqrt(c)}function e(a){for(var b=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],c=0;c<3;++c)b[0][c]=Math.max(a[0][c],b[0][c]),b[1][c]=Math.min(a[1][c],b[1][c]);return b}function f(a,b,c,d){this.arcLength=a,this.position=b,this.index=c,this.dataCoordinate=d}function g(a,b,c,d,e,f){this.gl=a,this.shader=b,this.pickShader=c,this.buffer=d,this.vao=e,this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=f,this.dashScale=1,this.opacity=1,this.dirty=!0,this.pixelRatio=1}function h(a){var b=a.gl||a.scene&&a.scene.gl,c=p(b);c.attributes.position.location=0,c.attributes.nextPosition.location=1,c.attributes.arcLength.location=2,c.attributes.lineWidth.location=3,c.attributes.color.location=4;var d=q(b);d.attributes.position.location=0,d.attributes.nextPosition.location=1,d.attributes.arcLength.location=2,d.attributes.lineWidth.location=3,d.attributes.color.location=4;for(var e=i(b),f=j(b,[{buffer:e,size:3,offset:0,stride:48},{buffer:e,size:3,offset:12,stride:48},{buffer:e,size:1,offset:24,stride:48},{buffer:e,size:1,offset:28,stride:48},{buffer:e,size:4,offset:32,stride:48}]),h=n(new Array(1024),[256,1,4]),l=0;l<1024;++l)h.data[l]=255;var m=k(b,h);m.wrap=b.REPEAT;var o=new g(b,c,d,e,f,m);return o.update(a),o}b.exports=h;var i=a("gl-buffer"),j=a("gl-vao"),k=a("gl-texture2d"),l=a("glsl-read-float"),m=a("binary-search-bounds"),n=a("ndarray"),o=a("./lib/shaders"),p=o.createShader,q=o.createPickShader,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s=g.prototype;s.isTransparent=function(){return this.opacity<1},s.isOpaque=function(){return this.opacity>=1},s.pickSlots=1,s.setPickBase=function(a){this.pickId=a},s.drawTransparent=s.draw=function(a){var b=this.gl,c=this.shader,d=this.vao;c.bind(),c.uniforms={model:a.model||r,view:a.view||r,projection:a.projection||r,clipBounds:e(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},d.bind(),d.draw(b.TRIANGLE_STRIP,this.vertexCount)},s.drawPick=function(a){var b=this.gl,c=this.pickShader,d=this.vao;c.bind(),c.uniforms={model:a.model||r,view:a.view||r,projection:a.projection||r,pickId:this.pickId,clipBounds:e(this.clipBounds),screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},d.bind(),d.draw(b.TRIANGLE_STRIP,this.vertexCount)},s.update=function(a){this.dirty=!0,"dashScale"in a&&(this.dashScale=a.dashScale),"opacity"in a&&(this.opacity=+a.opacity);var b=a.position||a.positions;if(b){var c=a.color||a.colors||[0,0,0,1],e=a.lineWidth||1,f=[],g=[],h=[],i=0,j=0,k=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];a:for(var l=1;l<b.length;++l){var o=b[l-1],p=b[l];g.push(i),h.push(o.slice());for(var q=0;q<3;++q){if(isNaN(o[q])||isNaN(p[q])||!isFinite(o[q])||!isFinite(p[q]))continue a;k[0][q]=Math.min(k[0][q],o[q],p[q]),k[1][q]=Math.max(k[1][q],o[q],p[q])}var r,s;Array.isArray(c[0])?(r=c[l-1],s=c[l]):r=s=c,3===r.length&&(r=[r[0],r[1],r[2],1]),3===s.length&&(s=[s[0],s[1],s[2],1]);var t,u;Array.isArray(e)?(t=e[l-1],u=lineWidht[l]):t=u=e;var v=i;i+=d(o,p),f.push(o[0],o[1],o[2],p[0],p[1],p[2],v,t,r[0],r[1],r[2],r[3],o[0],o[1],o[2],p[0],p[1],p[2],v,-t,r[0],r[1],r[2],r[3],p[0],p[1],p[2],o[0],o[1],o[2],i,-t,s[0],s[1],s[2],s[3],p[0],p[1],p[2],o[0],o[1],o[2],i,t,s[0],s[1],s[2],s[3]),j+=4}if(this.buffer.update(f),g.push(i),h.push(b[b.length-1].slice()),this.bounds=k,this.vertexCount=j,this.points=h,this.arcLength=g,"dashes"in a){var w=a.dashes,x=w.slice();x.unshift(0);for(var l=1;l<x.length;++l)x[l]=x[l-1]+x[l];for(var y=n(new Array(1024),[256,1,4]),l=0;l<256;++l){for(var q=0;q<4;++q)y.set(l,0,q,0);1&m.le(x,x[x.length-1]*l/255)?y.set(l,0,0,0):y.set(l,0,0,255)}this.texture.setPixels(y)}}},s.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},s.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;var b=l(a.value[0],a.value[1],a.value[2],0),c=m.le(this.arcLength,b);if(c<0)return null;if(c===this.arcLength.length-1)return new f(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),c);for(var d=this.points[c],e=this.points[Math.min(c+1,this.points.length-1)],g=(b-this.arcLength[c])/(this.arcLength[c+1]-this.arcLength[c]),h=1-g,i=[0,0,0],j=0;j<3;++j)i[j]=h*d[j]+g*e[j];var k=Math.min(g<.5?c:c+1,this.points.length-1);return new f(b,i,k,this.points[k])}},{"./lib/shaders":168,"binary-search-bounds":170,"gl-buffer":171,"gl-texture2d":202,"gl-vao":206,"glsl-read-float":207,ndarray:987}],170:[function(a,b,c){arguments[4][4][0].apply(c,arguments)},{dup:4}],171:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":174}],172:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],173:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],174:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":172,buffer:48,dup:102}],175:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{"./lib/GLError":176,"./lib/create-attributes":177,"./lib/create-uniforms":178,"./lib/reflect":179,"./lib/runtime-reflect":180,"./lib/shader-cache":181,dup:76}],176:[function(a,b,c){arguments[4][77][0].apply(c,arguments)},{dup:77}],177:[function(a,b,c){arguments[4][78][0].apply(c,arguments)},{"./GLError":176,dup:78}],178:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{"./GLError":176,"./reflect":179,dup:79}],179:[function(a,b,c){arguments[4][80][0].apply(c,arguments)},{dup:80}],180:[function(a,b,c){arguments[4][81][0].apply(c,arguments)},{dup:81}],181:[function(a,b,c){arguments[4][82][0].apply(c,arguments)},{"./GLError":176,dup:82,"gl-format-compiler-error":182,"weakmap-shim":198}],182:[function(a,b,c){arguments[4][83][0].apply(c,arguments)},{"add-line-numbers":183,dup:83,"gl-constants/lookup":187,"glsl-shader-name":188,"sprintf-js":195}],183:[function(a,b,c){arguments[4][84][0].apply(c,arguments)},{dup:84,"pad-left":184}],184:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85,"repeat-string":185}],185:[function(a,b,c){arguments[4][86][0].apply(c,arguments)},{dup:86}],186:[function(a,b,c){arguments[4][87][0].apply(c,arguments)},{dup:87}],187:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{"./1.0/numbers":186,dup:88}],188:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{"atob-lite":189,dup:89,"glsl-tokenizer":194}],189:[function(a,b,c){arguments[4][90][0].apply(c,arguments)},{dup:90}],190:[function(a,b,c){arguments[4][91][0].apply(c,arguments)},{"./lib/builtins":191,"./lib/literals":192,"./lib/operators":193,dup:91}],191:[function(a,b,c){arguments[4][92][0].apply(c,arguments)},{dup:92}],192:[function(a,b,c){arguments[4][93][0].apply(c,arguments)},{dup:93}],193:[function(a,b,c){arguments[4][94][0].apply(c,arguments)},{dup:94}],194:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{"./index":190,dup:95}],195:[function(a,b,c){arguments[4][96][0].apply(c,arguments)},{dup:96}],196:[function(a,b,c){arguments[4][97][0].apply(c,arguments)},{"./hidden-store.js":197,dup:97}],197:[function(a,b,c){arguments[4][98][0].apply(c,arguments)},{dup:98}],198:[function(a,b,c){arguments[4][99][0].apply(c,arguments)},{"./create-store.js":196,dup:99}],199:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],200:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],201:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":199,buffer:48,dup:102}],202:[function(a,b,c){arguments[4][164][0].apply(c,arguments)},{dup:164,ndarray:987,"ndarray-ops":982,"typedarray-pool":201}],203:[function(a,b,c){arguments[4][132][0].apply(c,arguments)},{dup:132}],204:[function(a,b,c){arguments[4][133][0].apply(c,arguments)},{"./do-bind.js":203,dup:133}],205:[function(a,b,c){arguments[4][134][0].apply(c,arguments)},{"./do-bind.js":203,dup:134}],206:[function(a,b,c){arguments[4][135][0].apply(c,arguments)},{"./lib/vao-emulated.js":204,"./lib/vao-native.js":205,dup:135}],207:[function(a,b,c){function d(a,b,c,d){return e[0]=d,e[1]=c,e[2]=b,e[3]=a,f[0]}b.exports=d;var e=new Uint8Array(4),f=new Float32Array(e.buffer)},{}],208:[function(a,b,c){function d(a){var b=new Float32Array(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b}b.exports=d},{}],209:[function(a,b,c){function d(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=d},{}],210:[function(a,b,c){function d(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x}b.exports=d},{}],211:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=d},{}],212:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a}b.exports=d},{}],213:[function(a,b,c){function d(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}b.exports=d},{}],214:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null}b.exports=d},{}],215:[function(a,b,c){function d(a,b,c,d){var f,g,h,i,j,k,l,m,n,o,p=b[0],q=b[1],r=b[2],s=d[0],t=d[1],u=d[2],v=c[0],w=c[1],x=c[2];return Math.abs(p-v)<1e-6&&Math.abs(q-w)<1e-6&&Math.abs(r-x)<1e-6?e(a):(l=p-v,m=q-w,n=r-x,o=1/Math.sqrt(l*l+m*m+n*n),l*=o,m*=o,n*=o,f=t*n-u*m,g=u*l-s*n,h=s*m-t*l,o=Math.sqrt(f*f+g*g+h*h),o?(o=1/o,f*=o,g*=o,h*=o):(f=0,g=0,h=0),i=m*h-n*g,j=n*f-l*h,k=l*g-m*f,o=Math.sqrt(i*i+j*j+k*k),o?(o=1/o,i*=o,j*=o,k*=o):(i=0,j=0,k=0),a[0]=f,a[1]=i,a[2]=l,a[3]=0,a[4]=g,a[5]=j,a[6]=m,a[7]=0,a[8]=h,a[9]=k,a[10]=n,a[11]=0,a[12]=-(f*p+g*q+h*r),a[13]=-(i*p+j*q+k*r),a[14]=-(l*p+m*q+n*r),a[15]=1,a)}var e=a("./identity");b.exports=d},{"./identity":213}],216:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a}b.exports=d},{}],217:[function(a,b,c){function d(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a}b.exports=d},{}],218:[function(a,b,c){function d(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=d[0],D=d[1],E=d[2],F=Math.sqrt(C*C+D*D+E*E);return Math.abs(F)<1e-6?null:(F=1/F,C*=F,D*=F,E*=F,e=Math.sin(c),f=Math.cos(c),g=1-f,h=b[0],i=b[1],j=b[2],k=b[3],l=b[4],m=b[5],n=b[6],o=b[7],p=b[8],q=b[9],r=b[10],s=b[11],t=C*C*g+f,u=D*C*g+E*e,v=E*C*g-D*e,w=C*D*g-E*e,x=D*D*g+f,y=E*D*g+C*e,z=C*E*g+D*e,A=D*E*g-C*e,B=E*E*g+f,a[0]=h*t+l*u+p*v,a[1]=i*t+m*u+q*v,a[2]=j*t+n*u+r*v,a[3]=k*t+o*u+s*v,a[4]=h*w+l*x+p*y,a[5]=i*w+m*x+q*y,a[6]=j*w+n*x+r*y,a[7]=k*w+o*x+s*y,a[8]=h*z+l*A+p*B,a[9]=i*z+m*A+q*B,a[10]=j*z+n*A+r*B,a[11]=k*z+o*A+s*B,b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a)}b.exports=d},{}],219:[function(a,b,c){function d(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a}b.exports=d},{}],220:[function(a,b,c){function d(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a}b.exports=d},{}],221:[function(a,b,c){function d(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a}b.exports=d},{}],222:[function(a,b,c){function d(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a}b.exports=d},{}],223:[function(a,b,c){function d(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a}b.exports=d},{}],224:[function(a,b,c){function d(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}b.exports=d},{}],225:[function(a,b,c){"use strict";function d(a,b){for(var c=[0,0,0,0],d=0;d<4;++d)for(var e=0;e<4;++e)c[e]+=a[4*d+e]*b[d];return c}function e(a,b,c,e,f){for(var g=d(e,d(c,d(b,[a[0],a[1],a[2],1]))),h=0;h<3;++h)g[h]/=g[3];return[.5*f[0]*(1+g[0]),.5*f[1]*(1-g[1])]}function f(a,b){if(2===a.length){for(var c=0,d=0,e=0;e<2;++e)c+=Math.pow(b[e]-a[0][e],2),d+=Math.pow(b[e]-a[1][e],2);return c=Math.sqrt(c),d=Math.sqrt(d),c+d<1e-6?[1,0]:[d/(c+d),c/(d+c)]}if(3===a.length){var f=[0,0];return j(a[0],a[1],a[2],b,f),i(a,f)}return[]}function g(a,b){for(var c=[0,0,0],d=0;d<a.length;++d)for(var e=a[d],f=b[d],g=0;g<3;++g)c[g]+=f*e[g];return c}function h(a,b,c,d,h,i){if(1===a.length)return[0,a[0].slice()];for(var j=new Array(a.length),k=0;k<a.length;++k)j[k]=e(a[k],c,d,h,i);for(var l=0,m=1/0,k=0;k<j.length;++k){for(var n=0,o=0;o<2;++o)n+=Math.pow(j[k][o]-b[o],2);n<m&&(m=n,l=k)}for(var p=f(j,b),q=0,k=0;k<3;++k){if(p[k]<-.001||p[k]>1.0001)return null;q+=p[k]}return Math.abs(q-1)>.001?null:[l,g(a,p),p]}var i=a("barycentric"),j=a("polytope-closest-point/lib/closest_point_2d.js");b.exports=h},{barycentric:228,"polytope-closest-point/lib/closest_point_2d.js":269}],226:[function(a,b,c){var d="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec4 m_position  = model * vec4(position, 1.0);\n  vec4 t_position  = view * m_position;\n  gl_Position      = projection * t_position;\n  f_color          = color;\n  f_normal         = normal;\n  f_data           = position;\n  f_eyeDirection   = eyePosition   - position;\n  f_lightDirection = lightPosition - position;\n  f_uv             = uv;\n}",e="#define GLSLIFY 1\nprecision mediump float;\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat cookTorranceSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution_2_0(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n  \n  if(!gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular_1_1(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}",f="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}",g="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",h="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}",i="#define GLSLIFY 1\nprecision mediump float;\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}",j="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}",k="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || \n     any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}",l="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}",m="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}",n="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor,1);\n}\n";c.meshShader={vertex:d,fragment:e,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},c.wireShader={vertex:f,fragment:g,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},c.pointShader={vertex:h,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},c.pickShader={vertex:j,fragment:k,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},c.pointPickShader={vertex:l,fragment:k,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},c.contourShader={vertex:m,fragment:n,attributes:[{name:"position",type:"vec3"}]}},{}],227:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){this.gl=a,this.cells=[],this.positions=[],this.intensity=[],this.texture=b,this.dirty=!0,this.triShader=c,this.lineShader=d,this.pointShader=e,this.pickShader=f,this.pointPickShader=g,this.contourShader=h,this.trianglePositions=i,this.triangleColors=k,this.triangleNormals=m,this.triangleUVs=l,this.triangleIds=j,this.triangleVAO=n,this.triangleCount=0,this.lineWidth=1,this.edgePositions=o,this.edgeColors=q,this.edgeUVs=r,this.edgeIds=p,this.edgeVAO=s,this.edgeCount=0,this.pointPositions=t,this.pointColors=v,this.pointUVs=w,this.pointSizes=x,this.pointIds=u,this.pointVAO=y,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=z,this.contourVAO=A,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this._model=H,this._view=H,this._projection=H,this._resolution=[1,1]}function e(a){for(var b=w({colormap:a,nshades:256,format:"rgba"}),c=new Uint8Array(1024),d=0;d<256;++d){for(var e=b[d],f=0;f<3;++f)c[4*d+f]=e[f];c[4*d+3]=255*e[3]}return v(c,[256,256,4],[4,0,1])}function f(a,b,c){for(var d=new Array(b),e=0;e<b;++e)d[e]=0;for(var f=a.length,e=0;e<f;++e)for(var g=a[e],h=0;h<g.length;++h)d[g[h]]=c[e];return d}function g(a){for(var b=a.length,c=new Array(b),d=0;d<b;++d)c[d]=a[d][2];return c}function h(a){var b=o(a,B);return b.attributes.position.location=0,b.attributes.color.location=2,b.attributes.uv.location=3,b.attributes.normal.location=4,b}function i(a){var b=o(a,C);return b.attributes.position.location=0,b.attributes.color.location=2,b.attributes.uv.location=3,b}function j(a){var b=o(a,D);return b.attributes.position.location=0,b.attributes.color.location=2,b.attributes.uv.location=3,b.attributes.pointSize.location=4,b}function k(a){var b=o(a,E);return b.attributes.position.location=0,b.attributes.id.location=1,b}function l(a){var b=o(a,F);return b.attributes.position.location=0,b.attributes.id.location=1,b.attributes.pointSize.location=4,b}function m(a){var b=o(a,G);return b.attributes.position.location=0,b}function n(a){var b=a.gl,c=h(b),e=i(b),f=j(b),g=k(b),n=l(b),o=m(b),s=r(b,v(new Uint8Array([255,255,255,255]),[1,1,4]));s.generateMipmap(),s.minFilter=b.LINEAR_MIPMAP_LINEAR,s.magFilter=b.LINEAR;var t=p(b),u=p(b),w=p(b),x=p(b),y=p(b),z=q(b,[{buffer:t,type:b.FLOAT,size:3},{buffer:y,type:b.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:u,type:b.FLOAT,size:4},{buffer:w,type:b.FLOAT,size:2},{buffer:x,type:b.FLOAT,size:3}]),A=p(b),B=p(b),C=p(b),D=p(b),E=q(b,[{buffer:A,type:b.FLOAT,size:3},{buffer:D,type:b.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:B,type:b.FLOAT,size:4},{buffer:C,type:b.FLOAT,size:2}]),F=p(b),G=p(b),H=p(b),I=p(b),J=p(b),K=q(b,[{buffer:F,type:b.FLOAT,size:3},{buffer:J,type:b.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:G,type:b.FLOAT,size:4},{buffer:H,type:b.FLOAT,size:2},{buffer:I,type:b.FLOAT,size:1}]),L=p(b),M=q(b,[{buffer:L,type:b.FLOAT,size:3}]),N=new d(b,s,c,e,f,g,n,o,t,y,u,w,x,z,A,D,B,C,E,F,J,G,H,I,K,L,M);return N.update(a),N}var o=a("gl-shader"),p=a("gl-buffer"),q=a("gl-vao"),r=a("gl-texture2d"),s=a("normals"),t=a("gl-mat4/multiply"),u=a("gl-mat4/invert"),v=a("ndarray"),w=a("colormap"),x=a("simplicial-complex-contour"),y=a("typedarray-pool"),z=a("./lib/shaders"),A=a("./lib/closest-point"),B=z.meshShader,C=z.wireShader,D=z.pointShader,E=z.pickShader,F=z.pointPickShader,G=z.contourShader,H=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=d.prototype;I.isOpaque=function(){return this.opacity>=1},I.isTransparent=function(){return this.opacity<1},I.pickSlots=1,I.setPickBase=function(a){this.pickId=a},I.highlight=function(a){if(!a||!this.contourEnable)return void(this.contourCount=0);for(var b=x(this.cells,this.intensity,a.intensity),c=b.cells,d=b.vertexIds,e=b.vertexWeights,f=c.length,g=y.mallocFloat32(6*f),h=0,i=0;i<f;++i)for(var j=c[i],k=0;k<2;++k){var l=j[0];2===j.length&&(l=j[k]);for(var m=d[l][0],n=d[l][1],o=e[l],p=1-o,q=this.positions[m],r=this.positions[n],s=0;s<3;++s)g[h++]=o*q[s]+p*r[s]}this.contourCount=h/3|0,this.contourPositions.update(g.subarray(0,h)),y.free(g)},I.update=function(a){a=a||{};var b=this.gl;this.dirty=!0,"contourEnable"in a&&(this.contourEnable=a.contourEnable),"contourColor"in a&&(this.contourColor=a.contourColor),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"opacity"in a&&(this.opacity=a.opacity),a.texture?(this.texture.dispose(),this.texture=r(b,a.texture)):a.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=b.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=b.LINEAR,this.texture.setPixels(e(a.colormap)),this.texture.generateMipmap());var c=a.cells,d=a.positions;if(d&&c){var h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=[],p=[],q=[],t=[],u=[],v=[],w=[];this.cells=c,this.positions=d;var x=a.vertexNormals,y=a.cellNormals;a.useFacetNormals&&!y&&(y=s.faceNormals(c,d)),y||x||(x=s.vertexNormals(c,d));var z=a.vertexColors,A=a.cellColors,B=a.meshColor||[1,1,1,1],C=a.vertexUVs,D=a.vertexIntensity,E=a.cellUVs,F=a.cellIntensity,G=1/0,H=-(1/0);if(!C&&!E)if(D)for(var I=0;I<D.length;++I){var J=D[I];G=Math.min(G,J),H=Math.max(H,J)}else if(F)for(var I=0;I<F.length;++I){
var J=F[I];G=Math.min(G,J),H=Math.max(H,J)}else for(var I=0;I<d.length;++I){var J=d[I][2];G=Math.min(G,J),H=Math.max(H,J)}D?this.intensity=D:F?this.intensity=f(c,d.length,F):this.intensity=g(d);var K=a.pointSizes,L=a.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];for(var I=0;I<d.length;++I)for(var M=d[I],N=0;N<3;++N)!isNaN(M[N])&&isFinite(M[N])&&(this.bounds[0][N]=Math.min(this.bounds[0][N],M[N]),this.bounds[1][N]=Math.max(this.bounds[1][N],M[N]));var O=0,P=0,Q=0;a:for(var I=0;I<c.length;++I){var R=c[I];switch(R.length){case 1:for(var S=R[0],M=d[S],N=0;N<3;++N)if(isNaN(M[N])||!isFinite(M[N]))continue a;q.push(M[0],M[1],M[2]);var T;T=z?z[S]:A?A[I]:B,3===T.length?t.push(T[0],T[1],T[2],1):t.push(T[0],T[1],T[2],T[3]);var U;U=C?C[S]:D?[(D[S]-G)/(H-G),0]:E?E[I]:F?[(F[I]-G)/(H-G),0]:[(M[2]-G)/(H-G),0],u.push(U[0],U[1]),K?v.push(K[S]):v.push(L),w.push(I),Q+=1;break;case 2:for(var N=0;N<2;++N)for(var S=R[N],M=d[S],V=0;V<3;++V)if(isNaN(M[V])||!isFinite(M[V]))continue a;for(var N=0;N<2;++N){var S=R[N],M=d[S];m.push(M[0],M[1],M[2]);var T;T=z?z[S]:A?A[I]:B,3===T.length?n.push(T[0],T[1],T[2],1):n.push(T[0],T[1],T[2],T[3]);var U;U=C?C[S]:D?[(D[S]-G)/(H-G),0]:E?E[I]:F?[(F[I]-G)/(H-G),0]:[(M[2]-G)/(H-G),0],o.push(U[0],U[1]),p.push(I)}P+=1;break;case 3:for(var N=0;N<3;++N)for(var S=R[N],M=d[S],V=0;V<3;++V)if(isNaN(M[V])||!isFinite(M[V]))continue a;for(var N=0;N<3;++N){var S=R[N],M=d[S];h.push(M[0],M[1],M[2]);var T;T=z?z[S]:A?A[I]:B,3===T.length?i.push(T[0],T[1],T[2],1):i.push(T[0],T[1],T[2],T[3]);var U;U=C?C[S]:D?[(D[S]-G)/(H-G),0]:E?E[I]:F?[(F[I]-G)/(H-G),0]:[(M[2]-G)/(H-G),0],k.push(U[0],U[1]);var W;W=x?x[S]:y[I],j.push(W[0],W[1],W[2]),l.push(I)}O+=1}}this.pointCount=Q,this.edgeCount=P,this.triangleCount=O,this.pointPositions.update(q),this.pointColors.update(t),this.pointUVs.update(u),this.pointSizes.update(v),this.pointIds.update(new Uint32Array(w)),this.edgePositions.update(m),this.edgeColors.update(n),this.edgeUVs.update(o),this.edgeIds.update(new Uint32Array(p)),this.trianglePositions.update(h),this.triangleColors.update(i),this.triangleUVs.update(k),this.triangleNormals.update(j),this.triangleIds.update(new Uint32Array(l))}},I.drawTransparent=I.draw=function(a){a=a||{};for(var b=this.gl,c=a.model||H,d=a.view||H,e=a.projection||H,f=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],g=0;g<3;++g)f[0][g]=Math.max(f[0][g],this.clipBounds[0][g]),f[1][g]=Math.min(f[1][g],this.clipBounds[1][g]);var h={model:c,view:d,projection:e,clipBounds:f,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,contourColor:this.contourColor,texture:0};this.texture.bind(0);var i=new Array(16);t(i,h.view,h.model),t(i,h.projection,i),u(i,i);for(var g=0;g<3;++g)h.eyePosition[g]=i[12+g]/i[15];for(var j=i[15],g=0;g<3;++g)j+=this.lightPosition[g]*i[4*g+3];for(var g=0;g<3;++g){for(var k=i[12+g],l=0;l<3;++l)k+=i[4*l+g]*this.lightPosition[l];h.lightPosition[g]=k/j}if(this.triangleCount>0){var m=this.triShader;m.bind(),m.uniforms=h,this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var m=this.lineShader;m.bind(),m.uniforms=h,this.edgeVAO.bind(),b.lineWidth(this.lineWidth),b.drawArrays(b.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var m=this.pointShader;m.bind(),m.uniforms=h,this.pointVAO.bind(),b.drawArrays(b.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var m=this.contourShader;m.bind(),m.uniforms=h,this.contourVAO.bind(),b.drawArrays(b.LINES,0,this.contourCount),this.contourVAO.unbind()}},I.drawPick=function(a){a=a||{};for(var b=this.gl,c=a.model||H,d=a.view||H,e=a.projection||H,f=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],g=0;g<3;++g)f[0][g]=Math.max(f[0][g],this.clipBounds[0][g]),f[1][g]=Math.min(f[1][g],this.clipBounds[1][g]);this._model=[].slice.call(c),this._view=[].slice.call(d),this._projection=[].slice.call(e),this._resolution=[b.drawingBufferWidth,b.drawingBufferHeight];var h={model:c,view:d,projection:e,clipBounds:f,pickId:this.pickId/255},i=this.pickShader;if(i.bind(),i.uniforms=h,this.triangleCount>0&&(this.triangleVAO.bind(),b.drawArrays(b.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),b.lineWidth(this.lineWidth),b.drawArrays(b.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var i=this.pointPickShader;i.bind(),i.uniforms=h,this.pointVAO.bind(),b.drawArrays(b.POINTS,0,this.pointCount),this.pointVAO.unbind()}},I.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;for(var b=a.value[0]+256*a.value[1]+65536*a.value[2],c=this.cells[b],d=this.positions,e=new Array(c.length),f=0;f<c.length;++f)e[f]=d[c[f]];var g=A(e,[a.coord[0],this._resolution[1]-a.coord[1]],this._model,this._view,this._projection,this._resolution);if(!g)return null;for(var h=g[2],i=0,f=0;f<c.length;++f)i+=h[f]*this.intensity[c[f]];return{position:g[1],index:c[g[0]],cell:c,cellId:b,intensity:i,dataCoordinate:this.positions[c[g[0]]]}},I.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},b.exports=n},{"./lib/closest-point":225,"./lib/shaders":226,colormap:237,"gl-buffer":238,"gl-mat4/invert":214,"gl-mat4/multiply":216,"gl-shader":239,"gl-texture2d":263,"gl-vao":267,ndarray:987,normals:268,"simplicial-complex-contour":270,"typedarray-pool":277}],228:[function(a,b,c){"use strict";function d(a){for(var b=0,c=0;c<a.length;++c)b+=a[c];return b}function e(a,b){for(var c=b.length,e=new Array(c+1),g=0;g<c;++g){for(var h=new Array(c+1),i=0;i<=c;++i)h[i]=a[i][g];e[g]=h}e[c]=new Array(c+1);for(var g=0;g<=c;++g)e[c][g]=1;for(var j=new Array(c+1),g=0;g<c;++g)j[g]=b[g];j[c]=1;var k=f(e,j),l=d(k[c+1]);0===l&&(l=1);for(var m=new Array(c+1),g=0;g<=c;++g)m[g]=d(k[g])/l;return m}b.exports=e;var f=a("robust-linear-solve")},{"robust-linear-solve":229}],229:[function(a,b,c){arguments[4][34][0].apply(c,arguments)},{dup:34,"robust-determinant":235}],230:[function(a,b,c){arguments[4][35][0].apply(c,arguments)},{dup:35}],231:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{dup:36}],232:[function(a,b,c){arguments[4][37][0].apply(c,arguments)},{dup:37,"two-product":234,"two-sum":231}],233:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],234:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],235:[function(a,b,c){arguments[4][40][0].apply(c,arguments)},{dup:40,"robust-compress":230,"robust-scale":232,"robust-sum":233,"two-product":234}],236:[function(a,b,c){b.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:0,rgb:[255,255,255,1]}]}},{}],237:[function(a,b,c){"use strict";function d(a){for(var b,c="#",d=0;d<3;++d)b=a[d],b=b.toString(16),c+=("00"+b).substr(b.length);return c}function e(a){return"rgba("+a.join(",")+")"}var f=a("arraytools"),g=a("./colorScales.json");b.exports=function(a){var b,c,h,i,j,k,l,m,n,o,p,q,r,s=[],t=[],u=[],v=[];if(f.isPlainObject(a)||(a={}),a.colormap||(l="jet"),Array.isArray(a.alpha)?2!==a.alpha.length&&(a.alpha=[1,1]):"number"==typeof a.alpha?a.alpha=[a.alpha,a.alpha]:a.alpha=[1,1],"string"==typeof a.colormap){if(l=a.colormap.toLowerCase(),!(l in g))throw Error(l+" not a supported colorscale");k=g[l]}else Array.isArray(a.colormap)&&(k=a.colormap);if(n=a.nshades||72,m=a.format||"hex",p=a.alpha,k.length>n)throw new Error(l+" map requires nshades to be at least size "+k.length);for(b=k.map(function(a){return Math.round(a.index*n)}),p[0]<0&&(p[0]=0),p[1]<0&&(p[0]=0),p[0]>1&&(p[0]=1),p[1]>1&&(p[0]=1),r=0;r<b.length;++r)q=k[r].index,c=k[r].rgb,4===c.length&&c[3]>=0&&c[3]<=1||(c[3]=p[0]+(p[1]-p[0])*q);for(r=0;r<b.length-1;++r)j=b[r+1]-b[r],h=k[r].rgb,i=k[r+1].rgb,s=s.concat(f.linspace(h[0],i[0],j)),t=t.concat(f.linspace(h[1],i[1],j)),u=u.concat(f.linspace(h[2],i[2],j)),v=v.concat(f.linspace(h[3],i[3],j));return s=s.map(Math.round),t=t.map(Math.round),u=u.map(Math.round),o=f.zip(s,t,u,v),"hex"===m&&(o=o.map(d)),"rgbaString"===m&&(o=o.map(e)),o}},{"./colorScales.json":236,arraytools:47}],238:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":277}],239:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{"./lib/GLError":240,"./lib/create-attributes":241,"./lib/create-uniforms":242,"./lib/reflect":243,"./lib/runtime-reflect":244,"./lib/shader-cache":245,dup:76}],240:[function(a,b,c){arguments[4][77][0].apply(c,arguments)},{dup:77}],241:[function(a,b,c){arguments[4][78][0].apply(c,arguments)},{"./GLError":240,dup:78}],242:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{"./GLError":240,"./reflect":243,dup:79}],243:[function(a,b,c){arguments[4][80][0].apply(c,arguments)},{dup:80}],244:[function(a,b,c){arguments[4][81][0].apply(c,arguments)},{dup:81}],245:[function(a,b,c){arguments[4][82][0].apply(c,arguments)},{"./GLError":240,dup:82,"gl-format-compiler-error":246,"weakmap-shim":262}],246:[function(a,b,c){arguments[4][83][0].apply(c,arguments)},{"add-line-numbers":247,dup:83,"gl-constants/lookup":251,"glsl-shader-name":252,"sprintf-js":259}],247:[function(a,b,c){arguments[4][84][0].apply(c,arguments)},{dup:84,"pad-left":248}],248:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85,"repeat-string":249}],249:[function(a,b,c){arguments[4][86][0].apply(c,arguments)},{dup:86}],250:[function(a,b,c){arguments[4][87][0].apply(c,arguments)},{dup:87}],251:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{"./1.0/numbers":250,dup:88}],252:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{"atob-lite":253,dup:89,"glsl-tokenizer":258}],253:[function(a,b,c){arguments[4][90][0].apply(c,arguments)},{dup:90}],254:[function(a,b,c){arguments[4][91][0].apply(c,arguments)},{"./lib/builtins":255,"./lib/literals":256,"./lib/operators":257,dup:91}],255:[function(a,b,c){arguments[4][92][0].apply(c,arguments)},{dup:92}],256:[function(a,b,c){arguments[4][93][0].apply(c,arguments)},{dup:93}],257:[function(a,b,c){arguments[4][94][0].apply(c,arguments)},{dup:94}],258:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{"./index":254,dup:95}],259:[function(a,b,c){arguments[4][96][0].apply(c,arguments)},{dup:96}],260:[function(a,b,c){arguments[4][97][0].apply(c,arguments)},{"./hidden-store.js":261,dup:97}],261:[function(a,b,c){arguments[4][98][0].apply(c,arguments)},{dup:98}],262:[function(a,b,c){arguments[4][99][0].apply(c,arguments)},{"./create-store.js":260,dup:99}],263:[function(a,b,c){arguments[4][164][0].apply(c,arguments)},{dup:164,ndarray:987,"ndarray-ops":982,"typedarray-pool":277}],264:[function(a,b,c){arguments[4][132][0].apply(c,arguments)},{dup:132}],265:[function(a,b,c){arguments[4][133][0].apply(c,arguments)},{"./do-bind.js":264,dup:133}],266:[function(a,b,c){arguments[4][134][0].apply(c,arguments)},{"./do-bind.js":264,dup:134}],267:[function(a,b,c){arguments[4][135][0].apply(c,arguments)},{"./lib/vao-emulated.js":265,"./lib/vao-native.js":266,dup:135}],268:[function(a,b,c){var d=1e-6;c.vertexNormals=function(a,b){for(var c=b.length,e=new Array(c),f=0;f<c;++f)e[f]=[0,0,0];for(var f=0;f<a.length;++f)for(var g=a[f],h=0,i=g[g.length-1],j=g[0],k=0;k<g.length;++k){h=i,i=j,j=g[(k+1)%g.length];for(var l=b[h],m=b[i],n=b[j],o=new Array(3),p=0,q=new Array(3),r=0,s=0;s<3;++s)o[s]=l[s]-m[s],p+=o[s]*o[s],q[s]=n[s]-m[s],r+=q[s]*q[s];if(p*r>d)for(var t=e[i],u=1/Math.sqrt(p*r),s=0;s<3;++s){var v=(s+1)%3,w=(s+2)%3;t[s]+=u*(q[v]*o[w]-q[w]*o[v])}}for(var f=0;f<c;++f){for(var t=e[f],x=0,s=0;s<3;++s)x+=t[s]*t[s];if(x>d)for(var u=1/Math.sqrt(x),s=0;s<3;++s)t[s]*=u;else for(var s=0;s<3;++s)t[s]=0}return e},c.faceNormals=function(a,b){for(var c=a.length,e=new Array(c),f=0;f<c;++f){for(var g=a[f],h=new Array(3),i=0;i<3;++i)h[i]=b[g[i]];for(var j=new Array(3),k=new Array(3),i=0;i<3;++i)j[i]=h[1][i]-h[0][i],k[i]=h[2][i]-h[0][i];for(var l=new Array(3),m=0,i=0;i<3;++i){var n=(i+1)%3,o=(i+2)%3;l[i]=j[n]*k[o]-j[o]*k[n],m+=l[i]*l[i]}m=m>d?1/Math.sqrt(m):0;for(var i=0;i<3;++i)l[i]*=m;e[f]=l}return e}},{}],269:[function(a,b,c){"use strict";function d(a,b,c,d,h){e.length<d.length&&(e=new Float64Array(d.length),f=new Float64Array(d.length),g=new Float64Array(d.length));for(var i=0;i<d.length;++i)e[i]=a[i]-d[i],f[i]=b[i]-a[i],g[i]=c[i]-a[i];for(var j=0,k=0,l=0,m=0,n=0,o=0,i=0;i<d.length;++i){var p=f[i],q=g[i],r=e[i];j+=p*p,k+=p*q,l+=q*q,m+=r*p,n+=r*q,o+=r*r}var s,t=Math.abs(j*l-k*k),u=k*n-l*m,v=k*m-j*n;if(u+v<=t)if(u<0)v<0&&m<0?(v=0,-m>=j?(u=1,s=j+2*m+o):(u=-m/j,s=m*u+o)):(u=0,n>=0?(v=0,s=o):-n>=l?(v=1,s=l+2*n+o):(v=-n/l,s=n*v+o));else if(v<0)v=0,m>=0?(u=0,s=o):-m>=j?(u=1,s=j+2*m+o):(u=-m/j,s=m*u+o);else{var w=1/t;u*=w,v*=w,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o}else{var x,y,z,A;u<0?(x=k+m,y=l+n,y>x?(z=y-x,A=j-2*k+l,z>=A?(u=1,v=0,s=j+2*m+o):(u=z/A,v=1-u,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o)):(u=0,y<=0?(v=1,s=l+2*n+o):n>=0?(v=0,s=o):(v=-n/l,s=n*v+o))):v<0?(x=k+n,y=j+m,y>x?(z=y-x,A=j-2*k+l,z>=A?(v=1,u=0,s=l+2*n+o):(v=z/A,u=1-v,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o)):(v=0,y<=0?(u=1,s=j+2*m+o):m>=0?(u=0,s=o):(u=-m/j,s=m*u+o))):(z=l+n-k-m,z<=0?(u=0,v=1,s=l+2*n+o):(A=j-2*k+l,z>=A?(u=1,v=0,s=j+2*m+o):(u=z/A,v=1-u,s=u*(j*u+k*v+2*m)+v*(k*u+l*v+2*n)+o)))}for(var B=1-u-v,i=0;i<d.length;++i)h[i]=B*a[i]+u*b[i]+v*c[i];return s<0?0:s}var e=new Float64Array(4),f=new Float64Array(4),g=new Float64Array(4);b.exports=d},{}],270:[function(a,b,c){"use strict";function d(a){for(var b=a.length,c=0,d=0;d<b;++d)c=0|Math.max(c,a[d].length);return c-1}function e(a,b){for(var c=a.length,d=l.mallocUint8(c),e=0;e<c;++e)d[e]=a[e]<b|0;return d}function f(a,b){for(var c=a.length,d=b*(b+1)/2*c|0,e=l.mallocUint32(2*d),f=0,g=0;g<c;++g)for(var h=a[g],b=h.length,i=0;i<b;++i)for(var j=0;j<i;++j){var n=h[j],o=h[i];e[f++]=0|Math.min(n,o),e[f++]=0|Math.max(n,o)}var p=f/2|0;m(k(e,[p,2]));for(var q=2,g=2;g<f;g+=2)e[g-2]===e[g]&&e[g-1]===e[g+1]||(e[q++]=e[g],e[q++]=e[g+1]);return k(e,[q/2|0,2])}function g(a,b,c,d){for(var e=a.data,f=a.shape[0],g=l.mallocDouble(f),h=0,i=0;i<f;++i){var j=e[2*i],m=e[2*i+1];if(c[j]!==c[m]){var n=b[j],o=b[m];e[2*h]=j,e[2*h+1]=m,g[h++]=(o-d)/(o-n)}}return a.shape[0]=h,k(g,[h])}function h(a,b){var c=l.mallocInt32(2*b),d=a.shape[0],e=a.data;c[0]=0;for(var f=0,g=0;g<d;++g){var h=e[2*g];if(h!==f){for(c[2*f+1]=g;++f<h;)c[2*f]=g,c[2*f+1]=g;c[2*f]=g}}for(c[2*f+1]=d;++f<b;)c[2*f]=c[2*f+1]=d;return c}function i(a){for(var b=0|a.shape[0],c=a.data,d=new Array(b),e=0;e<b;++e)d[e]=[c[2*e],c[2*e+1]];return d}function j(a,b,c,j){c=c||0,"undefined"==typeof j&&(j=d(a));var k=a.length;if(0===k||j<1)return{cells:[],vertexIds:[],vertexWeights:[]};var m=e(b,+c),o=f(a,j),p=g(o,b,m,+c),q=h(o,0|b.length),r=n(j)(a,o.data,q,m),s=i(o),t=[].slice.call(p.data,0,p.shape[0]);return l.free(m),l.free(o.data),l.free(p.data),l.free(q),{cells:r,vertexIds:s,vertexWeights:t}}b.exports=j;var k=a("ndarray"),l=a("typedarray-pool"),m=a("ndarray-sort"),n=a("./lib/codegen")},{"./lib/codegen":271,ndarray:987,"ndarray-sort":274,"typedarray-pool":277}],271:[function(a,b,c){"use strict";function d(a){function b(a){if(!(a.length<=0)){j.push("R.push(");for(var b=0;b<a.length;++b){var c=a[b];b>0&&j.push(","),j.push("[");for(var d=0;d<c.length;++d){var e=c[d];d>0&&j.push(","),j.push("B(C,E,c[",e[0],"],c[",e[1],"])")}j.push("]")}j.push(");")}}var c=0,d=new Array(a+1);d[0]=[[]];for(var e=1;e<=a;++e)for(var h=d[e]=g(e),i=0;i<h.length;++i)c=Math.max(c,h[e].length);for(var j=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",a,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"],e=a+1;e>1;--e){e<a+1&&j.push("else "),j.push("if(l===",e,"){");for(var k=[],i=0;i<e;++i)k.push("(S[c["+i+"]]<<"+i+")");j.push("var M=",k.join("+"),";if(M===0||M===",(1<<e)-1,"){continue}switch(M){");for(var h=d[e-1],i=0;i<h.length;++i)j.push("case ",i,":"),b(h[i]),j.push("break;");j.push("}}")}j.push("}return R;};return getContour",a,"d");var l=new Function("pool",j.join(""));return l(f)}function e(a){var b=h[a];return b||(b=h[a]=d(a)),b}b.exports=e;var f=a("typedarray-pool"),g=a("marching-simplex-table"),h={}},{"marching-simplex-table":272,"typedarray-pool":277}],272:[function(a,b,c){"use strict";function d(a,b,c){for(var d=new Array(a),e=0;e<a;++e)d[e]=0,e===b&&(d[e]+=.5),e===c&&(d[e]+=.5);return d}function e(a,b){if(0===b||b===(1<<a+1)-1)return[];for(var c=[],e=[],f=0;f<=a;++f)if(b&1<<f){c.push(d(a,f-1,f-1)),e.push(null);for(var h=0;h<=a;++h)~b&1<<h&&(c.push(d(a,f-1,h-1)),e.push([f,h]))}var i=g(c),j=[];a:for(var f=0;f<i.length;++f){for(var k=i[f],l=[],h=0;h<k.length;++h){if(!e[k[h]])continue a;l.push(e[k[h]].slice())}j.push(l)}return j}function f(a){for(var b=1<<a+1,c=new Array(b),d=0;d<b;++d)c[d]=e(a,d);return c}b.exports=f;var g=a("convex-hull")},{"convex-hull":54}],273:[function(a,b,c){"use strict";function d(a){switch(a){case"uint8":return[i.mallocUint8,i.freeUint8];case"uint16":return[i.mallocUint16,i.freeUint16];case"uint32":return[i.mallocUint32,i.freeUint32];case"int8":return[i.mallocInt8,i.freeInt8];case"int16":return[i.mallocInt16,i.freeInt16];case"int32":return[i.mallocInt32,i.freeInt32];case"float32":return[i.mallocFloat,i.freeFloat];case"float64":return[i.mallocDouble,i.freeDouble];default:return null}}function e(a){for(var b=[],c=0;c<a;++c)b.push("s"+c);for(var c=0;c<a;++c)b.push("n"+c);for(var c=1;c<a;++c)b.push("d"+c);for(var c=1;c<a;++c)b.push("e"+c);for(var c=1;c<a;++c)b.push("f"+c);return b}function f(a,b){function c(a){return"generic"===b?["data.get(",a,")"].join(""):["data[",a,"]"].join("")}function f(a,c){return"generic"===b?["data.set(",a,",",c,")"].join(""):["data[",a,"]=",c].join("")}var g=["'use strict'"],h=["ndarrayInsertionSort",a.join("d"),b].join(""),i=["left","right","data","offset"].concat(e(a.length)),j=d(b),k=["i,j,cptr,ptr=left*s0+offset"];if(a.length>1){for(var l=[],m=1;m<a.length;++m)k.push("i"+m),l.push("n"+m);j?k.push("scratch=malloc("+l.join("*")+")"):k.push("scratch=new Array("+l.join("*")+")"),k.push("dptr","sptr","a","b")}else k.push("scratch");if(g.push(["function ",h,"(",i.join(","),"){var ",k.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),a.length>1){g.push("dptr=0;sptr=ptr");for(var m=a.length-1;m>=0;--m){var n=a[m];0!==n&&g.push(["for(i",n,"=0;i",n,"<n",n,";++i",n,"){"].join(""))}g.push("scratch[dptr++]=",c("sptr"));for(var m=0;m<a.length;++m){var n=a[m];0!==n&&g.push("sptr+=d"+n,"}")}g.push("__g:while(j-->left){","dptr=0","sptr=cptr-s0");for(var m=1;m<a.length;++m)1===m&&g.push("__l:"),g.push(["for(i",m,"=0;i",m,"<n",m,";++i",m,"){"].join(""));g.push(["a=",c("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));for(var m=a.length-1;m>=1;--m)g.push("sptr+=e"+m,"dptr+=f"+m,"}");g.push("dptr=cptr;sptr=cptr-s0");for(var m=a.length-1;m>=0;--m){var n=a[m];0!==n&&g.push(["for(i",n,"=0;i",n,"<n",n,";++i",n,"){"].join(""))}g.push(f("dptr",c("sptr")));for(var m=0;m<a.length;++m){var n=a[m];0!==n&&g.push(["dptr+=d",n,";sptr+=d",n].join(""),"}")}g.push("cptr-=s0\n}"),g.push("dptr=cptr;sptr=0");for(var m=a.length-1;m>=0;--m){var n=a[m];0!==n&&g.push(["for(i",n,"=0;i",n,"<n",n,";++i",n,"){"].join(""))}g.push(f("dptr","scratch[sptr++]"));for(var m=0;m<a.length;++m){var n=a[m];0!==n&&g.push("dptr+=d"+n,"}")}}else g.push("scratch="+c("ptr"),"while((j-->left)&&("+c("cptr-s0")+">scratch)){",f("cptr",c("cptr-s0")),"cptr-=s0","}",f("cptr","scratch"));if(g.push("}"),a.length>1&&j&&g.push("free(scratch)"),g.push("} return "+h),j){var o=new Function("malloc","free",g.join("\n"));return o(j[0],j[1])}var o=new Function(g.join("\n"));return o()}function g(a,b,c){function f(a){return["(offset+",a,"*s0)"].join("")}function g(a){return"generic"===b?["data.get(",a,")"].join(""):["data[",a,"]"].join("")}function h(a,c){return"generic"===b?["data.set(",a,",",c,")"].join(""):["data[",a,"]=",c].join("")}function i(b,c,d){if(1===b.length)v.push("ptr0="+f(b[0]));else for(var e=0;e<b.length;++e)v.push(["b_ptr",e,"=s0*",b[e]].join(""));c&&v.push("pivot_ptr=0"),v.push("ptr_shift=offset");for(var e=a.length-1;e>=0;--e){var g=a[e];0!==g&&v.push(["for(i",g,"=0;i",g,"<n",g,";++i",g,"){"].join(""))}if(b.length>1)for(var e=0;e<b.length;++e)v.push(["ptr",e,"=b_ptr",e,"+ptr_shift"].join(""));v.push(d),c&&v.push("++pivot_ptr");for(var e=0;e<a.length;++e){var g=a[e];0!==g&&(b.length>1?v.push("ptr_shift+=d"+g):v.push("ptr0+=d"+g),v.push("}"))}}function k(b,c,d,e){if(1===c.length)v.push("ptr0="+f(c[0]));else{for(var g=0;g<c.length;++g)v.push(["b_ptr",g,"=s0*",c[g]].join(""));v.push("ptr_shift=offset")}d&&v.push("pivot_ptr=0"),b&&v.push(b+":");for(var g=1;g<a.length;++g)v.push(["for(i",g,"=0;i",g,"<n",g,";++i",g,"){"].join(""));if(c.length>1)for(var g=0;g<c.length;++g)v.push(["ptr",g,"=b_ptr",g,"+ptr_shift"].join(""));v.push(e);for(var g=a.length-1;g>=1;--g)d&&v.push("pivot_ptr+=f"+g),c.length>1?v.push("ptr_shift+=e"+g):v.push("ptr0+=e"+g),v.push("}")}function l(){a.length>1&&y&&v.push("free(pivot1)","free(pivot2)")}function m(b,c){var d="el"+b,e="el"+c;if(a.length>1){var h="__l"+ ++z;k(h,[d,e],!1,["comp=",g("ptr0"),"-",g("ptr1"),"\n","if(comp>0){tmp0=",d,";",d,"=",e,";",e,"=tmp0;break ",h,"}\n","if(comp<0){break ",h,"}"].join(""))}else v.push(["if(",g(f(d)),">",g(f(e)),"){tmp0=",d,";",d,"=",e,";",e,"=tmp0}"].join(""))}function n(b,c){a.length>1?i([b,c],!1,h("ptr0",g("ptr1"))):v.push(h(f(b),g(f(c))))}function o(b,c,d){if(a.length>1){var e="__l"+ ++z;k(e,[c],!0,[b,"=",g("ptr0"),"-pivot",d,"[pivot_ptr]\n","if(",b,"!==0){break ",e,"}"].join(""))}else v.push([b,"=",g(f(c)),"-pivot",d].join(""))}function p(b,c){a.length>1?i([b,c],!1,["tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1","tmp")].join("")):v.push(["ptr0=",f(b),"\n","ptr1=",f(c),"\n","tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1","tmp")].join(""))}function q(b,c,d){a.length>1?(i([b,c,d],!1,["tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1",g("ptr2")),"\n",h("ptr2","tmp")].join("")),v.push("++"+c,"--"+d)):v.push(["ptr0=",f(b),"\n","ptr1=",f(c),"\n","ptr2=",f(d),"\n","++",c,"\n","--",d,"\n","tmp=",g("ptr0"),"\n",h("ptr0",g("ptr1")),"\n",h("ptr1",g("ptr2")),"\n",h("ptr2","tmp")].join(""))}function r(a,b){p(a,b),v.push("--"+b)}function s(b,c,d){a.length>1?i([b,c],!0,[h("ptr0",g("ptr1")),"\n",h("ptr1",["pivot",d,"[pivot_ptr]"].join(""))].join("")):v.push(h(f(b),g(f(c))),h(f(c),"pivot"+d))}function t(b,c){v.push(["if((",c,"-",b,")<=",j,"){\n","insertionSort(",b,",",c,",data,offset,",e(a.length).join(","),")\n","}else{\n",w,"(",b,",",c,",data,offset,",e(a.length).join(","),")\n","}"].join(""))}function u(b,c,d){a.length>1?(v.push(["__l",++z,":while(true){"].join("")),i([b],!0,["if(",g("ptr0"),"!==pivot",c,"[pivot_ptr]){break __l",z,"}"].join("")),v.push(d,"}")):v.push(["while(",g(f(b)),"===pivot",c,"){",d,"}"].join(""))}var v=["'use strict'"],w=["ndarrayQuickSort",a.join("d"),b].join(""),x=["left","right","data","offset"].concat(e(a.length)),y=d(b),z=0;v.push(["function ",w,"(",x.join(","),"){"].join(""));var A=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(a.length>1){for(var B=[],C=1;C<a.length;++C)B.push("n"+C),A.push("i"+C);for(var C=0;C<8;++C)A.push("b_ptr"+C);A.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+B.join("*")),y?A.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):A.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else A.push("pivot1","pivot2");if(v.push("var "+A.join(",")),m(1,2),m(4,5),m(1,3),m(2,3),m(1,4),m(3,4),m(2,5),m(2,3),m(4,5),a.length>1?i(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",g("ptr1"),"\n","pivot2[pivot_ptr]=",g("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",g("ptr0"),"\n","y=",g("ptr2"),"\n","z=",g("ptr4"),"\n",h("ptr5","x"),"\n",h("ptr6","y"),"\n",h("ptr7","z")].join("")):v.push(["pivot1=",g(f("el2")),"\n","pivot2=",g(f("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",g(f("el1")),"\n","y=",g(f("el3")),"\n","z=",g(f("el5")),"\n",h(f("index1"),"x"),"\n",h(f("index3"),"y"),"\n",h(f("index5"),"z")].join("")),n("index2","left"),n("index4","right"),v.push("if(pivots_are_equal){"),v.push("for(k=less;k<=great;++k){"),o("comp","k",1),v.push("if(comp===0){continue}"),v.push("if(comp<0){"),v.push("if(k!==less){"),p("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),v.push("while(true){"),o("comp","great",1),v.push("if(comp>0){"),v.push("great--"),v.push("}else if(comp<0){"),q("k","less","great"),v.push("break"),v.push("}else{"),r("k","great"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}else{"),v.push("for(k=less;k<=great;++k){"),o("comp_pivot1","k",1),v.push("if(comp_pivot1<0){"),v.push("if(k!==less){"),p("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),o("comp_pivot2","k",2),v.push("if(comp_pivot2>0){"),v.push("while(true){"),o("comp","great",2),v.push("if(comp>0){"),v.push("if(--great<k){break}"),v.push("continue"),v.push("}else{"),o("comp","great",1),v.push("if(comp<0){"),q("k","less","great"),v.push("}else{"),r("k","great"),v.push("}"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),s("left","(less-1)",1),s("right","(great+1)",2),t("left","(less-2)"),t("(great+2)","right"),v.push("if(pivots_are_equal){"),l(),v.push("return"),v.push("}"),v.push("if(less<index1&&great>index5){"),u("less",1,"++less"),u("great",2,"--great"),v.push("for(k=less;k<=great;++k){"),o("comp_pivot1","k",1),v.push("if(comp_pivot1===0){"),v.push("if(k!==less){"),p("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),o("comp_pivot2","k",2),v.push("if(comp_pivot2===0){"),v.push("while(true){"),o("comp","great",2),v.push("if(comp===0){"),v.push("if(--great<k){break}"),v.push("continue"),v.push("}else{"),o("comp","great",1),v.push("if(comp<0){"),q("k","less","great"),v.push("}else{"),r("k","great"),v.push("}"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),l(),t("less","great"),v.push("}return "+w),a.length>1&&y){var D=new Function("insertionSort","malloc","free",v.join("\n"));return D(c,y[0],y[1])}var D=new Function("insertionSort",v.join("\n"));return D(c)}function h(a,b){var c=["'use strict'"],d=["ndarraySortWrapper",a.join("d"),b].join(""),h=["array"];c.push(["function ",d,"(",h.join(","),"){"].join(""));for(var i=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],k=0;k<a.length;++k)i.push(["s",k,"=stride[",k,"]|0,n",k,"=shape[",k,"]|0"].join(""));for(var l=new Array(a.length),m=[],k=0;k<a.length;++k){var n=a[k];0!==n&&(0===m.length?l[n]="1":l[n]=m.join("*"),m.push("n"+n))}for(var o=-1,p=-1,k=0;k<a.length;++k){var q=a[k];0!==q&&(o>0?i.push(["d",q,"=s",q,"-d",o,"*n",o].join("")):i.push(["d",q,"=s",q].join("")),o=q);var n=a.length-1-k;0!==n&&(p>0?i.push(["e",n,"=s",n,"-e",p,"*n",p,",f",n,"=",l[n],"-f",p,"*n",p].join("")):i.push(["e",n,"=s",n,",f",n,"=",l[n]].join("")),p=n)}c.push("var "+i.join(","));var r=["0","n0-1","data","offset"].concat(e(a.length));c.push(["if(n0<=",j,"){","insertionSort(",r.join(","),")}else{","quickSort(",r.join(","),")}"].join("")),c.push("}return "+d);var s=new Function("insertionSort","quickSort",c.join("\n")),t=f(a,b),u=g(a,b,t);return s(t,u)}var i=a("typedarray-pool"),j=32;b.exports=h},{"typedarray-pool":277}],274:[function(a,b,c){"use strict";function d(a){var b=a.order,c=a.dtype,d=[b,c],g=d.join(":"),h=f[g];return h||(f[g]=h=e(b,c)),h(a),a}var e=a("./lib/compile_sort.js"),f={};b.exports=d},{"./lib/compile_sort.js":273}],275:[function(a,b,c){arguments[4][60][0].apply(c,arguments);
},{dup:60}],276:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],277:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":275,buffer:48,dup:102}],278:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.vbo=b,this.shader=c}function e(a){var b=a.gl,c=f(b,[0,0,0,1,1,0,1,1]),e=g(b,h.boxVert,h.lineFrag);return new d(a,c,e)}b.exports=e;var f=a("gl-buffer"),g=a("gl-shader"),h=a("./shaders"),i=d.prototype;i.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},i.drawBox=function(){var a=[0,0],b=[0,0];return function(c,d,e,f,g){var h=this.plot,i=this.shader,j=h.gl;a[0]=c,a[1]=d,b[0]=e,b[1]=f,i.uniforms.lo=a,i.uniforms.hi=b,i.uniforms.color=g,j.drawArrays(j.TRIANGLE_STRIP,0,4)}}(),i.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":281,"gl-buffer":284,"gl-shader":299}],279:[function(a,b,c){"use strict";function d(a,b,c,d){this.plot=a,this.vbo=b,this.shader=c,this.tickShader=d,this.ticks=[[],[]]}function e(a,b){return a-b}function f(a){var b=a.gl,c=g(b),e=h(b,j.gridVert,j.gridFrag),f=h(b,j.tickVert,j.gridFrag),i=new d(a,c,e,f);return i}b.exports=f;var g=a("gl-buffer"),h=a("gl-shader"),i=a("binary-search-bounds"),j=a("./shaders"),k=d.prototype;k.draw=function(){var a=[0,0],b=[0,0],c=[0,0];return function(){for(var d=this.plot,e=this.vbo,f=this.shader,g=this.ticks,h=d.gl,i=d._tickBounds,j=d.dataBox,k=d.viewBox,l=d.gridLineWidth,m=d.gridLineColor,n=d.gridLineEnable,o=d.pixelRatio,p=0;p<2;++p){var q=i[p],r=i[p+2],s=r-q,t=.5*(j[p+2]+j[p]),u=j[p+2]-j[p];b[p]=2*s/u,a[p]=2*(q-t)/u}f.bind(),e.bind(),f.attributes.dataCoord.pointer(),f.uniforms.dataShift=a,f.uniforms.dataScale=b;for(var v=0,p=0;p<2;++p){c[0]=c[1]=0,c[p]=1,f.uniforms.dataAxis=c,f.uniforms.lineWidth=l[p]/(k[p+2]-k[p])*o,f.uniforms.color=m[p];var w=6*g[p].length;n[p]&&h.drawArrays(h.TRIANGLES,v,w),v+=w}}}(),k.drawTickMarks=function(){var a=[0,0],b=[0,0],c=[1,0],d=[0,1],f=[0,0],g=[0,0];return function(){for(var h=this.plot,j=this.vbo,k=this.tickShader,l=this.ticks,m=h.gl,n=h._tickBounds,o=h.dataBox,p=h.viewBox,q=h.pixelRatio,r=h.screenBox,s=r[2]-r[0],t=r[3]-r[1],u=p[2]-p[0],v=p[3]-p[1],w=0;w<2;++w){var x=n[w],y=n[w+2],z=y-x,A=.5*(o[w+2]+o[w]),B=o[w+2]-o[w];b[w]=2*z/B,a[w]=2*(x-A)/B}b[0]*=u/s,a[0]*=u/s,b[1]*=v/t,a[1]*=v/t,k.bind(),j.bind(),k.attributes.dataCoord.pointer();var C=k.uniforms;C.dataShift=a,C.dataScale=b;var D=h.tickMarkLength,E=h.tickMarkWidth,F=h.tickMarkColor,G=0,H=6*l[0].length,I=Math.min(i.ge(l[0],(o[0]-n[0])/(n[2]-n[0]),e),l[0].length),J=Math.min(i.gt(l[0],(o[2]-n[0])/(n[2]-n[0]),e),l[0].length),K=G+6*I,L=6*Math.max(0,J-I),M=Math.min(i.ge(l[1],(o[1]-n[1])/(n[3]-n[1]),e),l[1].length),N=Math.min(i.gt(l[1],(o[3]-n[1])/(n[3]-n[1]),e),l[1].length),O=H+6*M,P=6*Math.max(0,N-M);f[0]=2*(p[0]-D[1])/s-1,f[1]=(p[3]+p[1])/t-1,g[0]=D[1]*q/s,g[1]=E[1]*q/t,C.color=F[1],C.tickScale=g,C.dataAxis=d,C.screenOffset=f,m.drawArrays(m.TRIANGLES,O,P),f[0]=(p[2]+p[0])/s-1,f[1]=2*(p[1]-D[0])/t-1,g[0]=E[0]*q/s,g[1]=D[0]*q/t,C.color=F[0],C.tickScale=g,C.dataAxis=c,C.screenOffset=f,m.drawArrays(m.TRIANGLES,K,L),f[0]=2*(p[2]+D[3])/s-1,f[1]=(p[3]+p[1])/t-1,g[0]=D[3]*q/s,g[1]=E[3]*q/t,C.color=F[3],C.tickScale=g,C.dataAxis=d,C.screenOffset=f,m.drawArrays(m.TRIANGLES,O,P),f[0]=(p[2]+p[0])/s-1,f[1]=2*(p[3]+D[2])/t-1,g[0]=E[2]*q/s,g[1]=D[2]*q/t,C.color=F[2],C.tickScale=g,C.dataAxis=c,C.screenOffset=f,m.drawArrays(m.TRIANGLES,K,L)}}(),k.update=function(){var a=[1,1,-1,-1,1,-1],b=[1,-1,1,1,-1,-1];return function(c){for(var d=c.ticks,e=c.bounds,f=new Float32Array(18*(d[0].length+d[1].length)),g=(this.plot.zeroLineEnable,0),h=[[],[]],i=0;i<2;++i)for(var j=h[i],k=d[i],l=e[i],m=e[i+2],n=0;n<k.length;++n){var o=(k[n].x-l)/(m-l);j.push(o);for(var p=0;p<6;++p)f[g++]=o,f[g++]=a[p],f[g++]=b[p]}this.ticks=h,this.vbo.update(f)}}(),k.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":281,"binary-search-bounds":283,"gl-buffer":284,"gl-shader":299}],280:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.vbo=b,this.shader=c}function e(a){var b=a.gl,c=f(b,[-1,-1,-1,1,1,-1,1,1]),e=g(b,h.lineVert,h.lineFrag),i=new d(a,c,e);return i}b.exports=e;var f=a("gl-buffer"),g=a("gl-shader"),h=a("./shaders"),i=d.prototype;i.bind=function(){var a=this.shader;this.vbo.bind(),this.shader.bind(),a.attributes.coord.pointer(),a.uniforms.screenBox=this.plot.screenBox},i.drawLine=function(){var a=[0,0],b=[0,0];return function(c,d,e,f,g,h){var i=this.plot,j=this.shader,k=i.gl;a[0]=c,a[1]=d,b[0]=e,b[1]=f,j.uniforms.start=a,j.uniforms.end=b,j.uniforms.width=g*i.pixelRatio,j.uniforms.color=h,k.drawArrays(k.TRIANGLE_STRIP,0,4)}}(),i.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":281,"gl-buffer":284,"gl-shader":299}],281:[function(a,b,c){"use strict";var d="#define GLSLIFY 1\nprecision lowp float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n";b.exports={lineVert:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n",lineFrag:d,textVert:"#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n",textFrag:d,gridVert:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n",gridFrag:d,boxVert:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n",tickVert:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"}},{}],282:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.vbo=b,this.shader=c,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}function e(a){var b=a.gl,c=f(b),e=g(b,j.textVert,j.textFrag),h=new d(a,c,e);return h}b.exports=e;var f=a("gl-buffer"),g=a("gl-shader"),h=a("text-cache"),i=a("binary-search-bounds"),j=a("./shaders"),k=d.prototype;k.drawTicks=function(){var a=[0,0],b=[0,0],c=[0,0];return function(d){var e=this.plot,f=this.shader,g=this.tickX[d],h=this.tickOffset[d],j=e.gl,k=e.viewBox,l=e.dataBox,m=e.screenBox,n=e.pixelRatio,o=e.tickEnable,p=e.tickPad,q=e.tickColor,r=e.tickAngle,s=(e.tickMarkLength,e.labelEnable),t=e.labelPad,u=e.labelColor,v=e.labelAngle,w=this.labelOffset[d],x=this.labelCount[d],y=i.lt(g,l[d]),z=i.le(g,l[d+2]);a[0]=a[1]=0,a[d]=1,b[d]=(k[2+d]+k[d])/(m[2+d]-m[d])-1;var A=2/m[2+(1^d)]-m[1^d];b[1^d]=A*k[1^d]-1,o[d]&&(b[1^d]-=A*n*p[d],y<z&&(f.uniforms.dataAxis=a,f.uniforms.screenOffset=b,f.uniforms.color=q[d],f.uniforms.angle=r[d],j.drawArrays(j.TRIANGLES,h[y],h[z]-h[y]))),s[d]&&(b[1^d]-=A*n*t[d],f.uniforms.dataAxis=c,f.uniforms.screenOffset=b,f.uniforms.color=u[d],f.uniforms.angle=v[d],j.drawArrays(j.TRIANGLES,w,x)),b[1^d]=A*k[2+(1^d)]-1,o[d+2]&&(b[1^d]+=A*n*p[d+2],y<z&&(f.uniforms.dataAxis=a,f.uniforms.screenOffset=b,f.uniforms.color=q[d+2],f.uniforms.angle=r[d+2],j.drawArrays(j.TRIANGLES,h[y],h[z]-h[y]))),s[d+2]&&(b[1^d]+=A*n*t[d+2],f.uniforms.dataAxis=c,f.uniforms.screenOffset=b,f.uniforms.color=u[d+2],f.uniforms.angle=v[d+2],j.drawArrays(j.TRIANGLES,w,x))}}(),k.drawTitle=function(){var a=[0,0],b=[0,0];return function(){for(var c=this.plot,d=this.shader,e=c.gl,f=c.screenBox,g=c.titleCenter,h=c.titleAngle,i=c.titleColor,g=c.titleCenter,j=c.pixelRatio,k=0;k<2;++k)b[k]=2*(g[k]*j-f[k])/(f[2+k]-f[k])-1;d.bind(),d.uniforms.dataAxis=a,d.uniforms.screenOffset=b,d.uniforms.angle=h,d.uniforms.color=i,e.drawArrays(e.TRIANGLES,this.titleOffset,this.titleCount)}}(),k.bind=function(){var a=[0,0],b=[0,0],c=[0,0];return function(){var d=this.plot,e=this.shader,f=d._tickBounds,g=d.dataBox,h=d.screenBox,i=d.viewBox;e.bind();for(var j=0;j<2;++j){var k=f[j],l=f[j+2],m=l-k,n=.5*(g[j+2]+g[j]),o=g[j+2]-g[j],p=i[j],q=i[j+2],r=q-p,s=h[j],t=h[j+2],u=t-s;b[j]=2*m/o*r/u,a[j]=2*(k-n)/o*r/u}c[1]=2*d.pixelRatio/(h[3]-h[1]),c[0]=c[1]*(h[3]-h[1])/(h[2]-h[0]),e.uniforms.dataScale=b,e.uniforms.dataShift=a,e.uniforms.textScale=c,this.vbo.bind(),e.attributes.textCoordinate.pointer()}}(),k.update=function(a){for(var b=[],c=a.ticks,d=a.bounds,e=0;e<2;++e){for(var f=[Math.floor(b.length/3)],g=[-(1/0)],i=c[e],j=0;j<i.length;++j){for(var k=i[j],l=k.x,m=k.text,n=k.font||"sans-serif",o=k.fontSize||12,p=h(n,m).data,q=1/(d[e+2]-d[e]),r=d[e],s=0;s<p.length;s+=2)b.push(p[s]*o,-p[s+1]*o,(l-r)*q);f.push(Math.floor(b.length/3)),g.push(l)}this.tickOffset[e]=f,this.tickX[e]=g}for(var e=0;e<2;++e){this.labelOffset[e]=Math.floor(b.length/3);for(var p=h(a.labelFont[e],a.labels[e]).data,o=a.labelSize[e],j=0;j<p.length;j+=2)b.push(p[j]*o,-p[j+1]*o,0);this.labelCount[e]=Math.floor(b.length/3)-this.labelOffset[e]}this.titleOffset=Math.floor(b.length/3);for(var p=h(a.titleFont,a.title).data,o=a.titleSize,j=0;j<p.length;j+=2)b.push(p[j]*o,-p[j+1]*o,0);this.titleCount=Math.floor(b.length/3)-this.titleOffset,this.vbo.update(b)},k.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":281,"binary-search-bounds":283,"gl-buffer":284,"gl-shader":299,"text-cache":420}],283:[function(a,b,c){"use strict";function d(a,b,c,d,e){var f=["function ",a,"(a,l,h,",d.join(","),"){",e?"":"var i=",c?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return e?b.indexOf("c")<0?f.push(";if(x===y){return m}else if(x<=y){"):f.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):f.push(";if(",b,"){i=m;"),c?f.push("l=m+1}else{h=m-1}"):f.push("h=m-1}else{l=m+1}"),f.push("}"),e?f.push("return -1};"):f.push("return i};"),f.join("")}function e(a,b,c,e){var f=new Function([d("A","x"+a+"y",b,["y"],e),d("P","c(x,y)"+a+"0",b,["y","c"],e),"function dispatchBsearch",c,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",c].join(""));return f()}b.exports={ge:e(">=",!1,"GE"),gt:e(">",!1,"GT"),lt:e("<",!0,"LT"),le:e("<=",!0,"LE"),eq:e("-",!0,"EQ",!0)}},{}],284:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":287}],285:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],286:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],287:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":285,buffer:48,dup:102}],288:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],289:[function(a,b,c){b.exports=a("cwise-compiler")},{"cwise-compiler":290}],290:[function(a,b,c){"use strict";function d(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function e(a){var b=new d;b.pre=a.pre,b.body=a.body,b.post=a.post;var c=a.args.slice(0);b.argTypes=c;for(var e=0;e<c.length;++e){var g=c[e];if("array"===g||"object"==typeof g&&g.blockIndices){if(b.argTypes[e]="array",b.arrayArgs.push(e),b.arrayBlockIndices.push(g.blockIndices?g.blockIndices:0),b.shimArgs.push("array"+e),e<b.pre.args.length&&b.pre.args[e].count>0)throw new Error("cwise: pre() block may not reference array args");if(e<b.post.args.length&&b.post.args[e].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===g)b.scalarArgs.push(e),b.shimArgs.push("scalar"+e);else if("index"===g){if(b.indexArgs.push(e),e<b.pre.args.length&&b.pre.args[e].count>0)throw new Error("cwise: pre() block may not reference array index");if(e<b.body.args.length&&b.body.args[e].lvalue)throw new Error("cwise: body() block may not write to array index");if(e<b.post.args.length&&b.post.args[e].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===g){if(b.shapeArgs.push(e),e<b.pre.args.length&&b.pre.args[e].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(e<b.body.args.length&&b.body.args[e].lvalue)throw new Error("cwise: body() block may not write to array shape");if(e<b.post.args.length&&b.post.args[e].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof g||!g.offset)throw new Error("cwise: Unknown argument type "+c[e]);b.argTypes[e]="offset",b.offsetArgs.push({array:g.array,offset:g.offset}),b.offsetArgIndex.push(e)}}if(b.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(b.pre.args.length>c.length)throw new Error("cwise: Too many arguments in pre() block");if(b.body.args.length>c.length)throw new Error("cwise: Too many arguments in body() block");if(b.post.args.length>c.length)throw new Error("cwise: Too many arguments in post() block");return b.debug=!!a.printCode||!!a.debug,b.funcName=a.funcName||"cwise",b.blockSize=a.blockSize||64,f(b)}var f=a("./lib/thunk.js");b.exports=e},{"./lib/thunk.js":292}],291:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f=a.length,g=b.arrayArgs.length,h=b.indexArgs.length>0,i=[],j=[],k=0,l=0;for(d=0;d<f;++d)j.push(["i",d,"=0"].join(""));for(e=0;e<g;++e)for(d=0;d<f;++d)l=k,k=a[d],0===d?j.push(["d",e,"s",d,"=t",e,"p",k].join("")):j.push(["d",e,"s",d,"=(t",e,"p",k,"-s",l,"*t",e,"p",l,")"].join(""));for(i.push("var "+j.join(",")),d=f-1;d>=0;--d)k=a[d],i.push(["for(i",d,"=0;i",d,"<s",k,";++i",d,"){"].join(""));for(i.push(c),d=0;d<f;++d){for(l=k,k=a[d],e=0;e<g;++e)i.push(["p",e,"+=d",e,"s",d].join(""));h&&(d>0&&i.push(["index[",l,"]-=s",l].join("")),i.push(["++index[",k,"]"].join(""))),i.push("}")}return i.join("\n")}function e(a,b,c,e){for(var f=b.length,g=c.arrayArgs.length,h=c.blockSize,i=c.indexArgs.length>0,j=[],k=0;k<g;++k)j.push(["var offset",k,"=p",k].join(""));for(var k=a;k<f;++k)j.push(["for(var j"+k+"=SS[",b[k],"]|0;j",k,">0;){"].join("")),j.push(["if(j",k,"<",h,"){"].join("")),j.push(["s",b[k],"=j",k].join("")),j.push(["j",k,"=0"].join("")),j.push(["}else{s",b[k],"=",h].join("")),j.push(["j",k,"-=",h,"}"].join("")),i&&j.push(["index[",b[k],"]=j",k].join(""));for(var k=0;k<g;++k){for(var l=["offset"+k],m=a;m<f;++m)l.push(["j",m,"*t",k,"p",b[m]].join(""));j.push(["p",k,"=(",l.join("+"),")"].join(""))}j.push(d(b,c,e));for(var k=a;k<f;++k)j.push("}");return j.join("\n")}function f(a){for(var b=0,c=a[0].length;b<c;){for(var d=1;d<a.length;++d)if(a[d][b]!==a[0][b])return b;++b}return b}function g(a,b,c){for(var d=a.body,e=[],f=[],g=0;g<a.args.length;++g){var h=a.args[g];if(!(h.count<=0)){var i=new RegExp(h.name,"g"),j="",k=b.arrayArgs.indexOf(g);switch(b.argTypes[g]){case"offset":var l=b.offsetArgIndex.indexOf(g),m=b.offsetArgs[l];k=m.array,j="+q"+l;case"array":j="p"+k+j;var n="l"+g,o="a"+k;if(0===b.arrayBlockIndices[k])1===h.count?"generic"===c[k]?h.lvalue?(e.push(["var ",n,"=",o,".get(",j,")"].join("")),d=d.replace(i,n),f.push([o,".set(",j,",",n,")"].join(""))):d=d.replace(i,[o,".get(",j,")"].join("")):d=d.replace(i,[o,"[",j,"]"].join("")):"generic"===c[k]?(e.push(["var ",n,"=",o,".get(",j,")"].join("")),d=d.replace(i,n),h.lvalue&&f.push([o,".set(",j,",",n,")"].join(""))):(e.push(["var ",n,"=",o,"[",j,"]"].join("")),d=d.replace(i,n),h.lvalue&&f.push([o,"[",j,"]=",n].join("")));else{for(var p=[h.name],q=[j],r=0;r<Math.abs(b.arrayBlockIndices[k]);r++)p.push("\\s*\\[([^\\]]+)\\]"),q.push("$"+(r+1)+"*t"+k+"b"+r);if(i=new RegExp(p.join(""),"g"),j=q.join("+"),"generic"===c[k])throw new Error("cwise: Generic arrays not supported in combination with blocks!");d=d.replace(i,[o,"[",j,"]"].join(""))}break;case"scalar":d=d.replace(i,"Y"+b.scalarArgs.indexOf(g));break;case"index":d=d.replace(i,"index");break;case"shape":d=d.replace(i,"shape")}}}return[e.join("\n"),d,f.join("\n")].join("\n").trim()}function h(a){for(var b=new Array(a.length),c=!0,d=0;d<a.length;++d){var e=a[d],f=e.match(/\d+/);f=f?f[0]:"",0===e.charAt(0)?b[d]="u"+e.charAt(1)+f:b[d]=e.charAt(0)+f,d>0&&(c=c&&b[d]===b[d-1])}return c?b[0]:b.join("")}function i(a,b){for(var c=b[1].length-Math.abs(a.arrayBlockIndices[0])|0,i=new Array(a.arrayArgs.length),k=new Array(a.arrayArgs.length),l=0;l<a.arrayArgs.length;++l)k[l]=b[2*l],i[l]=b[2*l+1];for(var m=[],n=[],o=[],p=[],q=[],l=0;l<a.arrayArgs.length;++l){a.arrayBlockIndices[l]<0?(o.push(0),p.push(c),m.push(c),n.push(c+a.arrayBlockIndices[l])):(o.push(a.arrayBlockIndices[l]),p.push(a.arrayBlockIndices[l]+c),m.push(0),n.push(a.arrayBlockIndices[l]));for(var r=[],s=0;s<i[l].length;s++)o[l]<=i[l][s]&&i[l][s]<p[l]&&r.push(i[l][s]-o[l]);q.push(r)}for(var t=["SS"],u=["'use strict'"],v=[],s=0;s<c;++s)v.push(["s",s,"=SS[",s,"]"].join(""));for(var l=0;l<a.arrayArgs.length;++l){t.push("a"+l),t.push("t"+l),t.push("p"+l);for(var s=0;s<c;++s)v.push(["t",l,"p",s,"=t",l,"[",o[l]+s,"]"].join(""));for(var s=0;s<Math.abs(a.arrayBlockIndices[l]);++s)v.push(["t",l,"b",s,"=t",l,"[",m[l]+s,"]"].join(""))}for(var l=0;l<a.scalarArgs.length;++l)t.push("Y"+l);if(a.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),a.indexArgs.length>0){for(var w=new Array(c),l=0;l<c;++l)w[l]="0";v.push(["index=[",w.join(","),"]"].join(""))}for(var l=0;l<a.offsetArgs.length;++l){for(var x=a.offsetArgs[l],y=[],s=0;s<x.offset.length;++s)0!==x.offset[s]&&(1===x.offset[s]?y.push(["t",x.array,"p",s].join("")):y.push([x.offset[s],"*t",x.array,"p",s].join("")));0===y.length?v.push("q"+l+"=0"):v.push(["q",l,"=",y.join("+")].join(""))}var z=j([].concat(a.pre.thisVars).concat(a.body.thisVars).concat(a.post.thisVars));v=v.concat(z),u.push("var "+v.join(","));for(var l=0;l<a.arrayArgs.length;++l)u.push("p"+l+"|=0");a.pre.body.length>3&&u.push(g(a.pre,a,k));var A=g(a.body,a,k),B=f(q);B<c?u.push(e(B,q[0],a,A)):u.push(d(q[0],a,A)),a.post.body.length>3&&u.push(g(a.post,a,k)),a.debug&&console.log("-----Generated cwise routine for ",b,":\n"+u.join("\n")+"\n----------");var C=[a.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",B,h(k)].join(""),D=new Function(["function ",C,"(",t.join(","),"){",u.join("\n"),"} return ",C].join(""));return D()}var j=a("uniq");b.exports=i},{uniq:293}],292:[function(a,b,c){"use strict";function d(a){var b=["'use strict'","var CACHED={}"],c=[],d=a.funcName+"_cwise_thunk";b.push(["return function ",d,"(",a.shimArgs.join(","),"){"].join(""));for(var f=[],g=[],h=[["array",a.arrayArgs[0],".shape.slice(",Math.max(0,a.arrayBlockIndices[0]),a.arrayBlockIndices[0]<0?","+a.arrayBlockIndices[0]+")":")"].join("")],i=[],j=[],k=0;k<a.arrayArgs.length;++k){var l=a.arrayArgs[k];c.push(["t",l,"=array",l,".dtype,","r",l,"=array",l,".order"].join("")),f.push("t"+l),f.push("r"+l),g.push("t"+l),g.push("r"+l+".join()"),h.push("array"+l+".data"),h.push("array"+l+".stride"),h.push("array"+l+".offset|0"),k>0&&(i.push("array"+a.arrayArgs[0]+".shape.length===array"+l+".shape.length+"+(Math.abs(a.arrayBlockIndices[0])-Math.abs(a.arrayBlockIndices[k]))),j.push("array"+a.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[0])+"]===array"+l+".shape[shapeIndex+"+Math.max(0,a.arrayBlockIndices[k])+"]"))}a.arrayArgs.length>1&&(b.push("if (!("+i.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),b.push("for(var shapeIndex=array"+a.arrayArgs[0]+".shape.length-"+Math.abs(a.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),b.push("if (!("+j.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),b.push("}"));for(var k=0;k<a.scalarArgs.length;++k)h.push("scalar"+a.scalarArgs[k]);c.push(["type=[",g.join(","),"].join()"].join("")),c.push("proc=CACHED[type]"),b.push("var "+c.join(",")),b.push(["if(!proc){","CACHED[type]=proc=compile([",f.join(","),"])}","return proc(",h.join(","),")}"].join("")),a.debug&&console.log("-----Generated thunk:\n"+b.join("\n")+"\n----------");var m=new Function("compile",b.join("\n"));return m(e.bind(void 0,a))}var e=a("./compile.js");b.exports=d},{"./compile.js":291}],293:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],294:[function(a,b,c){"use strict";function d(a){var b=a.getParameter(a.FRAMEBUFFER_BINDING),c=a.getParameter(a.RENDERBUFFER_BINDING),d=a.getParameter(a.TEXTURE_BINDING_2D);return[b,c,d]}function e(a,b){a.bindFramebuffer(a.FRAMEBUFFER,b[0]),a.bindRenderbuffer(a.RENDERBUFFER,b[1]),a.bindTexture(a.TEXTURE_2D,b[2])}function f(a,b){var c=a.getParameter(b.MAX_COLOR_ATTACHMENTS_WEBGL);s=new Array(c+1);for(var d=0;d<=c;++d){for(var e=new Array(c),f=0;f<d;++f)e[f]=a.COLOR_ATTACHMENT0+f;for(var f=d;f<c;++f)e[f]=a.NONE;s[d]=e}}function g(a){switch(a){case o:throw new Error("gl-fbo: Framebuffer unsupported");case p:throw new Error("gl-fbo: Framebuffer incomplete attachment");case q:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function h(a,b,c,d,e,f){if(!d)return null;var g=n(a,b,c,e,d);return g.magFilter=a.NEAREST,g.minFilter=a.NEAREST,g.mipSamples=1,g.bind(),a.framebufferTexture2D(a.FRAMEBUFFER,f,a.TEXTURE_2D,g.handle,0),g}function i(a,b,c,d,e){var f=a.createRenderbuffer();return a.bindRenderbuffer(a.RENDERBUFFER,f),a.renderbufferStorage(a.RENDERBUFFER,d,b,c),a.framebufferRenderbuffer(a.FRAMEBUFFER,e,a.RENDERBUFFER,f),f}function j(a){var b=d(a.gl),c=a.gl,f=a.handle=c.createFramebuffer(),j=a._shape[0],k=a._shape[1],l=a.color.length,m=a._ext,n=a._useStencil,o=a._useDepth,p=a._colorType;c.bindFramebuffer(c.FRAMEBUFFER,f);for(var q=0;q<l;++q)a.color[q]=h(c,j,k,p,c.RGBA,c.COLOR_ATTACHMENT0+q);0===l?(a._color_rb=i(c,j,k,c.RGBA4,c.COLOR_ATTACHMENT0),m&&m.drawBuffersWEBGL(s[0])):l>1&&m.drawBuffersWEBGL(s[l]);var r=c.getExtension("WEBGL_depth_texture");r?n?a.depth=h(c,j,k,r.UNSIGNED_INT_24_8_WEBGL,c.DEPTH_STENCIL,c.DEPTH_STENCIL_ATTACHMENT):o&&(a.depth=h(c,j,k,c.UNSIGNED_SHORT,c.DEPTH_COMPONENT,c.DEPTH_ATTACHMENT)):o&&n?a._depth_rb=i(c,j,k,c.DEPTH_STENCIL,c.DEPTH_STENCIL_ATTACHMENT):o?a._depth_rb=i(c,j,k,c.DEPTH_COMPONENT16,c.DEPTH_ATTACHMENT):n&&(a._depth_rb=i(c,j,k,c.STENCIL_INDEX,c.STENCIL_ATTACHMENT));var t=c.checkFramebufferStatus(c.FRAMEBUFFER);if(t!==c.FRAMEBUFFER_COMPLETE){a._destroyed=!0,c.bindFramebuffer(c.FRAMEBUFFER,null),c.deleteFramebuffer(a.handle),a.handle=null,a.depth&&(a.depth.dispose(),a.depth=null),a._depth_rb&&(c.deleteRenderbuffer(a._depth_rb),a._depth_rb=null);for(var q=0;q<a.color.length;++q)a.color[q].dispose(),a.color[q]=null;a._color_rb&&(c.deleteRenderbuffer(a._color_rb),a._color_rb=null),e(c,b),g(t)}e(c,b)}function k(a,b,c,d,e,f,g,h){this.gl=a,this._shape=[0|b,0|c],this._destroyed=!1,this._ext=h,this.color=new Array(e);for(var i=0;i<e;++i)this.color[i]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=d,this._useDepth=f,this._useStencil=g;var k=this,l=[0|b,0|c];Object.defineProperties(l,{0:{get:function(){return k._shape[0]},set:function(a){return k.width=a}},1:{get:function(){return k._shape[1]},set:function(a){return k.height=a}}}),this._shapeVector=l,j(this)}function l(a,b,c){if(a._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(a._shape[0]!==b||a._shape[1]!==c){var f=a.gl,h=f.getParameter(f.MAX_RENDERBUFFER_SIZE);if(b<0||b>h||c<0||c>h)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");a._shape[0]=b,a._shape[1]=c;for(var i=d(f),j=0;j<a.color.length;++j)a.color[j].shape=a._shape;a._color_rb&&(f.bindRenderbuffer(f.RENDERBUFFER,a._color_rb),f.renderbufferStorage(f.RENDERBUFFER,f.RGBA4,a._shape[0],a._shape[1])),a.depth&&(a.depth.shape=a._shape),a._depth_rb&&(f.bindRenderbuffer(f.RENDERBUFFER,a._depth_rb),a._useDepth&&a._useStencil?f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_STENCIL,a._shape[0],a._shape[1]):a._useDepth?f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,a._shape[0],a._shape[1]):a._useStencil&&f.renderbufferStorage(f.RENDERBUFFER,f.STENCIL_INDEX,a._shape[0],a._shape[1])),f.bindFramebuffer(f.FRAMEBUFFER,a.handle);var k=f.checkFramebufferStatus(f.FRAMEBUFFER);k!==f.FRAMEBUFFER_COMPLETE&&(a.dispose(),e(f,i),g(k)),e(f,i)}}function m(a,b,c,d){o||(o=a.FRAMEBUFFER_UNSUPPORTED,p=a.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,q=a.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=a.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var e=a.getExtension("WEBGL_draw_buffers");if(!s&&e&&f(a,e),Array.isArray(b)&&(d=c,c=0|b[1],b=0|b[0]),"number"!=typeof b)throw new Error("gl-fbo: Missing shape parameter");var g=a.getParameter(a.MAX_RENDERBUFFER_SIZE);if(b<0||b>g||c<0||c>g)throw new Error("gl-fbo: Parameters are too large for FBO");d=d||{};var h=1;if("color"in d){if(h=Math.max(0|d.color,0),h<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(h>1){if(!e)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(h>a.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+h+" draw buffers")}}var i=a.UNSIGNED_BYTE,j=a.getExtension("OES_texture_float");if(d["float"]&&h>0){if(!j)throw new Error("gl-fbo: Context does not support floating point textures");i=a.FLOAT}else d.preferFloat&&h>0&&j&&(i=a.FLOAT);var l=!0;"depth"in d&&(l=!!d.depth);var m=!1;return"stencil"in d&&(m=!!d.stencil),new k(a,b,c,i,h,l,m,e)}var n=a("gl-texture2d");b.exports=m;var o,p,q,r,s=null,t=k.prototype;Object.defineProperties(t,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(a){if(Array.isArray(a)||(a=[0|a,0|a]),2!==a.length)throw new Error("gl-fbo: Shape vector must be length 2");var b=0|a[0],c=0|a[1];return l(this,b,c),[b,c]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(a){return a=0|a,l(this,a,this._shape[1]),a},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(a){return a=0|a,l(this,this._shape[0],a),a},enumerable:!1}}),t.bind=function(){if(!this._destroyed){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.handle),a.viewport(0,0,this._shape[0],this._shape[1])}},t.dispose=function(){if(!this._destroyed){this._destroyed=!0;var a=this.gl;a.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(a.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var b=0;b<this.color.length;++b)this.color[b].dispose(),this.color[b]=null;this._color_rb&&(a.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":295}],295:[function(a,b,c){arguments[4][164][0].apply(c,arguments)},{dup:164,ndarray:987,"ndarray-ops":982,"typedarray-pool":297}],296:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],297:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":288,buffer:48,dup:102}],298:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.coord=[a,b],this.id=c,this.value=d,this.distance=e}function e(a,b,c){this.gl=a,this.fbo=b,this.buffer=c,this._readTimeout=null;var d=this;this._readCallback=function(){d.gl&&(b.bind(),a.readPixels(0,0,b.shape[0],b.shape[1],a.RGBA,a.UNSIGNED_BYTE,d.buffer),d._readTimeout=null)}}function f(a,b){var c=g(a,b),d=h.mallocUint8(b[0]*b[1]*4);return new e(a,c,d)}b.exports=f;var g=a("gl-fbo"),h=a("typedarray-pool"),i=a("ndarray"),j=a("bit-twiddle").nextPow2,k=a("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(255>_inline_4_arg0_||255>_inline_4_arg1_||255>_inline_4_arg2_||255>_inline_4_arg3_){var _inline_4_l=_inline_4_arg4_-_inline_4_arg6_[0],_inline_4_a=_inline_4_arg5_-_inline_4_arg6_[1],_inline_4_f=_inline_4_l*_inline_4_l+_inline_4_a*_inline_4_a;_inline_4_f<this_closestD2&&(this_closestD2=_inline_4_f,this_closestX=_inline_4_arg6_[0],this_closestY=_inline_4_arg6_[1])}}",args:[{name:"_inline_4_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_4_a","_inline_4_f","_inline_4_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),l=e.prototype;Object.defineProperty(l,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(a){if(this.gl){this.fbo.shape=a;var b=this.fbo.shape[0],c=this.fbo.shape[1];if(c*b*4>this.buffer.length){h.free(this.buffer);for(var d=this.buffer=h.mallocUint8(j(c*b*4)),e=0;e<c*b*4;++e)d[e]=255}return a}}}),l.begin=function(){var a=this.gl;this.shape;a&&(this.fbo.bind(),a.clearColor(1,1,1,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT))},l.end=function(){var a=this.gl;a&&(a.bindFramebuffer(a.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},l.query=function(a,b,c){if(!this.gl)return null;var e=this.fbo.shape.slice();a=0|a,b=0|b,"number"!=typeof c&&(c=1);var f=0|Math.min(Math.max(a-c,0),e[0]),g=0|Math.min(Math.max(a+c,0),e[0]),h=0|Math.min(Math.max(b-c,0),e[1]),j=0|Math.min(Math.max(b+c,0),e[1]);if(g<=f||j<=h)return null;var l=[g-f,j-h],m=i(this.buffer,[l[0],l[1],4],[4,4*e[0],1],4*(f+e[0]*h)),n=k(m.hi(l[0],l[1],1),c,c),o=n[0],p=n[1];if(o<0||Math.pow(this.radius,2)<n[2])return null;var q=m.get(o,p,0),r=m.get(o,p,1),s=m.get(o,p,2),t=m.get(o,p,3);return new d(o+f|0,p+h|0,q,[r,s,t],Math.sqrt(n[2]))},l.dispose=function(){this.gl&&(this.fbo.dispose(),h.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":288,"cwise/lib/wrapper":289,"gl-fbo":294,ndarray:987,"typedarray-pool":297}],299:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{"./lib/GLError":300,"./lib/create-attributes":301,"./lib/create-uniforms":302,"./lib/reflect":303,"./lib/runtime-reflect":304,"./lib/shader-cache":305,dup:76}],300:[function(a,b,c){arguments[4][77][0].apply(c,arguments)},{dup:77}],301:[function(a,b,c){arguments[4][78][0].apply(c,arguments)},{"./GLError":300,dup:78}],302:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{"./GLError":300,"./reflect":303,dup:79}],303:[function(a,b,c){arguments[4][80][0].apply(c,arguments)},{dup:80}],304:[function(a,b,c){arguments[4][81][0].apply(c,arguments)},{dup:81}],305:[function(a,b,c){arguments[4][82][0].apply(c,arguments)},{"./GLError":300,dup:82,"gl-format-compiler-error":306,
"weakmap-shim":322}],306:[function(a,b,c){arguments[4][83][0].apply(c,arguments)},{"add-line-numbers":307,dup:83,"gl-constants/lookup":311,"glsl-shader-name":312,"sprintf-js":319}],307:[function(a,b,c){arguments[4][84][0].apply(c,arguments)},{dup:84,"pad-left":308}],308:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85,"repeat-string":309}],309:[function(a,b,c){arguments[4][86][0].apply(c,arguments)},{dup:86}],310:[function(a,b,c){arguments[4][87][0].apply(c,arguments)},{dup:87}],311:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{"./1.0/numbers":310,dup:88}],312:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{"atob-lite":313,dup:89,"glsl-tokenizer":318}],313:[function(a,b,c){arguments[4][90][0].apply(c,arguments)},{dup:90}],314:[function(a,b,c){arguments[4][91][0].apply(c,arguments)},{"./lib/builtins":315,"./lib/literals":316,"./lib/operators":317,dup:91}],315:[function(a,b,c){arguments[4][92][0].apply(c,arguments)},{dup:92}],316:[function(a,b,c){arguments[4][93][0].apply(c,arguments)},{dup:93}],317:[function(a,b,c){arguments[4][94][0].apply(c,arguments)},{dup:94}],318:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{"./index":314,dup:95}],319:[function(a,b,c){arguments[4][96][0].apply(c,arguments)},{dup:96}],320:[function(a,b,c){arguments[4][97][0].apply(c,arguments)},{"./hidden-store.js":321,dup:97}],321:[function(a,b,c){arguments[4][98][0].apply(c,arguments)},{dup:98}],322:[function(a,b,c){arguments[4][99][0].apply(c,arguments)},{"./create-store.js":320,dup:99}],323:[function(a,b,c){"use strict";function d(a,b){return"object"==typeof b&&null!==b||(b={}),e(a,b.canvas||f,b.context||g,b)}b.exports=d;var e=a("./lib/vtext"),f=null,g=null;"undefined"!=typeof document&&(f=document.createElement("canvas"),f.width=8192,f.height=1024,g=f.getContext("2d"))},{"./lib/vtext":324}],324:[function(a,b,c){"use strict";function d(a,b,c){for(var d=b.textAlign||"start",e=b.textBaseline||"alphabetic",f=[1<<30,1<<30],g=[0,0],h=a.length,i=0;i<h;++i)for(var j=a[i],k=0;k<2;++k)f[k]=0|Math.min(f[k],j[k]),g[k]=0|Math.max(g[k],j[k]);var l=0;switch(d){case"center":l=-.5*(f[0]+g[0]);break;case"right":case"end":l=-g[0];break;case"left":case"start":l=-f[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+d+"'")}var m=0;switch(e){case"hanging":case"top":m=-f[1];break;case"middle":m=-.5*(f[1]+g[1]);break;case"alphabetic":case"ideographic":m=-3*c;break;case"bottom":m=-g[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+e+"'")}var n=1/c;return"lineHeight"in b?n*=+b.lineHeight:"width"in b?n=b.width/(g[0]-f[0]):"height"in b&&(n=b.height/(g[1]-f[1])),a.map(function(a){return[n*(a[0]+l),n*(a[1]+m)]})}function e(a,b,c,d){var e=0|Math.ceil(b.measureText(c).width+2*d);if(e>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var f=3*d;a.height<f&&(a.height=f),b.fillStyle="#000",b.fillRect(0,0,a.width,a.height),b.fillStyle="#fff",b.fillText(c,d,2*d);var g=b.getImageData(0,0,e,f),h=k(g.data,[f,e,4]);return h.pick(-1,-1,0).transpose(1,0)}function f(a,b){var c=j(a,128);return b?l(c.cells,c.positions,.25):{edges:c.cells,positions:c.positions}}function g(a,b,c,e){var g=f(a,e),h=d(g.positions,b,c),i=g.edges,j="ccw"===b.orientation;if(m(h,i),b.polygons||b.polygon||b.polyline){for(var k=o(i,h),l=new Array(k.length),p=0;p<k.length;++p){for(var q=k[p],r=new Array(q.length),s=0;s<q.length;++s){for(var t=q[s],u=new Array(t.length),v=0;v<t.length;++v)u[v]=h[t[v]].slice();j&&u.reverse(),r[s]=u}l[p]=r}return l}return b.triangles||b.triangulate||b.triangle?{cells:n(h,i,{delaunay:!1,exterior:!1,interior:!0}),positions:h}:{edges:i,positions:h}}function h(a,b,c){try{return g(a,b,c,!0)}catch(d){}try{return g(a,b,c,!1)}catch(d){}return b.polygons||b.polyline||b.polygon?[]:b.triangles||b.triangulate||b.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function i(a,b,c,d){var f=d.size||64,g=d.font||"normal";c.font=f+"px "+g,c.textAlign="start",c.textBaseline="alphabetic",c.direction="ltr";var i=e(b,c,a,f);return h(i,d,f)}b.exports=i,b.exports.processPixels=h;var j=a("surface-nets"),k=a("ndarray"),l=a("simplify-planar-graph"),m=a("clean-pslg"),n=a("cdt2d"),o=a("planar-graph-to-polyline")},{cdt2d:325,"clean-pslg":336,ndarray:987,"planar-graph-to-polyline":393,"simplify-planar-graph":397,"surface-nets":419}],325:[function(a,b,c){"use strict";function d(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function e(a,b){return a[0]-b[0]||a[1]-b[1]}function f(a){return a.map(d).sort(e)}function g(a,b,c){return b in a?a[b]:c}function h(a,b,c){Array.isArray(b)?(c=c||{},b=b||[]):(c=b||{},b=[]);var d=!!g(c,"delaunay",!0),e=!!g(c,"interior",!0),h=!!g(c,"exterior",!0),m=!!g(c,"infinity",!1);if(!e&&!h||0===a.length)return[];var n=i(a,b);if(d||e!==h||m){for(var o=j(a.length,f(b)),p=0;p<n.length;++p){var q=n[p];o.addTriangle(q[0],q[1],q[2])}return d&&k(a,o),h?e?m?l(o,0,m):o.cells():l(o,1,m):l(o,-1)}return n}var i=a("./lib/monotone"),j=a("./lib/triangulation"),k=a("./lib/delaunay"),l=a("./lib/filter");b.exports=h},{"./lib/delaunay":326,"./lib/filter":327,"./lib/monotone":328,"./lib/triangulation":329}],326:[function(a,b,c){"use strict";function d(a,b,c,d,e,g){var h=b.opposite(d,e);if(!(h<0)){if(e<d){var i=d;d=e,e=i,i=g,g=h,h=i}b.isConstraint(d,e)||f(a[d],a[e],a[g],a[h])<0&&c.push(d,e)}}function e(a,b){for(var c=[],e=a.length,g=b.stars,h=0;h<e;++h)for(var i=g[h],j=1;j<i.length;j+=2){var k=i[j];if(!(k<h||b.isConstraint(h,k))){for(var l=i[j-1],m=-1,n=1;n<i.length;n+=2)if(i[n-1]===k){m=i[n];break}m<0||f(a[h],a[k],a[l],a[m])<0&&c.push(h,k)}}for(;c.length>0;){for(var k=c.pop(),h=c.pop(),l=-1,m=-1,i=g[h],o=1;o<i.length;o+=2){var p=i[o-1],q=i[o];p===k?m=q:q===k&&(l=p)}l<0||m<0||f(a[h],a[k],a[l],a[m])>=0||(b.flip(h,k),d(a,b,c,l,h,m),d(a,b,c,h,m,l),d(a,b,c,m,k,l),d(a,b,c,k,l,m))}}var f=a("robust-in-sphere")[4];a("binary-search-bounds");b.exports=e},{"binary-search-bounds":283,"robust-in-sphere":330}],327:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){this.cells=a,this.neighbor=b,this.flags=d,this.constraint=c,this.active=e,this.next=f,this.boundary=g}function e(a,b){return a[0]-b[0]||a[1]-b[1]||a[2]-b[2]}function f(a,b){for(var c=a.cells(),f=c.length,g=0;g<f;++g){var h=c[g],i=h[0],j=h[1],k=h[2];j<k?j<i&&(h[0]=j,h[1]=k,h[2]=i):k<i&&(h[0]=k,h[1]=i,h[2]=j)}c.sort(e);for(var l=new Array(f),g=0;g<l.length;++g)l[g]=0;var m=[],n=[],o=new Array(3*f),p=new Array(3*f),q=null;b&&(q=[]);for(var r=new d(c,o,p,l,m,n,q),g=0;g<f;++g)for(var h=c[g],s=0;s<3;++s){var i=h[s],j=h[(s+1)%3],t=o[3*g+s]=r.locate(j,i,a.opposite(j,i)),u=p[3*g+s]=a.isConstraint(i,j);t<0&&(u?n.push(g):(m.push(g),l[g]=1),b&&q.push([j,i,-1]))}return r}function g(a,b,c){for(var d=0,e=0;e<a.length;++e)b[e]===c&&(a[d++]=a[e]);return a.length=d,a}function h(a,b,c){var d=f(a,c);if(0===b)return c?d.cells.concat(d.boundary):d.cells;for(var e=1,h=d.active,i=d.next,j=d.flags,k=d.cells,l=d.constraint,m=d.neighbor;h.length>0||i.length>0;){for(;h.length>0;){var n=h.pop();if(j[n]!==-e){j[n]=e;for(var o=(k[n],0);o<3;++o){var p=m[3*n+o];p>=0&&0===j[p]&&(l[3*n+o]?i.push(p):(h.push(p),j[p]=e))}}}var q=i;i=h,h=q,i.length=0,e=-e}var r=g(k,j,b);return c?r.concat(d.boundary):r}var i=a("binary-search-bounds");b.exports=h;var j=d.prototype;j.locate=function(){var a=[0,0,0];return function(b,c,d){var f=b,g=c,h=d;return c<d?c<b&&(f=c,g=d,h=b):d<b&&(f=d,g=b,h=c),f<0?-1:(a[0]=f,a[1]=g,a[2]=h,i.eq(this.cells,a,e))}}()},{"binary-search-bounds":283}],328:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.a=a,this.b=b,this.idx=c,this.lowerIds=d,this.upperIds=e}function e(a,b,c,d){this.a=a,this.b=b,this.type=c,this.idx=d}function f(a,b){var c=a.a[0]-b.a[0]||a.a[1]-b.a[1]||a.type-b.type;return c?c:a.type!==o&&(c=n(a.a,a.b,b.b))?c:a.idx-b.idx}function g(a,b){return n(a.a,a.b,b)}function h(a,b,c,d,e){for(var f=m.lt(b,d,g),h=m.gt(b,d,g),i=f;i<h;++i){for(var j=b[i],k=j.lowerIds,l=k.length;l>1&&n(c[k[l-2]],c[k[l-1]],d)>0;)a.push([k[l-1],k[l-2],e]),l-=1;k.length=l,k.push(e);for(var o=j.upperIds,l=o.length;l>1&&n(c[o[l-2]],c[o[l-1]],d)<0;)a.push([o[l-2],o[l-1],e]),l-=1;o.length=l,o.push(e)}}function i(a,b){var c;return(c=a.a[0]<b.a[0]?n(a.a,a.b,b.a):n(b.b,b.a,a.a))?c:(c=b.b[0]<a.b[0]?n(a.a,a.b,b.b):n(b.b,b.a,a.b),c||a.idx-b.idx)}function j(a,b,c){var e=m.le(a,c,i),f=a[e],g=f.upperIds,h=g[g.length-1];f.upperIds=[h],a.splice(e+1,0,new d(c.a,c.b,c.idx,[h],g))}function k(a,b,c){var d=c.a;c.a=c.b,c.b=d;var e=m.eq(a,c,i),f=a[e],g=a[e-1];g.upperIds=f.upperIds,a.splice(e,1)}function l(a,b){for(var c=a.length,g=b.length,i=[],l=0;l<c;++l)i.push(new e(a[l],null,o,l));for(var l=0;l<g;++l){var m=b[l],n=a[m[0]],r=a[m[1]];n[0]<r[0]?i.push(new e(n,r,q,l),new e(r,n,p,l)):n[0]>r[0]&&i.push(new e(r,n,q,l),new e(n,r,p,l))}i.sort(f);for(var s=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),t=[new d([s,1],[s,0],(-1),[],[],[],[])],u=[],l=0,v=i.length;l<v;++l){var w=i[l],x=w.type;x===o?h(u,t,a,w.a,w.idx):x===q?j(t,a,w):k(t,a,w)}return u}var m=a("binary-search-bounds"),n=a("robust-orientation")[3],o=0,p=1,q=2;b.exports=l},{"binary-search-bounds":283,"robust-orientation":996}],329:[function(a,b,c){"use strict";function d(a,b){this.stars=a,this.edges=b}function e(a,b,c){for(var d=1,e=a.length;d<e;d+=2)if(a[d-1]===b&&a[d]===c)return a[d-1]=a[e-2],a[d]=a[e-1],void(a.length=e-2)}function f(a,b){for(var c=new Array(a),e=0;e<a;++e)c[e]=[];return new d(c,b)}var g=a("binary-search-bounds");b.exports=f;var h=d.prototype;h.isConstraint=function(){function a(a,b){return a[0]-b[0]||a[1]-b[1]}var b=[0,0];return function(c,d){return b[0]=Math.min(c,d),b[1]=Math.max(c,d),g.eq(this.edges,b,a)>=0}}(),h.removeTriangle=function(a,b,c){var d=this.stars;e(d[a],b,c),e(d[b],c,a),e(d[c],a,b)},h.addTriangle=function(a,b,c){var d=this.stars;d[a].push(b,c),d[b].push(c,a),d[c].push(a,b)},h.opposite=function(a,b){for(var c=this.stars[b],d=1,e=c.length;d<e;d+=2)if(c[d]===a)return c[d-1];return-1},h.flip=function(a,b){var c=this.opposite(a,b),d=this.opposite(b,a);this.removeTriangle(a,b,c),this.removeTriangle(b,a,d),this.addTriangle(a,d,c),this.addTriangle(b,c,d)},h.edges=function(){for(var a=this.stars,b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=0,g=e.length;f<g;f+=2)b.push([e[f],e[f+1]]);return b},h.cells=function(){for(var a=this.stars,b=[],c=0,d=a.length;c<d;++c)for(var e=a[c],f=0,g=e.length;f<g;f+=2){var h=e[f],i=e[f+1];c<Math.min(h,i)&&b.push([c,h,i])}return b}},{"binary-search-bounds":283}],330:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;c<a;++c){b[c]=new Array(a);for(var d=0;d<a;++d)b[c][d]=["m",d,"[",a-c-2,"]"].join("")}return b}function f(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",f(a.slice(0,b)),",",f(a.slice(b)),")"].join("")}function g(a,b){if("m"===a.charAt(0)){if("w"===b.charAt(0)){var c=a.split("[");return["w",b.substr(1),"m",c[0].substr(1)].join("")}return["prod(",a,",",b,")"].join("")}return g(b,a)}function h(a){return a&!0?"-":""}function i(a){if(2===a.length)return[["diff(",g(a[0][0],a[1][1]),",",g(a[1][0],a[0][1]),")"].join("")];for(var b=[],c=0;c<a.length;++c)b.push(["scale(",f(i(d(a,c))),",",h(c),a[0][c],")"].join(""));return b}function j(a,b){for(var c=[],d=0;d<b-2;++d)c.push(["prod(m",a,"[",d,"],m",a,"[",d,"])"].join(""));return f(c)}function k(a){for(var b=[],c=[],g=e(a),h=0;h<a;++h)g[0][h]="1",g[a-1][h]="w"+h;for(var h=0;h<a;++h)0===(1&h)?b.push.apply(b,i(d(g,h))):c.push.apply(c,i(d(g,h)));for(var k=f(b),l=f(c),m="exactInSphere"+a,n=[],h=0;h<a;++h)n.push("m"+h);for(var o=["function ",m,"(",n.join(),"){"],h=0;h<a;++h){o.push("var w",h,"=",j(h,a),";");for(var p=0;p<a;++p)p!==h&&o.push("var w",h,"m",p,"=scale(w",h,",m",p,"[0]);")}o.push("var p=",k,",n=",l,",d=diff(p,n);return d[d.length-1];}return ",m);var u=new Function("sum","diff","prod","scale",o.join(""));return u(r,s,q,t)}function l(){return 0}function m(){return 0}function n(){return 0}function o(a){var b=v[a.length];return b||(b=v[a.length]=k(a.length)),b.apply(void 0,a)}function p(){for(;v.length<=u;)v.push(k(v.length));for(var a=[],c=["slow"],d=0;d<=u;++d)a.push("a"+d),c.push("o"+d);for(var e=["function testInSphere(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;d<=u;++d)e.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),c.push(e.join(""));var f=Function.apply(void 0,c);b.exports=f.apply(void 0,[o].concat(v));for(var d=0;d<=u;++d)b.exports[d]=v[d]}var q=a("two-product"),r=a("robust-sum"),s=a("robust-subtract"),t=a("robust-scale"),u=6,v=[l,m,n];p()},{"robust-scale":332,"robust-subtract":333,"robust-sum":334,"two-product":335}],331:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{dup:36}],332:[function(a,b,c){arguments[4][37][0].apply(c,arguments)},{dup:37,"two-product":335,"two-sum":331}],333:[function(a,b,c){"use strict";function d(a,b){var c=a+b,d=c-a,e=c-d,f=b-d,g=a-e,h=g+f;return h?[h,c]:[c]}function e(a,b){var c=0|a.length,e=0|b.length;if(1===c&&1===e)return d(a[0],-b[0]);var f,g,h=c+e,i=new Array(h),j=0,k=0,l=0,m=Math.abs,n=a[k],o=m(n),p=-b[l],q=m(p);o<q?(g=n,k+=1,k<c&&(n=a[k],o=m(n))):(g=p,l+=1,l<e&&(p=-b[l],q=m(p))),k<c&&o<q||l>=e?(f=n,k+=1,k<c&&(n=a[k],o=m(n))):(f=p,l+=1,l<e&&(p=-b[l],q=m(p)));for(var r,s,t,u,v,w=f+g,x=w-f,y=g-x,z=y,A=w;k<c&&l<e;)o<q?(f=n,k+=1,k<c&&(n=a[k],o=m(n))):(f=p,l+=1,l<e&&(p=-b[l],q=m(p))),g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r;for(;k<c;)f=n,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,k+=1,k<c&&(n=a[k]);for(;l<e;)f=p,g=z,w=f+g,x=w-f,y=g-x,y&&(i[j++]=y),r=A+w,s=r-A,t=r-s,u=w-s,v=A-t,z=v+u,A=r,l+=1,l<e&&(p=-b[l]);return z&&(i[j++]=z),A&&(i[j++]=A),j||(i[j++]=0),i.length=j,i}b.exports=e},{}],334:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],335:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],336:[function(a,b,c){"use strict";function d(a){var b=u(a),c=t(s(b),a);return c<0?[b,w(b,1/0)]:c>0?[w(b,-(1/0)),b]:[b,b]}function e(a,b){for(var c=new Array(b.length),d=0;d<b.length;++d){var e=b[d],f=a[e[0]],g=a[e[1]];c[d]=[Math.min(f[0],g[0]),Math.min(f[1],g[1]),Math.max(f[0],g[0]),Math.max(f[1],g[1])]}return c}function f(a){for(var b=new Array(a.length),c=0;c<a.length;++c){var d=a[c];b[c]=[d[0],d[1],d[0],d[1]]}return b}function g(a,b,c){var d=[];return q(c,function(c,e){var f=b[c],g=b[e];if(f[0]!==g[0]&&f[0]!==g[1]&&f[1]!==g[0]&&f[1]!==g[1]){var h=a[f[0]],i=a[f[1]],j=a[g[0]],k=a[g[1]];r(h,i,j,k)&&d.push([c,e])}}),d}function h(a,b,c,d){var e=[];return q(c,d,function(c,d){var f=b[c];if(f[0]!==d&&f[1]!==d){var g=a[d],h=a[f[0]],i=a[f[1]];r(h,i,g,g)&&e.push([c,d])}}),e}function i(a,b,c,d,e){function f(b){if(b>=a.length)return g[b-a.length];var c=a[b];return[s(c[0]),s(c[1])]}for(var g=[],h=0;h<c.length;++h){var i=c[h],j=i[0],k=i[1],l=b[j],m=b[k],n=x(v(a[l[0]]),v(a[l[1]]),v(a[m[0]]),v(a[m[1]]));if(n){var o=g.length+a.length;g.push(n),d.push([j,o],[k,o])}}d.sort(function(a,b){if(a[0]!==b[0])return a[0]-b[0];var c=f(a[1]),d=f(b[1]);return t(c[0],d[0])||t(c[1],d[1])});for(var h=d.length-1;h>=0;--h){var p=d[h],j=p[0],q=b[j],r=q[0],u=q[1],w=a[r],y=a[u];if((w[0]-y[0]||w[1]-y[1])<0){var z=r;r=u,u=z}q[0]=r;var A,B=q[1]=p[1];for(e&&(A=q[2]);h>0&&d[h-1][0]===j;){var p=d[--h],C=p[1];e?b.push([B,C,A]):b.push([B,C]),B=C}e?b.push([B,u,A]):b.push([B,u])}return g}function j(a,b,c){for(var e=a.length+b.length,f=new p(e),g=c,h=0;h<b.length;++h){var i=b[h],j=d(i[0]),k=d(i[1]);g.push([j[0],k[0],j[1],k[1]]),a.push([u(i[0]),u(i[1])])}q(g,function(a,b){f.link(a,b)});for(var l=0,m=!0,n=new Array(e),h=0;h<e;++h){var o=f.find(h);o===h?(n[h]=l,a[l++]=a[h]):(m=!1,n[h]=-1)}if(a.length=l,m)return null;for(var h=0;h<e;++h)n[h]<0&&(n[h]=n[f.find(h)]);return n}function k(a,b){return a[0]-b[0]||a[1]-b[1]}function l(a,b){var c=a[0]-b[0]||a[1]-b[1];return c?c:a[2]<b[2]?-1:a[2]>b[2]?1:0}function m(a,b,c){if(0!==a.length){if(b)for(var d=0;d<a.length;++d){var e=a[d],f=b[e[0]],g=b[e[1]];e[0]=Math.min(f,g),e[1]=Math.max(f,g)}else for(var d=0;d<a.length;++d){var e=a[d],f=e[0],g=e[1];e[0]=Math.min(f,g),e[1]=Math.max(f,g)}c?a.sort(l):a.sort(k);for(var h=1,d=1;d<a.length;++d){var i=a[d-1],j=a[d];(j[0]!==i[0]||j[1]!==i[1]||c&&j[2]!==i[2])&&(a[h++]=j)}a.length=h}}function n(a,b,c){var d=e(a,b),k=g(a,b,d),l=f(a),n=h(a,b,d,l),o=i(a,b,k,n,c),p=j(a,o,l);return m(b,p,c),!!p||(k.length>0||n.length>0)}function o(a,b,c){var d,e=!1;if(c){d=b;for(var f=new Array(b.length),g=0;g<b.length;++g){var h=b[g];f[g]=[h[0],h[1],c[g]]}b=f}for(;n(a,b,!!c);)e=!0;if(c&&e){d.length=0,c.length=0;for(var g=0;g<b.length;++g){var h=b[g];d.push([h[0],h[1]]),c.push(h[2])}}return e}b.exports=o;var p=a("union-find"),q=a("box-intersect"),r=(a("compare-cell"),a("robust-segment-intersect")),s=a("big-rat"),t=a("big-rat/cmp"),u=a("big-rat/to-float"),v=a("rat-vec"),w=a("nextafter"),x=a("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":337,"big-rat":341,"big-rat/cmp":339,"big-rat/to-float":356,"box-intersect":357,"compare-cell":367,nextafter:368,"rat-vec":371,"robust-segment-intersect":374,"union-find":375}],337:[function(a,b,c){"use strict";function d(a,b){return h(f(a[0],b[1]),f(a[1],b[0]))}function e(a,b,c,e){var f=j(b,a),h=j(e,c),m=d(f,h);if(0===i(m))return null;var n=j(a,c),o=d(h,n),p=g(o,m);return k(a,l(f,p))}b.exports=e;var f=a("big-rat/mul"),g=a("big-rat/div"),h=a("big-rat/sub"),i=a("big-rat/sign"),j=a("rat-vec/sub"),k=a("rat-vec/add"),l=a("rat-vec/muls");a("big-rat/to-float")},{"big-rat/div":340,"big-rat/mul":350,"big-rat/sign":354,"big-rat/sub":355,"big-rat/to-float":356,"rat-vec/add":370,"rat-vec/muls":372,"rat-vec/sub":373}],338:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[1]).add(b[0].mul(a[1])),a[1].mul(b[1]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":348}],339:[function(a,b,c){"use strict";function d(a,b){return a[0].mul(b[1]).cmp(b[0].mul(a[1]))}b.exports=d},{}],340:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[1]),a[1].mul(b[0]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":348}],341:[function(a,b,c){"use strict";function d(a,b){if(e(a))return b?j(a,d(b)):[a[0].clone(),a[1].clone()];var c,k,l=0;if(f(a))c=a.clone();else if("string"==typeof a)c=h(a);else{if(0===a)return[g(0),g(1)];if(a===Math.floor(a))c=g(a);else{for(;a!==Math.floor(a);)a*=Math.pow(2,256),l-=256;c=g(a)}}if(e(b))c.mul(b[1]),k=b[0].clone();else if(f(b))k=b.clone();else if("string"==typeof b)k=h(b);else if(b)if(b===Math.floor(b))k=g(b);else{for(;b!==Math.floor(b);)b*=Math.pow(2,256),l+=256;k=g(b)}else k=g(1);return l>0?c=c.shln(l):l<0&&(k=k.shln(-l)),i(c,k)}var e=a("./is-rat"),f=a("./lib/is-bn"),g=a("./lib/num-to-bn"),h=a("./lib/str-to-bn"),i=a("./lib/rationalize"),j=a("./div");b.exports=d},{"./div":340,"./is-rat":342,"./lib/is-bn":346,"./lib/num-to-bn":347,"./lib/rationalize":348,"./lib/str-to-bn":349}],342:[function(a,b,c){"use strict";function d(a){return Array.isArray(a)&&2===a.length&&e(a[0])&&e(a[1])}var e=a("./lib/is-bn");b.exports=d},{"./lib/is-bn":346}],343:[function(a,b,c){"use strict";function d(a){return a.cmp(new e(0))}var e=a("bn.js");b.exports=d},{"bn.js":352}],344:[function(a,b,c){"use strict";function d(a){var b=a.length,c=a.words,d=0;if(1===b)d=c[0];else if(2===b)d=c[0]+67108864*c[1];else for(var d=0,e=0;e<b;e++){var f=c[e];d+=f*Math.pow(67108864,e)}return a.sign?-d:d}b.exports=d},{}],345:[function(a,b,c){"use strict";function d(a){var b=f(e.lo(a));if(b<32)return b;var c=f(e.hi(a));return c>20?52:c+32}var e=a("double-bits"),f=a("bit-twiddle").countTrailingZeros;b.exports=d},{"bit-twiddle":351,"double-bits":353}],346:[function(a,b,c){"use strict";function d(a){return a&&"object"==typeof a&&Boolean(a.words)}a("bn.js");b.exports=d},{"bn.js":352}],347:[function(a,b,c){"use strict";function d(a){var b=f.exponent(a);return b<52?new e(a):new e(a*Math.pow(2,52-b)).shln(b-52)}var e=a("bn.js"),f=a("double-bits");b.exports=d},{"bn.js":352,"double-bits":353}],348:[function(a,b,c){"use strict";function d(a,b){var c=f(a),d=f(b);if(0===c)return[e(0),e(1)];if(0===d)return[e(0),e(0)];d<0&&(a=a.neg(),b=b.neg());var g=a.gcd(b);return g.cmpn(1)?[a.div(g),b.div(g)]:[a,b]}var e=a("./num-to-bn"),f=a("./bn-sign");b.exports=d},{"./bn-sign":343,"./num-to-bn":347}],349:[function(a,b,c){"use strict";function d(a){return new e(a)}var e=a("bn.js");b.exports=d},{"bn.js":352}],350:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[0]),a[1].mul(b[1]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":348}],351:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],352:[function(a,b,c){!function(a,b){"use strict";function c(a,b){if(!a)throw new Error(b||"Assertion failed")}function d(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}function e(a,b,c){return null!==a&&"object"==typeof a&&Array.isArray(a.words)?a:(this.sign=!1,this.words=null,this.length=0,this.red=null,"le"!==b&&"be"!==b||(c=b,b=10),void(null!==a&&this._init(a||0,b||10,c||"be")))}function f(a,b,c){for(var d=0,e=Math.min(a.length,c),f=b;f<e;f++){var g=a.charCodeAt(f)-48;d<<=4,d|=g>=49&&g<=54?g-49+10:g>=17&&g<=22?g-17+10:15&g}return d}function g(a,b,c,d){for(var e=0,f=Math.min(a.length,c),g=b;g<f;g++){var h=a.charCodeAt(g)-48;e*=d,e+=h>=49?h-49+10:h>=17?h-17+10:h}return e}function h(a,b){this.name=a,this.p=new e(b,16),this.n=this.p.bitLength(),this.k=new e(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function i(){h.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function j(){h.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){h.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function l(){h.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function m(a){if("string"==typeof a){var b=e._prime(a);this.m=b.p,this.prime=b}else this.m=a,this.prime=null}function n(a){m.call(this,a),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new e(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv.sign=!0,this.minv=this.minv.mod(this.r)}"object"==typeof a?a.exports=e:b.BN=e,e.BN=e,e.wordSize=26,e.prototype._init=function(a,b,d){if("number"==typeof a)return this._initNumber(a,b,d);if("object"==typeof a)return this._initArray(a,b,d);"hex"===b&&(b=16),c(b===(0|b)&&b>=2&&b<=36),a=a.toString().replace(/\s+/g,"");var e=0;"-"===a[0]&&e++,16===b?this._parseHex(a,e):this._parseBase(a,b,e),"-"===a[0]&&(this.sign=!0),this.strip(),"le"===d&&this._initArray(this.toArray(),b,d)},e.prototype._initNumber=function(a,b,d){a<0&&(this.sign=!0,a=-a),a<67108864?(this.words=[67108863&a],this.length=1):a<4503599627370496?(this.words=[67108863&a,a/67108864&67108863],this.length=2):(c(a<9007199254740992),this.words=[67108863&a,a/67108864&67108863,1],this.length=3),"le"===d&&this._initArray(this.toArray(),b,d)},e.prototype._initArray=function(a,b,d){if(c("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var e=0;e<this.length;e++)this.words[e]=0;var f=0;if("be"===d)for(var e=a.length-1,g=0;e>=0;e-=3){var h=a[e]|a[e-1]<<8|a[e-2]<<16;this.words[g]|=h<<f&67108863,this.words[g+1]=h>>>26-f&67108863,f+=24,f>=26&&(f-=26,g++)}else if("le"===d)for(var e=0,g=0;e<a.length;e+=3){var h=a[e]|a[e+1]<<8|a[e+2]<<16;this.words[g]|=h<<f&67108863,this.words[g+1]=h>>>26-f&67108863,f+=24,f>=26&&(f-=26,g++)}return this.strip()},e.prototype._parseHex=function(a,b){this.length=Math.ceil((a.length-b)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;for(var d=0,c=a.length-6,e=0;c>=b;c-=6){var g=f(a,c,c+6);this.words[e]|=g<<d&67108863,this.words[e+1]|=g>>>26-d&4194303,d+=24,d>=26&&(d-=26,e++)}if(c+6!==b){var g=f(a,b,c+6);this.words[e]|=g<<d&67108863,this.words[e+1]|=g>>>26-d&4194303}this.strip()},e.prototype._parseBase=function(a,b,c){this.words=[0],this.length=1;for(var d=0,e=1;e<=67108863;e*=b)d++;d--,e=e/b|0;for(var f=a.length-c,h=f%d,i=Math.min(f,f-h)+c,j=0,k=c;k<i;k+=d)j=g(a,k,k+d,b),this.imuln(e),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(0!==h){for(var l=1,j=g(a,k,a.length,b),k=0;k<h;k++)l*=b;this.imuln(l),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}},e.prototype.copy=function(a){a.words=new Array(this.length);for(var b=0;b<this.length;b++)a.words[b]=this.words[b];a.length=this.length,a.sign=this.sign,a.red=this.red},e.prototype.clone=function(){var a=new e(null);return this.copy(a),a},e.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},e.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},e.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var o=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],q=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];e.prototype.toString=function(a,b){if(a=a||10,16===a||"hex"===a){for(var d="",e=0,b=0|b||1,f=0,g=0;g<this.length;g++){var h=this.words[g],i=(16777215&(h<<e|f)).toString(16);f=h>>>24-e&16777215,d=0!==f||g!==this.length-1?o[6-i.length]+i+d:i+d,e+=2,e>=26&&(e-=26,g--)}for(0!==f&&(d=f.toString(16)+d);d.length%b!==0;)d="0"+d;return this.sign&&(d="-"+d),d}if(a===(0|a)&&a>=2&&a<=36){var j=p[a],k=q[a],d="",l=this.clone();for(l.sign=!1;0!==l.cmpn(0);){var m=l.modn(k).toString(a);l=l.idivn(k),d=0!==l.cmpn(0)?o[j-m.length]+m+d:m+d}return 0===this.cmpn(0)&&(d="0"+d),this.sign&&(d="-"+d),d}c(!1,"Base should be between 2 and 36")},e.prototype.toJSON=function(){return this.toString(16)},e.prototype.toArray=function(a){this.strip();var b=new Array(this.byteLength());b[0]=0;var c=this.clone();if("le"!==a)for(var d=0;0!==c.cmpn(0);d++){var e=c.andln(255);c.ishrn(8),b[b.length-d-1]=e}else for(var d=0;0!==c.cmpn(0);d++){var e=c.andln(255);c.ishrn(8),b[d]=e}return b},Math.clz32?e.prototype._countBits=function(a){return 32-Math.clz32(a)}:e.prototype._countBits=function(a){var b=a,c=0;return b>=4096&&(c+=13,b>>>=13),b>=64&&(c+=7,b>>>=7),b>=8&&(c+=4,b>>>=4),b>=2&&(c+=2,b>>>=2),c+b},e.prototype._zeroBits=function(a){if(0===a)return 26;var b=a,c=0;return 0===(8191&b)&&(c+=13,b>>>=13),0===(127&b)&&(c+=7,b>>>=7),0===(15&b)&&(c+=4,b>>>=4),0===(3&b)&&(c+=2,b>>>=2),0===(1&b)&&c++,c},e.prototype.bitLength=function(){var a=0,b=this.words[this.length-1],a=this._countBits(b);return 26*(this.length-1)+a},e.prototype.zeroBits=function(){if(0===this.cmpn(0))return 0;for(var a=0,b=0;b<this.length;b++){var c=this._zeroBits(this.words[b]);if(a+=c,26!==c)break}return a},e.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},e.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var a=this.clone();return a.sign=!this.sign,a},e.prototype.ior=function(a){for(this.sign=this.sign||a.sign;this.length<a.length;)this.words[this.length++]=0;for(var b=0;b<a.length;b++)this.words[b]=this.words[b]|a.words[b];return this.strip()},e.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},e.prototype.iand=function(a){this.sign=this.sign&&a.sign;var b;b=this.length>a.length?a:this;for(var c=0;c<b.length;c++)this.words[c]=this.words[c]&a.words[c];return this.length=b.length,this.strip()},e.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},e.prototype.ixor=function(a){this.sign=this.sign||a.sign;var b,c;this.length>a.length?(b=this,c=a):(b=a,c=this);for(var d=0;d<c.length;d++)this.words[d]=b.words[d]^c.words[d];if(this!==b)for(;d<b.length;d++)this.words[d]=b.words[d];return this.length=b.length,this.strip()},e.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},e.prototype.setn=function(a,b){c("number"==typeof a&&a>=0);for(var d=a/26|0,e=a%26;this.length<=d;)this.words[this.length++]=0;return b?this.words[d]=this.words[d]|1<<e:this.words[d]=this.words[d]&~(1<<e),this.strip()},e.prototype.iadd=function(a){if(this.sign&&!a.sign){this.sign=!1;var b=this.isub(a);return this.sign=!this.sign,this._normSign()}if(!this.sign&&a.sign){a.sign=!1;var b=this.isub(a);return a.sign=!0,b._normSign()}var c,d;this.length>a.length?(c=this,d=a):(c=a,d=this);for(var e=0,f=0;f<d.length;f++){var b=c.words[f]+d.words[f]+e;this.words[f]=67108863&b,e=b>>>26}for(;0!==e&&f<c.length;f++){var b=c.words[f]+e;this.words[f]=67108863&b,e=b>>>26}if(this.length=c.length,0!==e)this.words[this.length]=e,this.length++;else if(c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];return this},e.prototype.add=function(a){if(a.sign&&!this.sign){a.sign=!1;var b=this.sub(a);return a.sign=!0,b}if(!a.sign&&this.sign){this.sign=!1;var b=a.sub(this);return this.sign=!0,b}return this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},e.prototype.isub=function(a){if(a.sign){a.sign=!1;var b=this.iadd(a);return a.sign=!0,b._normSign()}if(this.sign)return this.sign=!1,this.iadd(a),this.sign=!0,this._normSign();var c=this.cmp(a);if(0===c)return this.sign=!1,this.length=1,this.words[0]=0,this;var d,e;c>0?(d=this,e=a):(d=a,e=this);for(var f=0,g=0;g<e.length;g++){var b=d.words[g]-e.words[g]+f;f=b>>26,this.words[g]=67108863&b}for(;0!==f&&g<d.length;g++){var b=d.words[g]+f;f=b>>26,this.words[g]=67108863&b}if(0===f&&g<d.length&&d!==this)for(;g<d.length;g++)this.words[g]=d.words[g];return this.length=Math.max(this.length,g),d!==this&&(this.sign=!0),this.strip()},e.prototype.sub=function(a){return this.clone().isub(a)},e.prototype._smallMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0;d<b.length-1;d++){for(var e=c>>>26,f=67108863&c,g=Math.min(d,a.length-1),h=Math.max(0,d-this.length+1);h<=g;h++){var i=d-h,j=0|this.words[i],k=0|a.words[h],l=j*k,m=67108863&l;e=e+(l/67108864|0)|0,m=m+f|0,f=67108863&m,e=e+(m>>>26)|0}b.words[d]=f,c=e}return 0!==c?b.words[d]=c:b.length--,b.strip()},e.prototype._bigMulTo=function(a,b){b.sign=a.sign!==this.sign,b.length=this.length+a.length;for(var c=0,d=0,e=0;e<b.length-1;e++){var f=d;d=0;for(var g=67108863&c,h=Math.min(e,a.length-1),i=Math.max(0,e-this.length+1);i<=h;i++){var j=e-i,k=0|this.words[j],l=0|a.words[i],m=k*l,n=67108863&m;f=f+(m/67108864|0)|0,n=n+g|0,g=67108863&n,f=f+(n>>>26)|0,d+=f>>>26,f&=67108863}b.words[e]=g,c=f,f=d}return 0!==c?b.words[e]=c:b.length--,b.strip()},e.prototype.mulTo=function(a,b){var c;return c=this.length+a.length<63?this._smallMulTo(a,b):this._bigMulTo(a,b)},e.prototype.mul=function(a){var b=new e(null);return b.words=new Array(this.length+a.length),this.mulTo(a,b)},e.prototype.imul=function(a){if(0===this.cmpn(0)||0===a.cmpn(0))return this.words[0]=0,this.length=1,this;var b=this.length,c=a.length;this.sign=a.sign!==this.sign,this.length=this.length+a.length,this.words[this.length-1]=0;for(var d=this.length-2;d>=0;d--){for(var e=0,f=0,g=Math.min(d,c-1),h=Math.max(0,d-b+1);h<=g;h++){var i=d-h,j=this.words[i],k=a.words[h],l=j*k,m=67108863&l;
e+=l/67108864|0,m+=f,f=67108863&m,e+=m>>>26}this.words[d]=f,this.words[d+1]+=e,e=0}for(var e=0,i=1;i<this.length;i++){var n=this.words[i]+e;this.words[i]=67108863&n,e=n>>>26}return this.strip()},e.prototype.imuln=function(a){c("number"==typeof a);for(var b=0,d=0;d<this.length;d++){var e=this.words[d]*a,f=(67108863&e)+(67108863&b);b>>=26,b+=e/67108864|0,b+=f>>>26,this.words[d]=67108863&f}return 0!==b&&(this.words[d]=b,this.length++),this},e.prototype.muln=function(a){return this.clone().imuln(a)},e.prototype.sqr=function(){return this.mul(this)},e.prototype.isqr=function(){return this.mul(this)},e.prototype.ishln=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26,e=67108863>>>26-b<<26-b;if(0!==b){for(var f=0,g=0;g<this.length;g++){var h=this.words[g]&e,i=this.words[g]-h<<b;this.words[g]=i|f,f=h>>>26-b}f&&(this.words[g]=f,this.length++)}if(0!==d){for(var g=this.length-1;g>=0;g--)this.words[g+d]=this.words[g];for(var g=0;g<d;g++)this.words[g]=0;this.length+=d}return this.strip()},e.prototype.ishrn=function(a,b,d){c("number"==typeof a&&a>=0);var e;e=b?(b-b%26)/26:0;var f=a%26,g=Math.min((a-f)/26,this.length),h=67108863^67108863>>>f<<f,i=d;if(e-=g,e=Math.max(0,e),i){for(var j=0;j<g;j++)i.words[j]=this.words[j];i.length=g}if(0===g);else if(this.length>g){this.length-=g;for(var j=0;j<this.length;j++)this.words[j]=this.words[j+g]}else this.words[0]=0,this.length=1;for(var k=0,j=this.length-1;j>=0&&(0!==k||j>=e);j--){var l=this.words[j];this.words[j]=k<<26-f|l>>>f,k=l&h}return i&&0!==k&&(i.words[i.length++]=k),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),this},e.prototype.shln=function(a){return this.clone().ishln(a)},e.prototype.shrn=function(a){return this.clone().ishrn(a)},e.prototype.testn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d)return!1;var f=this.words[d];return!!(f&e)},e.prototype.imaskn=function(a){c("number"==typeof a&&a>=0);var b=a%26,d=(a-b)/26;if(c(!this.sign,"imaskn works only with positive numbers"),0!==b&&d++,this.length=Math.min(d,this.length),0!==b){var e=67108863^67108863>>>b<<b;this.words[this.length-1]&=e}return this.strip()},e.prototype.maskn=function(a){return this.clone().imaskn(a)},e.prototype.iaddn=function(a){return c("number"==typeof a),a<0?this.isubn(-a):this.sign?1===this.length&&this.words[0]<a?(this.words[0]=a-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(a),this.sign=!0,this):this._iaddn(a)},e.prototype._iaddn=function(a){this.words[0]+=a;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},e.prototype.isubn=function(a){if(c("number"==typeof a),a<0)return this.iaddn(-a);if(this.sign)return this.sign=!1,this.iaddn(a),this.sign=!0,this;this.words[0]-=a;for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},e.prototype.addn=function(a){return this.clone().iaddn(a)},e.prototype.subn=function(a){return this.clone().isubn(a)},e.prototype.iabs=function(){return this.sign=!1,this},e.prototype.abs=function(){return this.clone().iabs()},e.prototype._ishlnsubmul=function(a,b,d){var e,f=a.length+d;if(this.words.length<f){for(var g=new Array(f),e=0;e<this.length;e++)g[e]=this.words[e];this.words=g}else e=this.length;for(this.length=Math.max(this.length,f);e<this.length;e++)this.words[e]=0;for(var h=0,e=0;e<a.length;e++){var i=this.words[e+d]+h,j=a.words[e]*b;i-=67108863&j,h=(i>>26)-(j/67108864|0),this.words[e+d]=67108863&i}for(;e<this.length-d;e++){var i=this.words[e+d]+h;h=i>>26,this.words[e+d]=67108863&i}if(0===h)return this.strip();c(h===-1),h=0;for(var e=0;e<this.length;e++){var i=-this.words[e]+h;h=i>>26,this.words[e]=67108863&i}return this.sign=!0,this.strip()},e.prototype._wordDiv=function(a,b){var c=this.length-a.length,d=this.clone(),f=a,g=f.words[f.length-1],h=this._countBits(g);c=26-h,0!==c&&(f=f.shln(c),d.ishln(c),g=f.words[f.length-1]);var i,j=d.length-f.length;if("mod"!==b){i=new e(null),i.length=j+1,i.words=new Array(i.length);for(var k=0;k<i.length;k++)i.words[k]=0}var l=d.clone()._ishlnsubmul(f,1,j);l.sign||(d=l,i&&(i.words[j]=1));for(var m=j-1;m>=0;m--){var n=67108864*d.words[f.length+m]+d.words[f.length+m-1];for(n=Math.min(n/g|0,67108863),d._ishlnsubmul(f,n,m);d.sign;)n--,d.sign=!1,d._ishlnsubmul(f,1,m),0!==d.cmpn(0)&&(d.sign=!d.sign);i&&(i.words[m]=n)}return i&&i.strip(),d.strip(),"div"!==b&&0!==c&&d.ishrn(c),{div:i?i:null,mod:d}},e.prototype.divmod=function(a,b){if(c(0!==a.cmpn(0)),this.sign&&!a.sign){var d,f,g=this.neg().divmod(a,b);return"mod"!==b&&(d=g.div.neg()),"div"!==b&&(f=0===g.mod.cmpn(0)?g.mod:a.sub(g.mod)),{div:d,mod:f}}if(!this.sign&&a.sign){var d,g=this.divmod(a.neg(),b);return"mod"!==b&&(d=g.div.neg()),{div:d,mod:g.mod}}return this.sign&&a.sign?this.neg().divmod(a.neg(),b):a.length>this.length||this.cmp(a)<0?{div:new e(0),mod:this}:1===a.length?"div"===b?{div:this.divn(a.words[0]),mod:null}:"mod"===b?{div:null,mod:new e(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new e(this.modn(a.words[0]))}:this._wordDiv(a,b)},e.prototype.div=function(a){return this.divmod(a,"div").div},e.prototype.mod=function(a){return this.divmod(a,"mod").mod},e.prototype.divRound=function(a){var b=this.divmod(a);if(0===b.mod.cmpn(0))return b.div;var c=b.div.sign?b.mod.isub(a):b.mod,d=a.shrn(1),e=a.andln(1),f=c.cmp(d);return f<0||1===e&&0===f?b.div:b.div.sign?b.div.isubn(1):b.div.iaddn(1)},e.prototype.modn=function(a){c(a<=67108863);for(var b=(1<<26)%a,d=0,e=this.length-1;e>=0;e--)d=(b*d+this.words[e])%a;return d},e.prototype.idivn=function(a){c(a<=67108863);for(var b=0,d=this.length-1;d>=0;d--){var e=this.words[d]+67108864*b;this.words[d]=e/a|0,b=e%a}return this.strip()},e.prototype.divn=function(a){return this.clone().idivn(a)},e.prototype.egcd=function(a){c(!a.sign),c(0!==a.cmpn(0));var b=this,d=a.clone();b=b.sign?b.mod(a):b.clone();for(var f=new e(1),g=new e(0),h=new e(0),i=new e(1),j=0;b.isEven()&&d.isEven();)b.ishrn(1),d.ishrn(1),++j;for(var k=d.clone(),l=b.clone();0!==b.cmpn(0);){for(;b.isEven();)b.ishrn(1),f.isEven()&&g.isEven()?(f.ishrn(1),g.ishrn(1)):(f.iadd(k).ishrn(1),g.isub(l).ishrn(1));for(;d.isEven();)d.ishrn(1),h.isEven()&&i.isEven()?(h.ishrn(1),i.ishrn(1)):(h.iadd(k).ishrn(1),i.isub(l).ishrn(1));b.cmp(d)>=0?(b.isub(d),f.isub(h),g.isub(i)):(d.isub(b),h.isub(f),i.isub(g))}return{a:h,b:i,gcd:d.ishln(j)}},e.prototype._invmp=function(a){c(!a.sign),c(0!==a.cmpn(0));var b=this,d=a.clone();b=b.sign?b.mod(a):b.clone();for(var f=new e(1),g=new e(0),h=d.clone();b.cmpn(1)>0&&d.cmpn(1)>0;){for(;b.isEven();)b.ishrn(1),f.isEven()?f.ishrn(1):f.iadd(h).ishrn(1);for(;d.isEven();)d.ishrn(1),g.isEven()?g.ishrn(1):g.iadd(h).ishrn(1);b.cmp(d)>=0?(b.isub(d),f.isub(g)):(d.isub(b),g.isub(f))}return 0===b.cmpn(1)?f:g},e.prototype.gcd=function(a){if(0===this.cmpn(0))return a.clone();if(0===a.cmpn(0))return this.clone();var b=this.clone(),c=a.clone();b.sign=!1,c.sign=!1;for(var d=0;b.isEven()&&c.isEven();d++)b.ishrn(1),c.ishrn(1);for(;;){for(;b.isEven();)b.ishrn(1);for(;c.isEven();)c.ishrn(1);var e=b.cmp(c);if(e<0){var f=b;b=c,c=f}else if(0===e||0===c.cmpn(1))break;b.isub(c)}return c.ishln(d)},e.prototype.invm=function(a){return this.egcd(a).a.mod(a)},e.prototype.isEven=function(){return 0===(1&this.words[0])},e.prototype.isOdd=function(){return 1===(1&this.words[0])},e.prototype.andln=function(a){return this.words[0]&a},e.prototype.bincn=function(a){c("number"==typeof a);var b=a%26,d=(a-b)/26,e=1<<b;if(this.length<=d){for(var f=this.length;f<d+1;f++)this.words[f]=0;return this.words[d]|=e,this.length=d+1,this}for(var g=e,f=d;0!==g&&f<this.length;f++){var h=this.words[f];h+=g,g=h>>>26,h&=67108863,this.words[f]=h}return 0!==g&&(this.words[f]=g,this.length++),this},e.prototype.cmpn=function(a){var b=a<0;if(b&&(a=-a),this.sign&&!b)return-1;if(!this.sign&&b)return 1;a&=67108863,this.strip();var c;if(this.length>1)c=1;else{var d=this.words[0];c=d===a?0:d<a?-1:1}return this.sign&&(c=-c),c},e.prototype.cmp=function(a){if(this.sign&&!a.sign)return-1;if(!this.sign&&a.sign)return 1;var b=this.ucmp(a);return this.sign?-b:b},e.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var b=0,c=this.length-1;c>=0;c--){var d=this.words[c],e=a.words[c];if(d!==e){d<e?b=-1:d>e&&(b=1);break}}return b},e.red=function(a){return new m(a)},e.prototype.toRed=function(a){return c(!this.red,"Already a number in reduction context"),c(!this.sign,"red works only with positives"),a.convertTo(this)._forceRed(a)},e.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},e.prototype._forceRed=function(a){return this.red=a,this},e.prototype.forceRed=function(a){return c(!this.red,"Already a number in reduction context"),this._forceRed(a)},e.prototype.redAdd=function(a){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},e.prototype.redIAdd=function(a){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},e.prototype.redSub=function(a){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},e.prototype.redISub=function(a){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},e.prototype.redShl=function(a){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},e.prototype.redMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},e.prototype.redIMul=function(a){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},e.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},e.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},e.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},e.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},e.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},e.prototype.redPow=function(a){return c(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var r={k256:null,p224:null,p192:null,p25519:null};h.prototype._tmp=function(){var a=new e(null);return a.words=new Array(Math.ceil(this.n/13)),a},h.prototype.ireduce=function(a){var b,c=a;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),b=c.bitLength();while(b>this.n);var d=b<this.n?-1:c.ucmp(this.p);return 0===d?(c.words[0]=0,c.length=1):d>0?c.isub(this.p):c.strip(),c},h.prototype.split=function(a,b){a.ishrn(this.n,0,b)},h.prototype.imulK=function(a){return a.imul(this.k)},d(i,h),i.prototype.split=function(a,b){for(var c=4194303,d=Math.min(a.length,9),e=0;e<d;e++)b.words[e]=a.words[e];if(b.length=d,a.length<=9)return a.words[0]=0,void(a.length=1);var f=a.words[9];b.words[b.length++]=f&c;for(var e=10;e<a.length;e++){var g=a.words[e];a.words[e-10]=(g&c)<<4|f>>>22,f=g}a.words[e-10]=f>>>22,a.length-=9},i.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var b,c=0,d=0;d<a.length;d++){var e=a.words[d];b=64*e,c+=977*e,b+=c/67108864|0,c&=67108863,a.words[d]=c,c=b}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},d(j,h),d(k,h),d(l,h),l.prototype.imulK=function(a){for(var b=0,c=0;c<a.length;c++){var d=19*a.words[c]+b,e=67108863&d;d>>>=26,a.words[c]=e,b=d}return 0!==b&&(a.words[a.length++]=b),a},e._prime=function s(a){if(r[a])return r[a];var s;if("k256"===a)s=new i;else if("p224"===a)s=new j;else if("p192"===a)s=new k;else{if("p25519"!==a)throw new Error("Unknown prime "+a);s=new l}return r[a]=s,s},m.prototype._verify1=function(a){c(!a.sign,"red works only with positives"),c(a.red,"red works only with red numbers")},m.prototype._verify2=function(a,b){c(!a.sign&&!b.sign,"red works only with positives"),c(a.red&&a.red===b.red,"red works only with red numbers")},m.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.mod(this.m)._forceRed(this)},m.prototype.neg=function(a){var b=a.clone();return b.sign=!b.sign,b.iadd(this.m)._forceRed(this)},m.prototype.add=function(a,b){this._verify2(a,b);var c=a.add(b);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},m.prototype.iadd=function(a,b){this._verify2(a,b);var c=a.iadd(b);return c.cmp(this.m)>=0&&c.isub(this.m),c},m.prototype.sub=function(a,b){this._verify2(a,b);var c=a.sub(b);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},m.prototype.isub=function(a,b){this._verify2(a,b);var c=a.isub(b);return c.cmpn(0)<0&&c.iadd(this.m),c},m.prototype.shl=function(a,b){return this._verify1(a),this.imod(a.shln(b))},m.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},m.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},m.prototype.isqr=function(a){return this.imul(a,a)},m.prototype.sqr=function(a){return this.mul(a,a)},m.prototype.sqrt=function(a){if(0===a.cmpn(0))return a.clone();var b=this.m.andln(3);if(c(b%2===1),3===b){var d=this.m.add(new e(1)).ishrn(2),f=this.pow(a,d);return f}for(var g=this.m.subn(1),h=0;0!==g.cmpn(0)&&0===g.andln(1);)h++,g.ishrn(1);c(0!==g.cmpn(0));var i=new e(1).toRed(this),j=i.redNeg(),k=this.m.subn(1).ishrn(1),l=this.m.bitLength();for(l=new e(2*l*l).toRed(this);0!==this.pow(l,k).cmp(j);)l.redIAdd(j);for(var m=this.pow(l,g),f=this.pow(a,g.addn(1).ishrn(1)),n=this.pow(a,g),o=h;0!==n.cmp(i);){for(var p=n,q=0;0!==p.cmp(i);q++)p=p.redSqr();c(q<o);var r=this.pow(m,new e(1).ishln(o-q-1));f=f.redMul(r),m=r.redSqr(),n=n.redMul(m),o=q}return f},m.prototype.invm=function(a){var b=a._invmp(this.m);return b.sign?(b.sign=!1,this.imod(b).redNeg()):this.imod(b)},m.prototype.pow=function(a,b){var c=[];if(0===b.cmpn(0))return new e(1);for(var d=b.clone();0!==d.cmpn(0);)c.push(d.andln(1)),d.ishrn(1);for(var f=a,g=0;g<c.length&&0===c[g];g++,f=this.sqr(f));if(++g<c.length)for(var d=this.sqr(f);g<c.length;g++,d=this.sqr(d))0!==c[g]&&(f=this.mul(f,d));return f},m.prototype.convertTo=function(a){var b=a.mod(this.m);return b===a?b.clone():b},m.prototype.convertFrom=function(a){var b=a.clone();return b.red=null,b},e.mont=function(a){return new n(a)},d(n,m),n.prototype.convertTo=function(a){return this.imod(a.shln(this.shift))},n.prototype.convertFrom=function(a){var b=this.imod(a.mul(this.rinv));return b.red=null,b},n.prototype.imul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return a.words[0]=0,a.length=1,a;var c=a.imul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).ishrn(this.shift),f=e;return e.cmp(this.m)>=0?f=e.isub(this.m):e.cmpn(0)<0&&(f=e.iadd(this.m)),f._forceRed(this)},n.prototype.mul=function(a,b){if(0===a.cmpn(0)||0===b.cmpn(0))return new e(0)._forceRed(this);var c=a.mul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),f=c.isub(d).ishrn(this.shift),g=f;return f.cmp(this.m)>=0?g=f.isub(this.m):f.cmpn(0)<0&&(g=f.iadd(this.m)),g._forceRed(this)},n.prototype.invm=function(a){var b=this.imod(a._invmp(this.m).mul(this.r2));return b._forceRed(this)}}("undefined"==typeof b||b,this)},{}],353:[function(a,b,c){(function(a){function c(a,b){return n[0]=a,n[1]=b,m[0]}function d(a){return m[0]=a,n[0]}function e(a){return m[0]=a,n[1]}function f(a,b){return n[1]=a,n[0]=b,m[0]}function g(a){return m[0]=a,n[1]}function h(a){return m[0]=a,n[0]}function i(a,b){return o.writeUInt32LE(a,0,!0),o.writeUInt32LE(b,4,!0),o.readDoubleLE(0,!0)}function j(a){return o.writeDoubleLE(a,0,!0),o.readUInt32LE(0,!0)}function k(a){return o.writeDoubleLE(a,0,!0),o.readUInt32LE(4,!0)}var l=!1;if("undefined"!=typeof Float64Array){var m=new Float64Array(1),n=new Uint32Array(m.buffer);m[0]=1,l=!0,1072693248===n[1]?(b.exports=function(a){return m[0]=a,[n[0],n[1]]},b.exports.pack=c,b.exports.lo=d,b.exports.hi=e):1072693248===n[0]?(b.exports=function(a){return m[0]=a,[n[1],n[0]]},b.exports.pack=f,b.exports.lo=g,b.exports.hi=h):l=!1}if(!l){var o=new a(8);b.exports=function(a){return o.writeDoubleLE(a,0,!0),[o.readUInt32LE(0,!0),o.readUInt32LE(4,!0)]},b.exports.pack=i,b.exports.lo=j,b.exports.hi=k}b.exports.sign=function(a){return b.exports.hi(a)>>>31},b.exports.exponent=function(a){var c=b.exports.hi(a);return(c<<1>>>21)-1023},b.exports.fraction=function(a){var c=b.exports.lo(a),d=b.exports.hi(a),e=1048575&d;return 2146435072&d&&(e+=1<<20),[c,e]},b.exports.denormalized=function(a){var c=b.exports.hi(a);return!(2146435072&c)}}).call(this,a("buffer").Buffer)},{buffer:48}],354:[function(a,b,c){"use strict";function d(a){return e(a[0])*e(a[1])}var e=a("./lib/bn-sign");b.exports=d},{"./lib/bn-sign":343}],355:[function(a,b,c){"use strict";function d(a,b){return e(a[0].mul(b[1]).sub(a[1].mul(b[0])),a[1].mul(b[1]))}var e=a("./lib/rationalize");b.exports=d},{"./lib/rationalize":348}],356:[function(a,b,c){"use strict";function d(a){var b=a[0],c=a[1];if(0===b.cmpn(0))return 0;var d=b.divmod(c),g=d.div,h=e(g),i=d.mod;if(0===i.cmpn(0))return h;if(h){var j=f(h)+4,k=e(i.shln(j).divRound(c));return h<0&&(k=-k),h+k*Math.pow(2,-j)}var l=c.bitLength()-i.bitLength()+53,k=e(i.shln(l).divRound(c));return l<1023?k*Math.pow(2,-l):(k*=Math.pow(2,-1023),k*Math.pow(2,1023-l))}var e=a("./lib/bn-to-num"),f=a("./lib/ctz");b.exports=d},{"./lib/bn-to-num":344,"./lib/ctz":345}],357:[function(a,b,c){"use strict";function d(a,b){for(var c=0;c<a;++c)if(!(b[c]<=b[c+a]))return!0;return!1}function e(a,b,c,e){for(var f=0,g=0,h=0,i=a.length;h<i;++h){var j=a[h];if(!d(b,j)){for(var k=0;k<2*b;++k)c[f++]=j[k];e[g++]=h}}return g}function f(a,b,c,d){var f=a.length,g=b.length;if(!(f<=0||g<=0)){var h=a[0].length>>>1;if(!(h<=0)){var i,j=l.mallocDouble(2*h*f),k=l.mallocInt32(f);if(f=e(a,h,j,k),f>0){if(1===h&&d)m.init(f),i=m.sweepComplete(h,c,0,f,j,k,0,f,j,k);else{var o=l.mallocDouble(2*h*g),p=l.mallocInt32(g);g=e(b,h,o,p),g>0&&(m.init(f+g),i=1===h?m.sweepBipartite(h,c,0,f,j,k,0,g,o,p):n(h,c,d,f,j,k,g,o,p),l.free(o),l.free(p))}l.free(j),l.free(k)}return i}}}function g(a,b){k.push([a,b])}function h(a){return k=[],f(a,a,g,!0),k}function i(a,b){return k=[],f(a,b,g,!1),k}function j(a,b,c){switch(arguments.length){case 1:return h(a);case 2:return"function"==typeof b?f(a,a,b,!0):i(a,b);case 3:return f(a,b,c,!1);default:throw new Error("box-intersect: Invalid arguments")}}b.exports=j;var k,l=a("typedarray-pool"),m=a("./lib/sweep"),n=a("./lib/intersect")},{"./lib/intersect":359,"./lib/sweep":363,"typedarray-pool":366}],358:[function(a,b,c){"use strict";function d(a,b,c){var d="bruteForce"+(a?"Red":"Blue")+(b?"Flip":"")+(c?"Full":""),e=["function ",d,"(",w.join(),"){","var ",j,"=2*",f,";"],i="for(var i="+k+","+o+"="+j+"*"+k+";i<"+l+";++i,"+o+"+="+j+"){var x0="+m+"["+g+"+"+o+"],x1="+m+"["+g+"+"+o+"+"+f+"],xi="+n+"[i];",x="for(var j="+p+","+t+"="+j+"*"+p+";j<"+q+";++j,"+t+"+="+j+"){var y0="+r+"["+g+"+"+t+"],"+(c?"y1="+r+"["+g+"+"+t+"+"+f+"],":"")+"yi="+s+"[j];";return a?e.push(i,v,":",x):e.push(x,v,":",i),c?e.push("if(y1<x0||x1<y0)continue;"):b?e.push("if(y0<=x0||x1<y0)continue;"):e.push("if(y0<x0||x1<y0)continue;"),e.push("for(var k="+g+"+1;k<"+f+";++k){var r0="+m+"[k+"+o+"],r1="+m+"[k+"+f+"+"+o+"],b0="+r+"[k+"+t+"],b1="+r+"[k+"+f+"+"+t+"];if(r1<b0||b1<r0)continue "+v+";}var "+u+"="+h+"("),b?e.push("yi,xi"):e.push("xi,yi"),e.push(");if("+u+"!==void 0)return "+u+";}}}"),{name:d,code:e.join("")}}function e(a){function b(b,c){var f=d(b,c,a);e.push(f.code),g.push("return "+f.name+"("+w.join()+");")}var c="bruteForce"+(a?"Full":"Partial"),e=[],f=w.slice();a||f.splice(3,0,i);var g=["function "+c+"("+f.join()+"){"];g.push("if("+l+"-"+k+">"+q+"-"+p+"){"),a?(b(!0,!1),g.push("}else{"),b(!1,!1)):(g.push("if("+i+"){"),b(!0,!0),g.push("}else{"),b(!0,!1),g.push("}}else{if("+i+"){"),b(!1,!0),g.push("}else{"),b(!1,!1),g.push("}")),g.push("}}return "+c);var h=e.join("")+g.join(""),j=new Function(h);return j()}var f="d",g="ax",h="vv",i="fp",j="es",k="rs",l="re",m="rb",n="ri",o="rp",p="bs",q="be",r="bb",s="bi",t="bp",u="rv",v="Q",w=[f,g,h,k,l,m,n,p,q,r,s];c.partial=e(!1),c.full=e(!0)},{}],359:[function(a,b,c){"use strict";function d(a,b){var c=8*j.log2(b+1)*(a+1)|0,d=j.nextPow2(z*c);C.length<d&&(i.free(C),C=i.mallocInt32(d));var e=j.nextPow2(A*c);D<e&&(i.free(D),D=i.mallocDouble(e))}function e(a,b,c,d,e,f,g,h,i){var j=z*a;C[j]=b,C[j+1]=c,C[j+2]=d,C[j+3]=e,C[j+4]=f,C[j+5]=g;var k=A*a;D[k]=h,D[k+1]=i}function f(a,b,c,d,e,f,g,h,i,j,k){var l=2*a,m=i*l,n=j[m+b];a:for(var o=e,p=e*l;o<f;++o,p+=l){var q=g[p+b],r=g[p+b+a];if(!(n<q||r<n||d&&n===q)){for(var s=h[o],t=b+1;t<a;++t){var q=g[p+t],r=g[p+t+a],u=j[m+t],v=j[m+t+a];if(r<u||v<q)continue a}var w;if(w=d?c(k,s):c(s,k),void 0!==w)return w}}}function g(a,b,c,d,e,f,g,h,i,j){var k=2*a,l=h*k,m=i[l+b];a:for(var n=d,o=d*k;n<e;++n,o+=k){var p=g[n];if(p!==j){var q=f[o+b],r=f[o+b+a];if(!(m<q||r<m)){for(var s=b+1;s<a;++s){var q=f[o+s],r=f[o+s+a],t=i[l+s],u=i[l+s+a];if(r<t||u<q)continue a}var v=c(p,j);if(void 0!==v)return v}}}}function h(a,b,c,h,i,j,k,p,B){d(a,h+k);var E,F=0,G=2*a;for(e(F++,0,0,h,0,k,c?16:0,-(1/0),1/0),c||e(F++,0,0,k,0,h,1,-(1/0),1/0);F>0;){F-=1;var H=F*z,I=C[H],J=C[H+1],K=C[H+2],L=C[H+3],M=C[H+4],N=C[H+5],O=F*A,P=D[O],Q=D[O+1],R=1&N,S=!!(16&N),T=i,U=j,V=p,W=B;if(R&&(T=p,U=B,V=i,W=j),!(2&N&&(K=v(a,I,J,K,T,U,Q),J>=K)||4&N&&(J=w(a,I,J,K,T,U,P),J>=K))){var X=K-J,Y=M-L;if(S){if(a*X*(X+Y)<s){if(E=n.scanComplete(a,I,b,J,K,T,U,L,M,V,W),void 0!==E)return E;continue}}else{if(a*Math.min(X,Y)<q){if(E=l(a,I,b,R,J,K,T,U,L,M,V,W),void 0!==E)return E;continue}if(a*X*Y<r){if(E=n.scanBipartite(a,I,b,R,J,K,T,U,L,M,V,W),void 0!==E)return E;continue}}var Z=t(a,I,J,K,T,U,P,Q);if(J<Z)if(a*(Z-J)<q){if(E=m(a,I+1,b,J,Z,T,U,L,M,V,W),void 0!==E)return E}else if(I===a-2){if(E=R?n.sweepBipartite(a,b,L,M,V,W,J,Z,T,U):n.sweepBipartite(a,b,J,Z,T,U,L,M,V,W),void 0!==E)return E}else e(F++,I+1,J,Z,L,M,R,-(1/0),1/0),e(F++,I+1,L,M,J,Z,1^R,-(1/0),1/0);if(Z<K){var $=o(a,I,L,M,V,W),_=V[G*$+I],aa=u(a,I,$,M,V,W,_);if(aa<M&&e(F++,I,Z,K,aa,M,(4|R)+(S?16:0),_,Q),L<$&&e(F++,I,Z,K,L,$,(2|R)+(S?16:0),P,_),$+1===aa){if(E=S?g(a,I,b,Z,K,T,U,$,V,W[$]):f(a,I,b,R,Z,K,T,U,$,V,W[$]),void 0!==E)return E}else if($<aa){var ba;if(S){if(ba=x(a,I,Z,K,T,U,_),Z<ba){var ca=u(a,I,Z,ba,T,U,_);if(I===a-2){if(Z<ca&&(E=n.sweepComplete(a,b,Z,ca,T,U,$,aa,V,W),void 0!==E))return E;if(ca<ba&&(E=n.sweepBipartite(a,b,ca,ba,T,U,$,aa,V,W),void 0!==E))return E}else Z<ca&&e(F++,I+1,Z,ca,$,aa,16,-(1/0),1/0),ca<ba&&(e(F++,I+1,ca,ba,$,aa,0,-(1/0),1/0),e(F++,I+1,$,aa,ca,ba,1,-(1/0),1/0))}}else ba=R?y(a,I,Z,K,T,U,_):x(a,I,Z,K,T,U,_),Z<ba&&(I===a-2?E=R?n.sweepBipartite(a,b,$,aa,V,W,Z,ba,T,U):n.sweepBipartite(a,b,Z,ba,T,U,$,aa,V,W):(e(F++,I+1,Z,ba,$,aa,R,-(1/0),1/0),e(F++,I+1,$,aa,Z,ba,1^R,-(1/0),1/0)))}}}}}b.exports=h;var i=a("typedarray-pool"),j=a("bit-twiddle"),k=a("./brute"),l=k.partial,m=k.full,n=a("./sweep"),o=a("./median"),p=a("./partition"),q=128,r=1<<22,s=1<<22,t=p("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),u=p("lo===p0",["p0"]),v=p("lo<p0",["p0"]),w=p("hi<=p0",["p0"]),x=p("lo<=p0&&p0<=hi",["p0"]),y=p("lo<p0&&p0<=hi",["p0"]),z=6,A=2,B=1024,C=i.mallocInt32(B),D=i.mallocDouble(B)},{"./brute":358,"./median":360,"./partition":361,"./sweep":363,"bit-twiddle":364,"typedarray-pool":366}],360:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){for(var g=2*a,h=g*(c+1)+b,i=c+1;i<d;++i,h+=g)for(var j=e[h],k=i,l=g*(i-1);k>c&&e[l+b]>j;--k,l-=g){for(var m=l,n=l+g,o=0;o<g;++o,++m,++n){var p=e[m];e[m]=e[n],e[n]=p}var q=f[k];f[k]=f[k-1],f[k-1]=q}}function e(a,b,c,e,f,i){if(e<=c+1)return c;for(var j=c,k=e,l=e+c>>>1,m=2*a,n=l,o=f[m*l+b];j<k;){if(k-j<h){d(a,b,j,k,f,i),o=f[m*l+b];break}var p=k-j,q=Math.random()*p+j|0,r=f[m*q+b],s=Math.random()*p+j|0,t=f[m*s+b],u=Math.random()*p+j|0,v=f[m*u+b];r<=t?v>=t?(n=s,o=t):r>=v?(n=q,o=r):(n=u,o=v):t>=v?(n=s,o=t):v>=r?(n=q,o=r):(n=u,o=v);for(var w=m*(k-1),x=m*n,y=0;y<m;++y,++w,++x){var z=f[w];f[w]=f[x],f[x]=z}var A=i[k-1];i[k-1]=i[n],i[n]=A,n=g(a,b,j,k-1,f,i,o);for(var w=m*(k-1),x=m*n,y=0;y<m;++y,++w,++x){var z=f[w];f[w]=f[x],f[x]=z}var A=i[k-1];if(i[k-1]=i[n],i[n]=A,l<n){for(k=n-1;j<k&&f[m*(k-1)+b]===o;)k-=1;k+=1}else{if(!(n<l))break;for(j=n+1;j<k&&f[m*j+b]===o;)j+=1}}return g(a,b,c,l,f,i,f[m*l+b])}b.exports=e;var f=a("./partition"),g=f("lo<p0",["p0"]),h=8},{"./partition":361}],361:[function(a,b,c){"use strict";function d(a,b){var c="abcdef".split("").concat(b),d=[];return a.indexOf("lo")>=0&&d.push("lo=e[k+n]"),a.indexOf("hi")>=0&&d.push("hi=e[k+o]"),c.push(e.replace("_",d.join()).replace("$",a)),Function.apply(void 0,c)}b.exports=d;var e="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],362:[function(a,b,c){"use strict";function d(a,b){b<=4*m?e(0,b-1,a):l(0,b-1,a)}function e(a,b,c){for(var d=2*(a+1),e=a+1;e<=b;++e){for(var f=c[d++],g=c[d++],h=e,i=d-2;h-- >a;){var j=c[i-2],k=c[i-1];if(j<f)break;if(j===f&&k<g)break;c[i]=j,c[i+1]=k,i-=2}c[i]=f,c[i+1]=g}}function f(a,b,c){a*=2,b*=2;var d=c[a],e=c[a+1];c[a]=c[b],c[a+1]=c[b+1],c[b]=d,c[b+1]=e}function g(a,b,c){a*=2,b*=2,c[a]=c[b],c[a+1]=c[b+1]}function h(a,b,c,d){a*=2,b*=2,c*=2;var e=d[a],f=d[a+1];d[a]=d[b],d[a+1]=d[b+1],d[b]=d[c],d[b+1]=d[c+1],d[c]=e,d[c+1]=f}function i(a,b,c,d,e){a*=2,b*=2,e[a]=e[b],e[b]=c,e[a+1]=e[b+1],e[b+1]=d}function j(a,b,c){a*=2,b*=2;var d=c[a],e=c[b];return!(d<e)&&(d!==e||c[a+1]>c[b+1])}function k(a,b,c,d){a*=2;var e=d[a];return e<b||e===b&&d[a+1]<c}function l(a,b,c){var d=(b-a+1)/6|0,n=a+d,o=b-d,p=a+b>>1,q=p-d,r=p+d,s=n,t=q,u=p,v=r,w=o,x=a+1,y=b-1,z=0;j(s,t,c)&&(z=s,s=t,t=z),j(v,w,c)&&(z=v,v=w,w=z),j(s,u,c)&&(z=s,s=u,u=z),j(t,u,c)&&(z=t,t=u,u=z),j(s,v,c)&&(z=s,s=v,v=z),j(u,v,c)&&(z=u,u=v,v=z),j(t,w,c)&&(z=t,t=w,w=z),j(t,u,c)&&(z=t,t=u,u=z),j(v,w,c)&&(z=v,v=w,w=z);for(var A=c[2*t],B=c[2*t+1],C=c[2*v],D=c[2*v+1],E=2*s,F=2*u,G=2*w,H=2*n,I=2*p,J=2*o,K=0;K<2;++K){var L=c[E+K],M=c[F+K],N=c[G+K];c[H+K]=L,c[I+K]=M,c[J+K]=N}g(q,a,c),g(r,b,c);for(var O=x;O<=y;++O)if(k(O,A,B,c))O!==x&&f(O,x,c),++x;else if(!k(O,C,D,c))for(;;){if(k(y,C,D,c)){k(y,A,B,c)?(h(O,x,y,c),++x,--y):(f(O,y,c),--y);break}if(--y<O)break}i(a,x-1,A,B,c),i(b,y+1,C,D,c),x-2-a<=m?e(a,x-2,c):l(a,x-2,c),b-(y+2)<=m?e(y+2,b,c):l(y+2,b,c),y-x<=m?e(x,y,c):l(x,y,c)}b.exports=d;var m=32},{}],363:[function(a,b,c){"use strict";function d(a){var b=l.nextPow2(a);p.length<b&&(k.free(p),p=k.mallocInt32(b)),q.length<b&&(k.free(q),q=k.mallocInt32(b)),r.length<b&&(k.free(r),r=k.mallocInt32(b)),s.length<b&&(k.free(s),s=k.mallocInt32(b)),t.length<b&&(k.free(t),t=k.mallocInt32(b)),u.length<b&&(k.free(u),u=k.mallocInt32(b));var c=8*b;v.length<c&&(k.free(v),v=k.mallocDouble(c))}function e(a,b,c,d){var e=b[d],f=a[c-1];a[e]=f,b[f]=e}function f(a,b,c,d){a[c]=d,b[d]=c}function g(a,b,c,d,g,h,i,j,k,l){for(var o=0,t=2*a,u=a-1,w=t-1,x=c;x<d;++x){var y=h[x],z=t*x;v[o++]=g[z+u],v[o++]=-(y+1),v[o++]=g[z+w],v[o++]=y}for(var x=i;x<j;++x){var y=l[x]+n,A=t*x;v[o++]=k[A+u],v[o++]=-y,v[o++]=k[A+w],v[o++]=y}var B=o>>>1;m(v,B);for(var C=0,D=0,x=0;x<B;++x){var E=0|v[2*x+1];if(E>=n)E=E-n|0,e(r,s,D--,E);else if(E>=0)e(p,q,C--,E);else if(E<=-n){E=-E-n|0;for(var F=0;F<C;++F){var G=b(p[F],E);if(void 0!==G)return G}f(r,s,D++,E)}else{E=-E-1|0;for(var F=0;F<D;++F){var G=b(E,r[F]);if(void 0!==G)return G}f(p,q,C++,E)}}}function h(a,b,c,d,g,h,i,j,k,l){for(var n=0,o=2*a,w=a-1,x=o-1,y=c;y<d;++y){var z=h[y]+1<<1,A=o*y;v[n++]=g[A+w],v[n++]=-z,v[n++]=g[A+x],v[n++]=z}for(var y=i;y<j;++y){var z=l[y]+1<<1,B=o*y;v[n++]=k[B+w],v[n++]=1|-z,v[n++]=k[B+x],v[n++]=1|z}var C=n>>>1;m(v,C);for(var D=0,E=0,F=0,y=0;y<C;++y){var G=0|v[2*y+1],H=1&G;if(y<C-1&&G>>1===v[2*y+3]>>1&&(H=2,y+=1),G<0){for(var I=-(G>>1)-1,J=0;J<F;++J){var K=b(t[J],I);if(void 0!==K)return K}if(0!==H)for(var J=0;J<D;++J){var K=b(p[J],I);if(void 0!==K)return K}if(1!==H)for(var J=0;J<E;++J){var K=b(r[J],I);if(void 0!==K)return K}0===H?f(p,q,D++,I):1===H?f(r,s,E++,I):2===H&&f(t,u,F++,I)}else{var I=(G>>1)-1;0===H?e(p,q,D--,I):1===H?e(r,s,E--,I):2===H&&e(t,u,F--,I)}}}function i(a,b,c,d,g,h,i,j,k,l,o,r){var s=0,t=2*a,u=b,w=b+a,x=1,y=1;d?y=n:x=n;for(var z=g;z<h;++z){var A=z+x,B=t*z;v[s++]=i[B+u],v[s++]=-A,v[s++]=i[B+w],v[s++]=A}for(var z=k;z<l;++z){var A=z+y,C=t*z;v[s++]=o[C+u],v[s++]=-A}var D=s>>>1;m(v,D);for(var E=0,z=0;z<D;++z){var F=0|v[2*z+1];if(F<0){var A=-F,G=!1;if(A>=n?(G=!d,A-=n):(G=!!d,A-=1),G)f(p,q,E++,A);else{var H=r[A],I=t*A,J=o[I+b+1],K=o[I+b+1+a];a:for(var L=0;L<E;++L){var M=p[L],N=t*M;if(!(K<i[N+b+1]||i[N+b+1+a]<J)){for(var O=b+2;O<a;++O)if(o[I+O+a]<i[N+O]||i[N+O+a]<o[I+O])continue a;var P,Q=j[M];if(P=d?c(H,Q):c(Q,H),void 0!==P)return P}}}}else e(p,q,E--,F-x)}}function j(a,b,c,d,e,f,g,h,i,j,k){for(var l=0,o=2*a,q=b,r=b+a,s=d;s<e;++s){var t=s+n,u=o*s;v[l++]=f[u+q],v[l++]=-t,v[l++]=f[u+r],v[l++]=t}for(var s=h;s<i;++s){var t=s+1,w=o*s;v[l++]=j[w+q],v[l++]=-t}var x=l>>>1;m(v,x);for(var y=0,s=0;s<x;++s){var z=0|v[2*s+1];if(z<0){var t=-z;if(t>=n)p[y++]=t-n;else{t-=1;var A=k[t],B=o*t,C=j[B+b+1],D=j[B+b+1+a];a:for(var E=0;E<y;++E){var F=p[E],G=g[F];if(G===A)break;var H=o*F;if(!(D<f[H+b+1]||f[H+b+1+a]<C)){for(var I=b+2;I<a;++I)if(j[B+I+a]<f[H+I]||f[H+I+a]<j[B+I])continue a;var J=c(G,A);if(void 0!==J)return J}}}}else{for(var t=z-n,E=y-1;E>=0;--E)if(p[E]===t){for(var I=E+1;I<y;++I)p[I-1]=p[I];break}--y}}}b.exports={init:d,sweepBipartite:g,sweepComplete:h,scanBipartite:i,scanComplete:j};var k=a("typedarray-pool"),l=a("bit-twiddle"),m=a("./sort"),n=1<<28,o=1024,p=k.mallocInt32(o),q=k.mallocInt32(o),r=k.mallocInt32(o),s=k.mallocInt32(o),t=k.mallocInt32(o),u=k.mallocInt32(o),v=k.mallocDouble(8*o)},{"./sort":362,"bit-twiddle":364,"typedarray-pool":366}],364:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],365:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],366:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":364,buffer:48,dup:102}],367:[function(a,b,c){arguments[4][44][0].apply(c,arguments)},{dup:44}],368:[function(a,b,c){"use strict";function d(a,b){if(isNaN(a)||isNaN(b))return NaN;if(a===b)return a;if(0===a)return b<0?-f:f;var c=e.hi(a),d=e.lo(a);return b>a==a>0?d===g?(c+=1,d=0):d+=1:0===d?(d=g,c-=1):d-=1,e.pack(d,c)}var e=a("double-bits"),f=Math.pow(2,-1074),g=-1>>>0;b.exports=d},{"double-bits":369}],369:[function(a,b,c){arguments[4][353][0].apply(c,arguments)},{buffer:48,dup:353}],370:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length,d=new Array(c),f=0;f<c;++f)d[f]=e(a[f],b[f]);return d}var e=a("big-rat/add");b.exports=d},{"big-rat/add":338}],371:[function(a,b,c){"use strict";function d(a){for(var b=new Array(a.length),c=0;c<a.length;++c)b[c]=e(a[c]);return b}b.exports=d;var e=a("big-rat")},{"big-rat":341}],372:[function(a,b,c){"use strict";function d(a,b){for(var c=e(b),d=a.length,g=new Array(d),h=0;h<d;++h)g[h]=f(a[h],c);return g}var e=a("big-rat"),f=a("big-rat/mul");b.exports=d},{"big-rat":341,"big-rat/mul":350}],373:[function(a,b,c){"use strict";function d(a,b){for(var c=a.length,d=new Array(c),f=0;f<c;++f)d[f]=e(a[f],b[f]);return d}var e=a("big-rat/sub");b.exports=d},{"big-rat/sub":355}],374:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=0;e<2;++e){var f=a[e],g=b[e],h=Math.min(f,g),i=Math.max(f,g),j=c[e],k=d[e],l=Math.min(j,k),m=Math.max(j,k);if(m<h||i<l)return!1}return!0}function e(a,b,c,e){var g=f(a,c,e),h=f(b,c,e);if(g>0&&h>0||g<0&&h<0)return!1;var i=f(c,a,b),j=f(e,a,b);return!(i>0&&j>0||i<0&&j<0)&&(0!==g||0!==h||0!==i||0!==j||d(a,b,c,e))}b.exports=e;var f=a("robust-orientation")[3]},{"robust-orientation":996}],375:[function(a,b,c){arguments[4][61][0].apply(c,arguments)},{dup:61}],376:[function(a,b,c){"use strict";function d(a,b){for(var c=e(a,b.length),d=new Array(b.length),f=new Array(b.length),g=[],h=0;h<b.length;++h){var i=c[h].length;f[h]=i,d[h]=!0,i<=1&&g.push(h)}for(;g.length>0;){var j=g.pop();d[j]=!1;for(var k=c[j],h=0;h<k.length;++h){
var l=k[h];0===--f[l]&&g.push(l)}}for(var m=new Array(b.length),n=[],h=0;h<b.length;++h)if(d[h]){var j=n.length;m[h]=j,n.push(b[h])}else m[h]=-1;for(var o=[],h=0;h<a.length;++h){var p=a[h];d[p[0]]&&d[p[1]]&&o.push([m[p[0]],m[p[1]]])}return[o,n]}b.exports=d;var e=a("edges-to-adjacency-list")},{"edges-to-adjacency-list":377}],377:[function(a,b,c){"use strict";function d(a,b){var c=a.length;if("number"!=typeof b){b=0;for(var d=0;d<c;++d){var f=a[d];b=Math.max(b,f[0],f[1])}b=(0|b)+1}b=0|b;for(var g=new Array(b),d=0;d<b;++d)g[d]=[];for(var d=0;d<c;++d){var f=a[d];g[f[0]].push(f[1]),g[f[1]].push(f[0])}for(var h=0;h<b;++h)e(g[h],function(a,b){return a-b});return g}b.exports=d;var e=a("uniq")},{uniq:392}],378:[function(a,b,c){"use strict";function d(a,b){function c(a,b){var c=j[b][a[b]];c.splice(c.indexOf(a),1)}function d(a,d,f){for(var g,h,i,k=0;k<2;++k)if(j[k][d].length>0){g=j[k][d][0],i=k;break}h=g[1^i];for(var l=0;l<2;++l)for(var m=j[l][d],n=0;n<m.length;++n){var o=m[n],p=o[1^l],q=e(b[a],b[d],b[h],b[p]);q>0&&(g=o,h=p,i=l)}return f?h:(g&&c(g,i),h)}function f(a,f){var g=j[f][a][0],h=[a];c(g,f);for(var i=g[1^f];;){for(;i!==a;)h.push(i),i=d(h[h.length-2],i,!1);if(j[0][a].length+j[1][a].length===0)break;var k=h[h.length-1],l=a,m=h[1],n=d(k,l,!0);if(e(b[k],b[l],b[m],b[n])<0)break;h.push(a),i=d(k,l)}return h}function g(a,b){return b[1]===b[b.length-1]}for(var h=0|b.length,i=a.length,j=[new Array(h),new Array(h)],k=0;k<h;++k)j[0][k]=[],j[1][k]=[];for(var k=0;k<i;++k){var l=a[k];j[0][l[0]].push(l),j[1][l[1]].push(l)}for(var m=[],k=0;k<h;++k)j[0][k].length+j[1][k].length===0&&m.push([k]);for(var k=0;k<h;++k)for(var n=0;n<2;++n){for(var o=[];j[n][k].length>0;){var p=(j[0][k].length,f(k,n));g(o,p)?o.push.apply(o,p):(o.length>0&&m.push(o),o=p)}o.length>0&&m.push(o)}return m}b.exports=d;var e=a("compare-angle")},{"compare-angle":379}],379:[function(a,b,c){"use strict";function d(a,b,c){var d=h(a[0],-b[0]),e=h(a[1],-b[1]),f=h(c[0],-b[0]),g=h(c[1],-b[1]),k=j(i(d,f),i(e,g));return k[k.length-1]>=0}function e(a,b,c,e){var h=f(b,c,e);if(0===h){var i=g(f(a,b,c)),j=g(f(a,b,e));if(i===j){if(0===i){var k=d(a,b,c),l=d(a,b,e);return k===l?0:k?1:-1}return 0}return 0===j?i>0?-1:d(a,b,e)?-1:1:0===i?j>0?1:d(a,b,c)?1:-1:g(j-i)}var m=f(a,b,c);if(m>0)return h>0&&f(a,b,e)>0?1:-1;if(m<0)return h>0||f(a,b,e)>0?1:-1;var n=f(a,b,e);return n>0?1:d(a,b,c)?1:-1}b.exports=e;var f=a("robust-orientation"),g=a("signum"),h=a("two-sum"),i=a("robust-product"),j=a("robust-sum")},{"robust-orientation":996,"robust-product":381,"robust-sum":390,signum:382,"two-sum":383}],380:[function(a,b,c){arguments[4][37][0].apply(c,arguments)},{dup:37,"two-product":391,"two-sum":383}],381:[function(a,b,c){"use strict";function d(a,b){if(1===a.length)return f(b,a[0]);if(1===b.length)return f(a,b[0]);if(0===a.length||0===b.length)return[0];var c=[0];if(a.length<b.length)for(var d=0;d<a.length;++d)c=e(c,f(b,a[d]));else for(var d=0;d<b.length;++d)c=e(c,f(a,b[d]));return c}var e=a("robust-sum"),f=a("robust-scale");b.exports=d},{"robust-scale":380,"robust-sum":390}],382:[function(a,b,c){"use strict";b.exports=function(a){return a<0?-1:a>0?1:0}},{}],383:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{dup:36}],384:[function(a,b,c){arguments[4][4][0].apply(c,arguments)},{dup:4}],385:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.mid=a,this.left=b,this.right=c,this.leftPoints=d,this.rightPoints=e,this.count=(b?b.count:0)+(c?c.count:0)+d.length}function e(a,b){a.mid=b.mid,a.left=b.left,a.right=b.right,a.leftPoints=b.leftPoints,a.rightPoints=b.rightPoints,a.count=b.count}function f(a,b){var c=o(b);a.mid=c.mid,a.left=c.left,a.right=c.right,a.leftPoints=c.leftPoints,a.rightPoints=c.rightPoints,a.count=c.count}function g(a,b){var c=a.intervals([]);c.push(b),f(a,c)}function h(a,b){var c=a.intervals([]),d=c.indexOf(b);return d<0?s:(c.splice(d,1),f(a,c),t)}function i(a,b,c){for(var d=0;d<a.length&&a[d][0]<=b;++d){var e=c(a[d]);if(e)return e}}function j(a,b,c){for(var d=a.length-1;d>=0&&a[d][1]>=b;--d){var e=c(a[d]);if(e)return e}}function k(a,b){for(var c=0;c<a.length;++c){var d=b(a[c]);if(d)return d}}function l(a,b){return a-b}function m(a,b){var c=a[0]-b[0];return c?c:a[1]-b[1]}function n(a,b){var c=a[1]-b[1];return c?c:a[0]-b[0]}function o(a){if(0===a.length)return null;for(var b=[],c=0;c<a.length;++c)b.push(a[c][0],a[c][1]);b.sort(l);for(var e=b[b.length>>1],f=[],g=[],h=[],c=0;c<a.length;++c){var i=a[c];i[1]<e?f.push(i):e<i[0]?g.push(i):h.push(i)}var j=h,k=h.slice();return j.sort(m),k.sort(n),new d(e,o(f),o(g),j,k)}function p(a){this.root=a}function q(a){return new p(a&&0!==a.length?o(a):null)}var r=a("binary-search-bounds"),s=0,t=1,u=2;b.exports=q;var v=d.prototype;v.intervals=function(a){return a.push.apply(a,this.leftPoints),this.left&&this.left.intervals(a),this.right&&this.right.intervals(a),a},v.insert=function(a){var b=this.count-this.leftPoints.length;if(this.count+=1,a[1]<this.mid)this.left?4*(this.left.count+1)>3*(b+1)?g(this,a):this.left.insert(a):this.left=o([a]);else if(a[0]>this.mid)this.right?4*(this.right.count+1)>3*(b+1)?g(this,a):this.right.insert(a):this.right=o([a]);else{var c=r.ge(this.leftPoints,a,m),d=r.ge(this.rightPoints,a,n);this.leftPoints.splice(c,0,a),this.rightPoints.splice(d,0,a)}},v.remove=function(a){var b=this.count-this.leftPoints;if(a[1]<this.mid){if(!this.left)return s;var c=this.right?this.right.count:0;if(4*c>3*(b-1))return h(this,a);var d=this.left.remove(a);return d===u?(this.left=null,this.count-=1,t):(d===t&&(this.count-=1),d)}if(a[0]>this.mid){if(!this.right)return s;var f=this.left?this.left.count:0;if(4*f>3*(b-1))return h(this,a);var d=this.right.remove(a);return d===u?(this.right=null,this.count-=1,t):(d===t&&(this.count-=1),d)}if(1===this.count)return this.leftPoints[0]===a?u:s;if(1===this.leftPoints.length&&this.leftPoints[0]===a){if(this.left&&this.right){for(var g=this,i=this.left;i.right;)g=i,i=i.right;if(g===this)i.right=this.right;else{var j=this.left,d=this.right;g.count-=i.count,g.right=i.left,i.left=j,i.right=d}e(this,i),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?e(this,this.left):e(this,this.right);return t}for(var j=r.ge(this.leftPoints,a,m);j<this.leftPoints.length&&this.leftPoints[j][0]===a[0];++j)if(this.leftPoints[j]===a){this.count-=1,this.leftPoints.splice(j,1);for(var d=r.ge(this.rightPoints,a,n);d<this.rightPoints.length&&this.rightPoints[d][1]===a[1];++d)if(this.rightPoints[d]===a)return this.rightPoints.splice(d,1),t}return s},v.queryPoint=function(a,b){if(a<this.mid){if(this.left){var c=this.left.queryPoint(a,b);if(c)return c}return i(this.leftPoints,a,b)}if(a>this.mid){if(this.right){var c=this.right.queryPoint(a,b);if(c)return c}return j(this.rightPoints,a,b)}return k(this.leftPoints,b)},v.queryInterval=function(a,b,c){if(a<this.mid&&this.left){var d=this.left.queryInterval(a,b,c);if(d)return d}if(b>this.mid&&this.right){var d=this.right.queryInterval(a,b,c);if(d)return d}return b<this.mid?i(this.leftPoints,b,c):a>this.mid?j(this.rightPoints,a,c):k(this.leftPoints,c)};var w=p.prototype;w.insert=function(a){this.root?this.root.insert(a):this.root=new d(a[0],null,null,[a],[a])},w.remove=function(a){if(this.root){var b=this.root.remove(a);return b===u&&(this.root=null),b!==s}return!1},w.queryPoint=function(a,b){if(this.root)return this.root.queryPoint(a,b)},w.queryInterval=function(a,b,c){if(a<=b&&this.root)return this.root.queryInterval(a,b,c)},Object.defineProperty(w,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(w,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":384}],386:[function(a,b,c){"use strict";function d(a,b){var c,d;if(b[0][0]<b[1][0])c=b[0],d=b[1];else{if(!(b[0][0]>b[1][0])){var e=Math.min(a[0][1],a[1][1]),g=Math.max(a[0][1],a[1][1]),h=Math.min(b[0][1],b[1][1]),i=Math.max(b[0][1],b[1][1]);return g<h?g-h:e>i?e-i:g-i}c=b[1],d=b[0]}var j,k;a[0][1]<a[1][1]?(j=a[0],k=a[1]):(j=a[1],k=a[0]);var l=f(d,c,j);return l?l:(l=f(d,c,k),l?l:k-d)}function e(a,b){var c,e;if(b[0][0]<b[1][0])c=b[0],e=b[1];else{if(!(b[0][0]>b[1][0]))return d(b,a);c=b[1],e=b[0]}var g,h;if(a[0][0]<a[1][0])g=a[0],h=a[1];else{if(!(a[0][0]>a[1][0]))return-d(a,b);g=a[1],h=a[0]}var i=f(c,e,h),j=f(c,e,g);if(i<0){if(j<=0)return i}else if(i>0){if(j>=0)return i}else if(j)return j;if(i=f(h,g,e),j=f(h,g,c),i<0){if(j<=0)return i}else if(i>0){if(j>=0)return i}else if(j)return j;return e[0]-h[0]}b.exports=e;var f=a("robust-orientation")},{"robust-orientation":996}],387:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this._color=a,this.key=b,this.value=c,this.left=d,this.right=e,this._count=f}function e(a){return new d(a._color,a.key,a.value,a.left,a.right,a._count)}function f(a,b){return new d(a,b.key,b.value,b.left,b.right,b._count)}function g(a){a._count=1+(a.left?a.left._count:0)+(a.right?a.right._count:0)}function h(a,b){this._compare=a,this.root=b}function i(a,b){if(b.left){var c=i(a,b.left);if(c)return c}var c=a(b.key,b.value);return c?c:b.right?i(a,b.right):void 0}function j(a,b,c,d){var e=b(a,d.key);if(e<=0){if(d.left){var f=j(a,b,c,d.left);if(f)return f}var f=c(d.key,d.value);if(f)return f}if(d.right)return j(a,b,c,d.right)}function k(a,b,c,d,e){var f,g=c(a,e.key),h=c(b,e.key);if(g<=0){if(e.left&&(f=k(a,b,c,d,e.left)))return f;if(h>0&&(f=d(e.key,e.value)))return f}if(h>0&&e.right)return k(a,b,c,d,e.right)}function l(a,b){this.tree=a,this._stack=b}function m(a,b){a.key=b.key,a.value=b.value,a.left=b.left,a.right=b.right,a._color=b._color,a._count=b._count}function n(a){for(var b,c,d,h,i=a.length-1;i>=0;--i){if(b=a[i],0===i)return void(b._color=r);if(c=a[i-1],c.left===b){if(d=c.right,d.right&&d.right._color===q){if(d=c.right=e(d),h=d.right=e(d.right),c.right=d.left,d.left=c,d.right=h,d._color=c._color,b._color=r,c._color=r,h._color=r,g(c),g(d),i>1){var j=a[i-2];j.left===c?j.left=d:j.right=d}return void(a[i-1]=d)}if(d.left&&d.left._color===q){if(d=c.right=e(d),h=d.left=e(d.left),c.right=h.left,d.left=h.right,h.left=c,h.right=d,h._color=c._color,c._color=r,d._color=r,b._color=r,g(c),g(d),g(h),i>1){var j=a[i-2];j.left===c?j.left=h:j.right=h}return void(a[i-1]=h)}if(d._color===r){if(c._color===q)return c._color=r,void(c.right=f(q,d));c.right=f(q,d);continue}if(d=e(d),c.right=d.left,d.left=c,d._color=c._color,c._color=q,g(c),g(d),i>1){var j=a[i-2];j.left===c?j.left=d:j.right=d}a[i-1]=d,a[i]=c,i+1<a.length?a[i+1]=b:a.push(b),i+=2}else{if(d=c.left,d.left&&d.left._color===q){if(d=c.left=e(d),h=d.left=e(d.left),c.left=d.right,d.right=c,d.left=h,d._color=c._color,b._color=r,c._color=r,h._color=r,g(c),g(d),i>1){var j=a[i-2];j.right===c?j.right=d:j.left=d}return void(a[i-1]=d)}if(d.right&&d.right._color===q){if(d=c.left=e(d),h=d.right=e(d.right),c.left=h.right,d.right=h.left,h.right=c,h.left=d,h._color=c._color,c._color=r,d._color=r,b._color=r,g(c),g(d),g(h),i>1){var j=a[i-2];j.right===c?j.right=h:j.left=h}return void(a[i-1]=h)}if(d._color===r){if(c._color===q)return c._color=r,void(c.left=f(q,d));c.left=f(q,d);continue}if(d=e(d),c.left=d.right,d.right=c,d._color=c._color,c._color=q,g(c),g(d),i>1){var j=a[i-2];j.right===c?j.right=d:j.left=d}a[i-1]=d,a[i]=c,i+1<a.length?a[i+1]=b:a.push(b),i+=2}}}function o(a,b){return a<b?-1:a>b?1:0}function p(a){return new h(a||o,null)}b.exports=p;var q=0,r=1,s=h.prototype;Object.defineProperty(s,"keys",{get:function(){var a=[];return this.forEach(function(b,c){a.push(b)}),a}}),Object.defineProperty(s,"values",{get:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(a,b){for(var c=this._compare,e=this.root,i=[],j=[];e;){var k=c(a,e.key);i.push(e),j.push(k),e=k<=0?e.left:e.right}i.push(new d(q,a,b,null,null,1));for(var l=i.length-2;l>=0;--l){var e=i[l];j[l]<=0?i[l]=new d(e._color,e.key,e.value,i[l+1],e.right,e._count+1):i[l]=new d(e._color,e.key,e.value,e.left,i[l+1],e._count+1)}for(var l=i.length-1;l>1;--l){var m=i[l-1],e=i[l];if(m._color===r||e._color===r)break;var n=i[l-2];if(n.left===m)if(m.left===e){var o=n.right;if(!o||o._color!==q){if(n._color=q,n.left=m.right,m._color=r,m.right=n,i[l-2]=m,i[l-1]=e,g(n),g(m),l>=3){var p=i[l-3];p.left===n?p.left=m:p.right=m}break}m._color=r,n.right=f(r,o),n._color=q,l-=1}else{var o=n.right;if(!o||o._color!==q){if(m.right=e.left,n._color=q,n.left=e.right,e._color=r,e.left=m,e.right=n,i[l-2]=e,i[l-1]=m,g(n),g(m),g(e),l>=3){var p=i[l-3];p.left===n?p.left=e:p.right=e}break}m._color=r,n.right=f(r,o),n._color=q,l-=1}else if(m.right===e){var o=n.left;if(!o||o._color!==q){if(n._color=q,n.right=m.left,m._color=r,m.left=n,i[l-2]=m,i[l-1]=e,g(n),g(m),l>=3){var p=i[l-3];p.right===n?p.right=m:p.left=m}break}m._color=r,n.left=f(r,o),n._color=q,l-=1}else{var o=n.left;if(!o||o._color!==q){if(m.left=e.right,n._color=q,n.right=e.left,e._color=r,e.right=m,e.left=n,i[l-2]=e,i[l-1]=m,g(n),g(m),g(e),l>=3){var p=i[l-3];p.right===n?p.right=e:p.left=e}break}m._color=r,n.left=f(r,o),n._color=q,l-=1}}return i[0]._color=r,new h(c,i[0])},s.forEach=function(a,b,c){if(this.root)switch(arguments.length){case 1:return i(a,this.root);case 2:return j(b,this._compare,a,this.root);case 3:if(this._compare(b,c)>=0)return;return k(b,c,this._compare,a,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.left;return new l(this,a)}}),Object.defineProperty(s,"end",{get:function(){for(var a=[],b=this.root;b;)a.push(b),b=b.right;return new l(this,a)}}),s.at=function(a){if(a<0)return new l(this,[]);for(var b=this.root,c=[];;){if(c.push(b),b.left){if(a<b.left._count){b=b.left;continue}a-=b.left._count}if(!a)return new l(this,c);if(a-=1,!b.right)break;if(a>=b.right._count)break;b=b.right}return new l(this,[])},s.ge=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f<=0&&(e=d.length),c=f<=0?c.left:c.right}return d.length=e,new l(this,d)},s.gt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f<0&&(e=d.length),c=f<0?c.left:c.right}return d.length=e,new l(this,d)},s.lt=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f>0&&(e=d.length),c=f<=0?c.left:c.right}return d.length=e,new l(this,d)},s.le=function(a){for(var b=this._compare,c=this.root,d=[],e=0;c;){var f=b(a,c.key);d.push(c),f>=0&&(e=d.length),c=f<0?c.left:c.right}return d.length=e,new l(this,d)},s.find=function(a){for(var b=this._compare,c=this.root,d=[];c;){var e=b(a,c.key);if(d.push(c),0===e)return new l(this,d);c=e<=0?c.left:c.right}return new l(this,[])},s.remove=function(a){var b=this.find(a);return b?b.remove():this},s.get=function(a){for(var b=this._compare,c=this.root;c;){var d=b(a,c.key);if(0===d)return c.value;c=d<=0?c.left:c.right}};var t=l.prototype;Object.defineProperty(t,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(t,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),t.clone=function(){return new l(this.tree,this._stack.slice())},t.remove=function(){var a=this._stack;if(0===a.length)return this.tree;var b=new Array(a.length),c=a[a.length-1];b[b.length-1]=new d(c._color,c.key,c.value,c.left,c.right,c._count);for(var e=a.length-2;e>=0;--e){var c=a[e];c.left===a[e+1]?b[e]=new d(c._color,c.key,c.value,b[e+1],c.right,c._count):b[e]=new d(c._color,c.key,c.value,c.left,b[e+1],c._count)}if(c=b[b.length-1],c.left&&c.right){var f=b.length;for(c=c.left;c.right;)b.push(c),c=c.right;var g=b[f-1];b.push(new d(c._color,g.key,g.value,c.left,c.right,c._count)),b[f-1].key=c.key,b[f-1].value=c.value;for(var e=b.length-2;e>=f;--e)c=b[e],b[e]=new d(c._color,c.key,c.value,c.left,b[e+1],c._count);b[f-1].left=b[f]}if(c=b[b.length-1],c._color===q){var i=b[b.length-2];i.left===c?i.left=null:i.right===c&&(i.right=null),b.pop();for(var e=0;e<b.length;++e)b[e]._count--;return new h(this.tree._compare,b[0])}if(c.left||c.right){c.left?m(c,c.left):c.right&&m(c,c.right),c._color=r;for(var e=0;e<b.length-1;++e)b[e]._count--;return new h(this.tree._compare,b[0])}if(1===b.length)return new h(this.tree._compare,null);for(var e=0;e<b.length;++e)b[e]._count--;var j=b[b.length-2];return n(b),j.left===c?j.left=null:j.right=null,new h(this.tree._compare,b[0])},Object.defineProperty(t,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(t,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(t,"index",{get:function(){var a=0,b=this._stack;if(0===b.length){var c=this.tree.root;return c?c._count:0}b[b.length-1].left&&(a=b[b.length-1].left._count);for(var d=b.length-2;d>=0;--d)b[d+1]===b[d].right&&(++a,b[d].left&&(a+=b[d].left._count));return a},enumerable:!0}),t.next=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();a.length>0&&a[a.length-1].right===b;)b=a[a.length-1],a.pop()}},Object.defineProperty(t,"hasNext",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;b>0;--b)if(a[b-1].left===a[b])return!0;return!1}}),t.update=function(a){var b=this._stack;if(0===b.length)throw new Error("Can't update empty node!");var c=new Array(b.length),e=b[b.length-1];c[c.length-1]=new d(e._color,e.key,a,e.left,e.right,e._count);for(var f=b.length-2;f>=0;--f)e=b[f],e.left===b[f+1]?c[f]=new d(e._color,e.key,e.value,c[f+1],e.right,e._count):c[f]=new d(e._color,e.key,e.value,e.left,c[f+1],e._count);return new h(this.tree._compare,c[0])},t.prev=function(){var a=this._stack;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=b.left;b;)a.push(b),b=b.right;else for(a.pop();a.length>0&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}},Object.defineProperty(t,"hasPrev",{get:function(){var a=this._stack;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;b>0;--b)if(a[b-1].right===a[b])return!0;return!1}})},{}],388:[function(a,b,c){"use strict";function d(a,b,c){this.slabs=a,this.coordinates=b,this.horizontal=c}function e(a,b){return a.y-b}function f(a,b){for(var c=null;a;){var d,e,g=a.key;g[0][0]<g[1][0]?(d=g[0],e=g[1]):(d=g[1],e=g[0]);var h=l(d,e,b);if(h<0)a=a.left;else if(h>0)if(b[0]!==g[1][0])c=a,a=a.right;else{var i=f(a.right,b);if(i)return i;a=a.left}else{if(b[0]!==g[1][0])return a;var i=f(a.right,b);if(i)return i;a=a.left}}return c}function g(a,b,c,d){this.y=a,this.index=b,this.start=c,this.closed=d}function h(a,b,c,d){this.x=a,this.segment=b,this.create=c,this.index=d}function i(a){for(var b=a.length,c=2*b,e=new Array(c),f=0;f<b;++f){var i=a[f],j=i[0][0]<i[1][0];e[2*f]=new h(i[0][0],i,j,f),e[2*f+1]=new h(i[1][0],i,(!j),f)}e.sort(function(a,b){var c=a.x-b.x;return c?c:(c=a.create-b.create,c?c:Math.min(a.segment[0][1],a.segment[1][1])-Math.min(b.segment[0][1],b.segment[1][1]))});for(var l=k(m),n=[],o=[],p=[],f=0;f<c;){for(var q=e[f].x,r=[];f<c;){var s=e[f];if(s.x!==q)break;f+=1,s.segment[0][0]===s.x&&s.segment[1][0]===s.x?s.create&&(s.segment[0][1]<s.segment[1][1]?(r.push(new g(s.segment[0][1],s.index,(!0),(!0))),r.push(new g(s.segment[1][1],s.index,(!1),(!1)))):(r.push(new g(s.segment[1][1],s.index,(!0),(!1))),r.push(new g(s.segment[0][1],s.index,(!1),(!0))))):l=s.create?l.insert(s.segment,s.index):l.remove(s.segment)}n.push(l.root),o.push(q),p.push(r)}return new d(n,o,p)}b.exports=i;var j=a("binary-search-bounds"),k=a("functional-red-black-tree"),l=a("robust-orientation"),m=a("./lib/order-segments"),n=d.prototype;n.castUp=function(a){var b=j.le(this.coordinates,a[0]);if(b<0)return-1;var c=(this.slabs[b],f(this.slabs[b],a)),d=-1;if(c&&(d=c.value),this.coordinates[b]===a[0]){var g=null;if(c&&(g=c.key),b>0){var h=f(this.slabs[b-1],a);h&&(g?m(h.key,g)>0&&(g=h.key,d=h.value):(d=h.value,g=h.key))}var i=this.horizontal[b];if(i.length>0){var k=j.ge(i,a[1],e);if(k<i.length){var n=i[k];if(a[1]===n.y){if(n.closed)return n.index;for(;k<i.length-1&&i[k+1].y===a[1];)if(k+=1,n=i[k],n.closed)return n.index;if(n.y===a[1]&&!n.start){if(k+=1,k>=i.length)return d;n=i[k]}}if(n.start)if(g){var o=l(g[0],g[1],[a[0],n.y]);g[0][0]>g[1][0]&&(o=-o),o>0&&(d=n.index)}else d=n.index;else n.y!==a[1]&&(d=n.index)}}}return d}},{"./lib/order-segments":386,"binary-search-bounds":384,"functional-red-black-tree":387,"robust-orientation":996}],389:[function(a,b,c){function d(){return!0}function e(a){return function(b,c){var e=a[b];return!!e&&!!e.queryPoint(c,d)}}function f(a){for(var b={},c=0;c<a.length;++c){var d=a[c],f=d[0][0],g=d[0][1],h=d[1][1],i=[Math.min(g,h),Math.max(g,h)];f in b?b[f].push(i):b[f]=[i]}for(var j={},k=Object.keys(b),c=0;c<k.length;++c){var l=b[k[c]];j[k[c]]=n(l)}return e(j)}function g(a,b){return function(c){var d=o.le(b,c[0]);if(d<0)return 1;var e=a[d];if(!e){if(!(d>0&&b[d]===c[0]))return 1;e=a[d-1]}for(var f=1;e;){var g=e.key,h=l(c,g[0],g[1]);if(g[0][0]<g[1][0])if(h<0)e=e.left;else{if(!(h>0))return 0;f=-1,e=e.right}else if(h>0)e=e.left;else{if(!(h<0))return 0;f=1,e=e.right}}return f}}function h(a){return 1}function i(a){return function(b){return a(b[0],b[1])?0:1}}function j(a,b){return function(c){return a(c[0],c[1])?0:b(c)}}function k(a){for(var b=a.length,c=[],d=[],e=0;e<b;++e)for(var k=a[e],l=k.length,n=l-1,o=0;o<l;n=o++){var p=k[n],q=k[o];p[0]===q[0]?d.push([p,q]):c.push([p,q])}if(0===c.length)return 0===d.length?h:i(f(d));var r=m(c),s=g(r.slabs,r.coordinates);return 0===d.length?s:j(f(d),s)}b.exports=k;var l=a("robust-orientation")[3],m=a("slab-decomposition"),n=a("interval-tree-1d"),o=a("binary-search-bounds")},{"binary-search-bounds":384,"interval-tree-1d":385,"robust-orientation":996,"slab-decomposition":388}],390:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],391:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],392:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],393:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a),d=0;d<a;++d)c[d]=b;return c}function e(a){for(var b=new Array(a),c=0;c<a;++c)b[c]=[];return b}function f(a,b){function c(a){for(var c=a.length,d=[0],e=0;e<c;++e){var f=b[a[e]],g=b[a[(e+1)%c]],h=j(-f[0],f[1]),i=j(-f[0],g[1]),l=j(g[0],f[1]),m=j(g[0],g[1]);d=k(d,k(k(h,i),k(l,m)))}return d[d.length-1]>0}function f(a){for(var b=a.length,c=0;c<b;++c)if(!I[a[c]])return!1;return!0}var n=m(a,b);a=n[0],b=n[1];for(var o=b.length,p=(a.length,g(a,b.length)),q=0;q<o;++q)if(p[q].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var r=h(a,b);r=r.filter(c);for(var s=r.length,t=new Array(s),u=new Array(s),q=0;q<s;++q){t[q]=q;var v=new Array(s),w=r[q].map(function(a){return b[a]}),x=i([w]),y=0;a:for(var z=0;z<s;++z)if(v[z]=0,q!==z){for(var A=r[z],B=A.length,C=0;C<B;++C){var D=x(b[A[C]]);if(0!==D){D<0&&(v[z]=1,y+=1);continue a}}v[z]=1,y+=1}u[q]=[y,q,v]}u.sort(function(a,b){return b[0]-a[0]});for(var q=0;q<s;++q)for(var v=u[q],E=v[1],F=v[2],z=0;z<s;++z)F[z]&&(t[z]=E);for(var G=e(s),q=0;q<s;++q)G[q].push(t[q]),G[t[q]].push(q);for(var H={},I=d(o,!1),q=0;q<s;++q)for(var A=r[q],B=A.length,z=0;z<B;++z){var J=A[z],K=A[(z+1)%B],L=Math.min(J,K)+":"+Math.max(J,K);if(L in H){var M=H[L];G[M].push(q),G[q].push(M),I[J]=I[K]=!0}else H[L]=q}for(var N=[],O=d(s,-1),q=0;q<s;++q)t[q]!==q||f(r[q])?O[q]=-1:(N.push(q),O[q]=0);for(var n=[];N.length>0;){var P=N.pop(),Q=G[P];l(Q,function(a,b){return a-b});var R,S=Q.length,T=O[P];if(0===T){var A=r[P];R=[A]}for(var q=0;q<S;++q){var U=Q[q];if(!(O[U]>=0)&&(O[U]=1^T,N.push(U),0===T)){var A=r[U];f(A)||(A.reverse(),R.push(A))}}0===T&&n.push(R)}return n}b.exports=f;var g=a("edges-to-adjacency-list"),h=a("planar-dual"),i=a("point-in-big-polygon"),j=a("two-product"),k=a("robust-sum"),l=a("uniq"),m=a("./lib/trim-leaves")},{"./lib/trim-leaves":376,"edges-to-adjacency-list":377,"planar-dual":378,"point-in-big-polygon":389,"robust-sum":390,"two-product":391,uniq:392}],394:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],395:[function(a,b,c){"use strict";"use restrict";function d(a){this.roots=new Array(a),this.ranks=new Array(a);for(var b=0;b<a;++b)this.roots[b]=b,this.ranks[b]=0}b.exports=d,d.prototype.length=function(){return this.roots.length},d.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},d.prototype.find=function(a){for(var b=this.roots;b[a]!==a;){var c=b[a];b[a]=b[c],a=c}return a},d.prototype.link=function(a,b){var c=this.find(a),d=this.find(b);if(c!==d){var e=this.ranks,f=this.roots,g=e[c],h=e[d];g<h?f[c]=d:h<g?f[d]=c:(f[d]=c,++e[c])}}},{}],396:[function(a,b,c){arguments[4][62][0].apply(c,arguments)},{"bit-twiddle":394,dup:62,"union-find":395}],397:[function(a,b,c){"use strict";function d(a,b,c){var d=Math.abs(f(a,b,c)),e=Math.sqrt(Math.pow(b[0]-c[0],2)+Math.pow(b[1]-c[1],2));return d/e}function e(a,b,c){function e(a){if(u[a])return 1/0;var c=r[a],e=s[a];return c<0||e<0?1/0:d(b[a],b[c],b[e])}function f(a,b){var c=z[a],d=z[b];z[a]=d,z[b]=c,A[c]=b,A[d]=a}function h(a){return t[z[a]]}function i(a){return 1&a?a-1>>1:(a>>1)-1}function j(a){for(var b=h(a);;){var c=b,d=2*a+1,e=2*(a+1),g=a;if(d<C){var i=h(d);i<c&&(g=d,c=i)}if(e<C){var j=h(e);j<c&&(g=e)}if(g===a)return a;f(a,g),a=g}}function k(a){for(var b=h(a);a>0;){var c=i(a);if(c>=0){var d=h(c);if(b<d){f(a,c),a=c;continue}}return a}}function l(){if(C>0){var a=z[0];return f(0,C-1),C-=1,j(0),a}return-1}function m(a,b){var c=z[a];return t[c]===b?a:(t[c]=-(1/0),k(a),l(),t[c]=b,C+=1,k(C-1))}function n(a){if(!u[a]){u[a]=!0;var b=r[a],c=s[a];r[c]>=0&&(r[c]=b),s[b]>=0&&(s[b]=c),A[b]>=0&&m(A[b],e(b)),A[c]>=0&&m(A[c],e(c))}}function o(a,b){if(a[b]<0)return b;var c=b,d=b;do{var e=a[d];if(!u[d]||e<0||e===d)break;if(d=e,e=a[d],!u[d]||e<0||e===d)break;d=e,c=a[c]}while(c!==d);for(var f=b;f!==d;f=a[f])a[f]=d;return d}for(var p=b.length,q=a.length,r=new Array(p),s=new Array(p),t=new Array(p),u=new Array(p),v=0;v<p;++v)r[v]=s[v]=-1,t[v]=1/0,u[v]=!1;for(var v=0;v<q;++v){var w=a[v];if(2!==w.length)throw new Error("Input must be a graph");var x=w[1],y=w[0];s[y]!==-1?s[y]=-2:s[y]=x,r[x]!==-1?r[x]=-2:r[x]=y}for(var z=[],A=new Array(p),v=0;v<p;++v){var B=t[v]=e(v);B<1/0?(A[v]=z.length,z.push(v)):A[v]=-1}for(var C=z.length,v=C>>1;v>=0;--v)j(v);for(;;){var D=l();if(D<0||t[D]>c)break;n(D)}for(var E=[],v=0;v<p;++v)u[v]||(A[v]=E.length,E.push(b[v].slice()));var F=(E.length,[]);return a.forEach(function(a){var b=o(r,a[0]),c=o(s,a[1]);if(b>=0&&c>=0&&b!==c){var d=A[b],e=A[c];d!==e&&F.push([d,e])}}),g.unique(g.normalize(F)),{positions:E,edges:F}}b.exports=e;var f=a("robust-orientation"),g=a("simplicial-complex")},{"robust-orientation":996,"simplicial-complex":396}],398:[function(a,b,c){"use strict";function d(a){return"a"+a}function e(a){return"d"+a}function f(a,b){return"c"+a+"_"+b}function g(a){return"s"+a}function h(a,b){return"t"+a+"_"+b}function i(a){return"o"+a}function j(a){return"x"+a}function k(a){return"p"+a}function l(a,b){return"d"+a+"_"+b}function m(a){return"i"+a}function n(a,b){return"u"+a+"_"+b}function o(a){return"b"+a}function p(a){return"y"+a}function q(a){return"e"+a}function r(a){return"v"+a}function s(a,b,c){for(var d=0,e=0;e<a;++e)b&1<<e&&(d|=1<<c[e]);return d}function t(a,b,c,t,u,C){function D(a,b){M.push("for(",m(u[a]),"=",b,";",m(u[a]),"<",g(u[a]),";","++",m(u[a]),"){")}function E(a){for(var b=0;b<J;++b)M.push(k(b),"+=",n(b,u[a]),";");M.push("}")}function F(a){for(var b=a-1;b>=0;--b)D(b,0);for(var c=[],b=0;b<J;++b)C[b]?c.push(e(b)+".get("+k(b)+")"):c.push(e(b)+"["+k(b)+"]");for(var b=0;b<t;++b)c.push(j(b));M.push(x,"[",A,"++]=phase(",c.join(),");");for(var b=0;b<a;++b)E(b);for(var d=0;d<J;++d)M.push(k(d),"+=",n(d,u[a]),";")}function G(a){for(var b=0;b<J;++b)C[b]?M.push(f(b,0),"=",e(b),".get(",k(b),");"):M.push(f(b,0),"=",e(b),"[",k(b),"];");for(var c=[],b=0;b<J;++b)c.push(f(b,0));for(var b=0;b<t;++b)c.push(j(b));M.push(o(0),"=",x,"[",A,"]=phase(",c.join(),");");for(var d=1;d<1<<K;++d)M.push(o(d),"=",x,"[",A,"+",q(d),"];");for(var g=[],d=1;d<1<<K;++d)g.push("("+o(0)+"!=="+o(d)+")");M.push("if(",g.join("||"),"){");for(var h=[],b=0;b<K;++b)h.push(m(b));for(var b=0;b<J;++b){h.push(f(b,0));for(var d=1;d<1<<K;++d)C[b]?M.push(f(b,d),"=",e(b),".get(",k(b),"+",l(b,d),");"):M.push(f(b,d),"=",e(b),"[",k(b),"+",l(b,d),"];"),h.push(f(b,d))}for(var b=0;b<1<<K;++b)h.push(o(b));for(var b=0;b<t;++b)h.push(j(b));M.push("vertex(",h.join(),");",r(0),"=",w,"[",A,"]=",y,"++;");for(var i=(1<<K)-1,n=o(i),d=0;d<K;++d)if(0===(a&~(1<<d))){for(var p=i^1<<d,s=o(p),u=[],v=p;v>0;v=v-1&p)u.push(w+"["+A+"+"+q(v)+"]");u.push(r(0));for(var v=0;v<J;++v)1&d?u.push(f(v,i),f(v,p)):u.push(f(v,p),f(v,i));1&d?u.push(n,s):u.push(s,n);for(var v=0;v<t;++v)u.push(j(v));M.push("if(",n,"!==",s,"){","face(",u.join(),")}")}M.push("}",A,"+=1;")}function H(){for(var a=1;a<1<<K;++a)M.push(B,"=",q(a),";",q(a),"=",p(a),";",p(a),"=",B,";")}function I(a,b){if(a<0)return void G(b);F(a),M.push("if(",g(u[a]),">0){",m(u[a]),"=1;"),I(a-1,b|1<<u[a]);for(var c=0;c<J;++c)M.push(k(c),"+=",n(c,u[a]),";");a===K-1&&(M.push(A,"=0;"),H()),D(a,2),I(a-1,b),a===K-1&&(M.push("if(",m(u[K-1]),"&1){",A,"=0;}"),H()),E(a),M.push("}")}var J=C.length,K=u.length;if(K<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var L="extractContour"+u.join("_"),M=[],N=[],O=[],P=0;P<J;++P)O.push(d(P));for(var P=0;P<t;++P)O.push(j(P));for(var P=0;P<K;++P)N.push(g(P)+"="+d(0)+".shape["+P+"]|0");for(var P=0;P<J;++P){N.push(e(P)+"="+d(P)+".data",i(P)+"="+d(P)+".offset|0");for(var Q=0;Q<K;++Q)N.push(h(P,Q)+"="+d(P)+".stride["+Q+"]|0")}for(var P=0;P<J;++P){N.push(k(P)+"="+i(P)),N.push(f(P,0));for(var Q=1;Q<1<<K;++Q){for(var R=[],S=0;S<K;++S)Q&1<<S&&R.push("-"+h(P,S));N.push(l(P,Q)+"=("+R.join("")+")|0"),N.push(f(P,Q)+"=0")}}for(var P=0;P<J;++P)for(var Q=0;Q<K;++Q){var T=[h(P,u[Q])];Q>0&&T.push(h(P,u[Q-1])+"*"+g(u[Q-1])),N.push(n(P,u[Q])+"=("+T.join("-")+")|0")}for(var P=0;P<K;++P)N.push(m(P)+"=0");N.push(y+"=0");for(var U=["2"],P=K-2;P>=0;--P)U.push(g(u[P]));N.push(z+"=("+U.join("*")+")|0",x+"=mallocUint32("+z+")",w+"=mallocUint32("+z+")",A+"=0"),N.push(o(0)+"=0");for(var Q=1;Q<1<<K;++Q){for(var V=[],W=[],S=0;S<K;++S)Q&1<<S&&(0===W.length?V.push("1"):V.unshift(W.join("*"))),W.push(g(u[S]));var X="";V[0].indexOf(g(u[K-2]))<0&&(X="-");var Y=s(K,Q,u);N.push(q(Y)+"=(-"+V.join("-")+")|0",p(Y)+"=("+X+V.join("-")+")|0",o(Y)+"=0")}N.push(r(0)+"=0",B+"=0"),I(K-1,0),M.push("freeUint32(",w,");freeUint32(",x,");");var Z=["'use strict';","function ",L,"(",O.join(),"){","var ",N.join(),";",M.join(""),"}","return ",L].join(""),$=new Function("vertex","face","phase","mallocUint32","freeUint32",Z);return $(a,b,c,v.mallocUint32,v.freeUint32)}function u(a){function b(a){throw new Error("ndarray-extract-contour: "+a)}"object"!=typeof a&&b("Must specify arguments");var c=a.order;Array.isArray(c)||b("Must specify order");var d=a.arrayArguments||1;d<1&&b("Must have at least one array argument");var e=a.scalarArguments||0;e<0&&b("Scalar arg count must be > 0"),"function"!=typeof a.vertex&&b("Must specify vertex creation function"),"function"!=typeof a.cell&&b("Must specify cell creation function"),"function"!=typeof a.phase&&b("Must specify phase function");for(var f=a.getters||[],g=new Array(d),h=0;h<d;++h)f.indexOf(h)>=0?g[h]=!0:g[h]=!1;return t(a.vertex,a.cell,a.phase,e,c,g)}var v=a("typedarray-pool");b.exports=u;var w="V",x="P",y="N",z="Q",A="X",B="T"},{"typedarray-pool":401}],399:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],400:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],401:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":399,buffer:48,dup:102}],402:[function(a,b,c){function d(a){if(a<0)return Number("0/0");for(var b=h[0],c=h.length-1;c>0;--c)b+=h[c]/(a+c);var d=a+g+.5;return.5*Math.log(2*Math.PI)+(a+.5)*Math.log(d)-d+Math.log(b)-Math.log(a)}var e=7,f=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],g=607/128,h=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];
b.exports=function i(a){if(a<.5)return Math.PI/(Math.sin(Math.PI*a)*i(1-a));if(a>100)return Math.exp(d(a));a-=1;for(var b=f[0],c=1;c<e+2;c++)b+=f[c]/(a+c);var g=a+e+.5;return Math.sqrt(2*Math.PI)*Math.pow(g,a+.5)*Math.exp(-g)*b},b.exports.log=d},{}],403:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],404:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],405:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":403,buffer:48,dup:102}],406:[function(a,b,c){"use strict";function d(a){var b=a.length;if(b<e){for(var c=1,d=0;d<b;++d)for(var g=0;g<d;++g)if(a[d]<a[g])c=-c;else if(a[d]===a[g])return 0;return c}for(var h=f.mallocUint8(b),d=0;d<b;++d)h[d]=0;for(var c=1,d=0;d<b;++d)if(!h[d]){var i=1;h[d]=1;for(var g=a[d];g!==d;g=a[g]){if(h[g])return f.freeUint8(h),0;i+=1,h[g]=1}1&i||(c=-c)}return f.freeUint8(h),c}b.exports=d;var e=32,f=a("typedarray-pool")},{"typedarray-pool":405}],407:[function(a,b,c){"use strict";function d(a){var b=a.length;switch(b){case 0:case 1:return 0;case 2:return a[1]}var c,d,e,h=f.mallocUint32(b),i=f.mallocUint32(b),j=0;for(g(a,i),e=0;e<b;++e)h[e]=a[e];for(e=b-1;e>0;--e)d=i[e],c=h[e],h[e]=h[d],h[d]=c,i[e]=i[c],i[c]=d,j=(j+c)*e;return f.freeUint32(i),f.freeUint32(h),j}function e(a,b,c){switch(a){case 0:return c?c:[];case 1:return c?(c[0]=0,c):[0];case 2:return c?(b?(c[0]=0,c[1]=1):(c[0]=1,c[1]=0),c):b?[0,1]:[1,0]}c=c||new Array(a);var d,e,f,g=1;for(c[0]=0,f=1;f<a;++f)c[f]=f,g=g*f|0;for(f=a-1;f>0;--f)d=b/g|0,b=b-d*g|0,g=g/f|0,e=0|c[f],c[f]=0|c[d],c[d]=0|e;return c}var f=a("typedarray-pool"),g=a("invert-permutation");c.rank=d,c.unrank=e},{"invert-permutation":408,"typedarray-pool":411}],408:[function(a,b,c){"use strict";function d(a,b){b=b||new Array(a.length);for(var c=0;c<a.length;++c)b[a[c]]=c;return b}b.exports=d},{}],409:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],410:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],411:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":409,buffer:48,dup:102}],412:[function(a,b,c){"use strict";function d(a){if(a<0)return[];if(0===a)return[[0]];for(var b=0|Math.round(g(a+1)),c=[],d=0;d<b;++d){for(var h=e.unrank(a,d),i=[0],j=0,k=0;k<h.length;++k)j+=1<<h[k],i.push(j);f(h)<1&&(i[0]=j,i[a]=0),c.push(i)}return c}b.exports=d;var e=a("permutation-rank"),f=a("permutation-parity"),g=a("gamma")},{gamma:402,"permutation-parity":406,"permutation-rank":407}],413:[function(a,b,c){b.exports=a("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":414}],414:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./lib/thunk.js":416,dup:290}],415:[function(a,b,c){arguments[4][291][0].apply(c,arguments)},{dup:291,uniq:417}],416:[function(a,b,c){arguments[4][292][0].apply(c,arguments)},{"./compile.js":415,dup:292}],417:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],418:[function(a,b,c){"use strict";function d(a,b){var c=[];return b=+b||0,e(a.hi(a.shape[0]-1),c,b),c}b.exports=d;var e=a("./lib/zc-core")},{"./lib/zc-core":413}],419:[function(a,b,c){"use strict";function d(a,b){var c=a.length,d=["'use strict';"],e="surfaceNets"+a.join("_")+"d"+b;d.push("var contour=genContour({","order:[",a.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===b&&d.push("getters:[0],");for(var f=[],i=[],j=0;j<c;++j)f.push("d"+j),i.push("d"+j);for(var j=0;j<1<<c;++j)f.push("v"+j),i.push("v"+j);for(var j=0;j<1<<c;++j)f.push("p"+j),i.push("p"+j);f.push("a","b","c"),i.push("a","c"),d.push("vertex:function vertexFunc(",f.join(),"){");for(var k=[],j=0;j<1<<c;++j)k.push("(p"+j+"<<"+j+")");d.push("var m=(",k.join("+"),")|0;if(m===0||m===",(1<<(1<<c))-1,"){return}");var l=[],m=[];1<<(1<<c)<=128?(d.push("switch(m){"),m=d):d.push("switch(m>>>7){");for(var j=0;j<1<<(1<<c);++j){if(1<<(1<<c)>128&&j%128===0){l.length>0&&m.push("}}");var n="vExtra"+l.length;d.push("case ",j>>>7,":",n,"(m&0x7f,",i.join(),");break;"),m=["function ",n,"(m,",i.join(),"){switch(m){"],l.push(m)}m.push("case ",127&j,":");for(var o=new Array(c),p=new Array(c),q=new Array(c),r=new Array(c),s=0,t=0;t<c;++t)o[t]=[],p[t]=[],q[t]=0,r[t]=0;for(var t=0;t<1<<c;++t)for(var u=0;u<c;++u){var v=t^1<<u;if(!(v>t)&&!(j&1<<v)!=!(j&1<<t)){var w=1;j&1<<v?p[u].push("v"+v+"-v"+t):(p[u].push("v"+t+"-v"+v),w=-w),w<0?(o[u].push("-v"+t+"-v"+v),q[u]+=2):(o[u].push("v"+t+"+v"+v),q[u]-=2),s+=1;for(var x=0;x<c;++x)x!==u&&(v&1<<x?r[x]+=1:r[x]-=1)}}for(var y=[],u=0;u<c;++u)if(0===o[u].length)y.push("d"+u+"-0.5");else{var z="";q[u]<0?z=q[u]+"*c":q[u]>0&&(z="+"+q[u]+"*c");var A=.5*(o[u].length/s),B=.5+.5*(r[u]/s);y.push("d"+u+"-"+B+"-"+A+"*("+o[u].join("+")+z+")/("+p[u].join("+")+")")}m.push("a.push([",y.join(),"]);","break;")}d.push("}},"),l.length>0&&m.push("}}");for(var C=[],j=0;j<1<<c-1;++j)C.push("v"+j);C.push("c0","c1","p0","p1","a","b","c"),d.push("cell:function cellFunc(",C.join(),"){");var D=h(c-1);d.push("if(p0){b.push(",D.map(function(a){return"["+a.map(function(a){return"v"+a})+"]"}).join(),")}else{b.push(",D.map(function(a){var b=a.slice();return b.reverse(),"["+b.map(function(a){return"v"+a})+"]"}).join(),")}}});function ",e,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",e,";");for(var j=0;j<l.length;++j)d.push(l[j].join(""));var E=new Function("genContour",d.join(""));return E(g)}function e(a,b){for(var c=i(a,b),d=c.length,e=new Array(d),f=new Array(d),g=0;g<d;++g)e[g]=[c[g]],f[g]=[g];return{positions:e,cells:f}}function f(a,b){if(a.dimension<=0)return{positions:[],cells:[]};if(1===a.dimension)return e(a,b);var c=a.order.join()+"-"+a.dtype,f=j[c],b=+b||0;return f||(f=j[c]=d(a.order,a.dtype)),f(a,b)}b.exports=f;var g=a("ndarray-extract-contour"),h=a("triangulate-hypercube"),i=a("zero-crossings"),j={}},{"ndarray-extract-contour":398,"triangulate-hypercube":412,"zero-crossings":418}],420:[function(a,b,c){(function(c){"use strict";function d(a){for(var b=a.cells,c=a.positions,d=new Float32Array(6*b.length),e=0,f=0,g=0;g<b.length;++g)for(var h=b[g],i=0;i<3;++i){var j=c[h[i]];d[e++]=j[0],d[e++]=j[1]+1.4,f=Math.max(j[0],f)}return{data:d,shape:f}}function e(a,b){var c=h[a];c||(c=h[a]={" ":{data:new Float32Array(0),shape:.2}});var g=c[b];if(!g)if(b.length<=1||!/\d/.test(b))g=c[b]=d(f(b,{triangles:!0,font:a,textAlign:"left",textBaseline:"alphabetic"}));else{for(var i=b.split(/(\d|\s)/),j=new Array(i.length),k=0,l=0,m=0;m<i.length;++m)j[m]=e(a,i[m]),k+=j[m].data.length,l+=j[m].shape,m>0&&(l+=.02);for(var n=new Float32Array(k),o=0,p=-.5*l,m=0;m<j.length;++m){for(var q=j[m].data,r=0;r<q.length;r+=2)n[o++]=q[r]+p,n[o++]=q[r+1];p+=j[m].shape+.02}g=c[b]={data:n,shape:l}}return g}b.exports=e;var f=a("vectorize-text"),g=window||c.global||{},h=g.__TEXT_CACHE||{};g.__TEXT_CACHE={}}).call(this,a("_process"))},{_process:53,"vectorize-text":323}],421:[function(a,b,c){"use strict";function d(a,b){this.gl=a,this.pickBuffer=b,this.screenBox=[0,0,a.drawingBufferWidth,a.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-(1/0),-(1/0)],this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}function e(a){for(var b=a.slice(),c=0;c<b.length;++c)b[c]=b[c].slice();return b}function f(a,b){return a.x-b.x}function g(a){var b=a.gl,c=h(b,[b.drawingBufferWidth,b.drawingBufferHeight]),e=new d(b,c);return e.grid=i(e),e.text=j(e),e.line=k(e),e.box=l(e),e.update(a),e}b.exports=g;var h=a("gl-select-static"),i=a("./lib/grid"),j=a("./lib/text"),k=a("./lib/line"),l=a("./lib/box"),m=d.prototype;m.setDirty=function(){this.dirty=this.pickDirty=!0},m.setOverlayDirty=function(){this.dirty=!0},m.nextDepthValue=function(){return this._depthCounter++/65536},m.draw=function(){return function(){var a=this.gl,b=this.screenBox,c=this.viewBox,d=this.dataBox,e=this.pixelRatio,f=this.grid,g=this.line,h=this.text,i=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){this.dirty=!1,a.bindFramebuffer(a.FRAMEBUFFER,null),a.enable(a.SCISSOR_TEST),a.disable(a.DEPTH_TEST),a.depthFunc(a.LESS),a.depthMask(!1),a.enable(a.BLEND),a.blendEquation(a.FUNC_ADD,a.FUNC_ADD),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]);var j=this.borderColor;a.clearColor(j[0]*j[3],j[1]*j[3],j[2]*j[3],j[3]),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]),a.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]);var k=this.backgroundColor;a.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),a.clear(a.COLOR_BUFFER_BIT),f.draw();var l=this.zeroLineEnable,m=this.zeroLineColor,n=this.zeroLineWidth;if(l[0]||l[1]){g.bind();for(var o=0;o<2;++o)if(l[o]&&d[o]<=0&&d[o+2]>=0){var p=b[o]-d[o]*(b[o+2]-b[o])/(d[o+2]-d[o]);0===o?g.drawLine(p,b[1],p,b[3],n[o],m[o]):g.drawLine(b[0],p,b[2],p,n[o],m[o])}}for(var o=0;o<i.length;++o)i[o].draw();a.viewport(b[0],b[1],b[2]-b[0],b[3]-b[1]),a.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]),this.grid.drawTickMarks(),g.bind();var q=this.borderLineEnable,r=this.borderLineWidth,s=this.borderLineColor;q[1]&&g.drawLine(c[0],c[1]-.5*r[1]*e,c[0],c[3]+.5*r[3]*e,r[1],s[1]),q[0]&&g.drawLine(c[0]-.5*r[0]*e,c[1],c[2]+.5*r[2]*e,c[1],r[0],s[0]),q[3]&&g.drawLine(c[2],c[1]-.5*r[1]*e,c[2],c[3]+.5*r[3]*e,r[3],s[3]),q[2]&&g.drawLine(c[0]-.5*r[0]*e,c[3],c[2]+.5*r[2]*e,c[3],r[2],s[2]),h.bind();for(var o=0;o<2;++o)h.drawTicks(o);this.titleEnable&&h.drawTitle();for(var t=this.overlays,o=0;o<t.length;++o)t[o].draw();a.disable(a.SCISSOR_TEST),a.disable(a.BLEND),a.depthMask(!0)}}}(),m.drawPick=function(){return function(){var a=this.pickBuffer;this.gl;this._pickTimeout=null,a.begin();for(var b=1,c=this.objects,d=0;d<c.length;++d)b=c[d].drawPick(b);a.end()}}(),m.pick=function(){return function(a,b){var c=this.pixelRatio,d=this.pickPixelRatio,e=this.viewBox,f=0|Math.round((a-e[0]/c)*d),g=0|Math.round((b-e[1]/c)*d),h=this.pickBuffer.query(f,g,this.pickRadius);if(!h)return null;for(var i=h.id+(h.value[0]<<8)+(h.value[1]<<16)+(h.value[2]<<24),j=this.objects,k=0;k<j.length;++k){var l=j[k].pick(f,g,i);if(l)return l}return null}}(),m.setScreenBox=function(a){var b=this.screenBox,c=this.pixelRatio;b[0]=0|Math.round(a[0]*c),b[1]=0|Math.round(a[1]*c),b[2]=0|Math.round(a[2]*c),b[3]=0|Math.round(a[3]*c),this.setDirty()},m.setDataBox=function(a){var b=this.dataBox,c=b[0]!==a[0]||b[1]!==a[1]||b[2]!==a[2]||b[3]!==a[3];c&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],this.setDirty())},m.setViewBox=function(a){var b=this.pixelRatio,c=this.viewBox;c[0]=0|Math.round(a[0]*b),c[1]=0|Math.round(a[1]*b),c[2]=0|Math.round(a[2]*b),c[3]=0|Math.round(a[3]*b);var d=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((a[2]-a[0])*d),0|Math.round((a[3]-a[1])*d)],this.setDirty()},m.update=function(a){a=a||{};var b=this.gl;this.pixelRatio=a.pixelRatio||1;var c=this.pixelRatio;this.pickPixelRatio=Math.max(c,1),this.setScreenBox(a.screenBox||[0,0,b.drawingBufferWidth/c,b.drawingBufferHeight/c]);this.screenBox;this.setViewBox(a.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/c,.125*(this.screenBox[3]-this.screenBox[1])/c,.875*(this.screenBox[2]-this.screenBox[0])/c,.875*(this.screenBox[3]-this.screenBox[1])/c]);var d=this.viewBox,g=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(a.dataBox||[-10,-10/g,10,10/g]),this.borderColor=(a.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(a.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(a.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(a.gridLineWidth||[1,1]).slice(),this.gridLineColor=e(a.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(a.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(a.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=e(a.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(a.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(a.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=e(a.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(a.titleCenter||[.5*(d[0]+d[2])/c,(d[3]+120)/c]).slice(),this.titleEnable=!("titleEnable"in a&&!a.titleEnable),this.titleAngle=a.titleAngle||0,this.titleColor=(a.titleColor||[0,0,0,1]).slice(),this.labelPad=(a.labelPad||[15,15,15,15]).slice(),this.labelAngle=(a.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(a.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=e(a.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(a.tickPad||[15,15,15,15]).slice(),this.tickAngle=(a.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(a.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=e(a.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(a.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(a.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=e(a.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var h=a.ticks||[[],[]],i=this._tickBounds;i[0]=i[1]=1/0,i[2]=i[3]=-(1/0);for(var j=0;j<2;++j){var k=h[j].slice(0);0!==k.length&&(k.sort(f),i[j]=Math.min(i[j],k[0].x),i[j+2]=Math.max(i[j+2],k[k.length-1].x))}this.grid.update({bounds:i,ticks:h}),this.text.update({bounds:i,ticks:h,labels:a.labels||["x","y"],labelSize:a.labelSize||[12,12],labelFont:a.labelFont||["sans-serif","sans-serif"],title:a.title||"",titleSize:a.titleSize||18,titleFont:a.titleFont||"sans-serif"}),this.setDirty()},m.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var a=this.objects.length-1;a>=0;--a)this.objects[a].dispose();this.objects.length=0;for(var a=this.overlays.length-1;a>=0;--a)this.overlays[a].dispose();this.overlays.length=0,this.gl=null},m.addObject=function(a){this.objects.indexOf(a)<0&&(this.objects.push(a),this.setDirty())},m.removeObject=function(a){for(var b=this.objects,c=0;c<b.length;++c)if(b[c]===a){b.splice(c,1),this.setDirty();break}},m.addOverlay=function(a){this.overlays.indexOf(a)<0&&(this.overlays.push(a),this.setOverlayDirty())},m.removeOverlay=function(a){for(var b=this.overlays,c=0;c<b.length;++c)if(b[c]===a){b.splice(c,1),this.setOverlayDirty();break}}},{"./lib/box":278,"./lib/grid":279,"./lib/line":280,"./lib/text":282,"gl-select-static":298}],422:[function(a,b,c){var d=a("gl-shader"),e="#define GLSLIFY 1\nprecision mediump float;\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}",f="#define GLSLIFY 1\nprecision mediump float;\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}";b.exports=function(a){return d(a,e,f,null,[{name:"position",type:"vec2"}])}},{"gl-shader":559}],423:[function(a,b,c){"use strict";function d(a,b){a=a||document.body,b=b||{};var c=[.01,1/0];"distanceLimits"in b&&(c[0]=b.distanceLimits[0],c[1]=b.distanceLimits[1]),"zoomMin"in b&&(c[0]=b.zoomMin),"zoomMax"in b&&(c[1]=b.zoomMax);var d=f({center:b.center||[0,0,0],up:b.up||[0,1,0],eye:b.eye||[0,0,10],mode:b.mode||"orbit",distanceLimits:c}),i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=0,k=a.clientWidth,l=a.clientHeight,m={view:d,element:a,delay:b.delay||16,rotateSpeed:b.rotateSpeed||1,zoomSpeed:b.zoomSpeed||1,translateSpeed:b.translateSpeed||1,flipX:!!b.flipX,flipY:!!b.flipY,modes:d.modes,tick:function(){var b=e(),c=this.delay;d.idle(b-c),d.flush(b-(100+2*c));var f=b-2*c;d.recalcMatrix(f);for(var g=!0,h=d.computedMatrix,m=0;m<16;++m)g=g&&i[m]===h[m],i[m]=h[m];var n=a.clientWidth===k&&a.clientHeight===l;return k=a.clientWidth,l=a.clientHeight,g?!n:(j=Math.exp(d.computedRadius[0]),!0)},lookAt:function(a,b,c){d.lookAt(d.lastT(),a,b,c)},rotate:function(a,b,c){d.rotate(d.lastT(),a,b,c)},pan:function(a,b,c){d.pan(d.lastT(),a,b,c)},translate:function(a,b,c){d.translate(d.lastT(),a,b,c)}};Object.defineProperties(m,{matrix:{get:function(){return d.computedMatrix},set:function(a){return d.setMatrix(d.lastT(),a),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(a){return d.setMode(a),d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(a){return d.lookAt(d.lastT(),a),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(a){return d.lookAt(d.lastT(),null,a),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(a){return d.lookAt(d.lastT(),null,null,a),d.computedUp},enumerable:!0},distance:{get:function(){return j},set:function(a){return d.setDistance(d.lastT(),a),a},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(c)},set:function(a){return d.setDistanceLimits(a),a},enumerable:!0}}),a.addEventListener("contextmenu",function(a){return a.preventDefault(),!1});var n=0,o=0;return g(a,function(b,c,f,g){var h=1/a.clientHeight,i=h*(c-n),k=h*(f-o),l=m.flipX?1:-1,p=m.flipY?1:-1,q=Math.PI*m.rotateSpeed,r=e();if(1&b)g.shift?d.rotate(r,0,0,-i*q):d.rotate(r,l*q*i,-p*q*k,0);else if(2&b)d.pan(r,-m.translateSpeed*i*j,m.translateSpeed*k*j,0);else if(4&b){var s=m.zoomSpeed*k/window.innerHeight*(r-d.lastT())*50;d.pan(r,0,0,j*(Math.exp(s)-1))}n=c,o=f}),h(a,function(a,b,c){var f=m.flipX?1:-1,g=m.flipY?1:-1,h=e();if(Math.abs(a)>Math.abs(b))d.rotate(h,0,0,-a*f*Math.PI*m.rotateSpeed/window.innerWidth);else{var i=m.zoomSpeed*g*b/window.innerHeight*(h-d.lastT())/100;d.pan(h,0,0,j*(Math.exp(i)-1))}},!0),m}b.exports=d;var e=a("right-now"),f=a("3d-view"),g=a("mouse-change"),h=a("mouse-wheel")},{"3d-view":28,"mouse-change":960,"mouse-wheel":964,"right-now":990}],424:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":427}],425:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],426:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],427:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":425,buffer:48,dup:102}],428:[function(a,b,c){arguments[4][132][0].apply(c,arguments)},{dup:132}],429:[function(a,b,c){arguments[4][133][0].apply(c,arguments)},{"./do-bind.js":428,dup:133}],430:[function(a,b,c){arguments[4][134][0].apply(c,arguments)},{"./do-bind.js":428,dup:134}],431:[function(a,b,c){arguments[4][135][0].apply(c,arguments)},{"./lib/vao-emulated.js":429,"./lib/vao-native.js":430,dup:135}],432:[function(a,b,c){!function(){"use strict";function a(b){b.permitHostObjects___&&b.permitHostObjects___(a)}function c(a){return!(a.substr(0,n.length)==n&&"___"===a.substr(a.length-3))}function d(a){if(a!==Object(a))throw new TypeError("Not an object: "+a);var b=a[o];if(b&&b.key===a)return b;if(m(a)){b={key:a};try{return l(a,o,{value:b,writable:!1,enumerable:!1,configurable:!1}),b}catch(c){return}}}function e(a){return a.prototype=null,Object.freeze(a)}function f(){s||"undefined"==typeof console||(s=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=a);var g=!1;if("function"==typeof WeakMap){var h=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var i=new h,j=Object.freeze({});if(i.set(j,1),1===i.get(j))return void(b.exports=WeakMap);g=!0}}var k=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),l=Object.defineProperty,m=Object.isExtensible,n="weakmap:",o=n+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var p=new ArrayBuffer(25),q=new Uint8Array(p);crypto.getRandomValues(q),o=n+"rand:"+Array.prototype.map.call(q,function(a){return(a%36).toString(36)}).join("")+"___"}if(l(Object,"getOwnPropertyNames",{value:function(a){return k(a).filter(c)}}),"getPropertyNames"in Object){var r=Object.getPropertyNames;l(Object,"getPropertyNames",{value:function(a){return r(a).filter(c)}})}!function(){var a=Object.freeze;l(Object,"freeze",{value:function(b){return d(b),a(b)}});var b=Object.seal;l(Object,"seal",{value:function(a){return d(a),b(a)}});var c=Object.preventExtensions;l(Object,"preventExtensions",{value:function(a){return d(a),c(a)}})}();var s=!1,t=0,u=function(){function a(a,b){var c,e=d(a);return e?j in e?e[j]:b:(c=h.indexOf(a),c>=0?i[c]:b)}function b(a){var b=d(a);return b?j in b:h.indexOf(a)>=0}function c(a,b){var c,e=d(a);return e?e[j]=b:(c=h.indexOf(a),c>=0?i[c]=b:(c=h.length,i[c]=b,h[c]=a)),this}function g(a){var b,c,e=d(a);return e?j in e&&delete e[j]:(b=h.indexOf(a),!(b<0)&&(c=h.length-1,h[b]=void 0,i[b]=i[c],h[b]=h[c],h.length=c,i.length=c,!0))}this instanceof u||f();var h=[],i=[],j=t++;return Object.create(u.prototype,{get___:{value:e(a)},has___:{value:e(b)},set___:{value:e(c)},delete___:{value:e(g)}})};u.prototype=Object.create(Object.prototype,{get:{value:function(a,b){return this.get___(a,b)},writable:!0,configurable:!0},has:{value:function(a){return this.has___(a)},writable:!0,configurable:!0},set:{value:function(a,b){return this.set___(a,b)},writable:!0,configurable:!0},"delete":{value:function(a){return this.delete___(a)},writable:!0,configurable:!0}}),"function"==typeof h?!function(){function c(){function b(a,b){return k?j.has(a)?j.get(a):k.get___(a,b):j.get(a,b)}function c(a){return j.has(a)||!!k&&k.has___(a)}function d(a){var b=!!j["delete"](a);return k?k.delete___(a)||b:b}this instanceof u||f();var i,j=new h,k=void 0,l=!1;return i=g?function(a,b){return j.set(a,b),j.has(a)||(k||(k=new u),k.set(a,b)),this}:function(a,b){if(l)try{j.set(a,b)}catch(c){k||(k=new u),k.set___(a,b)}else j.set(a,b);return this},Object.create(u.prototype,{get___:{value:e(b)},has___:{value:e(c)},set___:{value:e(i)},delete___:{value:e(d)},permitHostObjects___:{value:e(function(b){if(b!==a)throw new Error("bogus call to permitHostObjects___");l=!0})}})}g&&"undefined"!=typeof Proxy&&(Proxy=void 0),c.prototype=u.prototype,b.exports=c,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),b.exports=u)}}()},{}],433:[function(a,b,c){"use strict";function d(a){var b=h.get(a);if(!b||!a.isBuffer(b._triangleBuffer.buffer)){var c=f(a,new Float32Array([-1,-1,-1,4,4,-1]));b=g(a,[{buffer:c,type:a.FLOAT,size:2}]),b._triangleBuffer=c,h.set(a,b)}b.bind(),a.drawArrays(a.TRIANGLES,0,3),b.unbind()}var e="undefined"==typeof WeakMap?a("weak-map"):WeakMap,f=a("gl-buffer"),g=a("gl-vao"),h=new e;b.exports=d},{"gl-buffer":424,"gl-vao":431,"weak-map":432}],434:[function(a,b,c){"use strict";function d(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a}function e(a){this.gl=a,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=k(a)}function f(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}function g(a,b,c,d,e){for(var f=a.primalOffset,g=a.primalMinor,h=a.mirrorOffset,i=a.mirrorMinor,j=d[b],k=0;k<3;++k)if(b!==k){var l=f,m=h,n=g,o=i;j&1<<k&&(l=h,m=f,n=i,o=g),l[k]=c[0][k],m[k]=c[1][k],e[k]>0?(n[k]=-1,o[k]=0):(n[k]=0,o[k]=1)}}function h(a,b){var c=new e(a);return c.update(b),c}b.exports=h;var i=a("./lib/text.js"),j=a("./lib/lines.js"),k=a("./lib/background.js"),l=a("./lib/cube.js"),m=a("./lib/ticks.js"),n=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=e.prototype;o.update=function(a){function b(b,c,d){if(d in a){var e,f=a[d],g=this[d];(b?Array.isArray(f)&&Array.isArray(f[0]):Array.isArray(f))?this[d]=e=[c(f[0]),c(f[1]),c(f[2])]:this[d]=e=[c(f),c(f),c(f)];for(var h=0;h<3;++h)if(e[h]!==g[h])return!0}return!1}a=a||{};var c,d=b.bind(this,!1,Number),e=b.bind(this,!1,Boolean),f=b.bind(this,!1,String),g=b.bind(this,!0,function(a){if(Array.isArray(a)){if(3===a.length)return[+a[0],+a[1],+a[2],1];if(4===a.length)return[+a[0],+a[1],+a[2],+a[3]]}return[0,0,0,1]}),h=!1,k=!1;if("bounds"in a)for(var l=a.bounds,n=0;n<2;++n)for(var o=0;o<3;++o)l[n][o]!==this.bounds[n][o]&&(k=!0),this.bounds[n][o]=l[n][o];if("ticks"in a){c=a.ticks,h=!0,this.autoTicks=!1;for(var n=0;n<3;++n)this.tickSpacing[n]=0}else d("tickSpacing")&&(this.autoTicks=!0,k=!0);if(this._firstInit&&("ticks"in a||"tickSpacing"in a||(this.autoTicks=!0),k=!0,h=!0,this._firstInit=!1),k&&this.autoTicks&&(c=m.create(this.bounds,this.tickSpacing),h=!0),h){for(var n=0;n<3;++n)c[n].sort(function(a,b){return a.x-b.x});m.equal(c,this.ticks)?h=!1:this.ticks=c}e("tickEnable"),f("tickFont")&&(h=!0),d("tickSize"),d("tickAngle"),d("tickPad"),g("tickColor");var p=f("labels");f("labelFont")&&(p=!0),e("labelEnable"),d("labelSize"),d("labelPad"),g("labelColor"),e("lineEnable"),e("lineMirror"),d("lineWidth"),g("lineColor"),e("lineTickEnable"),e("lineTickMirror"),d("lineTickLength"),d("lineTickWidth"),g("lineTickColor"),e("gridEnable"),d("gridWidth"),g("gridColor"),e("zeroEnable"),g("zeroLineColor"),d("zeroLineWidth"),e("backgroundEnable"),g("backgroundColor"),this._text?this._text&&(p||h)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&h&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=j(this.gl,this.bounds,this.ticks))};var p=[new f,new f,new f],q=[0,0,0],r={model:n,view:n,projection:n};o.isOpaque=function(){return!0},o.isTransparent=function(){return!1},o.drawTransparent=function(a){};var s=[0,0,0],t=[0,0,0],u=[0,0,0];o.draw=function(a){a=a||r;for(var b=this.gl,c=a.model||n,e=a.view||n,f=a.projection||n,h=this.bounds,i=l(c,e,f,h),j=i.cubeEdges,k=i.axis,m=e[12],o=e[13],v=e[14],w=e[15],x=this.pixelRatio*(f[3]*m+f[7]*o+f[11]*v+f[15]*w)/b.drawingBufferHeight,y=0;y<3;++y)this.lastCubeProps.cubeEdges[y]=j[y],this.lastCubeProps.axis[y]=k[y];for(var z=p,y=0;y<3;++y)g(p[y],y,this.bounds,j,k);for(var b=this.gl,A=q,y=0;y<3;++y)this.backgroundEnable[y]?A[y]=k[y]:A[y]=0;this._background.draw(c,e,f,h,A,this.backgroundColor),this._lines.bind(c,e,f,this);for(var y=0;y<3;++y){var B=[0,0,0];k[y]>0?B[y]=h[1][y]:B[y]=h[0][y];for(var C=0;C<2;++C){var D=(y+1+C)%3,E=(y+1+(1^C))%3;this.gridEnable[D]&&this._lines.drawGrid(D,E,this.bounds,B,this.gridColor[D],this.gridWidth[D]*this.pixelRatio)}for(var C=0;C<2;++C){var D=(y+1+C)%3,E=(y+1+(1^C))%3;this.zeroEnable[E]&&h[0][E]<=0&&h[1][E]>=0&&this._lines.drawZero(D,E,this.bounds,B,this.zeroLineColor[E],this.zeroLineWidth[E]*this.pixelRatio)}}for(var y=0;y<3;++y){this.lineEnable[y]&&this._lines.drawAxisLine(y,this.bounds,z[y].primalOffset,this.lineColor[y],this.lineWidth[y]*this.pixelRatio),this.lineMirror[y]&&this._lines.drawAxisLine(y,this.bounds,z[y].mirrorOffset,this.lineColor[y],this.lineWidth[y]*this.pixelRatio);for(var F=d(s,z[y].primalMinor),G=d(t,z[y].mirrorMinor),H=this.lineTickLength,C=0;C<3;++C){var I=x/c[5*C];F[C]*=H[C]*I,G[C]*=H[C]*I}this.lineTickEnable[y]&&this._lines.drawAxisTicks(y,z[y].primalOffset,F,this.lineTickColor[y],this.lineTickWidth[y]*this.pixelRatio),this.lineTickMirror[y]&&this._lines.drawAxisTicks(y,z[y].mirrorOffset,G,this.lineTickColor[y],this.lineTickWidth[y]*this.pixelRatio)}this._text.bind(c,e,f,this.pixelRatio);for(var y=0;y<3;++y){for(var J=z[y].primalMinor,K=d(u,z[y].primalOffset),C=0;C<3;++C)this.lineTickEnable[y]&&(K[C]+=x*J[C]*Math.max(this.lineTickLength[C],0)/c[5*C]);if(this.tickEnable[y]){for(var C=0;C<3;++C)K[C]+=x*J[C]*this.tickPad[C]/c[5*C];this._text.drawTicks(y,this.tickSize[y],this.tickAngle[y],K,this.tickColor[y])}if(this.labelEnable[y]){for(var C=0;C<3;++C)K[C]+=x*J[C]*this.labelPad[C]/c[5*C];K[y]+=.5*(h[0][y]+h[1][y]),this._text.drawLabel(y,this.labelSize[y],this.labelAngle[y],K,this.labelColor[y])}}},o.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":435,"./lib/cube.js":436,"./lib/lines.js":437,"./lib/text.js":439,"./lib/ticks.js":440}],435:[function(a,b,c){"use strict";function d(a,b,c,d){this.gl=a,this.buffer=b,this.vao=c,this.shader=d}function e(a){for(var b=[],c=[],e=0,i=0;i<3;++i)for(var j=(i+1)%3,k=(i+2)%3,l=[0,0,0],m=[0,0,0],n=-1;n<=1;n+=2){c.push(e,e+2,e+1,e+1,e+2,e+3),l[i]=n,m[i]=n;for(var o=-1;o<=1;o+=2){l[j]=o;for(var p=-1;p<=1;p+=2)l[k]=p,b.push(l[0],l[1],l[2],m[0],m[1],m[2]),e+=1}var q=j;j=k,k=q}var r=f(a,new Float32Array(b)),s=f(a,new Uint16Array(c),a.ELEMENT_ARRAY_BUFFER),t=g(a,[{buffer:r,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:r,type:a.FLOAT,size:3,offset:12,stride:24}],s),u=h(a);return u.attributes.position.location=0,u.attributes.normal.location=1,new d(a,r,t,u)}b.exports=e;var f=a("gl-buffer"),g=a("gl-vao"),h=a("./shaders").bg,i=d.prototype;i.draw=function(a,b,c,d,e,f){for(var g=!1,h=0;h<3;++h)g=g||e[h];if(g){var i=this.gl;i.enable(i.POLYGON_OFFSET_FILL),i.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:b,projection:c,bounds:d,enable:e,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),i.disable(i.POLYGON_OFFSET_FILL);
}},i.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":438,"gl-buffer":444,"gl-vao":449}],436:[function(a,b,c){"use strict";function d(a,b,c){for(var d=0;d<4;++d){a[d]=c[12+d];for(var e=0;e<3;++e)a[d]+=b[e]*c[4*e+d]}}function e(a){for(var b=0;b<p.length;++b)if(a=i.positive(a,p[b]),a.length<3)return 0;for(var c=a[0],d=c[0]/c[3],e=c[1]/c[3],f=0,b=1;b+1<a.length;++b){var g=a[b],h=a[b+1],j=g[0]/g[3],k=g[1]/g[3],l=h[0]/h[3],m=h[1]/h[3],n=j-d,o=k-e,q=l-d,r=m-e;f+=Math.abs(n*r-o*q)}return f}function f(a,b,c,f){h(k,b,a),h(k,c,k);for(var i=0,p=0;p<2;++p){n[2]=f[p][2];for(var t=0;t<2;++t){n[1]=f[t][1];for(var u=0;u<2;++u)n[0]=f[u][0],d(l[i],n,k),i+=1}}for(var v=-1,p=0;p<8;++p){for(var w=l[p][3],x=0;x<3;++x)m[p][x]=l[p][x]/w;w<0&&(v<0?v=p:m[p][2]<m[v][2]&&(v=p))}if(v<0){v=0;for(var y=0;y<3;++y){for(var z=(y+2)%3,A=(y+1)%3,B=-1,C=-1,D=0;D<2;++D){var E=D<<y,F=E+(D<<z)+(1-D<<A),G=E+(1-D<<z)+(D<<A);j(m[E],m[F],m[G],o)<0||(D?B=1:C=1)}if(B<0||C<0)C>B&&(v|=1<<y);else{for(var D=0;D<2;++D){var E=D<<y,F=E+(D<<z)+(1-D<<A),G=E+(1-D<<z)+(D<<A),H=e([l[E],l[F],l[G],l[E+(1<<z)+(1<<A)]]);D?B=H:C=H}C>B&&(v|=1<<y)}}}for(var I=7^v,J=-1,p=0;p<8;++p)p!==v&&p!==I&&(J<0?J=p:m[J][1]>m[p][1]&&(J=p));for(var K=-1,p=0;p<3;++p){var L=J^1<<p;if(L!==v&&L!==I){K<0&&(K=L);var A=m[L];A[0]<m[K][0]&&(K=L)}}for(var M=-1,p=0;p<3;++p){var L=J^1<<p;if(L!==v&&L!==I&&L!==K){M<0&&(M=L);var A=m[L];A[0]>m[M][0]&&(M=L)}}var N=q;N[0]=N[1]=N[2]=0,N[g.log2(K^J)]=J&K,N[g.log2(J^M)]=J&M;var O=7^M;O===v||O===I?(O=7^K,N[g.log2(M^O)]=O&M):N[g.log2(K^O)]=O&K;for(var P=r,Q=v,y=0;y<3;++y)Q&1<<y?P[y]=-1:P[y]=1;return s}b.exports=f;var g=a("bit-twiddle"),h=a("gl-mat4/multiply"),i=(a("gl-mat4/invert"),a("split-polygon")),j=a("robust-orientation"),k=new Array(16),l=(new Array(16),new Array(8)),m=new Array(8),n=new Array(3),o=[0,0,0];!function(){for(var a=0;a<8;++a)l[a]=[1,1,1,1],m[a]=[1,1,1]}();var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],q=[1,1,1],r=[0,0,0],s={cubeEdges:q,axis:r}},{"bit-twiddle":441,"gl-mat4/invert":214,"gl-mat4/multiply":216,"robust-orientation":996,"split-polygon":451}],437:[function(a,b,c){"use strict";function d(a){return a[0]=a[1]=a[2]=0,a}function e(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a}function f(a,b,c,d,e,f,g,h){this.gl=a,this.vertBuffer=b,this.vao=c,this.shader=d,this.tickCount=e,this.tickOffset=f,this.gridCount=g,this.gridOffset=h}function g(a,b,c){var d=[],e=[0,0,0],g=[0,0,0],k=[0,0,0],l=[0,0,0];d.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var m=0;m<3;++m){for(var n=d.length/3|0,o=0;o<c[m].length;++o){var p=+c[m][o].x;d.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}var q=d.length/3|0;e[m]=n,g[m]=q-n;for(var n=d.length/3|0,r=0;r<c[m].length;++r){var p=+c[m][r].x;d.push(p,0,1,p,1,1,p,0,-1,p,0,-1,p,1,1,p,1,-1)}var q=d.length/3|0;k[m]=n,l[m]=q-n}var s=h(a,new Float32Array(d)),t=i(a,[{buffer:s,type:a.FLOAT,size:3,stride:0,offset:0}]),u=j(a);return u.attributes.position.location=0,new f(a,s,t,u,g,e,l,k)}b.exports=g;var h=a("gl-buffer"),i=a("gl-vao"),j=a("./shaders").line,k=[0,0,0],l=[0,0,0],m=[0,0,0],n=[0,0,0],o=[1,1],p=f.prototype;p.bind=function(a,b,c){this.shader.bind(),this.shader.uniforms.model=a,this.shader.uniforms.view=b,this.shader.uniforms.projection=c,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},p.drawAxisLine=function(a,b,c,f,g){var h=d(l);this.shader.uniforms.majorAxis=l,h[a]=b[1][a]-b[0][a],this.shader.uniforms.minorAxis=h;var i=e(n,c);i[a]+=b[0][a],this.shader.uniforms.offset=i,this.shader.uniforms.lineWidth=g,this.shader.uniforms.color=f;var j=d(m);j[(a+2)%3]=1,this.shader.uniforms.screenAxis=j,this.vao.draw(this.gl.TRIANGLES,6);var j=d(m);j[(a+1)%3]=1,this.shader.uniforms.screenAxis=j,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(a,b,c,e,f){var g=d(k);g[a]=1,this.shader.uniforms.majorAxis=g,this.shader.uniforms.offset=b,this.shader.uniforms.minorAxis=c,this.shader.uniforms.color=e,this.shader.uniforms.lineWidth=f;var h=d(m);h[a]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],this.tickOffset[a])},p.drawGrid=function(a,b,c,f,g,h){var i=d(l);i[b]=c[1][b]-c[0][b],this.shader.uniforms.minorAxis=i;var j=e(n,f);j[b]+=c[0][b],this.shader.uniforms.offset=j;var o=d(k);o[a]=1,this.shader.uniforms.majorAxis=o;var p=d(m);p[a]=1,this.shader.uniforms.screenAxis=p,this.shader.uniforms.lineWidth=h,this.shader.uniforms.color=g,this.vao.draw(this.gl.TRIANGLES,this.gridCount[a],this.gridOffset[a])},p.drawZero=function(a,b,c,f,g,h){var i=d(l);this.shader.uniforms.majorAxis=i,i[a]=c[1][a]-c[0][a],this.shader.uniforms.minorAxis=i;var j=e(n,f);j[a]+=c[0][a],this.shader.uniforms.offset=j;var k=d(m);k[b]=1,this.shader.uniforms.screenAxis=k,this.shader.uniforms.lineWidth=h,this.shader.uniforms.color=g,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":438,"gl-buffer":444,"gl-vao":449}],438:[function(a,b,c){"use strict";var d=a("gl-shader"),e="#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n",f="#define GLSLIFY 1\nprecision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}";c.line=function(a){return d(a,e,f,null,[{name:"position",type:"vec3"}])};var g="#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvoid main() {  \n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n  mat2 planeXform = scale * mat2(cos(angle), sin(angle),\n                                -sin(angle), cos(angle));\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n  vec4 worldPosition = model * vec4(dataPosition, 1);\n  \n  //Compute clip position\n  vec4 viewPosition = view * worldPosition;\n  vec4 clipPosition = projection * viewPosition;\n  clipPosition /= clipPosition.w;\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec4(viewOffset, 0, 0);\n\n  //Done\n  gl_Position = clipPosition;\n}",h="#define GLSLIFY 1\nprecision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}";c.text=function(a){return d(a,g,h,null,[{name:"position",type:"vec3"}])};var i="#define GLSLIFY 1\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  if(dot(normal, enable) > 0.0) {\n    vec3 nPosition = mix(bounds[0], bounds[1], 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n  colorChannel = abs(normal);\n}",j="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] + \n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}";c.bg=function(a){return d(a,i,j,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":559}],439:[function(a,b,c){(function(c){"use strict";function d(a,b,c,d){this.gl=a,this.shader=b,this.buffer=c,this.vao=d,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}function e(a,b){try{return i(a,b)}catch(c){return console.warn("error vectorizing text:",c),{cells:[],positions:[]}}}function f(a,b,c,e,f,i){var k=g(a),l=h(a,[{buffer:k,size:3}]),m=j(a);m.attributes.position.location=0;var n=new d(a,m,k,l);return n.update(b,c,e,f,i),n}b.exports=f;var g=a("gl-buffer"),h=a("gl-vao"),i=a("vectorize-text"),j=a("./shaders").text,k=window||c.global||{},l=k.__TEXT_CACHE||{};k.__TEXT_CACHE={};var m=3,n=d.prototype,o=[0,0];n.bind=function(a,b,c,d){this.vao.bind(),this.shader.bind();var e=this.shader.uniforms;e.model=a,e.view=b,e.projection=c,e.pixelScale=d,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=o},n.update=function(a,b,c,d,f){function g(a,b,c,d){var f=l[c];f||(f=l[c]={});var g=f[b];g||(g=f[b]=e(b,{triangles:!0,font:c,textAlign:"center",textBaseline:"middle"}));for(var i=(d||12)/12,j=g.positions,k=g.cells,m=0,n=k.length;m<n;++m)for(var o=k[m],p=2;p>=0;--p){var q=j[o[p]];h.push(i*q[0],-i*q[1],a)}}for(var h=(this.gl,[]),i=[0,0,0],j=[0,0,0],k=[0,0,0],n=[0,0,0],o=0;o<3;++o){k[o]=h.length/m|0,g(.5*(a[0][o]+a[1][o]),b[o],c),n[o]=(h.length/m|0)-k[o],i[o]=h.length/m|0;for(var p=0;p<d[o].length;++p)d[o][p].text&&g(d[o][p].x,d[o][p].text,d[o][p].font||f,d[o][p].fontSize||12);j[o]=(h.length/m|0)-i[o]}this.buffer.update(h),this.tickOffset=i,this.tickCount=j,this.labelOffset=k,this.labelCount=n};var p=[0,0,0];n.drawTicks=function(a,b,c,d,e){var f=p;f[0]=f[1]=f[2]=0,f[a]=1,this.shader.uniforms.axis=f,this.shader.uniforms.color=e,this.shader.uniforms.angle=c,this.shader.uniforms.scale=b,this.shader.uniforms.offset=d,this.vao.draw(this.gl.TRIANGLES,this.tickCount[a],this.tickOffset[a])};var q=[0,0,0];n.drawLabel=function(a,b,c,d,e){this.shader.uniforms.axis=q,this.shader.uniforms.color=e,this.shader.uniforms.angle=c,this.shader.uniforms.scale=b,this.shader.uniforms.offset=d,this.vao.draw(this.gl.TRIANGLES,this.labelCount[a],this.labelOffset[a])},n.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this,a("_process"))},{"./shaders":438,_process:53,"gl-buffer":444,"gl-vao":449,"vectorize-text":455}],440:[function(a,b,c){"use strict";function d(a,b){var c=a+"",d=c.indexOf("."),e=0;d>=0&&(e=c.length-d-1);var f=Math.pow(10,e),g=Math.round(a*b*f),h=g+"";if(h.indexOf("e")>=0)return h;var i=g/f,j=g%f;g<0?(i=0|-Math.ceil(i),j=0|-j):(i=0|Math.floor(i),j=0|j);var k=""+i;if(g<0&&(k="-"+k),e){for(var l=""+j;l.length<e;)l="0"+l;return k+"."+l}return k}function e(a,b){for(var c=[],e=0;e<3;++e){for(var f=[],g=(.5*(a[0][e]+a[1][e]),0);g*b[e]<=a[1][e];++g)f.push({x:g*b[e],text:d(b[e],g)});for(var g=-1;g*b[e]>=a[0][e];--g)f.push({x:g*b[e],text:d(b[e],g)});c.push(f)}return c}function f(a,b){for(var c=0;c<3;++c){if(a[c].length!==b[c].length)return!1;for(var d=0;d<a[c].length;++d){var e=a[c][d],f=b[c][d];if(e.x!==f.x||e.text!==f.text)return!1}}return!0}c.create=e,c.equal=f},{}],441:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],442:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],443:[function(a,b,c){"use strict";function d(a,b,c){var d=b||0,e=c||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[d*a[12]+a[8],d*a[13]+a[9],d*a[14]+a[10],d*a[15]+a[11]],[e*a[12]-a[8],e*a[13]-a[9],e*a[14]-a[10],e*a[15]-a[11]]]}b.exports=d},{}],444:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":445}],445:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":441,buffer:48,dup:102}],446:[function(a,b,c){arguments[4][132][0].apply(c,arguments)},{dup:132}],447:[function(a,b,c){arguments[4][133][0].apply(c,arguments)},{"./do-bind.js":446,dup:133}],448:[function(a,b,c){arguments[4][134][0].apply(c,arguments)},{"./do-bind.js":446,dup:134}],449:[function(a,b,c){arguments[4][135][0].apply(c,arguments)},{"./lib/vao-emulated.js":447,"./lib/vao-native.js":448,dup:135}],450:[function(a,b,c){function d(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a}b.exports=d},{}],451:[function(a,b,c){"use strict";function d(a,b){var c=j(i(a,b),[b[b.length-1]]);return c[c.length-1]}function e(a,b,c,d){var e=d-b,f=-b/e;f<0?f=0:f>1&&(f=1);for(var g=1-f,h=a.length,i=new Array(h),j=0;j<h;++j)i[j]=f*a[j]+g*c[j];return i}function f(a,b){for(var c=[],f=[],g=d(a[a.length-1],b),h=a[a.length-1],i=a[0],j=0;j<a.length;++j,h=i){i=a[j];var k=d(i,b);if(g<0&&k>0||g>0&&k<0){var l=e(h,k,i,g);c.push(l),f.push(l.slice())}k<0?f.push(i.slice()):k>0?c.push(i.slice()):(c.push(i.slice()),f.push(i.slice())),g=k}return{positive:c,negative:f}}function g(a,b){for(var c=[],f=d(a[a.length-1],b),g=a[a.length-1],h=a[0],i=0;i<a.length;++i,g=h){h=a[i];var j=d(h,b);(f<0&&j>0||f>0&&j<0)&&c.push(e(g,j,h,f)),j>=0&&c.push(h.slice()),f=j}return c}function h(a,b){for(var c=[],f=d(a[a.length-1],b),g=a[a.length-1],h=a[0],i=0;i<a.length;++i,g=h){h=a[i];var j=d(h,b);(f<0&&j>0||f>0&&j<0)&&c.push(e(g,j,h,f)),j<=0&&c.push(h.slice()),f=j}return c}var i=a("robust-dot-product"),j=a("robust-sum");b.exports=f,b.exports.positive=g,b.exports.negative=h},{"robust-dot-product":452,"robust-sum":454}],452:[function(a,b,c){"use strict";function d(a,b){for(var c=e(a[0],b[0]),d=1;d<a.length;++d)c=f(c,e(a[d],b[d]));return c}var e=a("two-product"),f=a("robust-sum");b.exports=d},{"robust-sum":454,"two-product":453}],453:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],454:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],455:[function(a,b,c){arguments[4][323][0].apply(c,arguments)},{"./lib/vtext":456,dup:323}],456:[function(a,b,c){arguments[4][324][0].apply(c,arguments)},{cdt2d:457,"clean-pslg":469,dup:324,ndarray:987,"planar-graph-to-polyline":523,"simplify-planar-graph":527,"surface-nets":543}],457:[function(a,b,c){arguments[4][325][0].apply(c,arguments)},{"./lib/delaunay":458,"./lib/filter":459,"./lib/monotone":460,"./lib/triangulation":461,dup:325}],458:[function(a,b,c){arguments[4][326][0].apply(c,arguments)},{"binary-search-bounds":462,dup:326,"robust-in-sphere":463}],459:[function(a,b,c){arguments[4][327][0].apply(c,arguments)},{"binary-search-bounds":462,dup:327}],460:[function(a,b,c){arguments[4][328][0].apply(c,arguments)},{"binary-search-bounds":462,dup:328,"robust-orientation":996}],461:[function(a,b,c){arguments[4][329][0].apply(c,arguments)},{"binary-search-bounds":462,dup:329}],462:[function(a,b,c){arguments[4][283][0].apply(c,arguments)},{dup:283}],463:[function(a,b,c){arguments[4][330][0].apply(c,arguments)},{dup:330,"robust-scale":465,"robust-subtract":466,"robust-sum":467,"two-product":468}],464:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{dup:36}],465:[function(a,b,c){arguments[4][37][0].apply(c,arguments)},{dup:37,"two-product":468,"two-sum":464}],466:[function(a,b,c){arguments[4][333][0].apply(c,arguments)},{dup:333}],467:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],468:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],469:[function(a,b,c){arguments[4][336][0].apply(c,arguments)},{"./lib/rat-seg-intersect":470,"big-rat":474,"big-rat/cmp":472,"big-rat/to-float":488,"box-intersect":489,"compare-cell":497,dup:336,nextafter:498,"rat-vec":501,"robust-segment-intersect":504,"union-find":505}],470:[function(a,b,c){arguments[4][337][0].apply(c,arguments)},{"big-rat/div":473,"big-rat/mul":483,"big-rat/sign":486,"big-rat/sub":487,"big-rat/to-float":488,dup:337,"rat-vec/add":500,"rat-vec/muls":502,"rat-vec/sub":503}],471:[function(a,b,c){arguments[4][338][0].apply(c,arguments)},{"./lib/rationalize":481,dup:338}],472:[function(a,b,c){arguments[4][339][0].apply(c,arguments)},{dup:339}],473:[function(a,b,c){arguments[4][340][0].apply(c,arguments)},{"./lib/rationalize":481,dup:340}],474:[function(a,b,c){arguments[4][341][0].apply(c,arguments)},{"./div":473,"./is-rat":475,"./lib/is-bn":479,"./lib/num-to-bn":480,"./lib/rationalize":481,"./lib/str-to-bn":482,dup:341}],475:[function(a,b,c){arguments[4][342][0].apply(c,arguments)},{"./lib/is-bn":479,dup:342}],476:[function(a,b,c){arguments[4][343][0].apply(c,arguments)},{"bn.js":484,dup:343}],477:[function(a,b,c){arguments[4][344][0].apply(c,arguments)},{dup:344}],478:[function(a,b,c){arguments[4][345][0].apply(c,arguments)},{"bit-twiddle":441,"double-bits":485,dup:345}],479:[function(a,b,c){arguments[4][346][0].apply(c,arguments)},{"bn.js":484,dup:346}],480:[function(a,b,c){arguments[4][347][0].apply(c,arguments)},{"bn.js":484,"double-bits":485,dup:347}],481:[function(a,b,c){arguments[4][348][0].apply(c,arguments)},{"./bn-sign":476,"./num-to-bn":480,dup:348}],482:[function(a,b,c){arguments[4][349][0].apply(c,arguments)},{"bn.js":484,dup:349}],483:[function(a,b,c){arguments[4][350][0].apply(c,arguments)},{"./lib/rationalize":481,dup:350}],484:[function(a,b,c){arguments[4][352][0].apply(c,arguments)},{dup:352}],485:[function(a,b,c){arguments[4][353][0].apply(c,arguments)},{buffer:48,dup:353}],486:[function(a,b,c){arguments[4][354][0].apply(c,arguments)},{"./lib/bn-sign":476,dup:354}],487:[function(a,b,c){arguments[4][355][0].apply(c,arguments)},{"./lib/rationalize":481,dup:355}],488:[function(a,b,c){arguments[4][356][0].apply(c,arguments)},{"./lib/bn-to-num":477,"./lib/ctz":478,dup:356}],489:[function(a,b,c){arguments[4][357][0].apply(c,arguments)},{"./lib/intersect":491,"./lib/sweep":495,dup:357,"typedarray-pool":496}],490:[function(a,b,c){arguments[4][358][0].apply(c,arguments)},{dup:358}],491:[function(a,b,c){arguments[4][359][0].apply(c,arguments)},{"./brute":490,"./median":492,"./partition":493,"./sweep":495,"bit-twiddle":441,dup:359,"typedarray-pool":496}],492:[function(a,b,c){arguments[4][360][0].apply(c,arguments)},{"./partition":493,dup:360}],493:[function(a,b,c){arguments[4][361][0].apply(c,arguments)},{dup:361}],494:[function(a,b,c){arguments[4][362][0].apply(c,arguments)},{dup:362}],495:[function(a,b,c){arguments[4][363][0].apply(c,arguments)},{"./sort":494,"bit-twiddle":441,dup:363,"typedarray-pool":496}],496:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":441,buffer:48,dup:102}],497:[function(a,b,c){arguments[4][44][0].apply(c,arguments)},{dup:44}],498:[function(a,b,c){arguments[4][368][0].apply(c,arguments)},{"double-bits":499,dup:368}],499:[function(a,b,c){arguments[4][353][0].apply(c,arguments)},{buffer:48,dup:353}],500:[function(a,b,c){arguments[4][370][0].apply(c,arguments)},{"big-rat/add":471,dup:370}],501:[function(a,b,c){arguments[4][371][0].apply(c,arguments)},{"big-rat":474,dup:371}],502:[function(a,b,c){arguments[4][372][0].apply(c,arguments)},{"big-rat":474,"big-rat/mul":483,dup:372}],503:[function(a,b,c){arguments[4][373][0].apply(c,arguments)},{"big-rat/sub":487,dup:373}],504:[function(a,b,c){arguments[4][374][0].apply(c,arguments)},{dup:374,"robust-orientation":996}],505:[function(a,b,c){arguments[4][61][0].apply(c,arguments)},{dup:61}],506:[function(a,b,c){arguments[4][376][0].apply(c,arguments)},{dup:376,"edges-to-adjacency-list":507}],507:[function(a,b,c){arguments[4][377][0].apply(c,arguments)},{dup:377,uniq:522}],508:[function(a,b,c){arguments[4][378][0].apply(c,arguments)},{"compare-angle":509,dup:378}],509:[function(a,b,c){arguments[4][379][0].apply(c,arguments)},{dup:379,"robust-orientation":996,"robust-product":511,"robust-sum":520,signum:512,"two-sum":513}],510:[function(a,b,c){arguments[4][37][0].apply(c,arguments)},{dup:37,"two-product":521,"two-sum":513}],511:[function(a,b,c){arguments[4][381][0].apply(c,arguments)},{dup:381,"robust-scale":510,"robust-sum":520}],512:[function(a,b,c){arguments[4][382][0].apply(c,arguments)},{dup:382}],513:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{dup:36}],514:[function(a,b,c){arguments[4][4][0].apply(c,arguments)},{dup:4}],515:[function(a,b,c){arguments[4][385][0].apply(c,arguments)},{"binary-search-bounds":514,dup:385}],516:[function(a,b,c){arguments[4][386][0].apply(c,arguments)},{dup:386,"robust-orientation":996}],517:[function(a,b,c){arguments[4][387][0].apply(c,arguments)},{dup:387}],518:[function(a,b,c){arguments[4][388][0].apply(c,arguments)},{"./lib/order-segments":516,"binary-search-bounds":514,dup:388,"functional-red-black-tree":517,"robust-orientation":996}],519:[function(a,b,c){arguments[4][389][0].apply(c,arguments)},{"binary-search-bounds":514,dup:389,"interval-tree-1d":515,"robust-orientation":996,"slab-decomposition":518}],520:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],521:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],522:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],523:[function(a,b,c){arguments[4][393][0].apply(c,arguments)},{"./lib/trim-leaves":506,dup:393,"edges-to-adjacency-list":507,"planar-dual":508,"point-in-big-polygon":519,"robust-sum":520,"two-product":521,uniq:522}],524:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],525:[function(a,b,c){arguments[4][395][0].apply(c,arguments)},{dup:395}],526:[function(a,b,c){arguments[4][62][0].apply(c,arguments)},{"bit-twiddle":524,dup:62,"union-find":525}],527:[function(a,b,c){arguments[4][397][0].apply(c,arguments)},{dup:397,"robust-orientation":996,"simplicial-complex":526}],528:[function(a,b,c){arguments[4][398][0].apply(c,arguments)},{dup:398,"typedarray-pool":529}],529:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":441,buffer:48,dup:102}],530:[function(a,b,c){arguments[4][402][0].apply(c,arguments)},{dup:402}],531:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":441,buffer:48,dup:102}],532:[function(a,b,c){arguments[4][406][0].apply(c,arguments)},{dup:406,"typedarray-pool":531}],533:[function(a,b,c){arguments[4][407][0].apply(c,arguments)},{dup:407,"invert-permutation":534,"typedarray-pool":535}],534:[function(a,b,c){arguments[4][408][0].apply(c,arguments)},{dup:408}],535:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":441,buffer:48,dup:102}],536:[function(a,b,c){arguments[4][412][0].apply(c,arguments)},{dup:412,gamma:530,"permutation-parity":532,"permutation-rank":533}],537:[function(a,b,c){arguments[4][413][0].apply(c,arguments)},{"cwise-compiler":538,dup:413}],538:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./lib/thunk.js":540,dup:290}],539:[function(a,b,c){arguments[4][291][0].apply(c,arguments)},{dup:291,uniq:541}],540:[function(a,b,c){arguments[4][292][0].apply(c,arguments)},{"./compile.js":539,dup:292}],541:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],542:[function(a,b,c){arguments[4][418][0].apply(c,arguments)},{"./lib/zc-core":537,dup:418}],543:[function(a,b,c){arguments[4][419][0].apply(c,arguments)},{dup:419,"ndarray-extract-contour":528,"triangulate-hypercube":536,"zero-crossings":542}],544:[function(a,b,c){"use strict";function d(a,b,c){this.lo=a,this.hi=b,this.pixelsPerDataUnit=c}function e(a,b,c,d,e){for(var f=0;f<3;++f){for(var g=o,h=p,i=0;i<3;++i)h[i]=g[i]=c[i];h[3]=g[3]=1,h[f]+=1,l(h,h,b),h[3]<0&&(a[f]=1/0),g[f]-=1,l(g,g,b),g[3]<0&&(a[f]=1/0);var j=(g[0]/g[3]-h[0]/h[3])*d,k=(g[1]/g[3]-h[1]/h[3])*e;a[f]=.25*Math.sqrt(j*j+k*k)}return a}function f(a,b,c,d,f){var l=b.model||m,o=b.view||m,p=b.projection||m,s=a.bounds,f=f||i(l,o,p,s),t=f.axis;f.edges;j(n,o,l),j(n,p,n);for(var u=q,v=0;v<3;++v)u[v].lo=1/0,u[v].hi=-(1/0),u[v].pixelsPerDataUnit=1/0;var w=g(k(n,n));k(n,n);for(var x=0;x<3;++x){var y=(x+1)%3,z=(x+2)%3,A=r;a:for(var v=0;v<2;++v){var B=[];if(t[x]<0!=!!v){A[x]=s[v][x];for(var C=0;C<2;++C){A[y]=s[C^v][y];for(var D=0;D<2;++D)A[z]=s[D^C^v][z],B.push(A.slice())}for(var C=0;C<w.length;++C){if(0===B.length)continue a;B=h.positive(B,w[C])}for(var C=0;C<B.length;++C)for(var z=B[C],E=e(r,n,z,c,d),D=0;D<3;++D)u[D].lo=Math.min(u[D].lo,z[D]),u[D].hi=Math.max(u[D].hi,z[D]),D!==x&&(u[D].pixelsPerDataUnit=Math.min(u[D].pixelsPerDataUnit,Math.abs(E[D])))}}}return u}b.exports=f;var g=a("extract-frustum-planes"),h=a("split-polygon"),i=a("./lib/cube.js"),j=a("gl-mat4/multiply"),k=a("gl-mat4/transpose"),l=a("gl-vec4/transformMat4"),m=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n=new Float32Array(16),o=[0,0,0,1],p=[0,0,0,1],q=[new d(1/0,(-(1/0)),1/0),new d(1/0,(-(1/0)),1/0),new d(1/0,(-(1/0)),1/0)],r=[0,0,0]},{"./lib/cube.js":436,"extract-frustum-planes":443,"gl-mat4/multiply":216,"gl-mat4/transpose":224,"gl-vec4/transformMat4":450,"split-polygon":451}],545:[function(a,b,c){arguments[4][294][0].apply(c,arguments)},{dup:294,"gl-texture2d":549}],546:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],547:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],548:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":546,buffer:48,dup:102}],549:[function(a,b,c){arguments[4][164][0].apply(c,arguments)},{dup:164,ndarray:987,"ndarray-ops":982,"typedarray-pool":548}],550:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],551:[function(a,b,c){arguments[4][289][0].apply(c,arguments)},{"cwise-compiler":552,dup:289}],552:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./lib/thunk.js":554,dup:290}],553:[function(a,b,c){arguments[4][291][0].apply(c,arguments)},{dup:291,uniq:555}],554:[function(a,b,c){arguments[4][292][0].apply(c,arguments)},{"./compile.js":553,dup:292}],555:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],556:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],557:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":550,buffer:48,dup:102}],558:[function(a,b,c){arguments[4][298][0].apply(c,arguments)},{"bit-twiddle":550,"cwise/lib/wrapper":551,dup:298,"gl-fbo":545,ndarray:987,"typedarray-pool":557}],559:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{"./lib/GLError":560,"./lib/create-attributes":561,"./lib/create-uniforms":562,"./lib/reflect":563,"./lib/runtime-reflect":564,"./lib/shader-cache":565,dup:76}],560:[function(a,b,c){arguments[4][77][0].apply(c,arguments)},{dup:77}],561:[function(a,b,c){arguments[4][78][0].apply(c,arguments)},{"./GLError":560,dup:78}],562:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{"./GLError":560,"./reflect":563,dup:79}],563:[function(a,b,c){arguments[4][80][0].apply(c,arguments)},{dup:80}],564:[function(a,b,c){arguments[4][81][0].apply(c,arguments)},{dup:81}],565:[function(a,b,c){arguments[4][82][0].apply(c,arguments)},{"./GLError":560,dup:82,"gl-format-compiler-error":566,"weakmap-shim":582}],566:[function(a,b,c){arguments[4][83][0].apply(c,arguments)},{"add-line-numbers":567,dup:83,"gl-constants/lookup":571,"glsl-shader-name":572,"sprintf-js":579}],567:[function(a,b,c){arguments[4][84][0].apply(c,arguments)},{dup:84,"pad-left":568}],568:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85,"repeat-string":569}],569:[function(a,b,c){arguments[4][86][0].apply(c,arguments)},{dup:86}],570:[function(a,b,c){arguments[4][87][0].apply(c,arguments)},{dup:87}],571:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{"./1.0/numbers":570,dup:88}],572:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{"atob-lite":573,dup:89,"glsl-tokenizer":578}],573:[function(a,b,c){arguments[4][90][0].apply(c,arguments)},{dup:90}],574:[function(a,b,c){arguments[4][91][0].apply(c,arguments)},{"./lib/builtins":575,"./lib/literals":576,"./lib/operators":577,dup:91}],575:[function(a,b,c){arguments[4][92][0].apply(c,arguments)},{dup:92}],576:[function(a,b,c){arguments[4][93][0].apply(c,arguments)},{dup:93}],577:[function(a,b,c){arguments[4][94][0].apply(c,arguments)},{dup:94}],578:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{"./index":574,dup:95}],579:[function(a,b,c){arguments[4][96][0].apply(c,arguments)},{dup:96}],580:[function(a,b,c){arguments[4][97][0].apply(c,arguments)},{"./hidden-store.js":581,dup:97}],581:[function(a,b,c){arguments[4][98][0].apply(c,arguments)},{dup:98}],582:[function(a,b,c){arguments[4][99][0].apply(c,arguments)},{"./create-store.js":580,dup:99}],583:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":586}],584:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],585:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],586:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":584,buffer:48,dup:102}],587:[function(a,b,c){arguments[4][132][0].apply(c,arguments)},{dup:132}],588:[function(a,b,c){arguments[4][133][0].apply(c,arguments)},{"./do-bind.js":587,dup:133}],589:[function(a,b,c){arguments[4][134][0].apply(c,arguments)},{"./do-bind.js":587,dup:134}],590:[function(a,b,c){arguments[4][135][0].apply(c,arguments)},{"./lib/vao-emulated.js":588,"./lib/vao-native.js":589,dup:135}],591:[function(a,b,c){"use strict";var d=a("gl-shader"),e="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n",f="#define GLSLIFY 1\nprecision mediump float;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}";b.exports=function(a){return d(a,e,f,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":559}],592:[function(a,b,c){"use strict";function d(a,b,c,d){this.gl=a,this.buffer=b,this.vao=c,this.shader=d,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}function e(a,b){function c(a,b,c,d,f,g){var h=[a,b,c,0,0,0,1];h[d+3]=1,h[d]=f,e.push.apply(e,h),h[6]=-1,e.push.apply(e,h),h[d]=g,e.push.apply(e,h),e.push.apply(e,h),h[6]=1,e.push.apply(e,h),h[d]=f,e.push.apply(e,h)}var e=[];c(0,0,0,0,0,1),c(0,0,0,1,0,1),c(0,0,0,2,0,1),c(1,0,0,1,-1,1),c(1,0,0,2,-1,1),c(0,1,0,0,-1,1),c(0,1,0,2,-1,1),c(0,0,1,0,-1,1),c(0,0,1,1,-1,1);var i=f(a,e),j=g(a,[{type:a.FLOAT,buffer:i,size:3,offset:0,stride:28},{type:a.FLOAT,buffer:i,size:3,offset:12,stride:28},{type:a.FLOAT,buffer:i,size:1,offset:24,stride:28}]),k=h(a);k.attributes.position.location=0,k.attributes.color.location=1,k.attributes.weight.location=2;var l=new d(a,i,j,k);return l.update(b),l}var f=a("gl-buffer"),g=a("gl-vao"),h=a("./shaders/index");b.exports=e;var i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],j=d.prototype,k=[0,0,0],l=[0,0,0],m=[0,0];j.isTransparent=function(){return!1},j.drawTransparent=function(a){},j.draw=function(a){var b=this.gl,c=this.vao,d=this.shader;c.bind(),d.bind();var e,f=a.model||i,g=a.view||i,h=a.projection||i;this.axes&&(e=this.axes.lastCubeProps.axis);for(var j=k,n=l,o=0;o<3;++o)e&&e[o]<0?(j[o]=this.bounds[0][o],n[o]=this.bounds[1][o]):(j[o]=this.bounds[1][o],n[o]=this.bounds[0][o]);m[0]=b.drawingBufferWidth,m[1]=b.drawingBufferHeight,d.uniforms.model=f,d.uniforms.view=g,d.uniforms.projection=h,d.uniforms.coordinates=[this.position,j,n],d.uniforms.colors=this.colors,d.uniforms.screenShape=m;for(var o=0;o<3;++o)d.uniforms.lineWidth=this.lineWidth[o]*this.pixelRatio,
this.enabled[o]&&(c.draw(b.TRIANGLES,6,6*o),this.drawSides[o]&&c.draw(b.TRIANGLES,12,18+12*o));c.unbind()},j.update=function(a){a&&("bounds"in a&&(this.bounds=a.bounds),"position"in a&&(this.position=a.position),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"colors"in a&&(this.colors=a.colors),"enabled"in a&&(this.enabled=a.enabled),"drawSides"in a&&(this.drawSides=a.drawSides))},j.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":591,"gl-buffer":583,"gl-vao":590}],593:[function(a,b,c){"use strict";function d(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function e(a,b){var c=null;try{c=a.getContext("webgl",b),c||(c=a.getContext("experimental-webgl",b))}catch(d){return null}return c}function f(a){var b=Math.round(Math.log(Math.abs(a))/Math.log(10));if(b<0){var c=Math.round(Math.pow(10,-b));return Math.ceil(a*c)/c}if(b>0){var c=Math.round(Math.pow(10,b));return Math.ceil(a/c)*c}return Math.ceil(a)}function g(a){return"boolean"!=typeof a||a}function h(a){function b(){if(!v&&S.autoResize){var a=w.parentNode,b=1,c=1;a&&a!==document.body?(b=a.clientWidth,c=a.clientHeight):(b=window.innerWidth,c=window.innerHeight);var d=0|Math.ceil(b*S.pixelRatio),e=0|Math.ceil(c*S.pixelRatio);if(d!==w.width||e!==w.height){w.width=d,w.height=e;var f=w.style;f.position=f.position||"absolute",f.left="0px",f.top="0px",f.width=b+"px",f.height=c+"px",M=!0}}}function c(){for(var a=I.length,b=L.length,c=0;c<b;++c)K[c]=0;a:for(var c=0;c<a;++c){var d=I[c],e=d.pickSlots;if(e){for(var f=0;f<b;++f)if(K[f]+e<255){J[c]=f,d.setPickBase(K[f]+1),K[f]+=e;continue a}var g=m(y,R);J[c]=b,L.push(g),K.push(e),d.setPickBase(1),b+=1}else J[c]=-1}for(;b>0&&0===K[b-1];)K.pop(),L.pop().dispose()}function h(){return!!S.contextLost||void(y.isContextLost()&&(S.contextLost=!0,S.mouseListener.enabled=!1,S.selection.object=null,S.oncontextloss&&S.oncontextloss()))}function s(){if(!h()){y.colorMask(!0,!0,!0,!0),y.depthMask(!0),y.disable(y.BLEND),y.enable(y.DEPTH_TEST);for(var a=I.length,b=L.length,c=0;c<b;++c){var d=L[c];d.shape=T,d.begin();for(var e=0;e<a;++e)if(J[e]===c){var f=I[e];f.drawPick&&(f.pixelRatio=1,f.drawPick(Q))}d.end()}}}function t(){if(!h()){b();var a=S.camera.tick();Q.view=S.camera.matrix,M=M||a,N=N||a,F.pixelRatio=S.pixelRatio,H.pixelRatio=S.pixelRatio;var c=I.length,d=W[0],e=W[1];d[0]=d[1]=d[2]=1/0,e[0]=e[1]=e[2]=-(1/0);for(var g=0;g<c;++g){var i=I[g];i.pixelRatio=S.pixelRatio,i.axes=S.axes,M=M||!!i.dirty,N=N||!!i.dirty;var j=i.bounds;if(j)for(var l=j[0],m=j[1],n=0;n<3;++n)d[n]=Math.min(d[n],l[n]),e[n]=Math.max(e[n],m[n])}var p=S.bounds;if(S.autoBounds)for(var n=0;n<3;++n){if(e[n]<d[n])d[n]=-1,e[n]=1;else{d[n]===e[n]&&(d[n]-=1,e[n]+=1);var r=.05*(e[n]-d[n]);d[n]=d[n]-r,e[n]=e[n]+r}p[0][n]=d[n],p[1][n]=e[n]}for(var t=!1,n=0;n<3;++n)t=t||X[0][n]!==p[0][n]||X[1][n]!==p[1][n],X[0][n]=p[0][n],X[1][n]=p[1][n];if(t){for(var u=[0,0,0],g=0;g<3;++g)u[g]=f((p[1][g]-p[0][g])/10);F.autoTicks?F.update({bounds:p,tickSpacing:u}):F.update({bounds:p})}N=N||t,M=M||t;var v=y.drawingBufferWidth,w=y.drawingBufferHeight;R[0]=v,R[1]=w,T[0]=0|Math.max(v/S.pixelRatio,1),T[1]=0|Math.max(w/S.pixelRatio,1),q(O,S.fovy,v/w,S.zNear,S.zFar);for(var g=0;g<16;++g)P[g]=0;P[15]=1;for(var x=0,g=0;g<3;++g)x=Math.max(x,p[1][g]-p[0][g]);for(var g=0;g<3;++g)S.autoScale?P[5*g]=S.aspect[g]/(p[1][g]-p[0][g]):P[5*g]=1/x,S.autoCenter&&(P[12+g]=.5*-P[5*g]*(p[0][g]+p[1][g]));for(var g=0;g<c;++g){var i=I[g];i.axesBounds=p,S.clipToBounds&&(i.clipBounds=p)}if(A.object&&(S.snapToData?H.position=A.dataCoordinate:H.position=A.dataPosition,H.bounds=p),N&&(N=!1,s()),M){S.axesPixels=k(S.axes,Q,v,w),S.onrender&&S.onrender(),y.bindFramebuffer(y.FRAMEBUFFER,null),y.viewport(0,0,v,w);var z=S.clearColor;y.clearColor(z[0],z[1],z[2],z[3]),y.clear(y.COLOR_BUFFER_BIT|y.DEPTH_BUFFER_BIT),y.depthMask(!0),y.colorMask(!0,!0,!0,!0),y.enable(y.DEPTH_TEST),y.depthFunc(y.LEQUAL),y.disable(y.BLEND),y.disable(y.CULL_FACE);var D=!1;F.enable&&(D=D||F.isTransparent(),F.draw(Q)),H.axes=F,A.object&&H.draw(Q),y.disable(y.CULL_FACE);for(var g=0;g<c;++g){var i=I[g];i.axes=F,i.pixelRatio=S.pixelRatio,i.isOpaque&&i.isOpaque()&&i.draw(Q),i.isTransparent&&i.isTransparent()&&(D=!0)}if(D){B.shape=R,B.bind(),y.clear(y.DEPTH_BUFFER_BIT),y.colorMask(!1,!1,!1,!1),y.depthMask(!0),y.depthFunc(y.LESS),F.enable&&F.isTransparent()&&F.drawTransparent(Q);for(var g=0;g<c;++g){var i=I[g];i.isOpaque&&i.isOpaque()&&i.draw(Q)}y.enable(y.BLEND),y.blendEquation(y.FUNC_ADD),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),y.colorMask(!0,!0,!0,!0),y.depthMask(!1),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT),F.isTransparent()&&F.drawTransparent(Q);for(var g=0;g<c;++g){var i=I[g];i.isTransparent&&i.isTransparent()&&i.drawTransparent(Q)}y.bindFramebuffer(y.FRAMEBUFFER,null),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),y.disable(y.DEPTH_TEST),C.bind(),B.color[0].bind(0),C.uniforms.accumBuffer=0,o(y),y.disable(y.BLEND)}M=!1;for(var g=0;g<c;++g)I[g].dirty=!1}}}function u(){v||S.contextLost||(requestAnimationFrame(u),t())}a=a||{};var v=!1,w=(a.pixelRatio||parseFloat(window.devicePixelRatio),a.canvas);if(!w)if(w=document.createElement("canvas"),a.container){var x=a.container;x.appendChild(w)}else document.body.appendChild(w);var y=a.gl;if(y||(y=e(w,a.glOptions||{premultipliedAlpha:!0,antialias:!0})),!y)throw new Error("webgl not supported");var z=a.bounds||[[-10,-10,-10],[10,10,10]],A=new d,B=n(y,[y.drawingBufferWidth,y.drawingBufferHeight],{preferFloat:!0}),C=r(y),D=a.camera||{eye:[2,0,0],center:[0,0,0],up:[0,1,0],zoomMin:.1,zoomMax:100,mode:"turntable"},E=a.axes||{},F=j(y,E);F.enable=!E.disable;var G=a.spikes||{},H=l(y,G),I=[],J=[],K=[],L=[],M=!0,N=!0,O=new Array(16),P=new Array(16),Q={view:null,projection:O,model:P},N=!0,R=[y.drawingBufferWidth,y.drawingBufferHeight],S={gl:y,contextLost:!1,pixelRatio:a.pixelRatio||parseFloat(window.devicePixelRatio),canvas:w,selection:A,camera:i(w,D),axes:F,axesPixels:null,spikes:H,bounds:z,objects:I,shape:R,aspect:a.aspectRatio||[1,1,1],pickRadius:a.pickRadius||10,zNear:a.zNear||.01,zFar:a.zFar||1e3,fovy:a.fovy||Math.PI/4,clearColor:a.clearColor||[0,0,0,0],autoResize:g(a.autoResize),autoBounds:g(a.autoBounds),autoScale:!!a.autoScale,autoCenter:g(a.autoCenter),clipToBounds:g(a.clipToBounds),snapToData:!!a.snapToData,onselect:a.onselect||null,onrender:a.onrender||null,onclick:a.onclick||null,cameraParams:Q,oncontextloss:null,mouseListener:null},T=[y.drawingBufferWidth/S.pixelRatio|0,y.drawingBufferHeight/S.pixelRatio|0];S.autoResize&&b(),window.addEventListener("resize",b),S.update=function(a){v||(a=a||{},M=!0,N=!0)},S.add=function(a){v||(a.axes=F,I.push(a),J.push(-1),M=!0,N=!0,c())},S.remove=function(a){if(!v){var b=I.indexOf(a);b<0||(I.splice(b,1),J.pop(),M=!0,N=!0,c())}},S.dispose=function(){if(!v&&(v=!0,window.removeEventListener("resize",b),w.removeEventListener("webglcontextlost",h),S.mouseListener.enabled=!1,!S.contextLost)){F.dispose(),H.dispose();for(var a=0;a<I.length;++a)I[a].dispose();B.dispose();for(var a=0;a<L.length;++a)L[a].dispose();C.dispose(),y=null,F=null,H=null,I=[]}};var U=!1,V=0;S.mouseListener=p(w,function(a,b,c){if(!v){var d=L.length,e=I.length,f=A.object;A.distance=1/0,A.mouse[0]=b,A.mouse[1]=c,A.object=null,A.screen=null,A.dataCoordinate=A.dataPosition=null;var g=!1;if(a)U=!0;else{U&&(N=!0),U=!1;for(var h=0;h<d;++h){var i=L[h].query(b,T[1]-c-1,S.pickRadius);if(i){if(i.distance>A.distance)continue;for(var j=0;j<e;++j){var k=I[j];if(J[j]===h){var l=k.pick(i);l&&(A.screen=i.coord,A.distance=i.distance,A.object=k,A.index=l.distance,A.dataPosition=l.position,A.dataCoordinate=l.dataCoordinate,A.data=l,g=!0)}}}}}f&&f!==A.object&&(f.highlight&&f.highlight(null),M=!0),A.object&&(A.object.highlight&&A.object.highlight(A.data),M=!0),g=g||A.object!==f,g&&S.onselect&&S.onselect(A),1&a&&!(1&V)&&S.onclick&&S.onclick(A),V=a}}),w.addEventListener("webglcontextlost",h);var W=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],X=[W[0].slice(),W[1].slice()];return u(),S.redraw=function(){v||(M=!0,t())},S}b.exports=h;var i=a("3d-view-controls"),j=a("gl-axes3d"),k=a("gl-axes3d/properties"),l=a("gl-spikes3d"),m=a("gl-select-static"),n=a("gl-fbo"),o=a("a-big-triangle"),p=a("mouse-change"),q=a("gl-mat4/perspective"),r=a("./lib/shader")},{"./lib/shader":422,"3d-view-controls":423,"a-big-triangle":433,"gl-axes3d":434,"gl-axes3d/properties":544,"gl-fbo":545,"gl-mat4/perspective":217,"gl-select-static":558,"gl-spikes3d":592,"mouse-change":960}],594:[function(a,b,c){"use strict";b.exports={vertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute vec2 offset;\nattribute vec4 color;\n\nuniform mat3 viewTransform;\nuniform vec2 pixelScale;\n\nvarying vec4 fragColor;\n\nvec4 computePosition_1_0(vec2 position, vec2 offset, mat3 view, vec2 scale) {\n  vec3 xposition = view * vec3(position, 1.0);\n  return vec4(\n    xposition.xy + scale * offset * xposition.z,\n    0,\n    xposition.z);\n}\n\n\n\n\nvoid main() {\n  fragColor = color;\n\n  gl_Position = computePosition_1_0(\n    position,\n    offset,\n    viewTransform,\n    pixelScale);\n}\n",fragment:"#define GLSLIFY 1\nprecision lowp float;\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n",pickVertex:"#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute vec2 offset;\nattribute vec4 id;\n\nuniform mat3 viewTransform;\nuniform vec2 pixelScale;\nuniform vec4 pickOffset;\n\nvarying vec4 fragColor;\n\nvec4 computePosition_1_0(vec2 position, vec2 offset, mat3 view, vec2 scale) {\n  vec3 xposition = view * vec3(position, 1.0);\n  return vec4(\n    xposition.xy + scale * offset * xposition.z,\n    0,\n    xposition.z);\n}\n\n\n\n\nvoid main() {\n  vec4 fragId = id + pickOffset;\n\n  fragId.y += floor(fragId.x / 256.0);\n  fragId.x -= floor(fragId.x / 256.0) * 256.0;\n\n  fragId.z += floor(fragId.y / 256.0);\n  fragId.y -= floor(fragId.y / 256.0) * 256.0;\n\n  fragId.w += floor(fragId.z / 256.0);\n  fragId.z -= floor(fragId.z / 256.0) * 256.0;\n\n  fragColor = fragId / 255.0;\n\n  gl_Position = computePosition_1_0(\n    position,\n    offset,\n    viewTransform,\n    pixelScale);\n}\n",pickFragment:"#define GLSLIFY 1\nprecision lowp float;\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = fragColor;\n}\n"}},{}],595:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":623}],596:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{"./lib/GLError":597,"./lib/create-attributes":598,"./lib/create-uniforms":599,"./lib/reflect":600,"./lib/runtime-reflect":601,"./lib/shader-cache":602,dup:76}],597:[function(a,b,c){arguments[4][77][0].apply(c,arguments)},{dup:77}],598:[function(a,b,c){arguments[4][78][0].apply(c,arguments)},{"./GLError":597,dup:78}],599:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{"./GLError":597,"./reflect":600,dup:79}],600:[function(a,b,c){arguments[4][80][0].apply(c,arguments)},{dup:80}],601:[function(a,b,c){arguments[4][81][0].apply(c,arguments)},{dup:81}],602:[function(a,b,c){arguments[4][82][0].apply(c,arguments)},{"./GLError":597,dup:82,"gl-format-compiler-error":603,"weakmap-shim":619}],603:[function(a,b,c){arguments[4][83][0].apply(c,arguments)},{"add-line-numbers":604,dup:83,"gl-constants/lookup":608,"glsl-shader-name":609,"sprintf-js":616}],604:[function(a,b,c){arguments[4][84][0].apply(c,arguments)},{dup:84,"pad-left":605}],605:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85,"repeat-string":606}],606:[function(a,b,c){arguments[4][86][0].apply(c,arguments)},{dup:86}],607:[function(a,b,c){arguments[4][87][0].apply(c,arguments)},{dup:87}],608:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{"./1.0/numbers":607,dup:88}],609:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{"atob-lite":610,dup:89,"glsl-tokenizer":615}],610:[function(a,b,c){arguments[4][90][0].apply(c,arguments)},{dup:90}],611:[function(a,b,c){arguments[4][91][0].apply(c,arguments)},{"./lib/builtins":612,"./lib/literals":613,"./lib/operators":614,dup:91}],612:[function(a,b,c){arguments[4][92][0].apply(c,arguments)},{dup:92}],613:[function(a,b,c){arguments[4][93][0].apply(c,arguments)},{dup:93}],614:[function(a,b,c){arguments[4][94][0].apply(c,arguments)},{dup:94}],615:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{"./index":611,dup:95}],616:[function(a,b,c){arguments[4][96][0].apply(c,arguments)},{dup:96}],617:[function(a,b,c){arguments[4][97][0].apply(c,arguments)},{"./hidden-store.js":618,dup:97}],618:[function(a,b,c){arguments[4][98][0].apply(c,arguments)},{dup:98}],619:[function(a,b,c){arguments[4][99][0].apply(c,arguments)},{"./create-store.js":617,dup:99}],620:[function(a,b,c){arguments[4][420][0].apply(c,arguments)},{_process:53,dup:420,"vectorize-text":624}],621:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],622:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],623:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":621,buffer:48,dup:102}],624:[function(a,b,c){arguments[4][323][0].apply(c,arguments)},{"./lib/vtext":625,dup:323}],625:[function(a,b,c){arguments[4][324][0].apply(c,arguments)},{cdt2d:626,"clean-pslg":638,dup:324,ndarray:987,"planar-graph-to-polyline":693,"simplify-planar-graph":697,"surface-nets":710}],626:[function(a,b,c){arguments[4][325][0].apply(c,arguments)},{"./lib/delaunay":627,"./lib/filter":628,"./lib/monotone":629,"./lib/triangulation":630,dup:325}],627:[function(a,b,c){arguments[4][326][0].apply(c,arguments)},{"binary-search-bounds":631,dup:326,"robust-in-sphere":632}],628:[function(a,b,c){arguments[4][327][0].apply(c,arguments)},{"binary-search-bounds":631,dup:327}],629:[function(a,b,c){arguments[4][328][0].apply(c,arguments)},{"binary-search-bounds":631,dup:328,"robust-orientation":996}],630:[function(a,b,c){arguments[4][329][0].apply(c,arguments)},{"binary-search-bounds":631,dup:329}],631:[function(a,b,c){arguments[4][283][0].apply(c,arguments)},{dup:283}],632:[function(a,b,c){arguments[4][330][0].apply(c,arguments)},{dup:330,"robust-scale":634,"robust-subtract":635,"robust-sum":636,"two-product":637}],633:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{dup:36}],634:[function(a,b,c){arguments[4][37][0].apply(c,arguments)},{dup:37,"two-product":637,"two-sum":633}],635:[function(a,b,c){arguments[4][333][0].apply(c,arguments)},{dup:333}],636:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],637:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],638:[function(a,b,c){arguments[4][336][0].apply(c,arguments)},{"./lib/rat-seg-intersect":639,"big-rat":643,"big-rat/cmp":641,"big-rat/to-float":658,"box-intersect":659,"compare-cell":667,dup:336,nextafter:668,"rat-vec":671,"robust-segment-intersect":674,"union-find":675}],639:[function(a,b,c){arguments[4][337][0].apply(c,arguments)},{"big-rat/div":642,"big-rat/mul":652,"big-rat/sign":656,"big-rat/sub":657,"big-rat/to-float":658,dup:337,"rat-vec/add":670,"rat-vec/muls":672,"rat-vec/sub":673}],640:[function(a,b,c){arguments[4][338][0].apply(c,arguments)},{"./lib/rationalize":650,dup:338}],641:[function(a,b,c){arguments[4][339][0].apply(c,arguments)},{dup:339}],642:[function(a,b,c){arguments[4][340][0].apply(c,arguments)},{"./lib/rationalize":650,dup:340}],643:[function(a,b,c){arguments[4][341][0].apply(c,arguments)},{"./div":642,"./is-rat":644,"./lib/is-bn":648,"./lib/num-to-bn":649,"./lib/rationalize":650,"./lib/str-to-bn":651,dup:341}],644:[function(a,b,c){arguments[4][342][0].apply(c,arguments)},{"./lib/is-bn":648,dup:342}],645:[function(a,b,c){arguments[4][343][0].apply(c,arguments)},{"bn.js":654,dup:343}],646:[function(a,b,c){arguments[4][344][0].apply(c,arguments)},{dup:344}],647:[function(a,b,c){arguments[4][345][0].apply(c,arguments)},{"bit-twiddle":653,"double-bits":655,dup:345}],648:[function(a,b,c){arguments[4][346][0].apply(c,arguments)},{"bn.js":654,dup:346}],649:[function(a,b,c){arguments[4][347][0].apply(c,arguments)},{"bn.js":654,"double-bits":655,dup:347}],650:[function(a,b,c){arguments[4][348][0].apply(c,arguments)},{"./bn-sign":645,"./num-to-bn":649,dup:348}],651:[function(a,b,c){arguments[4][349][0].apply(c,arguments)},{"bn.js":654,dup:349}],652:[function(a,b,c){arguments[4][350][0].apply(c,arguments)},{"./lib/rationalize":650,dup:350}],653:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],654:[function(a,b,c){arguments[4][352][0].apply(c,arguments)},{dup:352}],655:[function(a,b,c){arguments[4][353][0].apply(c,arguments)},{buffer:48,dup:353}],656:[function(a,b,c){arguments[4][354][0].apply(c,arguments)},{"./lib/bn-sign":645,dup:354}],657:[function(a,b,c){arguments[4][355][0].apply(c,arguments)},{"./lib/rationalize":650,dup:355}],658:[function(a,b,c){arguments[4][356][0].apply(c,arguments)},{"./lib/bn-to-num":646,"./lib/ctz":647,dup:356}],659:[function(a,b,c){arguments[4][357][0].apply(c,arguments)},{"./lib/intersect":661,"./lib/sweep":665,dup:357,"typedarray-pool":623}],660:[function(a,b,c){arguments[4][358][0].apply(c,arguments)},{dup:358}],661:[function(a,b,c){arguments[4][359][0].apply(c,arguments)},{"./brute":660,"./median":662,"./partition":663,"./sweep":665,"bit-twiddle":666,dup:359,"typedarray-pool":623}],662:[function(a,b,c){arguments[4][360][0].apply(c,arguments)},{"./partition":663,dup:360}],663:[function(a,b,c){arguments[4][361][0].apply(c,arguments)},{dup:361}],664:[function(a,b,c){arguments[4][362][0].apply(c,arguments)},{dup:362}],665:[function(a,b,c){arguments[4][363][0].apply(c,arguments)},{"./sort":664,"bit-twiddle":666,dup:363,"typedarray-pool":623}],666:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],667:[function(a,b,c){arguments[4][44][0].apply(c,arguments)},{dup:44}],668:[function(a,b,c){arguments[4][368][0].apply(c,arguments)},{"double-bits":669,dup:368}],669:[function(a,b,c){arguments[4][353][0].apply(c,arguments)},{buffer:48,dup:353}],670:[function(a,b,c){arguments[4][370][0].apply(c,arguments)},{"big-rat/add":640,dup:370}],671:[function(a,b,c){arguments[4][371][0].apply(c,arguments)},{"big-rat":643,dup:371}],672:[function(a,b,c){arguments[4][372][0].apply(c,arguments)},{"big-rat":643,"big-rat/mul":652,dup:372}],673:[function(a,b,c){arguments[4][373][0].apply(c,arguments)},{"big-rat/sub":657,dup:373}],674:[function(a,b,c){arguments[4][374][0].apply(c,arguments)},{dup:374,"robust-orientation":996}],675:[function(a,b,c){arguments[4][61][0].apply(c,arguments)},{dup:61}],676:[function(a,b,c){arguments[4][376][0].apply(c,arguments)},{dup:376,"edges-to-adjacency-list":677}],677:[function(a,b,c){arguments[4][377][0].apply(c,arguments)},{dup:377,uniq:692}],678:[function(a,b,c){arguments[4][378][0].apply(c,arguments)},{"compare-angle":679,dup:378}],679:[function(a,b,c){arguments[4][379][0].apply(c,arguments)},{dup:379,"robust-orientation":996,"robust-product":681,"robust-sum":690,signum:682,"two-sum":683}],680:[function(a,b,c){arguments[4][37][0].apply(c,arguments)},{dup:37,"two-product":691,"two-sum":683}],681:[function(a,b,c){arguments[4][381][0].apply(c,arguments)},{dup:381,"robust-scale":680,"robust-sum":690}],682:[function(a,b,c){arguments[4][382][0].apply(c,arguments)},{dup:382}],683:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{dup:36}],684:[function(a,b,c){arguments[4][4][0].apply(c,arguments)},{dup:4}],685:[function(a,b,c){arguments[4][385][0].apply(c,arguments)},{"binary-search-bounds":684,dup:385}],686:[function(a,b,c){arguments[4][386][0].apply(c,arguments)},{dup:386,"robust-orientation":996}],687:[function(a,b,c){arguments[4][387][0].apply(c,arguments)},{dup:387}],688:[function(a,b,c){arguments[4][388][0].apply(c,arguments)},{"./lib/order-segments":686,"binary-search-bounds":684,dup:388,"functional-red-black-tree":687,"robust-orientation":996}],689:[function(a,b,c){arguments[4][389][0].apply(c,arguments)},{"binary-search-bounds":684,dup:389,"interval-tree-1d":685,"robust-orientation":996,"slab-decomposition":688}],690:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],691:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],692:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],693:[function(a,b,c){arguments[4][393][0].apply(c,arguments)},{"./lib/trim-leaves":676,dup:393,"edges-to-adjacency-list":677,"planar-dual":678,"point-in-big-polygon":689,"robust-sum":690,"two-product":691,uniq:692}],694:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],695:[function(a,b,c){arguments[4][395][0].apply(c,arguments)},{dup:395}],696:[function(a,b,c){arguments[4][62][0].apply(c,arguments)},{"bit-twiddle":694,dup:62,"union-find":695}],697:[function(a,b,c){arguments[4][397][0].apply(c,arguments)},{dup:397,"robust-orientation":996,"simplicial-complex":696}],698:[function(a,b,c){arguments[4][398][0].apply(c,arguments)},{dup:398,"typedarray-pool":623}],699:[function(a,b,c){arguments[4][402][0].apply(c,arguments)},{dup:402}],700:[function(a,b,c){arguments[4][406][0].apply(c,arguments)},{dup:406,"typedarray-pool":623}],701:[function(a,b,c){arguments[4][407][0].apply(c,arguments)},{dup:407,"invert-permutation":702,"typedarray-pool":623}],702:[function(a,b,c){arguments[4][408][0].apply(c,arguments)},{dup:408}],703:[function(a,b,c){arguments[4][412][0].apply(c,arguments)},{dup:412,gamma:699,"permutation-parity":700,"permutation-rank":701}],704:[function(a,b,c){arguments[4][413][0].apply(c,arguments)},{"cwise-compiler":705,dup:413}],705:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./lib/thunk.js":707,dup:290}],706:[function(a,b,c){arguments[4][291][0].apply(c,arguments)},{dup:291,uniq:708}],707:[function(a,b,c){arguments[4][292][0].apply(c,arguments)},{"./compile.js":706,dup:292}],708:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],709:[function(a,b,c){arguments[4][418][0].apply(c,arguments)},{"./lib/zc-core":704,dup:418}],710:[function(a,b,c){arguments[4][419][0].apply(c,arguments)},{dup:419,"ndarray-extract-contour":698,"triangulate-hypercube":703,"zero-crossings":709}],711:[function(a,b,c){"use strict";function d(a){if(a in m)return m[a];var b=k(a,{polygons:!0,font:"sans-serif",textAlign:"left",textBaseline:"alphabetic"}),c=[],d=[];b.forEach(function(a){a.forEach(function(a){for(var b=0;b<a.length;++b){var e=a[(b+a.length-1)%a.length],f=a[b],g=a[(b+1)%a.length],h=a[(b+2)%a.length],i=f[0]-e[0],j=f[1]-e[1],k=Math.sqrt(i*i+j*j);i/=k,j/=k,c.push(e[0],e[1]+1.4),d.push(j,-i),c.push(e[0],e[1]+1.4),d.push(-j,i),c.push(f[0],f[1]+1.4),d.push(-j,i),c.push(f[0],f[1]+1.4),d.push(-j,i),c.push(e[0],e[1]+1.4),d.push(j,-i),c.push(f[0],f[1]+1.4),d.push(j,-i);var l=h[0]-g[0],m=h[1]-g[1],n=Math.sqrt(l*l+m*m);l/=n,m/=n,c.push(f[0],f[1]+1.4),d.push(j,-i),c.push(f[0],f[1]+1.4),d.push(-j,i),c.push(g[0],g[1]+1.4),d.push(-m,l),c.push(g[0],g[1]+1.4),d.push(-m,l),c.push(f[0],f[1]+1.4),d.push(m,-l),c.push(g[0],g[1]+1.4),d.push(m,-l)}})});for(var e=[1/0,1/0,-(1/0),-(1/0)],f=0;f<c.length;f+=2)for(var g=0;g<2;++g)e[g]=Math.min(e[g],c[f+g]),e[2+g]=Math.max(e[2+g],c[f+g]);return m[a]={coords:c,normals:d,bounds:e}}function e(a,b,c,d,e,f,g){this.plot=a,this.shader=b,this.pickShader=c,this.positionBuffer=d,this.offsetBuffer=e,this.colorBuffer=f,this.idBuffer=g,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.numPoints=0,this.numVertices=0,this.pickOffset=0,this.points=null}function f(a,b){var c=a.gl,d=g(c,l.vertex,l.fragment),f=g(c,l.pickVertex,l.pickFragment),i=h(c),j=h(c),k=h(c),m=h(c),n=new e(a,d,f,i,j,k,m);return n.update(b),a.addObject(n),n}b.exports=f;var g=a("gl-shader"),h=a("gl-buffer"),i=a("text-cache"),j=a("typedarray-pool"),k=a("vectorize-text"),l=a("./lib/shaders"),m={},n=e.prototype;!function(){function a(){var a=this.plot,d=this.bounds,e=a.viewBox,f=a.dataBox,g=a.pixelRatio,h=d[2]-d[0],i=d[3]-d[1],j=f[2]-f[0],k=f[3]-f[1];b[0]=2*h/j,b[4]=2*i/k,b[6]=2*(d[0]-f[0])/j-1,b[7]=2*(d[1]-f[1])/k-1;var l=e[2]-e[0],m=e[3]-e[1];c[0]=2*g/l,c[1]=2*g/m}var b=[1,0,0,0,1,0,0,0,1],c=[1,1];n.draw=function(){var d=this.plot,e=this.shader,f=this.numVertices,g=d.gl;a.call(this),e.bind(),e.uniforms.pixelScale=c,e.uniforms.viewTransform=b,this.positionBuffer.bind(),e.attributes.position.pointer(),this.offsetBuffer.bind(),e.attributes.offset.pointer(),this.colorBuffer.bind(),e.attributes.color.pointer(g.UNSIGNED_BYTE,!0),g.drawArrays(g.TRIANGLES,0,f)};var d=[0,0,0,0];n.drawPick=function(e){var f=this.plot,g=this.pickShader,h=this.numVertices,i=f.gl;this.pickOffset=e;for(var j=0;j<4;++j)d[j]=e>>8*j&255;return a.call(this),g.bind(),g.uniforms.pixelScale=c,g.uniforms.viewTransform=b,g.uniforms.pickOffset=d,this.positionBuffer.bind(),g.attributes.position.pointer(),this.offsetBuffer.bind(),g.attributes.offset.pointer(),this.idBuffer.bind(),g.attributes.id.pointer(i.UNSIGNED_BYTE,!1),i.drawArrays(i.TRIANGLES,0,h),e+this.numPoints}}(),n.pick=function(a,b,c){var d=this.pickOffset,e=this.numPoints;if(c<d||c>=d+e)return null;var f=c-d,g=this.points;return{object:this,pointId:f,dataCoord:[g[2*f],g[2*f+1]]}},n.update=function(a){a=a||{};var b=a.positions||[],c=a.colors||[],e=a.glyphs||[],f=a.sizes||[],g=a.borderWidths||[],h=a.borderColors||[];this.points=b;for(var k=this.bounds=[1/0,1/0,-(1/0),-(1/0)],l=0,m=0;m<e.length;++m){l+=i("sans-serif",e[m]).data.length+d(e[m]).coords.length>>1;for(var n=0;n<2;++n)k[n]=Math.min(k[n],b[2*m+n]),k[2+n]=Math.max(k[2+n],b[2*m+n])}k[0]===k[2]&&(k[2]+=1),k[3]===k[1]&&(k[3]+=1);for(var o=1/(k[2]-k[0]),p=1/(k[3]-k[1]),q=k[0],r=k[1],s=j.mallocFloat32(2*l),t=j.mallocFloat32(2*l),u=j.mallocUint8(4*l),v=j.mallocUint32(l),w=0,m=0;m<e.length;++m){for(var x=i("sans-serif",e[m]),y=d(e[m]),z=o*(b[2*m]-q),A=p*(b[2*m+1]-r),B=f[m],C=255*c[4*m],D=255*c[4*m+1],E=255*c[4*m+2],F=255*c[4*m+3],G=.5*(y.bounds[0]+y.bounds[2]),H=.5*(y.bounds[1]+y.bounds[3]),n=0;n<x.data.length;n+=2)s[2*w]=z,s[2*w+1]=A,t[2*w]=-B*(x.data[n]-G),t[2*w+1]=-B*(x.data[n+1]-H),u[4*w]=C,u[4*w+1]=D,u[4*w+2]=E,u[4*w+3]=F,v[w]=m,w+=1;var I=g[m];C=255*h[4*m],D=255*h[4*m+1],E=255*h[4*m+2],F=255*h[4*m+3];for(var n=0;n<y.coords.length;n+=2)s[2*w]=z,s[2*w+1]=A,t[2*w]=-(B*(y.coords[n]-G)+I*y.normals[n]),t[2*w+1]=-(B*(y.coords[n+1]-H)+I*y.normals[n+1]),u[4*w]=C,u[4*w+1]=D,u[4*w+2]=E,u[4*w+3]=F,v[w]=m,w+=1}this.numPoints=e.length,this.numVertices=l,this.positionBuffer.update(s),this.offsetBuffer.update(t),this.colorBuffer.update(u),this.idBuffer.update(v),j.free(s),j.free(t),j.free(u),j.free(v)},n.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.offsetBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":594,"gl-buffer":595,"gl-shader":596,"text-cache":620,"typedarray-pool":623,"vectorize-text":624}],712:[function(a,b,c){c.pointVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute float weight;\n\nuniform mat3 matrix;\nuniform float pointSize, useWeight;\n\nvarying float fragWeight;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n  fragWeight = mix(1.0, weight, useWeight);\n}\n",c.pointFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\n\nvarying float fragWeight;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  vec4 baseColor = mix(borderColor, color, smoothStep(radius, centerFraction));\n  float alpha = 1.0 - pow(1.0 - baseColor.a, fragWeight);\n  gl_FragColor = vec4(baseColor.rgb * alpha, alpha);\n}\n",c.pickVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n",c.pickFragment="#define GLSLIFY 1\nprecision mediump float;\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"},{}],713:[function(a,b,c){arguments[4][283][0].apply(c,arguments)},{dup:283}],714:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":743}],715:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{"./lib/GLError":716,"./lib/create-attributes":717,"./lib/create-uniforms":718,"./lib/reflect":719,"./lib/runtime-reflect":720,"./lib/shader-cache":721,dup:76}],716:[function(a,b,c){arguments[4][77][0].apply(c,arguments)},{dup:77}],717:[function(a,b,c){arguments[4][78][0].apply(c,arguments)},{"./GLError":716,dup:78}],718:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{"./GLError":716,"./reflect":719,dup:79}],719:[function(a,b,c){arguments[4][80][0].apply(c,arguments)},{dup:80}],720:[function(a,b,c){arguments[4][81][0].apply(c,arguments)},{dup:81}],721:[function(a,b,c){arguments[4][82][0].apply(c,arguments)},{"./GLError":716,dup:82,"gl-format-compiler-error":722,"weakmap-shim":738}],722:[function(a,b,c){arguments[4][83][0].apply(c,arguments)},{"add-line-numbers":723,dup:83,"gl-constants/lookup":727,"glsl-shader-name":728,"sprintf-js":735}],723:[function(a,b,c){arguments[4][84][0].apply(c,arguments)},{dup:84,"pad-left":724}],724:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85,"repeat-string":725}],725:[function(a,b,c){arguments[4][86][0].apply(c,arguments)},{dup:86}],726:[function(a,b,c){arguments[4][87][0].apply(c,arguments)},{dup:87}],727:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{"./1.0/numbers":726,dup:88}],728:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{"atob-lite":729,dup:89,"glsl-tokenizer":734}],729:[function(a,b,c){arguments[4][90][0].apply(c,arguments)},{dup:90}],730:[function(a,b,c){arguments[4][91][0].apply(c,arguments)},{"./lib/builtins":731,"./lib/literals":732,"./lib/operators":733,dup:91}],731:[function(a,b,c){arguments[4][92][0].apply(c,arguments)},{dup:92}],732:[function(a,b,c){arguments[4][93][0].apply(c,arguments)},{dup:93}],733:[function(a,b,c){arguments[4][94][0].apply(c,arguments)},{dup:94}],734:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{"./index":730,dup:95}],735:[function(a,b,c){arguments[4][96][0].apply(c,arguments)},{dup:96}],736:[function(a,b,c){arguments[4][97][0].apply(c,arguments)},{"./hidden-store.js":737,dup:97}],737:[function(a,b,c){arguments[4][98][0].apply(c,arguments)},{dup:98}],738:[function(a,b,c){arguments[4][99][0].apply(c,arguments)},{"./create-store.js":736,dup:99}],739:[function(a,b,c){"use strict";function d(a,b,c,d,f){f<=4*m?e(0,f-1,a,b,c,d):l(0,f-1,a,b,c,d)}function e(a,b,c,d,e,f){for(var g=a+1;g<=b;++g){for(var h=c[g],i=d[2*g],j=d[2*g+1],k=e[g],l=f[g],m=g;m>a;){var n=c[m-1],o=d[2*(m-1)];if((n-h||i-o)>=0)break;c[m]=n,d[2*m]=o,d[2*m+1]=d[2*m-1],e[m]=e[m-1],f[m]=f[m-1],m-=1}c[m]=h,d[2*m]=i,d[2*m+1]=j,e[m]=k,f[m]=l}}function f(a,b,c,d,e,f){var g=c[a],h=d[2*a],i=d[2*a+1],j=e[a],k=f[a];c[a]=c[b],d[2*a]=d[2*b],d[2*a+1]=d[2*b+1],e[a]=e[b],f[a]=f[b],c[b]=g,d[2*b]=h,d[2*b+1]=i,e[b]=j,f[b]=k}function g(a,b,c,d,e,f){c[a]=c[b],d[2*a]=d[2*b],d[2*a+1]=d[2*b+1],e[a]=e[b],f[a]=f[b]}function h(a,b,c,d,e,f,g){var h=d[a],i=e[2*a],j=e[2*a+1],k=f[a],l=g[a];d[a]=d[b],e[2*a]=e[2*b],e[2*a+1]=e[2*b+1],f[a]=f[b],g[a]=g[b],d[b]=d[c],e[2*b]=e[2*c],e[2*b+1]=e[2*c+1],f[b]=f[c],g[b]=g[c],d[c]=h,e[2*c]=i,e[2*c+1]=j,f[c]=k,g[c]=l}function i(a,b,c,d,e,f,g,h,i,j,k){h[a]=h[b],i[2*a]=i[2*b],
i[2*a+1]=i[2*b+1],j[a]=j[b],k[a]=k[b],h[b]=c,i[2*b]=d,i[2*b+1]=e,j[b]=f,k[b]=g}function j(a,b,c,d,e){return(c[a]-c[b]||d[2*b]-d[2*a]||e[a]-e[b])<0}function k(a,b,c,d,e,f,g,h){return(b-f[a]||g[2*a]-c||e-h[a])<0}function l(a,b,c,d,n,o){var p=(b-a+1)/6|0,q=a+p,r=b-p,s=a+b>>1,t=s-p,u=s+p,v=q,w=t,x=s,y=u,z=r,A=a+1,B=b-1,C=0;j(v,w,c,d,n,o)&&(C=v,v=w,w=C),j(y,z,c,d,n,o)&&(C=y,y=z,z=C),j(v,x,c,d,n,o)&&(C=v,v=x,x=C),j(w,x,c,d,n,o)&&(C=w,w=x,x=C),j(v,y,c,d,n,o)&&(C=v,v=y,y=C),j(x,y,c,d,n,o)&&(C=x,x=y,y=C),j(w,z,c,d,n,o)&&(C=w,w=z,z=C),j(w,x,c,d,n,o)&&(C=w,w=x,x=C),j(y,z,c,d,n,o)&&(C=y,y=z,z=C);var D=c[w],E=d[2*w],F=d[2*w+1],G=n[w],H=o[w],I=c[y],J=d[2*y],K=d[2*y+1],L=n[y],M=o[y],N=v,O=x,P=z,Q=q,R=s,S=r,T=c[N],U=c[O],V=c[P];c[Q]=T,c[R]=U,c[S]=V;for(var W=0;W<2;++W){var X=d[2*N+W],Y=d[2*O+W],Z=d[2*P+W];d[2*Q+W]=X,d[2*R+W]=Y,d[2*S+W]=Z}var $=n[N],_=n[O],aa=n[P];n[Q]=$,n[R]=_,n[S]=aa;var ba=o[N],ca=o[O],da=o[P];o[Q]=ba,o[R]=ca,o[S]=da,g(t,a,c,d,n,o),g(u,b,c,d,n,o);for(var ea=A;ea<=B;++ea)if(k(ea,D,E,F,G,c,d,n))ea!==A&&f(ea,A,c,d,n,o),++A;else if(!k(ea,I,J,K,L,c,d,n))for(;;){if(k(B,I,J,K,L,c,d,n)){k(B,D,E,F,G,c,d,n)?(h(ea,A,B,c,d,n,o),++A,--B):(f(ea,B,c,d,n,o),--B);break}if(--B<ea)break}i(a,A-1,D,E,F,G,H,c,d,n,o),i(b,B+1,I,J,K,L,M,c,d,n,o),A-2-a<=m?e(a,A-2,c,d,n,o):l(a,A-2,c,d,n,o),b-(B+2)<=m?e(B+2,b,c,d,n,o):l(B+2,b,c,d,n,o),B-A<=m?e(A,B,c,d,n,o):l(A,B,c,d,n,o)}b.exports=d;var m=32},{}],740:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){for(var i=c,j=c;j<d;++j){var k=a[2*j],l=a[2*j+1],m=b[j];e<=k&&k<=g&&f<=l&&l<=h&&(j===i?i+=1:(a[2*j]=a[2*i],a[2*j+1]=a[2*i+1],b[j]=b[i],a[2*i]=k,a[2*i+1]=l,b[i]=m,i+=1))}return i}function e(a,b,c){this.pixelSize=a,this.offset=b,this.count=c}function f(a,b,c,f){function i(e,f,g,h,j,k){var l=.5*g,m=h+1,n=j-h;c[v]=n,u[v++]=k;for(var o=0;o<2;++o)for(var p=0;p<2;++p){var q=e+o*l,r=f+p*l,s=d(a,b,m,j,q,r,q+l,r+l);if(s!==m){if(s-m>=Math.max(.9*n,32)){var t=j+h>>>1;i(q,r,l,m,t,k+1),m=t}i(q,r,l,m,s,k+1),m=s}}}var j=a.length>>>1;if(j<1)return[];for(var k=1/0,l=1/0,m=-(1/0),n=-(1/0),o=0;o<j;++o){var p=a[2*o],q=a[2*o+1];k=Math.min(k,p),m=Math.max(m,p),l=Math.min(l,q),n=Math.max(n,q),b[o]=o}k===m&&(m+=1+Math.abs(m)),l===n&&(n+=1+Math.abs(m));var r=1/(m-k),s=1/(n-l),t=Math.max(m-k,n-l);f=f||[0,0,0,0],f[0]=k,f[1]=l,f[2]=m,f[3]=n;var u=g.mallocInt32(j),v=0;i(k,l,t,0,j,0),h(u,a,b,c,j);for(var w=[],x=0,y=j,v=j-1;v>=0;--v){a[2*v]=(a[2*v]-k)*r,a[2*v+1]=(a[2*v+1]-l)*s;var z=u[v];z!==x&&(w.push(new e(t*Math.pow(.5,z),v+1,y-(v+1))),y=v+1,x=z)}return w.push(new e(t*Math.pow(.5,z+1),0,y)),g.free(u),w}var g=a("typedarray-pool"),h=a("./lib/sort");b.exports=f},{"./lib/sort":739,"typedarray-pool":743}],741:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],742:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],743:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":741,buffer:48,dup:102}],744:[function(a,b,c){"use strict";function d(a,b,c,d,e,f){this.plot=a,this.offsetBuffer=b,this.pickBuffer=c,this.weightBuffer=d,this.shader=e,this.pickShader=f,this.scales=[],this.size=12,this.borderSize=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.pickOffset=0,this.points=null,this.xCoords=null}function e(a,b){var c=a.gl,e=g(c),h=g(c),i=g(c),j=f(c,k.pointVertex,k.pointFragment),l=f(c,k.pickVertex,k.pickFragment),m=new d(a,e,h,i,j,l);return m.update(b),a.addObject(m),m}var f=a("gl-shader"),g=a("gl-buffer"),h=a("binary-search-bounds"),i=a("snap-points-2d"),j=a("typedarray-pool"),k=a("./lib/shader");b.exports=e;var l=d.prototype;l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.xCoords&&j.free(this.xCoords),this.plot.removeObject(this)},l.update=function(a){function b(b,c){return b in a?a[b]:c}a=a||{},this.size=b("size",12),this.color=b("color",[1,0,0,1]).slice(),this.borderSize=b("borderSize",1),this.borderColor=b("borderColor",[0,0,0,1]).slice(),this.xCoords&&j.free(this.xCoords);var c=a.positions,d=j.mallocFloat32(c.length),e=j.mallocInt32(c.length>>>1);d.set(c);var f=j.mallocFloat32(c.length);this.points=c,this.scales=i(d,e,f,this.bounds),this.offsetBuffer.update(d),this.pickBuffer.update(e),this.weightBuffer.update(f);for(var g=j.mallocFloat32(c.length>>>1),h=0,k=0;h<c.length;h+=2,++k)g[k]=d[h];j.free(e),j.free(d),j.free(f),this.xCoords=g,this.pointCount=c.length>>>1,this.pickOffset=0},l.drawPick=function(){var a=[1,0,0,0,1,0,0,0,1],b=[0,0,0,0];return function(c){var d=this.plot,e=this.pickShader,f=this.scales,g=this.offsetBuffer,i=this.pickBuffer,j=this.bounds,k=this.size,l=this.borderSize,m=d.gl,n=d.pickPixelRatio,o=d.viewBox,p=d.dataBox;if(0===this.pointCount)return c;var q=j[2]-j[0],r=j[3]-j[1],s=p[2]-p[0],t=p[3]-p[1],u=(o[2]-o[0])*n/d.pixelRatio,v=(o[3]-o[1])*n/d.pixelRatio,w=Math.min(s/u,t/v);a[0]=2*q/s,a[4]=2*r/t,a[6]=2*(j[0]-p[0])/s-1,a[7]=2*(j[1]-p[1])/t-1,this.pickOffset=c,b[0]=255&c,b[1]=c>>8&255,b[2]=c>>16&255,b[3]=c>>24&255,e.bind(),e.uniforms.matrix=a,e.uniforms.color=this.color,e.uniforms.borderColor=this.borderColor,e.uniforms.pointSize=n*(k+l),e.uniforms.pickOffset=b,0===this.borderSize?e.uniforms.centerFraction=2:e.uniforms.centerFraction=k/(k+l+1.25),g.bind(),e.attributes.position.pointer(),i.bind(),e.attributes.pickId.pointer(m.UNSIGNED_BYTE);for(var x=this.xCoords,y=(p[0]-j[0]-w*k*n)/q,z=(p[2]-j[0]+w*k*n)/q,A=f.length-1;A>=0;--A){var B=f[A];if(!(B.pixelSize<w&&A>1)){var C=B.offset,D=B.count+C,E=h.ge(x,y,C,D-1),F=h.lt(x,z,E,D-1)+1;m.drawArrays(m.POINTS,E,F-E)}}return c+this.pointCount}}(),l.draw=function(){var a=[1,0,0,0,1,0,0,0,1];return function(){var b=this.plot,c=this.shader,d=this.scales,e=this.offsetBuffer,f=this.bounds,g=this.size,i=this.borderSize,j=b.gl,k=b.pixelRatio,l=b.viewBox,m=b.dataBox;if(0!==this.pointCount){var n=f[2]-f[0],o=f[3]-f[1],p=m[2]-m[0],q=m[3]-m[1],r=l[2]-l[0],s=l[3]-l[1],t=Math.min(p/r,q/s);a[0]=2*n/p,a[4]=2*o/q,a[6]=2*(f[0]-m[0])/p-1,a[7]=2*(f[1]-m[1])/q-1,c.bind(),c.uniforms.matrix=a,c.uniforms.color=this.color,c.uniforms.borderColor=this.borderColor,c.uniforms.pointSize=k*(g+i),c.uniforms.useWeight=1,0===this.borderSize?c.uniforms.centerFraction=2:c.uniforms.centerFraction=g/(g+i+1.25),e.bind(),c.attributes.position.pointer(),this.weightBuffer.bind(),c.attributes.weight.pointer();for(var u=this.xCoords,v=(m[0]-f[0]-t*g*k)/n,w=(m[2]-f[0]+t*g*k)/n,x=!0,y=d.length-1;y>=0;--y){var z=d[y];if(!(z.pixelSize<t&&y>1)){var A=z.offset,B=z.count+A,C=h.ge(u,v,A,B-1),D=h.lt(u,w,C,B-1)+1;j.drawArrays(j.POINTS,C,D-C),x&&(x=!1,c.uniforms.useWeight=0)}}}}}(),l.pick=function(a,b,c){var d=this.pickOffset,e=this.pointCount;if(c<d||c>=d+e)return null;var f=c-d,g=this.points;return{object:this,pointId:f,dataCoord:[g[2*f],g[2*f+1]]}}},{"./lib/shader":712,"binary-search-bounds":713,"gl-buffer":714,"gl-shader":715,"snap-points-2d":740,"typedarray-pool":743}],745:[function(a,b,c){"use strict";function d(a,b){var c=f[b];if(c||(c=f[b]={}),a in c)return c[a];for(var d=e(a,{textAlign:"center",textBaseline:"middle",lineHeight:1,font:b}),g=e(a,{triangles:!0,textAlign:"center",textBaseline:"middle",lineHeight:1,font:b}),h=[[1/0,1/0],[-(1/0),-(1/0)]],i=0;i<d.positions.length;++i)for(var j=d.positions[i],k=0;k<2;++k)h[0][k]=Math.min(h[0][k],j[k]),h[1][k]=Math.max(h[1][k],j[k]);return c[a]=[g,d,h]}var e=a("vectorize-text");b.exports=d;var f={}},{"vectorize-text":779}],746:[function(a,b,c){function d(a,b){var c=e(a,b),d=c.attributes;return d.position.location=0,d.color.location=1,d.glyph.location=2,d.id.location=3,c}var e=a("gl-shader"),f="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   || \n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n    \n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",g="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n    \n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}",h="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   ||\n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n",i="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   ||\n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = interpColor * opacity;\n  }\n}\n",j="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   || \n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = vec4(pickGroup, pickId.bgr);\n  }\n}",k=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:f,fragment:i,attributes:k},m={vertex:g,fragment:i,attributes:k},n={vertex:h,fragment:i,attributes:k},o={vertex:f,fragment:j,attributes:k},p={vertex:g,fragment:j,attributes:k},q={vertex:h,fragment:j,attributes:k};c.createPerspective=function(a){return d(a,l)},c.createOrtho=function(a){return d(a,m)},c.createProject=function(a){return d(a,n)},c.createPickPerspective=function(a){return d(a,o)},c.createPickOrtho=function(a){return d(a,p)},c.createPickProject=function(a){return d(a,q)}},{"gl-shader":748}],747:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":778}],748:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{"./lib/GLError":749,"./lib/create-attributes":750,"./lib/create-uniforms":751,"./lib/reflect":752,"./lib/runtime-reflect":753,"./lib/shader-cache":754,dup:76}],749:[function(a,b,c){arguments[4][77][0].apply(c,arguments)},{dup:77}],750:[function(a,b,c){arguments[4][78][0].apply(c,arguments)},{"./GLError":749,dup:78}],751:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{"./GLError":749,"./reflect":752,dup:79}],752:[function(a,b,c){arguments[4][80][0].apply(c,arguments)},{dup:80}],753:[function(a,b,c){arguments[4][81][0].apply(c,arguments)},{dup:81}],754:[function(a,b,c){arguments[4][82][0].apply(c,arguments)},{"./GLError":749,dup:82,"gl-format-compiler-error":755,"weakmap-shim":771}],755:[function(a,b,c){arguments[4][83][0].apply(c,arguments)},{"add-line-numbers":756,dup:83,"gl-constants/lookup":760,"glsl-shader-name":761,"sprintf-js":768}],756:[function(a,b,c){arguments[4][84][0].apply(c,arguments)},{dup:84,"pad-left":757}],757:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85,"repeat-string":758}],758:[function(a,b,c){arguments[4][86][0].apply(c,arguments)},{dup:86}],759:[function(a,b,c){arguments[4][87][0].apply(c,arguments)},{dup:87}],760:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{"./1.0/numbers":759,dup:88}],761:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{"atob-lite":762,dup:89,"glsl-tokenizer":767}],762:[function(a,b,c){arguments[4][90][0].apply(c,arguments)},{dup:90}],763:[function(a,b,c){arguments[4][91][0].apply(c,arguments)},{"./lib/builtins":764,"./lib/literals":765,"./lib/operators":766,dup:91}],764:[function(a,b,c){arguments[4][92][0].apply(c,arguments)},{dup:92}],765:[function(a,b,c){arguments[4][93][0].apply(c,arguments)},{dup:93}],766:[function(a,b,c){arguments[4][94][0].apply(c,arguments)},{dup:94}],767:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{"./index":763,dup:95}],768:[function(a,b,c){arguments[4][96][0].apply(c,arguments)},{dup:96}],769:[function(a,b,c){arguments[4][97][0].apply(c,arguments)},{"./hidden-store.js":770,dup:97}],770:[function(a,b,c){arguments[4][98][0].apply(c,arguments)},{dup:98}],771:[function(a,b,c){arguments[4][99][0].apply(c,arguments)},{"./create-store.js":769,dup:99}],772:[function(a,b,c){arguments[4][132][0].apply(c,arguments)},{dup:132}],773:[function(a,b,c){arguments[4][133][0].apply(c,arguments)},{"./do-bind.js":772,dup:133}],774:[function(a,b,c){arguments[4][134][0].apply(c,arguments)},{"./do-bind.js":772,dup:134}],775:[function(a,b,c){arguments[4][135][0].apply(c,arguments)},{"./lib/vao-emulated.js":773,"./lib/vao-native.js":774,dup:135}],776:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],777:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],778:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":776,buffer:48,dup:102}],779:[function(a,b,c){arguments[4][323][0].apply(c,arguments)},{"./lib/vtext":780,dup:323}],780:[function(a,b,c){arguments[4][324][0].apply(c,arguments)},{cdt2d:781,"clean-pslg":793,dup:324,ndarray:987,"planar-graph-to-polyline":848,"simplify-planar-graph":852,"surface-nets":865}],781:[function(a,b,c){arguments[4][325][0].apply(c,arguments)},{"./lib/delaunay":782,"./lib/filter":783,"./lib/monotone":784,"./lib/triangulation":785,dup:325}],782:[function(a,b,c){arguments[4][326][0].apply(c,arguments)},{"binary-search-bounds":786,dup:326,"robust-in-sphere":787}],783:[function(a,b,c){arguments[4][327][0].apply(c,arguments)},{"binary-search-bounds":786,dup:327}],784:[function(a,b,c){arguments[4][328][0].apply(c,arguments)},{"binary-search-bounds":786,dup:328,"robust-orientation":996}],785:[function(a,b,c){arguments[4][329][0].apply(c,arguments)},{"binary-search-bounds":786,dup:329}],786:[function(a,b,c){arguments[4][283][0].apply(c,arguments)},{dup:283}],787:[function(a,b,c){arguments[4][330][0].apply(c,arguments)},{dup:330,"robust-scale":789,"robust-subtract":790,"robust-sum":791,"two-product":792}],788:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{dup:36}],789:[function(a,b,c){arguments[4][37][0].apply(c,arguments)},{dup:37,"two-product":792,"two-sum":788}],790:[function(a,b,c){arguments[4][333][0].apply(c,arguments)},{dup:333}],791:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],792:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],793:[function(a,b,c){arguments[4][336][0].apply(c,arguments)},{"./lib/rat-seg-intersect":794,"big-rat":798,"big-rat/cmp":796,"big-rat/to-float":813,"box-intersect":814,"compare-cell":822,dup:336,nextafter:823,"rat-vec":826,"robust-segment-intersect":829,"union-find":830}],794:[function(a,b,c){arguments[4][337][0].apply(c,arguments)},{"big-rat/div":797,"big-rat/mul":807,"big-rat/sign":811,"big-rat/sub":812,"big-rat/to-float":813,dup:337,"rat-vec/add":825,"rat-vec/muls":827,"rat-vec/sub":828}],795:[function(a,b,c){arguments[4][338][0].apply(c,arguments)},{"./lib/rationalize":805,dup:338}],796:[function(a,b,c){arguments[4][339][0].apply(c,arguments)},{dup:339}],797:[function(a,b,c){arguments[4][340][0].apply(c,arguments)},{"./lib/rationalize":805,dup:340}],798:[function(a,b,c){arguments[4][341][0].apply(c,arguments)},{"./div":797,"./is-rat":799,"./lib/is-bn":803,"./lib/num-to-bn":804,"./lib/rationalize":805,"./lib/str-to-bn":806,dup:341}],799:[function(a,b,c){arguments[4][342][0].apply(c,arguments)},{"./lib/is-bn":803,dup:342}],800:[function(a,b,c){arguments[4][343][0].apply(c,arguments)},{"bn.js":809,dup:343}],801:[function(a,b,c){arguments[4][344][0].apply(c,arguments)},{dup:344}],802:[function(a,b,c){arguments[4][345][0].apply(c,arguments)},{"bit-twiddle":808,"double-bits":810,dup:345}],803:[function(a,b,c){arguments[4][346][0].apply(c,arguments)},{"bn.js":809,dup:346}],804:[function(a,b,c){arguments[4][347][0].apply(c,arguments)},{"bn.js":809,"double-bits":810,dup:347}],805:[function(a,b,c){arguments[4][348][0].apply(c,arguments)},{"./bn-sign":800,"./num-to-bn":804,dup:348}],806:[function(a,b,c){arguments[4][349][0].apply(c,arguments)},{"bn.js":809,dup:349}],807:[function(a,b,c){arguments[4][350][0].apply(c,arguments)},{"./lib/rationalize":805,dup:350}],808:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],809:[function(a,b,c){arguments[4][352][0].apply(c,arguments)},{dup:352}],810:[function(a,b,c){arguments[4][353][0].apply(c,arguments)},{buffer:48,dup:353}],811:[function(a,b,c){arguments[4][354][0].apply(c,arguments)},{"./lib/bn-sign":800,dup:354}],812:[function(a,b,c){arguments[4][355][0].apply(c,arguments)},{"./lib/rationalize":805,dup:355}],813:[function(a,b,c){arguments[4][356][0].apply(c,arguments)},{"./lib/bn-to-num":801,"./lib/ctz":802,dup:356}],814:[function(a,b,c){arguments[4][357][0].apply(c,arguments)},{"./lib/intersect":816,"./lib/sweep":820,dup:357,"typedarray-pool":778}],815:[function(a,b,c){arguments[4][358][0].apply(c,arguments)},{dup:358}],816:[function(a,b,c){arguments[4][359][0].apply(c,arguments)},{"./brute":815,"./median":817,"./partition":818,"./sweep":820,"bit-twiddle":821,dup:359,"typedarray-pool":778}],817:[function(a,b,c){arguments[4][360][0].apply(c,arguments)},{"./partition":818,dup:360}],818:[function(a,b,c){arguments[4][361][0].apply(c,arguments)},{dup:361}],819:[function(a,b,c){arguments[4][362][0].apply(c,arguments)},{dup:362}],820:[function(a,b,c){arguments[4][363][0].apply(c,arguments)},{"./sort":819,"bit-twiddle":821,dup:363,"typedarray-pool":778}],821:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],822:[function(a,b,c){arguments[4][44][0].apply(c,arguments)},{dup:44}],823:[function(a,b,c){arguments[4][368][0].apply(c,arguments)},{"double-bits":824,dup:368}],824:[function(a,b,c){arguments[4][353][0].apply(c,arguments)},{buffer:48,dup:353}],825:[function(a,b,c){arguments[4][370][0].apply(c,arguments)},{"big-rat/add":795,dup:370}],826:[function(a,b,c){arguments[4][371][0].apply(c,arguments)},{"big-rat":798,dup:371}],827:[function(a,b,c){arguments[4][372][0].apply(c,arguments)},{"big-rat":798,"big-rat/mul":807,dup:372}],828:[function(a,b,c){arguments[4][373][0].apply(c,arguments)},{"big-rat/sub":812,dup:373}],829:[function(a,b,c){arguments[4][374][0].apply(c,arguments)},{dup:374,"robust-orientation":996}],830:[function(a,b,c){arguments[4][61][0].apply(c,arguments)},{dup:61}],831:[function(a,b,c){arguments[4][376][0].apply(c,arguments)},{dup:376,"edges-to-adjacency-list":832}],832:[function(a,b,c){arguments[4][377][0].apply(c,arguments)},{dup:377,uniq:847}],833:[function(a,b,c){arguments[4][378][0].apply(c,arguments)},{"compare-angle":834,dup:378}],834:[function(a,b,c){arguments[4][379][0].apply(c,arguments)},{dup:379,"robust-orientation":996,"robust-product":836,"robust-sum":845,signum:837,"two-sum":838}],835:[function(a,b,c){arguments[4][37][0].apply(c,arguments)},{dup:37,"two-product":846,"two-sum":838}],836:[function(a,b,c){arguments[4][381][0].apply(c,arguments)},{dup:381,"robust-scale":835,"robust-sum":845}],837:[function(a,b,c){arguments[4][382][0].apply(c,arguments)},{dup:382}],838:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{dup:36}],839:[function(a,b,c){arguments[4][4][0].apply(c,arguments)},{dup:4}],840:[function(a,b,c){arguments[4][385][0].apply(c,arguments)},{"binary-search-bounds":839,dup:385}],841:[function(a,b,c){arguments[4][386][0].apply(c,arguments)},{dup:386,"robust-orientation":996}],842:[function(a,b,c){arguments[4][387][0].apply(c,arguments)},{dup:387}],843:[function(a,b,c){arguments[4][388][0].apply(c,arguments)},{"./lib/order-segments":841,"binary-search-bounds":839,dup:388,"functional-red-black-tree":842,"robust-orientation":996}],844:[function(a,b,c){arguments[4][389][0].apply(c,arguments)},{"binary-search-bounds":839,dup:389,"interval-tree-1d":840,"robust-orientation":996,"slab-decomposition":843}],845:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],846:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],847:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],848:[function(a,b,c){arguments[4][393][0].apply(c,arguments)},{"./lib/trim-leaves":831,dup:393,"edges-to-adjacency-list":832,"planar-dual":833,"point-in-big-polygon":844,"robust-sum":845,"two-product":846,uniq:847}],849:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],850:[function(a,b,c){arguments[4][395][0].apply(c,arguments)},{dup:395}],851:[function(a,b,c){arguments[4][62][0].apply(c,arguments)},{"bit-twiddle":849,dup:62,"union-find":850}],852:[function(a,b,c){arguments[4][397][0].apply(c,arguments)},{dup:397,"robust-orientation":996,"simplicial-complex":851}],853:[function(a,b,c){arguments[4][398][0].apply(c,arguments)},{dup:398,"typedarray-pool":778}],854:[function(a,b,c){arguments[4][402][0].apply(c,arguments)},{dup:402}],855:[function(a,b,c){arguments[4][406][0].apply(c,arguments)},{dup:406,"typedarray-pool":778}],856:[function(a,b,c){arguments[4][407][0].apply(c,arguments)},{dup:407,"invert-permutation":857,"typedarray-pool":778}],857:[function(a,b,c){arguments[4][408][0].apply(c,arguments)},{dup:408}],858:[function(a,b,c){arguments[4][412][0].apply(c,arguments)},{dup:412,gamma:854,"permutation-parity":855,"permutation-rank":856}],859:[function(a,b,c){arguments[4][413][0].apply(c,arguments)},{"cwise-compiler":860,dup:413}],860:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./lib/thunk.js":862,dup:290}],861:[function(a,b,c){arguments[4][291][0].apply(c,arguments)},{dup:291,uniq:863}],862:[function(a,b,c){arguments[4][292][0].apply(c,arguments)},{"./compile.js":861,dup:292}],863:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],864:[function(a,b,c){arguments[4][418][0].apply(c,arguments)},{"./lib/zc-core":859,dup:418}],865:[function(a,b,c){arguments[4][419][0].apply(c,arguments)},{dup:419,"ndarray-extract-contour":853,"triangulate-hypercube":858,"zero-crossings":864}],866:[function(a,b,c){"use strict";function d(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];return a[0]=b[0]*c+b[4]*d+b[8]*e+b[12]*f,a[1]=b[1]*c+b[5]*d+b[9]*e+b[13]*f,a[2]=b[2]*c+b[6]*d+b[10]*e+b[14]*f,a[3]=b[3]*c+b[7]*d+b[11]*e+b[15]*f,a}function e(a,b,c,e){return d(e,e,c),d(e,e,b),d(e,e,a)}function f(a,b){this.index=a,this.dataCoordinate=this.position=b}function g(a,b,c,d,e,g,h,i,j,k,l,m){this.gl=a,this.pixelRatio=1,this.shader=b,this.orthoShader=c,this.projectShader=d,this.pointBuffer=e,this.colorBuffer=g,this.glyphBuffer=h,this.idBuffer=i,this.vao=j,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.pickId=0,this.pickPerspectiveShader=k,this.pickOrthoShader=l,this.pickProjectShader=m,this.points=[],this._selectResult=new f(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.dirty=!0}function h(a){return a[0]=a[1]=a[2]=0,a}function i(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=1,a}function j(a,b,c,d){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[c]=d,a}function k(a){for(var b=D,c=0;c<2;++c)for(var d=0;d<3;++d)b[c][d]=Math.max(Math.min(a[c][d],1e8),-1e8);return b}function l(a,b,c,d,f){var g,l=b.axesProject,m=b.gl,n=a.uniforms,o=c.model||u,p=c.view||u,q=c.projection||u,s=b.axesBounds,t=k(b.clipBounds);g=b.axes?b.axes.lastCubeProps.axis:[1,1,1],w[0]=2/m.drawingBufferWidth,w[1]=2/m.drawingBufferHeight,a.bind(),n.view=p,n.projection=q,n.screenSize=w,n.highlightId=b.highlightId,n.highlightScale=b.highlightScale,n.clipBounds=t,n.pickGroup=b.pickId/255,n.pixelRatio=b.pixelRatio;for(var v=0;v<3;++v)if(l[v]&&b.projectOpacity[v]<1===d){n.scale=b.projectScale[v],n.opacity=b.projectOpacity[v];for(var D=B,E=0;E<16;++E)D[E]=0;for(var E=0;E<4;++E)D[5*E]=1;D[5*v]=0,g[v]<0?D[12+v]=s[0][v]:D[12+v]=s[1][v],r(D,o,D),n.model=D;var F=(v+1)%3,G=(v+2)%3,H=h(x),I=h(y);H[F]=1,I[G]=1;var J=e(q,p,o,i(z,H)),K=e(q,p,o,i(A,I));if(Math.abs(J[1])>Math.abs(K[1])){var L=J;J=K,K=L,L=H,H=I,I=L;var M=F;F=G,G=M}J[0]<0&&(H[F]=-1),K[1]>0&&(I[G]=-1);for(var N=0,O=0,E=0;E<4;++E)N+=Math.pow(o[4*F+E],2),O+=Math.pow(o[4*G+E],2);H[F]/=Math.sqrt(N),I[G]/=Math.sqrt(O),n.axes[0]=H,n.axes[1]=I,n.fragClipBounds[0]=j(C,t[0],v,-1e8),n.fragClipBounds[1]=j(C,t[1],v,1e8),b.vao.draw(m.TRIANGLES,b.vertexCount),b.lineWidth>0&&(m.lineWidth(b.lineWidth),b.vao.draw(m.LINES,b.lineVertexCount,b.vertexCount))}}function m(a,b,c,d,e,f){var g=c.gl;if(c.vao.bind(),e===c.opacity<1||f){a.bind();var h=a.uniforms;h.model=d.model||u,h.view=d.view||u,h.projection=d.projection||u,w[0]=2/g.drawingBufferWidth,w[1]=2/g.drawingBufferHeight,h.screenSize=w,h.highlightId=c.highlightId,h.highlightScale=c.highlightScale,h.fragClipBounds=G,h.clipBounds=c.axes.bounds,h.opacity=c.opacity,h.pickGroup=c.pickId/255,h.pixelRatio=c.pixelRatio,c.vao.draw(g.TRIANGLES,c.vertexCount),c.lineWidth>0&&(g.lineWidth(c.lineWidth),c.vao.draw(g.LINES,c.lineVertexCount,c.vertexCount))}l(b,c,d,e,f),c.vao.unbind()}function n(a){var b=a.gl,c=s.createPerspective(b),d=s.createOrtho(b),e=s.createProject(b),f=s.createPickPerspective(b),h=s.createPickOrtho(b),i=s.createPickProject(b),j=o(b),k=o(b),l=o(b),m=o(b),n=p(b,[{buffer:j,size:3,type:b.FLOAT},{buffer:k,size:4,type:b.FLOAT},{buffer:l,size:2,type:b.FLOAT},{buffer:m,size:4,type:b.UNSIGNED_BYTE,normalized:!0}]),q=new g(b,c,d,e,j,k,l,m,n,f,h,i);return q.update(a),q}var o=a("gl-buffer"),p=a("gl-vao"),q=a("typedarray-pool"),r=a("gl-mat4/multiply"),s=a("./lib/shaders"),t=a("./lib/glyphs"),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b.exports=n;var v=g.prototype;v.pickSlots=1,v.setPickBase=function(a){this.pickId=a},v.isTransparent=function(){if(this.opacity<1)return!0;for(var a=0;a<3;++a)if(this.axesProject[a]&&this.projectOpacity[a]<1)return!0;return!1},v.isOpaque=function(){if(this.opacity>=1)return!0;for(var a=0;a<3;++a)if(this.axesProject[a]&&this.projectOpacity[a]>=1)return!0;return!1};var w=[0,0],x=[0,0,0],y=[0,0,0],z=[0,0,0,1],A=[0,0,0,1],B=u.slice(),C=[0,0,0],D=[[0,0,0],[0,0,0]],E=[-1e8,-1e8,-1e8],F=[1e8,1e8,1e8],G=[E,F];v.draw=function(a){var b=this.useOrtho?this.orthoShader:this.shader;m(b,this.projectShader,this,a,!1,!1)},v.drawTransparent=function(a){var b=this.useOrtho?this.orthoShader:this.shader;m(b,this.projectShader,this,a,!0,!1)},v.drawPick=function(a){var b=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;m(b,this.pickProjectShader,this,a,!1,!0)},v.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;var b=a.value[2]+(a.value[1]<<8)+(a.value[0]<<16);if(b>=this.pointCount||b<0)return null;var c=this.points[b],d=this._selectResult;d.index=b;for(var e=0;e<3;++e)d.position[e]=d.dataCoordinate[e]=c[e];return d},v.highlight=function(a){if(a){var b=a.index,c=255&b,d=b>>8&255,e=b>>16&255;this.highlightId=[c/255,d/255,e/255,0]}else this.highlightId=[1,1,1,1]},v.update=function(a){if(a=a||{},"perspective"in a&&(this.useOrtho=!a.perspective),"orthographic"in a&&(this.useOrtho=!!a.orthographic),"lineWidth"in a&&(this.lineWidth=a.lineWidth),"project"in a)if(Array.isArray(a.project))this.axesProject=a.project;else{var b=!!a.project;this.axesProject=[b,b,b]}if("projectScale"in a)if(Array.isArray(a.projectScale))this.projectScale=a.projectScale.slice();else{var c=+a.projectScale;this.projectScale=[c,c,c]}if("projectOpacity"in a)if(Array.isArray(a.projectOpacity))this.projectOpacity=a.projectOpacity.slice();else{var c=+a.projectOpacity;this.projectOpacity=[c,c,c]}"opacity"in a&&(this.opacity=a.opacity),this.dirty=!0;var d=a.position;if(d){var e=a.font||"normal",f=a.alignment||[0,0],g=[1/0,1/0,1/0],h=[-(1/0),-(1/0),-(1/0)],i=a.glyph,j=a.color,k=a.size,l=a.angle,m=a.lineColor,n=0,o=0,p=0,r=d.length;a:for(var s=0;s<r;++s){for(var u=d[s],v=0;v<3;++v)if(isNaN(u[v])||!isFinite(u[v]))continue a;var w;w=Array.isArray(i)?t(i[s],e):i?t(i,e):t("",e);var x=w[0],y=w[1],z=w[2];o+=3*x.cells.length,p+=2*y.edges.length}var A=o+p,B=q.mallocFloat(3*A),C=q.mallocFloat(4*A),D=q.mallocFloat(2*A),E=q.mallocUint32(A),F=[0,f[1]],G=0,H=o,I=[0,0,0,1],J=[0,0,0,1],K=Array.isArray(j)&&Array.isArray(j[0]),L=Array.isArray(m)&&Array.isArray(m[0]);a:for(var s=0;s<r;++s){for(var u=d[s],v=0;v<3;++v){if(isNaN(u[v])||!isFinite(u[v])){n+=1;continue a}h[v]=Math.max(h[v],u[v]),g[v]=Math.min(g[v],u[v])}var w;w=Array.isArray(i)?t(i[s],e):i?t(i,e):t("",e);var x=w[0],y=w[1],z=w[2];if(Array.isArray(j)){var M;if(M=K?j[s]:j,3===M.length){for(var v=0;v<3;++v)I[v]=M[v];I[3]=1}else if(4===M.length)for(var v=0;v<4;++v)I[v]=M[v]}else I[0]=I[1]=I[2]=0,I[3]=1;if(Array.isArray(m)){var M;if(M=L?m[s]:m,3===M.length){for(var v=0;v<3;++v)J[v]=M[v];J[v]=1}else if(4===M.length)for(var v=0;v<4;++v)J[v]=M[v]}else J[0]=J[1]=J[2]=0,J[3]=1;var N=.5;Array.isArray(k)?N=+k[s]:k?N=+k:this.useOrtho&&(N=12);var O=0;Array.isArray(l)?O=+l[s]:l&&(O=+l);for(var P=Math.cos(O),Q=Math.sin(O),u=d[s],v=0;v<3;++v)h[v]=Math.max(h[v],u[v]),g[v]=Math.min(g[v],u[v]);f[0]<0?F[0]=f[0]*(1+z[1][0]):f[0]>0&&(F[0]=-f[0]*(1+z[0][0]));for(var R=x.cells,S=x.positions,v=0;v<R.length;++v)for(var T=R[v],U=0;U<3;++U){for(var V=0;V<3;++V)B[3*G+V]=u[V];for(var V=0;V<4;++V)C[4*G+V]=I[V];E[G]=n;var W=S[T[U]];D[2*G]=N*(P*W[0]-Q*W[1]+F[0]),D[2*G+1]=N*(Q*W[0]+P*W[1]+F[1]),G+=1}for(var R=y.edges,S=y.positions,v=0;v<R.length;++v)for(var T=R[v],U=0;U<2;++U){for(var V=0;V<3;++V)B[3*H+V]=u[V];for(var V=0;V<4;++V)C[4*H+V]=J[V];E[H]=n;var W=S[T[U]];D[2*H]=N*(P*W[0]-Q*W[1]+F[0]),D[2*H+1]=N*(Q*W[0]+P*W[1]+F[1]),H+=1}n+=1}this.vertexCount=o,this.lineVertexCount=p,this.pointBuffer.update(B),this.colorBuffer.update(C),this.glyphBuffer.update(D),this.idBuffer.update(new Uint32Array(E)),q.free(B),q.free(C),q.free(D),q.free(E),this.bounds=[g,h],this.points=d,this.pointCount=d.length;
}},v.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/glyphs":745,"./lib/shaders":746,"gl-buffer":747,"gl-mat4/multiply":216,"gl-vao":775,"typedarray-pool":778}],867:[function(a,b,c){"use strict";c.boxVertex="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n",c.boxFragment="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"},{}],868:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":871}],869:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],870:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],871:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":869,buffer:48,dup:102}],872:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{"./lib/GLError":873,"./lib/create-attributes":874,"./lib/create-uniforms":875,"./lib/reflect":876,"./lib/runtime-reflect":877,"./lib/shader-cache":878,dup:76}],873:[function(a,b,c){arguments[4][77][0].apply(c,arguments)},{dup:77}],874:[function(a,b,c){arguments[4][78][0].apply(c,arguments)},{"./GLError":873,dup:78}],875:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{"./GLError":873,"./reflect":876,dup:79}],876:[function(a,b,c){arguments[4][80][0].apply(c,arguments)},{dup:80}],877:[function(a,b,c){arguments[4][81][0].apply(c,arguments)},{dup:81}],878:[function(a,b,c){arguments[4][82][0].apply(c,arguments)},{"./GLError":873,dup:82,"gl-format-compiler-error":879,"weakmap-shim":895}],879:[function(a,b,c){arguments[4][83][0].apply(c,arguments)},{"add-line-numbers":880,dup:83,"gl-constants/lookup":884,"glsl-shader-name":885,"sprintf-js":892}],880:[function(a,b,c){arguments[4][84][0].apply(c,arguments)},{dup:84,"pad-left":881}],881:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85,"repeat-string":882}],882:[function(a,b,c){arguments[4][86][0].apply(c,arguments)},{dup:86}],883:[function(a,b,c){arguments[4][87][0].apply(c,arguments)},{dup:87}],884:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{"./1.0/numbers":883,dup:88}],885:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{"atob-lite":886,dup:89,"glsl-tokenizer":891}],886:[function(a,b,c){arguments[4][90][0].apply(c,arguments)},{dup:90}],887:[function(a,b,c){arguments[4][91][0].apply(c,arguments)},{"./lib/builtins":888,"./lib/literals":889,"./lib/operators":890,dup:91}],888:[function(a,b,c){arguments[4][92][0].apply(c,arguments)},{dup:92}],889:[function(a,b,c){arguments[4][93][0].apply(c,arguments)},{dup:93}],890:[function(a,b,c){arguments[4][94][0].apply(c,arguments)},{dup:94}],891:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{"./index":887,dup:95}],892:[function(a,b,c){arguments[4][96][0].apply(c,arguments)},{dup:96}],893:[function(a,b,c){arguments[4][97][0].apply(c,arguments)},{"./hidden-store.js":894,dup:97}],894:[function(a,b,c){arguments[4][98][0].apply(c,arguments)},{dup:98}],895:[function(a,b,c){arguments[4][99][0].apply(c,arguments)},{"./create-store.js":893,dup:99}],896:[function(a,b,c){"use strict";function d(a,b,c){this.plot=a,this.boxBuffer=b,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-(1/0),-(1/0)],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}function e(a,b){var c=a.gl,e=g(c,[0,0,0,1,1,0,1,1]),i=f(c,h.boxVertex,h.boxFragment),j=new d(a,e,i);return j.update(b),a.addOverlay(j),j}var f=a("gl-shader"),g=a("gl-buffer"),h=a("./lib/shaders");b.exports=e;var i=d.prototype;i.draw=function(){if(this.enabled){var a=this.plot,b=this.selectBox,c=this.borderWidth,d=(this.innerFill,this.innerColor),e=(this.outerFill,this.outerColor),f=this.borderColor,g=a.box,h=a.screenBox,i=a.dataBox,j=a.viewBox,k=a.pixelRatio,l=(b[0]-i[0])*(j[2]-j[0])/(i[2]-i[0])+j[0],m=(b[1]-i[1])*(j[3]-j[1])/(i[3]-i[1])+j[1],n=(b[2]-i[0])*(j[2]-j[0])/(i[2]-i[0])+j[0],o=(b[3]-i[1])*(j[3]-j[1])/(i[3]-i[1])+j[1];if(l=Math.max(l,j[0]),m=Math.max(m,j[1]),n=Math.min(n,j[2]),o=Math.min(o,j[3]),!(n<l||o<m)){g.bind();var p=h[2]-h[0],q=h[3]-h[1];if(this.outerFill&&(g.drawBox(0,0,p,m,e),g.drawBox(0,m,l,o,e),g.drawBox(0,o,p,q,e),g.drawBox(n,m,p,o,e)),this.innerFill&&g.drawBox(l,m,n,o,d),c>0){var r=c*k;g.drawBox(l-r,m-r,n+r,m+r,f),g.drawBox(l-r,o-r,n+r,o+r,f),g.drawBox(l-r,m-r,l+r,o+r,f),g.drawBox(n-r,m-r,n+r,o+r,f)}}}},i.update=function(a){a=a||{},this.innerFill=!!a.innerFill,this.outerFill=!!a.outerFill,this.innerColor=(a.innerColor||[0,0,0,.5]).slice(),this.outerColor=(a.outerColor||[0,0,0,.5]).slice(),this.borderColor=(a.borderColor||[0,0,0,1]).slice(),this.borderWidth=a.borderWidth||0,this.selectBox=(a.selectBox||this.selectBox).slice()},i.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":867,"gl-buffer":868,"gl-shader":872}],897:[function(a,b,c){"use strict";function d(a){this.plot=a,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}function e(a,b){var c=new d(a);return c.update(b),a.addOverlay(c),c}b.exports=e;var f=d.prototype;f.update=function(a){a=a||{},this.enable=(a.enable||[!0,!0,!1,!1]).slice(),this.width=(a.width||[1,1,1,1]).slice(),this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(a.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},f.draw=function(){var a=this.enable,b=this.width,c=this.color,d=this.center,e=this.plot,f=e.line,g=e.dataBox,h=e.viewBox;if(f.bind(),g[0]<=d[0]&&d[0]<=g[2]&&g[1]<=d[1]&&d[1]<=g[3]){var i=h[0]+(d[0]-g[0])/(g[2]-g[0])*(h[2]-h[0]),j=h[1]+(d[1]-g[1])/(g[3]-g[1])*(h[3]-h[1]);a[0]&&f.drawLine(i,j,h[0],j,b[0],c[0]),a[1]&&f.drawLine(i,j,i,h[1],b[1],c[1]),a[2]&&f.drawLine(i,j,h[2],j,b[2],c[2]),a[3]&&f.drawLine(i,j,i,h[3],b[3],c[3])}},f.dispose=function(){this.plot.removeOverlay(this)}},{}],898:[function(a,b,c){var d=a("gl-shader"),e="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec4 uv;\nattribute vec2 f;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  worldCoordinate = vec3(uv.zw, f.x);\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  value = f.x;\n  kill = f.y;\n  planeCoordinate = uv.xy;\n  \n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}",f="#define GLSLIFY 1\nprecision mediump float;\n\nfloat beckmannDistribution_2_0(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\n\n\nfloat beckmannSpecular_1_1(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution_2_0(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\n\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  if(kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = beckmannSpecular_1_1(L, V, N, roughness);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  float interpValue = (value - lowerBound.z) / (upperBound.z - lowerBound.z);\n  vec4 surfaceColor = texture2D(colormap, vec2(interpValue, interpValue));\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n",g="#define GLSLIFY 1\nprecision mediump float;\n\nattribute vec4 uv;\n\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  vec4 worldPosition = model * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z = clipPosition.z + zOffset;\n\n  gl_Position = clipPosition;\n  value = dataCoordinate.z;\n  kill = -1.0;\n  worldCoordinate = dataCoordinate;\n  planeCoordinate = uv.zw;\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n",h="#define GLSLIFY 1\nprecision mediump float;\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if(kill > 0.0 || \n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}";c.createShader=function(a){var b=d(a,e,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec2"},{name:"normal",type:"vec3"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b.attributes.normal.location=2,b},c.createPickShader=function(a){var b=d(a,e,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec2"},{name:"normal",type:"vec3"}]);return b.attributes.uv.location=0,b.attributes.f.location=1,b.attributes.normal.location=2,b},c.createContourShader=function(a){var b=d(a,g,f,null,[{name:"uv",type:"vec4"}]);return b.attributes.uv.location=0,b},c.createPickContourShader=function(a){var b=d(a,g,h,null,[{name:"uv",type:"vec4"}]);return b.attributes.uv.location=0,b}},{"gl-shader":905}],899:[function(a,b,c){arguments[4][4][0].apply(c,arguments)},{dup:4}],900:[function(a,b,c){arguments[4][60][0].apply(c,arguments)},{dup:60}],901:[function(a,b,c){arguments[4][236][0].apply(c,arguments)},{dup:236}],902:[function(a,b,c){arguments[4][237][0].apply(c,arguments)},{"./colorScales.json":901,arraytools:47,dup:237}],903:[function(a,b,c){arguments[4][33][0].apply(c,arguments)},{dup:33}],904:[function(a,b,c){arguments[4][75][0].apply(c,arguments)},{dup:75,ndarray:987,"ndarray-ops":982,"typedarray-pool":958}],905:[function(a,b,c){arguments[4][76][0].apply(c,arguments)},{"./lib/GLError":906,"./lib/create-attributes":907,"./lib/create-uniforms":908,"./lib/reflect":909,"./lib/runtime-reflect":910,"./lib/shader-cache":911,dup:76}],906:[function(a,b,c){arguments[4][77][0].apply(c,arguments)},{dup:77}],907:[function(a,b,c){arguments[4][78][0].apply(c,arguments)},{"./GLError":906,dup:78}],908:[function(a,b,c){arguments[4][79][0].apply(c,arguments)},{"./GLError":906,"./reflect":909,dup:79}],909:[function(a,b,c){arguments[4][80][0].apply(c,arguments)},{dup:80}],910:[function(a,b,c){arguments[4][81][0].apply(c,arguments)},{dup:81}],911:[function(a,b,c){arguments[4][82][0].apply(c,arguments)},{"./GLError":906,dup:82,"gl-format-compiler-error":912,"weakmap-shim":928}],912:[function(a,b,c){arguments[4][83][0].apply(c,arguments)},{"add-line-numbers":913,dup:83,"gl-constants/lookup":917,"glsl-shader-name":918,"sprintf-js":925}],913:[function(a,b,c){arguments[4][84][0].apply(c,arguments)},{dup:84,"pad-left":914}],914:[function(a,b,c){arguments[4][85][0].apply(c,arguments)},{dup:85,"repeat-string":915}],915:[function(a,b,c){arguments[4][86][0].apply(c,arguments)},{dup:86}],916:[function(a,b,c){arguments[4][87][0].apply(c,arguments)},{dup:87}],917:[function(a,b,c){arguments[4][88][0].apply(c,arguments)},{"./1.0/numbers":916,dup:88}],918:[function(a,b,c){arguments[4][89][0].apply(c,arguments)},{"atob-lite":919,dup:89,"glsl-tokenizer":924}],919:[function(a,b,c){arguments[4][90][0].apply(c,arguments)},{dup:90}],920:[function(a,b,c){arguments[4][91][0].apply(c,arguments)},{"./lib/builtins":921,"./lib/literals":922,"./lib/operators":923,dup:91}],921:[function(a,b,c){arguments[4][92][0].apply(c,arguments)},{dup:92}],922:[function(a,b,c){arguments[4][93][0].apply(c,arguments)},{dup:93}],923:[function(a,b,c){arguments[4][94][0].apply(c,arguments)},{dup:94}],924:[function(a,b,c){arguments[4][95][0].apply(c,arguments)},{"./index":920,dup:95}],925:[function(a,b,c){arguments[4][96][0].apply(c,arguments)},{dup:96}],926:[function(a,b,c){arguments[4][97][0].apply(c,arguments)},{"./hidden-store.js":927,dup:97}],927:[function(a,b,c){arguments[4][98][0].apply(c,arguments)},{dup:98}],928:[function(a,b,c){arguments[4][99][0].apply(c,arguments)},{"./create-store.js":926,dup:99}],929:[function(a,b,c){arguments[4][164][0].apply(c,arguments)},{dup:164,ndarray:987,"ndarray-ops":982,"typedarray-pool":958}],930:[function(a,b,c){arguments[4][132][0].apply(c,arguments)},{dup:132}],931:[function(a,b,c){arguments[4][133][0].apply(c,arguments)},{"./do-bind.js":930,dup:133}],932:[function(a,b,c){arguments[4][134][0].apply(c,arguments)},{"./do-bind.js":930,dup:134}],933:[function(a,b,c){arguments[4][135][0].apply(c,arguments)},{"./lib/vao-emulated.js":931,"./lib/vao-native.js":932,dup:135}],934:[function(a,b,c){"use strict";function d(a){if(a in i)return i[a];for(var b=[],c=0;c<a;++c)b.push("out",c,"s=0.5*(inp",c,"l-inp",c,"r);");for(var d=["array"],e=["junk"],c=0;c<a;++c){d.push("array"),e.push("out"+c+"s");var f=g(a);f[c]=-1,d.push({array:0,offset:f.slice()}),f[c]=1,d.push({array:0,offset:f.slice()}),e.push("inp"+c+"l","inp"+c+"r")}return i[a]=h({args:d,pre:k,post:k,body:{body:b.join(""),args:e.map(function(a){return{name:a,lvalue:0===a.indexOf("out"),rvalue:0===a.indexOf("inp"),count:"junk"!==a|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+a})}function e(a){function b(b){for(var c=f-b.length,d=[],e=[],h=[],i=0;i<f;++i)b.indexOf(i+1)>=0?h.push("0"):b.indexOf(-(i+1))>=0?h.push("s["+i+"]-1"):(h.push("-1"),d.push("1"),e.push("s["+i+"]-2"));var j=".lo("+d.join()+").hi("+e.join()+")";if(0===d.length&&(j=""),c>0){g.push("if(1");for(var i=0;i<f;++i)b.indexOf(i+1)>=0||b.indexOf(-(i+1))>=0||g.push("&&s[",i,"]>2");g.push("){grad",c,"(src.pick(",h.join(),")",j);for(var i=0;i<f;++i)b.indexOf(i+1)>=0||b.indexOf(-(i+1))>=0||g.push(",dst.pick(",h.join(),",",i,")",j);g.push(");")}for(var i=0;i<b.length;++i){var k=Math.abs(b[i])-1,l="dst.pick("+h.join()+","+k+")"+j;switch(a[k]){case"clamp":var m=h.slice(),n=h.slice();b[i]<0?m[k]="s["+k+"]-2":n[k]="1",0===c?g.push("if(s[",k,"]>1){dst.set(",h.join(),",",k,",0.5*(src.get(",m.join(),")-src.get(",n.join(),")))}else{dst.set(",h.join(),",",k,",0)};"):g.push("if(s[",k,"]>1){diff(",l,",src.pick(",m.join(),")",j,",src.pick(",n.join(),")",j,");}else{zero(",l,");};");break;case"mirror":0===c?g.push("dst.set(",h.join(),",",k,",0);"):g.push("zero(",l,");");break;case"wrap":var o=h.slice(),p=h.slice();b[i]<0?(o[k]="s["+k+"]-2",p[k]="0"):(o[k]="s["+k+"]-1",p[k]="1"),0===c?g.push("if(s[",k,"]>2){dst.set(",h.join(),",",k,",0.5*(src.get(",o.join(),")-src.get(",p.join(),")))}else{dst.set(",h.join(),",",k,",0)};"):g.push("if(s[",k,"]>2){diff(",l,",src.pick(",o.join(),")",j,",src.pick(",p.join(),")",j,");}else{zero(",l,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}c>0&&g.push("};")}var c=a.join(),e=j[c];if(e)return e;for(var f=a.length,g=["function gradient(dst,src){var s=src.shape.slice();"],h=0;h<1<<f;++h){for(var k=[],n=0;n<f;++n)h&1<<n&&k.push(n+1);for(var o=0;o<1<<k.length;++o){for(var p=k.slice(),n=0;n<k.length;++n)o&1<<n&&(p[n]=-p[n]);b(p)}}g.push("return dst;};return gradient");for(var q=["diff","zero"],r=[l,m],h=1;h<=f;++h)q.push("grad"+h),r.push(d(h));q.push(g.join(""));var s=Function.apply(void 0,q),e=s.apply(void 0,r);return i[c]=e,e}function f(a,b,c){if(Array.isArray(c)){if(c.length!==b.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else c="string"==typeof c?g(b.dimension,c):g(b.dimension,"clamp");if(a.dimension!==b.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(a.shape[b.dimension]!==b.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var d=0;d<b.dimension;++d)if(a.shape[d]!==b.shape[d])throw new Error("ndarray-gradient: shape mismatch");if(0===b.size)return a;if(b.dimension<=0)return a.set(0),a;var f=e(c);return f(a,b)}b.exports=f;var g=a("dup"),h=a("cwise-compiler"),i={},j={},k={body:"",args:[],thisVars:[],localVars:[]},l=h({args:["array","array","array"],pre:k,post:k,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),m=h({args:["array"],pre:k,post:k,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":935,dup:903}],935:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./lib/thunk.js":937,dup:290}],936:[function(a,b,c){arguments[4][291][0].apply(c,arguments)},{dup:291,uniq:938}],937:[function(a,b,c){arguments[4][292][0].apply(c,arguments)},{"./compile.js":936,dup:292}],938:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],939:[function(a,b,c){"use strict";var d=a("ndarray"),e=a("./doConvert.js");b.exports=function(a,b){for(var c=[],f=a,g=1;f instanceof Array;)c.push(f.length),g*=f.length,f=f[0];return 0===c.length?d():(b||(b=d(new Float64Array(g),c)),e(b,a),b)}},{"./doConvert.js":940,ndarray:987}],940:[function(a,b,c){b.exports=a("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":941}],941:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./lib/thunk.js":943,dup:290}],942:[function(a,b,c){arguments[4][291][0].apply(c,arguments)},{dup:291,uniq:944}],943:[function(a,b,c){arguments[4][292][0].apply(c,arguments)},{"./compile.js":942,dup:292}],944:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],945:[function(a,b,c){arguments[4][398][0].apply(c,arguments)},{dup:398,"typedarray-pool":958}],946:[function(a,b,c){arguments[4][402][0].apply(c,arguments)},{dup:402}],947:[function(a,b,c){arguments[4][406][0].apply(c,arguments)},{dup:406,"typedarray-pool":958}],948:[function(a,b,c){arguments[4][407][0].apply(c,arguments)},{dup:407,"invert-permutation":949,"typedarray-pool":958}],949:[function(a,b,c){arguments[4][408][0].apply(c,arguments)},{dup:408}],950:[function(a,b,c){arguments[4][412][0].apply(c,arguments)},{dup:412,gamma:946,"permutation-parity":947,"permutation-rank":948}],951:[function(a,b,c){arguments[4][413][0].apply(c,arguments)},{"cwise-compiler":952,dup:413}],952:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./lib/thunk.js":954,dup:290}],953:[function(a,b,c){arguments[4][291][0].apply(c,arguments)},{dup:291,uniq:955}],954:[function(a,b,c){arguments[4][292][0].apply(c,arguments)},{"./compile.js":953,dup:292}],955:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],956:[function(a,b,c){arguments[4][418][0].apply(c,arguments)},{"./lib/zc-core":951,dup:418}],957:[function(a,b,c){arguments[4][419][0].apply(c,arguments)},{dup:419,"ndarray-extract-contour":945,"triangulate-hypercube":950,"zero-crossings":956}],958:[function(a,b,c){arguments[4][102][0].apply(c,arguments)},{"bit-twiddle":900,buffer:48,dup:102}],959:[function(a,b,c){"use strict";function d(a,b,c,d,e){this.position=a,this.index=b,this.uv=c,this.level=d,this.dataCoordinate=e}function e(a){var b=u([s({colormap:a,nshades:K,format:"rgba"}).map(function(a){return[a[0],a[1],a[2],255*a[3]]})]);return t.divseq(b,255),b}function f(a,b,c,e,f,g,h,i,j,k,l,m,n,o){this.gl=a,this.shape=b,this.bounds=c,this._shader=e,this._pickShader=f,this._coordinateBuffer=g,this._vao=h,this._colorMap=i,this._contourShader=j,this._contourPickShader=k,this._contourBuffer=l,this._contourVAO=m,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new d([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=n,this._dynamicVAO=o,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[v(r.mallocFloat(1024),[0,0]),v(r.mallocFloat(1024),[0,0]),v(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.snapToData=!1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.dirty=!0}function g(a,b){for(var c=b.axes&&b.axes.lastCubeProps.axis||M,d=b.showSurface,e=b.showContour,f=0;f<3;++f){d=d||b.surfaceProject[f];for(var g=0;g<3;++g)e=e||b.contourProject[f][g]}for(var f=0;f<3;++f){for(var h=N.projections[f],g=0;g<16;++g)h[g]=0;for(var g=0;g<4;++g)h[5*g]=1;h[5*f]=0,h[12+f]=b.axesBounds[+(c[f]>0)][f],x(h,a.model,h);for(var i=N.clipBounds[f],j=0;j<2;++j)for(var g=0;g<3;++g)i[j][g]=a.clipBounds[j][g];i[0][f]=-1e8,i[1][f]=1e8}return N.showSurface=d,N.showContour=e,N}function h(a,b){a=a||{};var c=this.gl;c.disable(c.CULL_FACE),this._colorMap.bind(0);var d=O;d.model=a.model||H,d.view=a.view||H,d.projection=a.projection||H,d.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],d.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],d.contourColor=this.contourColor[0],d.inverseModel=y(d.inverseModel,d.model);for(var e=0;e<2;++e)for(var f=d.clipBounds[e],h=0;h<3;++h)f[h]=Math.min(Math.max(this.clipBounds[e][h],-1e8),1e8);d.kambient=this.ambientLight,d.kdiffuse=this.diffuseLight,d.kspecular=this.specularLight,d.shape=d.roughness=this.roughness,d.fresnel=this.fresnel,d.opacity=this.opacity,d.height=0,d.permutation=Q;var i=P;x(i,d.view,d.model),x(i,d.projection,i),y(i,i);for(var e=0;e<3;++e)d.eyePosition[e]=i[12+e]/i[15];for(var j=i[15],e=0;e<3;++e)j+=this.lightPosition[e]*i[4*e+3];for(var e=0;e<3;++e){for(var k=i[12+e],h=0;h<3;++h)k+=i[4*h+e]*this.lightPosition[h];d.lightPosition[e]=k/j}var l=g(d,this);if(l.showSurface&&b===this.opacity<1){this._shader.bind(),this._shader.uniforms=d,this._vao.bind(),this.showSurface&&this._vao.draw(c.TRIANGLES,this._vertexCount);for(var e=0;e<3;++e)this.surfaceProject[e]&&(this._shader.uniforms.model=l.projections[e],this._shader.uniforms.clipBounds=l.clipBounds[e],this._vao.draw(c.TRIANGLES,this._vertexCount));this._vao.unbind()}if(l.showContour&&!b){var m=this._contourShader;d.kambient=1,d.kdiffuse=0,d.kspecular=0,d.opacity=1,m.bind(),m.uniforms=d;var n=this._contourVAO;n.bind();for(var e=0;e<3;++e){m.uniforms.permutation=J[e],c.lineWidth(this.contourWidth[e]);for(var h=0;h<this.contourLevels[e].length;++h)h===this.highlightLevel[e]?(m.uniforms.contourColor=this.highlightColor[e],m.uniforms.contourTint=this.highlightTint[e]):0!==h&&h-1!==this.highlightLevel[e]||(m.uniforms.contourColor=this.contourColor[e],m.uniforms.contourTint=this.contourTint[e]),m.uniforms.height=this.contourLevels[e][h],n.draw(c.LINES,this._contourCounts[e][h],this._contourOffsets[e][h])}for(var e=0;e<3;++e){m.uniforms.model=l.projections[e],m.uniforms.clipBounds=l.clipBounds[e];for(var h=0;h<3;++h)if(this.contourProject[e][h]){m.uniforms.permutation=J[h],c.lineWidth(this.contourWidth[h]);for(var o=0;o<this.contourLevels[h].length;++o)o===this.highlightLevel[h]?(m.uniforms.contourColor=this.highlightColor[h],m.uniforms.contourTint=this.highlightTint[h]):0!==o&&o-1!==this.highlightLevel[h]||(m.uniforms.contourColor=this.contourColor[h],m.uniforms.contourTint=this.contourTint[h]),m.uniforms.height=this.contourLevels[h][o],n.draw(c.LINES,this._contourCounts[h][o],this._contourOffsets[h][o])}}n=this._dynamicVAO,n.bind();for(var e=0;e<3;++e)if(0!==this._dynamicCounts[e]){m.uniforms.model=d.model,m.uniforms.clipBounds=d.clipBounds,m.uniforms.permutation=J[e],c.lineWidth(this.dynamicWidth[e]),m.uniforms.contourColor=this.dynamicColor[e],m.uniforms.contourTint=this.dynamicTint[e],m.uniforms.height=this.dynamicLevel[e],n.draw(c.LINES,this._dynamicCounts[e],this._dynamicOffsets[e]);for(var h=0;h<3;++h)this.contourProject[h][e]&&(m.uniforms.model=l.projections[h],m.uniforms.clipBounds=l.clipBounds[h],n.draw(c.LINES,this._dynamicCounts[e],this._dynamicOffsets[e]))}n.unbind()}}function i(a,b){var c=b.shape.slice(),d=a.shape.slice();t.assign(a.lo(1,1).hi(c[0],c[1]),b),t.assign(a.lo(1).hi(c[0],1),b.hi(c[0],1)),t.assign(a.lo(1,d[1]-1).hi(c[0],1),b.lo(0,c[1]-1).hi(c[0],1)),t.assign(a.lo(0,1).hi(1,c[1]),b.hi(1)),t.assign(a.lo(d[0]-1,1).hi(1,c[1]),b.lo(c[0]-1)),a.set(0,0,b.get(0,0)),a.set(0,d[1]-1,b.get(0,c[1]-1)),a.set(d[0]-1,0,b.get(c[0]-1,0)),a.set(d[0]-1,d[1]-1,b.get(c[0]-1,c[1]-1))}function j(a,b){return Array.isArray(a)?[b(a[0]),b(a[1]),b(a[2])]:[b(a),b(a),b(a)]}function k(a){return Array.isArray(a)?3===a.length?[a[0],a[1],a[2],1]:[a[0],a[1],a[2],a[3]]:[0,0,0,1]}function l(a){if(Array.isArray(a)){if(Array.isArray(a))return[k(a[0]),k(a[1]),k(a[2])];var b=k(a);return[b.slice(),b.slice(),b.slice()]}}function m(a){var b=a.gl,c=(a.field||a.coords&&a.coords[2]||v([],[0,0]),C(b)),d=E(b),e=D(b),g=F(b),h=o(b),i=p(b,[{buffer:h,size:4,stride:G,offset:0},{buffer:h,size:2,stride:G,offset:16},{buffer:h,size:3,stride:G,offset:24}]),j=o(b),k=p(b,[{buffer:j,size:4}]),l=o(b),m=p(b,[{buffer:l,size:2,type:b.FLOAT}]),n=q(b,1,K,b.RGBA,b.UNSIGNED_BYTE);n.minFilter=b.LINEAR,n.magFilter=b.LINEAR;var r=new f(b,[0,0],[[0,0,0],[0,0,0]],c,d,h,i,n,e,g,j,k,l,m),s={levels:[[],[],[]]};for(var t in a)s[t]=a[t];return s.colormap=s.colormap||"jet",r.update(s),r}b.exports=m;var n=a("bit-twiddle"),o=a("gl-buffer"),p=a("gl-vao"),q=a("gl-texture2d"),r=a("typedarray-pool"),s=a("colormap"),t=a("ndarray-ops"),u=a("ndarray-pack"),v=a("ndarray"),w=a("surface-nets"),x=a("gl-mat4/multiply"),y=a("gl-mat4/invert"),z=a("binary-search-bounds"),A=a("ndarray-gradient"),v=a("ndarray"),B=a("./lib/shaders"),C=B.createShader,D=B.createContourShader,E=B.createPickShader,F=B.createPickContourShader,G=36,H=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],J=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];!function(){for(var a=0;a<3;++a){var b=J[a],c=(a+1)%3,d=(a+2)%3;b[c+0]=1,b[d+3]=1,b[a+6]=1}}();var K=265,L=f.prototype;L.isTransparent=function(){return this.opacity<1},L.isOpaque=function(){if(this.opacity>=1)return!0;for(var a=0;a<3;++a)if(this._contourCounts[a].length>0||this._dynamicCounts[a]>0)return!0;return!1},L.pickSlots=1,L.setPickBase=function(a){this.pickId=a};var M=[0,0,0],N={showSurface:!1,showContour:!1,projections:[H.slice(),H.slice(),H.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},O={model:H,view:H,projection:H,inverseModel:H.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1},P=H.slice(),Q=[1,0,0,0,1,0,0,0,1];L.draw=function(a){return h.call(this,a,!1)},L.drawTransparent=function(a){return h.call(this,a,!0)};var R={model:H,view:H,projection:H,inverseModel:H,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};L.drawPick=function(a){a=a||{};var b=this.gl;b.disable(b.CULL_FACE);var c=R;c.model=a.model||H,c.view=a.view||H,c.projection=a.projection||H,c.shape=this._field[2].shape,c.pickId=this.pickId/255,c.lowerBound=this.bounds[0],c.upperBound=this.bounds[1],c.permutation=Q;for(var d=0;d<2;++d)for(var e=c.clipBounds[d],f=0;f<3;++f)e[f]=Math.min(Math.max(this.clipBounds[d][f],-1e8),1e8);var h=g(c,this);if(h.showSurface){this._pickShader.bind(),this._pickShader.uniforms=c,this._vao.bind(),this._vao.draw(b.TRIANGLES,this._vertexCount);for(var d=0;d<3;++d)this.surfaceProject[d]&&(this._pickShader.uniforms.model=h.projections[d],this._pickShader.uniforms.clipBounds=h.clipBounds[d],this._vao.draw(b.TRIANGLES,this._vertexCount));this._vao.unbind()}if(h.showContour){var i=this._contourPickShader;i.bind(),i.uniforms=c;var j=this._contourVAO;j.bind();for(var f=0;f<3;++f){b.lineWidth(this.contourWidth[f]),i.uniforms.permutation=J[f];for(var d=0;d<this.contourLevels[f].length;++d)i.uniforms.height=this.contourLevels[f][d],j.draw(b.LINES,this._contourCounts[f][d],this._contourOffsets[f][d])}for(var d=0;d<3;++d){i.uniforms.model=h.projections[d],i.uniforms.clipBounds=h.clipBounds[d];for(var f=0;f<3;++f)if(this.contourProject[d][f]){i.uniforms.permutation=J[f],b.lineWidth(this.contourWidth[f]);for(var k=0;k<this.contourLevels[f].length;++k)i.uniforms.height=this.contourLevels[f][k],j.draw(b.LINES,this._contourCounts[f][k],this._contourOffsets[f][k])}}j.unbind()}},L.pick=function(a){if(!a)return null;if(a.id!==this.pickId)return null;var b=this._field[2].shape,c=this._pickResult,d=b[0]*(a.value[0]+(a.value[2]>>4)/16)/255,e=Math.floor(d),f=d-e,g=b[1]*(a.value[1]+(15&a.value[2])/16)/255,h=Math.floor(g),i=g-h;e+=1,h+=1;var j=c.position;j[0]=j[1]=j[2]=0;for(var k=0;k<2;++k)for(var l=k?f:1-f,m=0;m<2;++m)for(var n=m?i:1-i,o=e+k,p=h+m,q=l*n,r=0;r<3;++r)j[r]+=this._field[r].get(o,p)*q;for(var s=this._pickResult.level,t=0;t<3;++t)if(s[t]=z.le(this.contourLevels[t],j[t]),s[t]<0)this.contourLevels[t].length>0&&(s[t]=0);else if(s[t]<this.contourLevels[t].length-1){
var u=this.contourLevels[t][s[t]],v=this.contourLevels[t][s[t]+1];Math.abs(u-j[t])>Math.abs(v-j[t])&&(s[t]+=1)}c.index[0]=f<.5?e:e+1,c.index[1]=i<.5?h:h+1,c.uv[0]=d/b[0],c.uv[1]=g/b[1];for(var r=0;r<3;++r)c.dataCoordinate[r]=this._field[r].get(c.index[0],c.index[1]);return c},L.update=function(a){a=a||{},this.dirty=!0,"contourWidth"in a&&(this.contourWidth=j(a.contourWidth,Number)),"showContour"in a&&(this.showContour=j(a.showContour,Boolean)),"showSurface"in a&&(this.showSurface=!!a.showSurface),"contourTint"in a&&(this.contourTint=j(a.contourTint,Boolean)),"contourColor"in a&&(this.contourColor=l(a.contourColor)),"contourProject"in a&&(this.contourProject=j(a.contourProject,function(a){return j(a,Boolean)})),"surfaceProject"in a&&(this.surfaceProject=a.surfaceProject),"dynamicColor"in a&&(this.dynamicColor=l(a.dynamicColor)),"dynamicTint"in a&&(this.dynamicTint=j(a.dynamicTint,Number)),"dynamicWidth"in a&&(this.dynamicWidth=j(a.dynamicWidth,Number)),"opacity"in a&&(this.opacity=a.opacity),"colorBounds"in a&&(this.colorBounds=a.colorBounds);var b=a.field||a.coords&&a.coords[2]||null;if(b||(b=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in a||"coords"in a){var c=(b.shape[0]+2)*(b.shape[1]+2);c>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(n.nextPow2(c))),this._field[2]=v(this._field[2].data,[b.shape[0]+2,b.shape[1]+2]),i(this._field[2],b),this.shape=b.shape.slice();for(var d=this.shape,f=0;f<2;++f)this._field[2].size>this._field[f].data.length&&(r.freeFloat(this._field[f].data),this._field[f].data=r.mallocFloat(this._field[2].size)),this._field[f]=v(this._field[f].data,[d[0]+2,d[1]+2]);if(a.coords){var g=a.coords;if(!Array.isArray(g)||3!==g.length)throw new Error("gl-surface: invalid coordinates for x/y");for(var f=0;f<2;++f){for(var h=g[f],k=0;k<2;++k)if(h.shape[k]!==d[k])throw new Error("gl-surface: coords have incorrect shape");i(this._field[f],h)}}else if(a.ticks){var m=a.ticks;if(!Array.isArray(m)||2!==m.length)throw new Error("gl-surface: invalid ticks");for(var f=0;f<2;++f){var o=m[f];if((Array.isArray(o)||o.length)&&(o=v(o)),o.shape[0]!==d[f])throw new Error("gl-surface: invalid tick length");var p=v(o.data,d);p.stride[f]=o.stride[0],p.stride[1^f]=0,i(this._field[f],p)}}else{for(var f=0;f<2;++f){var q=[0,0];q[f]=1,this._field[f]=v(this._field[f].data,[d[0]+2,d[1]+2],q,0)}this._field[0].set(0,0,0);for(var k=0;k<d[0];++k)this._field[0].set(k+1,0,k);this._field[0].set(d[0]+1,0,d[0]-1),this._field[1].set(0,0,0);for(var k=0;k<d[1];++k)this._field[1].set(0,k+1,k);this._field[1].set(0,d[1]+1,d[1]-1)}for(var s=this._field,t=(s[2].size,v(r.mallocFloat(3*s[2].size*2),[3,d[0]+2,d[1]+2,2])),f=0;f<3;++f)A(t.pick(f),s[f],"mirror");for(var u=v(r.mallocFloat(3*s[2].size),[d[0]+2,d[1]+2,3]),f=0;f<d[0]+2;++f)for(var k=0;k<d[1]+2;++k){var x=t.get(0,f,k,0),y=t.get(0,f,k,1),z=t.get(1,f,k,0),B=t.get(1,f,k,1),C=t.get(2,f,k,0),D=t.get(2,f,k,1),E=z*D-B*C,F=C*y-D*x,G=x*B-y*z,H=Math.sqrt(E*E+F*F+G*G);H<1e-8?(H=Math.max(Math.abs(E),Math.abs(F),Math.abs(G)),H<1e-8?(G=1,F=E=0,H=1):H=1/H):H=1/Math.sqrt(H),u.set(f,k,0,E*H),u.set(f,k,1,F*H),u.set(f,k,2,G*H)}r.free(t.data);for(var J=[1/0,1/0,1/0],K=[-(1/0),-(1/0),-(1/0)],L=(d[0]-1)*(d[1]-1)*6,M=r.mallocFloat(n.nextPow2(9*L)),N=0,O=0,f=0;f<d[0]-1;++f)a:for(var k=0;k<d[1]-1;++k){for(var P=0;P<2;++P)for(var Q=0;Q<2;++Q)for(var R=0;R<3;++R){var S=this._field[R].get(1+f+P,1+k+Q);if(isNaN(S)||!isFinite(S))continue a}for(var R=0;R<6;++R){var T=f+I[R][0],U=k+I[R][1],V=this._field[0].get(T+1,U+1),W=this._field[1].get(T+1,U+1),S=this._field[2].get(T+1,U+1),E=u.get(T+1,U+1,0),F=u.get(T+1,U+1,1),G=u.get(T+1,U+1,2);M[N++]=T,M[N++]=U,M[N++]=V,M[N++]=W,M[N++]=S,M[N++]=0,M[N++]=E,M[N++]=F,M[N++]=G,J[0]=Math.min(J[0],V),J[1]=Math.min(J[1],W),J[2]=Math.min(J[2],S),K[0]=Math.max(K[0],V),K[1]=Math.max(K[1],W),K[2]=Math.max(K[2],S),O+=1}}this._vertexCount=O,this._coordinateBuffer.update(M.subarray(0,N)),r.freeFloat(M),r.free(u.data),this.bounds=[J,K]}var X=!1;if("levels"in a){var Y=a.levels;Y=Array.isArray(Y[0])?Y.slice():[[],[],Y];for(var f=0;f<3;++f)Y[f]=Y[f].slice(),Y.sort(function(a,b){return a-b});a:for(var f=0;f<3;++f){if(Y[f].length!==this.contourLevels[f].length){X=!0;break}for(var k=0;k<Y[f].length;++k)if(Y[f][k]!==this.contourLevels[f][k]){X=!0;break a}}this.contourLevels=Y}if(X){for(var s=this._field,d=this.shape,Z=[],$=0;$<3;++$){for(var Y=this.contourLevels[$],_=[],aa=[],ba=[0,0],f=0;f<Y.length;++f){var ca=w(this._field[$],Y[f]);_.push(Z.length/4|0);var O=0;a:for(var k=0;k<ca.cells.length;++k)for(var da=ca.cells[k],R=0;R<2;++R){var ea=ca.positions[da[R]],fa=ea[0],ga=0|Math.floor(fa),ha=fa-ga,ia=ea[1],ja=0|Math.floor(ia),ka=ia-ja,la=!1;b:for(var ma=0;ma<2;++ma){ba[ma]=0;for(var na=($+ma+1)%3,P=0;P<2;++P)for(var oa=P?ha:1-ha,T=0|Math.min(Math.max(ga+P,0),d[0]),Q=0;Q<2;++Q){var pa=Q?ka:1-ka,U=0|Math.min(Math.max(ja+Q,0),d[1]),S=this._field[na].get(T,U);if(!isFinite(S)||isNaN(S)){la=!0;break b}var qa=oa*pa;ba[ma]+=qa*S}}if(la){if(R>0){for(var ra=0;ra<4;++ra)Z.pop();O-=1}continue a}Z.push(ba[0],ba[1],ea[0],ea[1]),O+=1}aa.push(O)}this._contourOffsets[$]=_,this._contourCounts[$]=aa}for(var sa=r.mallocFloat(Z.length),f=0;f<Z.length;++f)sa[f]=Z[f];this._contourBuffer.update(sa),r.freeFloat(sa)}a.colormap&&this._colorMap.setPixels(e(a.colormap))},L.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var a=0;a<3;++a)r.freeFloat(this._field[a].data)},L.highlight=function(a){if(!a)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(var b=0;b<3;++b)this.enableHighlight[b]?this.highlightLevel[b]=a.level[b]:this.highlightLevel[b]=-1;var c;if(c=this.snapToData?a.dataCoordinate:a.position,this.enableDynamic[0]&&c[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&c[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&c[2]!==this.dynamicLevel[2]){for(var d=0,e=this.shape,f=r.mallocFloat(12*e[0]*e[1]),g=0;g<3;++g)if(this.enableDynamic[g]){this.dynamicLevel[g]=c[g];var h=(g+1)%3,i=(g+2)%3,j=this._field[g],k=this._field[h],l=this._field[i],m=w(j,c[g]),n=m.cells,o=m.positions;this._dynamicOffsets[g]=d;for(var b=0;b<n.length;++b)for(var p=n[b],q=0;q<2;++q){var s=o[p[q]],t=+s[0],u=0|t,v=0|Math.min(u+1,e[0]),x=t-u,y=1-x,z=+s[1],A=0|z,B=0|Math.min(A+1,e[1]),C=z-A,D=1-C,E=y*D,F=y*C,G=x*D,H=x*C,I=E*k.get(u,A)+F*k.get(u,B)+G*k.get(v,A)+H*k.get(v,B),J=E*l.get(u,A)+F*l.get(u,B)+G*l.get(v,A)+H*l.get(v,B);if(isNaN(I)||isNaN(J)){q&&(d-=1);break}f[2*d+0]=I,f[2*d+1]=J,d+=1}this._dynamicCounts[g]=d-this._dynamicOffsets[g]}else this.dynamicLevel[g]=NaN,this._dynamicCounts[g]=0;this._dynamicBuffer.update(f.subarray(0,2*d)),r.freeFloat(f)}}},{"./lib/shaders":898,"binary-search-bounds":899,"bit-twiddle":900,colormap:902,"gl-buffer":904,"gl-mat4/invert":214,"gl-mat4/multiply":216,"gl-texture2d":929,"gl-vao":933,ndarray:987,"ndarray-gradient":934,"ndarray-ops":982,"ndarray-pack":939,"surface-nets":957,"typedarray-pool":958}],960:[function(a,b,c){"use strict";function d(a,b){function c(a){var b=!1;return"altKey"in a&&(b=b||a.altKey!==p.alt,p.alt=!!a.altKey),"shiftKey"in a&&(b=b||a.shiftKey!==p.shift,p.shift=!!a.shiftKey),"ctrlKey"in a&&(b=b||a.ctrlKey!==p.control,p.control=!!a.ctrlKey),"metaKey"in a&&(b=b||a.metaKey!==p.meta,p.meta=!!a.metaKey),b}function d(a,d){var f=e.x(d),g=e.y(d);"buttons"in d&&(a=0|d.buttons),(a!==m||f!==n||g!==o||c(d))&&(m=0|a,n=f||0,o=g||0,b(m,n,o,p))}function f(a){d(0,a)}function g(){(m||n||o||p.shift||p.alt||p.meta||p.control)&&(n=o=0,m=0,p.shift=p.alt=p.control=p.meta=!1,b(0,0,0,p))}function h(a){c(a)&&b(m,n,o,p)}function i(a){0===e.buttons(a)?d(0,a):d(m,a)}function j(a){d(m|e.buttons(a),a)}function k(a){d(m&~e.buttons(a),a)}function l(){q||(q=!0,a.addEventListener("mousemove",i),a.addEventListener("mousedown",j),a.addEventListener("mouseup",k),a.addEventListener("mouseleave",f),a.addEventListener("mouseenter",f),a.addEventListener("mouseout",f),a.addEventListener("mouseover",f),a.addEventListener("blur",g),a.addEventListener("keyup",h),a.addEventListener("keydown",h),a.addEventListener("keypress",h),a!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}b||(b=a,a=window);var m=0,n=0,o=0,p={shift:!1,alt:!1,control:!1,meta:!1},q=!1;l();var r={element:a};return Object.defineProperties(r,{enabled:{get:function(){return q},set:function(a){a&&l()},enumerable:!0},buttons:{get:function(){return m},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return p},enumerable:!0}}),r}b.exports=d;var e=a("mouse-event")},{"mouse-event":961}],961:[function(a,b,c){"use strict";function d(a){if("object"==typeof a){if("buttons"in a)return a.buttons;if("which"in a){var b=a.which;if(2===b)return 4;if(3===b)return 2;if(b>0)return 1<<b-1}else if("button"in a){var b=a.button;if(1===b)return 4;if(2===b)return 2;if(b>=0)return 1<<b}}return 0}function e(a){return a.target||a.srcElement||window}function f(a){if("object"==typeof a){if("offsetX"in a)return a.offsetX;var b=e(a),c=b.getBoundingClientRect();return a.clientX-c.left}return 0}function g(a){if("object"==typeof a){if("offsetY"in a)return a.offsetY;var b=e(a),c=b.getBoundingClientRect();return a.clientY-c.top}return 0}c.buttons=d,c.element=e,c.x=f,c.y=g},{}],962:[function(a,b,c){b.exports=function(a,b){b||(b=[0,""]),a=String(a);var c=parseFloat(a,10);return b[0]=c,b[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",b}},{}],963:[function(a,b,c){"use strict";function d(a,b){var c=g(getComputedStyle(a).getPropertyValue(b));return c[0]*f(c[1],a)}function e(a,b){var c=document.createElement("div");c.style["font-size"]="128"+a,b.appendChild(c);var e=d(c,"font-size")/128;return b.removeChild(c),e}function f(a,b){switch(b=b||document.body,a=(a||"px").trim().toLowerCase(),b!==window&&b!==document||(b=document.body),a){case"%":return b.clientHeight/100;case"ch":case"ex":return e(a,b);case"em":return d(b,"font-size");case"rem":return d(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return h;case"cm":return h/2.54;case"mm":return h/25.4;case"pt":return h/72;case"pc":return h/6}return 1}var g=a("parse-unit");b.exports=f;var h=96},{"parse-unit":962}],964:[function(a,b,c){"use strict";function d(a,b,c){"function"==typeof a&&(c=!!b,b=a,a=window);var d=e("ex",a);a.addEventListener("wheel",function(a){c&&a.preventDefault();var e=a.deltaX||0,f=a.deltaY||0,g=a.deltaZ||0,h=a.deltaMode,i=1;switch(h){case 1:i=d;break;case 2:i=window.innerHeight}if(e*=i,f*=i,g*=i,e||f||g)return b(e,f,g)})}var e=a("to-px");b.exports=d},{"to-px":963}],965:[function(a,b,c){"use strict";var d=a("cwise/lib/wrapper")({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_4_arg1_=_inline_4_arg2_.apply(void 0,_inline_4_arg0_)}",args:[{name:"_inline_4_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_4_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});b.exports=function(a,b){return d(a,b),a}},{"cwise/lib/wrapper":966}],966:[function(a,b,c){arguments[4][289][0].apply(c,arguments)},{"cwise-compiler":967,dup:289}],967:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./lib/thunk.js":969,dup:290}],968:[function(a,b,c){arguments[4][291][0].apply(c,arguments)},{dup:291,uniq:970}],969:[function(a,b,c){arguments[4][292][0].apply(c,arguments)},{"./compile.js":968,dup:292}],970:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],971:[function(a,b,c){"use strict";function d(a,b){switch(b.length){case 0:break;case 1:a[0]=1/b[0];break;case 4:e(a,b);break;case 9:f(a,b);break;case 16:g(a,b);break;default:throw new Error("currently supports matrices up to 4x4")}return a}b.exports=d;var e=a("gl-mat2/invert"),f=a("gl-mat3/invert"),g=a("gl-mat4/invert")},{"gl-mat2/invert":972,"gl-mat3/invert":973,"gl-mat4/invert":214}],972:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null}b.exports=d},{}],973:[function(a,b,c){function d(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null}b.exports=d},{}],974:[function(a,b,c){arguments[4][289][0].apply(c,arguments)},{"cwise-compiler":975,dup:289}],975:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./lib/thunk.js":977,dup:290}],976:[function(a,b,c){arguments[4][291][0].apply(c,arguments)},{dup:291,uniq:978}],977:[function(a,b,c){arguments[4][292][0].apply(c,arguments)},{"./compile.js":976,dup:292}],978:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],979:[function(a,b,c){"use strict";function d(a,b){var c=Math.floor(b),d=b-c,e=0<=c&&c<a.shape[0],f=0<=c+1&&c+1<a.shape[0],g=e?+a.get(c):0,h=f?+a.get(c+1):0;return(1-d)*g+d*h}function e(a,b,c){var d=Math.floor(b),e=b-d,f=0<=d&&d<a.shape[0],g=0<=d+1&&d+1<a.shape[0],h=Math.floor(c),i=c-h,j=0<=h&&h<a.shape[1],k=0<=h+1&&h+1<a.shape[1],l=f&&j?a.get(d,h):0,m=f&&k?a.get(d,h+1):0,n=g&&j?a.get(d+1,h):0,o=g&&k?a.get(d+1,h+1):0;return(1-i)*((1-e)*l+e*n)+i*((1-e)*m+e*o)}function f(a,b,c,d){var e=Math.floor(b),f=b-e,g=0<=e&&e<a.shape[0],h=0<=e+1&&e+1<a.shape[0],i=Math.floor(c),j=c-i,k=0<=i&&i<a.shape[1],l=0<=i+1&&i+1<a.shape[1],m=Math.floor(d),n=d-m,o=0<=m&&m<a.shape[2],p=0<=m+1&&m+1<a.shape[2],q=g&&k&&o?a.get(e,i,m):0,r=g&&l&&o?a.get(e,i+1,m):0,s=h&&k&&o?a.get(e+1,i,m):0,t=h&&l&&o?a.get(e+1,i+1,m):0,u=g&&k&&p?a.get(e,i,m+1):0,v=g&&l&&p?a.get(e,i+1,m+1):0,w=h&&k&&p?a.get(e+1,i,m+1):0,x=h&&l&&p?a.get(e+1,i+1,m+1):0;return(1-n)*((1-j)*((1-f)*q+f*s)+j*((1-f)*r+f*t))+n*((1-j)*((1-f)*u+f*w)+j*((1-f)*v+f*x))}function g(a){var b,c,d=0|a.shape.length,e=new Array(d),f=new Array(d),g=new Array(d),h=new Array(d);for(b=0;b<d;++b)c=+arguments[b+1],e[b]=Math.floor(c),f[b]=c-e[b],g[b]=0<=e[b]&&e[b]<a.shape[b],h[b]=0<=e[b]+1&&e[b]+1<a.shape[b];var i,j,k,l=0;a:for(b=0;b<1<<d;++b){for(j=1,k=a.offset,i=0;i<d;++i)if(b&1<<i){if(!h[i])continue a;j*=f[i],k+=a.stride[i]*(e[i]+1)}else{if(!g[i])continue a;j*=1-f[i],k+=a.stride[i]*e[i]}l+=j*a.data[k]}return l}function h(a,b,c,h){switch(a.shape.length){case 0:return 0;case 1:return d(a,b);case 2:return e(a,b,c);case 3:return f(a,b,c,h);default:return g.apply(void 0,arguments)}}b.exports=h,b.exports.d1=d,b.exports.d2=e,b.exports.d3=f},{}],980:[function(a,b,c){"use strict";var d=a("ndarray-linear-interpolate"),e=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=new Array(_inline_12_arg4_)}",args:[{name:"_inline_12_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_12_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_12_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_12_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_12_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_13_arg2_(this_warped,_inline_13_arg0_),_inline_13_arg1_=_inline_13_arg3_.apply(void 0,this_warped)}",args:[{name:"_inline_13_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_13_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg3_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),f=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_16_arg2_(this_warped,_inline_16_arg0_),_inline_16_arg1_=_inline_16_arg3_(_inline_16_arg4_,this_warped[0])}",args:[{name:"_inline_16_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_16_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),g=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_19_arg2_(this_warped,_inline_19_arg0_),_inline_19_arg1_=_inline_19_arg3_(_inline_19_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_19_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_19_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_19_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),h=a("cwise/lib/wrapper")({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_22_arg2_(this_warped,_inline_22_arg0_),_inline_22_arg1_=_inline_22_arg3_(_inline_22_arg4_,this_warped[0],this_warped[1],this_warped[2])}",args:[{name:"_inline_22_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_22_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_22_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64});b.exports=function(a,b,c){switch(b.shape.length){case 1:f(a,c,d.d1,b);break;case 2:g(a,c,d.d2,b);break;case 3:h(a,c,d.d3,b);break;default:e(a,c,d.bind(void 0,b),b.shape.length)}return a}},{"cwise/lib/wrapper":974,"ndarray-linear-interpolate":979}],981:[function(a,b,c){"use strict";function d(a,b,c){var d=b.dimension,g=f([],c);return e(a,b,function(a,b){for(var c=0;c<d;++c){a[c]=g[(d+1)*d+c];for(var e=0;e<d;++e)a[c]+=g[(d+1)*e+c]*b[e]}for(var f=g[(d+1)*(d+1)-1],e=0;e<d;++e)f+=g[(d+1)*e+d]*b[e];for(var h=1/f,c=0;c<d;++c)a[c]*=h;return a}),a}var e=a("ndarray-warp"),f=a("gl-matrix-invert");b.exports=d},{"gl-matrix-invert":971,"ndarray-warp":980}],982:[function(a,b,c){"use strict";function d(a){if(!a)return h;for(var b=0;b<a.args.length;++b){var c=a.args[b];0===b?a.args[b]={name:c,lvalue:!0,rvalue:!!a.rvalue,count:a.count||1}:a.args[b]={name:c,lvalue:!1,rvalue:!0,count:1}}return a.thisVars||(a.thisVars=[]),a.localVars||(a.localVars=[]),a}function e(a){return g({args:a.args,pre:d(a.pre),body:d(a.body),post:d(a.proc),funcName:a.funcName})}function f(a){for(var b=[],c=0;c<a.args.length;++c)b.push("a"+c);var d=new Function("P",["return function ",a.funcName,"_ndarrayops(",b.join(","),") {P(",b.join(","),");return a0}"].join(""));return d(e(a))}var g=a("cwise-compiler"),h={body:"",args:[],thisVars:[],localVars:[]},i={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var a in i){var b=i[a];c[a]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+b+"c"},funcName:a}),c[a+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a"+b+"=b"},rvalue:!0,funcName:a+"eq"}),c[a+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+b+"s"},funcName:a+"s"}),c[a+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a"+b+"=s"},rvalue:!0,funcName:a+"seq"})}}();var j={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var a in j){var b=j[a];c[a]=f({args:["array","array"],body:{args:["a","b"],body:"a="+b+"b"},funcName:a}),c[a+"eq"]=f({args:["array"],body:{args:["a"],body:"a="+b+"a"},rvalue:!0,count:2,funcName:a+"eq"})}}();var k={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var a in k){var b=k[a];c[a]=f({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+b+"c"},funcName:a}),c[a+"s"]=f({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+b+"s"},funcName:a+"s"}),c[a+"eq"]=f({args:["array","array"],body:{args:["a","b"],body:"a=a"+b+"b"},rvalue:!0,count:2,funcName:a+"eq"}),c[a+"seq"]=f({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+b+"s"},rvalue:!0,count:2,funcName:a+"seq"})}}();var l=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var a=0;a<l.length;++a){var b=l[a];c[b]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:b}),c[b+"eq"]=f({args:["array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"})}}();var m=["max","min","atan2","pow"];!function(){for(var a=0;a<m.length;++a){var b=m[a];c[b]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:b}),c[b+"s"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:b+"s"}),c[b+"eq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"eq"}),c[b+"seq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"seq"})}}();var n=["atan2","pow"];!function(){for(var a=0;a<n.length;++a){var b=n[a];c[b+"op"]=f({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:b+"op"}),c[b+"ops"]=f({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:b+"ops"}),c[b+"opeq"]=f({args:["array","array"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opeq"}),c[b+"opseq"]=f({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+b,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:b+"opseq"})}}(),c.any=g({args:["array"],pre:h,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),c.all=g({args:["array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),c.sum=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),c.prod=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),c.norm2squared=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),c.norm2=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),c.norminf=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),c.norm1=g({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),c.sup=g({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.inf=g({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),c.argmin=g({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.argmax=g({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),c.random=f({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),c.assign=f({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),c.assigns=f({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),c.equals=g({args:["array","array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":983}],983:[function(a,b,c){arguments[4][290][0].apply(c,arguments)},{"./lib/thunk.js":985,dup:290}],984:[function(a,b,c){arguments[4][291][0].apply(c,arguments)},{dup:291,uniq:986}],985:[function(a,b,c){arguments[4][292][0].apply(c,arguments)},{"./compile.js":984,dup:292}],986:[function(a,b,c){arguments[4][69][0].apply(c,arguments)},{dup:69}],987:[function(a,b,c){function d(a,b){return a[0]-b[0]}function e(){var a,b=this.stride,c=new Array(b.length);for(a=0;a<c.length;++a)c[a]=[Math.abs(b[a]),a];c.sort(d);var e=new Array(c.length);for(a=0;a<e.length;++a)e[a]=c[a][1];return e}function f(a,b){var c=["View",b,"d",a].join("");b<0&&(c="View_Nil"+a);var d="generic"===a;if(b===-1){var f="function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+c+"(a){return new "+c+"(a);}",g=new Function(f);return g()}if(0===b){var f="function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+a+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+c+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}",g=new Function("TrivialArray",f);return g(l[a][0])}var f=["'use strict'"],h=i(b),j=h.map(function(a){return"i"+a}),k="this.offset+"+h.map(function(a){return"this.stride["+a+"]*i"+a}).join("+"),m=h.map(function(a){return"b"+a}).join(","),n=h.map(function(a){return"c"+a}).join(",");f.push("function "+c+"(a,"+m+","+n+",d){this.data=a","this.shape=["+m+"]","this.stride=["+n+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+a+"'","proto.dimension="+b),f.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+h.map(function(a){return"this.shape["+a+"]"}).join("*"),"}})"),1===b?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),b<4?(f.push("function "+c+"_order(){"),2===b?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===b&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})")),f.push("proto.set=function "+c+"_set("+j.join(",")+",v){"),d?f.push("return this.data.set("+k+",v)}"):f.push("return this.data["+k+"]=v}"),f.push("proto.get=function "+c+"_get("+j.join(",")+"){"),d?f.push("return this.data.get("+k+")}"):f.push("return this.data["+k+"]}"),f.push("proto.index=function "+c+"_index(",j.join(),"){return "+k+"}"),f.push("proto.hi=function "+c+"_hi("+j.join(",")+"){return new "+c+"(this.data,"+h.map(function(a){return["(typeof i",a,"!=='number'||i",a,"<0)?this.shape[",a,"]:i",a,"|0"].join("")}).join(",")+","+h.map(function(a){return"this.stride["+a+"]"}).join(",")+",this.offset)}");var o=h.map(function(a){return"a"+a+"=this.shape["+a+"]"}),p=h.map(function(a){return"c"+a+"=this.stride["+a+"]"});f.push("proto.lo=function "+c+"_lo("+j.join(",")+"){var b=this.offset,d=0,"+o.join(",")+","+p.join(","));for(var q=0;q<b;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){d=i"+q+"|0;b+=c"+q+"*d;a"+q+"-=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a;
}).join(",")+","+h.map(function(a){return"c"+a}).join(",")+",b)}"),f.push("proto.step=function "+c+"_step("+j.join(",")+"){var "+h.map(function(a){return"a"+a+"=this.shape["+a+"]"}).join(",")+","+h.map(function(a){return"b"+a+"=this.stride["+a+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var q=0;q<b;++q)f.push("if(typeof i"+q+"==='number'){d=i"+q+"|0;if(d<0){c+=b"+q+"*(a"+q+"-1);a"+q+"=ceil(-a"+q+"/d)}else{a"+q+"=ceil(a"+q+"/d)}b"+q+"*=d}");f.push("return new "+c+"(this.data,"+h.map(function(a){return"a"+a}).join(",")+","+h.map(function(a){return"b"+a}).join(",")+",c)}");for(var r=new Array(b),s=new Array(b),q=0;q<b;++q)r[q]="a[i"+q+"]",s[q]="b[i"+q+"]";f.push("proto.transpose=function "+c+"_transpose("+j+"){"+j.map(function(a,b){return a+"=("+a+"===undefined?"+b+":"+a+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+r.join(",")+","+s.join(",")+",this.offset)}"),f.push("proto.pick=function "+c+"_pick("+j+"){var a=[],b=[],c=this.offset");for(var q=0;q<b;++q)f.push("if(typeof i"+q+"==='number'&&i"+q+">=0){c=(c+this.stride["+q+"]*i"+q+")|0}else{a.push(this.shape["+q+"]);b.push(this.stride["+q+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),f.push("return function construct_"+c+"(data,shape,stride,offset){return new "+c+"(data,"+h.map(function(a){return"shape["+a+"]"}).join(",")+","+h.map(function(a){return"stride["+a+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",f.join("\n"));return g(l[a],e)}function g(a){if(j(a))return"buffer";if(k)switch(Object.prototype.toString.call(a)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(a)?"array":"generic"}function h(a,b,c,d){if(void 0===a){var e=l.array[0];return e([])}"number"==typeof a&&(a=[a]),void 0===b&&(b=[a.length]);var h=b.length;if(void 0===c){c=new Array(h);for(var i=h-1,j=1;i>=0;--i)c[i]=j,j*=b[i]}if(void 0===d){d=0;for(var i=0;i<h;++i)c[i]<0&&(d-=(b[i]-1)*c[i])}for(var k=g(a),m=l[k];m.length<=h+1;)m.push(f(k,m.length-1));var e=m[h+1];return e(a,b,c,d)}var i=a("iota-array"),j=a("is-buffer"),k="undefined"!=typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};b.exports=h},{"iota-array":988,"is-buffer":989}],988:[function(a,b,c){"use strict";function d(a){for(var b=new Array(a),c=0;c<a;++c)b[c]=c;return b}b.exports=d},{}],989:[function(a,b,c){b.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],990:[function(a,b,c){(function(a){b.exports=a.performance&&a.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],991:[function(a,b,c){arguments[4][36][0].apply(c,arguments)},{dup:36}],992:[function(a,b,c){arguments[4][37][0].apply(c,arguments)},{dup:37,"two-product":995,"two-sum":991}],993:[function(a,b,c){arguments[4][333][0].apply(c,arguments)},{dup:333}],994:[function(a,b,c){arguments[4][38][0].apply(c,arguments)},{dup:38}],995:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{dup:39}],996:[function(a,b,c){"use strict";function d(a,b){for(var c=new Array(a.length-1),d=1;d<a.length;++d)for(var e=c[d-1]=new Array(a.length-1),f=0,g=0;f<a.length;++f)f!==b&&(e[g++]=a[d][f]);return c}function e(a){for(var b=new Array(a),c=0;c<a;++c){b[c]=new Array(a);for(var d=0;d<a;++d)b[c][d]=["m",d,"[",a-c-1,"]"].join("")}return b}function f(a){return 1&a?"-":""}function g(a){if(1===a.length)return a[0];if(2===a.length)return["sum(",a[0],",",a[1],")"].join("");var b=a.length>>1;return["sum(",g(a.slice(0,b)),",",g(a.slice(b)),")"].join("")}function h(a){if(2===a.length)return[["sum(prod(",a[0][0],",",a[1][1],"),prod(-",a[0][1],",",a[1][0],"))"].join("")];for(var b=[],c=0;c<a.length;++c)b.push(["scale(",g(h(d(a,c))),",",f(c),a[0][c],")"].join(""));return b}function i(a){for(var b=[],c=[],f=e(a),i=[],j=0;j<a;++j)0===(1&j)?b.push.apply(b,h(d(f,j))):c.push.apply(c,h(d(f,j))),i.push("m"+j);var k=g(b),p=g(c),q="orientation"+a+"Exact",r=["function ",q,"(",i.join(),"){var p=",k,",n=",p,",d=sub(p,n);return d[d.length-1];};return ",q].join(""),s=new Function("sum","prod","scale","sub",r);return s(m,l,n,o)}function j(a){var b=v[a.length];return b||(b=v[a.length]=i(a.length)),b.apply(void 0,a)}function k(){for(;v.length<=p;)v.push(i(v.length));for(var a=[],c=["slow"],d=0;d<=p;++d)a.push("a"+d),c.push("o"+d);for(var e=["function getOrientation(",a.join(),"){switch(arguments.length){case 0:case 1:return 0;"],d=2;d<=p;++d)e.push("case ",d,":return o",d,"(",a.slice(0,d).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),c.push(e.join(""));var f=Function.apply(void 0,c);b.exports=f.apply(void 0,[j].concat(v));for(var d=0;d<=p;++d)b.exports[d]=v[d]}var l=a("two-product"),m=a("robust-sum"),n=a("robust-scale"),o=a("robust-subtract"),p=5,q=1.1102230246251565e-16,r=(3+16*q)*q,s=(7+56*q)*q,t=i(3),u=i(4),v=[function(){return 0},function(){return 0},function(a,b){return b[0]-a[0]},function(a,b,c){var d,e=(a[1]-c[1])*(b[0]-c[0]),f=(a[0]-c[0])*(b[1]-c[1]),g=e-f;if(e>0){if(f<=0)return g;d=e+f}else{if(!(e<0))return g;if(f>=0)return g;d=-(e+f)}var h=r*d;return g>=h||g<=-h?g:t(a,b,c)},function(a,b,c,d){var e=a[0]-d[0],f=b[0]-d[0],g=c[0]-d[0],h=a[1]-d[1],i=b[1]-d[1],j=c[1]-d[1],k=a[2]-d[2],l=b[2]-d[2],m=c[2]-d[2],n=f*j,o=g*i,p=g*h,q=e*j,r=e*i,t=f*h,v=k*(n-o)+l*(p-q)+m*(r-t),w=(Math.abs(n)+Math.abs(o))*Math.abs(k)+(Math.abs(p)+Math.abs(q))*Math.abs(l)+(Math.abs(r)+Math.abs(t))*Math.abs(m),x=s*w;return v>x||-v>x?v:u(a,b,c,d)}];k()},{"robust-scale":992,"robust-subtract":993,"robust-sum":994,"two-product":995}],997:[function(a,b,c){"use strict";function d(a){return a.split("").map(function(a){return a in e?e[a]:""}).join("")}b.exports=d;var e={" ":" ",0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"","+":"","-":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:""}},{}],998:[function(b,c,d){!function(){function b(a,c){if(a=a?a:"",c=c||{},a instanceof b)return a;if(!(this instanceof b))return new b(a,c);var e=d(a);this._originalInput=a,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=P(100*this._a)/100,this._format=c.format||e.format,this._gradientType=c.gradientType,this._r<1&&(this._r=P(this._r)),this._g<1&&(this._g=P(this._g)),this._b<1&&(this._b=P(this._b)),this._ok=e.ok,this._tc_id=N++}function d(a){var b={r:0,g:0,b:0},c=1,d=!1,f=!1;return"string"==typeof a&&(a=J(a)),"object"==typeof a&&(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b")?(b=e(a.r,a.g,a.b),d=!0,f="%"===String(a.r).substr(-1)?"prgb":"rgb"):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")?(a.s=G(a.s),a.v=G(a.v),b=i(a.h,a.s,a.v),d=!0,f="hsv"):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(a.s=G(a.s),a.l=G(a.l),b=g(a.h,a.s,a.l),d=!0,f="hsl"),a.hasOwnProperty("a")&&(c=a.a)),c=z(c),{ok:d,format:a.format||f,r:Q(255,R(b.r,0)),g:Q(255,R(b.g,0)),b:Q(255,R(b.b,0)),a:c}}function e(a,b,c){return{r:255*A(a,255),g:255*A(b,255),b:255*A(c,255)}}function f(a,b,c){a=A(a,255),b=A(b,255),c=A(c,255);var d,e,f=R(a,b,c),g=Q(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(b<c?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}}function g(a,b,c){function d(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(a=A(a,360),b=A(b,100),c=A(c,100),0===b)e=f=g=c;else{var h=c<.5?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return{r:255*e,g:255*f,b:255*g}}function h(a,b,c){a=A(a,255),b=A(b,255),c=A(c,255);var d,e,f=R(a,b,c),g=Q(a,b,c),h=f,i=f-g;if(e=0===f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(b<c?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,v:h}}function i(a,b,c){a=6*A(a,360),b=A(b,100),c=A(c,100);var d=O.floor(a),e=a-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=d%6,j=[c,g,f,f,h,c][i],k=[h,c,c,g,f,f][i],l=[f,f,h,c,c,g][i];return{r:255*j,g:255*k,b:255*l}}function j(a,b,c,d){var e=[F(P(a).toString(16)),F(P(b).toString(16)),F(P(c).toString(16))];return d&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function k(a,b,c,d){var e=[F(H(d)),F(P(a).toString(16)),F(P(b).toString(16)),F(P(c).toString(16))];return e.join("")}function l(a,c){c=0===c?0:c||10;var d=b(a).toHsl();return d.s-=c/100,d.s=B(d.s),b(d)}function m(a,c){c=0===c?0:c||10;var d=b(a).toHsl();return d.s+=c/100,d.s=B(d.s),b(d)}function n(a){return b(a).desaturate(100)}function o(a,c){c=0===c?0:c||10;var d=b(a).toHsl();return d.l+=c/100,d.l=B(d.l),b(d)}function p(a,c){c=0===c?0:c||10;var d=b(a).toRgb();return d.r=R(0,Q(255,d.r-P(255*-(c/100)))),d.g=R(0,Q(255,d.g-P(255*-(c/100)))),d.b=R(0,Q(255,d.b-P(255*-(c/100)))),b(d)}function q(a,c){c=0===c?0:c||10;var d=b(a).toHsl();return d.l-=c/100,d.l=B(d.l),b(d)}function r(a,c){var d=b(a).toHsl(),e=(P(d.h)+c)%360;return d.h=e<0?360+e:e,b(d)}function s(a){var c=b(a).toHsl();return c.h=(c.h+180)%360,b(c)}function t(a){var c=b(a).toHsl(),d=c.h;return[b(a),b({h:(d+120)%360,s:c.s,l:c.l}),b({h:(d+240)%360,s:c.s,l:c.l})]}function u(a){var c=b(a).toHsl(),d=c.h;return[b(a),b({h:(d+90)%360,s:c.s,l:c.l}),b({h:(d+180)%360,s:c.s,l:c.l}),b({h:(d+270)%360,s:c.s,l:c.l})]}function v(a){var c=b(a).toHsl(),d=c.h;return[b(a),b({h:(d+72)%360,s:c.s,l:c.l}),b({h:(d+216)%360,s:c.s,l:c.l})]}function w(a,c,d){c=c||6,d=d||30;var e=b(a).toHsl(),f=360/d,g=[b(a)];for(e.h=(e.h-(f*c>>1)+720)%360;--c;)e.h=(e.h+f)%360,g.push(b(e));return g}function x(a,c){c=c||6;for(var d=b(a).toHsv(),e=d.h,f=d.s,g=d.v,h=[],i=1/c;c--;)h.push(b({h:e,s:f,v:g})),g=(g+i)%1;return h}function y(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}function z(a){return a=parseFloat(a),(isNaN(a)||a<0||a>1)&&(a=1),a}function A(a,b){D(a)&&(a="100%");var c=E(a);return a=Q(b,R(0,parseFloat(a))),c&&(a=parseInt(a*b,10)/100),O.abs(a-b)<1e-6?1:a%b/parseFloat(b)}function B(a){return Q(1,R(0,a))}function C(a){return parseInt(a,16)}function D(a){return"string"==typeof a&&a.indexOf(".")!=-1&&1===parseFloat(a)}function E(a){return"string"==typeof a&&a.indexOf("%")!=-1}function F(a){return 1==a.length?"0"+a:""+a}function G(a){return a<=1&&(a=100*a+"%"),a}function H(a){return Math.round(255*parseFloat(a)).toString(16)}function I(a){return C(a)/255}function J(a){a=a.replace(L,"").replace(M,"").toLowerCase();var b=!1;if(T[a])a=T[a],b=!0;else if("transparent"==a)return{r:0,g:0,b:0,a:0,format:"name"};var c;return(c=V.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=V.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=V.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=V.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=V.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=V.hsva.exec(a))?{h:c[1],s:c[2],v:c[3],a:c[4]}:(c=V.hex8.exec(a))?{a:I(c[1]),r:C(c[2]),g:C(c[3]),b:C(c[4]),format:b?"name":"hex8"}:(c=V.hex6.exec(a))?{r:C(c[1]),g:C(c[2]),b:C(c[3]),format:b?"name":"hex"}:!!(c=V.hex3.exec(a))&&{r:C(c[1]+""+c[1]),g:C(c[2]+""+c[2]),b:C(c[3]+""+c[3]),format:b?"name":"hex"}}function K(a){var b,c;return a=a||{level:"AA",size:"small"},b=(a.level||"AA").toUpperCase(),c=(a.size||"small").toLowerCase(),"AA"!==b&&"AAA"!==b&&(b="AA"),"small"!==c&&"large"!==c&&(c="small"),{level:b,size:c}}var L=/^[\s,#]+/,M=/\s+$/,N=0,O=Math,P=O.round,Q=O.min,R=O.max,S=O.random;b.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var a=this.toRgb();return(299*a.r+587*a.g+114*a.b)/1e3},getLuminance:function(){var a,b,c,d,e,f,g=this.toRgb();return a=g.r/255,b=g.g/255,c=g.b/255,d=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),e=b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4),f=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4),.2126*d+.7152*e+.0722*f},setAlpha:function(a){return this._a=z(a),this._roundA=P(100*this._a)/100,this},toHsv:function(){var a=h(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=h(this._r,this._g,this._b),b=P(360*a.h),c=P(100*a.s),d=P(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHsl:function(){var a=f(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=f(this._r,this._g,this._b),b=P(360*a.h),c=P(100*a.s),d=P(100*a.l);return 1==this._a?"hsl("+b+", "+c+"%, "+d+"%)":"hsla("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHex:function(a){return j(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(){return k(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:P(this._r),g:P(this._g),b:P(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+P(this._r)+", "+P(this._g)+", "+P(this._b)+")":"rgba("+P(this._r)+", "+P(this._g)+", "+P(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:P(100*A(this._r,255))+"%",g:P(100*A(this._g,255))+"%",b:P(100*A(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+P(100*A(this._r,255))+"%, "+P(100*A(this._g,255))+"%, "+P(100*A(this._b,255))+"%)":"rgba("+P(100*A(this._r,255))+"%, "+P(100*A(this._g,255))+"%, "+P(100*A(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(U[j(this._r,this._g,this._b,!0)]||!1)},toFilter:function(a){var c="#"+k(this._r,this._g,this._b,this._a),d=c,e=this._gradientType?"GradientType = 1, ":"";if(a){var f=b(a);d=f.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+e+"startColorstr="+c+",endColorstr="+d+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,d=this._a<1&&this._a>=0,e=!b&&d&&("hex"===a||"hex6"===a||"hex3"===a||"name"===a);return e?"name"===a&&0===this._a?this.toName():this.toRgbString():("rgb"===a&&(c=this.toRgbString()),"prgb"===a&&(c=this.toPercentageRgbString()),"hex"!==a&&"hex6"!==a||(c=this.toHexString()),"hex3"===a&&(c=this.toHexString(!0)),"hex8"===a&&(c=this.toHex8String()),"name"===a&&(c=this.toName()),"hsl"===a&&(c=this.toHslString()),"hsv"===a&&(c=this.toHsvString()),c||this.toHexString())},_applyModification:function(a,b){var c=a.apply(null,[this].concat([].slice.call(b)));return this._r=c._r,this._g=c._g,this._b=c._b,this.setAlpha(c._a),this},lighten:function(){return this._applyModification(o,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(q,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(n,arguments)},spin:function(){return this._applyModification(r,arguments)},_applyCombination:function(a,b){return a.apply(null,[this].concat([].slice.call(b)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(s,arguments)},monochromatic:function(){return this._applyCombination(x,arguments)},splitcomplement:function(){return this._applyCombination(v,arguments)},triad:function(){return this._applyCombination(t,arguments)},tetrad:function(){return this._applyCombination(u,arguments)}},b.fromRatio=function(a,c){if("object"==typeof a){var d={};for(var e in a)a.hasOwnProperty(e)&&("a"===e?d[e]=a[e]:d[e]=G(a[e]));a=d}return b(a,c)},b.equals=function(a,c){return!(!a||!c)&&b(a).toRgbString()==b(c).toRgbString()},b.random=function(){return b.fromRatio({r:S(),g:S(),b:S()})},b.mix=function(a,c,d){d=0===d?0:d||50;var e,f=b(a).toRgb(),g=b(c).toRgb(),h=d/100,i=2*h-1,j=g.a-f.a;e=i*j==-1?i:(i+j)/(1+i*j),e=(e+1)/2;var k=1-e,l={r:g.r*e+f.r*k,g:g.g*e+f.g*k,b:g.b*e+f.b*k,a:g.a*h+f.a*(1-h)};return b(l)},b.readability=function(a,c){var d=b(a),e=b(c);return(Math.max(d.getLuminance(),e.getLuminance())+.05)/(Math.min(d.getLuminance(),e.getLuminance())+.05)},b.isReadable=function(a,c,d){var e,f,g=b.readability(a,c);switch(f=!1,e=K(d),e.level+e.size){case"AAsmall":case"AAAlarge":f=g>=4.5;break;case"AAlarge":f=g>=3;break;case"AAAsmall":f=g>=7}return f},b.mostReadable=function(a,c,d){var e,f,g,h,i=null,j=0;d=d||{},f=d.includeFallbackColors,g=d.level,h=d.size;for(var k=0;k<c.length;k++)e=b.readability(a,c[k]),e>j&&(j=e,i=b(c[k]));return b.isReadable(a,i,{level:g,size:h})||!f?i:(d.includeFallbackColors=!1,b.mostReadable(a,["#fff","#000"],d))};var T=b.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=b.hexNames=y(T),V=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+e),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof c&&c.exports?c.exports=b:"function"==typeof a&&a.amd?a(function(){return b}):window.tinycolor=b}()},{}],999:[function(b,c,d){!function(){function b(a,b){function c(b){var c,d=a.arcs[b<0?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],b<0?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[a<0?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[c<0?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[a<0?~a:a]||h.push([a])}),h}function d(a,c,d){function e(a){var b=a<0?~a:a;(k[b]||(k[b]=[])).push({i:a,g:j})}function f(a){a.forEach(e)}function g(a){a.forEach(f)}function h(a){"GeometryCollection"===a.type?a.geometries.forEach(h):a.type in l&&(j=a,l[a.type](a.arcs))}var i=[];if(arguments.length>1){var j,k=[],l={LineString:f,MultiLineString:g,Polygon:g,MultiPolygon:function(a){a.forEach(g)}};h(c),k.forEach(arguments.length<3?function(a){i.push(a[0].i)}:function(a){d(a[0].g,a[a.length-1].g)&&i.push(a[0].i)})}else for(var m=0,n=a.arcs.length;m<n;++m)i.push(m);return{type:"MultiLineString",arcs:b(a,i)}}function e(a,c){function d(a){a.forEach(function(b){b.forEach(function(b){(f[b=b<0?~b:b]||(f[b]=[])).push(a)})}),g.push(a)}function e(b){return m(h(a,{type:"Polygon",arcs:[b]}).coordinates[0])>0}var f={},g=[],i=[];return c.forEach(function(a){"Polygon"===a.type?d(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(d)}),g.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,i.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){f[a<0?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),g.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:i.map(function(c){var d=[];if(c.forEach(function(a){a.forEach(function(a){a.forEach(function(a){f[a<0?~a:a].length<2&&d.push(a)})})}),d=b(a,d),(n=d.length)>1)for(var g,h=e(c[0][0]),i=0;i<n;++i)if(h===e(d[i])){g=d[0],d[0]=d[i],d[i]=g;break}return d})}}function f(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return g(a,b)})}:g(a,b)}function g(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:h(a,b)};return null==b.id&&delete c.id,c}function h(a,b){function c(a,b){b.length&&b.pop();for(var c,d=k[a<0?~a:a],e=0,f=d.length;e<f;++e)b.push(c=d[e].slice()),j(c,e);a<0&&i(b,f)}function d(a){return a=a.slice(),j(a,0),a}function e(a){for(var b=[],d=0,e=a.length;d<e;++d)c(a[d],b);return b.length<2&&b.push(b[0].slice()),b}function f(a){for(var b=e(a);b.length<4;)b.push(b[0].slice());return b}function g(a){return a.map(f)}function h(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(h)}:b in l?{type:b,coordinates:l[b](a)}:null}var j=r(a.transform),k=a.arcs,l={Point:function(a){return d(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(d)},LineString:function(a){return e(a.arcs)},MultiLineString:function(a){return a.arcs.map(e)},Polygon:function(a){return g(a.arcs)},MultiPolygon:function(a){return a.arcs.map(g)}};return h(b)}function i(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function j(a,b){for(var c=0,d=a.length;c<d;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function k(a){function b(a,b){a.forEach(function(a){a<0&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in g&&g[a.type](a.arcs,b)}var e={},f=a.map(function(){return[]}),g={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var h in e)for(var i=e[h],k=i.length,l=0;l<k;++l)for(var m=l+1;m<k;++m){var n,o=i[l],p=i[m];(n=f[o])[h=j(n,p)]!==p&&n.splice(h,0,p),(n=f[p])[h=j(n,o)]!==o&&n.splice(h,0,o)}return f}function l(a,b){function c(a){f.remove(a),a[1][2]=b(a),f.push(a)}var d=r(a.transform),e=s(a.transform),f=q();return b||(b=o),a.arcs.forEach(function(a){for(var g,h,i=[],j=0,k=0,l=a.length;k<l;++k)h=a[k],d(a[k]=[h[0],h[1],1/0],k);for(var k=1,l=a.length-1;k<l;++k)g=a.slice(k-1,k+2),g[1][2]=b(g),i.push(g),f.push(g);for(var k=0,l=i.length;k<l;++k)g=i[k],g.previous=i[k-1],g.next=i[k+1];for(;g=f.pop();){var m=g.previous,n=g.next;g[1][2]<j?g[1][2]=j:j=g[1][2],m&&(m.next=n,m[2]=g[2],c(m)),n&&(n.previous=m,n[0]=g[0],c(n))}a.forEach(e)}),a}function m(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return.5*f}function o(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function p(a,b){return a[1][2]-b[1][2]}function q(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(p(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(f<e&&p(d[f],h)<0&&(h=d[g=f]),c<e&&p(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(e<=0)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;if(d[g]===c)return g!==--e&&(f=d[e],(p(f,c)<0?a:b)(d[f._=g]=f,g)),g},c}function r(a){if(!a)return t;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0),a[0]=(b+=a[0])*d+f,a[1]=(c+=a[1])*e+g}}function s(a){if(!a)return t;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0);var i=(a[0]-f)/d|0,j=(a[1]-g)/e|0;a[0]=i-b,a[1]=j-c,b=i,c=j}}function t(){}var u={version:"1.6.19",mesh:function(a){return h(a,d.apply(this,arguments))},meshArcs:d,merge:function(a){return h(a,e.apply(this,arguments))},mergeArcs:e,feature:f,neighbors:k,presimplify:l};"function"==typeof a&&a.amd?a(u):"object"==typeof c&&c.exports?c.exports=u:this.topojson=u}()},{}],1e3:[function(a,b,c){b.exports={name:"plotly.js",version:"1.4.1",description:"The open source javascript graphing library that powers plotly",license:"MIT",main:"./src/index.js",webpack:"./dist/plotly.min.js",repository:{type:"git",url:"https://github.com/plotly/plotly.js.git"},bugs:{url:"https://github.com/plotly/plotly.js/issues"},author:"Plotly, Inc.",keywords:["graphing","plotting","data","visualization","plotly"],scripts:{preprocess:"node tasks/preprocess.js",bundle:"node tasks/bundle.js",header:"node tasks/header.js",build:"npm run preprocess && npm run bundle && npm run header",cibuild:"node tasks/cibundle.js",watch:"node tasks/watch_plotly.js",lint:"cd src && jshint . || true","test-jasmine":"karma start test/jasmine/karma.conf.js","citest-jasmine":"karma start test/jasmine/karma.ciconf.js","test-image":"./tasks/test_image.sh","test-syntax":"node test/syntax_test.js",test:"npm run test-jasmine && npm test-image","start-test_dashboard":"node devtools/test_dashboard/server.js","start-image_viewer":"node devtools/image_viewer/server.js",baseline:"./tasks/baseline.sh",version:"npm run build && git add -A dist",postversion:"git push && git push --tags"},dependencies:{"3d-view":"^2.0.0","alpha-shape":"^1.0.0",arraytools:"^1.0.0","convex-hull":"^1.0.3",d3:"3.5.6","delaunay-triangulate":"^1.1.6","es6-promise":"^3.0.2","fast-isnumeric":"^1.1.1","fs-extra":"^0.26.2","gl-error2d":"^1.0.0","gl-error3d":"^1.0.0","gl-line2d":"^1.2.1","gl-line3d":"^1.0.1","gl-mat4":"^1.1.2","gl-mesh3d":"^1.0.4","gl-plot2d":"^1.1.6","gl-plot3d":"^1.3.0","gl-scatter2d":"^1.0.5","gl-scatter2d-fancy":"^1.1.1","gl-scatter3d":"^1.0.4","gl-select-box":"^1.0.1","gl-spikes2d":"^1.0.1","gl-surface3d":"^1.1.0","mouse-change":"^1.1.1","mouse-wheel":"^1.0.2",ndarray:"^1.0.16","ndarray-fill":"^1.0.1","ndarray-homography":"^1.0.0","ndarray-ops":"^1.2.2","right-now":"^1.0.0","robust-orientation":"^1.1.3","sane-topojson":"^1.2.0","superscript-text":"^1.0.0",tinycolor2:"1.1.2",topojson:"^1.6.19"},devDependencies:{brfs:"^1.4.1",browserify:"^12.0.1","browserify-transform-tools":"^1.5.0",ecstatic:"^1.2.0",falafel:"^1.2.0",glob:"^6.0.1","jasmine-core":"^2.3.4",jshint:"^2.8.0",karma:"^0.13.15","karma-browserify":"^4.4.1","karma-chrome-launcher":"^0.2.1","karma-coverage":"^0.5.3","karma-firefox-launcher":"^0.1.6","karma-jasmine":"^0.3.6","node-sass":"^3.4.1",open:"0.0.5","prepend-file":"^1.3.0",prettysize:"0.0.3",through2:"^2.0.0","uglify-js":"^2.5.0",watchify:"^3.6.0",xml2js:"^0.4.15"}}},{}],1001:[function(a,b,c){b.exports=["",{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0},{path:"M2,2V-2H-2V2Z",backoff:0}]},{}],1002:[function(a,b,c){var d=a("../../plotly"),e=a("./arrow_paths"),f=a("../../plots/font_attributes"),g=a("../../lib/extend").extendFlat;b.exports={_isLinkedToArray:!0,text:{valType:"string"},textangle:{valType:"angle",dflt:0},font:g({},f,{}),opacity:{valType:"number",min:0,max:1,dflt:1},align:{valType:"enumerated",values:["left","center","right"],dflt:"center"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)"},borderpad:{valType:"number",min:0,dflt:1},borderwidth:{valType:"number",min:0,dflt:1},showarrow:{valType:"boolean",dflt:!0},arrowcolor:{valType:"color"},arrowhead:{valType:"integer",min:0,max:e.length,dflt:1},arrowsize:{valType:"number",min:.3,dflt:1},arrowwidth:{valType:"number",min:.1},ax:{valType:"number",dflt:-10},ay:{valType:"number",dflt:-30},xref:{valType:"enumerated",values:["paper",d.Plots.subplotsRegistry.cartesian.idRegex.x.toString()]},x:{valType:"number"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yref:{valType:"enumerated",values:["paper",d.Plots.subplotsRegistry.cartesian.idRegex.y.toString()]},y:{valType:"number"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto"},_deprecated:{ref:{valType:"string"}}}},{"../../lib/extend":1049,"../../plotly":1070,"../../plots/font_attributes":1079,"./arrow_paths":1001}],1003:[function(a,b,c){"use strict";function d(a,b){function c(b,c){return g.Lib.coerce(a,d,j.layoutAttributes,b,c)}var d={};c("opacity"),c("align"),c("bgcolor");var e=c("bordercolor"),f=g.Color.opacity(e);c("borderpad");var h=c("borderwidth"),i=c("showarrow");i&&(c("arrowcolor",f?d.bordercolor:g.Color.defaultLine),c("arrowhead"),c("arrowsize"),c("arrowwidth",2*(f&&h||1)),c("ax"),c("ay"),g.Lib.noneOrAll(a,d,["ax","ay"])),c("text",i?"&nbsp;":"new text"),c("textangle"),g.Lib.coerceFont(c,"font",b.font);for(var k=["x","y"],l=0;l<2;l++){var m=k[l],n={_fullLayout:b},o=g.Axes.coerceRef(a,d,n,m),p=.5;if("paper"!==o){var q=g.Axes.getFromId(n,o);if(p=q.range[0]+p*(q.range[1]-q.range[0]),["date","category"].indexOf(q.type)!==-1&&"string"==typeof a[m]){
var r;"date"===q.type?(r=g.Lib.dateTime2ms(a[m]),r!==!1&&(a[m]=r)):(q._categories||[]).length&&(r=q._categories.indexOf(a[m]),r!==-1&&(a[m]=r))}}c(m,p),i||c(m+"anchor")}return g.Lib.noneOrAll(a,d,["x","y"]),d}function e(a){var b=a._fullLayout;b.annotations.forEach(function(b){var c=g.Axes.getFromId(a,b.xref),d=g.Axes.getFromId(a,b.yref);if(c||d){var e=(b._xsize||0)/2,f=b._xshift||0,h=(b._ysize||0)/2,i=b._yshift||0,j=e-f,k=e+f,l=h-i,m=h+i;if(b.showarrow){var n=3*b.arrowsize*b.arrowwidth;j=Math.max(j,n),k=Math.max(k,n),l=Math.max(l,n),m=Math.max(m,n)}c&&c.autorange&&g.Axes.expand(c,[c.l2c(b.x)],{ppadplus:k,ppadminus:j}),d&&d.autorange&&g.Axes.expand(d,[d.l2c(b.y)],{ppadplus:m,ppadminus:l})}})}function f(a,b,c,d,e,f,g,h){var i=c-a,j=e-a,k=g-e,l=d-b,m=f-b,n=h-f,o=i*n-k*l;if(0===o)return null;var p=(j*n-k*m)/o,q=(j*l-i*m)/o;return q<0||q>1||p<0||p>1?null:{x:a+i*p,y:b+l*p}}var g=a("../../plotly"),h=a("d3"),i=a("fast-isnumeric"),j=b.exports={};j.ARROWPATHS=a("./arrow_paths"),j.layoutAttributes=a("./attributes"),j.supplyLayoutDefaults=function(a,b){for(var c=a.annotations||[],e=b.annotations=[],f=0;f<c.length;f++)e.push(d(c[f]||{},b))},j.drawAll=function(a){var b=a._fullLayout;b._infolayer.selectAll(".annotation").remove();for(var c=0;c<b.annotations.length;c++)j.draw(a,c);return g.Plots.previousPromises(a)},j.add=function(a){var b=a._fullLayout.annotations.length;g.relayout(a,"annotations["+b+"]","add")},j.draw=function(a,b,c,e){function k(a){return a.call(g.Drawing.font,U).attr({"text-anchor":{left:"start",right:"end"}[I.align]||"middle"}),g.util.convertToTspans(a,l),a}function l(){function c(a,b){return"auto"===b&&(b=a<1/3?"left":a>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[b]}V.selectAll("tspan.line").attr({y:0,x:0});var d=P.select(".annotation-math-group"),e=!d.empty(),i=g.Drawing.bBox((e?d:V).node()),k=i.width,l=i.height,m=Math.round(k+2*S),n=Math.round(l+2*S);I._w=k,I._h=l;var p=!1;if(["x","y"].forEach(function(b){var d,e=g.Axes.getFromId(a,I[b+"ref"]||b),f=(M+("x"===b?0:90))*Math.PI/180,h=m*Math.abs(Math.cos(f))+n*Math.abs(Math.sin(f)),i=I[b+"anchor"];if(e){if(!e.autorange&&(I[b]-e.range[0])*(I[b]-e.range[1])>0)return void(p=!0);L[b]=e._offset+e.l2p(I[b]),d=.5}else d=I[b],"y"===b&&(d=1-d),L[b]="x"===b?w.l+w.w*d:w.t+w.h*d;var j=0;j=I.showarrow?I["a"+b]:h*c(d,i),L[b]+=j,I["_"+b+"type"]=e&&e.type,I["_"+b+"size"]=h,I["_"+b+"shift"]=j}),p)return void P.remove();var q,r;I.showarrow&&(q=g.Lib.constrain(L.x-I.ax,1,o.width-1),r=g.Lib.constrain(L.y-I.ay,1,o.height-1)),L.x=g.Lib.constrain(L.x,1,o.width-1),L.y=g.Lib.constrain(L.y,1,o.height-1);var s=S-i.top,t=S-i.left;e?d.select("svg").attr({x:S-1,y:S}):(V.attr({x:t,y:s}),V.selectAll("tspan.line").attr({y:s,x:t})),T.call(g.Drawing.setRect,Q/2,Q/2,m-Q,n-Q),P.call(g.Drawing.setRect,Math.round(L.x-m/2),Math.round(L.y-n/2),m,n);var u="annotations["+b+"]",v=function(c,d){h.select(a).selectAll('.annotation-arrow-g[data-index="'+b+'"]').remove();var e=L.x+c,i=L.y+d,k=g.Lib.rotationXYMatrix(M,e,i),l=g.Lib.apply2DTransform(k),m=g.Lib.apply2DTransform2(k),n=T.attr("width")/2,o=T.attr("height")/2,p=[[e-n,i-o,e-n,i+o],[e-n,i+o,e+n,i+o],[e+n,i+o,e+n,i-o],[e+n,i-o,e-n,i-o]].map(m);if(!p.reduce(function(a,b){return a^!!f(q,r,q+1e6,r+1e6,b[0],b[1],b[2],b[3])},!1)){p.forEach(function(a){var b=f(e,i,q,r,a[0],a[1],a[2],a[3]);b&&(e=b.x,i=b.y)});var s=I.arrowwidth,t=I.arrowcolor,v=N.append("g").style({opacity:g.Color.opacity(t)}).classed("annotation-arrow-g",!0).attr("data-index",String(b)),x=v.append("path").attr("d","M"+e+","+i+"L"+q+","+r).style("stroke-width",s+"px").call(g.Color.stroke,g.Color.rgb(t));j.arrowhead(x,I.arrowhead,"end",I.arrowsize);var y=v.append("path").classed("annotation",!0).classed("anndrag",!0).attr({"data-index":String(b),d:"M3,3H-3V-3H3ZM0,0L"+(e-q)+","+(i-r),transform:"translate("+q+","+r+")"}).style("stroke-width",s+6+"px").call(g.Color.stroke,"rgba(0,0,0,0)").call(g.Color.fill,"rgba(0,0,0,0)");if(a._context.editable){var z,A,B;g.Fx.dragElement({element:y.node(),prepFn:function(){A=Number(P.attr("x")),B=Number(P.attr("y")),z={},J&&J.autorange&&(z[J._name+".autorange"]=!0),K&&K.autorange&&(z[K._name+".autorange"]=!0)},moveFn:function(a,b){v.attr("transform","translate("+a+","+b+")");var c=l(A,B),d=c[0]+a,e=c[1]+b;P.call(g.Drawing.setPosition,d,e),z[u+".x"]=J?I.x+a/J._m:(q+a-w.l)/w.w,z[u+".y"]=K?I.y+b/K._m:1-(r+b-w.t)/w.h,O.attr({transform:"rotate("+M+","+d+","+e+")"})},doneFn:function(b){if(b){g.relayout(a,z);var c=document.querySelector(".js-notes-box-panel");c&&c.redraw(c.selectedObj)}}})}}};I.showarrow&&v(0,0);var x=g.Lib.rotationXYMatrix(M,L.x,L.y),y=g.Lib.apply2DTransform(x);if(a._context.editable){var z,A,B;g.Fx.dragElement({element:P.node(),prepFn:function(){z=Number(P.attr("x")),A=Number(P.attr("y")),B={}},moveFn:function(a,b){P.call(g.Drawing.setPosition,z+a,A+b);var c="pointer";if(I.showarrow)B[u+".ax"]=I.ax+a,B[u+".ay"]=I.ay+b,v(a,b);else{if(J)B[u+".x"]=I.x+a/J._m;else{var d=I._xsize/w.w,e=I.x+I._xshift/w.w-d/2;B[u+".x"]=g.Fx.dragAlign(e+a/w.w,d,0,1,I.xanchor)}if(K)B[u+".y"]=I.y+b/K._m;else{var f=I._ysize/w.h,h=I.y-I._yshift/w.h-f/2;B[u+".y"]=g.Fx.dragAlign(h-b/w.h,f,0,1,I.yanchor)}J&&K||(c=g.Fx.dragCursors(J?.5:B[u+".x"],K?.5:B[u+".y"],I.xanchor,I.yanchor))}var i=y(z,A),j=i[0]+a,k=i[1]+b;P.call(g.Drawing.setPosition,j,k),O.attr({transform:"rotate("+M+","+j+","+k+")"}),g.Fx.setCursor(P,c)},doneFn:function(b){if(g.Fx.setCursor(P),b){g.relayout(a,B);var c=document.querySelector(".js-notes-box-panel");c&&c.redraw(c.selectedObj)}}})}}var m,n=a.layout,o=a._fullLayout;if(!i(b)||b===-1){if(!b&&Array.isArray(e))return n.annotations=e,j.supplyLayoutDefaults(n,o),void j.drawAll(a);if("remove"===e)return delete n.annotations,o.annotations=[],void j.drawAll(a);if(c&&"add"!==e){for(m=0;m<o.annotations.length;m++)j.draw(a,m,c,e);return}b=o.annotations.length,o.annotations.push({})}if(!c&&e){if("remove"===e){for(o._infolayer.selectAll('.annotation[data-index="'+b+'"]').remove(),o.annotations.splice(b,1),n.annotations.splice(b,1),m=b;m<o.annotations.length;m++)o._infolayer.selectAll('.annotation[data-index="'+(m+1)+'"]').attr("data-index",String(m)),j.draw(a,m);return}if("add"===e||g.Lib.isPlainObject(e)){o.annotations.splice(b,0,{});var p=g.Lib.isPlainObject(e)?g.Lib.extendFlat({},e):{text:"New text"};for(n.annotations?n.annotations.splice(b,0,p):n.annotations=[p],m=o.annotations.length-1;m>b;m--)o._infolayer.selectAll('.annotation[data-index="'+(m-1)+'"]').attr("data-index",String(m)),j.draw(a,m)}}o._infolayer.selectAll('.annotation[data-index="'+b+'"]').remove();var q=n.annotations[b],r=o.annotations[b];if(q){var s={xref:q.xref,yref:q.yref},t={};"string"==typeof c&&c?t[c]=e:g.Lib.isPlainObject(c)&&(t=c);var u=Object.keys(t);for(m=0;m<u.length;m++){var v=u[m];g.Lib.nestedProperty(q,v).set(t[v])}var w=o._size,x=["x","y"];for(m=0;m<2;m++){var y=x[m];if(void 0===t[y]&&void 0!==q[y]){var z=g.Axes.getFromId(a,g.Axes.coerceRef(s,{},a,y)),A=g.Axes.getFromId(a,g.Axes.coerceRef(q,{},a,y)),B=q[y],C=r["_"+y+"type"];if(void 0!==t[y+"ref"]){var D="auto"===q[y+"anchor"],E="x"===y?w.w:w.h,F=(r["_"+y+"size"]||0)/(2*E);if(z&&A)B=(B-z.range[0])/(z.range[1]-z.range[0]),B=A.range[0]+B*(A.range[1]-A.range[0]);else if(z){if(B=(B-z.range[0])/(z.range[1]-z.range[0]),B=z.domain[0]+B*(z.domain[1]-z.domain[0]),D){var G=B+F,H=B-F;B+H<2/3?B=H:B+G>4/3&&(B=G)}}else A&&(D&&(B<1/3?B+=F:B>2/3&&(B-=F)),B=(B-A.domain[0])/(A.domain[1]-A.domain[0]),B=A.range[0]+B*(A.range[1]-A.range[0]))}A&&A===z&&C&&("log"===C&&"log"!==A.type?B=Math.pow(10,B):"log"!==C&&"log"===A.type&&(B=B>0?Math.log(B)/Math.LN10:void 0)),q[y]=B}}var I=d(q,o);o.annotations[b]=I;var J=g.Axes.getFromId(a,I.xref),K=g.Axes.getFromId(a,I.yref),L={x:0,y:0},M=+I.textangle||0,N=o._infolayer.append("g").classed("annotation",!0).attr("data-index",String(b)).style("opacity",I.opacity).on("click",function(){a._dragging=!1,a.emit("plotly_clickannotation",{index:b,annotation:q,fullAnnotation:I})}),O=N.append("g").classed("annotation-text-g",!0).attr("data-index",String(b)),P=O.append("svg").call(g.Drawing.setPosition,0,0),Q=I.borderwidth,R=I.borderpad,S=Q+R,T=P.append("rect").attr("class","bg").style("stroke-width",Q+"px").call(g.Color.stroke,I.bordercolor).call(g.Color.fill,I.bgcolor),U=I.font,V=P.append("text").classed("annotation",!0).attr("data-unformatted",I.text).text(I.text);a._context.editable?V.call(g.util.makeEditable,P).call(k).on("edit",function(c){I.text=c,this.attr({"data-unformatted":I.text}),this.call(k);var d={};d["annotations["+b+"].text"]=I.text,J&&J.autorange&&(d[J._name+".autorange"]=!0),K&&K.autorange&&(d[K._name+".autorange"]=!0),g.relayout(a,d)}):V.call(k),O.attr({transform:"rotate("+M+","+L.x+","+L.y+")"}).call(g.Drawing.setPosition,L.x,L.y)}},j.arrowhead=function(a,b,c,d){i(d)||(d=1);var e=a.node(),f=j.ARROWPATHS[b||0];if(f){"string"==typeof c&&c||(c="end");var k,l,m,n,o=(g.Drawing.getPx(a,"stroke-width")||1)*d,p=a.style("stroke")||g.Color.defaultLine,q=a.style("stroke-opacity")||1,r=c.indexOf("start")>=0,s=c.indexOf("end")>=0,t=f.backoff*o;if("line"===e.nodeName){if(k={x:+a.attr("x1"),y:+a.attr("y1")},l={x:+a.attr("x2"),y:+a.attr("y2")},m=Math.atan2(k.y-l.y,k.x-l.x),n=m+Math.PI,t){var u=t*Math.cos(m),v=t*Math.sin(m);r&&(k.x-=u,k.y-=v,a.attr({x1:k.x,y1:k.y})),s&&(l.x+=u,l.y+=v,a.attr({x2:l.x,y2:l.y}))}}else if("path"===e.nodeName){var w=e.getTotalLength(),x="";if(r){var y=e.getPointAtLength(0),z=e.getPointAtLength(.1);m=Math.atan2(y.y-z.y,y.x-z.x),k=e.getPointAtLength(Math.min(t,w)),t&&(x="0px,"+t+"px,")}if(s){var A=e.getPointAtLength(w),B=e.getPointAtLength(w-.1);if(n=Math.atan2(A.y-B.y,A.x-B.x),l=e.getPointAtLength(Math.max(0,w-t)),t){var C=x?2*t:t;x+=w-C+"px,"+w+"px"}}else x&&(x+=w+"px");x&&a.style("stroke-dasharray",x)}var D=function(c,d){b>5&&(d=0),h.select(e.parentElement).append("path").attr({"class":a.attr("class"),d:f.path,transform:"translate("+c.x+","+c.y+")rotate("+180*d/Math.PI+")scale("+o+")"}).style({fill:p,opacity:q,"stroke-width":0})};r&&D(k,m),s&&D(l,n)}},j.calcAutorange=function(a){var b=a._fullLayout,c=b.annotations;if(c.length&&a._fullData.length){var d={};c.forEach(function(a){d[a.xref]=!0,d[a.yref]=!0});var f=g.Axes.list(a).filter(function(a){return a.autorange&&d[a._id]});if(f.length)return g.Lib.syncOrAsync([j.drawAll,e],a)}}},{"../../plotly":1070,"./arrow_paths":1001,"./attributes":1002,d3:64,"fast-isnumeric":72}],1004:[function(a,b,c){c.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],c.defaultLine="#444",c.lightLine="#eee",c.background="#fff"},{}],1005:[function(a,b,c){"use strict";function d(a){if(f(a)||"string"!=typeof a)return a;var b=a.trim();if("rgb"!==b.substr(0,3))return a;var c=b.match(/^rgba?\s*\(([^()]*)\)$/);if(!c)return a;var d=c[1].trim().split(/\s*[\s,]\s*/),e="a"===b.charAt(3)&&4===d.length;if(!e&&3!==d.length)return a;for(var g=0;g<d.length;g++){if(!d[g].length)return a;if(d[g]=Number(d[g]),!(d[g]>=0))return a;if(3===g)d[g]>1&&(d[g]=1);else if(d[g]>=1)return a}var h=Math.round(255*d[0])+", "+Math.round(255*d[1])+", "+Math.round(255*d[2]);return e?"rgba("+h+", "+d[3]+")":"rgb("+h+")"}var e=a("tinycolor2"),f=a("fast-isnumeric"),g=b.exports={},h=a("./attributes");g.defaults=h.defaults,g.defaultLine=h.defaultLine,g.lightLine=h.lightLine,g.background=h.background,g.tinyRGB=function(a){var b=a.toRgb();return"rgb("+Math.round(b.r)+", "+Math.round(b.g)+", "+Math.round(b.b)+")"},g.rgb=function(a){return g.tinyRGB(e(a))},g.opacity=function(a){return a?e(a).getAlpha():0},g.addOpacity=function(a,b){var c=e(a).toRgb();return"rgba("+Math.round(c.r)+", "+Math.round(c.g)+", "+Math.round(c.b)+", "+b+")"},g.combine=function(a,b){var c=e(a).toRgb();if(1===c.a)return e(a).toRgbString();var d=e(b||g.background).toRgb(),f=1===d.a?d:{r:255*(1-d.a)+d.r*d.a,g:255*(1-d.a)+d.g*d.a,b:255*(1-d.a)+d.b*d.a},h={r:f.r*(1-c.a)+c.r*c.a,g:f.g*(1-c.a)+c.g*c.a,b:f.b*(1-c.a)+c.b*c.a};return e(h).toRgbString()},g.stroke=function(a,b){var c=e(b);a.style({stroke:g.tinyRGB(c),"stroke-opacity":c.getAlpha()})},g.fill=function(a,b){var c=e(b);a.style({fill:g.tinyRGB(c),"fill-opacity":c.getAlpha()})},g.clean=function(a){if(a&&"object"==typeof a){var b,c,e,f,h=Object.keys(a);for(b=0;b<h.length;b++)if(e=h[b],f=a[e],"color"===e.substr(e.length-5))if(Array.isArray(f))for(c=0;c<f.length;c++)f[c]=d(f[c]);else a[e]=d(f);else if("colorscale"===e.substr(e.length-10)&&Array.isArray(f))for(c=0;c<f.length;c++)Array.isArray(f[c])&&(f[c][1]=d(f[c][1]));else if(Array.isArray(f)){var i=f[0];if(!Array.isArray(i)&&i&&"object"==typeof i)for(c=0;c<f.length;c++)g.clean(f[c])}else f&&"object"==typeof f&&g.clean(f)}}},{"./attributes":1004,"fast-isnumeric":72,tinycolor2:998}],1006:[function(a,b,c){var d=a("../../plots/cartesian/layout_attributes"),e=a("../../plots/font_attributes"),f=a("../../lib/extend").extendFlat;b.exports={thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:d.linecolor,outlinewidth:d.linewidth,bordercolor:d.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:d.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:f({},d.ticks,{dflt:""}),ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,showticklabels:d.showticklabels,tickfont:d.tickfont,tickangle:d.tickangle,tickformat:d.tickformat,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,exponentformat:d.exponentformat,showexponent:d.showexponent,title:{valType:"string",dflt:"Click to enter colorscale title"},titlefont:f({},e,{}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},{"../../lib/extend":1049,"../../plots/cartesian/layout_attributes":1077,"../../plots/font_attributes":1079}],1007:[function(a,b,c){"use strict";var d=a("../../plots/cartesian/axes"),e=a("../../lib"),f=a("./attributes");b.exports=function(a,b,c){function g(a,b){return e.coerce(i,h,f,a,b)}var h=b.colorbar={},i=a.colorbar||{},j=g("thicknessmode");g("thickness","fraction"===j?30/(c.width-c.margin.l-c.margin.r):30);var k=g("lenmode");g("len","fraction"===k?1:c.height-c.margin.t-c.margin.b),g("x"),g("xanchor"),g("xpad"),g("y"),g("yanchor"),g("ypad"),e.noneOrAll(i,h,["x","y"]),g("outlinecolor"),g("outlinewidth"),g("bordercolor"),g("borderwidth"),g("bgcolor"),d.handleTickValueDefaults(i,h,g,"linear"),d.handleTickDefaults(i,h,g,"linear",{outerTicks:!1,font:c.font,noHover:!0}),g("title"),e.coerceFont(g,"titlefont",c.font),g("titleside")}},{"../../lib":1053,"../../plots/cartesian/axes":1073,"./attributes":1006}],1008:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../plotly"),f=a("./attributes");b.exports=function(a,b){function c(){function f(a,b){return e.Lib.coerce(J,K,e.Axes.layoutAttributes,a,b)}function h(){if(["top","bottom"].indexOf(g.titleside)!==-1){var b=Q.select(".cbtitle"),c=b.select("text"),f=[-g.outlinewidth/2,g.outlinewidth/2],h=b.select(".h"+K._id+"title-math-group").node(),i=15.6;if(c.node()&&(i=1.3*parseInt(c.style("font-size"),10)),h?(S=e.Drawing.bBox(h).height,S>i&&(f[1]-=(S-i)/2)):c.node()&&!c.classed("js-placeholder")&&(S=e.Drawing.bBox(b.node()).height),S){if(S+=5,"top"===g.titleside)K.domain[1]-=S/j._size.h,f[1]*=-1;else{K.domain[0]+=S/j._size.h;var k=Math.max(1,c.selectAll("tspan.line").size());f[1]+=(1-k)*i}b.attr("transform","translate("+f+")"),K.setScale()}}Q.selectAll(".cbfills,.cblines,.cbaxis").attr("transform","translate(0,"+Math.round(j._size.h*(1-K.domain[1]))+")");var q=Q.select(".cbfills").selectAll("rect.cbfill").data(n);q.enter().append("rect").classed("cbfill",!0).style("stroke","none"),q.exit().remove(),q.each(function(a,b){var c=[0===b?l[0]:(n[b]+n[b-1])/2,b===n.length-1?l[1]:(n[b]+n[b+1])/2].map(K.c2p).map(Math.round);b!==n.length-1&&(c[1]+=c[1]>c[0]?1:-1),d.select(this).attr({x:E,width:Math.max(x,2),y:d.min(c),height:Math.max(d.max(c)-d.min(c),2)}).style("fill",p(a))});var r=Q.select(".cblines").selectAll("path.cbline").data(g.line.color&&g.line.width?m:[]);return r.enter().append("path").classed("cbline",!0),r.exit().remove(),r.each(function(a){d.select(this).attr("d","M"+E+","+(Math.round(K.c2p(a))+g.line.width/2%1)+"h"+x).call(e.Drawing.lineGroupStyle,g.line.width,o(a),g.line.dash)}),K._axislayer.selectAll("g."+K._id+"tick,path").remove(),K._pos=E+x+(g.outlinewidth||0)/2-("outside"===g.ticks?1:0),K.side="right",e.Axes.doTicks(a,K)}function i(){var c=x+g.outlinewidth/2+e.Drawing.bBox(K._axislayer.node()).width;if(u=R.select("text"),u.node()&&!u.classed("js-placeholder")){var d,f=R.select(".h"+K._id+"title-math-group").node();d=f&&["top","bottom"].indexOf(g.titleside)!==-1?e.Drawing.bBox(f).width:e.Drawing.bBox(R.node()).right-E-j._size.l,c=Math.max(c,d)}var h=2*g.xpad+c+g.borderwidth+g.outlinewidth/2,i=H-I;Q.select(".cbbg").attr({x:E-g.xpad-(g.borderwidth+g.outlinewidth)/2,y:I-C,width:Math.max(h,2),height:Math.max(i+2*C,2)}).call(e.Color.fill,g.bgcolor).call(e.Color.stroke,g.bordercolor).style({"stroke-width":g.borderwidth}),Q.selectAll(".cboutline").attr({x:E,y:I+g.ypad+("top"===g.titleside?S:0),width:Math.max(x,2),height:Math.max(i-2*g.ypad-S,2)}).call(e.Color.stroke,g.outlinecolor).style({fill:"None","stroke-width":g.outlinewidth});var k=({center:.5,right:1}[g.xanchor]||0)*h;Q.attr("transform","translate("+(j._size.l-k)+","+j._size.t+")"),e.Plots.autoMargin(a,b,{x:g.x,y:g.y,l:h*({right:1,center:.5}[g.xanchor]||0),r:h*({left:1,center:.5}[g.xanchor]||0),t:i*({bottom:1,middle:.5}[g.yanchor]||0),b:i*({top:1,middle:.5}[g.yanchor]||0)})}var j=a._fullLayout;if("function"!=typeof g.fillcolor&&"function"!=typeof g.line.color)return void j._infolayer.selectAll("g."+b).remove();var k,l=d.extent(("function"==typeof g.fillcolor?g.fillcolor:g.line.color).domain()),m=[],n=[],o="function"==typeof g.line.color?g.line.color:function(){return g.line.color},p="function"==typeof g.fillcolor?g.fillcolor:function(){return g.fillcolor},q=g.levels.end+g.levels.size/100,r=g.levels.size,s=1.001*l[0]-.001*l[1],t=1.001*l[1]-.001*l[0];for(k=g.levels.start;(k-q)*r<0;k+=r)k>s&&k<t&&m.push(k);if("function"==typeof g.fillcolor)if(g.filllevels)for(q=g.filllevels.end+g.filllevels.size/100,r=g.filllevels.size,k=g.filllevels.start;(k-q)*r<0;k+=r)k>l[0]&&k<l[1]&&n.push(k);else n=m.map(function(a){return a-g.levels.size/2}),n.push(n[n.length-1]+g.levels.size);else g.fillcolor&&"string"==typeof g.fillcolor&&(n=[0]);g.levels.size<0&&(m.reverse(),n.reverse());var u,v=j.height-j.margin.t-j.margin.b,w=j.width-j.margin.l-j.margin.r,x=Math.round(g.thickness*("fraction"===g.thicknessmode?w:1)),y=x/j._size.w,z=Math.round(g.len*("fraction"===g.lenmode?v:1)),A=z/j._size.h,B=g.xpad/j._size.w,C=(g.borderwidth+g.outlinewidth)/2,D=g.ypad/j._size.h,E=Math.round(g.x*j._size.w+g.xpad),F=g.x-y*({middle:.5,right:1}[g.xanchor]||0),G=g.y+A*(({top:-.5,bottom:.5}[g.yanchor]||0)-.5),H=Math.round(j._size.h*(1-G)),I=H-z,J={type:"linear",range:l,tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:g.ticks,ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:g.tickfont,tickangle:g.tickangle,tickformat:g.tickformat,exponentformat:g.exponentformat,showexponent:g.showexponent,showtickprefix:g.showtickprefix,tickprefix:g.tickprefix,showticksuffix:g.showticksuffix,ticksuffix:g.ticksuffix,title:g.title,titlefont:g.titlefont,anchor:"free",position:1},K={},L={letter:"y",font:j.font,noHover:!0};if(e.Axes.handleAxisDefaults(J,K,f,L),e.Axes.handleAxisPositioningDefaults(J,K,f,L),K._id="y"+b,K._td=a,K.position=g.x+B+y,c.axis=K,["top","bottom"].indexOf(g.titleside)!==-1&&(K.titleside=g.titleside,K.titlex=g.x+B,K.titley=G+("top"===g.titleside?A-D:D)),g.line.color&&"auto"===g.tickmode){K.tickmode="linear",K.tick0=g.levels.start;var M=g.levels.size,N=e.Lib.constrain((H-I)/50,4,15)+1,O=(l[1]-l[0])/((g.nticks||N)*M);if(O>1){var P=Math.pow(10,Math.floor(Math.log(O)/Math.LN10));M*=P*e.Lib.roundUp(O/P,[2,5,10]),(Math.abs(g.levels.start)/g.levels.size+1e-6)%1<2e-6&&(K.tick0=0)}K.dtick=M}K.domain=[G+D,G+A-D],K.setScale();var Q=j._infolayer.selectAll("g."+b).data([0]);Q.enter().append("g").classed(b,!0).each(function(){var a=d.select(this);a.append("rect").classed("cbbg",!0),a.append("g").classed("cbfills",!0),a.append("g").classed("cblines",!0),a.append("g").classed("cbaxis",!0).classed("crisp",!0),a.append("g").classed("cbtitleunshift",!0).append("g").classed("cbtitle",!0),a.append("rect").classed("cboutline",!0)}),Q.attr("transform","translate("+Math.round(j._size.l)+","+Math.round(j._size.t)+")");var R=Q.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(j._size.l)+",-"+Math.round(j._size.t)+")");K._axislayer=Q.select(".cbaxis");var S=0;["top","bottom"].indexOf(g.titleside)!==-1&&e.Titles.draw(a,K._id+"title");var T=e.Lib.syncOrAsync([e.Plots.previousPromises,h,e.Plots.previousPromises,i],a);if(T&&T.then&&(a._promises||[]).push(T),a._context.editable){var U,V,W;e.Fx.dragElement({element:Q.node(),prepFn:function(){U=Q.attr("transform"),e.Fx.setCursor(Q)},moveFn:function(b,c){var d=a._fullLayout._size;Q.attr("transform",U+" translate("+b+","+c+")"),V=e.Fx.dragAlign(F+b/d.w,y,0,1,g.xanchor),W=e.Fx.dragAlign(G-c/d.h,A,0,1,g.yanchor);var f=e.Fx.dragCursors(V,W,g.xanchor,g.yanchor);e.Fx.setCursor(Q,f)},doneFn:function(c){if(e.Fx.setCursor(Q),c&&void 0!==V&&void 0!==W){var d,f=b.substr(2);a._fullData.some(function(a){if(a.uid===f)return d=a.index,!0}),e.restyle(a,{"colorbar.x":V,"colorbar.y":W},d)}}})}return T}var g={};return Object.keys(f).forEach(function(a){g[a]=null}),g.fillcolor=null,g.line={color:null,width:null,dash:null},g.levels={start:null,end:null,size:null},g.filllevels=null,Object.keys(g).forEach(function(a){c[a]=function(b){return arguments.length?(g[a]=e.Lib.isPlainObject(g[a])?e.Lib.extendFlat(g[a],b):b,c):g[a]}}),c.options=function(a){return Object.keys(a).forEach(function(b){"function"==typeof c[b]&&c[b](a[b])}),c},c._opts=g,c}},{"../../plotly":1070,"./attributes":1006,d3:64}],1009:[function(a,b,c){"use strict";b.exports=function(a){return"object"==typeof a.colorbar&&null!==a.colorbar}},{}],1010:[function(a,b,c){"use strict";c.attributes=a("./attributes"),c.supplyDefaults=a("./defaults"),c.draw=a("./draw"),c.hasColorbar=a("./has_colorbar")},{"./attributes":1006,"./defaults":1007,"./draw":1008,"./has_colorbar":1009}],1011:[function(a,b,c){b.exports={zauto:{valType:"boolean",dflt:!0},zmin:{valType:"number",dflt:null},zmax:{valType:"number",dflt:null},colorscale:{valType:"colorscale"},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1},showscale:{valType:"boolean",dflt:!0},_deprecated:{scl:{valType:"colorscale"},reversescl:{valType:"boolean"}}}},{}],1012:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./scales"),f=a("./flip_scale");b.exports=function(a,b,c,g){var h,i;c?(h=d.nestedProperty(a,c).get(),i=d.nestedProperty(a._input,c).get()):(h=a,i=a._input);var j=h[g+"auto"],k=h[g+"min"],l=h[g+"max"],m=h.colorscale;j===!1&&void 0!==k||(k=d.aggNums(Math.min,null,b)),j===!1&&void 0!==l||(l=d.aggNums(Math.max,null,b)),k===l&&(k-=.5,l+=.5),h[g+"min"]=k,h[g+"max"]=l,i[g+"min"]=k,i[g+"max"]=l,h.autocolorscale&&(m=k*l<0?e.RdBu:k>=0?e.Reds:e.Blues,i.colorscale=m,h.reversescale&&(m=f(m)),h.colorscale=m)}},{"../../lib":1053,"./flip_scale":1015,"./scales":1022}],1013:[function(a,b,c){var d=a("./scales");b.exports=d.RdBu},{"./scales":1022}],1014:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("../colorbar/has_colorbar"),g=a("../colorbar/defaults"),h=a("./is_valid_scale"),i=a("./flip_scale");b.exports=function(a,b,c,j,k){var l=k.prefix,m=k.cLetter,n=l.slice(0,l.length-1),o=l?e.nestedProperty(a,n).get()||{}:a,p=l?e.nestedProperty(b,n).get()||{}:b,q=o[m+"min"],r=o[m+"max"],s=o.colorscale,t=d(q)&&d(r)&&q<r;j(l+m+"auto",!t),j(l+m+"min"),j(l+m+"max");var u;void 0!==s&&(u=!h(s)),j(l+"autocolorscale",u);var v=j(l+"colorscale"),w=j(l+"reversescale");if(w&&(p.colorscale=i(v)),"marker.line."!==l){var x;l&&(x=f(o));var y=j(l+"showscale",x);y&&g(o,p,c)}}},{"../../lib":1053,"../colorbar/defaults":1007,"../colorbar/has_colorbar":1009,"./flip_scale":1015,"./is_valid_scale":1019,"fast-isnumeric":72}],1015:[function(a,b,c){"use strict";b.exports=function(a){for(var b,c=a.length,d=new Array(c),e=c-1,f=0;e>=0;e--,f++)b=a[e],d[f]=[1-b[0],b[1]];return d}},{}],1016:[function(a,b,c){"use strict";var d=a("./scales"),e=a("./default_scale"),f=a("./is_valid_scale_array");b.exports=function(a,b){function c(){try{a=d[a]||JSON.parse(a)}catch(c){a=b}}return b||(b=e),a?("string"==typeof a&&(c(),"string"==typeof a&&c()),f(a)?a:b):b}},{"./default_scale":1013,"./is_valid_scale_array":1020,"./scales":1022}],1017:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../lib"),f=a("./is_valid_scale");b.exports=function(a,b){var c=b?e.nestedProperty(a,b).get()||{}:a,g=c.color,h=!1;if(Array.isArray(g))for(var i=0;i<g.length;i++)if(d(g[i])){h=!0;break}return"object"==typeof c&&null!==c&&(h||c.showscale===!0||d(c.cmin)&&d(c.cmax)||f(c.colorscale)||"object"==typeof c.colorbar&&null!==c.colorbar)}},{"../../lib":1053,"./is_valid_scale":1019,"fast-isnumeric":72}],1018:[function(a,b,c){"use strict";c.scales=a("./scales"),c.defaultScale=a("./default_scale"),c.attributes=a("./attributes"),c.handleDefaults=a("./defaults"),c.calc=a("./calc"),c.hasColorscale=a("./has_colorscale"),c.isValidScale=a("./is_valid_scale"),c.getScale=a("./get_scale"),c.flipScale=a("./flip_scale"),c.makeScaleFunction=a("./make_scale_function")},{"./attributes":1011,"./calc":1012,"./default_scale":1013,"./defaults":1014,"./flip_scale":1015,"./get_scale":1016,"./has_colorscale":1017,"./is_valid_scale":1019,"./make_scale_function":1021,"./scales":1022}],1019:[function(a,b,c){"use strict";var d=a("./scales"),e=a("./is_valid_scale_array");b.exports=function(a){return void 0!==d[a]||e(a)}},{"./is_valid_scale_array":1020,"./scales":1022}],1020:[function(a,b,c){"use strict";var d=a("tinycolor2");b.exports=function(a){var b,c=!0,e=0;if(Array.isArray(a)){if(0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var f=0;f<a.length;f++){if(b=a[f],2!==b.length||+b[0]<e||!d(b[1]).isValid()){c=!1;break}e=+b[0]}return c}return!1}},{tinycolor2:998}],1021:[function(a,b,c){"use strict";var d=a("d3"),e=a("tinycolor2"),f=a("fast-isnumeric"),g=a("../color");b.exports=function(a,b,c){for(var h,i=a.length,j=new Array(i),k=new Array(i),l=0;l<i;l++)h=a[l],j[l]=b+h[0]*(c-b),k[l]=h[1];var m=d.scale.linear().domain(j).interpolate(d.interpolateRgb).range(k);return function(a){return f(a)?m(a):e(a).isValid()?a:g.defaultLine}}},{"../color":1005,d3:64,"fast-isnumeric":72,tinycolor2:998}],1022:[function(a,b,c){b.exports={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YIGnBu:[[0,"rgb(8, 29, 88)"],[.125,"rgb(37, 52, 148)"],[.25,"rgb(34, 94, 168)"],[.375,"rgb(29, 145, 192)"],[.5,"rgb(65, 182, 196)"],[.625,"rgb(127, 205, 187)"],[.75,"rgb(199, 233, 180)"],[.875,"rgb(237, 248, 217)"],[1,"rgb(255, 255, 217)"]],Greens:[[0,"rgb(0, 68, 27)"],[.125,"rgb(0, 109, 44)"],[.25,"rgb(35, 139, 69)"],[.375,"rgb(65, 171, 93)"],[.5,"rgb(116, 196, 118)"],[.625,"rgb(161, 217, 155)"],[.75,"rgb(199, 233, 192)"],[.875,"rgb(229, 245, 224)"],[1,"rgb(247, 252, 245)"]],YIOrRd:[[0,"rgb(128, 0, 38)"],[.125,"rgb(189, 0, 38)"],[.25,"rgb(227, 26, 28)"],[.375,"rgb(252, 78, 42)"],[.5,"rgb(253, 141, 60)"],[.625,"rgb(254, 178, 76)"],[.75,"rgb(254, 217, 118)"],[.875,"rgb(255, 237, 160)"],[1,"rgb(255, 255, 204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5, 10, 172)"],[.35,"rgb(106, 137, 247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220, 170, 132)"],[.7,"rgb(230, 145, 90)"],[1,"rgb(178, 10, 28)"]],Reds:[[0,"rgb(220, 220, 220)"],[.2,"rgb(245, 195, 157)"],[.4,"rgb(245, 160, 105)"],[1,"rgb(178, 10, 28)"]],Blues:[[0,"rgb(5, 10, 172)"],[.35,"rgb(40, 60, 190)"],[.5,"rgb(70, 100, 245)"],[.6,"rgb(90, 120, 245)"],[.7,"rgb(106, 137, 247)"],[1,"rgb(220, 220, 220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0, 0, 200)"],[.25,"rgb(0, 25, 255)"],[.375,"rgb(0, 152, 255)"],[.5,"rgb(44, 255, 150)"],[.625,"rgb(151, 255, 0)"],[.75,"rgb(255, 234, 0)"],[.875,"rgb(255, 111, 0)"],[1,"rgb(255, 0, 0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]]}},{}],1023:[function(a,b,c){"use strict";function d(a,b,c,d){var e=a[0]-b[0],g=a[1]-b[1],h=c[0]-b[0],i=c[1]-b[1],j=Math.pow(e*e+g*g,n/2),k=Math.pow(h*h+i*i,n/2),l=(k*k*e-j*j*h)*d,m=(k*k*g-j*j*i)*d,o=3*k*(j+k),p=3*j*(j+k);return[[f.round(b[0]+(o&&l/o),2),f.round(b[1]+(o&&m/o),2)],[f.round(b[0]-(p&&l/p),2),f.round(b[1]-(p&&m/p),2)]]}var e=a("../../plotly"),f=a("d3"),g=a("fast-isnumeric"),h=b.exports={};h.font=function(a,b,c,d){b&&b.family&&(d=b.color,c=b.size,b=b.family),b&&a.style("font-family",b),c+1&&a.style("font-size",c+"px"),d&&a.call(e.Color.fill,d)},h.setPosition=function(a,b,c){a.attr("x",b).attr("y",c)},h.setSize=function(a,b,c){a.attr("width",b).attr("height",c)},h.setRect=function(a,b,c,d,e){a.call(h.setPosition,b,c).call(h.setSize,d,e)},h.translatePoints=function(a,b,c){a.each(function(a){var d=a.xp||b.c2p(a.x),e=a.yp||c.c2p(a.y),h=f.select(this);g(d)&&g(e)?"text"===this.nodeName?h.attr("x",d).attr("y",e):h.attr("transform","translate("+d+","+e+")"):h.remove()})},h.getPx=function(a,b){return Number(a.style(b).replace(/px$/,""))},h.crispRound=function(a,b,c){return b&&g(b)?a._context.staticPlot?b:b<1?1:Math.round(b):c||0},h.lineGroupStyle=function(a,b,c,d){a.style("fill","none").each(function(a){var g=(((a||[])[0]||{}).trace||{}).line||{},i=b||g.width||0,j=d||g.dash||"";f.select(this).call(e.Color.stroke,c||g.color).call(h.dashLine,j,i)})},h.dashLine=function(a,b,c){var d=Math.max(c,3);"solid"===b?b="":"dot"===b?b=d+"px,"+d+"px":"dash"===b?b=3*d+"px,"+3*d+"px":"longdash"===b?b=5*d+"px,"+5*d+"px":"dashdot"===b?b=3*d+"px,"+d+"px,"+d+"px,"+d+"px":"longdashdot"===b&&(b=5*d+"px,"+2*d+"px,"+d+"px,"+2*d+"px"),a.style({"stroke-dasharray":b,"stroke-width":c+"px"})},h.fillGroupStyle=function(a){a.style("stroke-width",0).each(function(b){var c=f.select(this);try{c.call(e.Color.fill,b[0].trace.fillcolor)}catch(d){console.log(d,a),c.remove()}
})};var i=a("./symbol_defs");h.symbolNames=[],h.symbolFuncs=[],h.symbolNeedLines={},h.symbolNoDot={},h.symbolList=[],Object.keys(i).forEach(function(a){var b=i[a];h.symbolList=h.symbolList.concat([b.n,a,b.n+100,a+"-open"]),h.symbolNames[b.n]=a,h.symbolFuncs[b.n]=b.f,b.needLine&&(h.symbolNeedLines[b.n]=!0),b.noDot?h.symbolNoDot[b.n]=!0:h.symbolList=h.symbolList.concat([b.n+200,a+"-dot",b.n+300,a+"-open-dot"])});var j=h.symbolNames.length,k="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";h.symbolNumber=function(a){if("string"==typeof a){var b=0;a.indexOf("-open")>0&&(b=100,a=a.replace("-open","")),a.indexOf("-dot")>0&&(b+=200,a=a.replace("-dot","")),a=h.symbolNames.indexOf(a),a>=0&&(a+=b)}return a%100>=j||a>=400?0:Math.floor(Math.max(a,0))},h.pointStyle=function(a,b){if(a.size()){var c=b.marker,d=c.line;if(e.Plots.traceIs(b,"symbols")){var g=e.Scatter.getBubbleSizeFn(b);a.attr("d",function(a){var d;d="various"===a.ms||"various"===c.size?3:e.Scatter.isBubble(b)?g(a.ms):(c.size||6)/2,a.mrc=d;var f=h.symbolNumber(a.mx||c.symbol)||0,i=f%100;return a.om=f%200>=100,h.symbolFuncs[i](d)+(f>=200?k:"")}).style("opacity",function(a){return(a.mo+1||c.opacity+1)-1})}var i=(b._input||{}).marker||{},j=h.tryColorscale(c,i,""),l=h.tryColorscale(c,i,"line.");a.each(function(a){var b,g,h;a.so?(h=d.outlierwidth,g=d.outliercolor,b=c.outliercolor):(h=(a.mlw+1||d.width+1||(a.trace?a.trace.marker.line.width:0)+1)-1,g="mlc"in a?a.mlcc=l(a.mlc):Array.isArray(d.color)?e.Color.defaultLine:d.color,b="mc"in a?a.mcc=j(a.mc):Array.isArray(c.color)?e.Color.defaultLine:c.color||"rgba(0,0,0,0)");var i=f.select(this);a.om?i.call(e.Color.stroke,b).style({"stroke-width":(h||1)+"px",fill:"none"}):(i.style("stroke-width",h+"px").call(e.Color.fill,b),h&&i.call(e.Color.stroke,g))})}},h.tryColorscale=function(a,b,c){var d=e.Lib.nestedProperty(a,c+"color").get(),f=e.Lib.nestedProperty(a,c+"colorscale").get(),h=e.Lib.nestedProperty(a,c+"cauto").get(),i=e.Lib.nestedProperty(a,c+"cmin"),j=e.Lib.nestedProperty(a,c+"cmax"),k=i.get(),l=j.get();return f&&Array.isArray(d)?(!h&&g(k)&&g(l)||(k=1/0,l=-(1/0),d.forEach(function(a){g(a)&&(k>a&&(k=+a),l<a&&(l=+a))}),k>l&&(k=0,l=1),i.set(k),j.set(l),e.Lib.nestedProperty(b,c+"cmin").set(k),e.Lib.nestedProperty(b,c+"cmax").set(l)),e.Colorscale.makeScaleFunction(f,k,l)):e.Lib.identity};var l={start:1,end:-1,middle:0,bottom:1,top:-1},m=1.3;h.textPointStyle=function(a,b){a.each(function(a){var c=f.select(this),d=a.tx||b.text;if(!d||Array.isArray(d))return void c.remove();var i=a.tp||b.textposition,j=i.indexOf("top")!==-1?"top":i.indexOf("bottom")!==-1?"bottom":"middle",k=i.indexOf("left")!==-1?"end":i.indexOf("right")!==-1?"start":"middle",n=a.ts||b.textfont.size,o=a.mrc?a.mrc/.8+1:0;n=g(n)&&n>0?n:0,c.call(h.font,a.tf||b.textfont.family,n,a.tc||b.textfont.color).attr("text-anchor",k).text(d).call(e.util.convertToTspans);var p=f.select(this.parentNode),q=c.selectAll("tspan.line"),r=((q[0].length||1)-1)*m+1,s=l[k]*o,t=.75*n+l[j]*o+(l[j]-1)*r*n/2;p.attr("transform","translate("+s+","+t+")"),r>1&&q.attr({x:c.attr("x"),y:c.attr("y")})})};var n=.5;h.smoothopen=function(a,b){if(a.length<3)return"M"+a.join("L");var c,e="M"+a[0],f=[];for(c=1;c<a.length-1;c++)f.push(d(a[c-1],a[c],a[c+1],b));for(e+="Q"+f[0][0]+" "+a[1],c=2;c<a.length-1;c++)e+="C"+f[c-2][1]+" "+f[c-1][0]+" "+a[c];return e+="Q"+f[a.length-3][1]+" "+a[a.length-1]},h.smoothclosed=function(a,b){if(a.length<3)return"M"+a.join("L")+"Z";var c,e="M"+a[0],f=a.length-1,g=[d(a[f],a[0],a[1],b)];for(c=1;c<f;c++)g.push(d(a[c-1],a[c],a[c+1],b));for(g.push(d(a[f-1],a[f],a[0],b)),c=1;c<=f;c++)e+="C"+g[c-1][1]+" "+g[c][0]+" "+a[c];return e+="C"+g[f][1]+" "+g[0][0]+" "+a[0]+"Z"};var o={hv:function(a,b){return"H"+f.round(b[0],2)+"V"+f.round(b[1],2)},vh:function(a,b){return"V"+f.round(b[1],2)+"H"+f.round(b[0],2)},hvh:function(a,b){return"H"+f.round((a[0]+b[0])/2,2)+"V"+f.round(b[1],2)+"H"+f.round(b[0],2)},vhv:function(a,b){return"V"+f.round((a[1]+b[1])/2,2)+"H"+f.round(b[0],2)+"V"+f.round(b[1],2)}},p=function(a,b){return"L"+f.round(b[0],2)+","+f.round(b[1],2)};h.steps=function(a){var b=o[a]||p;return function(a){for(var c="M"+f.round(a[0][0],2)+","+f.round(a[0][1],2),d=1;d<a.length;d++)c+=b(a[d-1],a[d]);return c}},h.makeTester=function(a){var b=f.select("body").selectAll("#js-plotly-tester").data([0]);b.enter().append("svg").attr({id:"js-plotly-tester",xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink"}).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px"});var c=b.selectAll(".js-reference-point").data([0]);c.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"}),b.node()._cache||(b.node()._cache={}),a._tester=b,a._testref=c};var q=[],r=1e4;h.bBox=function(a){var b=a.attributes["data-bb"];if(b&&b.value)return e.Lib.extendFlat({},q[b.value]);var c=f.select("#js-plotly-tester"),d=c.node(),g=a.cloneNode(!0);d.appendChild(g),f.select(g).attr({x:0,y:0,transform:""});var h=g.getBoundingClientRect(),i=c.select(".js-reference-point").node().getBoundingClientRect();d.removeChild(g);var j={height:h.height,width:h.width,left:h.left-i.left,top:h.top-i.top,right:h.right-i.left,bottom:h.bottom-i.top};return q.length>=r&&(f.selectAll("[data-bb]").attr("data-bb",null),q=[]),a.setAttribute("data-bb",q.length),q.push(j),e.Lib.extendFlat({},j)},h.setClipUrl=function(a,b){if(!b)return void a.attr("clip-path",null);var c="#"+b,d=f.select("base");d.size()&&d.attr("href")&&(c=window.location.href+c),a.attr("clip-path","url("+c+")")}},{"../../plotly":1070,"./symbol_defs":1024,d3:64,"fast-isnumeric":72}],1024:[function(a,b,c){"use strict";var d=a("d3");b.exports={circle:{n:0,f:function(a){var b=d.round(a,2);return"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"}},square:{n:1,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"}},diamond:{n:2,f:function(a){var b=d.round(1.3*a,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z"}},cross:{n:3,f:function(a){var b=d.round(.4*a,2),c=d.round(1.2*a,2);return"M"+c+","+b+"H"+b+"V"+c+"H-"+b+"V"+b+"H-"+c+"V-"+b+"H-"+b+"V-"+c+"H"+b+"V-"+b+"H"+c+"Z"}},x:{n:4,f:function(a){var b=d.round(.8*a/Math.sqrt(2),2),c="l"+b+","+b,e="l"+b+",-"+b,f="l-"+b+",-"+b,g="l-"+b+","+b;return"M0,"+b+c+e+f+e+f+g+f+g+c+g+c+"Z"}},"triangle-up":{n:5,f:function(a){var b=d.round(2*a/Math.sqrt(3),2),c=d.round(a/2,2),e=d.round(a,2);return"M-"+b+","+c+"H"+b+"L0,-"+e+"Z"}},"triangle-down":{n:6,f:function(a){var b=d.round(2*a/Math.sqrt(3),2),c=d.round(a/2,2),e=d.round(a,2);return"M-"+b+",-"+c+"H"+b+"L0,"+e+"Z"}},"triangle-left":{n:7,f:function(a){var b=d.round(2*a/Math.sqrt(3),2),c=d.round(a/2,2),e=d.round(a,2);return"M"+c+",-"+b+"V"+b+"L-"+e+",0Z"}},"triangle-right":{n:8,f:function(a){var b=d.round(2*a/Math.sqrt(3),2),c=d.round(a/2,2),e=d.round(a,2);return"M-"+c+",-"+b+"V"+b+"L"+e+",0Z"}},"triangle-ne":{n:9,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M-"+c+",-"+b+"H"+b+"V"+c+"Z"}},"triangle-se":{n:10,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M"+b+",-"+c+"V"+b+"H-"+c+"Z"}},"triangle-sw":{n:11,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M"+c+","+b+"H-"+b+"V-"+c+"Z"}},"triangle-nw":{n:12,f:function(a){var b=d.round(.6*a,2),c=d.round(1.2*a,2);return"M-"+b+","+c+"V-"+b+"H"+c+"Z"}},pentagon:{n:13,f:function(a){var b=d.round(.951*a,2),c=d.round(.588*a,2),e=d.round(-a,2),f=d.round(a*-.309,2),g=d.round(.809*a,2);return"M"+b+","+f+"L"+c+","+g+"H-"+c+"L-"+b+","+f+"L0,"+e+"Z"}},hexagon:{n:14,f:function(a){var b=d.round(a,2),c=d.round(a/2,2),e=d.round(a*Math.sqrt(3)/2,2);return"M"+e+",-"+c+"V"+c+"L0,"+b+"L-"+e+","+c+"V-"+c+"L0,-"+b+"Z"}},hexagon2:{n:15,f:function(a){var b=d.round(a,2),c=d.round(a/2,2),e=d.round(a*Math.sqrt(3)/2,2);return"M-"+c+","+e+"H"+c+"L"+b+",0L"+c+",-"+e+"H-"+c+"L-"+b+",0Z"}},octagon:{n:16,f:function(a){var b=d.round(.924*a,2),c=d.round(.383*a,2);return"M-"+c+",-"+b+"H"+c+"L"+b+",-"+c+"V"+c+"L"+c+","+b+"H-"+c+"L-"+b+","+c+"V-"+c+"Z"}},star:{n:17,f:function(a){var b=1.4*a,c=d.round(.225*b,2),e=d.round(.951*b,2),f=d.round(.363*b,2),g=d.round(.588*b,2),h=d.round(-b,2),i=d.round(b*-.309,2),j=d.round(.118*b,2),k=d.round(.809*b,2),l=d.round(.382*b,2);return"M"+c+","+i+"H"+e+"L"+f+","+j+"L"+g+","+k+"L0,"+l+"L-"+g+","+k+"L-"+f+","+j+"L-"+e+","+i+"H-"+c+"L0,"+h+"Z"}},hexagram:{n:18,f:function(a){var b=d.round(.66*a,2),c=d.round(.38*a,2),e=d.round(.76*a,2);return"M-"+e+",0l-"+c+",-"+b+"h"+e+"l"+c+",-"+b+"l"+c+","+b+"h"+e+"l-"+c+","+b+"l"+c+","+b+"h-"+e+"l-"+c+","+b+"l-"+c+",-"+b+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(a){var b=d.round(a*Math.sqrt(3)*.8,2),c=d.round(.8*a,2),e=d.round(1.6*a,2),f=d.round(4*a,2),g="A "+f+","+f+" 0 0 1 ";return"M-"+b+","+c+g+b+","+c+g+"0,-"+e+g+"-"+b+","+c+"Z"}},"star-triangle-down":{n:20,f:function(a){var b=d.round(a*Math.sqrt(3)*.8,2),c=d.round(.8*a,2),e=d.round(1.6*a,2),f=d.round(4*a,2),g="A "+f+","+f+" 0 0 1 ";return"M"+b+",-"+c+g+"-"+b+",-"+c+g+"0,"+e+g+b+",-"+c+"Z"}},"star-square":{n:21,f:function(a){var b=d.round(1.1*a,2),c=d.round(2*a,2),e="A "+c+","+c+" 0 0 1 ";return"M-"+b+",-"+b+e+"-"+b+","+b+e+b+","+b+e+b+",-"+b+e+"-"+b+",-"+b+"Z"}},"star-diamond":{n:22,f:function(a){var b=d.round(1.4*a,2),c=d.round(1.9*a,2),e="A "+c+","+c+" 0 0 1 ";return"M-"+b+",0"+e+"0,"+b+e+b+",0"+e+"0,-"+b+e+"-"+b+",0Z"}},"diamond-tall":{n:23,f:function(a){var b=d.round(.7*a,2),c=d.round(1.4*a,2);return"M0,"+c+"L"+b+",0L0,-"+c+"L-"+b+",0Z"}},"diamond-wide":{n:24,f:function(a){var b=d.round(1.4*a,2),c=d.round(.7*a,2);return"M0,"+c+"L"+b+",0L0,-"+c+"L-"+b+",0Z"}},hourglass:{n:25,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z"},noDot:!0},bowtie:{n:26,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z"},noDot:!0},"circle-cross":{n:27,f:function(a){var b=d.round(a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(a){var b=d.round(a,2),c=d.round(a/Math.sqrt(2),2);return"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(a){var b=d.round(a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(a){var b=d.round(1.3*a,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(a){var b=d.round(1.3*a,2),c=d.round(.65*a,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+c+",-"+c+"L"+c+","+c+"M-"+c+","+c+"L"+c+",-"+c},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(a){var b=d.round(1.4*a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b},needLine:!0,noDot:!0},"x-thin":{n:34,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0},asterisk:{n:35,f:function(a){var b=d.round(1.2*a,2),c=d.round(.85*a,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c},needLine:!0,noDot:!0},hash:{n:36,f:function(a){var b=d.round(a/2,2),c=d.round(a,2);return"M"+b+","+c+"V-"+c+"m-"+c+",0V"+c+"M"+c+","+b+"H-"+c+"m0,-"+c+"H"+c},needLine:!0},"y-up":{n:37,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M-"+b+","+e+"L0,0M"+b+","+e+"L0,0M0,-"+c+"L0,0"},needLine:!0,noDot:!0},"y-down":{n:38,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M-"+b+",-"+e+"L0,0M"+b+",-"+e+"L0,0M0,"+c+"L0,0"},needLine:!0,noDot:!0},"y-left":{n:39,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M"+e+","+b+"L0,0M"+e+",-"+b+"L0,0M-"+c+",0L0,0"},needLine:!0,noDot:!0},"y-right":{n:40,f:function(a){var b=d.round(1.2*a,2),c=d.round(1.6*a,2),e=d.round(.8*a,2);return"M-"+e+","+b+"L0,0M-"+e+",-"+b+"L0,0M"+c+",0L0,0"},needLine:!0,noDot:!0},"line-ew":{n:41,f:function(a){var b=d.round(1.4*a,2);return"M"+b+",0H-"+b},needLine:!0,noDot:!0},"line-ns":{n:42,f:function(a){var b=d.round(1.4*a,2);return"M0,"+b+"V-"+b},needLine:!0,noDot:!0},"line-ne":{n:43,f:function(a){var b=d.round(a,2);return"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0},"line-nw":{n:44,f:function(a){var b=d.round(a,2);return"M"+b+","+b+"L-"+b+",-"+b},needLine:!0,noDot:!0}}},{d3:64}],1025:[function(a,b,c){b.exports={visible:{valType:"boolean"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"]},symmetric:{valType:"boolean"},array:{valType:"data_array"},arrayminus:{valType:"data_array"},value:{valType:"number",min:0,dflt:10},valueminus:{valType:"number",min:0,dflt:10},traceref:{valType:"integer",min:0,dflt:0},tracerefminus:{valType:"integer",min:0,dflt:0},copy_ystyle:{valType:"boolean"},copy_zstyle:{valType:"boolean"},color:{valType:"color"},thickness:{valType:"number",min:0,dflt:2},width:{valType:"number",min:0},_deprecated:{opacity:{valType:"number"}}}},{}],1026:[function(a,b,c){"use strict";function d(a,b,c,d){var f=b["error_"+d]||{},i=f.visible&&["linear","log"].indexOf(c.type)!==-1,j=[];if(i){for(var k=h(f),l=0;l<a.length;l++){var m=a[l],n=m[d];if(e(c.c2l(n))){var o=k(n,l);if(e(o[0])&&e(o[1])){var p=m[d+"s"]=n-o[0],q=m[d+"h"]=n+o[1];j.push(p,q)}}}g.expand(c,j,{padded:!0})}}var e=a("fast-isnumeric"),f=a("../../plots/plots"),g=a("../../plots/cartesian/axes"),h=a("./compute_error");b.exports=function(a){for(var b=a.calcdata,c=0;c<b.length;c++){var e=b[c],h=e[0].trace;if(f.traceIs(h,"errorBarsOK")){var i=g.getFromId(a,h.xaxis),j=g.getFromId(a,h.yaxis);d(e,h,i,"x"),d(e,h,j,"y")}}}},{"../../plots/cartesian/axes":1073,"../../plots/plots":1109,"./compute_error":1027,"fast-isnumeric":72}],1027:[function(a,b,c){"use strict";function d(a,b){return"percent"===a?function(a){return Math.abs(a*b/100)}:"constant"===a?function(){return Math.abs(b)}:"sqrt"===a?function(a){return Math.sqrt(Math.abs(a))}:void 0}b.exports=function(a){var b=a.type,c=a.symmetric;if("data"===b){var e=a.array,f=a.arrayminus;return c||void 0===f?function(a,b){var c=+e[b];return[c,c]}:function(a,b){return[+f[b],+e[b]]}}var g=d(b,a.value),h=d(b,a.valueminus);return c||void 0===a.valueminus?function(a){var b=g(a);return[b,b]}:function(a){return[h(a),g(a)]}}},{}],1028:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plots/plots"),f=a("../../lib"),g=a("./attributes");b.exports=function(a,b,c,h){function i(a,b){return f.coerce(l,k,g,a,b)}var j="error_"+h.axis,k=b[j]={},l=a[j]||{},m=void 0!==l.array||void 0!==l.value||"sqrt"===l.type,n=i("visible",m);if(n!==!1){var o=i("type","array"in l?"data":"percent"),p=!0;if("sqrt"!==o&&(p=i("symmetric",!(("data"===o?"arrayminus":"valueminus")in l))),"data"===o){var q=i("array");if(q||(k.array=[]),i("traceref"),!p){var r=i("arrayminus");r||(k.arrayminus=[]),i("tracerefminus")}}else"percent"!==o&&"constant"!==o||(i("value"),p||i("valueminus"));var s="copy_"+h.inherit+"style";if(h.inherit){var t=b["error_"+h.inherit];(t||{}).visible&&i(s,!(l.color||d(l.thickness)||d(l.width)))}h.inherit&&k[s]||(i("color",c),i("thickness"),i("width",e.traceIs(b,"gl3d")?0:4))}}},{"../../lib":1053,"../../plots/plots":1109,"./attributes":1025,"fast-isnumeric":72}],1029:[function(a,b,c){"use strict";function d(a,b,c){var d={x:b.c2p(a.x),y:c.c2p(a.y)};return void 0!==a.yh&&(d.yh=c.c2p(a.yh),d.ys=c.c2p(a.ys),g(d.ys)||(d.noYS=!0,d.ys=c.c2p(a.ys,!0))),void 0!==a.xh&&(d.xh=b.c2p(a.xh),d.xs=b.c2p(a.xs),g(d.xs)||(d.noXS=!0,d.xs=b.c2p(a.xs,!0))),d}var e=a("../../plotly"),f=a("d3"),g=a("fast-isnumeric"),h=b.exports={};h.attributes=a("./attributes"),h.supplyDefaults=a("./defaults"),h.calc=a("./calc"),h.calcFromTrace=function(a,b){for(var c=a.x||[],d=a.y,e=c.length||d.length,f=new Array(e),g=0;g<e;g++)f[g]={x:c[g],y:d[g]};return f[0].trace=a,h.calc({calcdata:[f],_fullLayout:b}),f},h.plot=function(a,b,c){var h=b.x(),i=b.y();b.plot.select(".errorlayer").selectAll("g.errorbars").remove();var j;b.plot.select(".errorlayer").selectAll("g.errorbars").data(c).enter().append("g").attr("class","errorbars").each(function(a){var b=a[0].trace,c=b.error_x,k=b.error_y,l=e.Scatter.hasMarkers(b)&&b.marker.maxdisplayed>0;(k.visible||c.visible)&&f.select(this).selectAll("g").data(e.Lib.identity).enter().append("g").each(function(a){j=d(a,h,i);var b,e=f.select(this);if(!l||a.vis){if(k.visible&&g(j.x)&&g(j.yh)&&g(j.ys)){var m=k.width;b="M"+(j.x-m)+","+j.yh+"h"+2*m+"m-"+m+",0V"+j.ys,j.noYS||(b+="m-"+m+",0h"+2*m),e.append("path").classed("yerror",!0).attr("d",b)}if(c.visible&&g(j.y)&&g(j.xh)&&g(j.xs)){var n=(c.copy_ystyle?k:c).width;b="M"+j.xh+","+(j.y-n)+"v"+2*n+"m0,-"+n+"H"+j.xs,j.noXS||(b+="m0,-"+n+"v"+2*n),e.append("path").classed("xerror",!0).attr("d",b)}}})})},h.style=function(a){f.select(a).selectAll("g.errorbars").each(function(a){var b=f.select(this),c=a[0].trace,d=c.error_y||{},g=c.error_x||{};b.selectAll("g path.yerror").style("stroke-width",d.thickness+"px").call(e.Color.stroke,d.color),g.copy_ystyle&&(g=d),b.selectAll("g path.xerror").style("stroke-width",g.thickness+"px").call(e.Color.stroke,g.color)})},h.hoverInfo=function(a,b,c){b.error_y.visible&&(c.yerr=a.yh-a.y,b.error_y.symmetric||(c.yerrneg=a.y-a.ys)),b.error_x.visible&&(c.xerr=a.xh-a.x,b.error_x.symmetric||(c.xerrneg=a.x-a.xs))}},{"../../plotly":1070,"./attributes":1025,"./calc":1026,"./defaults":1028,d3:64,"fast-isnumeric":72}],1030:[function(a,b,c){var d=a("../../plots/font_attributes"),e=a("../color/attributes"),f=a("../../lib/extend").extendFlat;b.exports={bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:e.defaultLine},borderwidth:{valType:"number",min:0,dflt:0},font:f({},d,{}),traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"]},tracegroupgap:{valType:"number",min:0,dflt:10},x:{valType:"number",min:-2,max:3,dflt:1.02},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto"}}},{"../../lib/extend":1049,"../../plots/font_attributes":1079,"../color/attributes":1004}],1031:[function(a,b,c){"use strict";function d(a){return a.visible&&g.Plots.traceIs(a,"showLegend")}function e(a){return(a.traceorder||"").indexOf("grouped")!==-1}function f(a){return(a.traceorder||"").indexOf("reversed")!==-1}var g=a("../../plotly"),h=a("d3"),i=b.exports={};i.layoutAttributes=a("./attributes"),i.supplyLayoutDefaults=function(a,b,c){function h(a,b){return g.Lib.coerce(k,l,i.layoutAttributes,a,b)}for(var j,k=a.legend||{},l=b.legend={},m=0,n="normal",o=0;o<c.length;o++)j=c[o],d(j)&&(m++,g.Plots.traceIs(j,"pie")&&m++),(g.Plots.traceIs(j,"bar")&&"stack"===b.barmode||["tonextx","tonexty"].indexOf(j.fill)!==-1)&&(n=e({traceorder:n})?"grouped+reversed":"reversed"),void 0!==j.legendgroup&&""!==j.legendgroup&&(n=f({traceorder:n})?"reversed+grouped":"grouped");var p=g.Lib.coerce(a,b,g.Plots.layoutAttributes,"showlegend",m>1);p!==!1&&(h("bgcolor",b.paper_bgcolor),h("bordercolor"),h("borderwidth"),g.Lib.coerceFont(h,"font",b.font),h("traceorder",n),e(b.legend)&&h("tracegroupgap"),h("x"),h("xanchor"),h("y"),h("yanchor"),g.Lib.noneOrAll(k,l,["x","y"]))},i.lines=function(a){var b=a[0].trace,c=b.visible&&b.fill&&"none"!==b.fill,d=g.Scatter.hasLines(b),e=h.select(this).select(".legendfill").selectAll("path").data(c?[a]:[]);e.enter().append("path").classed("js-fill",!0),e.exit().remove(),e.attr("d","M5,0h30v6h-30z").call(g.Drawing.fillGroupStyle);var f=h.select(this).select(".legendlines").selectAll("path").data(d?[a]:[]);f.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),f.exit().remove(),f.call(g.Drawing.lineGroupStyle)},i.points=function(a){function b(a,b,c){var d=g.Lib.nestedProperty(i,a).get(),e=Array.isArray(d)&&b?b(d):d;if(c){if(e<c[0])return c[0];if(e>c[1])return c[1]}return e}function c(a){return a[0]}var d,e,f=a[0],i=f.trace,j=g.Scatter.hasMarkers(i),k=g.Scatter.hasText(i),l=g.Scatter.hasLines(i);if(j||k||l){var m={},n={};j&&(m.mc=b("marker.color",c),m.mo=b("marker.opacity",g.Lib.mean,[.2,1]),m.ms=b("marker.size",g.Lib.mean,[2,16]),m.mlc=b("marker.line.color",c),m.mlw=b("marker.line.width",g.Lib.mean,[0,5]),n.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),l&&(n.line={width:b("line.width",c,[0,10])}),k&&(m.tx="Aa",m.tp=b("textposition",c),m.ts=10,m.tc=b("textfont.color",c),m.tf=b("textfont.family",c)),d=[g.Lib.minExtend(f,m)],e=g.Lib.minExtend(i,n)}var o=h.select(this).select("g.legendpoints"),p=o.selectAll("path.scatterpts").data(j?d:[]);p.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),p.exit().remove(),p.call(g.Drawing.pointStyle,e),j&&(d[0].mrc=3);var q=o.selectAll("g.pointtext").data(k?d:[]);q.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),q.exit().remove(),q.selectAll("text").call(g.Drawing.textPointStyle,e)},i.bars=function(a){var b=a[0].trace,c=b.marker||{},d=c.line||{},e=h.select(this).select("g.legendpoints").selectAll("path.legendbar").data(g.Plots.traceIs(b,"bar")?[a]:[]);e.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),e.exit().remove(),e.each(function(a){var b=(a.mlw+1||d.width+1)-1,e=h.select(this);e.style("stroke-width",b+"px").call(g.Color.fill,a.mc||c.color),b&&e.call(g.Color.stroke,a.mlc||d.color)})},i.boxes=function(a){var b=a[0].trace,c=h.select(this).select("g.legendpoints").selectAll("path.legendbox").data(g.Plots.traceIs(b,"box")&&b.visible?[a]:[]);c.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),c.exit().remove(),c.each(function(a){var c=(a.lw+1||b.line.width+1)-1,d=h.select(this);d.style("stroke-width",c+"px").call(g.Color.fill,a.fc||b.fillcolor),c&&d.call(g.Color.stroke,a.lc||b.line.color)})},i.pie=function(a){var b=a[0].trace,c=h.select(this).select("g.legendpoints").selectAll("path.legendpie").data(g.Plots.traceIs(b,"pie")&&b.visible?[a]:[]);c.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),c.exit().remove(),c.size()&&c.call(g.Pie.styleOne,a[0],b)},i.style=function(a){a.each(function(a){var b=h.select(this),c=b.selectAll("g.legendfill").data([a]);c.enter().append("g").classed("legendfill",!0);var d=b.selectAll("g.legendlines").data([a]);d.enter().append("g").classed("legendlines",!0);var e=b.selectAll("g.legendsymbols").data([a]);e.enter().append("g").classed("legendsymbols",!0),e.style("opacity",a[0].trace.opacity),e.selectAll("g.legendpoints").data([a]).enter().append("g").classed("legendpoints",!0)}).each(i.bars).each(i.boxes).each(i.pie).each(i.lines).each(i.points)},i.texts=function(a,b,c,d,e){function f(a){g.util.convertToTspans(a,function(){b.firstRender&&i.repositionLegend(b,e)}),a.selectAll("tspan.line").attr({x:a.attr("x")})}var j=b._fullLayout,k=c[0].trace,l=g.Plots.traceIs(k,"pie"),m=k.index,n=l?c[0].label:k.name,o=h.select(a).selectAll("text.legendtext").data([0]);o.enter().append("text").classed("legendtext",!0),o.attr({x:40,y:0}).style("text-anchor","start").call(g.Drawing.font,j.legend.font).text(n).attr({"data-unformatted":n}),b._context.editable&&!l?o.call(g.util.makeEditable).call(f).on("edit",function(a){this.attr({"data-unformatted":a}),this.text(a).call(f),this.text()||(a="    "),g.restyle(b,"name",a,m)}):o.call(f)},i.getLegendData=function(a,b){function c(a,c){if(""!==a&&e(b))p.indexOf(a)===-1?(p.push(a),q=!0,o[a]=[[c]]):o[a].push([c]);else{var d="~~i"+s;p.push(d),o[d]=[[c]],s++}}var h,i,j,k,l,m,n,o={},p=[],q=!1,r={},s=0;for(l=0;l<a.length;l++)if(h=a[l],i=h[0],j=i.trace,k=j.legendgroup,d(j)&&j.showlegend)if(g.Plots.traceIs(j,"pie"))for(r[k]||(r[k]={}),m=0;m<h.length;m++)n=h[m].label,r[k][n]||(c(k,{label:n,color:h[m].color,i:h[m].i,trace:j}),r[k][n]=!0);else c(k,i);if(!p.length)return[];var t,u,v=p.length;if(q&&e(b))for(u=new Array(v),l=0;l<v;l++)t=o[p[l]],u[l]=f(b)?t.reverse():t;else{for(u=[new Array(v)],l=0;l<v;l++)t=o[p[l]][0],u[0][f(b)?v-l-1:l]=t;v=1}return b._lgroupsLength=v,u},i.draw=function(a){var b=a._fullLayout;if(b._infolayer&&a.calcdata){var c=b.legend,d=b.showlegend&&i.getLegendData(a.calcdata,c),f=b.hiddenlabels||[];if(!b.showlegend||!d.length)return b._infolayer.selectAll(".legend").remove(),void g.Plots.autoMargin(a,"legend");"undefined"==typeof a.firstRender?a.firstRender=!0:a.firstRender&&(a.firstRender=!1);var j=b._infolayer.selectAll("svg.legend").data([0]);j.enter(0).append("svg").attr("class","legend");var k=j.selectAll("rect.bg").data([0]);k.enter(0).append("rect").attr("class","bg"),k.call(g.Color.stroke,c.bordercolor).call(g.Color.fill,c.bgcolor).style("stroke-width",c.borderwidth+"px");var l=j.selectAll("g.groups").data(d);l.enter().append("g").attr("class","groups"),l.exit().remove(),e(c)&&l.attr("transform",function(a,b){return"translate(0,"+b*c.tracegroupgap+")"});var m=l.selectAll("g.traces").data(g.Lib.identity);if(m.enter().append("g").attr("class","traces"),m.exit().remove(),m.call(i.style).style("opacity",function(a){var b=a[0].trace;return g.Plots.traceIs(b,"pie")?f.indexOf(a[0].label)!==-1?.5:1:"legendonly"===b.visible?.5:1}).each(function(b,c){i.texts(this,a,b,c,m);var d=h.select(this).selectAll("rect").data([0]);d.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(g.Color.fill,"rgba(0,0,0,0)"),d.on("click",function(){if(!a._dragged){var c,d,e=a._fullData,h=b[0].trace,i=h.legendgroup,j=[];if(g.Plots.traceIs(h,"pie")){var k=b[0].label,l=f.slice(),m=l.indexOf(k);m===-1?l.push(k):l.splice(m,1),g.relayout(a,"hiddenlabels",l)}else{if(""===i)j=[h.index];else for(var n=0;n<e.length;n++)c=e[n],c.legendgroup===i&&j.push(c.index);d=h.visible!==!0||"legendonly",g.restyle(a,"visible",d,j)}}})}),i.repositionLegend(a,m),a._context.editable){var n,o,p,q,r,s;g.Fx.dragElement({element:j.node(),prepFn:function(){p=Number(j.attr("x")),q=Number(j.attr("y")),r=Number(j.attr("width")),s=Number(j.attr("height")),g.Fx.setCursor(j)},moveFn:function(b,d){var e=a._fullLayout._size;j.call(g.Drawing.setPosition,p+b,q+d),n=g.Fx.dragAlign(p+b,r,e.l,e.l+e.w,c.xanchor),o=g.Fx.dragAlign(q+d+s,-s,e.t+e.h,e.t,c.yanchor);var f=g.Fx.dragCursors(n,o,c.xanchor,c.yanchor);g.Fx.setCursor(j,f)},doneFn:function(b){g.Fx.setCursor(j),b&&void 0!==n&&void 0!==o&&g.relayout(a,{"legend.x":n,"legend.y":o})}})}}},i.repositionLegend=function(a,b){var c=a._fullLayout,d=c._size,f=c.legend,i=f.borderwidth,j=0,k=0;b.each(function(a){var b,c,d=a[0].trace,e=h.select(this),l=e.selectAll(".legendtoggle"),m=e.selectAll(".legendtext"),n=e.selectAll(".legendtext>tspan"),o=1.3*f.font.size,p=n[0].length||1,q=m.node()&&g.Drawing.bBox(m.node()).width,r=e.select("g[class*=math-group]");if(!d.showlegend)return void e.remove();if(r.node()){var s=g.Drawing.bBox(r.node());o=s.height,q=s.width,r.attr("transform","translate(0,"+o/4+")")}else b=o*(.3+(1-p)/2),m.attr("y",b),n.attr("y",b);c=Math.max(o*p,16)+3,e.attr("transform","translate("+i+","+(5+i+k+c/2)+")"),l.attr({x:0,y:-c/2,height:c}),k+=c,j=Math.max(j,q||0)}),e(f)&&(k+=(f._lgroupsLength-1)*f.tracegroupgap),b.selectAll(".legendtoggle").attr("width",(a._context.editable?0:j)+40),j+=45+2*i,k+=10+2*i;var l=d.l+d.w*f.x,m=d.t+d.h*(1-f.y),n="left";"right"===f.xanchor||"auto"===f.xanchor&&f.x>=2/3?(l-=j,n="right"):("center"===f.xanchor||"auto"===f.xanchor&&f.x>1/3)&&(l-=j/2,n="center");var o="top";"bottom"===f.yanchor||"auto"===f.yanchor&&f.y<=1/3?(m-=k,o="bottom"):("middle"===f.yanchor||"auto"===f.yanchor&&f.y<2/3)&&(m-=k/2,o="middle"),j=Math.ceil(j),k=Math.ceil(k),l=Math.round(l),m=Math.round(m),c._infolayer.selectAll("svg.legend").call(g.Drawing.setRect,l,m,j,k),c._infolayer.selectAll("svg.legend .bg").call(g.Drawing.setRect,i/2,i/2,j-i,k-i),g.Plots.autoMargin(a,"legend",{x:f.x,y:f.y,l:j*({right:1,center:.5}[n]||0),r:j*({left:1,center:.5}[n]||0),b:k*({top:1,middle:.5}[o]||0),t:k*({bottom:1,middle:.5}[o]||0)})}},{"../../plotly":1070,"./attributes":1030,d3:64}],1032:[function(a,b,c){"use strict";function d(a,b){var c=b.currentTarget,d=c.getAttribute("data-attr"),e=c.getAttribute("data-val")||!0,f=a._fullLayout,g={};if("zoom"===d)for(var h,j,k,l="in"===e?.5:2,m=(1+l)/2,o=(1-l)/2,p=i.Axes.list(a,null,!0),q=0;q<p.length;q++)h=p[q],h.fixedrange||(j=h._name,"auto"===e?g[j+".autorange"]=!0:"reset"===e?void 0===h._rangeInitial?g[j+".autorange"]=!0:g[j+".range"]=h._rangeInitial.slice():(k=h.range,g[j+".range"]=[m*k[0]+o*k[1],m*k[1]+o*k[0]]));else"hovermode"!==d||"x"!==e&&"y"!==e||(e=f._isHoriz?"y":"x",c.setAttribute("data-val",e)),g[d]=e;i.relayout(a,g).then(function(){"dragmode"===d&&(f._hasCartesian&&i.Fx.setCursor(f._paper.select(".nsewdrag"),n[e]),i.Fx.supplyLayoutDefaults(a.layout,f,a._fullData))})}function e(a,b){var c=b.currentTarget,d=c.getAttribute("data-attr"),e=c.getAttribute("data-val")||!0,f={};f[d]=e,i.relayout(a,f)}function f(a,b){for(var c=b.currentTarget,d=c.getAttribute("data-attr"),e=a.layout,f=a._fullLayout,g=i.Plots.getSubplotIds(f,"gl3d"),h=0;h<g.length;h++){var j=g[h],k=e[j],l=f[j],m=l._scene;if(k&&"resetDefault"!==d){if("resetLastSave"===d){var n=k.camera;n?m.setCamera(n):m.setCameraToDefault()}}else m.setCameraToDefault()}}function g(a,b){for(var c=b.currentTarget,d=c.getAttribute("data-attr"),e=c.getAttribute("data-val")||!0,f=a._fullLayout,g=i.Plots.getSubplotIds(f,"geo"),h=0;h<g.length;h++){var j=f[g[h]]._geo;if("zoom"===d){var k=j.projection.scale(),l="in"===e?2*k:.5*k;j.projection.scale(l),j.zoom.scale(l),j.render()}else"reset"===d?j.zoomReset():"hovermode"===d&&(j.showHover=!j.showHover)}}function h(a){var b=!a._fullLayout.hovermode&&"closest";i.relayout(a,"hovermode",b)}var i=a("../../plotly"),j=a("../../lib"),k=a("../../snapshot"),l=a("../../../build/ploticon"),m=b.exports={};m.toImage={name:"toImage",title:"Download plot as a png",icon:l.camera,click:function(a){var b="png";if(j.isIE())return void j.notifier("Snapshotting is unavailable in Internet Explorer. Consider exporting your images using the Plotly Cloud","long");if(a._snapshotInProgress)return void j.notifier("Snapshotting is still in progress - please hold","long");a._snapshotInProgress=!0,j.notifier("Taking snapshot - this may take a few seconds","long");var c=k.toImage(a,{format:b}),d=a.fn||"newplot";d+="."+b,c.once("success",function(b){a._snapshotInProgress=!1;var e=document.createElement("a");e.href=b,e.download=d,document.body.appendChild(e),e.click(),document.body.removeChild(e),c.clean()}),c.once("error",function(d){a._snapshotInProgress=!1,j.notifier("Sorry there was a problem downloading your "+b,"long"),console.error(d),c.clean()})}},m.sendDataToCloud={name:"sendDataToCloud",title:"Save and edit plot in cloud",icon:l.disk,click:function(a){i.Plots.sendDataToCloud(a)}},m.zoom2d={name:"zoom2d",title:"Zoom",attr:"dragmode",val:"zoom",icon:l.zoombox,click:d},m.pan2d={name:"pan2d",title:"Pan",attr:"dragmode",val:"pan",icon:l.pan,click:d},m.select2d={name:"select2d",title:"Box Select",attr:"dragmode",val:"select",icon:l.selectbox,click:d},m.lasso2d={name:"lasso2d",title:"Lasso Select",attr:"dragmode",val:"lasso",icon:l.lasso,click:d},m.zoomIn2d={name:"zoomIn2d",title:"Zoom in",attr:"zoom",val:"in",icon:l.zoom_plus,click:d},m.zoomOut2d={name:"zoomOut2d",title:"Zoom out",attr:"zoom",val:"out",icon:l.zoom_minus,click:d},m.autoScale2d={name:"autoScale2d",title:"Autoscale",attr:"zoom",val:"auto",icon:l.autoscale,click:d},m.resetScale2d={name:"resetScale2d",title:"Reset axes",attr:"zoom",val:"reset",icon:l.home,click:d},m.hoverClosestCartesian={name:"hoverClosestCartesian",title:"Show closest data on hover",attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:d},m.hoverCompareCartesian={name:"hoverCompareCartesian",title:"Compare data on hover",attr:"hovermode",val:function(a){return a._fullLayout._isHoriz?"y":"x"},icon:l.tooltip_compare,gravity:"ne",click:d};var n={pan:"move",zoom:"crosshair",select:"crosshair",
lasso:"crosshair"};m.zoom3d={name:"zoom3d",title:"Zoom",attr:"dragmode",val:"zoom",icon:l.zoombox,click:e},m.pan3d={name:"pan3d",title:"Pan",attr:"dragmode",val:"pan",icon:l.pan,click:e},m.orbitRotation={name:"orbitRotation",title:"orbital rotation",attr:"dragmode",val:"orbit",icon:l["3d_rotate"],click:e},m.tableRotation={name:"tableRotation",title:"turntable rotation",attr:"dragmode",val:"turntable",icon:l["z-axis"],click:e},m.resetCameraDefault3d={name:"resetCameraDefault3d",title:"Reset camera to default",attr:"resetDefault",icon:l.home,click:f},m.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:"Reset camera to last save",attr:"resetLastSave",icon:l.movie,click:f},m.hoverClosest3d={name:"hoverClosest3d",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:function(a,b){var c=b.currentTarget,d=JSON.parse(c.getAttribute("data-val"))||!1,e=a._fullLayout,f=i.Plots.getSubplotIds(e,"gl3d"),g=["xaxis","yaxis","zaxis"],h=["showspikes","spikesides","spikethickness","spikecolor"],j={},k={},l={};if(d)l=d,c.setAttribute("data-val",JSON.stringify(null));else{l={"allaxes.showspikes":!1};for(var m=0;m<f.length;m++)for(var n=f[m],o=e[n],p=j[n]={},q=0;q<3;q++){var r=g[q];k=p[r]={};for(var s=0;s<h.length;s++){var t=h[s];k[t]=o[r][t]}}c.setAttribute("data-val",JSON.stringify(j))}i.relayout(a,l)}},m.zoomInGeo={name:"zoomInGeo",title:"Zoom in",attr:"zoom",val:"in",icon:l.zoom_plus,click:g},m.zoomOutGeo={name:"zoomOutGeo",title:"Zoom in",attr:"zoom",val:"out",icon:l.zoom_minus,click:g},m.resetGeo={name:"resetGeo",title:"Reset",attr:"reset",val:null,icon:l.autoscale,click:g},m.hoverClosestGeo={name:"hoverClosestGeo",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:g},m.hoverClosestGl2d={name:"hoverClosestGl2d",title:"Toggle show closest data on hover",attr:"hovermode",val:null,toggle:!0,icon:l.tooltip_basic,gravity:"ne",click:h},m.hoverClosestPie={name:"hoverClosestPie",title:"Toggle show closest data on hover",attr:"hovermode",val:"closest",icon:l.tooltip_basic,gravity:"ne",click:h}},{"../../../build/ploticon":2,"../../lib":1053,"../../plotly":1070,"../../snapshot":1116}],1033:[function(a,b,c){"use strict";function d(a){this.container=a.container,this.element=document.createElement("div"),this.update(a.graphInfo,a.buttons),this.container.appendChild(this.element)}function e(a,b){var c=a._fullLayout,e=new d({graphInfo:a,container:c._paperdiv.node(),buttons:b});return c._privateplot&&g.select(e.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),e}var f=a("../../plotly"),g=a("d3"),h=a("../../../build/ploticon"),i=d.prototype;i.update=function(a,b){this.graphInfo=a;var c=this.graphInfo._context;"hover"===c.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar";var d=!this.hasButtons(b),e=this.hasLogo!==c.displaylogo;(d||e)&&(this.removeAllButtons(),this.updateButtons(b),c.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},i.updateButtons=function(a){var b=this;this.buttons=a,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(a){var c=b.createGroup();a.forEach(function(a){var d=a.name;if(!d)throw new Error("must provide button 'name' in button config");if(b.buttonsNames.indexOf(d)!==-1)throw new Error("button name '"+d+"' is taken");b.buttonsNames.push(d);var e=b.createButton(a);b.buttonElements.push(e),c.appendChild(e)}),b.element.appendChild(c)})},i.createGroup=function(){var a=document.createElement("div");return a.className="modebar-group",a},i.createButton=function(a){var b=this,c=document.createElement("a");c.setAttribute("rel","tooltip"),c.className="modebar-btn";var d=a.title;void 0===d&&(d=a.name),(d||0===d)&&c.setAttribute("data-title",d),void 0!==a.attr&&c.setAttribute("data-attr",a.attr);var e=a.val;void 0!==e&&("function"==typeof e&&(e=e(this.graphInfo)),c.setAttribute("data-val",e));var f=a.click;if("function"!=typeof f)throw new Error("must provide button 'click' function in button config");return c.addEventListener("click",function(c){a.click(b.graphInfo,c),b.updateActiveButton(c.currentTarget)}),c.setAttribute("data-toggle",a.toggle||!1),a.toggle&&c.classList.add("active"),c.appendChild(this.createIcon(a.icon||h.question)),c.setAttribute("data-gravity",a.gravity||"n"),c},i.createIcon=function(a){var b=a.ascent-a.descent,c="http://www.w3.org/2000/svg",d=document.createElementNS(c,"svg"),e=document.createElementNS(c,"path");return d.setAttribute("height","1em"),d.setAttribute("width",a.width/b+"em"),d.setAttribute("viewBox",[0,0,a.width,b].join(" ")),e.setAttribute("d",a.path),e.setAttribute("transform","matrix(1 0 0 -1 0 "+a.ascent+")"),d.appendChild(e),d},i.updateActiveButton=function(a){var b=this.graphInfo._fullLayout,c=void 0!==a?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(a){var d=a.getAttribute("data-val")||!0,e=a.getAttribute("data-attr"),f="true"===a.getAttribute("data-toggle"),h=g.select(a);f?e===c&&h.classed("active",!h.classed("active")):h.classed("active",b[e]===d)})},i.hasButtons=function(a){var b=this.buttons;if(!b)return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;++c){if(a[c].length!==b[c].length)return!1;for(var d=0;d<a[c].length;d++)if(a[c][d].name!==b[c][d].name)return!1}return!0},i.getLogo=function(){var a=this.createGroup(),b=document.createElement("a");return b.href="https://plot.ly/",b.target="_blank",b.setAttribute("data-title","Produced with Plotly"),b.className="modebar-btn plotlyjsicon modebar-btn--logo",b.appendChild(this.createIcon(h.plotlylogo)),a.appendChild(b),a},i.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},i.destroy=function(){f.Lib.removeElement(this.container.querySelector(".modebar"))},b.exports=e},{"../../../build/ploticon":2,"../../plotly":1070,d3:64}],1034:[function(a,b,c){"use strict";function d(a,b,c){function d(a){for(var c=[],d=0;d<a.length;d++){var e=a[d];b.indexOf(e)===-1&&c.push(j[e])}l.push(c)}var f,g,i=a._fullLayout,k=a._fullData,l=[];d(["toImage","sendDataToCloud"]),i._hasGL3D&&(d(["zoom3d","pan3d","orbitRotation","tableRotation"]),d(["resetCameraDefault3d","resetCameraLastSave3d"]),d(["hoverClosest3d"])),i._hasGeo&&(d(["zoomInGeo","zoomOutGeo","resetGeo"]),d(["hoverClosestGeo"]));var m=i._hasCartesian,n=i._hasGL2D,o=e(i),p=[];if(!m&&!n||o||(p=["zoom2d","pan2d"]),m){var q=!1;for(f=0;f<k.length&&!q;f++)g=k[f],g._module&&g._module.selectPoints&&("scatter"===g.type?(h.hasMarkers(g)||h.hasText(g))&&(q=!0):q=!0);q&&(p.push("select2d"),p.push("lasso2d"))}if(p.length&&d(p),!m&&!n||o||d(["zoomIn2d","zoomOut2d","autoScale2d","resetScale2d"]),m&&d(["hoverClosestCartesian","hoverCompareCartesian"]),n&&d(["hoverClosestGl2d"]),i._hasPie&&d(["hoverClosestPie"]),c.length)if(Array.isArray(c[0]))for(f=0;f<c.length;f++)l.push(c[f]);else l.push(c);return l}function e(a){for(var b=g.Axes.list({_fullLayout:a},null,!0),c=!0,d=0;d<b.length;d++)if(!b[d].fixedrange){c=!1;break}return c}function f(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<c.length;d++){var e=c[d];if("string"==typeof e){if(void 0===j[e])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));a[b][d]=j[e]}}return a}var g=a("../../plotly"),h=a("../../traces/scatter/subtypes"),i=a("./"),j=a("./buttons");b.exports=function(a){var b=a._fullLayout,c=a._context,e=b._modeBar;if(!c.displayModeBar)return void(e&&(e.destroy(),delete b._modeBar));if(!Array.isArray(c.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(c.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var g,h=c.modeBarButtons;g=Array.isArray(h)&&h.length?f(h):d(a,c.modeBarButtonsToRemove,c.modeBarButtonsToAdd),e?e.update(a,g):b._modeBar=i(a,g)}},{"../../plotly":1070,"../../traces/scatter/subtypes":1201,"./":1033,"./buttons":1032}],1035:[function(a,b,c){var d=a("../annotations/attributes"),e=a("../../traces/scatter/attributes"),f=a("../../lib/extend").extendFlat,g=e.line;b.exports={_isLinkedToArray:!0,type:{valType:"enumerated",values:["circle","rect","path","line"]},xref:f({},d.xref,{}),x0:{valType:"any"},x1:{valType:"any"},yref:f({},d.yref,{}),y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string"},opacity:{valType:"number",min:0,max:1,dflt:1},line:{color:g.color,width:g.width,dash:g.dash},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"}}},{"../../lib/extend":1049,"../../traces/scatter/attributes":1197,"../annotations/attributes":1002}],1036:[function(a,b,c){"use strict";function d(a,b){function c(b,c){return j.Lib.coerce(a,d,l.layoutAttributes,b,c)}var d={};c("opacity"),c("fillcolor"),c("line.color"),c("line.width"),c("line.dash");for(var e=a.path?"path":"rect",g=c("type",e),h=["x","y"],i=0;i<2;i++){var k=h[i],m={_fullLayout:b},n=j.Axes.coerceRef(a,d,m,k);if("path"!==g){var o=.25,p=.75;if("paper"!==n){var q=j.Axes.getFromId(m,n),r=f(q);o=r(q.range[0]+o*(q.range[1]-q.range[0])),p=r(q.range[0]+p*(q.range[1]-q.range[0]))}c(k+"0",o),c(k+"1",p)}}return"path"===g?c("path"):j.Lib.noneOrAll(a,d,["x0","x1","y0","y1"]),d}function e(a){return"category"===a.type?a.c2l:a.d2l}function f(a){return"category"===a.type?a.l2c:a.l2d}function g(a){return function(b){return a(b.replace("_"," "))}}function h(a,b){var c,d,f,h,i=b.type,k=j.Axes.getFromId(a,b.xref),m=j.Axes.getFromId(a,b.yref),n=a._fullLayout._size;if(k?(c=e(k),d=function(a){return k._offset+k.l2p(c(a,!0))}):d=function(a){return n.l+n.w*a},m?(f=e(m),h=function(a){return m._offset+m.l2p(f(a,!0))}):h=function(a){return n.t+n.h*(1-a)},"path"===i)return k&&"date"===k.type&&(d=g(d)),m&&"date"===m.type&&(h=g(h)),l.convertPath(b.path,d,h);var o=d(b.x0),p=d(b.x1),q=h(b.y0),r=h(b.y1);if("line"===i)return"M"+o+","+q+"L"+p+","+r;if("rect"===i)return"M"+o+","+q+"H"+p+"V"+r+"H"+o+"Z";var s=(o+p)/2,t=(q+r)/2,u=Math.abs(s-o),v=Math.abs(t-q),w="A"+u+","+v,x=s+u+","+t,y=s+","+(t-v);return"M"+x+w+" 0 1,1 "+y+w+" 0 0,1 "+x+"Z"}function i(a,b,c,d,e){var f="category"===a.type?Number:a.d2c;if(void 0!==b)return[f(b),f(c)];if(d){var h,i,j,k,l,o=1/0,p=-(1/0),q=d.match(m);for("date"===a.type&&(f=g(f)),h=0;h<q.length;h++)i=q[h],j=e[i.charAt(0)].drawn,void 0!==j&&(k=q[h].substr(1).match(n),!k||k.length<j||(l=f(k[j]),l<o&&(o=l),l>p&&(p=l)));return p>=o?[o,p]:void 0}}var j=a("../../plotly"),k=a("fast-isnumeric"),l=b.exports={};l.layoutAttributes=a("./attributes"),l.supplyLayoutDefaults=function(a,b){for(var c=a.shapes||[],e=b.shapes=[],f=0;f<c.length;f++)e.push(d(c[f]||{},b))},l.drawAll=function(a){var b=a._fullLayout;b._shapelayer.selectAll("path").remove();for(var c=0;c<b.shapes.length;c++)l.draw(a,c)},l.add=function(a){var b=a._fullLayout.shapes.length;j.relayout(a,"shapes["+b+"]","add")},l.draw=function(a,b,c,g){var i,m=a.layout,n=a._fullLayout;if(!k(b)||b===-1){if(!b&&Array.isArray(g))return m.shapes=g,l.supplyLayoutDefaults(m,n),void l.drawAll(a);if("remove"===g)return delete m.shapes,n.shapes=[],void l.drawAll(a);if(c&&"add"!==g){for(i=0;i<n.shapes.length;i++)l.draw(a,i,c,g);return}b=n.shapes.length,n.shapes.push({})}if(!c&&g){if("remove"===g){for(n._shapelayer.selectAll('[data-index="'+b+'"]').remove(),n.shapes.splice(b,1),m.shapes.splice(b,1),i=b;i<n.shapes.length;i++)n._shapelayer.selectAll('[data-index="'+(i+1)+'"]').attr("data-index",String(i)),l.draw(a,i);return}if("add"===g||j.Lib.isPlainObject(g)){n.shapes.splice(b,0,{});var o=j.Lib.isPlainObject(g)?j.Lib.extendFlat({},g):{text:"New text"};for(m.shapes?m.shapes.splice(b,0,o):m.shapes=[o],i=n.shapes.length-1;i>b;i--)n._shapelayer.selectAll('[data-index="'+(i-1)+'"]').attr("data-index",String(i)),l.draw(a,i)}}n._shapelayer.selectAll('[data-index="'+b+'"]').remove();var p=m.shapes[b];if(p){var q={xref:p.xref,yref:p.yref},r={};"string"==typeof c&&c?r[c]=g:j.Lib.isPlainObject(c)&&(r=c);var s=Object.keys(r);for(i=0;i<r.length;i++){var t=s[i];j.Lib.nestedProperty(p,t).set(r[t])}var u=["x0","x1","y0","y1"];for(i=0;i<4;i++){var v=u[i];if(void 0===r[v]&&void 0!==p[v]){var w,x=v.charAt(0),y=j.Axes.getFromId(a,j.Axes.coerceRef(q,{},a,x)),z=j.Axes.getFromId(a,j.Axes.coerceRef(p,{},a,x)),A=p[v];void 0!==r[x+"ref"]&&(y?(w=e(y)(A),A=(w-y.range[0])/(y.range[1]-y.range[0])):A=(A-z.domain[0])/(z.domain[1]-z.domain[0]),z?(w=z.range[0]+A*(z.range[1]-z.range[0]),A=f(z)(w)):A=y.domain[0]+A*(y.domain[1]-y.domain[0])),p[v]=A}}var B=d(p,n);n.shapes[b]=B;var C={"data-index":String(b),"fill-rule":"evenodd",d:h(a,B)},D=(B.xref+B.yref).replace(/paper/g,""),E=B.line.width?B.line.color:"rgba(0,0,0,0)",F=n._shapelayer.append("path").attr(C).style("opacity",B.opacity).call(j.Color.stroke,E).call(j.Color.fill,B.fillcolor).call(j.Drawing.dashLine,B.line.dash,B.line.width);D&&F.call(j.Drawing.setClipUrl,"clip"+n._uid+D)}};var m=/[MLHVQCTSZ][^MLHVQCTSZ]*/g,n=/[^\s,]+/g,o={M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},p={M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},q={M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0};l.convertPath=function(a,b,c){return a.replace(m,function(a){var d=0,e=a.charAt(0),f=o[e],g=p[e],h=q[e],i=a.substr(1).replace(n,function(a){return f[d]?a=b(a):g[d]&&(a=c(a)),d++,d>h&&(a="X"),a});return d>h&&(i=i.replace(/[\s,]*X.*/,""),console.log("ignoring extra params in segment "+a)),e+i})},l.calcAutorange=function(a){var b,c,d,e,f,g=a._fullLayout,h=g.shapes;if(h.length&&a._fullData.length)for(b=0;b<h.length;b++)c=h[b],d=c.line.width/2,"paper"!==c.xref&&(e=j.Axes.getFromId(a,c.xref),f=i(e,c.x0,c.x1,c.path,o),f&&j.Axes.expand(e,f,{ppad:d})),"paper"!==c.yref&&(e=j.Axes.getFromId(a,c.yref),f=i(e,c.y0,c.y1,c.path,p),f&&j.Axes.expand(e,f,{ppad:d}))}},{"../../plotly":1070,"./attributes":1035,"fast-isnumeric":72}],1037:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("d3"),f=a("fast-isnumeric"),g=d.Plots,h=b.exports={};h.draw=function(a,b){function c(a){d.Lib.syncOrAsync([i,j],a)}function i(b){return b.attr("transform",D?"rotate("+[D.rotate,n.x,n.y]+") translate(0, "+D.offset+")":null),b.style({"font-family":A,"font-size":e.round(B,2)+"px",fill:d.Color.rgb(C),opacity:H*d.Color.opacity(C),"font-weight":g.fontWeight}).attr(n).call(d.util.convertToTspans).attr(n),b.selectAll("tspan.line").attr(n),g.previousPromises(a)}function j(a){var b=e.select(a.node().parentNode);if(F&&F.selection&&F.side&&J){b.attr("transform",null);var c=0,g={left:"right",right:"left",top:"bottom",bottom:"top"}[F.side],h=["left","top"].indexOf(F.side)!==-1?-1:1,i=f(F.pad)?F.pad:2,j=d.Drawing.bBox(b.node()),k={left:0,top:0,right:o.width,bottom:o.height},l=r?o.width:(k[F.side]-j[F.side])*("left"===F.side||"top"===F.side?-1:1);if(l<0?c=l:(j.left-=F.offsetLeft,j.right-=F.offsetLeft,j.top-=F.offsetTop,j.bottom-=F.offsetTop,F.selection.each(function(){var a=d.Drawing.bBox(this);d.Lib.bBoxIntersect(j,a,i)&&(c=Math.max(c,h*(a[F.side]-j[g])+i))}),c=Math.min(l,c)),c>0||l<0){var m={left:[-c,0],right:[c,0],top:[0,-c],bottom:[0,c]}[F.side];b.attr("transform","translate("+m+")")}}}function k(){H=0,I=!0,J=N,o._infolayer.select("."+b).attr({"data-unformatted":J}).text(J).on("mouseover.opacity",function(){e.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){e.select(this).transition().duration(1e3).style("opacity",0)})}if(!b)return d.Axes.listIds(a).forEach(function(b){h.draw(a,b+"title")}),void h.draw(a,"gtitle");var l,m,n,o=a._fullLayout,p=o._size,q=b.charAt(0),r="cb"===b.substr(1,2);if(r){var s=b.substr(3).replace("title","");a._fullData.some(function(b,c){if(b.uid===s)return l=c,m=a.calcdata[c][0].t.cb.axis,!0})}else m=o[d.Axes.id2name(b.replace("title",""))]||o;var t,u,v,w,x,y=m===o?"title":m._name+".title",z=r?"colorscale":(m._id||q).toUpperCase()+" axis",A=m.titlefont.family,B=m.titlefont.size,C=m.titlefont.color,D="",E={},F={selection:e.select(a).selectAll("g."+m._id+"tick"),side:m.side},G=r?0:1.5;r?(F.offsetLeft=p.l,F.offsetTop=p.t):F.selection.size()&&(x=e.select(F.selection.node().parentNode).attr("transform").match(/translate\(([-\.\d]+),([-\.\d]+)\)/),x&&(F.offsetLeft=+x[1],F.offsetTop=+x[2])),r&&m.titleside?(t=p.l+m.titlex*p.w,u=p.t+(1-m.titley)*p.h+("top"===m.titleside?3+.75*B:-3-.25*B),n={x:t,y:u,"text-anchor":"start"},F={},b="h"+b):"x"===q?(v=m,w="free"===v.anchor?{_offset:p.t+(1-(v.position||0))*p.h,_length:0}:d.Axes.getFromId(a,v.anchor),t=v._offset+v._length/2,u=w._offset+("top"===v.side?-10-B*(G+(v.showticklabels?1:0)):w._length+10+B*(G+(v.showticklabels?1.5:.5))),n={x:t,y:u,"text-anchor":"middle"},F.side||(F.side="bottom")):"y"===q?(w=m,v="free"===w.anchor?{_offset:p.l+(w.position||0)*p.w,_length:0}:d.Axes.getFromId(a,w.anchor),u=w._offset+w._length/2,t=v._offset+("right"===w.side?v._length+10+B*(G+(w.showticklabels?1:.5)):-10-B*(G+(w.showticklabels?.5:0))),E={center:0},n={x:t,y:u,"text-anchor":"middle"},D={rotate:"-90",offset:0},F.side||(F.side="left")):(z="Plot",B=o.titlefont.size,t=o.width/2,u=o._size.t/2,n={x:t,y:u,"text-anchor":"middle"},F={});var H=1,I=!1,J=m.title.trim();""===J&&(H=0),J.match(/Click to enter .+ title/)&&(H=.2,I=!0);var K;if(r){K=e.select(a).selectAll("."+m._id.substr(1)+" .cbtitle");var L="h"===b.charAt(0)?b.substr(1):"h"+b;K.selectAll("."+L+",."+L+"-math-group").remove()}else K=o._infolayer.selectAll(".g-"+b).data([0]),K.enter().append("g").classed("g-"+b,!0);var M=K.selectAll("text").data([0]);M.enter().append("text"),M.text(J).attr("class",b),M.attr({"data-unformatted":J}).call(c);var N="Click to enter "+z.replace(/\d+/,"")+" title";a._context.editable?(J||k(),M.call(d.util.makeEditable).on("edit",function(b){if(r){var c=a._fullData[l];g.traceIs(c,"markerColorscale")?d.restyle(a,"marker.colorbar.title",b,l):d.restyle(a,"colorbar.title",b,l)}else d.relayout(a,y,b)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(c)}).on("input",function(a){this.text(a||" ").attr(n).selectAll("tspan.line").attr(n)})):J&&!J.match(/Click to enter .+ title/)||M.remove(),M.classed("js-placeholder",I)}},{"../../plotly":1070,d3:64,"fast-isnumeric":72}],1038:[function(a,b,c){b.exports={DZA:"algeria",AGO:"angola",EGY:"egypt",BGD:"bangladesh|^(?=.*east).*paki?stan",NER:"\\bniger(?!ia)",LIE:"liechtenstein",NAM:"namibia",BGR:"bulgaria",BOL:"bolivia",GHA:"ghana|gold.?coast",CCK:"\\bcocos|keeling",PAK:"^(?!.*east).*paki?stan",CPV:"verde",JOR:"jordan",LBR:"liberia",LBY:"libya",MYS:"malaysia",IOT:"british.?indian.?ocean",PRI:"puerto.?rico",MYT:"mayotte",PRK:"^(?=.*democrat).*\\bkorea|^(?=.*people).*\\bkorea|^(?=.*north).*\\bkorea|\\bd\\.?p\\.?r\\.?k",PSE:"palestin|\\bgaza|west.?bank",TZA:"tanzania",BWA:"botswana|bechuana",KHM:"cambodia|kampuchea|khmer|^p\\.?r\\.?k\\.?$",UMI:"minor.?outlying.?is",TTO:"trinidad|tobago",PRY:"paraguay",HKG:"hong.?kong",SAU:"\\bsa\\w*.?arabia",LBN:"lebanon",SVN:"slovenia",BFA:"burkina|\\bfaso|upper.?volta",SVK:"^(?!.*cze).*slovak",MRT:"mauritania",HRV:"croatia",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai).*china|^p\\.?r\\.?c\\.?$",KNA:"kitts|\\bnevis",JAM:"jamaica",SMR:"san.?marino",GIB:"gibraltar",DJI:"djibouti",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",FIN:"finland",URY:"uruguay",VAT:"holy.?see|vatican|papal.?st",STP:"\\bs(a|)o.?tom(e|)",SYC:"seychell",NPL:"nepal",CXR:"christmas",LAO:"\\blaos?\\b",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",BVT:"bouvet",ZAF:"\\bs\\w*.?africa",KIR:"kiribati",PHL:"philippines",SXM:"^(?!.*martin)(?!.*saba).*maarten",ROU:"r(o|u|ou)mania",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",SYR:"syria",MAC:"maca(o|u)",NFK:"norfolk",NIC:"nicaragua",MLT:"\\bmalta",KAZ:"kazak",TCA:"turks",PYF:"french.?polynesia|tahiti",NIU:"niue",DMA:"dominica(?!n)",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",BEN:"benin|dahome",GUF:"^(?=.*french).*guiana",BEL:"^(?!.*luxem).*belgium",MSR:"montserrat",TGO:"togo",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GUM:"\\bguam",LKA:"sri.?lanka|ceylon",SSD:"\\bs\\w*.?sudan",FLK:"falkland|malvinas",PCN:"pitcairn",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",GUY:"guyana|british.?guiana",CRI:"costa.?rica",COK:"\\bcook",MAR:"morocco|\\bmaroc",MNP:"mariana",LSO:"lesotho|basuto",HUN:"^(?!.*austr).*hungary",TKM:"turkmen",SUR:"surinam|dutch.?guiana",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",BMU:"bermuda",HMD:"heard.*mcdonald",TCD:"\\bchad",GEO:"^(?!.*south).*georgia",MNE:"^(?!.*serbia).*montenegro",MNG:"mongolia",MHL:"marshall",MTQ:"martinique",CSK:"czechoslovakia",BLZ:"belize|^(?=.*british).*honduras",DDR:"german.?democratic.?republic|^(d|g)\\.?d\\.?r\\.?$|^(?=.*east).*germany",MMR:"myanmar|burma",AFG:"afghan",BDI:"burundi",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",BLR:"belarus|byelo",BLM:"barth(e|)lemy",GRD:"grenada",TKL:"tokelau",GRC:"greece|hellenic|hellas",GRL:"greenland",SHN:"helena",AND:"andorra",MOZ:"mozambique",TJK:"tajik",THA:"thailand|\\bsiam",HTI:"haiti",MEX:"\\bmexic",ANT:"^(?=.*\\bant).*(nether|dutch)",ZWE:"zimbabwe|^(?!.*northern).*rhodesia",LCA:"\\blucia",IND:"india(?!.*ocea)",LVA:"latvia",BTN:"bhutan",VCT:"vincent",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",NOR:"norway",CZE:"^(?=.*rep).*czech|czechia|bohemia",ATF:"french.?southern|\\bfr.*\\bso.*\\ban.*\\b\\bt",ATG:"antigua",FJI:"fiji",HND:"^(?!.*brit).*honduras",MUS:"mauritius",DOM:"dominican",LUX:"^(?!.*belg).*luxem",ISR:"israel",YUG:"yugoslavia",FSM:"micronesia",PER:"peru",REU:"r(e|)union",IDN:"indonesia",VUT:"vanuatu|new.?hebrides",MKD:"macedonia|^f\\.?y\\.?r\\.?o\\.?m\\.?$",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bdr|\\bdr.*congo|\\bd\\.?r\\.?c|\\bd\\.?r\\.?o\\.?c|\\br\\.?d\\.?c|belgian.?congo|congo.?free.?state|kinshasa|zaire|l\\w{1,2}opoldville",COG:"^(?!.*\\bdem)(?!.*\\bdr)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l\\w{1,2}opoldville)(?!.*free).*\\bcongo",ISL:"iceland",GLP:"guadeloupe",ETH:"ethiopia|abyssinia",COM:"comoro",COL:"colombia",NGA:"nigeria",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TWN:"taiwan|taipei|formosa",PRT:"portugal",MDA:"moldov|b(a|e)ssarabia",GGY:"guernsey",MDG:"madagascar|malagasy",ATA:"antarctica",ECU:"ecuador",SEN:"senegal",ESH:"sahara",MDV:"maldive",ASM:"^(?=.*americ).*samoa",SPM:"miquelon",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",LTU:"lithuania",RWA:"rwanda",ZMB:"zambia|northern.?rhodesia",GMB:"gambia",WLF:"futuna|wallis",JEY:"jersey",FRO:"faroe|faeroe",GTM:"guatemala",DNK:"denmark",IMN:"^(?=.*isle).*\\bman",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baust.*\\bemp",SJM:"svalbard",VEN:"venezuela",PLW:"palau",KEN:"kenya|british.?east.?africa|east.?africa.?prot",TUR:"turkey",ALB:"albania",OMN:"\\boman|trucial",TUV:"tuvalu",ALA:"\\b(a|)land",BRN:"brunei",TUN:"tunisia",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",BRB:"barbados",BRA:"brazil",CIV:"ivoire|ivory",SRB:"^(?!.*monte).*serbia",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",USA:"^(?!.*islands).*united.?states|^u\\.?s\\.?a\\.?$|^u\\.?s\\.?$",QAT:"qatar",WSM:"^(?!.*amer).*samoa",AZE:"azerbaijan",GNB:"bissau|^(?=.*portu).*guinea",SWZ:"swaziland",TON:"tonga",CAN:"canada",UKR:"ukrain",KOR:"^(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea|\\br\\.?o\\.?k\\b",AIA:"anguill?a",CAF:"\\bcen.*\\baf|^c\\.?a\\.?r\\.?$",CHE:"switz|swiss",CYP:"cyprus",BIH:"herzegovina|bosnia",SGP:"singapore",SGS:"south.?georgia|sandwich",SOM:"somali",UZB:"uzbek",CMR:"cameroon",POL:"poland",EAZ:"zanz",KWT:"kuwait",ERI:"eritrea",GAB:"gabon",CYM:"cayman",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",EST:"estonia",MWI:"malawi|nyasa",ESP:"spain",IRQ:"\\biraq|mesopotamia",SLV:"el.?salvador",MLI:"\\bmali\\b",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",IRL:"ireland",IRN:"\\biran|persia",ABW:"^(?!.*bonaire).*\\baruba",SLE:"sierra",PAN:"panama",SDN:"^(?!.*\\bs(?!u)).*sudan",SLB:"solomon",NZL:"new.?zealand",MCO:"monaco",ITA:"italy",JPN:"japan",KGZ:"kyrgyz|kirghiz",UGA:"uganda",NCL:"new.?caledonia",PNG:"papua|\\bp.*\\bn.*\\bguin.*|^p\\.?n\\.?g\\.?$|new.?guinea",ARG:"argentin",SWE:"sweden",BHS:"bahamas",BHR:"bahrain",ARM:"armenia",NRU:"nauru",CUB:"\\bcuba"}},{}],1039:[function(a,b,c){"use strict";var d=b.exports={};d.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa"},d.axesNames=["lonaxis","lataxis"],d.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},d.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},d.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,80],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},d.clipPad=.001,d.precision=.1,d.landColor="#F0DC82",d.waterColor="#3399FF",d.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},d.sphereSVG={type:"Sphere"},d.fillLayers=["ocean","land","lakes"],d.lineLayers=["subunits","countries","coastlines","rivers","frame"],d.baseLayers=["ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame"],d.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"},d.baseLayersOverChoropleth=["rivers","lakes"]},{}],1040:[function(a,b,c){b.exports={solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}},{}],1041:[function(a,b,c){b.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],1042:[function(a,b,c){b.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},{}],1043:[function(a,b,c){"undefined"!=typeof MathJax?(c.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):c.MathJax=!1},{}],1044:[function(a,b,c){var d=a("./plotly");c.version=a("../package.json").version,c.plot=d.plot,c.newPlot=d.newPlot,c.restyle=d.restyle,c.relayout=d.relayout,c.redraw=d.redraw,c.extendTraces=d.extendTraces,c.prependTraces=d.prependTraces,c.addTraces=d.addTraces,c.deleteTraces=d.deleteTraces,c.moveTraces=d.moveTraces,c.setPlotConfig=a("./plot_api/set_plot_config"),c.Icons=a("../build/ploticon"),c.Plots=d.Plots,c.Fx=d.Fx,c.Snapshot=d.Snapshot,c.PlotSchema=d.PlotSchema,c.Queue=d.Queue,c.d3=a("d3")},{"../build/ploticon":2,"../package.json":1e3,"./plot_api/set_plot_config":1069,"./plotly":1070,d3:64}],1045:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){Array.isArray(a)&&(b[c]=a[d])}},{}],1046:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("tinycolor2"),f=a("./nested_property"),g=a("../components/colorscale/get_scale");Object.keys(a("../components/colorscale/scales"));c.valObjects={data_array:{coerceFunction:function(a,b,c){Array.isArray(a)?b.set(a):void 0!==c&&b.set(c)}},enumerated:{coerceFunction:function(a,b,c,d){d.coerceNumber&&(a=+a),d.values.indexOf(a)===-1?b.set(c):b.set(a)}},"boolean":{coerceFunction:function(a,b,c){a===!0||a===!1?b.set(a):b.set(c)}},number:{coerceFunction:function(a,b,c,e){!d(a)||void 0!==e.min&&a<e.min||void 0!==e.max&&a>e.max?b.set(c):b.set(+a)}},integer:{coerceFunction:function(a,b,c,e){a%1||!d(a)||void 0!==e.min&&a<e.min||void 0!==e.max&&a>e.max?b.set(c):b.set(+a)}},string:{coerceFunction:function(a,b,c,d){if(d.strict===!0&&"string"!=typeof a)return void b.set(c);var e=String(a);void 0===a||d.noBlank===!0&&!e?b.set(c):b.set(e)}},color:{coerceFunction:function(a,b,c){e(a).isValid()?b.set(a):b.set(c)}},colorscale:{coerceFunction:function(a,b,c){b.set(g(a,c))}},angle:{coerceFunction:function(a,b,c){"auto"===a?b.set("auto"):d(a)?(Math.abs(a)>180&&(a-=360*Math.round(a/360)),b.set(+a)):b.set(c)}},axisid:{coerceFunction:function(a,b,c){if("string"==typeof a&&a.charAt(0)===c){var d=Number(a.substr(1));if(d%1===0&&d>1)return void b.set(a)}b.set(c)}},sceneid:{coerceFunction:function(a,b,c){if("string"==typeof a&&a.substr(0,5)===c){var d=Number(a.substr(5));if(d%1===0&&d>1)return void b.set(a)}b.set(c)}},geoid:{coerceFunction:function(a,b,c){if("string"==typeof a&&a.substr(0,3)===c){var d=Number(a.substr(3));if(d%1===0&&d>1)return void b.set(a)}b.set(c)}},flaglist:{coerceFunction:function(a,b,c,d){if("string"!=typeof a)return void b.set(c);if(d.extras.indexOf(a)!==-1)return void b.set(a);for(var e=a.split("+"),f=0;f<e.length;){var g=e[f];d.flags.indexOf(g)===-1||e.indexOf(g)<f?e.splice(f,1):f++}e.length?b.set(e.join("+")):b.set(c)}},any:{coerceFunction:function(a,b,c){void 0===a?b.set(c):b.set(a)}},info_array:{coerceFunction:function(a,b,d,e){if(!Array.isArray(a))return void b.set(d);var f=e.items,g=[];d=Array.isArray(d)?d:[];for(var h=0;h<f.length;h++)c.coerce(a,g,f,"["+h+"]",d[h]);b.set(g)}}},c.coerce=function(a,b,d,e,g){var h=f(d,e).get(),i=f(a,e),j=f(b,e),k=i.get();return void 0===g&&(g=h.dflt),h.arrayOk&&Array.isArray(k)?(j.set(k),k):(c.valObjects[h.valType].coerceFunction(k,j,g,h),j.get())},c.coerce2=function(a,b,d,e,g){var h=f(a,e),i=c.coerce(a,b,d,e,g);return!!h.get()&&i},c.coerceFont=function(a,b,c){var d={};return c=c||{},d.family=a(b+".family",c.family),d.size=a(b+".size",c.size),d.color=a(b+".color",c.color),d}},{"../components/colorscale/get_scale":1016,"../components/colorscale/scales":1022,"./nested_property":1056,"fast-isnumeric":72,tinycolor2:998}],1047:[function(a,b,c){"use strict";function d(a,b){return String(a+Math.pow(10,b)).substr(1)}function e(a){var b;return b=s.test(a)?"Y":"y",b+=t.test(a)?"b":""}function f(a){var b;return b=v.test(a)?u.test(a)?"I":"H":"D"}var g=a("d3"),h=a("fast-isnumeric");c.dateTime2ms=function(a){try{if(a.getTime)return+a}catch(b){return!1}var c,d,e,f,g=String(a).split(" ");if(g.length>2)return!1;var i=g[0].split("-");if(i.length>3||3!==i.length&&g[1])return!1;if(4===i[0].length)c=Number(i[0]);else{if(2!==i[0].length)return!1;var j=(new Date).getFullYear();c=((Number(i[0])-j+70)%100+200)%100+j-70}return!!h(c)&&(1===i.length?new Date(c,0,1).getTime():(d=Number(i[1])-1,!(i[1].length>2)&&d>=0&&d<=11&&(2===i.length?new Date(c,d,1).getTime():(e=Number(i[2]),!(i[2].length>2)&&e>=1&&e<=31&&(e=new Date(c,d,e).getTime(),g[1]?(i=g[1].split(":"),!(i.length>3)&&(f=Number(i[0]),!(i[0].length>2)&&f>=0&&f<=23&&(e+=36e5*f,1===i.length?e:(d=Number(i[1]),!(i[1].length>2)&&d>=0&&d<=59&&(e+=6e4*d,2===i.length?e:(a=Number(i[2]),a>=0&&a<60&&e+1e3*a)))))):e)))));
},c.isDateTime=function(a){return c.dateTime2ms(a)!==!1},c.ms2DateTime=function(a,b){if("undefined"==typeof g)return void console.log("d3 is not defined");b||(b=0);var c=new Date(a),e=g.time.format("%Y-%m-%d")(c);return b<7776e6?(e+=" "+d(c.getHours(),2),b<432e6&&(e+=":"+d(c.getMinutes(),2),b<108e5&&(e+=":"+d(c.getSeconds(),2),b<3e5&&(e+="."+d(c.getMilliseconds(),3)))),e.replace(/([:\s]00)*\.?[0]*$/,"")):e};var i={H:["%H:%M:%S~%L","%H:%M:%S","%H:%M"],I:["%I:%M:%S~%L%p","%I:%M:%S%p","%I:%M%p"],D:["%H","%I%p","%Hh"]},j={Y:["%Y~%m~%d","%Y%m%d","%y%m%d","%m~%d~%Y","%d~%m~%Y"],Yb:["%b~%d~%Y","%d~%b~%Y","%Y~%d~%b","%Y~%b~%d"],y:["%m~%d~%y","%d~%m~%y","%y~%m~%d"],yb:["%b~%d~%y","%d~%b~%y","%y~%d~%b","%y~%b~%d"]},k=g.time.format.utc,l={Y:{H:["%Y~%m~%dT%H:%M:%S","%Y~%m~%dT%H:%M:%S~%L"].map(k),I:[],D:["%Y%m%d%H%M%S","%Y~%m","%m~%Y"].map(k)},Yb:{H:[],I:[],D:["%Y~%b","%b~%Y"].map(k)},y:{H:[],I:[],D:[]},yb:{H:[],I:[],D:[]}};["Y","Yb","y","yb"].forEach(function(a){j[a].forEach(function(b){l[a].D.push(k(b)),["H","I","D"].forEach(function(c){i[c].forEach(function(d){var e=l[a][c];e.push(k(b+"~"+d)),e.push(k(d+"~"+b))})})})});var m=/[a-z]*/g,n=function(a){return a.substr(0,3)},o=/(mon|tue|wed|thu|fri|sat|sun|the|of|st|nd|rd|th)/g,p=/[\s,\/\-\.\(\)]+/g,q=/~?([ap])~?m(~|$)/,r=function(a,b){return b+"m "},s=/\d\d\d\d/,t=/(^|~)[a-z]{3}/,u=/[ap]m/,v=/:/,w=/q([1-4])/,x=["31~mar","30~jun","30~sep","31~dec"],y=function(a,b){return x[b-1]},z=/ ?([+\-]\d\d:?\d\d|Z)$/;c.parseDate=function(a){if(a.getTime)return a;if("string"!=typeof a)return!1;a=a.toLowerCase().replace(m,n).replace(o,"").replace(p,"~").replace(q,r).replace(w,y).trim().replace(z,"");var b,c,d=null,g=e(a),h=f(a);b=l[g][h],c=b.length;for(var i=0;i<c&&!(d=b[i].parse(a));i++);if(!(d instanceof Date))return!1;var j=d.getTimezoneOffset();return d.setTime(d.getTime()+60*j*1e3),d}},{d3:64,"fast-isnumeric":72}],1048:[function(a,b,c){"use strict";var d=a("events").EventEmitter,e={init:function(a){if(a._ev instanceof d)return a;var b=new d;return a._ev=b,a.on=b.on.bind(b),a.once=b.once.bind(b),a.removeListener=b.removeListener.bind(b),a.removeAllListeners=b.removeAllListeners.bind(b),a.emit=function(c,d){"undefined"!=typeof $&&$(a).trigger(c,d),b.emit(c,d)},a},triggerHandler:function(a,b,c){var d,e;"undefined"!=typeof $&&(d=$(a).triggerHandler(b,c));var f=a._ev;if(!f)return d;var g=f._events[b];if(!g)return d;"function"==typeof g&&(g=[g]);for(var h=g.pop(),i=0;i<g.length;i++)g[i](c);return e=h(c),void 0!==d?d:e}};b.exports=e},{events:52}],1049:[function(a,b,c){"use strict";function d(a,b,c){for(var g,h,i,j,k,l,m=a[0],n=a.length,o=1;o<n;o++){g=a[o];for(h in g)i=m[h],j=g[h],b&&j&&(e(j)||(k=f(j)))?(k?(k=!1,l=i&&f(i)?i:[]):l=i&&e(i)?i:{},m[h]=d([l,j],b,c)):("undefined"!=typeof j||c)&&(m[h]=j)}return m}var e=a("./is_plain_object.js"),f=Array.isArray;c.extendFlat=function(){return d(arguments,!1,!1)},c.extendDeep=function(){return d(arguments,!0,!1)},c.extendDeepAll=function(){return d(arguments,!0,!0)}},{"./is_plain_object.js":1054}],1050:[function(a,b,c){"use strict";function d(a,b){var c=j[a];return c(b)}function e(a){for(var b,c,d=0;d<i.length;d++)if(b=i[d],c=new RegExp(h[b]),c.test(a.toLowerCase()))return b;console.warn("unrecognized country name: "+a+".")}var f=b.exports={},g=a("../plotly"),h=a("../constants/country-name_to_iso3.json"),i=Object.keys(h),j={"ISO-3":g.Lib.identity,"USA-states":g.Lib.identity,"country names":e};f.locationToFeature=function(a,b,c){for(var e,f=d(a,b),g=0;g<c.length;g++)if(e=c[g],e.id===f)return e;console.warn(["location with id",f,"does not have a matching topojson feature at this resolution."].join(" "))}},{"../constants/country-name_to_iso3.json":1038,"../plotly":1070}],1051:[function(a,b,c){"use strict";function d(a,b){var c=k(a);return c[3]*=b,c}function e(a){return i(a).isValid()?a:l}function f(a){return j(a)?a:m}function g(a,b,c){var g,i,j,k,n,o=a.color,p=Array.isArray(o),q=Array.isArray(b),r=[];if(g=void 0!==a.colorscale?h.Colorscale.makeScaleFunction(a.colorscale,a.cmin,a.cmax):e,i=p?function(a,b){return void 0===a[b]?l:g(a[b])}:e,j=q?function(a,b){return void 0===a[b]?m:f(a[b])}:f,p||q)for(var s=0;s<c;s++)k=i(o,s),n=j(b,s),r[s]=d(k,n);else r=d(o,b);return r}var h=a("../plotly"),i=a("tinycolor2"),j=a("fast-isnumeric"),k=a("./str2rgbarray"),l=a("../components/color/attributes").defaultLine,m=1;b.exports=g},{"../components/color/attributes":1004,"../plotly":1070,"./str2rgbarray":1063,"fast-isnumeric":72,tinycolor2:998}],1052:[function(a,b,c){"use strict";function d(a){for(var b=0;(b=a.indexOf("<sup>",b))>=0;){var c=a.indexOf("</sup>",b);if(c<b)break;a=a.slice(0,b)+i(a.slice(b+5,c))+a.slice(c+6)}return a}function e(a){return a.replace(/\<br\>/g,"\n")}function f(a){return a.replace(/\<.*\>/g,"")}function g(a){for(var b=0;(b=a.indexOf("&",b))>=0;){var c=a.indexOf(";",b);if(c<b)b+=1;else{var d=j[a.slice(b+1,c)];a=d?a.slice(0,b)+d+a.slice(c+1):a.slice(0,b)+a.slice(c+1)}}return a}function h(a){return""+g(f(d(e(a))))}var i=a("superscript-text"),j={mu:"",amp:"&",lt:"<",gt:">"};b.exports=h},{"superscript-text":997}],1053:[function(a,b,c){"use strict";var d=a("d3"),e=b.exports={};e.nestedProperty=a("./nested_property"),e.isPlainObject=a("./is_plain_object");var f=a("./coerce");e.valObjects=f.valObjects,e.coerce=f.coerce,e.coerce2=f.coerce2,e.coerceFont=f.coerceFont;var g=a("./dates");e.dateTime2ms=g.dateTime2ms,e.isDateTime=g.isDateTime,e.ms2DateTime=g.ms2DateTime,e.parseDate=g.parseDate;var h=a("./search");e.findBin=h.findBin,e.sorterAsc=h.sorterAsc,e.distinctVals=h.distinctVals,e.roundUp=h.roundUp;var i=a("./stats");e.aggNums=i.aggNums,e.len=i.len,e.mean=i.mean,e.variance=i.variance,e.stdev=i.stdev,e.interp=i.interp;var j=a("./matrix");e.init2dArray=j.init2dArray,e.transposeRagged=j.transposeRagged,e.dot=j.dot,e.translationMatrix=j.translationMatrix,e.rotationMatrix=j.rotationMatrix,e.rotationXYMatrix=j.rotationXYMatrix,e.apply2DTransform=j.apply2DTransform,e.apply2DTransform2=j.apply2DTransform2;var k=a("./extend");e.extendFlat=k.extendFlat,e.extendDeep=k.extendDeep,e.extendDeepAll=k.extendDeepAll,e.notifier=a("./notifier"),e.swapAttrs=function(a,b,c,d){c||(c="x"),d||(d="y");for(var f=0;f<b.length;f++){var g=b[f],h=e.nestedProperty(a,g.replace("?",c)),i=e.nestedProperty(a,g.replace("?",d)),j=h.get();h.set(i.get()),i.set(j)}},e.pauseEvent=function(a){return a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,!1},e.VERBOSE=!1,e.TIMER=(new Date).getTime(),e.log=function(){e.VERBOSE&&console.log.apply(console,arguments)},e.markTime=function(a){if(e.VERBOSE){var b=(new Date).getTime();console.log(a,b-e.TIMER,"(msec)"),"trace"===e.VERBOSE&&console.trace(),e.TIMER=b}},e.constrain=function(a,b,c){return b>c?Math.max(c,Math.min(b,a)):Math.max(b,Math.min(c,a))},e.bBoxIntersect=function(a,b,c){return c=c||0,a.left<=b.right+c&&b.left<=a.right+c&&a.top<=b.bottom+c&&b.top<=a.bottom+c},e.identity=function(a){return a},e.randstr=function l(a,b,c){if(c||(c=16),void 0===b&&(b=24),b<=0)return"0";var d,e,f,g=Math.log(Math.pow(2,b))/Math.log(c),h="";for(d=2;g===1/0;d*=2)g=Math.log(Math.pow(2,b/d))/Math.log(c)*d;var i=g-Math.floor(g);for(d=0;d<Math.floor(g);d++)f=Math.floor(Math.random()*c).toString(c),h=f+h;i&&(e=Math.pow(c,i),f=Math.floor(Math.random()*e).toString(c),h=f+h);var j=parseInt(h,c);return a&&a.indexOf(h)>-1||j!==1/0&&j>=Math.pow(2,b)?l(a,b,c):h},e.OptionControl=function(a,b){a||(a={}),b||(b="opt");var c={};return c.optionList=[],c._newoption=function(d){d[b]=a,c[d.name]=d,c.optionList.push(d)},c["_"+b]=a,c},e.smooth=function(a,b){if(b=Math.round(b)||0,b<2)return a;var c,d,e,f,g=a.length,h=2*g,i=2*b-1,j=new Array(i),k=new Array(g);for(c=0;c<i;c++)j[c]=(1-Math.cos(Math.PI*(c+1)/b))/(2*b);for(c=0;c<g;c++){for(f=0,d=0;d<i;d++)e=c+d+1-b,e<-g?e-=h*Math.round(e/h):e>=h&&(e-=h*Math.floor(e/h)),e<0?e=-1-e:e>=g&&(e=h-1-e),f+=a[e]*j[d];k[c]=f}return k},e.promiseError=function(a){console.log(a,a.stack)},e.syncOrAsync=function(a,b,c){function d(){return e.markTime("async done "+g.name),e.syncOrAsync(a,b,c)}for(var f,g;a.length;){if(g=a.splice(0,1)[0],f=g(b),f&&f.then)return f.then(d).then(void 0,e.promiseError);e.markTime("sync done "+g.name)}return c&&c(b)},e.stripTrailingSlash=function(a){return"/"===a.substr(-1)?a.substr(0,a.length-1):a},e.noneOrAll=function(a,b,c){if(a){var d,e,f=!1,g=!0;for(d=0;d<c.length;d++)e=a[c[d]],void 0!==e&&null!==e?f=!0:g=!1;if(f&&!g)for(d=0;d<c.length;d++)a[c[d]]=b[c[d]]}},e.mergeArray=function(a,b,c){if(Array.isArray(a))for(var d=Math.min(a.length,b.length),e=0;e<d;e++)b[e][c]=a[e]},e.minExtend=function(a,b){var c={};"object"!=typeof b&&(b={});var d,f,g,h=3,i=Object.keys(a);for(d=0;d<i.length;d++)f=i[d],g=a[f],"_"!==f.charAt(0)&&"function"!=typeof g&&("module"===f?c[f]=g:Array.isArray(g)?c[f]=g.slice(0,h):g&&"object"==typeof g?c[f]=e.minExtend(a[f],b[f]):c[f]=g);for(i=Object.keys(b),d=0;d<i.length;d++)f=i[d],g=b[f],"object"==typeof g&&f in c&&"object"==typeof c[f]||(c[f]=g);return c},e.titleCase=function(a){return a.charAt(0).toUpperCase()+a.substr(1)},e.containsAny=function(a,b){for(var c=0;c<b.length;c++)if(a.indexOf(b[c])!==-1)return!0;return!1},e.getPlotDiv=function(a){for(;a&&a.removeAttribute;a=a.parentNode)if(e.isPlotDiv(a))return a},e.isPlotDiv=function(a){var b=d.select(a);return b.size()&&b.classed("js-plotly-plot")},e.removeElement=function(a){var b=a&&a.parentNode;b&&b.removeChild(a)},e.addStyleRule=function(a,b){if(!e.styleSheet){var c=document.createElement("style");c.appendChild(document.createTextNode("")),document.head.appendChild(c),e.styleSheet=c.sheet}var d=e.styleSheet;d.insertRule?d.insertRule(a+"{"+b+"}",0):d.addRule?d.addRule(a,b,0):console.warn("addStyleRule failed")},e.isIE=function(){return"undefined"!=typeof window.navigator.msSaveBlob}},{"./coerce":1046,"./dates":1047,"./extend":1049,"./is_plain_object":1054,"./matrix":1055,"./nested_property":1056,"./notifier":1057,"./search":1060,"./stats":1062,d3:64}],1054:[function(a,b,c){"use strict";b.exports=function(a){return"[object Object]"===Object.prototype.toString.call(a)&&Object.getPrototypeOf(a)===Object.prototype}},{}],1055:[function(a,b,c){"use strict";c.init2dArray=function(a,b){for(var c=new Array(a),d=0;d<a;d++)c[d]=new Array(b);return c},c.transposeRagged=function(a){var b,c,d=0,e=a.length;for(b=0;b<e;b++)d=Math.max(d,a[b].length);var f=new Array(d);for(b=0;b<d;b++)for(f[b]=new Array(e),c=0;c<e;c++)f[b][c]=a[c][b];return f},c.dot=function(a,b){if(!a.length||!b.length||a.length!==b.length)return null;var d,e,f=a.length;if(a[0].length)for(d=new Array(f),e=0;e<f;e++)d[e]=c.dot(a[e],b);else if(b[0].length){var g=c.transposeRagged(b);for(d=new Array(g.length),e=0;e<g.length;e++)d[e]=c.dot(a,g[e])}else for(d=0,e=0;e<f;e++)d+=a[e]*b[e];return d},c.translationMatrix=function(a,b){return[[1,0,a],[0,1,b],[0,0,1]]},c.rotationMatrix=function(a){var b=a*Math.PI/180;return[[Math.cos(b),-Math.sin(b),0],[Math.sin(b),Math.cos(b),0],[0,0,1]]},c.rotationXYMatrix=function(a,b,d){return c.dot(c.dot(c.translationMatrix(b,d),c.rotationMatrix(a)),c.translationMatrix(-b,-d))},c.apply2DTransform=function(a){return function(){var b=arguments;3===b.length&&(b=b[0]);var d=1===arguments.length?b[0]:[b[0],b[1]];return c.dot(a,[d[0],d[1],1]).slice(0,2)}},c.apply2DTransform2=function(a){var b=c.apply2DTransform(a);return function(a){return b(a.slice(0,2)).concat(b(a.slice(2,4)))}}},{}],1056:[function(a,b,c){"use strict";function d(a,b){return function(){var c,e,f,g,h,i=a;for(g=0;g<b.length-1;g++){if(c=b[g],c===-1){for(e=!0,f=[],h=0;h<i.length;h++)f[h]=d(i[h],b.slice(g+1))(),f[h]!==f[0]&&(e=!1);return e?f[0]:f}if("number"==typeof c&&!Array.isArray(i))return;if(i=i[c],"object"!=typeof i||null===i)return}if("object"==typeof i&&null!==i&&(f=i[b[g]],null!==f))return f}}function e(a,b){var c=["annotations","shapes","range","domain"],d=c.indexOf(b)===-1;return Array.isArray(a)&&d}function f(a,b){return function(c){var d,f,k=a,l=[a],m=j(c)&&!e(c,b[b.length-1]);for(f=0;f<b.length-1;f++){if(d=b[f],"number"==typeof d&&!Array.isArray(k))throw"array index but container is not an array";if(d===-1){if(m=!g(k,b.slice(f+1),c))break;return}if(!h(k,d,b[f+1],m))break;if(k=k[d],"object"!=typeof k||null===k)throw"container is not an object";l.push(k)}m?(f===b.length-1&&delete k[b[f]],i(l)):k[b[f]]=c}}function g(a,b,c){var d,e=Array.isArray(c),g=!0,i=c,k=!e&&j(c),l=b[0];for(d=0;d<a.length;d++)e&&(i=c[d%c.length],k=j(i)),k&&(g=!1),h(a,d,l,k)&&f(a[d],b)(i);return g}function h(a,b,c,d){if(void 0===a[b]){if(d)return!1;"number"==typeof c?a[b]=[]:a[b]={}}return!0}function i(a){var b,c,d,f,g;for(b=a.length-1;b>=0;b--){if(d=a[b],g=!1,Array.isArray(d))for(c=d.length-1;c>=0;c--)j(d[c])?g?d[c]=void 0:d.pop():g=!0;else if("object"==typeof d&&null!==d)for(f=Object.keys(d),g=!1,c=f.length-1;c>=0;c--)j(d[f[c]])&&!e(d[f[c]],f[c])?delete d[f[c]]:g=!0;if(g)return}}function j(a){return void 0===a||null===a||"object"==typeof a&&(Array.isArray(a)?!a.length:!Object.keys(a).length)}function k(a,b,c){return{set:function(){throw"bad container"},get:function(){},astr:b,parts:c,obj:a}}var l=a("fast-isnumeric");b.exports=function(a,b){if(l(b))b=String(b);else if("string"!=typeof b||"[-1]"===b.substr(b.length-4))throw"bad property string";for(var c,e,g,h=0,i=b.split(".");h<i.length;){if(c=String(i[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(c[1])i[h]=c[1];else{if(0!==h)throw"bad property string";i.splice(0,1)}for(e=c[2].substr(1,c[2].length-2).split("]["),g=0;g<e.length;g++)h++,i.splice(h,0,Number(e[g]))}h++}return"object"!=typeof a?k(a,b,i):{set:f(a,i),get:d(a,i),astr:b,parts:i,obj:a}}},{"fast-isnumeric":72}],1057:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=[];b.exports=function(a,b){function c(a){a.duration(700).style("opacity",0).each("end",function(a){var b=f.indexOf(a);b!==-1&&f.splice(b,1),d.select(this).remove()})}if(f.indexOf(a)===-1){f.push(a);var g=1e3;e(b)?g=b:"long"===b&&(g=3e3);var h=d.select("body").selectAll(".plotly-notifier").data([0]);h.enter().append("div").classed("plotly-notifier",!0);var i=h.selectAll(".notifier-note").data(f);i.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(a){var b=d.select(this);b.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){b.transition().call(c)}),b.append("p").html(a),b.transition().duration(700).style("opacity",1).transition().delay(g).call(c)})}}},{d3:64,"fast-isnumeric":72}],1058:[function(a,b,c){"use strict";var d=a("./matrix").dot,e=b.exports={};e.tester=function(a){function b(a,b){var c=a[0],d=a[1];return!(c<e||c>f||d<g||d>h)&&(!b||!j(a))}function c(a,b){var c=a[0],i=a[1];if(c<e||c>f||i<g||i>h)return!1;var j,k,l,m,n,o=d.length,p=d[0][0],q=d[0][1],r=0;for(j=1;j<o;j++)if(k=p,l=q,p=d[j][0],q=d[j][1],m=Math.min(k,p),!(c<m||c>Math.max(k,p)||i>Math.max(l,q)))if(i<Math.min(l,q))c!==m&&r++;else{if(n=p===k?i:l+(c-k)*(q-l)/(p-k),i===n)return 1!==j||!b;i<=n&&c!==m&&r++}return r%2===1}var d=a.slice(),e=d[0][0],f=e,g=d[0][1],h=g;d.push(d[0]);for(var i=1;i<d.length;i++)e=Math.min(e,d[i][0]),f=Math.max(f,d[i][0]),g=Math.min(g,d[i][1]),h=Math.max(h,d[i][1]);var j,k=!1;return 5===d.length&&(d[0][0]===d[1][0]?d[2][0]===d[3][0]&&d[0][1]===d[3][1]&&d[1][1]===d[2][1]&&(k=!0,j=function(a){return a[0]===d[0][0]}):d[0][1]===d[1][1]&&d[2][1]===d[3][1]&&d[0][0]===d[3][0]&&d[1][0]===d[2][0]&&(k=!0,j=function(a){return a[1]===d[0][1]})),{xmin:e,xmax:f,ymin:g,ymax:h,pts:d,contains:k?b:c,isRect:k}};var f=e.isSegmentBent=function(a,b,c,e){var f,g,h,i=a[b],j=[a[c][0]-i[0],a[c][1]-i[1]],k=d(j,j),l=Math.sqrt(k),m=[-j[1]/l,j[0]/l];for(f=b+1;f<c;f++)if(g=[a[f][0]-i[0],a[f][1]-i[1]],h=d(g,j),h<0||h>k||Math.abs(d(g,m))>e)return!0;return!1};e.filter=function(a,b){function c(c){a.push(c);var h=d.length,i=e;d.splice(g+1);for(var j=i+1;j<a.length;j++)(j===a.length-1||f(a,i,j+1,b))&&(d.push(a[j]),d.length<h-2&&(e=j,g=d.length-1),i=j)}var d=[a[0]],e=0,g=0;if(a.length>1){var h=a.pop();c(h)}return{addPt:c,raw:a,filtered:d}}},{"./matrix":1055}],1059:[function(a,b,c){"use strict";function d(a,b){for(var c,d=[],f=0;f<b.length;f++)c=b[f],c===a?d[f]=c:"object"==typeof c?d[f]=Array.isArray(c)?e.Lib.extendDeep([],c):e.Lib.extendDeepAll({},c):d[f]=c;return d}var e=a("../plotly"),f={};f.add=function(a,b,c,d,e){var f,g;return a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1},g=a.undoQueue.index,a.autoplay?void(a.undoQueue.inSequence||(a.autoplay=!1)):(!a.undoQueue.sequence||a.undoQueue.beginSequence?(f={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},a.undoQueue.queue.splice(g,a.undoQueue.queue.length-g,f),a.undoQueue.index+=1):f=a.undoQueue.queue[g-1],a.undoQueue.beginSequence=!1,f.undo.calls.unshift(b),f.undo.args.unshift(c),f.redo.calls.push(d),void f.redo.args.push(e))},f.startSequence=function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1},a.undoQueue.sequence=!0,a.undoQueue.beginSequence=!0},f.stopSequence=function(a){a.undoQueue=a.undoQueue||{index:0,queue:[],sequence:!1},a.undoQueue.sequence=!1,a.undoQueue.beginSequence=!1},f.undo=function(a){var b,c;if(a.framework&&a.framework.isPolar)return void a.framework.undo();if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,b=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,c=0;c<b.undo.calls.length;c++)f.plotDo(a,b.undo.calls[c],b.undo.args[c]);a.undoQueue.inSequence=!1,a.autoplay=!1}},f.redo=function(a){var b,c;if(a.framework&&a.framework.isPolar)return void a.framework.redo();if(!(void 0===a.undoQueue||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(b=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,c=0;c<b.redo.calls.length;c++)f.plotDo(a,b.redo.calls[c],b.redo.args[c]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},f.plotDo=function(a,b,c){a.autoplay=!0,c=d(a,c),b.apply(null,c)},b.exports=f},{"../plotly":1070}],1060:[function(a,b,c){"use strict";function d(a,b){return a<b}function e(a,b){return a<=b}function f(a,b){return a>b}function g(a,b){return a>=b}var h=a("fast-isnumeric");c.findBin=function(a,b,c){if(h(b.start))return c?Math.ceil((a-b.start)/b.size)-1:Math.floor((a-b.start)/b.size);var i,j,k=0,l=b.length,m=0;for(j=b[b.length-1]>=b[0]?c?d:e:c?g:f;k<l&&m++<100;)i=Math.floor((k+l)/2),j(b[i],a)?k=i+1:l=i;return m>90&&console.log("Long binary search..."),k-1},c.sorterAsc=function(a,b){return a-b},c.distinctVals=function(a){var b=a.slice();b.sort(c.sorterAsc);for(var d=b.length-1,e=b[d]-b[0]||1,f=e/(d||1)/1e4,g=[b[0]],h=0;h<d;h++)b[h+1]>b[h]+f&&(e=Math.min(e,b[h+1]-b[h]),g.push(b[h+1]));return{vals:g,minDiff:e}},c.roundUp=function(a,b,c){for(var d,e=0,f=b.length-1,g=0,h=c?0:1,i=c?1:0,j=c?Math.ceil:Math.floor;e<f&&g++<100;)d=j((e+f)/2),b[d]<=a?e=d+h:f=d-i;return b[e]}},{"fast-isnumeric":72}],1061:[function(a,b,c){"use strict";var d=a("../plotly");b.exports=function(a){var b=function(){};for(var c in a)"function"==typeof a[c]&&(a[c]=b);a.destroy=function(){a.container.parentNode.removeChild(a.container)};var e=document.createElement("div");return e.textContent="Webgl is not supported by your browser - visit http://get.webgl.org for more info",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=d.Color.defaults[0],a.container.appendChild(e),a.container.style.background="#FFFFFF",a.container.onclick=function(){window.open("http://get.webgl.org")},!1}},{"../plotly":1070}],1062:[function(a,b,c){"use strict";var d=a("fast-isnumeric");c.aggNums=function(a,b,e,f){var g,h;if(f||(f=e.length),d(b)||(b=!1),Array.isArray(e[0])){for(h=new Array(f),g=0;g<f;g++)h[g]=c.aggNums(a,b,e[g]);e=h}for(g=0;g<f;g++)d(b)?d(e[g])&&(b=a(+b,+e[g])):b=e[g];return b},c.len=function(a){return c.aggNums(function(a){return a+1},0,a)},c.mean=function(a,b){return b||(b=c.len(a)),c.aggNums(function(a,b){return a+b},0,a)/b},c.variance=function(a,b,e){return b||(b=c.len(a)),d(e)||(e=c.mean(a,b)),c.aggNums(function(a,b){return a+Math.pow(b-e,2)},0,a)/b},c.stdev=function(a,b,d){return Math.sqrt(c.variance(a,b,d))},c.interp=function(a,b){if(!d(b))throw"n should be a finite number";if(b=b*a.length-.5,b<0)return a[0];if(b>a.length-1)return a[a.length-1];var c=b%1;return c*a[Math.ceil(b)]+(1-c)*a[Math.floor(b)]}},{"fast-isnumeric":72}],1063:[function(a,b,c){"use strict";function d(a){return a=e(a),f.str2RgbaArray(a.toRgbString())}var e=a("tinycolor2"),f=a("arraytools");b.exports=d},{arraytools:47,tinycolor2:998}],1064:[function(a,b,c){"use strict";function d(a,b){return a.node().getBoundingClientRect()[b]}function e(a){return a.replace(/(<|&lt;|&#60;)/g,"\\lt ").replace(/(>|&gt;|&#62;)/g,"\\gt ")}function f(a,b,c){var d="math-output-"+i.Lib.randstr([],64),f=j.select("body").append("div").attr({id:d}).style({visibility:"hidden",position:"absolute"}).style({"font-size":b.fontSize+"px"}).text(e(a));MathJax.Hub.Queue(["Typeset",MathJax.Hub,f.node()],function(){var b=j.select("body").select("#MathJax_SVG_glyphs");if(f.select(".MathJax_SVG").empty()||!f.select("svg").node())console.log("There was an error in the tex syntax.",a),c();else{var d=f.select("svg").node().getBoundingClientRect();c(f.select(".MathJax_SVG"),b,d)}f.remove()})}function g(a){for(var b=i.util.html_entity_decode(a),c=b.split(/(<[^<>]*>)/).map(function(a){var b=a.match(/<(\/?)([^ >]*)\s*(.*)>/i),c=b&&b[2].toLowerCase(),d=l[c];if(void 0!==d){var e=b[1],f=b[3],g=f.match(/^style\s*=\s*"([^"]+)"\s*/i);if("a"===c){if(e)return"</a>";if("href"!==f.substr(0,4).toLowerCase())return"<a>";var h=document.createElement("a");return h.href=f.substr(4).replace(/["'=]/g,""),m.indexOf(h.protocol)===-1?"<a>":'<a xlink:show="new" xlink:href'+f.substr(4)+">"}if("br"===c)return"<br>";if(e)return"sup"===c?'</tspan><tspan dy="0.42em">&#x200b;</tspan>':"sub"===c?'</tspan><tspan dy="-0.21em">&#x200b;</tspan>':"</tspan>";var j="<tspan";return"sup"!==c&&"sub"!==c||(j="&#x200b;"+j),g&&(g=g[1].replace(/(^|;)\s*color:/,"$1 fill:"),d=(d?d+";":"")+g),j+(d?' style="'+d+'"':"")+">"}return i.util.xml_entity_encode(a).replace(/</g,"&lt;")}),d=[],e=c.indexOf("<br>");e>0;e=c.indexOf("<br>",e+1))d.push(e);var f=0;d.forEach(function(a){for(var b=a+f,d=c.slice(0,b),e="",g=d.length-1;g>=0;g--){var h=d[g].match(/<(\/?).*>/i);if(h&&"<br>"!==d[g]){h[1]||(e=d[g]);break}}e&&(c.splice(b+1,0,e),c.splice(b,0,"</tspan>"),f+=2)});var g=c.join(""),h=g.split(/<br>/gi);return h.length>1&&(c=h.map(function(a,b){return'<tspan class="line" dy="'+1.3*b+'em">'+a+"</tspan>"})),c.join("")}function h(a,b,c){var d,e,f,g=c.horizontalAlign,h=c.verticalAlign||"top",i=a.node().getBoundingClientRect(),j=b.node().getBoundingClientRect();return e="bottom"===h?function(){return i.bottom-d.height}:"middle"===h?function(){return i.top+(i.height-d.height)/2}:function(){return i.top},f="right"===g?function(){return i.right-d.width}:"center"===g?function(){return i.left+(i.width-d.width)/2}:function(){return i.left},function(){return d=this.node().getBoundingClientRect(),this.style({top:e()-j.top+"px",left:f()-j.left+"px","z-index":1e3}),this}}var i=a("../plotly"),j=a("d3"),k=b.exports={};j.selection.prototype.appendSVG=function(a){for(var b='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">'+a+"</svg>",c=(new DOMParser).parseFromString(b,"application/xml"),d=c.documentElement.firstChild;d;)this.node().appendChild(this.node().ownerDocument.importNode(d,!0)),d=d.nextSibling;return c.querySelector("parsererror")?(console.log(c.querySelector("parsererror div").textContent),null):j.select(this.node().lastChild)},k.html_entity_decode=function(a){var b=j.select("body").append("div").style({display:"none"}).html(""),c=a.replace(/(&[^;]*;)/gi,function(a){return"&lt;"===a?"&#60;":"&rt;"===a?"&#62;":b.html(a).text()});return b.remove(),c},k.xml_entity_encode=function(a){return a.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")},k.convertToTspans=function(a,b){function c(){n.empty()||(o=k.attr("class")+"-math",n.select("svg."+o).remove()),a.text("").style({visibility:"visible","white-space":"pre"}),m=a.appendSVG(h),m||a.text(e),a.select("a").size()&&a.style("pointer-events","all"),b&&b.call(k)}var e=a.text(),h=g(e),k=a,l=!k.attr("data-notex")&&h.match(/([^$]*)([$]+[^$]*[$]+)([^$]*)/),m=e,n=j.select(k.node().parentNode);if(!n.empty()){var o=k.attr("class")?k.attr("class").split(" ")[0]:"text";o+="-math",n.selectAll("svg."+o).remove(),n.selectAll("g."+o+"-group").remove(),a.style({visibility:null});for(var p=a.node();p&&p.removeAttribute;p=p.parentNode)p.removeAttribute("data-bb");if(l){var q=i.Lib.getPlotDiv(k.node());(q&&q._promises||[]).push(new Promise(function(a){k.style({visibility:"hidden"});var e={fontSize:parseInt(k.style("font-size"),10)};f(l[2],e,function(e,f,g){n.selectAll("svg."+o).remove(),n.selectAll("g."+o+"-group").remove();var h=e&&e.select("svg");if(!h||!h.node())return c(),void a();var i=n.append("g").classed(o+"-group",!0).attr({"pointer-events":"none"});i.node().appendChild(h.node()),f&&f.node()&&h.node().insertBefore(f.node().cloneNode(!0),h.node().firstChild),h.attr({"class":o,height:g.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var j=k.style("fill")||"black";h.select("g").attr({fill:j,stroke:j});var l=d(h,"width"),m=d(h,"height"),p=+k.attr("x")-l*{start:0,middle:.5,end:1}[k.attr("text-anchor")||"start"],q=parseInt(k.style("font-size"),10)||d(k,"height"),r=-q/4;"y"===o[0]?(i.attr({transform:"rotate("+[-90,+k.attr("x"),+k.attr("y")]+") translate("+[-l/2,r-m/2]+")"}),h.attr({x:+k.attr("x"),y:+k.attr("y")})):"l"===o[0]?h.attr({x:k.attr("x"),y:r-m/2}):"a"===o[0]?h.attr({x:0,y:r}):h.attr({x:p,y:+k.attr("y")+r-m/2}),b&&b.call(k,i),a(i)})}))}else c();return a}};var l={sup:'font-size:70%" dy="-0.6em',sub:'font-size:70%" dy="0.3em',b:"font-weight:bold",i:"font-style:italic",a:"",span:"",br:"",em:"font-style:italic;font-weight:bold"},m=["http:","https:","mailto:"],n=new RegExp("</?("+Object.keys(l).join("|")+")( [^>]*)?/?>","g");k.plainText=function(a){return(a||"").replace(n," ")},k.makeEditable=function(a,b,c){function d(){f(),g.style({opacity:0});var a,b=m.attr("class");a=b?"."+b.split(" ")[0]+"-math-group":"[class*=-math-group]",a&&j.select(g.node().parentNode).select(a).style({opacity:0})}function e(a){var b=a.node(),c=document.createRange();c.selectNodeContents(b);var d=window.getSelection();d.removeAllRanges(),d.addRange(c),b.focus()}function f(){var a=j.select(i.Lib.getPlotDiv(g.node())),b=a.select(".svg-container"),d=b.append("div");d.classed("plugin-editable editable",!0).style({position:"absolute","font-family":g.style("font-family")||"Arial","font-size":g.style("font-size")||12,color:c.fill||g.style("fill")||"black",opacity:1,"background-color":c.background||"transparent",outline:"#ffffff33 1px solid",margin:[-parseFloat(g.style("font-size"))/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(c.text||g.attr("data-unformatted")).call(h(g,b,c)).on("blur",function(){g.text(this.textContent).style({opacity:1});var a,b=j.select(this).attr("class");a=b?"."+b.split(" ")[0]+"-math-group":"[class*=-math-group]",a&&j.select(g.node().parentNode).select(a).style({opacity:0});var c=this.textContent;j.select(this).transition().duration(0).remove(),j.select(document).on("mouseup",null),k.edit.call(g,c)}).on("focus",function(){var a=this;j.select(document).on("mouseup",function(){return j.event.target!==a&&void(document.activeElement===d.node()&&d.node().blur())})}).on("keyup",function(){27===j.event.which?(g.style({opacity:1}),j.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),k.cancel.call(g,this.textContent)):(k.input.call(g,this.textContent),j.select(this).call(h(g,b,c)))}).on("keydown",function(){13===j.event.which&&this.blur()}).call(e)}c||(c={});var g=this,k=j.dispatch("edit","input","cancel"),l=j.select(this.node()).style({"pointer-events":"all"}),m=b||l;return b&&l.style({"pointer-events":"none"}),c.immediate?d():m.on("click",d),j.rebind(this,k,"on")}},{"../plotly":1070,d3:64}],1065:[function(a,b,c){"use strict";var d=b.exports={},e=a("../constants/geo_constants").locationmodeToLayer,f=a("topojson").feature;d.getTopojsonName=function(a){return[a.scope.replace(/ /g,"-"),"_",a.resolution.toString(),"m"].join("")},d.getTopojsonPath=function(a,b){return a+b+".json"},d.getTopojsonFeatures=function(a,b){var c=e[a.locationmode],d=b.objects[c];return f(b,d).features}},{"../constants/geo_constants":1039,topojson:999}],1066:[function(a,b,c){"use strict";function d(a){var b;if("string"==typeof a){if(b=document.getElementById(a),null===b)throw new Error("No DOM element with id '"+a+"' exists on the page.");return b}if(null===a||void 0===a)throw new Error("DOM element provided is null or undefined");return a}function e(a,b){a._fullLayout._paperdiv.style("background","white"),C.defaultConfig.setBackground(a,b)}function f(a,b){a._context||(a._context=C.Lib.extendFlat({},C.defaultConfig));var c=a._context;b&&(Object.keys(b).forEach(function(a){a in c&&("setBackground"===a&&"opaque"===b[a]?c[a]=e:c[a]=b[a])}),b.plot3dPixelRatio&&!c.plotGlPixelRatio&&(c.plotGlPixelRatio=c.plot3dPixelRatio)),c.staticPlot&&(c.editable=!1,c.autosizable=!1,c.scrollZoom=!1,c.doubleClick=!1,c.showTips=!1,c.showLink=!1,c.displayModeBar=!1)}function g(a,b,c){var d=F.select(a).selectAll(".plot-container").data([0]);d.enter().insert("div",":first-child").classed("plot-container plotly",!0);var e=d.selectAll(".svg-container").data([0]);e.enter().append("div").classed("svg-container",!0).style("position","relative"),e.html(""),b&&(a.data=b),c&&(a.layout=c),C.micropolar.manager.fillLayout(a),"initial"===a._fullLayout.autosize&&a._context.autosizable&&(w(a,{}),a._fullLayout.autosize=c.autosize=!0),e.style({width:a._fullLayout.width+"px",height:a._fullLayout.height+"px"}),a.framework=C.micropolar.manager.framework(a),a.framework({data:a.data,layout:a.layout},e.node()),a.framework.setUndoPoint();var f=a.framework.svg(),g=1,h=a._fullLayout.title;""!==h&&h||(g=0);var i="Click to enter title",j=function(){this.call(C.util.convertToTspans)},k=f.select(".title-group text").call(j);if(a._context.editable){k.attr({"data-unformatted":h}),h&&h!==i||(g=.2,k.attr({"data-unformatted":i}).text(i).style({opacity:g}).on("mouseover.opacity",function(){F.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){F.select(this).transition().duration(1e3).style("opacity",0)}));var l=function(){this.call(C.util.makeEditable).on("edit",function(b){a.framework({layout:{title:b}}),this.attr({"data-unformatted":b}).text(b).call(j),this.call(l)}).on("cancel",function(){var a=this.attr("data-unformatted");this.text(a).call(j)})};k.call(l)}return a._context.setBackground(a,a._fullLayout.paper_bgcolor),I.addLinks(a),Promise.resolve()}function h(a){var b,c;a||(a={}),a.xaxis1&&(a.xaxis||(a.xaxis=a.xaxis1),delete a.xaxis1),a.yaxis1&&(a.yaxis||(a.yaxis=a.yaxis1),delete a.yaxis1);var d=C.Axes.list({_fullLayout:a});for(b=0;b<d.length;b++){var e=d[b];e.anchor&&"free"!==e.anchor&&(e.anchor=C.Axes.cleanId(e.anchor)),e.overlaying&&(e.overlaying=C.Axes.cleanId(e.overlaying)),e.type||(e.isdate?e.type="date":e.islog?e.type="log":e.isdate===!1&&e.islog===!1&&(e.type="linear")),"withzero"!==e.autorange&&"tozero"!==e.autorange||(e.autorange=!0,e.rangemode="tozero"),delete e.islog,delete e.isdate,delete e.categories,l(e,"domain")&&delete e.domain,void 0!==e.autotick&&(void 0===e.tickmode&&(e.tickmode=e.autotick?"auto":"linear"),delete e.autotick)}void 0===a.annotations||Array.isArray(a.annotations)||(console.log("annotations must be an array"),delete a.annotations);var f=(a.annotations||[]).length;for(b=0;b<f;b++){var g=a.annotations[b];g.ref&&("paper"===g.ref?(g.xref="paper",g.yref="paper"):"data"===g.ref&&(g.xref="x",g.yref="y"),delete g.ref),i(g,"xref"),i(g,"yref")}void 0===a.shapes||Array.isArray(a.shapes)||(console.log("shapes must be an array"),delete a.shapes);var h=(a.shapes||[]).length;for(b=0;b<h;b++){var j=a.shapes[b];i(j,"xref"),i(j,"yref")}var k=a.legend;k&&(k.x>3?(k.x=1.02,k.xanchor="left"):k.x<-2&&(k.x=-.02,
k.xanchor="right"),k.y>3?(k.y=1.02,k.yanchor="bottom"):k.y<-2&&(k.y=-.02,k.yanchor="top")),"rotate"===a.dragmode&&(a.dragmode="orbit"),a.scene1&&(a.scene||(a.scene=a.scene1),delete a.scene1);var m,n,o,p,q,r,s,t=I.getSubplotIds(a,"gl3d");for(b=0;b<t.length;b++)if(m=a[t[b]],n=m.cameraposition,Array.isArray(n)&&4===n[0].length){for(o=n[0],q=n[1],p=n[2],r=G([],o),s=[],c=0;c<3;++c)s[c]=q[b]+p*r[2+4*c];m.camera={eye:{x:s[0],y:s[1],z:s[2]},center:{x:q[0],y:q[1],z:q[2]},up:{x:r[1],y:r[5],z:r[9]}},delete m.cameraposition}return C.Lib.markTime("finished rest of cleanLayout, starting color"),C.Color.clean(a),C.Lib.markTime("finished cleanLayout color.clean"),a}function i(a,b){var c=a[b],d=b.charAt(0);c&&"paper"!==c&&(a[b]=C.Axes.cleanId(c,d))}function j(a,b){for(var c=[],d=(a.concat(Array.isArray(b)?b:[]).filter(function(a){return"uid"in a}).map(function(a){return a.uid})),e=0;e<a.length;e++){var f=a[e];if(!("uid"in f)||c.indexOf(f.uid)!==-1){var g,h;for(h=0;h<100&&(g=C.Lib.randstr(d),c.indexOf(g)!==-1);h++);f.uid=C.Lib.randstr(d),d.push(f.uid)}if(c.push(f.uid),"histogramy"===f.type&&"xbins"in f&&!("ybins"in f)&&(f.ybins=f.xbins,delete f.xbins),f.error_y&&"opacity"in f.error_y){var i=C.Color.defaults,j=f.error_y.color||(I.traceIs(f,"bar")?C.Color.defaultLine:i[e%i.length]);f.error_y.color=C.Color.addOpacity(C.Color.rgb(j),C.Color.opacity(j)*f.error_y.opacity),delete f.error_y.opacity}"bardir"in f&&("h"!==f.bardir||!I.traceIs(f,"bar")&&"histogram"!==f.type.substr(0,9)||(f.orientation="h",u(f)),delete f.bardir),"histogramy"===f.type&&u(f),"histogramx"!==f.type&&"histogramy"!==f.type||(f.type="histogram"),"scl"in f&&(f.colorscale=f.scl,delete f.scl),"reversescl"in f&&(f.reversescale=f.reversescl,delete f.reversescl),f.xaxis&&(f.xaxis=C.Axes.cleanId(f.xaxis,"x")),f.yaxis&&(f.yaxis=C.Axes.cleanId(f.yaxis,"y")),I.traceIs(f,"gl3d")&&f.scene&&(f.scene=I.subplotsRegistry.gl3d.cleanId(f.scene)),I.traceIs(f,"pie")||(Array.isArray(f.textposition)?f.textposition=f.textposition.map(k):f.textposition&&(f.textposition=k(f.textposition))),l(f,"line")&&delete f.line,"marker"in f&&(l(f.marker,"line")&&delete f.marker.line,l(f,"marker")&&delete f.marker),C.Lib.markTime("finished rest of cleanData, starting color"),C.Color.clean(f),C.Lib.markTime("finished cleanData color.clean")}}function k(a){var b="middle",c="center";return a.indexOf("top")!==-1?b="top":a.indexOf("bottom")!==-1&&(b="bottom"),a.indexOf("left")!==-1?c="left":a.indexOf("right")!==-1&&(c="right"),b+" "+c}function l(a,b){return b in a&&"object"==typeof a[b]&&0===Object.keys(a[b]).length}function m(a){var b,c,d,e,f=C.Axes.list(a),g=a._fullData,h=a._fullLayout,i=a.calcdata=new Array(g.length);for(a.firstscatter=!0,a.numboxes=0,a._hmpixcount=0,a._hmlumcount=0,h._piecolormap={},h._piedefaultcolorcount=0,b=0;b<f.length;b++)f[b]._categories=[];for(b=0;b<g.length;b++)c=g[b],d=c._module,e=[],d&&c.visible===!0&&d.calc&&(e=d.calc(a,c)),Array.isArray(e)&&e[0]||(e=[{x:!1,y:!1}]),e[0].t||(e[0].t={}),e[0].trace=c,C.Lib.markTime("done with calcdata for "+b),i[b]=e}function n(a,b){var c,d,e=b+1,f=[];for(c=0;c<a.length;c++)d=a[c],d<0?f.push(e+d):f.push(d);return f}function o(a,b,c){var d,e;for(d=0;d<b.length;d++){if(e=b[d],e!==parseInt(e,10))throw new Error("all values in "+c+" must be integers");if(e>=a.data.length||e<-a.data.length)throw new Error(c+" must be valid indices for gd.data.");if(b.indexOf(e,d+1)>-1||e>=0&&b.indexOf(-a.data.length+e)>-1||e<0&&b.indexOf(a.data.length+e)>-1)throw new Error("each index in "+c+" must be unique.")}}function p(a,b,c){if(!Array.isArray(a.data))throw new Error("gd.data must be an array.");if("undefined"==typeof b)throw new Error("currentIndices is a required argument.");if(Array.isArray(b)||(b=[b]),o(a,b,"currentIndices"),"undefined"==typeof c||Array.isArray(c)||(c=[c]),"undefined"!=typeof c&&o(a,c,"newIndices"),"undefined"!=typeof c&&b.length!==c.length)throw new Error("current and new indices must be of equal length.")}function q(a,b,c){var d,e;if(!Array.isArray(a.data))throw new Error("gd.data must be an array.");if("undefined"==typeof b)throw new Error("traces must be defined.");for(Array.isArray(b)||(b=[b]),d=0;d<b.length;d++)if(e=b[d],"object"!=typeof e||Array.isArray(e)||null===e)throw new Error("all values in traces array must be non-array objects");if("undefined"==typeof c||Array.isArray(c)||(c=[c]),"undefined"!=typeof c&&c.length!==b.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function r(a,b,c,d){var e=C.Lib.isPlainObject(d);if(!Array.isArray(a.data))throw new Error("gd.data must be an array");if(!C.Lib.isPlainObject(b))throw new Error("update must be a key:value object");if("undefined"==typeof c)throw new Error("indices must be an integer or array of integers");o(a,c,"indices");for(var f in b){if(!Array.isArray(b[f])||b[f].length!==c.length)throw new Error("attribute "+f+" must be an array of length equal to indices array length");if(e&&(!(f in d)||!Array.isArray(d[f])||d[f].length!==b[f].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function s(a,b,c,d){var e,f,g,h,i,j=C.Lib.isPlainObject(d),k=[];Array.isArray(c)||(c=[c]),c=n(c,a.data.length-1);for(var l in b)for(var m=0;m<c.length;m++){if(e=a.data[c[m]],g=C.Lib.nestedProperty(e,l),f=g.get(),h=b[l][m],!Array.isArray(h))throw new Error("attribute: "+l+" index: "+m+" must be an array");if(!Array.isArray(f))throw new Error("cannot extend missing or non-array attribute: "+l);i=j?d[l][m]:d,H(i)||(i=-1),k.push({prop:g,target:f,insert:h,maxp:Math.floor(i)})}return k}function t(a,b,c,d,e,f){r(a,b,c,d);for(var g,h,i,j=s(a,b,c,d),k=[],l={},m={},n=0;n<j.length;n++)h=j[n].prop,i=j[n].maxp,g=e(j[n].target,j[n].insert),i>=0&&i<g.length&&(k=f(g,i)),i=j[n].target.length,h.set(g),Array.isArray(l[h.astr])||(l[h.astr]=[]),Array.isArray(m[h.astr])||(m[h.astr]=[]),l[h.astr].push(k),m[h.astr].push(i);return{update:l,maxPoints:m}}function u(a){var b;if(C.Lib.swapAttrs(a,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(a.z)&&Array.isArray(a.z[0])&&(a.transpose?delete a.transpose:a.transpose=!0),a.error_x&&a.error_y){var c=a.error_y,d="copy_ystyle"in c?c.copy_ystyle:!(c.color||c.thickness||c.width);C.Lib.swapAttrs(a,["error_?.copy_ystyle"]),d&&C.Lib.swapAttrs(a,["error_?.color","error_?.thickness","error_?.width"])}if(a.hoverinfo){var e=a.hoverinfo.split("+");for(b=0;b<e.length;b++)"x"===e[b]?e[b]="y":"y"===e[b]&&(e[b]="x");a.hoverinfo=e.join("+")}}function v(a){var b,c={left:0,right:0,bottom:0,top:0};if(a)for(b in a)a.hasOwnProperty(b)&&(c.left+=a[b].left||0,c.right+=a[b].right||0,c.bottom+=a[b].bottom||0,c.top+=a[b].top||0);return c}function w(a,b){var c,d,e,f=a._fullLayout,g=a._context;if(a.emit("plotly_autosize"),a._context.fillFrame)e=window.innerWidth,d=window.innerHeight,document.body.style.overflow="hidden";else if(H(g.frameMargins)&&g.frameMargins>0){var h=v(a._boundingBoxMargins),i=h.left+h.right,j=h.bottom+h.top,k=f._container.node().getBoundingClientRect(),l=1-2*g.frameMargins;e=Math.round(l*(k.width-i)),d=Math.round(l*(k.height-j))}else c=window.getComputedStyle(a),d=parseFloat(c.height)||f.height,e=parseFloat(c.width)||f.width;return Math.abs(f.width-e)>1||Math.abs(f.height-d)>1?(f.height=a.layout.height=d,f.width=a.layout.width=e):"initial"!==f.autosize&&(delete b.autosize,f.autosize=a.layout.autosize=!0),I.sanitizeMargins(f),b}function x(a){var b=F.select(a),c=a._fullLayout;if(c._hasGL3D&&I.subplotsRegistry.gl3d.initAxes(a),c._container=b.selectAll(".plot-container").data([0]),c._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),c._paperdiv=c._container.selectAll(".svg-container").data([0]),c._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),"initial"===c.autosize&&(w(a,{}),c.autosize=!0,a.layout.autosize=!0),c._glcontainer=c._paperdiv.selectAll(".gl-container").data([0]),c._glcontainer.enter().append("div").classed("gl-container",!0),c._geocontainer=c._paperdiv.selectAll(".geo-container").data([0]),c._geocontainer.enter().append("div").classed("geo-container",!0),c._paperdiv.selectAll(".main-svg").remove(),c._paper=c._paperdiv.insert("svg",":first-child").classed("main-svg",!0),c._toppaper=c._paperdiv.append("svg").classed("main-svg",!0),!c._uid){var d=[];F.selectAll("defs").each(function(){this.id&&d.push(this.id.split("-")[1])}),c._uid=C.Lib.randstr(d)}c._paperdiv.selectAll(".main-svg").attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink"}),c._defs=c._paper.append("defs").attr("id","defs-"+c._uid),c._draggers=c._paper.append("g").classed("draglayer",!0);var e=C.Axes.getSubplots(a);e.join("")!==Object.keys(a._fullLayout._plots||{}).join("")&&y(a,e),c._hasCartesian&&z(a,e),c._shapelayer=c._paper.append("g").classed("shapelayer",!0),c._pielayer=c._paper.append("g").classed("pielayer",!0),c._glimages=c._paper.append("g").classed("glimages",!0),c._geoimages=c._paper.append("g").classed("geoimages",!0),c._infolayer=c._toppaper.append("g").classed("infolayer",!0),c._hoverlayer=c._toppaper.append("g").classed("hoverlayer",!0),a.emit("plotly_framework");var f=C.Lib.syncOrAsync([A,function(){return C.Axes.doTicks(a,"redraw")},C.Fx.init],a);return f&&f.then&&a._promises.push(f),f}function y(a,b){function c(b,c){return function(){return C.Axes.getFromId(a,b,c)}}for(var d,e,f=a._fullLayout._plots={},g=0;g<b.length;g++)d=b[g],e=f[d]={},e.id=d,e.x=c(d,"x"),e.y=c(d,"y"),e.xaxis=e.x(),e.yaxis=e.y()}function z(a,b){function c(a){a.append("g").classed("maplayer",!0),a.append("g").classed("barlayer",!0),a.append("g").classed("errorlayer",!0),a.append("g").classed("boxlayer",!0),a.append("g").classed("scatterlayer",!0)}var d=a._fullLayout,e=[];d._paper.selectAll("g.subplot").data(b).enter().append("g").classed("subplot",!0).each(function(f){var g=d._plots[f],h=g.plotgroup=F.select(this).classed(f,!0),i=g.xaxis,j=g.yaxis;g.overlays=[];var k=C.Axes.getFromId(a,i.overlaying)||i;k!==i&&k.overlaying&&(k=i,i.overlaying=!1);var l=C.Axes.getFromId(a,j.overlaying)||j;l!==j&&l.overlaying&&(l=j,j.overlaying=!1);var m=k._id+l._id;m!==f&&b.indexOf(m)!==-1?(g.mainplot=m,e.push(g),i.domain=k.domain.slice(),j.domain=l.domain.slice()):(g.bg=h.append("rect").style("stroke-width",0),g.gridlayer=h.append("g"),g.overgrid=h.append("g"),g.zerolinelayer=h.append("g"),g.overzero=h.append("g"),g.plot=h.append("svg").call(c),g.overplot=h.append("g"),g.xlines=h.append("path"),g.ylines=h.append("path"),g.overlines=h.append("g"),g.xaxislayer=h.append("g"),g.yaxislayer=h.append("g"),g.overaxes=h.append("g")),g.draglayer=d._draggers.append("g")}),e.forEach(function(a){var b=d._plots[a.mainplot];b.overlays.push(a),a.gridlayer=b.overgrid.append("g"),a.zerolinelayer=b.overzero.append("g"),a.plot=b.overplot.append("svg").call(c),a.xlines=b.overlines.append("path"),a.ylines=b.overlines.append("path"),a.xaxislayer=b.overaxes.append("g"),a.yaxislayer=b.overaxes.append("g")}),b.forEach(function(a){var b=d._plots[a];b.plot.attr("preserveAspectRatio","none").style("fill","none"),b.xlines.style("fill","none").classed("crisp",!0),b.ylines.style("fill","none").classed("crisp",!0)})}function A(a){return C.Lib.syncOrAsync([I.doAutoMargin,B],a)}function B(a){var b,c=a._fullLayout,d=c._size,e=C.Axes.list(a);for(b=0;b<e.length;b++)e[b]._linepositions={};c._paperdiv.style({width:c.width+"px",height:c.height+"px"}).selectAll(".main-svg").call(C.Drawing.setSize,c.width,c.height),a._context.setBackground(a,c.paper_bgcolor);var f=[];return c._paper.selectAll("g.subplot").each(function(b){var e=c._plots[b],g=C.Axes.getFromId(a,b,"x"),h=C.Axes.getFromId(a,b,"y");g.setScale(),h.setScale(),e.bg&&e.bg.call(C.Drawing.setRect,g._offset-d.p,h._offset-d.p,g._length+2*d.p,h._length+2*d.p).call(C.Color.fill,c.plot_bgcolor),e.plot.call(C.Drawing.setRect,g._offset,h._offset,g._length,h._length);var i=C.Drawing.crispRound(a,g.linewidth,1),j=C.Drawing.crispRound(a,h.linewidth,1),k=d.p+j,l="M"+-k+",",m="h"+(g._length+2*k),n="free"===g.anchor&&f.indexOf(g._id)===-1,o=d.h*(1-(g.position||0))+i/2%1,p=g.anchor===h._id&&(g.mirror||"top"!==g.side)||"all"===g.mirror||"allticks"===g.mirror||g.mirrors&&g.mirrors[h._id+"bottom"],q=h._length+d.p+i/2,r=g.anchor===h._id&&(g.mirror||"top"===g.side)||"all"===g.mirror||"allticks"===g.mirror||g.mirrors&&g.mirrors[h._id+"top"],s=-d.p-i/2,t=d.p,u=p?0:i,v=r?0:i,w=","+(-t-v)+"v"+(h._length+2*t+v+u),x="free"===h.anchor&&f.indexOf(h._id)===-1,y=d.w*(h.position||0)+j/2%1,z=h.anchor===g._id&&(h.mirror||"right"!==h.side)||"all"===h.mirror||"allticks"===h.mirror||h.mirrors&&h.mirrors[g._id+"left"],A=-d.p-j/2,B=h.anchor===g._id&&(h.mirror||"right"===h.side)||"all"===h.mirror||"allticks"===h.mirror||h.mirrors&&h.mirrors[g._id+"right"],D=g._length+d.p+j/2;g._linepositions[b]=[p?q:void 0,r?s:void 0,n?o:void 0],g.anchor===h._id?g._linepositions[b][3]="top"===g.side?s:q:n&&(g._linepositions[b][3]=o),h._linepositions[b]=[z?A:void 0,B?D:void 0,x?y:void 0],h.anchor===g._id?h._linepositions[b][3]="right"===h.side?D:A:x&&(h._linepositions[b][3]=y);var E="translate("+g._offset+","+h._offset+")",F=E,G=E;n&&(F="translate("+g._offset+","+d.t+")",s+=h._offset-d.t,q+=h._offset-d.t),x&&(G="translate("+d.l+","+h._offset+")",A+=g._offset-d.l,D+=g._offset-d.l),e.xlines.attr("transform",F).attr("d",(p?l+q+m:"")+(r?l+s+m:"")+(n?l+o+m:"")||"M0,0").style("stroke-width",i+"px").call(C.Color.stroke,g.showline?g.linecolor:"rgba(0,0,0,0)"),e.ylines.attr("transform",G).attr("d",(z?"M"+A+w:"")+(B?"M"+D+w:"")+(x?"M"+y+w:"")||"M0,0").attr("stroke-width",j+"px").call(C.Color.stroke,h.showline?h.linecolor:"rgba(0,0,0,0)"),e.xaxislayer.attr("transform",F),e.yaxislayer.attr("transform",G),e.gridlayer.attr("transform",E),e.zerolinelayer.attr("transform",E),e.draglayer.attr("transform",E),n&&f.push(g._id),x&&f.push(h._id)}),C.Axes.makeClipPaths(a),C.Titles.draw(a,"gtitle"),E(a),a._promises.length&&Promise.all(a._promises)}var C=a("../plotly"),D=a("../lib/events"),E=a("../components/modebar/manage"),F=a("d3"),G=a("gl-mat4/fromQuat"),H=a("fast-isnumeric"),I=C.Plots;C.plot=function(a,b,c,e){function i(){var b,c,d,e=a.calcdata;for(C.Legend.draw(a),b=0;b<e.length;b++)c=e[b],d=c[0].trace,d.visible===!0&&d._module.colorbar?d._module.colorbar(a,c):I.autoMargin(a,"cb"+d.uid);return I.doAutoMargin(a),I.previousPromises(a)}function k(){var b=JSON.stringify(w._size)===B?[]:[i,A];return C.Lib.syncOrAsync(b.concat(C.Fx.init),a)}function l(){if(y){for(var b,c,d=I.getSubplotIds(w,"cartesian"),e=a._modules,f=0;f<d.length;f++){b=w._plots[d[f]];for(var g=0;g<e.length;g++)c=e[g],c.setPositions&&c.setPositions(a,b)}return C.Lib.markTime("done with bar/box adjustments"),C.ErrorBars.calc(a),C.Lib.markTime("done Plotly.ErrorBars.calc"),C.Lib.syncOrAsync([C.Shapes.calcAutorange,C.Annotations.calcAutorange,n],a)}}function n(){for(var b=C.Axes.list(a,"",!0),c=0;c<b.length;c++)C.Axes.doAutoRange(b[c])}function o(){return C.Axes.doTicks(a,"redraw")}function p(){function b(a,b){var c,d,e,f=[];for(c=0;c<a.length;c++)d=a[c],e=d[0].trace,e.xaxis+e.yaxis===b&&f.push(d);return f}function c(a,b){var c,d,e,f=[];for(c=0;c<a.length;c++)d=a[c],e=d[0].trace,e._module===b&&e.visible===!0&&f.push(d);return f}var d,e,f,g,h,i,j,k,l,m,n,o=a.calcdata,p=I.getSubplotIds(w,"cartesian"),q=a._modules,r=I.subplotsRegistry;for(w._hasGL3D&&r.gl3d.plot(a),w._hasGeo&&r.geo.plot(a),w._hasGL2D&&r.gl2d.plot(a),d=0;d<o.length;d++)f=o[d],g=f[0].trace,g.visible===!0&&g._module.colorbar||(h=g.uid,w._paper.selectAll(".hm"+h+",.contour"+h+",.cb"+h+",#clip"+h).remove());for(d=0;d<p.length;d++){for(i=p[d],j=a._fullLayout._plots[i],k=b(o,i),l=[],j.plot&&j.plot.selectAll("g.trace").remove(),e=0;e<q.length;e++)n=q[e],n.plot&&(m=c(k,n),n.plot(a,j,m),C.Lib.markTime("done "+(m[0]&&m[0][0].trace.type)),m[0]&&m[0][0].trace&&I.traceIs(m[0][0].trace,"errorBarsOK")&&(l=l.concat(m)));a._fullLayout._hasCartesian&&(C.ErrorBars.plot(a,j,l),C.Lib.markTime("done ErrorBars"))}var s=c(o,C.Pie);return s.length&&C.Pie.plot(a,s),I.style(a),C.Lib.markTime("done plots.style"),C.Shapes.drawAll(a),C.Annotations.drawAll(a),I.addLinks(a),I.previousPromises(a)}function q(){a._replotting=!1,C.Lib.markTime("done plot"),a.emit("plotly_afterplot")}C.Lib.markTime("in plot"),a=d(a),D.init(a);var r=D.triggerHandler(a,"plotly_beforeplot",[b,c,e]);if(r!==!1){b||c||C.Lib.isPlotDiv(a)||console.log("Warning: calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",a),f(a,e),c||(c={}),F.select(a).classed("js-plotly-plot",!0),C.Drawing.makeTester(a),a._promises=[];var s=0===(a.data||[]).length&&Array.isArray(b);if(Array.isArray(b)&&(j(b,a.data),s?a.data=b:a.data.push.apply(a.data,b),a.empty=!1),a.layout&&!s||(a.layout=h(c)),a._dragging)return void(a._replotPending=!0);if(a._replotPending=!1,I.supplyDefaults(a),b&&b[0]&&b[0].r)return g(a,b,c);a._replotting=!0;var t=a._fullData.length>0;if(t){var u=C.Axes.getSubplots(a).join(""),v=Object.keys(a._fullLayout._plots||{}).join("");(a.framework!==x||s||v!==u)&&(a.framework=x,x(a))}else s&&x(a);var w=a._fullLayout,y=!a.calcdata||a.calcdata.length!==(a.data||[]).length;y&&(m(a),a._context.doubleClick===!1&&a._context.displayModeBar===!1||C.Axes.saveRangeInitial(a));for(var z=0;z<a.calcdata.length;z++)a.calcdata[z][0].trace=a._fullData[z];var B=JSON.stringify(w._size),E=C.Lib.syncOrAsync([I.previousPromises,i,A,k,l,o,p],a,q);return E&&E.then?E:Promise.resolve(a)}},C.redraw=function(a){return a=d(a),C.Lib.isPlotDiv(a)?(a.calcdata=void 0,C.plot(a).then(function(){return a.emit("plotly_redraw"),a})):void console.log("This element is not a Plotly Plot",a)},C.newPlot=function(a,b,c,e){return a=d(a),I.purge(a),C.plot(a,b,c,e)},C.extendTraces=function J(a,b,c,e){a=d(a);var f=t(a,b,c,e,function(a,b){return a.concat(b)},function(a,b){return a.splice(0,a.length-b)}),g=C.redraw(a),h=[a,f.update,c,f.maxPoints];return C.Queue&&C.Queue.add(a,C.prependTraces,h,J,arguments),g},C.prependTraces=function K(a,b,c,e){a=d(a);var f=t(a,b,c,e,function(a,b){return b.concat(a)},function(a,b){return a.splice(b,a.length)}),g=C.redraw(a),h=[a,f.update,c,f.maxPoints];return C.Queue&&C.Queue.add(a,C.extendTraces,h,K,arguments),g},C.addTraces=function L(a,b,c){a=d(a);var e,f=[],g=C.deleteTraces,h=L,i=[a,f],k=[a,b];for(q(a,b,c),Array.isArray(b)||(b=[b]),j(b,a.data),e=0;e<b.length;e+=1)a.data.push(b[e]);for(e=0;e<b.length;e++)f.push(-b.length+e);if("undefined"==typeof c){var l=C.redraw(a);return C.Queue&&C.Queue.add(a,g,i,h,k),l}Array.isArray(c)||(c=[c]);try{p(a,f,c)}catch(m){throw a.data.splice(a.data.length-b.length,b.length),m}C.Queue&&C.Queue.startSequence(a),C.Queue&&C.Queue.add(a,g,i,h,k);var l=C.moveTraces(a,f,c);return C.Queue&&C.Queue.stopSequence(a),l},C.deleteTraces=function M(a,b){a=d(a);var c,e,f=[],g=C.addTraces,h=M,i=[a,f,b],j=[a,b];if("undefined"==typeof b)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(b)||(b=[b]),o(a,b,"indices"),b=n(b,a.data.length-1),b.sort().reverse(),c=0;c<b.length;c+=1)e=a.data.splice(b[c],1)[0],f.push(e);var k=C.redraw(a);return C.Queue&&C.Queue.add(a,g,i,h,j),k},C.moveTraces=function N(a,b,c){a=d(a);var e,f=[],g=[],h=N,i=N,j=[a,c,b],k=[a,b,c];if(p(a,b,c),b=Array.isArray(b)?b:[b],"undefined"==typeof c)for(c=[],e=0;e<b.length;e++)c.push(-b.length+e);for(c=Array.isArray(c)?c:[c],b=n(b,a.data.length-1),c=n(c,a.data.length-1),e=0;e<a.data.length;e++)b.indexOf(e)===-1&&f.push(a.data[e]);for(e=0;e<b.length;e++)g.push({newIndex:c[e],trace:a.data[b[e]]});for(g.sort(function(a,b){return a.newIndex-b.newIndex}),e=0;e<g.length;e+=1)f.splice(g[e].newIndex,0,g[e].trace);a.data=f;var l=C.redraw(a);return C.Queue&&C.Queue.add(a,h,j,i,k),l},C.restyle=function O(a,b,c,e){function f(){return e.map(function(){})}function g(a){var b=C.Axes.id2name(a);o.indexOf(b)===-1&&o.push(b)}function h(a){return"LAYOUT"+a+".autorange"}function i(a){return"LAYOUT"+a+".range"}function j(b,c,d){if(Array.isArray(b))return void b.forEach(function(a){j(a,c,d)});if(!(b in m)){var g;g="LAYOUT"===b.substr(0,6)?C.Lib.nestedProperty(a.layout,b.replace("LAYOUT","")):C.Lib.nestedProperty(a.data[e[d]],b),b in A||(A[b]=f()),void 0===A[b][d]&&(A[b][d]=g.get()),void 0!==c&&g.set(c)}}a=d(a);var k,l=a._fullLayout,m={};if("string"==typeof b)m[b]=c;else{if(!C.Lib.isPlainObject(b))return console.log("restyle fail",b,c,e),new Promise.reject;m=b,void 0===e&&(e=c)}Object.keys(m).length&&(a.changed=!0),H(e)?e=[e]:Array.isArray(e)&&e.length||(e=a._fullData.map(function(a,b){return b}));var n=["mode","visible","type","orientation","fill","histfunc","histnorm","text","x","y","z","xtype","x0","dx","ytype","y0","dy","xaxis","yaxis","line.width","connectgaps","transpose","zsmooth","showscale","marker.showscale","zauto","marker.cauto","autocolorscale","marker.autocolorscale","colorscale","marker.colorscale","reversescale","marker.reversescale","autobinx","nbinsx","xbins","xbins.start","xbins.end","xbins.size","autobiny","nbinsy","ybins","ybins.start","ybins.end","ybins.size","autocontour","ncontours","contours","contours.coloring","error_y","error_y.visible","error_y.value","error_y.type","error_y.traceref","error_y.array","error_y.symmetric","error_y.arrayminus","error_y.valueminus","error_y.tracerefminus","error_x","error_x.visible","error_x.value","error_x.type","error_x.traceref","error_x.array","error_x.symmetric","error_x.arrayminus","error_x.valueminus","error_x.tracerefminus","swapxy","swapxyaxes","orientationaxes","marker.colors","values","labels","label0","dlabel","sort","textinfo","textposition","textfont.size","textfont.family","textfont.color","insidetextfont.size","insidetextfont.family","insidetextfont.color","outsidetextfont.size","outsidetextfont.family","outsidetextfont.color","hole","scalegroup","domain","domain.x","domain.y","domain.x[0]","domain.x[1]","domain.y[0]","domain.y[1]","tilt","tiltaxis","depth","direction","rotation","pull"];for(k=0;k<e.length;k++)if(I.traceIs(a._fullData[e[k]],"box")){n.push("name");break}var o,p=["marker","marker.size","textfont","boxpoints","jitter","pointpos","whiskerwidth","boxmean"],q=["zmin","zmax","zauto","marker.cmin","marker.cmax","marker.cauto","contours.start","contours.end","contours.size","contours.showlines","line","line.smoothing","line.shape","error_y.width","error_x.width","error_x.copy_ystyle","marker.maxdisplayed"],r=["type","x","y","x0","y0","orientation","xaxis","yaxis"],s=!1,t=!1,v=!1,w=!1,x=!1,y=!1,z={},A={},B={};(l._hasGL3D||l._hasGeo||l._hasGL2D)&&(v=!0);var D=["zmin","zmax"],E=["xbins.start","xbins.end","xbins.size"],F=["ybins.start","ybins.end","ybins.size"],G=["contours.start","contours.end","contours.size"];for(var J in m){var K,L,M,N,P,Q=m[J];if(z[J]=Q,"LAYOUT"!==J.substr(0,6)){for(A[J]=f(),k=0;k<e.length;k++){if(K=a.data[e[k]],L=a._fullData[e[k]],M=C.Lib.nestedProperty(K,J),N=M.get(),P=Array.isArray(Q)?Q[k%Q.length]:Q,D.indexOf(J)!==-1)j("zauto",!1,k);else if("colorscale"===J)j("autocolorscale",!1,k);else if("autocolorscale"===J)j("colorscale",void 0,k);else if("marker.colorscale"===J)j("marker.autocolorscale",!1,k);else if("marker.autocolorscale"===J)j("marker.colorscale",void 0,k);else if("zauto"===J)j(D,void 0,k);else if(E.indexOf(J)!==-1)j("autobinx",!1,k);else if("autobinx"===J)j(E,void 0,k);else if(F.indexOf(J)!==-1)j("autobiny",!1,k);else if("autobiny"===J)j(F,void 0,k);else if(G.indexOf(J)!==-1)j("autocontour",!1,k);else if("autocontour"===J)j(G,void 0,k);else if(["x0","dx"].indexOf(J)!==-1&&L.x&&"scaled"!==L.xtype)j("xtype","scaled",k);else if(["y0","dy"].indexOf(J)!==-1&&L.y&&"scaled"!==L.ytype)j("ytype","scaled",k);else if("colorbar.thicknessmode"===J&&M.get()!==P&&["fraction","pixels"].indexOf(P)!==-1&&L.colorbar){var R=["top","bottom"].indexOf(L.colorbar.orient)!==-1?l.height-l.margin.t-l.margin.b:l.width-l.margin.l-l.margin.r;j("colorbar.thickness",L.colorbar.thickness*("fraction"===P?1/R:R),k)}else if("colorbar.lenmode"===J&&M.get()!==P&&["fraction","pixels"].indexOf(P)!==-1&&L.colorbar){var S=["top","bottom"].indexOf(L.colorbar.orient)!==-1?l.width-l.margin.l-l.margin.r:l.height-l.margin.t-l.margin.b;j("colorbar.len",L.colorbar.len*("fraction"===P?1/S:S),k)}else"colorbar.tick0"===J||"colorbar.dtick"===J?j("colorbar.tickmode","linear",k):"colorbar.tickmode"===J&&j(["colorbar.tick0","colorbar.dtick"],void 0,k);if("type"===J&&"pie"===P!=("pie"===N)){var T="x",U="y";"bar"!==P&&"bar"!==N||"h"!==K.orientation||(T="y",U="x"),C.Lib.swapAttrs(K,["?","?src"],"labels",T),C.Lib.swapAttrs(K,["d?","?0"],"label",T),C.Lib.swapAttrs(K,["?","?src"],"values",U),"pie"===N?(C.Lib.nestedProperty(K,"marker.color").set(C.Lib.nestedProperty(K,"marker.colors").get()),l._pielayer.selectAll("g.trace").remove()):I.traceIs(K,"cartesian")&&(C.Lib.nestedProperty(K,"marker.colors").set(C.Lib.nestedProperty(K,"marker.color").get()),B[K.xaxis||"x"]=!0,B[K.yaxis||"y"]=!0)}A[J][k]=N;var V=["swapxy","swapxyaxes","orientation","orientationaxes"];if(V.indexOf(J)!==-1){if("orientation"===J){if(M.set(P),M.get()===A[J][k])continue}else"orientationaxes"===J&&(K.orientation={v:"h",h:"v"}[L.orientation]);u(K)}else M.set(P)}if(["swapxyaxes","orientationaxes"].indexOf(J)!==-1&&C.Axes.swap(a,e),"orientationaxes"===J){var W=C.Lib.nestedProperty(a.layout,"hovermode");"x"===W.get()?W.set("y"):"y"===W.get()&&W.set("x")}if(e.indexOf(0)!==-1&&r.indexOf(J)!==-1&&(C.Axes.clearTypes(a,e),s=!0),["autobinx","autobiny","zauto"].indexOf(J)!==-1&&P===!1||(x=!0),(["colorbar","line"].indexOf(M.parts[0])!==-1||"marker"===M.parts[0]&&"colorbar"===M.parts[1])&&(y=!0),n.indexOf(J)!==-1){if(["orientation","type"].indexOf(J)!==-1){for(o=[],k=0;k<e.length;k++){var X=a.data[e[k]];I.traceIs(X,"cartesian")&&(g(X.xaxis||"x"),g(X.yaxis||"y"),"type"===b&&j(["autobinx","autobiny"],!0,k))}j(o.map(h),!0,0),j(o.map(i),[0,1],0)}s=!0}else q.indexOf(J)!==-1?v=!0:p.indexOf(J)!==-1&&(t=!0)}else M=C.Lib.nestedProperty(a.layout,J.replace("LAYOUT","")),A[J]=[M.get()],M.set(Array.isArray(Q)?Q[0]:Q),s=!0}var Y=Object.keys(B);a:for(k=0;k<Y.length;k++){for(var Z=Y[k],$=Z.charAt(0),_=$+"axis",aa=0;aa<a.data.length;aa++)if(I.traceIs(a.data[aa],"cartesian")&&(a.data[aa][_]||$)===Z)continue a;j("LAYOUT"+C.Axes.id2name(Z),null,0)}C.Queue&&C.Queue.add(a,O,[a,A,e],O,[a,z,e]);var ba=!1;C.Axes.list(a).forEach(function(a){a.autorange&&(ba=!0)}),(s||w||t&&ba)&&(a.calcdata=void 0);var ca;w?ca=[function(){var b=a.layout;return a.layout=void 0,C.plot(a,"",b)}]:s||v||t?ca=[C.plot]:(I.supplyDefaults(a),ca=[I.previousPromises],x&&ca.push(function(){var b,c,d;for(b=0;b<a.calcdata.length;b++)c=a.calcdata[b],d=(((c[0]||{}).trace||{})._module||{}).arraysToCalcdata,d&&d(c);return I.style(a),C.Legend.draw(a),I.previousPromises(a)}),y&&ca.push(function(){return a.calcdata.forEach(function(a){if((a[0].t||{}).cb){var b=a[0].trace,c=a[0].t.cb;I.traceIs(b,"contour")&&c.line({width:b.contours.showlines!==!1?b.line.width:0,dash:b.line.dash,color:"line"===b.contours.coloring?c._opts.line.color:b.line.color}),I.traceIs(b,"markerColorscale")?c.options(b.marker.colorbar)():c.options(b.colorbar)()}}),I.previousPromises(a)}));var da=C.Lib.syncOrAsync(ca,a);return da&&da.then||(da=Promise.resolve()),da.then(function(){return a.emit("plotly_restyle",C.Lib.extendDeep([],[z,e])),a})},C.relayout=function P(a,b,c){function e(a,b){if(Array.isArray(a))return void a.forEach(function(a){e(a,b)});if(!(a in o)){var c=C.Lib.nestedProperty(m,a);a in z||(z[a]=c.get()),void 0!==b&&c.set(b)}}function f(a,b){var c=C.Axes.id2name(a[b+"ref"]||b);return(n[c]||{}).autorange}if(a=d(a),a.framework&&a.framework.isPolar)return new Promise.resolve(a);var g,h,i,j,k,l,m=a.layout,n=a._fullLayout,o={},p=!1,q=!1,r=!1,s=!1,t=!1,u=!1;if("string"==typeof b)o[b]=c;else{if(!C.Lib.isPlainObject(b))return console.log("relayout fail",b,c),new Promise.reject;o=b}Object.keys(o).length&&(a.changed=!0),i=Object.keys(o),h=C.Axes.list(a);for(var v=0;v<i.length;v++){if(0===i[v].indexOf("allaxes")){for(var x=0;x<h.length;x++)k=h[x]._id.substr(1),l=k.indexOf("scene")!==-1?k+".":"",g=i[v].replace("allaxes",l+h[x]._name),o[g]||(o[g]=o[i[v]]);delete o[i[v]]}i[v].match(/^annotations\[[0-9-]+\].ref$/)&&(j=o[i[v]].split("y"),o[i[v].replace("ref","xref")]=j[0],o[i[v].replace("ref","yref")]=2===j.length?"y"+j[1]:"paper",delete o[i[v]])}var y={},z={},B=["height","width"];for(var D in o){var F=C.Lib.nestedProperty(m,D),G=o[D],H=F.parts.length,J="string"==typeof F.parts[H-1]?H-1:H-2,K=F.parts[J],L=F.parts[J-1]+"."+K,M=F.parts.slice(0,J).join("."),N=C.Lib.nestedProperty(a.layout,M).get(),O=C.Lib.nestedProperty(n,M).get();if(y[D]=G,z[D]="reverse"===K?G:F.get(),B.indexOf(D)!==-1?e("autosize",!1):"autosize"===D?e(B,void 0):L.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/)?e(M+".autorange",!1):L.match(/^[xyz]axis[0-9]*\.autorange$/)?e([M+".range[0]",M+".range[1]"],void 0):L.match(/^aspectratio\.[xyz]$/)?e(F.parts[0]+".aspectmode","manual"):L.match(/^aspectmode$/)?e([M+".x",M+".y",M+".z"],void 0):"tick0"===K||"dtick"===K?e(M+".tickmode","linear"):"tickmode"===K&&e([M+".tick0",M+".dtick"],void 0),"type"===K&&"log"===O.type!=("log"===G)){var Q=N;if(Q&&Q.range)if(O.autorange)"log"===G&&(Q.range=Q.range[1]>Q.range[0]?[1,2]:[2,1]);else{var R=Q.range[0],S=Q.range[1];"log"===G?(R<=0&&S<=0&&e(M+".autorange",!0),R<=0?R=S/1e6:S<=0&&(S=R/1e6),e(M+".range[0]",Math.log(R)/Math.LN10),e(M+".range[1]",Math.log(S)/Math.LN10)):(e(M+".range[0]",Math.pow(10,R)),e(M+".range[1]",Math.pow(10,S)))}else e(M+".autorange",!0)}if("reverse"===K)N.range?N.range.reverse():(e(M+".autorange",!0),N.range=[1,0]),O.autorange?t=!0:s=!0;else if("annotations"===F.parts[0]||"shapes"===F.parts[0]){var T=F.parts[1],U=F.parts[0],V=m[U]||[],W=C[C.Lib.titleCase(U)],X=V[T]||{};2===F.parts.length&&("add"===o[D]||C.Lib.isPlainObject(o[D])?z[D]="remove":"remove"===o[D]?T===-1?(z[U]=V,delete z[D]):z[D]=X:console.log("???",o)),!f(X,"x")&&!f(X,"y")||C.Lib.containsAny(D,["color","opacity","align","dash"])||(t=!0),W.draw(a,T,F.parts.slice(2).join("."),o[D]),delete o[D]}else 0===F.parts[0].indexOf("scene")?s=!0:0===F.parts[0].indexOf("geo")?s=!0:!n._hasGL2D||D.indexOf("axis")===-1&&"plot_bgcolor"!==F.parts[0]?"hiddenlabels"===D?t=!0:F.parts[0].indexOf("legend")!==-1?p=!0:D.indexOf("title")!==-1?q=!0:F.parts[0].indexOf("bgcolor")!==-1?r=!0:F.parts.length>1&&C.Lib.containsAny(F.parts[1],["tick","exponent","grid","zeroline"])?q=!0:D.indexOf(".linewidth")!==-1&&D.indexOf("axis")!==-1?q=r=!0:F.parts.length>1&&F.parts[1].indexOf("line")!==-1?r=!0:F.parts.length>1&&"mirror"===F.parts[1]?q=r=!0:"margin.pad"===D?q=r=!0:"margin"===F.parts[0]||"autorange"===F.parts[1]||"rangemode"===F.parts[1]||"type"===F.parts[1]||"domain"===F.parts[1]||D.match(/^(bar|box|font)/)?t=!0:["hovermode","dragmode"].indexOf(D)!==-1?u=!0:["hovermode","dragmode","height","width","autosize"].indexOf(D)===-1&&(s=!0):s=!0,F.set(G)}C.Queue&&C.Queue.add(a,P,[a,z],P,[a,y]),o.autosize&&(o=w(a,o)),(o.height||o.width||o.autosize)&&(t=!0);var Y=Object.keys(o),Z=[I.previousPromises];if(s||t)Z.push(function(){return a.layout=void 0,t&&(a.calcdata=void 0),C.plot(a,"",m)});else if(Y.length&&(I.supplyDefaults(a),n=a._fullLayout,p&&Z.push(function(){return C.Legend.draw(a),I.previousPromises(a)}),r&&Z.push(A),q&&Z.push(function(){return C.Axes.doTicks(a,"redraw"),C.Titles.draw(a,"gtitle"),I.previousPromises(a)}),u)){E(a);var $;for($=I.getSubplotIds(n,"gl3d"),v=0;v<$.length;v++)k=n[$[v]]._scene,k.handleDragmode(n.dragmode);for($=I.getSubplotIds(n,"gl2d"),v=0;v<$.length;v++)k=n._plots[$[v]]._scene2d,k.updateFx(n)}var _=C.Lib.syncOrAsync(Z,a);return _&&_.then||(_=Promise.resolve(a)),_.then(function(){return a.emit("plotly_relayout",C.Lib.extendDeep({},y)),a})}},{"../components/modebar/manage":1034,"../lib/events":1048,"../plotly":1070,d3:64,"fast-isnumeric":72,"gl-mat4/fromQuat":211}],1067:[function(a,b,c){"use strict";function d(a,b){try{a._fullLayout._paper.style("background",b)}catch(c){console.log(c)}}b.exports={staticPlot:!1,editable:!1,autosizable:!1,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,
showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:d,topojsonURL:"https://cdn.plot.ly/"}},{}],1068:[function(a,b,c){"use strict";function d(a){var b=q.attributes,c=i({type:a}),d=k(a),e=m(a),f={},l={};f.type=null,t(f,b),f=g(c.attributes,f,"attributes",a),void 0!==e.attributes&&t(f,e.attributes),f.type=a,f=j(f),h(f),B.traces[a]=s({},d,{attributes:f}),void 0!==c.layoutAttributes&&(l=g(c.layoutAttributes,l,"layoutAttributes",a),h(l),B.traces[a].layoutAttributes=l)}function e(){var a=q.layoutAttributes,b={};b=g(a,b,"layoutAttributes","*"),b=l(b),b=n(b),b=j(b),h(b),b=o(b),B.layout={layoutAttributes:b}}function f(){B.defs={valObjects:r.valObjects,metaKeys:A.concat(["description","role"])}}function g(a,b,c,d){var e,f,h,j,k;return Object.keys(a).forEach(function(l){return l===v?void Object.keys(a[l]).forEach(function(j){e=i({module:a[l][j]}),void 0!==e&&(f=e[c],h=g(f,{},c,d),r.nestedProperty(b,j).set(t({},h)))}):l===w?void Object.keys(a[l]).forEach(function(e){e===d&&(j=i({module:a[l][e]}),void 0!==j&&(k=j[c],k=g(k,{},c,d),u(b,k)))}):void(b[l]=r.isPlainObject(a[l])?u({},a[l]):a[l])}),b}function h(a){function b(a){return{valType:"string"}}function c(a,c,d){E.isValObject(a)?"data_array"===a.valType?(a.role="data",d[c+"src"]=b(c)):a.arrayOk===!0&&(d[c+"src"]=b(c)):r.isPlainObject(a)&&(a.role="object")}E.crawl(a,c)}function i(a){if("type"in a)return"area"===a.type?{attributes:C}:q.getModule({type:a.type});var b=q.subplotsRegistry,c=a.module;return b[c]?b[c]:"module"in a?p[c]:void 0}function j(a){return Object.keys(a).forEach(function(b){"_"===b.charAt(0)&&A.indexOf(b)===-1&&delete a[b]}),a}function k(a){return"area"===a?{}:q.modules[a].meta||{}}function l(a){return s(a,{radialaxis:D.radialaxis,angularaxis:D.angularaxis}),s(a,D.layout),a}function m(a){if("area"===a)return{};var b=q.subplotsRegistry,c=Object.keys(b).filter(function(b){return q.traceIs({type:a},b)})[0];return void 0===c?{}:b[c]}function n(a){var b=q.subplotsRegistry;return Object.keys(a).forEach(function(c){Object.keys(b).forEach(function(d){var e,f=b[d];e="cartesian"===d?f.attrRegex.x.test(c)||f.attrRegex.y.test(c):f.attrRegex.test(c),e&&(a[c][x]=!0)})}),a}function o(a){return Object.keys(a).forEach(function(b){var c=t({},a[b]);if(c[y]===!0){var d=b.substr(0,b.length-1);delete c[y],a[b]={items:{}},a[b].items[d]=c,a[b].role="object"}}),a}var p=a("../plotly"),q=a("../plots/plots"),r=a("../lib"),s=r.extendFlat,t=r.extendDeep,u=r.extendDeepAll,v="_nestedModules",w="_composedModules",x="_isSubplotObj",y="_isLinkedToArray",z="_deprecated",A=[x,y,z],B={traces:{},layout:{},defs:{}},C=a("../plots/polar/area_attributes"),D=a("../plots/polar/axis_attributes"),E=b.exports={};E.get=function(){return q.allTypes.concat("area").forEach(d),e(),f(),B},E.crawl=function(a,b){Object.keys(a).forEach(function(c){var d=a[c];A.indexOf(c)===-1&&(b(d,c,a),E.isValObject(d)||r.isPlainObject(d)&&E.crawl(d,b))})},E.isValObject=function(a){return a&&void 0!==a.valType}},{"../lib":1053,"../plotly":1070,"../plots/plots":1109,"../plots/polar/area_attributes":1110,"../plots/polar/axis_attributes":1111}],1069:[function(a,b,c){"use strict";var d=a("../plotly");b.exports=function(a){return d.Lib.extendFlat(d.defaultConfig,a)}},{"../plotly":1070}],1070:[function(a,b,c){a("es6-promise").polyfill(),c.Lib=a("./lib"),c.util=a("./lib/svg_text_utils"),c.Queue=a("./lib/queue"),a("../build/plotcss"),c.MathJaxConfig=a("./fonts/mathjax_config"),c.defaultConfig=a("./plot_api/plot_config");var d=c.Plots=a("./plots/plots"),e=a("./plots/cartesian");d.registerSubplot(e),c.Axes=a("./plots/cartesian/axes"),c.Fx=a("./plots/cartesian/graph_interact");var f=a("./plots/geo");d.registerSubplot(f);var g=a("./plots/gl3d");d.registerSubplot(g);var h=a("./plots/gl2d");d.registerSubplot(h),c.micropolar=a("./plots/polar/micropolar"),c.Color=a("./components/color"),c.Drawing=a("./components/drawing"),c.Colorscale=a("./components/colorscale"),c.Colorbar=a("./components/colorbar"),c.ErrorBars=a("./components/errorbars"),c.Annotations=a("./components/annotations"),c.Shapes=a("./components/shapes"),c.Titles=a("./components/titles"),c.Legend=a("./components/legend"),c.ModeBar=a("./components/modebar"),c.Scatter=a("./traces/scatter"),c.Bar=a("./traces/bar"),c.Box=a("./traces/box"),c.Heatmap=a("./traces/heatmap"),c.Histogram=a("./traces/histogram"),c.Histogram2d=a("./traces/histogram2d"),c.Histogram2dContour=a("./traces/histogram2dcontour"),c.Pie=a("./traces/pie"),c.Contour=a("./traces/contour"),c.Scatter3D=a("./traces/scatter3d"),c.Surface=a("./traces/surface"),c.Mesh3D=a("./traces/mesh3d"),c.ScatterGeo=a("./traces/scattergeo"),c.Choropleth=a("./traces/choropleth"),c.ScatterGl=a("./traces/scattergl"),a("./plot_api/plot_api"),c.PlotSchema=a("./plot_api/plot_schema"),c.Snapshot=a("./snapshot")},{"../build/plotcss":1,"./components/annotations":1003,"./components/color":1005,"./components/colorbar":1010,"./components/colorscale":1018,"./components/drawing":1023,"./components/errorbars":1029,"./components/legend":1031,"./components/modebar":1033,"./components/shapes":1036,"./components/titles":1037,"./fonts/mathjax_config":1043,"./lib":1053,"./lib/queue":1059,"./lib/svg_text_utils":1064,"./plot_api/plot_api":1066,"./plot_api/plot_config":1067,"./plot_api/plot_schema":1068,"./plots/cartesian":1076,"./plots/cartesian/axes":1073,"./plots/cartesian/graph_interact":1075,"./plots/geo":1081,"./plots/gl2d":1093,"./plots/gl3d":1096,"./plots/plots":1109,"./plots/polar/micropolar":1112,"./snapshot":1116,"./traces/bar":1125,"./traces/box":1136,"./traces/choropleth":1144,"./traces/contour":1151,"./traces/heatmap":1162,"./traces/histogram":1173,"./traces/histogram2d":1178,"./traces/histogram2dcontour":1182,"./traces/mesh3d":1186,"./traces/pie":1191,"./traces/scatter":1199,"./traces/scatter3d":1207,"./traces/scattergeo":1210,"./traces/scattergl":1215,"./traces/surface":1220,"es6-promise":71}],1071:[function(a,b,c){b.exports={type:{valType:"enumerated",values:[],dflt:"scatter"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0},showlegend:{valType:"boolean",dflt:!0},legendgroup:{valType:"string",dflt:""},opacity:{valType:"number",min:0,max:1,dflt:1},name:{valType:"string"},uid:{valType:"string",dflt:""},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none"],dflt:"all"},stream:{token:{valType:"string",noBlank:!0,strict:!0},maxpoints:{valType:"number",min:0}}}},{}],1072:[function(a,b,c){b.exports={xaxis:{valType:"axisid",dflt:"x"},yaxis:{valType:"axisid",dflt:"y"}}},{}],1073:[function(a,b,c){"use strict";function d(a,b){if("-"===a.type){var c=a._id,d=c.charAt(0);c.indexOf("scene")!==-1&&(c=d);var h=g(b,c,d);if(h){if("histogram"===h.type&&d==={v:"y",h:"x"}[h.orientation||"v"])return void(a.type="linear");if(f(h,d)){for(var i,j=e(h),k=[],l=0;l<b.length;l++)i=b[l],z.Plots.traceIs(i,"box")&&(i[d+"axis"]||d)===c&&(void 0!==i[j]?k.push(i[j][0]):void 0!==i.name?k.push(i.name):k.push("text"));a.type=C.autoType(k)}else a.type=C.autoType(h[d]||[h[d+"0"]])}}}function e(a){return{v:"x",h:"y"}[a.orientation||"v"]}function f(a,b){var c=e(a);return z.Plots.traceIs(a,"box")&&b===c&&void 0===a[c]&&void 0===a[c+"0"]}function g(a,b,c){for(var d,e=0;e<a.length;e++)if(d=a[e],(d[c+"axis"]||c)===b){if(f(d,c))return d;if((d[c]||[]).length||d[c+"0"])return d}}function h(a){if(!a)return!1;for(var b=0;b<a.length;b++)if(B(a[b]))return!0;return!1}function i(a){var b,c,d=a.tickvals,e=a.ticktext,f=new Array(d.length),g=1.0001*a.range[0]-1e-4*a.range[1],h=1.0001*a.range[1]-1e-4*a.range[0],i=Math.min(g,h),j=Math.max(g,h),k=0;for(Array.isArray(e)||(e=[]),c=0;c<d.length;c++)b=a.d2l(d[c]),b>i&&b<j&&(void 0===e[c]?f[k]=C.tickText(a,b):f[k]=m(a,b,String(e[c])),k++);return k<d.length&&f.splice(k,d.length-k),f}function j(a,b,c){return b*z.Lib.roundUp(a/b,c)}function k(a){var b,c=a.dtick;if(a._tickexponent=0,B(c)||"string"==typeof c||(c=1),"category"===a.type)a._tickround=null;else if(B(c)||"L"===c.charAt(0))if("date"===a.type)c>=864e5?a._tickround="d":c>=36e5?a._tickround="H":c>=6e4?a._tickround="M":c>=1e3?a._tickround="S":a._tickround=3-Math.round(Math.log(c/2)/Math.LN10);else{B(c)||(c=Number(c.substr(1))),a._tickround=2-Math.floor(Math.log(c)/Math.LN10+.01),b="log"===a.type?Math.pow(10,Math.max(a.range[0],a.range[1])):Math.max(Math.abs(a.range[0]),Math.abs(a.range[1]));var d=Math.floor(Math.log(b)/Math.LN10+.01);Math.abs(d)>3&&("SI"===a.exponentformat||"B"===a.exponentformat?a._tickexponent=3*Math.round((d-1)/3):a._tickexponent=d)}else"M"===c.charAt(0)?a._tickround=2===c.length?"m":"y":a._tickround=null}function l(a,b){var c=a.match(U),d=new Date(b);if(c){var e=Math.min(+c[1]||6,6),f=String(b/1e3%1+2.0000005).substr(2,e).replace(/0+$/,"")||"0";return A.time.format(a.replace(U,f))(d)}return A.time.format(a)(d)}function m(a,b,c){var d=a.tickfont||a._td._fullLayout.font;return{x:b,dx:0,dy:0,text:c||"",fontSize:d.size,font:d.family,fontColor:d.color}}function n(a,b,c,d){var e,f=b.x,g=a._tickround,h=new Date(f),i="";c&&a.hoverformat?e=l(a.hoverformat,f):a.tickformat?e=l(a.tickformat,f):(d&&(B(g)?g+=2:g={y:"m",m:"d",d:"H",H:"M",M:"S",S:2}[g]),"y"===g?e=O(h):"m"===g?e=P(h):(f!==a._tmin||c||(i="<br>"+O(h)),"d"===g?e=Q(h):"H"===g?e=R(h):(f!==a._tmin||c||(i="<br>"+Q(h)+", "+O(h)),e=S(h),"M"!==g&&(e+=T(h),"S"!==g&&(e+=r(y(f/1e3,1),a,"none",c).substr(1)))))),b.text=e+i}function o(a,b,c,d,e){var f=a.dtick,g=b.x;if(!d||"string"==typeof f&&"L"===f.charAt(0)||(f="L3"),a.tickformat||"string"==typeof f&&"L"===f.charAt(0))b.text=r(Math.pow(10,g),a,e,d);else if(B(f)||"D"===f.charAt(0)&&y(g+.01,1)<.1)if(["e","E","power"].indexOf(a.exponentformat)!==-1){var h=Math.round(g);0===h?b.text=1:1===h?b.text="10":h>1?b.text="10<sup>"+h+"</sup>":b.text="10<sup>"+-h+"</sup>",b.fontSize*=1.25}else b.text=r(Math.pow(10,g),a,"","fakehover"),"D1"===f&&"y"===a._id.charAt(0)&&(b.dy-=b.fontSize/6);else{if("D"!==f.charAt(0))throw"unrecognized dtick "+String(f);b.text=String(Math.round(Math.pow(10,y(g,1)))),b.fontSize*=.75}if("D1"===a.dtick){var i=String(b.text).charAt(0);"0"!==i&&"1"!==i||("y"===a._id.charAt(0)?b.dx-=b.fontSize/4:(b.dy+=b.fontSize/2,b.dx+=(a.range[1]>a.range[0]?1:-1)*b.fontSize*(g<0?.5:.25)))}}function p(a,b){var c=a._categories[Math.round(b.x)];void 0===c&&(c=""),b.text=String(c)}function q(a,b,c,d,e){"all"===a.showexponent&&Math.abs(b.x/a.dtick)<1e-6&&(e="hide"),b.text=r(b.x,a,e,d)}function r(a,b,c,d){var e=a<0,f=b._tickround,g=c||b.exponentformat||"B",h=b._tickexponent,i=b.tickformat;if(d){var j={exponentformat:b.exponentformat,dtick:"none"===b.showexponent?b.dtick:B(a)?Math.abs(a)||1:1,range:"none"===b.showexponent?b.range:[0,a||1]};k(j),f=(Number(j._tickround)||0)+4,h=j._tickexponent,b.hoverformat&&(i=b.hoverformat)}if(i)return A.format(i)(a).replace(/-/g,"");var l=Math.pow(10,-f)/2;if("none"===g&&(h=0),a=Math.abs(a),a<l)a="0",e=!1;else{if(a+=l,h&&(a*=Math.pow(10,-h),f+=h),0===f)a=String(Math.floor(a));else if(f<0){a=String(Math.round(a)),a=a.substr(0,a.length+f);for(var m=f;m<0;m++)a+="0"}else{a=String(a);var n=a.indexOf(".")+1;n&&(a=a.substr(0,n+f).replace(/\.?0+$/,""))}a=s(a,b._td._fullLayout.separators)}if(h&&"hide"!==g){var o;o=h<0?""+-h:"power"!==g?"+"+h:String(h),"e"===g||("SI"===g||"B"===g)&&(h>12||h<-15)?a+="e"+o:"E"===g?a+="E"+o:"power"===g?a+="&times;10<sup>"+o+"</sup>":"B"===g&&9===h?a+="B":"SI"!==g&&"B"!==g||(a+=V[h/3+5])}return e?""+a:a}function s(a,b){var c=b.charAt(0),d=b.charAt(1),e=a.split("."),f=e[0],g=e.length>1?c+e[1]:"";if(d&&(e.length>1||f.length>4))for(;W.test(f);)f=f.replace(W,"$1"+d+"$2");return f+g}function t(a,b,c){function d(a,c){for(var d=Object.keys(a),e=/^[xyz]axis[0-9]*/,f=[],g=0;g<d.length;g++){var h=d[g];b&&h.charAt(0)!==b||e.test(h)&&f.push(c+h)}return f.sort()}var e=a._fullLayout;if(!e)return[];var f=d(e,"");if(c)return f;for(var g=z.Plots.getSubplotIds(e,"gl3d")||[],h=0;h<g.length;h++){var i=g[h];f=f.concat(d(e[i],i+"."))}return f}function u(a,b){var c,d,e=[];for(c=0;c<b.length;c++){var f=[],g=a._fullData[b[c]].xaxis,h=a._fullData[b[c]].yaxis;if(g&&h){for(d=0;d<e.length;d++)e[d].x.indexOf(g)===-1&&e[d].y.indexOf(h)===-1||f.push(d);if(f.length){var i,j=e[f[0]];if(f.length>1)for(d=1;d<f.length;d++)i=e[f[d]],v(j.x,i.x),v(j.y,i.y);v(j.x,[g]),v(j.y,[h])}else e.push({x:[g],y:[h]})}}return e}function v(a,b){for(var c=0;c<b.length;c++)a.indexOf(b[c])===-1&&a.push(b[c])}function w(a,b,c){var d,e,f=[],g=[],h=a.layout;for(d=0;d<b.length;d++)f.push(C.getFromId(a,b[d]));for(d=0;d<c.length;d++)g.push(C.getFromId(a,c[d]));var i=Object.keys(f[0]),j=["anchor","domain","overlaying","position","side","tickangle"],k=["linear","log"];for(d=0;d<i.length;d++){var l=i[d],m=f[0][l],n=g[0][l],o=!0,p=!1,q=!1;if("_"!==l.charAt(0)&&"function"!=typeof m&&j.indexOf(l)===-1){for(e=1;e<f.length&&o;e++){var r=f[e][l];"type"===l&&k.indexOf(m)!==-1&&k.indexOf(r)!==-1&&m!==r?p=!0:r!==m&&(o=!1)}for(e=1;e<g.length&&o;e++){var s=g[e][l];"type"===l&&k.indexOf(n)!==-1&&k.indexOf(s)!==-1&&n!==s?q=!0:g[e][l]!==n&&(o=!1)}o&&(p&&(h[f[0]._name].type="linear"),q&&(h[g[0]._name].type="linear"),x(h,l,f,g))}}for(d=0;d<a._fullLayout.annotations.length;d++){var t=a._fullLayout.annotations[d];b.indexOf(t.xref)!==-1&&c.indexOf(t.yref)!==-1&&z.Lib.swapAttrs(h.annotations[d],["?"])}}function x(a,b,c,d){var e,f=z.Lib.nestedProperty,g=f(a[c[0]._name],b).get(),h=f(a[d[0]._name],b).get();for("title"===b&&("Click to enter X axis title"===g&&(g="Click to enter Y axis title"),"Click to enter Y axis title"===h&&(h="Click to enter X axis title")),e=0;e<c.length;e++)f(a,c[e]._name+"."+b).set(h);for(e=0;e<d.length;e++)f(a,d[e]._name+"."+b).set(g)}function y(a,b){return(a%b+b)%b}var z=a("../../plotly"),A=a("d3"),B=a("fast-isnumeric"),C=b.exports={};C.layoutAttributes=a("./layout_attributes");var D=/^xaxis[0-9]*$/,E=/^yaxis[0-9]*$/;C.supplyLayoutDefaults=function(a,b,c){function d(a,b){var c=Number(a.substr(5)||1),d=Number(b.substr(5)||1);return c-d}var e,f=Object.keys(a),g=[],h=[],i={},j={};for(e=0;e<f.length;e++){var k=f[e];D.test(k)?g.push(k):E.test(k)&&h.push(k)}for(e=0;e<c.length;e++){var l=c[e],m=C.id2name(l.xaxis),n=C.id2name(l.yaxis);if(m&&g.indexOf(m)===-1&&g.push(m),n&&h.indexOf(n)===-1&&h.push(n),z.Plots.traceIs(l,"2dMap")&&(i[m]=!0,i[n]=!0),z.Plots.traceIs(l,"oriented")){var o="h"===l.orientation?n:m;j[o]=!0}}(b._hasCartesian||b._hasGL2D||!c.length)&&(g.length?g.sort(d):g=["xaxis"],h.length?h.sort(d):h=["yaxis"]),g.concat(h).forEach(function(d){function e(a,b){return z.Lib.coerce(k,l,C.layoutAttributes,a,b)}var f=d.charAt(0),k=a[d]||{},l={},m={letter:f,font:b.font,outerTicks:i[d],showGrid:!j[d],name:d,data:c},n={letter:f,counterAxes:{x:h,y:g}[f].map(C.name2id),overlayableAxes:{x:g,y:h}[f].filter(function(b){return b!==d&&!(a[b]||{}).overlaying}).map(C.name2id)};C.handleAxisDefaults(k,l,e,m),C.handleAxisPositioningDefaults(k,l,e,n),b[d]=l,a[d]||"-"===k.type||(a[d]={type:k.type})}),g.length&&h.length&&z.Lib.coerce(a,b,z.Plots.layoutAttributes,"plot_bgcolor")},C.handleAxisDefaults=function(a,b,c,e){var f=e.letter,g=e.font||{},h="Click to enter "+(e.title||f.toUpperCase()+" axis")+" title";e.name&&(b._name=e.name,b._id=C.name2id(e.name));var i=c("type");"-"===i&&(d(b,e.data),"-"===b.type?b.type="linear":i=a.type=b.type),C.setConvert(b),c("title",h),z.Lib.coerceFont(c,"titlefont",{family:g.family,size:Math.round(1.2*g.size),color:g.color});var j=2===(a.range||[]).length&&B(a.range[0])&&B(a.range[1]),k=c("autorange",!j);k&&c("rangemode");var l=c("range",[-1,"x"===f?6:4]);l[0]===l[1]&&(b.range=[l[0]-1,l[0]+1]),z.Lib.noneOrAll(a.range,b.range,[0,1]),c("fixedrange"),C.handleTickValueDefaults(a,b,c,i),C.handleTickDefaults(a,b,c,i,e);var m=z.Lib.coerce2(a,b,C.layoutAttributes,"linecolor"),n=z.Lib.coerce2(a,b,C.layoutAttributes,"linewidth"),o=c("showline",!!m||!!n);o||(delete b.linecolor,delete b.linewidth),(o||b.ticks)&&c("mirror");var p=z.Lib.coerce2(a,b,C.layoutAttributes,"gridcolor"),q=z.Lib.coerce2(a,b,C.layoutAttributes,"gridwidth"),r=c("showgrid",e.showGrid||!!p||!!q);r||(delete b.gridcolor,delete b.gridwidth);var s=z.Lib.coerce2(a,b,C.layoutAttributes,"zerolinecolor"),t=z.Lib.coerce2(a,b,C.layoutAttributes,"zerolinewidth"),u=c("zeroline",e.showGrid||!!s||!!t);return u||(delete b.zerolinecolor,delete b.zerolinewidth),b},C.handleTickDefaults=function(a,b,c,d,e){var f=z.Lib.coerce2(a,b,C.layoutAttributes,"ticklen"),g=z.Lib.coerce2(a,b,C.layoutAttributes,"tickwidth"),h=z.Lib.coerce2(a,b,C.layoutAttributes,"tickcolor"),i=c("ticks",e.outerTicks||f||g||h?"outside":"");i||(delete b.ticklen,delete b.tickwidth,delete b.tickcolor);var j=c("showticklabels");if(j){z.Lib.coerceFont(c,"tickfont",e.font||{}),c("tickangle");var k=C.getShowAttrDflt(a);if("category"!==d){var l=c("tickformat");e.noHover||c("hoverformat"),l||"date"===d||(c("showexponent",k),c("exponentformat"))}var m=c("tickprefix");m&&c("showtickprefix",k);var n=c("ticksuffix");n&&c("showticksuffix",k)}},C.handleTickValueDefaults=function(a,b,c,d){var e="auto";"array"!==a.tickmode||"log"!==d&&"date"!==d||(a.tickmode="auto"),Array.isArray(a.tickvals)?e="array":a.dtick&&B(a.dtick)&&(e="linear");var f=c("tickmode",e);if("auto"===f)c("nticks");else if("linear"===f)c("tick0"),c("dtick");else{var g=c("tickvals");void 0===g?b.tickmode="auto":c("ticktext")}},C.handleAxisPositioningDefaults=function(a,b,c,d){var e=d.counterAxes||[],f=d.overlayableAxes||[],g=d.letter,h=z.Lib.coerce(a,b,{anchor:{valType:"enumerated",values:["free"].concat(e),dflt:B(a.position)?"free":e[0]||"free"}},"anchor");"free"===h&&c("position"),z.Lib.coerce(a,b,{side:{valType:"enumerated",values:"x"===g?["bottom","top"]:["left","right"],dflt:"x"===g?"bottom":"left"}},"side");var i=!1;if(f.length&&(i=z.Lib.coerce(a,b,{overlaying:{valType:"enumerated",values:[!1].concat(f),dflt:!1}},"overlaying")),!i){var j=c("domain");j[0]>j[1]-.01&&(b.domain=[0,1]),z.Lib.noneOrAll(a.domain,b.domain,[0,1])}return b},C.coerceRef=function(a,b,c,d){var e=c._fullLayout._hasGL2D?[]:C.listIds(c,d),f=d+"ref",g={};return g[f]={valType:"enumerated",values:e.concat(["paper"]),dflt:e[0]||"paper"},z.Lib.coerce(a,b,g,f)},C.clearTypes=function(a,b){Array.isArray(b)&&b.length||(b=a._fullData.map(function(a,b){return b})),b.forEach(function(b){var c=a.data[b];delete(C.getFromId(a,c.xaxis)||{}).type,delete(C.getFromId(a,c.yaxis)||{}).type})};var F=/^[xyz][0-9]*$/,G=/^[xyz]axis[0-9]*$/;C.id2name=function(a){if("string"==typeof a&&a.match(F)){var b=a.substr(1);return"1"===b&&(b=""),a.charAt(0)+"axis"+b}},C.name2id=function(a){if(a.match(G)){var b=a.substr(5);return"1"===b&&(b=""),a.charAt(0)+b}},C.cleanId=function(a,b){if(a.match(F)&&(!b||a.charAt(0)===b)){var c=a.substr(1).replace(/^0+/,"");return"1"===c&&(c=""),a.charAt(0)+c}},C.cleanName=function(a,b){if(a.match(F)&&(!b||a.charAt(0)===b)){var c=a.substr(5).replace(/^0+/,"");return"1"===c&&(c=""),a.charAt(0)+"axis"+c}},C.counterLetter=function(a){return{x:"y",y:"x"}[a.charAt(0)]},C.autoType=function(a){return C.moreDates(a)?"date":C.category(a)?"category":h(a)?"linear":"-"},C.getShowAttrDflt=function(a){var b=["showexponent","showtickprefix","showticksuffix"],c=b.filter(function(b){return void 0!==a[b]}),d=function(b){return a[b]===a[c[0]]};if(c.every(d)||1===c.length)return a[c[0]]},C.moreDates=function(a){for(var b,c=0,d=0,e=Math.max(1,(a.length-1)/1e3),f=0;f<a.length;f+=e)b=a[Math.round(f)],z.Lib.isDateTime(b)&&(c+=1),B(b)&&(d+=1);return c>2*d},C.category=function(a){for(var b,c=Math.max(1,(a.length-1)/1e3),d=0,e=0,f=0;f<a.length;f+=c)b=C.cleanDatum(a[Math.round(f)]),B(b)?d++:"string"==typeof b&&""!==b&&"None"!==b&&e++;return e>2*d},C.cleanDatum=function(a){try{if("object"==typeof a&&null!==a&&a.getTime)return z.Lib.ms2DateTime(a);if("string"!=typeof a&&!B(a))return"";a=a.toString().replace(/['"%,$# ]/g,"")}catch(b){console.log(b,a)}return a},C.BADNUM=void 0,C.setConvert=function(a){function b(b,c){if(b>0)return Math.log(b)/Math.LN10;if(b<=0&&c&&a.range&&2===a.range.length){var d=a.range[0],f=a.range[1];return.5*(d+f-3*e*Math.abs(d-f))}return C.BADNUM}function c(a){return Math.pow(10,a)}function d(a){return B(a)?Number(a):C.BADNUM}var e=10;if(a.c2l="log"===a.type?b:d,a.l2c="log"===a.type?c:d,a.l2d=function(b){return a.c2d(a.l2c(b))},a.p2d=function(b){return a.l2d(a.p2l(b))},a.setScale=function(){var b,c=a._td._fullLayout._size;if(a._categories||(a._categories=[]),a.overlaying){var d=C.getFromId(a._td,a.overlaying);a.domain=d.domain}for(a.range&&2===a.range.length&&a.range[0]!==a.range[1]||(a.range=[-1,1]),b=0;b<2;b++)B(a.range[b])||(a.range[b]=B(a.range[1-b])?a.range[1-b]*(b?10:.1):b?1:-1),a.range[b]<-(Number.MAX_VALUE/2)?a.range[b]=-(Number.MAX_VALUE/2):a.range[b]>Number.MAX_VALUE/2&&(a.range[b]=Number.MAX_VALUE/2);if("y"===a._id.charAt(0)?(a._offset=c.t+(1-a.domain[1])*c.h,a._length=c.h*(a.domain[1]-a.domain[0]),a._m=a._length/(a.range[0]-a.range[1]),a._b=-a._m*a.range[1]):(a._offset=c.l+a.domain[0]*c.w,a._length=c.w*(a.domain[1]-a.domain[0]),a._m=a._length/(a.range[1]-a.range[0]),a._b=-a._m*a.range[0]),!isFinite(a._m)||!isFinite(a._b))throw z.Lib.notifier("Something went wrong with axis scaling","long"),a._td._replotting=!1,new Error("axis scaling")},a.l2p=function(b){return B(b)?A.round(z.Lib.constrain(a._b+a._m*b,-e*a._length,(1+e)*a._length),2):C.BADNUM},a.p2l=function(b){return(b-a._b)/a._m},a.c2p=function(b,c){return a.l2p(a.c2l(b,c))},a.p2c=function(b){return a.l2c(a.p2l(b))},["linear","log","-"].indexOf(a.type)!==-1)a.c2d=d,a.d2c=function(a){return a=C.cleanDatum(a),B(a)?Number(a):C.BADNUM},a.d2l=function(b,c){return"log"===a.type?a.c2l(a.d2c(b),c):a.d2c(b)};else if("date"===a.type){if(a.c2d=function(a){return B(a)?z.Lib.ms2DateTime(a):C.BADNUM},a.d2c=function(a){return B(a)?Number(a):z.Lib.dateTime2ms(a)},a.d2l=a.d2c,a.range&&a.range.length>1)try{var f=a.range.map(z.Lib.dateTime2ms);!B(a.range[0])&&B(f[0])&&(a.range[0]=f[0]),!B(a.range[1])&&B(f[1])&&(a.range[1]=f[1])}catch(g){console.log(g,a.range)}}else"category"===a.type&&(a.c2d=function(b){return a._categories[Math.round(b)]},a.d2c=function(b){a._categories.indexOf(b)===-1&&a._categories.push(b);var c=a._categories.indexOf(b);return c===-1?C.BADNUM:c},a.d2l=a.d2c);a.makeCalcdata=function(b,c){var d,e,f;if(c in b)for(d=b[c],e=new Array(d.length),f=0;f<d.length;f++)e[f]=a.d2c(d[f]);else{var g=c+"0"in b?a.d2c(b[c+"0"]):0,h=b["d"+c]?Number(b["d"+c]):1;for(d=b[{x:"y",y:"x"}[c]],e=new Array(d.length),f=0;f<d.length;f++)e[f]=g+f*h}return e},a._min=[],a._max=[],a._minDtick=null,a._forceTick0=null},C.minDtick=function(a,b,c,d){["log","category"].indexOf(a.type)===-1&&d?null===a._minDtick?(a._minDtick=b,a._forceTick0=c):a._minDtick&&((a._minDtick/b+1e-6)%1<2e-6&&((c-a._forceTick0)/b%1+1.000001)%1<2e-6?(a._minDtick=b,a._forceTick0=c):((b/a._minDtick+1e-6)%1>2e-6||((c-a._forceTick0)/a._minDtick%1+1.000001)%1>2e-6)&&(a._minDtick=0)):a._minDtick=0},C.doAutoRange=function(a){if(a._length||a.setScale(),a.autorange&&a._min&&a._max&&a._min.length&&a._max.length){var b,c=a._min[0].val,d=a._max[0].val;for(b=1;b<a._min.length&&c===d;b++)c=Math.min(c,a._min[b].val);for(b=1;b<a._max.length&&c===d;b++)d=Math.max(d,a._max[b].val);var e,f,g,h,i,j,k,l=0,m=a.range&&a.range[1]<a.range[0];for("reversed"===a.autorange&&(m=!0,a.autorange=!0),b=0;b<a._min.length;b++)for(f=a._min[b],e=0;e<a._max.length;e++)g=a._max[e],k=g.val-f.val,j=a._length-f.pad-g.pad,k>0&&j>0&&k/j>l&&(h=f,i=g,l=k/j);c===d?a.range=m?[c+1,"normal"!==a.rangemode?0:c-1]:["normal"!==a.rangemode?0:c-1,c+1]:l&&("linear"!==a.type&&"-"!==a.type||("tozero"===a.rangemode&&h.val>=0?h={val:0,pad:0}:"nonnegative"===a.rangemode&&(h.val-l*h.pad<0&&(h={val:0,pad:0}),i.val<0&&(i={val:1,pad:0})),l=(i.val-h.val)/(a._length-h.pad-i.pad)),a.range=[h.val-l*h.pad,i.val+l*i.pad],a.range[0]===a.range[1]&&(a.range=[a.range[0]-1,a.range[0]+1]),m&&a.range.reverse());var n=a._td.layout[a._name];n||(a._td.layout[a._name]=n={}),n!==a&&(n.range=a.range.slice(),n.autorange=a.autorange)}},C.saveRangeInitial=function(a,b){for(var c,d,e,f=C.list(a,"",!0),g=!1,h=0;h<f.length;h++)c=f[h],d=void 0===c._rangeInitial,e=d||!(c.range[0]===c._rangeInitial[0]&&c.range[1]===c._rangeInitial[1]),(d&&c.autorange===!1||b&&e)&&(c._rangeInitial=c.range.slice(),g=!0);return g};var H=Number.MAX_VALUE/2;C.expand=function(a,b,c){function d(a){if(Array.isArray(a))return function(b){return Math.max(Number(a[b]||0),0)};var b=Math.max(Number(a||0),0);return function(){return b}}function e(c){function d(a){return B(a)&&Math.abs(a)<H}if(i=b[c],B(i)){if(l=t(c)+r,m=u(c)+r,o=i-w(c),p=i+v(c),"log"===a.type&&o<p/10&&(o=p/10),j=a.c2l(o),k=a.c2l(p),s&&(j=Math.min(0,j),k=Math.max(0,k)),d(j)){for(n=!0,g=0;g<a._min.length&&n;g++)h=a._min[g],h.val<=j&&h.pad>=m?n=!1:h.val>=j&&h.pad<=m&&(a._min.splice(g,1),g--);n&&a._min.push({val:j,pad:s&&0===j?0:m})}if(d(k)){for(n=!0,g=0;g<a._max.length&&n;g++)h=a._max[g],h.val>=k&&h.pad>=l?n=!1:h.val<=k&&h.pad<=l&&(a._max.splice(g,1),g--);n&&a._max.push({val:k,pad:s&&0===k?0:l})}}}if(a.autorange&&b){a._min||(a._min=[]),a._max||(a._max=[]),c||(c={}),a._m||a.setScale();var f,g,h,i,j,k,l,m,n,o,p,q=b.length,r=c.padded?.05*a._length:0,s=c.tozero&&("linear"===a.type||"-"===a.type),t=d((a._m>0?c.ppadplus:c.ppadminus)||c.ppad||0),u=d((a._m>0?c.ppadminus:c.ppadplus)||c.ppad||0),v=d(c.vpadplus||c.vpad),w=d(c.vpadminus||c.vpad);for(f=0;f<6;f++)e(f);for(f=q-1;f>5;f--)e(f)}},C.autoBin=function(a,b,c,d){function e(a){return(1+100*(a-n)/l.dtick)%100<2}var f=z.Lib.aggNums(Math.min,null,a),g=z.Lib.aggNums(Math.max,null,a);if("category"===b.type)return{start:f-.5,end:g+.5,size:1};var h;if(c)h=(g-f)/c;else{var i=z.Lib.distinctVals(a),j=Math.pow(10,Math.floor(Math.log(i.minDiff)/Math.LN10)),k=j*z.Lib.roundUp(i.minDiff/j,[.9,1.9,4.9,9.9],!0);h=Math.max(k,2*z.Lib.stdev(a)/Math.pow(a.length,d?.25:.4))}var l={type:"log"===b.type?"linear":b.type,range:[f,g]};C.autoTicks(l,h);var m,n=C.tickIncrement(C.tickFirst(l),l.dtick,"reverse");if("number"==typeof l.dtick){for(var o=0,p=0,q=0,r=0,s=0;s<a.length;s++)a[s]%1===0?q++:B(a[s])||r++,e(a[s])&&o++,e(a[s]+l.dtick/2)&&p++;var t=a.length-r;if(q===t&&"date"!==b.type)l.dtick<1?n=f-.5*l.dtick:n-=.5;else if(p<.1*t&&(o>.3*t||e(f)||e(g))){var u=l.dtick/2;n+=n+u<f?u:-u}var v=1+Math.floor((g-n)/l.dtick);m=n+v*l.dtick}else for(m=n;m<=g;)m=C.tickIncrement(m,l.dtick);return{start:n,end:m,size:l.dtick}},C.calcTicks=function(a){if("array"===a.tickmode)return i(a);if("auto"===a.tickmode||!a.dtick){var b,c=a.nticks;c||("category"===a.type?(b=a.tickfont?1.2*(a.tickfont.size||12):15,c=a._length/b):(b="y"===a._id.charAt(0)?40:80,c=z.Lib.constrain(a._length/b,4,9)+1)),C.autoTicks(a,Math.abs(a.range[1]-a.range[0])/c),a._minDtick>0&&a.dtick<2*a._minDtick&&(a.dtick=a._minDtick,a.tick0=a._forceTick0)}a.tick0||(a.tick0="date"===a.type?new Date(2e3,0,1).getTime():0),k(a),a._tmin=C.tickFirst(a);var d=a.range[1]<a.range[0],e=[],f=1.0001*a.range[1]-1e-4*a.range[0];"category"===a.type&&(f=d?Math.max(-.5,f):Math.min(a._categories.length-.5,f));for(var g=a._tmin;(d?g>=f:g<=f)&&(e.push(g),!(e.length>1e3));g=C.tickIncrement(g,a.dtick,d));a._tmax=e[e.length-1];for(var h=new Array(e.length),j=0;j<e.length;j++)h[j]=C.tickText(a,e[j]);return h};var I=[2,5,10],J=[1,2,3,6,12],K=[1,2,5,10,15,30],L=[1,2,3,7,14],M=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],N=[-.301,0,.301,.699,1];C.autoTicks=function(a,b){var c;if("date"===a.type)a.tick0=new Date(2e3,0,1).getTime(),b>157788e5?(b/=315576e5,c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a.dtick="M"+12*j(b,c,I)):b>12096e5?(b/=26298e5,a.dtick="M"+j(b,1,J)):b>432e5?(a.dtick=j(b,864e5,L),a.tick0=new Date(2e3,0,2).getTime()):b>18e5?a.dtick=j(b,36e5,J):b>3e4?a.dtick=j(b,6e4,K):b>500?a.dtick=j(b,1e3,K):(c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a.dtick=j(b,c,I));else if("log"===a.type)if(a.tick0=0,b>.7)a.dtick=Math.ceil(b);else if(Math.abs(a.range[1]-a.range[0])<1){var d=1.5*Math.abs((a.range[1]-a.range[0])/b);b=Math.abs(Math.pow(10,a.range[1])-Math.pow(10,a.range[0]))/d,c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a.dtick="L"+j(b,c,I)}else a.dtick=b>.3?"D2":"D1";else"category"===a.type?(a.tick0=0,a.dtick=Math.ceil(Math.max(b,1))):(a.tick0=0,c=Math.pow(10,Math.floor(Math.log(b)/Math.LN10)),a.dtick=j(b,c,I));if(0===a.dtick&&(a.dtick=1),!B(a.dtick)&&"string"!=typeof a.dtick){var e=a.dtick;throw a.dtick=1,"ax.dtick error: "+String(e)}},C.tickIncrement=function(a,b,c){var d=c?-1:1;if(B(b))return a+d*b;var e=b.charAt(0),f=d*Number(b.substr(1));if("M"===e){var g=new Date(a);return g.setMonth(g.getMonth()+f)}if("L"===e)return Math.log(Math.pow(10,a)+f)/Math.LN10;if("D"===e){var h="D2"===b?N:M,i=a+.01*d,j=z.Lib.roundUp(y(i,1),h,c);return Math.floor(i)+Math.log(A.round(Math.pow(10,j),1))/Math.LN10}throw"unrecognized dtick "+String(b)},C.tickFirst=function(a){var b=a.range[1]<a.range[0],c=b?Math.floor:Math.ceil,d=1.0001*a.range[0]-1e-4*a.range[1],e=a.dtick,f=a.tick0;if(B(e)){var g=c((d-f)/e)*e+f;return"category"===a.type&&(g=z.Lib.constrain(g,0,a._categories.length-1)),g}var h,i,j,k=e.charAt(0),l=Number(e.substr(1));if("M"===k){for(h=new Date(f),d=new Date(d),i=12*(d.getFullYear()-h.getFullYear())+d.getMonth()-h.getMonth(),j=h.setMonth(h.getMonth()+(Math.round(i/l)+(b?1:-1))*l);b?j>d:j<d;)j=C.tickIncrement(j,e,b);return j}if("L"===k)return Math.log(c((Math.pow(10,d)-f)/l)*l+f)/Math.LN10;if("D"===k){var m="D2"===e?N:M,n=z.Lib.roundUp(y(d,1),m,b);return Math.floor(d)+Math.log(A.round(Math.pow(10,n),1))/Math.LN10}throw"unrecognized dtick "+String(e)};var O=A.time.format("%Y"),P=A.time.format("%b %Y"),Q=A.time.format("%b %-d"),R=A.time.format("%b %-d %Hh"),S=A.time.format("%H:%M"),T=A.time.format(":%S"),U=/%(\d?)f/g;C.tickText=function(a,b,c){function d(d){var e;return void 0===d||(c?"none"===d:(e={first:a._tmin,last:a._tmax}[d],"all"!==d&&b!==e))}var e,f=m(a,b),g="array"===a.tickmode,h=c||g;if(g&&Array.isArray(a.ticktext)){for(var i=Math.abs(a.range[1]-a.range[0])/1e4,j=0;j<a.ticktext.length&&!(Math.abs(b-a.d2l(a.tickvals[j]))<i);j++);if(j<a.ticktext.length)return f.text=String(a.ticktext[j]),f}return e="none"!==a.exponentformat&&d(a.showexponent)?"hide":"","date"===a.type?n(a,f,c,h):"log"===a.type?o(a,f,c,h,e):"category"===a.type?p(a,f):q(a,f,c,h,e),a.tickprefix&&!d(a.showtickprefix)&&(f.text=a.tickprefix+f.text),a.ticksuffix&&!d(a.showticksuffix)&&(f.text+=a.ticksuffix),f};var V=["f","p","n","&mu;","m","","k","M","G","T"],W=/(\d+)(\d{3})/;C.list=function(a,b,c){return t(a,b,c).map(function(b){return z.Lib.nestedProperty(a._fullLayout,b).get()})},C.listIds=function(a,b){return t(a,b,!0).map(C.name2id)},C.getFromId=function(a,b,c){var d=a._fullLayout;return"x"===c?b=b.replace(/y[0-9]*/,""):"y"===c&&(b=b.replace(/x[0-9]*/,"")),d[C.id2name(b)]},C.getFromTrace=function(a,b,c){var d=a._fullLayout,e=null;if(z.Plots.traceIs(b,"gl3d")){var f=b.scene;"scene"===f.substr(0,5)&&(e=d[f][c+"axis"])}else e=C.getFromId(a,b[c+"axis"]||c);return e},C.subplotMatch=/^x([0-9]*)y([0-9]*)$/,C.getSubplots=function(a,b){function c(a,b){return a.indexOf(b._id)!==-1}var d,e,f,g=[],h=a.data||[];for(d=0;d<h.length;d++){var i=h[d];if(i.visible!==!1&&"legendonly"!==i.visible&&(z.Plots.traceIs(i,"cartesian")||z.Plots.traceIs(i,"gl2d"))){var j=i.xaxis||"x",k=i.yaxis||"y";f=j+k,g.indexOf(f)===-1&&g.push(f)}}var l=C.list(a,"",!0);for(d=0;d<l.length;d++){var m=l[d],n=m._id.charAt(0),o="free"===m.anchor?"x"===n?"y":"x":m.anchor,p=C.getFromId(a,o),q=!1;for(e=0;e<g.length;e++)if(c(g[e],m)){q=!0;break}if("free"!==m.anchor||!q){if(!p)return void console.log(["Warning: couldnt find anchor",o,"for axis",m._id].join(" "));f="x"===n?m._id+p._id:p._id+m._id,g.indexOf(f)===-1&&g.push(f)}}var r=C.subplotMatch,s=[];for(d=0;d<g.length;d++)f=g[d],r.test(f)&&s.push(f);return s.sort(function(a,b){var c=a.match(r),d=b.match(r);return c[1]===d[1]?+(c[2]||1)-(d[2]||1):+(c[1]||0)-(d[1]||0)}),b?C.findSubplotsWithAxis(s,b):s},C.findSubplotsWithAxis=function(a,b){for(var c=new RegExp("x"===b._id.charAt(0)?"^"+b._id+"y":b._id+"$"),d=[],e=0;e<a.length;e++){var f=a[e];c.test(f)&&d.push(f)}return d},C.makeClipPaths=function(a){var b,c,d=a._fullLayout,e=d._defs,f={
_offset:0,_length:d.width,_id:""},g={_offset:0,_length:d.height,_id:""},h=C.list(a,"x",!0),i=C.list(a,"y",!0),j=[];for(b=0;b<h.length;b++)for(j.push({x:h[b],y:g}),c=0;c<i.length;c++)0===b&&j.push({x:f,y:i[c]}),j.push({x:h[b],y:i[c]});var k=e.selectAll("g.clips").data([0]);k.enter().append("g").classed("clips",!0);var l=k.selectAll(".axesclip").data(j,function(a){return a.x._id+a.y._id});l.enter().append("clipPath").classed("axesclip",!0).attr("id",function(a){return"clip"+d._uid+a.x._id+a.y._id}).append("rect"),l.exit().remove(),l.each(function(a){A.select(this).select("rect").attr({x:a.x._offset||0,y:a.y._offset||0,width:a.x._length||1,height:a.y._length||1})})},C.doTicks=function(a,b,c){function d(a){var b=i.l2p(a.x);return b>1&&b<i._length-1}function e(a,b){var c=a.selectAll("path."+u).data("inside"===i.ticks?I:s,t);b&&i.ticks?(c.enter().append("path").classed(u,1).classed("ticks",1).classed("crisp",1).call(z.Color.stroke,i.tickcolor).style("stroke-width",F+"px").attr("d",b),c.attr("transform",m),c.exit().remove()):c.remove()}function f(d,e){function f(a,b){a.each(function(a){var c=n(b),d=A.select(this),e=d.select(".text-math-group"),f=m(a)+(B(b)&&0!==+b?" rotate("+b+","+k(a)+","+(l(a)-a.fontSize/2)+")":"");if(e.empty()){var g=d.select("text").attr({transform:f,"text-anchor":c});g.empty()||g.selectAll("tspan.line").attr({x:g.attr("x"),y:g.attr("y")})}else{var h=z.Drawing.bBox(e.node()).width*{end:-.5,start:.5}[c];e.attr("transform",f+(h?"translate("+h+",0)":""))}})}function g(){return C.length&&Promise.all(C)}function h(){if(f(j,i.tickangle),"x"===q&&!B(i.tickangle)&&("log"!==i.type||"D"!==String(i.dtick).charAt(0))){var d=[];for(j.each(function(a){var b=A.select(this),c=b.select(".text-math-group"),e=i.l2p(a.x);c.empty()&&(c=b.select("text"));var f=z.Drawing.bBox(c.node());d.push({top:0,bottom:10,height:10,left:e-f.width/2,right:e+f.width/2+2,width:f.width+2})}),p=0;p<d.length-1;p++)if(z.Lib.bBoxIntersect(d[p],d[p+1])){w=30;break}if(w){var e=Math.abs((s[s.length-1].x-s[0].x)*i._m)/(s.length-1);e<2.5*v&&(w=90),f(j,w)}i._lastangle=w}return c||z.Titles.draw(a,b+"title"),b+" done"}var j=d.selectAll("g."+u).data(s,t);if(!i.showticklabels||!B(e))return j.remove(),void z.Titles.draw(a,b+"title");var k,l,n,o;if("x"===q){var r="bottom"===G?1:-1;k=function(a){return a.dx},o=e+(y+x)*r,l=function(a){return a.dy+o+a.fontSize*("bottom"===G?1:-.5)},n=function(a){return B(a)&&0!==a&&180!==a?a*r<0?"end":"start":"middle"}}else l=function(a){return a.dy+a.fontSize/2},k=function(a){return a.dx+e+(y+x+(90===Math.abs(i.tickangle)?a.fontSize/2:0))*("right"===G?1:-1)},n=function(a){return B(a)&&90===Math.abs(a)?"middle":"right"===G?"start":"end"};var v=0,w=0,C=[];j.enter().append("g").classed(u,1).append("text").attr("text-anchor","middle").each(function(b){var c=A.select(this),d=a._promises.length;c.call(z.Drawing.setPosition,k(b),l(b)).call(z.Drawing.font,b.font,b.fontSize,b.fontColor).text(b.text).call(z.util.convertToTspans),d=a._promises[d],d?C.push(a._promises.pop().then(function(){f(c,i.tickangle)})):f(c,i.tickangle)}),j.exit().remove(),j.each(function(a){v=Math.max(v,a.fontSize)}),f(j,i._lastangle||i.tickangle);var D=z.Lib.syncOrAsync([g,h]);return D&&D.then&&a._promises.push(D),D}function g(a,b){return a.visible===!0&&a.xaxis+a.yaxis===b&&(!(!z.Plots.traceIs(a,"bar")||a.orientation!=={x:"h",y:"v"}[q])||a.fill&&a.fill.charAt(a.fill.length-1)===q)}function h(b,c,e){var f=b.gridlayer,h=b.zerolinelayer,j=b["hidegrid"+q]?[]:I,k="M0,0"+("x"===q?"v":"h")+c._length,l=f.selectAll("path."+v).data(i.showgrid===!1?[]:j,t);l.enter().append("path").classed(v,1).classed("crisp",1).attr("d",k).each(function(a){i.zeroline&&("linear"===i.type||"-"===i.type)&&Math.abs(a.x)<i.dtick/100&&A.select(this).remove()}),l.attr("transform",m).call(z.Color.stroke,i.gridcolor||"#ddd").style("stroke-width",D+"px"),l.exit().remove();for(var n=!1,o=0;o<a._fullData.length;o++)if(g(a._fullData[o],e)){n=!0;break}var p=i.range[0]*i.range[1]<=0&&i.zeroline&&("linear"===i.type||"-"===i.type)&&j.length&&(n||d({x:0})||!i.showline),r=h.selectAll("path."+w).data(p?[{x:0}]:[]);r.enter().append("path").classed(w,1).classed("zl",1).classed("crisp",1).attr("d",k),r.attr("transform",m).call(z.Color.stroke,i.zerolinecolor||z.Color.defaultLine).style("stroke-width",E+"px"),r.exit().remove()}var i,j=a._fullLayout,k=!1;if("object"==typeof b)i=b,b=i._id,k=!0;else if(i=C.getFromId(a,b),"redraw"===b&&j._paper.selectAll("g.subplot").each(function(a){var b=j._plots[a],c=b.x(),d=b.y();b.plot.attr("viewBox","0 0 "+c._length+" "+d._length),b.xaxislayer.selectAll("."+c._id+"tick").remove(),b.yaxislayer.selectAll("."+d._id+"tick").remove(),b.gridlayer.selectAll("path").remove(),b.zerolinelayer.selectAll("path").remove()}),!b||"redraw"===b)return z.Lib.syncOrAsync(C.list(a,"",!0).map(function(c){return function(){if(c._id){var d=C.doTicks(a,c._id);return"redraw"===b&&(c._r=c.range.slice()),d}}}));i.tickformat||(["none","e","E","power","SI","B"].indexOf(i.exponentformat)===-1&&(i.exponentformat="e"),["all","first","last","none"].indexOf(i.showexponent)===-1&&(i.showexponent="all")),i.range=[+i.range[0],+i.range[1]],i.setScale();var l,m,n,o,p,q=b.charAt(0),r=C.counterLetter(b),s=C.calcTicks(i),t=function(a){return a.text+a.x+i.mirror},u=b+"tick",v=b+"grid",w=b+"zl",x=(i.linewidth||1)/2,y=("outside"===i.ticks?i.ticklen:1)+(i.linewidth||0),D=z.Drawing.crispRound(a,i.gridwidth,1),E=z.Drawing.crispRound(a,i.zerolinewidth,D),F=z.Drawing.crispRound(a,i.tickwidth,1);if("x"===q)l=["bottom","top"],m=function(a){return"translate("+i.l2p(a.x)+",0)"},n="M0,",o="v";else{if("y"!==q)return void console.log("unrecognized doTicks axis",b);l=["left","right"],m=function(a){return"translate(0,"+i.l2p(a.x)+")"},n="M",o=",0h"}var G=i.side||l[0],H=[-1,1,G===l[1]?1:-1];"inside"!==i.ticks==("x"===q)&&(H=H.map(function(a){return-a}));var I=s.filter(d);if(k)return e(i._axislayer,n+(i._pos+x*H[2])+o+H[2]*i.ticklen),f(i._axislayer,i._pos);var J=C.getSubplots(a,i).map(function(a){var b=j._plots[a];if(j._hasCartesian){var c=b[q+"axislayer"],d=i._linepositions[a]||[],g=b[r](),k=g._id===i.anchor,m=[!1,!1,!1],s="";if("allticks"===i.mirror?m=[!0,!0,!1]:k&&("ticks"===i.mirror?m=[!0,!0,!1]:m[l.indexOf(G)]=!0),i.mirrors)for(p=0;p<2;p++){var t=i.mirrors[g._id+l[p]];"ticks"!==t&&"labels"!==t||(m[p]=!0)}return void 0!==d[2]&&(m[2]=!0),m.forEach(function(a,b){var c=d[b],e=H[b];a&&B(c)&&(s+=n+(c+x*e)+o+e*i.ticklen)}),e(c,s),h(b,g,a),f(c,d[3])}}).filter(function(a){return a&&a.then});return J.length?Promise.all(J):0},C.swap=function(a,b){for(var c=u(a,b),d=0;d<c.length;d++)w(a,c[d].x,c[d].y)}},{"../../plotly":1070,"./layout_attributes":1077,d3:64,"fast-isnumeric":72}],1074:[function(a,b,c){b.exports={DBLCLICKDELAY:600,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,MAXDIST:20,YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:100,BENDPX:1.5}},{}],1075:[function(a,b,c){"use strict";function d(a,b){for(var c=[],d=a.length;d>0;d--)c.push(b);return c}function e(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d].p2c(b));return c}function f(a,b){return function(c){var d=a(c),e=b(c);return Math.sqrt(d*d+e*e)}}function g(a,b,c){if("pie"===c)return void a.emit("plotly_hover",{points:[b]});c||(c="xy");var f=a._fullLayout,g=f._plots[c],n=[c].concat(g.overlays.map(function(a){return a.id})),o=n.map(function(b){return x.Axes.getFromId(a,b,"x")}),p=n.map(function(b){return x.Axes.getFromId(a,b,"y")}),q=b.hovermode||f.hovermode;if(["x","y","closest"].indexOf(q)===-1||!a.calcdata||a.querySelector(".zoombox")||a._dragging)return m(a,b);var r,s,t,u,v,z,B,C,D,E,F,G,H=[],I=[];if(Array.isArray(b))for(q="array",t=0;t<b.length;t++)v=a.calcdata[b[t].curveNumber||0],"none"!==v[0].trace.hoverinfo&&I.push(v);else{for(u=0;u<a.calcdata.length;u++)v=a.calcdata[u],z=v[0].trace,"none"!==z.hoverinfo&&n.indexOf(z.xaxis+z.yaxis)!==-1&&I.push(v);var J,K;if(b.target&&"clientX"in b&&"clientY"in b){if(y.triggerHandler(a,"plotly_beforehover",b)===!1)return;var L=b.target.getBoundingClientRect();if(J=b.clientX-L.left,K=b.clientY-L.top,J<0||J>L.width||K<0||K>L.height)return m(a,b)}else J="xpx"in b?b.xpx:o[0]._length/2,K="ypx"in b?b.ypx:p[0]._length/2;if(r="xval"in b?d(n,b.xval):e(o,J),s="yval"in b?d(n,b.yval):e(p,K),!w(r[0])||!w(s[0]))return console.log("Plotly.Fx.hover failed",b,a),m(a,b)}var M=1/0;for(u=0;u<I.length;u++)if(v=I[u],v&&v[0]&&v[0].trace&&v[0].trace.visible===!0){if(z=v[0].trace,B=n.indexOf(z.xaxis+z.yaxis),C=q,F={cd:v,trace:z,xa:o[B],ya:p[B],name:a.data.length>1||z.hoverinfo.indexOf("name")!==-1?z.name:void 0,index:!1,distance:Math.min(M,A.MAXDIST),color:x.Color.defaultLine,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},G=H.length,"array"===C){var N=b[u];"pointNumber"in N?(F.index=N.pointNumber,C="closest"):(C="","xval"in N&&(D=N.xval,C="x"),"yval"in N&&(E=N.yval,C=C?"closest":"y"))}else D=r[B],E=s[B];if(z._module&&z._module.hoverPoints){var O=z._module.hoverPoints(F,D,E,C);if(O)for(var P,Q=0;Q<O.length;Q++)P=O[Q],w(P.x0)&&w(P.y0)&&H.push(h(P,q))}else console.log("unrecognized trace type in hover",z);"closest"===q&&H.length>G&&(H.splice(0,G),M=H[0].distance)}if(0===H.length)return m(a,b);var R="y"===q&&I.length>1;H.sort(function(a,b){return a.distance-b.distance});var S={hovermode:q,rotateLabels:R,bgColor:x.Color.combine(f.plot_bgcolor,f.paper_bgcolor),container:f._hoverlayer,outerContainer:f._paperdiv},T=i(H,S);j(H,R?o[0]:p[0]),k(T,R);var U=a._hoverdata,V=[];for(t=0;t<H.length;t++){var W=H[t],X={data:W.trace._input,fullData:W.trace,curveNumber:W.trace.index,pointNumber:W.index,x:W.xVal,y:W.yVal,xaxis:W.xa,yaxis:W.ya};void 0!==W.zLabelVal&&(X.z=W.zLabelVal),V.push(X)}a._hoverdata=V,l(a,b,U)&&(U&&a.emit("plotly_unhover",{points:U}),a.emit("plotly_hover",{points:a._hoverdata,xaxes:o,yaxes:p,xvals:r,yvals:s}))}function h(a,b){a.posref="y"===b?(a.x0+a.x1)/2:(a.y0+a.y1)/2,a.x0=x.Lib.constrain(a.x0,0,a.xa._length),a.x1=x.Lib.constrain(a.x1,0,a.xa._length),a.y0=x.Lib.constrain(a.y0,0,a.ya._length),a.y1=x.Lib.constrain(a.y1,0,a.ya._length);var c;if(void 0!==a.xLabelVal){c="log"===a.xa.type&&a.xLabelVal<=0;var d=x.Axes.tickText(a.xa,a.xa.c2l(c?-a.xLabelVal:a.xLabelVal),"hover");c?0===a.xLabelVal?a.xLabel="0":a.xLabel="-"+d.text:a.xLabel=d.text,a.xVal=a.xa.c2d(a.xLabelVal)}if(void 0!==a.yLabelVal){c="log"===a.ya.type&&a.yLabelVal<=0;var e=x.Axes.tickText(a.ya,a.ya.c2l(c?-a.yLabelVal:a.yLabelVal),"hover");c?0===a.yLabelVal?a.yLabel="0":a.yLabel="-"+e.text:a.yLabel=e.text,a.yVal=a.ya.c2d(a.yLabelVal)}if(void 0!==a.zLabelVal&&(a.zLabel=String(a.zLabelVal)),void 0!==a.xerr){var f=x.Axes.tickText(a.xa,a.xa.c2l(a.xerr),"hover").text;void 0!==a.xerrneg?a.xLabel+=" +"+f+" / -"+x.Axes.tickText(a.xa,a.xa.c2l(a.xerrneg),"hover").text:a.xLabel+=" &plusmn; "+f,"x"===b&&(a.distance+=1)}if(void 0!==a.yerr){var g=x.Axes.tickText(a.ya,a.ya.c2l(a.yerr),"hover").text;void 0!==a.yerrneg?a.yLabel+=" +"+g+" / -"+x.Axes.tickText(a.ya,a.ya.c2l(a.yerrneg),"hover").text:a.yLabel+=" &plusmn; "+g,"y"===b&&(a.distance+=1)}var h=a.trace.hoverinfo;return"all"!==h&&(h=h.split("+"),h.indexOf("x")===-1&&(a.xLabel=void 0),h.indexOf("y")===-1&&(a.yLabel=void 0),h.indexOf("z")===-1&&(a.zLabel=void 0),h.indexOf("text")===-1&&(a.text=void 0),h.indexOf("name")===-1&&(a.name=void 0)),a}function i(a,b){var c,d,e=b.hovermode,f=b.rotateLabels,g=b.bgColor,h=b.container,i=b.outerContainer,j=a[0],k=j.xa,l=j.ya,m="y"===e?"yLabel":"xLabel",n=j[m],o=(String(n)||"").split(" ")[0],p=i.node().getBoundingClientRect(),q=p.top,r=p.width,s=p.height,t=j.distance<=A.MAXDIST&&("x"===e||"y"===e);for(c=0;c<a.length;c++){d=a[c].trace.hoverinfo;var w=d.split("+");if(w.indexOf("all")===-1&&w.indexOf(e)===-1){t=!1;break}}var y=h.selectAll("g.axistext").data(t?[0]:[]);y.enter().append("g").classed("axistext",!0),y.exit().remove(),y.each(function(){var b=u.select(this),c=b.selectAll("path").data([0]),d=b.selectAll("text").data([0]);c.enter().append("path").style({fill:x.Color.defaultLine,"stroke-width":"1px",stroke:x.Color.background}),d.enter().append("text").call(x.Drawing.font,K,J,x.Color.background).attr("data-notex",1),d.text(n).call(x.util.convertToTspans).call(x.Drawing.setPosition,0,0).selectAll("tspan.line").call(x.Drawing.setPosition,0,0),b.attr("transform","");var f=d.node().getBoundingClientRect();if("x"===e){d.attr("text-anchor","middle").call(x.Drawing.setPosition,0,"top"===k.side?q-f.bottom-H-I:q-f.top+H+I).selectAll("tspan.line").attr({x:d.attr("x"),y:d.attr("y")});var g="top"===k.side?"-":"";c.attr("d","M0,0L"+H+","+g+H+"H"+(I+f.width/2)+"v"+g+(2*I+f.height)+"H-"+(I+f.width/2)+"V"+g+H+"H-"+H+"Z"),b.attr("transform","translate("+(k._offset+(j.x0+j.x1)/2)+","+(l._offset+("top"===k.side?0:l._length))+")")}else{d.attr("text-anchor","right"===l.side?"start":"end").call(x.Drawing.setPosition,("right"===l.side?1:-1)*(I+H),q-f.top-f.height/2).selectAll("tspan.line").attr({x:d.attr("x"),y:d.attr("y")});var h="right"===l.side?"":"-";c.attr("d","M0,0L"+h+H+","+H+"V"+(I+f.height/2)+"h"+h+(2*I+f.width)+"V-"+(I+f.height/2)+"H"+h+H+"V-"+H+"Z"),b.attr("transform","translate("+(k._offset+("right"===l.side?k._length:0))+","+(l._offset+(j.y0+j.y1)/2)+")")}a=a.filter(function(a){return void 0!==a.zLabelVal||(a[m]||"").split(" ")[0]===o})});var z=h.selectAll("g.hovertext").data(a,function(a){return[a.trace.index,a.index,a.x0,a.y0,a.name,a.attr||""].join(",")});return z.enter().append("g").classed("hovertext",!0).each(function(){var a=u.select(this);a.append("rect").call(x.Color.fill,x.Color.addOpacity(g,.8)),a.append("text").classed("name",!0).call(x.Drawing.font,K,J),a.append("path").style("stroke-width","1px"),a.append("text").classed("nums",!0).call(x.Drawing.font,K,J)}),z.exit().remove(),z.each(function(a){var b=u.select(this).attr("transform",""),c="",d="",h=x.Color.opacity(a.color)?a.color:x.Color.defaultLine,i=x.Color.combine(h,g),j=v(i).getBrightness()>128?"#000":x.Color.background;if(a.name&&void 0===a.zLabelVal){var m=document.createElement("p");m.innerHTML=a.name,c=m.textContent||"",c.length>15&&(c=c.substr(0,12)+"...")}void 0!==a.zLabel?(void 0!==a.xLabel&&(d+="x: "+a.xLabel+"<br>"),void 0!==a.yLabel&&(d+="y: "+a.yLabel+"<br>"),d+=(d?"z: ":"")+a.zLabel):t&&a[e+"Label"]===n?d=a[("x"===e?"y":"x")+"Label"]||"":void 0===a.xLabel?void 0!==a.yLabel&&(d=a.yLabel):d=void 0===a.yLabel?a.xLabel:"("+a.xLabel+", "+a.yLabel+")",a.text&&(d+=(d?"<br>":"")+a.text),""===d&&(""===c&&b.remove(),d=c);var o=b.select("text.nums").style("fill",j).call(x.Drawing.setPosition,0,0).text(d).attr("data-notex",1).call(x.util.convertToTspans);o.selectAll("tspan.line").call(x.Drawing.setPosition,0,0);var p=b.select("text.name"),w=0;c&&c!==d?(p.style("fill",i).text(c).call(x.Drawing.setPosition,0,0).attr("data-notex",1).call(x.util.convertToTspans),p.selectAll("tspan.line").call(x.Drawing.setPosition,0,0),w=p.node().getBoundingClientRect().width+2*I):(p.remove(),b.select("rect").remove()),b.select("path").style({fill:i,stroke:j});var y,z,A=o.node().getBoundingClientRect(),B=k._offset+(a.x0+a.x1)/2,D=l._offset+(a.y0+a.y1)/2,E=Math.abs(a.x1-a.x0),F=Math.abs(a.y1-a.y0),G=A.width+H+I+w;a.ty0=q-A.top,a.bx=A.width+2*I,a.by=A.height+2*I,a.anchor="start",a.txwidth=A.width,a.tx2width=w,a.offset=0,f?(a.pos=B,y=D+F/2+G<=s,z=D-F/2-G>=0,"top"!==a.idealAlign&&y||!z?y?(D+=F/2,a.anchor="start"):a.anchor="middle":(D-=F/2,a.anchor="end")):(a.pos=D,y=B+E/2+G<=r,z=B-E/2-G>=0,"left"!==a.idealAlign&&y||!z?y?(B+=E/2,a.anchor="start"):a.anchor="middle":(B-=E/2,a.anchor="end")),o.attr("text-anchor",a.anchor),w&&p.attr("text-anchor",a.anchor),b.attr("transform","translate("+B+","+D+")"+(f?"rotate("+C+")":""))}),z}function j(a,b){function c(a){var b=a[0],c=a[a.length-1];if(e=l-b.pos-b.dp+b.size,f=c.pos+c.dp+c.size-m,e>.01){for(h=a.length-1;h>=0;h--)a[h].dp+=e;d=!1}if(!(f<.01)){if(e<-.01){for(h=a.length-1;h>=0;h--)a[h].dp-=f;d=!1}if(d){var j=0;for(g=0;g<a.length;g++)i=a[g],i.pos+i.dp+i.size>m&&j++;for(g=a.length-1;g>=0&&!(j<=0);g--)i=a[g],i.pos>m-1&&(i.del=!0,j--);for(g=0;g<a.length&&!(j<=0);g++)if(i=a[g],i.pos<l+1)for(i.del=!0,j--,f=2*i.size,h=a.length-1;h>=0;h--)a[h].dp-=f;for(g=a.length-1;g>=0&&!(j<=0);g--)i=a[g],i.pos+i.dp+i.size>m&&(i.del=!0,j--)}}}for(var d,e,f,g,h,i,j,k=0,l=b._offset,m=b._offset+b._length,n=a.map(function(a,c){return[{i:c,dp:0,pos:a.pos,posref:a.posref,size:a.by*("x"===b._id.charAt(0)?E:1)/2}]}).sort(function(a,b){return a[0].posref-b[0].posref});!d&&k<=a.length;){for(k++,d=!0,g=0;g<n.length-1;){var o=n[g],p=n[g+1],q=o[o.length-1],r=p[0];if(e=q.pos+q.dp+q.size-r.pos-r.dp+r.size,e>.01){for(h=p.length-1;h>=0;h--)p[h].dp+=e;for(o.push.apply(o,p),n.splice(g+1,1),j=0,h=o.length-1;h>=0;h--)j+=o[h].dp;for(f=j/o.length,h=o.length-1;h>=0;h--)o[h].dp-=f;d=!1}else g++}n.forEach(c)}for(g=n.length-1;g>=0;g--){var s=n[g];for(h=s.length-1;h>=0;h--){var t=s[h],u=a[t.i];u.offset=t.dp,u.del=t.del}}}function k(a,b){a.each(function(a){var c=u.select(this);if(a.del)return void c.remove();var d="end"===a.anchor?-1:1,e=c.select("text.nums"),f={start:1,end:-1,middle:0}[a.anchor],g=f*(H+I),h=g+f*(a.txwidth+I),i=0,j=a.offset;"middle"===a.anchor&&(g-=a.tx2width/2,h-=a.tx2width/2),b&&(j*=-G,i=a.offset*F),c.select("path").attr("d","middle"===a.anchor?"M-"+a.bx/2+",-"+a.by/2+"h"+a.bx+"v"+a.by+"h-"+a.bx+"Z":"M0,0L"+(d*H+i)+","+(H+j)+"v"+(a.by/2-H)+"h"+d*a.bx+"v-"+a.by+"H"+(d*H+i)+"V"+(j-H)+"Z"),e.call(x.Drawing.setPosition,g+i,j+a.ty0-a.by/2+I).selectAll("tspan.line").attr({x:e.attr("x"),y:e.attr("y")}),a.tx2width&&(c.select("text.name, text.name tspan.line").call(x.Drawing.setPosition,h+f*I+i,j+a.ty0-a.by/2+I),c.select("rect").call(x.Drawing.setRect,h+(f-1)*a.tx2width/2+i,j-a.by/2-1,a.tx2width,a.by+2))})}function l(a,b,c){if(!b.target)return!1;if(!c||c.length!==a._hoverdata.length)return!0;for(var d=c.length-1;d>=0;d--){var e=c[d],f=a._hoverdata[d];if(e.curveNumber!==f.curveNumber||String(e.pointNumber)!==String(f.pointNumber))return!0}return!1}function m(a,b){var c=a._fullLayout;b||(b={}),b.target&&y.triggerHandler(a,"plotly_beforehover",b)===!1||(c._hoverlayer.selectAll("g").remove(),b.target&&a._hoverdata&&a.emit("plotly_unhover",{points:a._hoverdata}),a._hoverdata=void 0)}function n(a,b){return a?"nsew"===a?"pan"===b?"move":"crosshair":a.toLowerCase()+"-resize":"pointer"}function o(a,b,c,d,e,f,g,h){function i(a,b){for(F=0;F<a.length;F++)if(!a[F].fixedrange)return b;return""}function j(a){a[0]=Number(a[0]),a[1]=Number(a[1])}function k(c,d,e){var f=X.getBoundingClientRect();for(Z=d-f.left,$=e-f.top,_={l:Z,r:Z,w:0,t:$,b:$,h:0},aa=a._hmpixcount?a._hmlumcount/a._hmpixcount:v(a._fullLayout.plot_bgcolor).getLuminance(),ba=ba="M0,0H"+N+"V"+O+"H0V0",ca=!1,da="xy",ea=b.plot.append("path").attr("class","zoombox").style({fill:aa>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ba+"Z"),fa=b.plot.append("path").attr("class","zoombox-corners").style({fill:x.Color.background,stroke:x.Color.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),l(),F=0;F<R.length;F++)j(R[F].range)}function l(){b.plot.selectAll(".select-outline").remove()}function m(a,b){var c=Math.max(0,Math.min(N,a+Z)),d=Math.max(0,Math.min(O,b+$)),e=Math.abs(c-Z),f=Math.abs(d-$),g=Math.floor(Math.min(f,e,Q)/2);_.l=Math.min(Z,c),_.r=Math.max(Z,c),_.t=Math.min($,d),_.b=Math.max($,d),!T||f<Math.min(Math.max(.6*e,P),Q)?e<P?(da="",_.r=_.l,_.t=_.b,fa.attr("d","M0,0Z")):(_.t=0,_.b=O,da="x",fa.attr("d","M"+(_.l-.5)+","+($-Q-.5)+"h-3v"+(2*Q+1)+"h3ZM"+(_.r+.5)+","+($-Q-.5)+"h3v"+(2*Q+1)+"h-3Z")):!S||e<Math.min(.6*f,Q)?(_.l=0,_.r=N,da="y",fa.attr("d","M"+(Z-Q-.5)+","+(_.t-.5)+"v-3h"+(2*Q+1)+"v3ZM"+(Z-Q-.5)+","+(_.b+.5)+"v3h"+(2*Q+1)+"v-3Z")):(da="xy",fa.attr("d","M"+(_.l-3.5)+","+(_.t-.5+g)+"h3v"+-g+"h"+g+"v-3h-"+(g+3)+"ZM"+(_.r+3.5)+","+(_.t-.5+g)+"h-3v"+-g+"h"+-g+"v-3h"+(g+3)+"ZM"+(_.r+3.5)+","+(_.b+.5-g)+"h-3v"+g+"h"+-g+"v3h"+(g+3)+"ZM"+(_.l-3.5)+","+(_.b+.5-g)+"h3v"+g+"h"+g+"v3h-"+(g+3)+"Z")),_.w=_.r-_.l,_.h=_.b-_.t,ea.attr("d",ba+"M"+_.l+","+_.t+"v"+_.h+"h"+_.w+"v-"+_.h+"h-"+_.w+"Z"),ca||(ea.transition().style("fill",aa>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),fa.transition().style("opacity",1).duration(200),ca=!0)}function o(a,b,c){var d,e,f;for(d=0;d<a.length;d++)e=a[d],e.fixedrange||(f=e.range,e.range=[f[0]+(f[1]-f[0])*b,f[0]+(f[1]-f[0])*c])}function r(b,c){return Math.min(_.h,_.w)<2*P?(2===c?C():q(a),s(a)):("xy"!==da&&"x"!==da||o(K,_.l/N,_.r/N),"xy"!==da&&"y"!==da||o(M,(O-_.b)/O,(O-_.t)/O),s(a),D(da),void(L&&a.data&&a._context.showTips&&(x.Lib.notifier("Double-click to<br>zoom back out","long"),L=!1)))}function t(b,c){var d=1===(g+h).length;if(b)D();else if(2!==c||d)if(1===c&&d){var e=g?M[0]:K[0],f="s"===g||"w"===h?0:1,i=e._name+".range["+f+"]",j=p(e,f),k="left",l="middle";if(e.fixedrange)return;g?(l="n"===g?"top":"bottom","right"===e.side&&(k="right")):"e"===h&&(k="right"),W.call(x.util.makeEditable,null,{immediate:!0,background:I.paper_bgcolor,text:String(j),fill:e.tickfont?e.tickfont.color:"#444",horizontalAlign:k,verticalAlign:l}).on("edit",function(b){var c="category"===e.type?e.c2l(b):e.d2l(b);void 0!==c&&x.relayout(a,i,c)})}else q(a);else C()}function u(b){function c(a,b,c){if(!a.fixedrange){j(a.range);var d=a.range,e=d[0]+(d[1]-d[0])*b;a.range=[e+(d[0]-e)*c,e+(d[1]-e)*c]}}if(a._context.scrollZoom||I._enablescrollzoom){var d=a.querySelector(".plotly");if(!(d.scrollHeight-d.clientHeight>10||d.scrollWidth-d.clientWidth>10)){clearTimeout(ha);var e=-b.deltaY;if(isFinite(e)||(e=b.wheelDelta/10),!isFinite(e))return void console.log("did not find wheel motion attributes",b);var f,i=Math.exp(-Math.min(Math.max(e,-20),20)/100),k=ja.draglayer.select(".nsewdrag").node().getBoundingClientRect(),l=(b.clientX-k.left)/k.width,m=ga[0]+ga[2]*l,n=(k.bottom-b.clientY)/k.height,o=ga[1]+ga[3]*(1-n);if(h){for(f=0;f<K.length;f++)c(K[f],l,i);ga[2]*=i,ga[0]=m-ga[2]*l}if(g){for(f=0;f<M.length;f++)c(M[f],n,i);ga[3]*=i,ga[1]=o-ga[3]*(1-n)}return E(ga),y(g,h),ha=setTimeout(function(){ga=[0,0,N,O],D()},ia),x.Lib.pauseEvent(b)}}}function w(a,b){function c(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.fixedrange||(d.range=[d._r[0]-b/d._m,d._r[1]-b/d._m])}}function d(a){return 1-(a>=0?Math.min(a,.9):1/(1/Math.max(a,-.3)+3.222))}function e(a,b,c){for(var e=1-b,f=0,g=0;g<a.length;g++){var h=a[g];h.fixedrange||(f=g,h.range[b]=h._r[e]+(h._r[b]-h._r[e])/d(c/h._length))}return a[f]._length*(a[f]._r[b]-a[f].range[b])/(a[f]._r[b]-a[f]._r[e])}return"ew"===S||"ns"===T?(S&&c(K,a),T&&c(M,b),E([S?-a:0,T?-b:0,N,O]),void y(T,S)):("w"===S?a=e(K,0,a):"e"===S?a=e(K,1,-a):S||(a=0),"n"===T?b=e(M,1,b):"s"===T?b=e(M,0,-b):T||(b=0),E(["w"===S?a:0,"n"===T?b:0,N-a,O-b]),void y(T,S))}function y(b,c){function d(a){for(f=0;f<a.length;f++)a[f].fixedrange||g.push(a[f]._id)}function e(d,e){var h;for(f=0;f<d.length;f++)h=d[f],(c&&g.indexOf(h.xref)!==-1||b&&g.indexOf(h.yref)!==-1)&&e.draw(a,f)}var f,g=[];for(c&&d(K),b&&d(M),f=0;f<g.length;f++)x.Axes.doTicks(a,g[f],!0);e(I.annotations||[],x.Annotations),e(I.shapes||[],x.Shapes)}function C(){var b,c,d=a._context.doubleClick,e=(S?K:[]).concat(T?M:[]),f={};if("autosize"===d)for(c=0;c<e.length;c++)b=e[c],b.fixedrange||(f[b._name+".autorange"]=!0);else if("reset"===d)for(c=0;c<e.length;c++)b=e[c],f[b._name+".range"]=b._rangeInitial.slice();else if("reset+autosize"===d)for(c=0;c<e.length;c++)b=e[c],b.fixedrange||(void 0===b._rangeInitial||b.range[0]===b._rangeInitial[0]&&b.range[1]===b._rangeInitial[1]?f[b._name+".autorange"]=!0:f[b._name+".range"]=b._rangeInitial.slice());x.relayout(a,f)}function D(b){for(var c={},d=0;d<R.length;d++){var e=R[d];b&&b.indexOf(e._id.charAt(0))===-1||(e._r[0]!==e.range[0]&&(c[e._name+".range[0]"]=e.range[0]),e._r[1]!==e.range[1]&&(c[e._name+".range[1]"]=e.range[1]),e.range=e._r.slice())}E([0,0,N,O]),x.relayout(a,c)}function E(a){var b,c,d,e,f,i,j=I._plots,k=Object.keys(j);for(b=0;b<k.length;b++)if(c=j[k[b]],d=c.x(),e=c.y(),f=h&&K.indexOf(d)!==-1&&!d.fixedrange,i=g&&M.indexOf(e)!==-1&&!e.fixedrange,f||i){var l=[0,0,d._length,e._length];f&&(l[0]=a[0],l[2]=a[2]),i&&(l[1]=a[1],l[3]=a[3]),c.plot.attr("viewBox",l.join(" "))}}var F,G,H,I=a._fullLayout,J=[b].concat(g&&h?b.overlays:[]),K=[b.x()],M=[b.y()],N=K[0]._length,O=M[0]._length,P=A.MINDRAG,Q=A.MINZOOM;for(F=1;F<J.length;F++)G=J[F].x(),H=J[F].y(),K.indexOf(G)===-1&&K.push(G),M.indexOf(H)===-1&&M.push(H);var R=K.concat(M),S=i(K,h),T=i(M,g),U=n(T+S,I.dragmode),V=g+h+"drag",W=b.draglayer.selectAll("."+V).data([0]);W.enter().append("rect").classed("drag",!0).classed(V,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",b.id),W.call(x.Drawing.setRect,c,d,e,f).call(B.setCursor,U);var X=W.node();if(!T&&!S)return X.onmousedown=null,X.style.pointerEvents=g+h==="nsew"?"all":"none",X;var Y={element:X,gd:a,plotinfo:b,xaxes:K,yaxes:M,doubleclick:C,prepFn:function(b,c,d){var e=a._fullLayout.dragmode;g+h==="nsew"?b.shiftKey&&(e="pan"===e?"zoom":"pan"):e="pan","lasso"===e?Y.minDrag=1:Y.minDrag=void 0,"zoom"===e?(Y.moveFn=m,Y.doneFn=r,k(b,c,d)):"pan"===e?(Y.moveFn=w,Y.doneFn=t,l()):"select"!==e&&"lasso"!==e||z(b,c,d,Y,e)}};B.dragElement(Y);var Z,$,_,aa,ba,ca,da,ea,fa,ga=[0,0,N,O],ha=null,ia=300,ja=b.mainplot?I._plots[b.mainplot]:b;return g.length*h.length!==1&&(void 0!==X.onwheel?X.onwheel=u:void 0!==X.onmousewheel&&(X.onmousewheel=u)),X}function p(a,b){var c,d=a.range[b],e=Math.abs(d-a.range[1-b]);return"date"===a.type?x.Lib.ms2DateTime(d,e):"log"===a.type?(c=Math.ceil(Math.max(0,-Math.log(e)/Math.LN10))+3,u.format("."+c+"g")(Math.pow(10,d))):(c=Math.floor(Math.log(Math.abs(d))/Math.LN10)-Math.floor(Math.log(e)/Math.LN10)+4,u.format("."+String(c)+"g")(d))}function q(a){a._dragging=!0;var b=a._replotPending;a._replotPending=!1,setTimeout(function(){a._replotPending=b,r(a)},A.DBLCLICKDELAY)}function r(a){a._dragging=!1,a._replotPending&&x.plot(a)}function s(a){u.select(a).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function t(){var a=document.createElement("div");a.className="dragcover";var b=a.style;return b.position="fixed",b.left=0,b.right=0,b.top=0,b.bottom=0,b.zIndex=999999999,b.background="none",document.body.appendChild(a),a}var u=a("d3"),v=a("tinycolor2"),w=a("fast-isnumeric"),x=a("../../plotly"),y=a("../../lib/events"),z=a("./select"),A=a("./constants"),B=b.exports={};B.layoutAttributes={dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"]},hovermode:{valType:"enumerated",values:["x","y","closest",!1]}},B.supplyLayoutDefaults=function(a,b,c){function d(c,d){return x.Lib.coerce(a,b,B.layoutAttributes,c,d)}var e,f;d("dragmode",b._hasGL3D?"turntable":"zoom"),b._hasCartesian?(e=b._isHoriz=B.isHoriz(c),f=e?"y":"x"):f="closest",d("hovermode",f)},B.isHoriz=function(a){var b,c,d=!0;for(b=0;b<a.length;b++)if(c=a[b],"h"!==c.orientation){d=!1;break}return d},B.init=function(a){var b=a._fullLayout;if(!(b._hasGL3D||b._hasGeo||a._context.staticPlot)){var c=Object.keys(b._plots||{}).sort(function(a,c){if((b._plots[a].mainplot&&!0)===(b._plots[c].mainplot&&!0)){var d=a.split("y"),e=c.split("y");return d[0]===e[0]?Number(d[1]||1)-Number(e[1]||1):Number(d[0]||1)-Number(e[0]||1)}return b._plots[a].mainplot?1:-1});c.forEach(function(c){var d=b._plots[c];if(b._hasCartesian){var e=d.x(),f=d.y(),g=(e._linepositions[c]||[])[3],h=(f._linepositions[c]||[])[3],i=A.DRAGGERSIZE;if(w(g)&&"top"===e.side&&(g-=i),w(h)&&"right"!==f.side&&(h-=i),!d.mainplot){var j=o(a,d,0,0,e._length,f._length,"ns","ew");j.onmousemove=function(d){B.hover(a,d,c),b._lasthover=j,b._hoversubplot=c},j.onmouseout=function(b){a._dragging||B.unhover(a,b)},j.onclick=function(b){B.click(a,b)},o(a,d,-i,-i,i,i,"n","w"),o(a,d,e._length,-i,i,i,"n","e"),o(a,d,-i,f._length,i,i,"s","w"),o(a,d,e._length,f._length,i,i,"s","e")}w(g)&&("free"===e.anchor&&(g-=b._size.h*(1-f.domain[1])),o(a,d,.1*e._length,g,.8*e._length,i,"","ew"),o(a,d,0,g,.1*e._length,i,"","w"),o(a,d,.9*e._length,g,.1*e._length,i,"","e")),w(h)&&("free"===f.anchor&&(h-=b._size.w*e.domain[0]),o(a,d,h,.1*f._length,i,.8*f._length,"ns",""),o(a,d,h,.9*f._length,i,.1*f._length,"s",""),o(a,d,h,0,i,.1*f._length,"n",""))}});var d=b._hoverlayer.node();d.onmousemove=function(c){c.target=b._lasthover,B.hover(a,c,b._hoversubplot)},d.onclick=function(c){c.target=b._lasthover,B.click(a,c)},d.onmousedown=function(a){b._lasthover.onmousedown(a)}}};var C=A.YANGLE,D=Math.PI*C/180,E=1/Math.sin(D),F=Math.cos(D),G=Math.sin(D),H=A.HOVERARROWSIZE,I=A.HOVERTEXTPAD,J=A.HOVERFONTSIZE,K=A.HOVERFONT;B.hover=function(a,b,c){return"string"==typeof a&&(a=document.getElementById(a)),void 0===a._lastHoverTime&&(a._lastHoverTime=0),void 0!==a._hoverTimer&&(clearTimeout(a._hoverTimer),a._hoverTimer=void 0),Date.now()>a._lastHoverTime+A.HOVERMINTIME?(g(a,b,c),void(a._lastHoverTime=Date.now())):void(a._hoverTimer=setTimeout(function(){g(a,b,c),a._lastHoverTime=Date.now(),a._hoverTimer=void 0},A.HOVERMINTIME))},B.unhover=function(a,b,c){"string"==typeof a&&(a=document.getElementById(a)),a._hoverTimer&&(clearTimeout(a._hoverTimer),a._hoverTimer=void 0),m(a,b,c)},B.getDistanceFunction=function(a,b,c,d){return"closest"===a?d||f(b,c):"x"===a?b:c},B.getClosest=function(a,b,c){if(c.index!==!1)c.index>=0&&c.index<a.length?c.distance=0:c.index=!1;else for(var d=0;d<a.length;d++){var e=b(a[d]);e<c.distance&&(c.index=d,c.distance=e)}return c},B.loneHover=function(a,b){var c={color:a.color||x.Color.defaultLine,x0:a.x0||a.x||0,x1:a.x1||a.x||0,y0:a.y0||a.y||0,y1:a.y1||a.y||0,xLabel:a.xLabel,yLabel:a.yLabel,zLabel:a.zLabel,text:a.text,name:a.name,idealAlign:a.idealAlign,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},d=u.select(b.container),e=b.outerContainer?u.select(b.outerContainer):d,f={hovermode:"closest",rotateLabels:!1,bgColor:b.bgColor||x.Color.background,container:d,outerContainer:e},g=i([c],f);return k(g,f.rotateLabels),g.node()},B.loneUnhover=function(a){var b=a instanceof u.selection?a:u.select(a);b.selectAll("g.hovertext").remove()},B.click=function(a,b){a._hoverdata&&b&&b.target&&(a.emit("plotly_click",{points:a._hoverdata}),b.stopImmediatePropagation&&b.stopImmediatePropagation())};var L=!0;B.dragAlign=function(a,b,c,d,e){var f=(a-c)/(d-c),g=f+b/(d-c),h=(f+g)/2;return"left"===e||"bottom"===e?f:"center"===e||"middle"===e?h:"right"===e||"top"===e?g:f<2/3-h?f:g>4/3-h?g:h};var M=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];B.dragCursors=function(a,b,c,d){return a="left"===c?0:"center"===c?1:"right"===c?2:x.Lib.constrain(Math.floor(3*a),0,2),b="bottom"===d?0:"middle"===d?1:"top"===d?2:x.Lib.constrain(Math.floor(3*b),0,2),M[b][a]},B.dragElement=function(a){function b(b){var m=document.querySelector(".plugin-editable");return m&&u.select(m).on("blur").call(m),j._dragged=!1,j._dragging=!0,e=b.clientX,f=b.clientY,i=b.target,g=(new Date).getTime(),g-j._mouseDownTime<l?k+=1:(k=1,j._mouseDownTime=g),a.prepFn&&a.prepFn(b,e,f),h=t(),h.onmousemove=c,h.onmouseup=d,h.onmouseout=d,h.style.cursor=window.getComputedStyle(a.element).cursor,x.Lib.pauseEvent(b)}function c(b){var c=b.clientX-e,d=b.clientY-f,g=a.minDrag||A.MINDRAG;return Math.abs(c)<g&&(c=0),Math.abs(d)<g&&(d=0),(c||d)&&(j._dragged=!0,B.unhover(j)),a.moveFn&&a.moveFn(c,d,j._dragged),x.Lib.pauseEvent(b)}function d(b){if(h.onmousemove=null,h.onmouseup=null,h.onmouseout=null,x.Lib.removeElement(h),!j._dragging)return void(j._dragged=!1);if(j._dragging=!1,(new Date).getTime()-j._mouseDownTime>l&&(k=Math.max(k-1,1)),a.doneFn&&a.doneFn(j._dragged,k),!j._dragged){var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!0),i.dispatchEvent(c)}return r(j),j._dragged=!1,x.Lib.pauseEvent(b)}var e,f,g,h,i,j=x.Lib.getPlotDiv(a.element)||{},k=1,l=A.DBLCLICKDELAY;j._mouseDownTime||(j._mouseDownTime=0),a.element.onmousedown=b,a.element.style.pointerEvents="all"},B.setCursor=function(a,b){(a.attr("class")||"").split(" ").forEach(function(b){0===b.indexOf("cursor-")&&a.classed(b,!1)}),b&&a.classed("cursor-"+b,!0)},B.inbox=function(a,b){return a*b<0||0===a?A.MAXDIST*(.6-.3/Math.max(3,Math.abs(a-b))):1/0}},{"../../lib/events":1048,"../../plotly":1070,
"./constants":1074,"./select":1078,d3:64,"fast-isnumeric":72,tinycolor2:998}],1076:[function(a,b,c){"use strict";a("../../plotly");c.name="cartesian",c.attr=["xaxis","yaxis"],c.idRoot=["x","y"],c.attributes=a("./attributes")},{"../../plotly":1070,"./attributes":1072}],1077:[function(a,b,c){var d=a("../../plotly"),e=a("../font_attributes"),f=a("../../components/color/attributes"),g=a("../../lib/extend").extendFlat;b.exports={title:{valType:"string"},titlefont:g({},e,{}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal"},range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},fixedrange:{valType:"boolean",dflt:!1},tickmode:{valType:"enumerated",values:["auto","linear","array"]},nticks:{valType:"integer",min:0,dflt:0},tick0:{valType:"number",dflt:0},dtick:{valType:"any",dflt:1},tickvals:{valType:"data_array"},ticktext:{valType:"data_array"},ticks:{valType:"enumerated",values:["outside","inside",""]},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1},ticklen:{valType:"number",min:0,dflt:5},tickwidth:{valType:"number",min:0,dflt:1},tickcolor:{valType:"color",dflt:f.defaultLine},showticklabels:{valType:"boolean",dflt:!0},tickfont:g({},e,{}),tickangle:{valType:"angle",dflt:"auto"},tickprefix:{valType:"string",dflt:""},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},ticksuffix:{valType:"string",dflt:""},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B"},tickformat:{valType:"string",dflt:""},hoverformat:{valType:"string",dflt:""},showline:{valType:"boolean",dflt:!1},linecolor:{valType:"color",dflt:f.defaultLine},linewidth:{valType:"number",min:0,dflt:1},showgrid:{valType:"boolean"},gridcolor:{valType:"color",dflt:f.lightLine},gridwidth:{valType:"number",min:0,dflt:1},zeroline:{valType:"boolean"},zerolinecolor:{valType:"color",dflt:f.defaultLine},zerolinewidth:{valType:"number",dflt:1},anchor:{valType:"enumerated",values:["free",d.Plots.subplotsRegistry.cartesian.idRegex.x.toString(),d.Plots.subplotsRegistry.cartesian.idRegex.y.toString()]},side:{valType:"enumerated",values:["top","bottom","left","right"]},overlaying:{valType:"enumerated",values:["free",d.Plots.subplotsRegistry.cartesian.idRegex.x.toString(),d.Plots.subplotsRegistry.cartesian.idRegex.y.toString()]},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},position:{valType:"number",min:0,max:1,dflt:0},_deprecated:{autotick:{valType:"boolean"}}}},{"../../components/color/attributes":1004,"../../lib/extend":1049,"../../plotly":1070,"../font_attributes":1079}],1078:[function(a,b,c){"use strict";function d(a){return a._id}var e=a("../../lib/polygon"),f=a("../../components/color"),g=a("./axes"),h=a("./constants"),i=e.filter,j=e.tester,k=h.MINSELECT;b.exports=function(a,b,c,e,l){function m(a){var b="y"===a._id.charAt(0)?1:0;return function(c){return a.p2d(c[b])}}function n(a,b){return a-b}var o=e.plotinfo.plot,p=e.element.getBoundingClientRect(),q=b-p.left,r=c-p.top,s=q,t=r,u="M"+q+","+r,v=e.xaxes[0]._length,w=e.yaxes[0]._length,x=e.xaxes.map(d),y=e.yaxes.map(d),z=e.xaxes.concat(e.yaxes);if("lasso"===l)var A=i([[q,r]],h.BENDPX);var B=o.selectAll("path.select-outline").data([1,2]);B.enter().append("path").attr("class",function(a){return"select-outline select-outline-"+a}).attr("d",u+"Z");var C,D,E,F,G,H=o.append("path").attr("class","zoombox-corners").style({fill:f.background,stroke:f.defaultLine,"stroke-width":1}).attr("d","M0,0Z"),I=[],J=e.gd,K=[];for(C=0;C<J.calcdata.length;C++)D=J.calcdata[C],E=D[0].trace,E._module&&E._module.selectPoints&&x.indexOf(E.xaxis)!==-1&&y.indexOf(E.yaxis)!==-1&&I.push({selectPoints:E._module.selectPoints,cd:D,xaxis:g.getFromId(J,E.xaxis),yaxis:g.getFromId(J,E.yaxis)});e.moveFn=function(a,b){var c,d;s=Math.max(0,Math.min(v,a+q)),t=Math.max(0,Math.min(w,b+r));var f=Math.abs(s-q),g=Math.abs(t-r);for("select"===l?(g<Math.min(.6*f,k)?(c=j([[q,0],[q,w],[s,w],[s,0]]),H.attr("d","M"+c.xmin+","+(r-k)+"h-4v"+2*k+"h4ZM"+(c.xmax-1)+","+(r-k)+"h4v"+2*k+"h-4Z")):f<Math.min(.6*g,k)?(c=j([[0,r],[0,t],[v,t],[v,r]]),H.attr("d","M"+(q-k)+","+c.ymin+"v-4h"+2*k+"v4ZM"+(q-k)+","+(c.ymax-1)+"v4h"+2*k+"v-4Z")):(c=j([[q,r],[q,t],[s,t],[s,r]]),H.attr("d","M0,0Z")),B.attr("d","M"+c.xmin+","+c.ymin+"H"+(c.xmax-1)+"V"+(c.ymax-1)+"H"+c.xmin+"Z")):"lasso"===l&&(A.addPt([s,t]),c=j(A.filtered),B.attr("d","M"+A.filtered.join("L")+"Z")),K=[],C=0;C<I.length;C++)F=I[C],[].push.apply(K,F.selectPoints(F,c));if(G={points:K},"select"===l){var h,i=G.range={};for(C=0;C<z.length;C++)d=z[C],h=d._id.charAt(0),i[d._id]=[d.p2d(c[h+"min"]),d.p2d(c[h+"max"])].sort(n)}else{var o=G.lassoPoints={};for(C=0;C<z.length;C++)d=z[C],o[d._id]=A.filtered.map(m(d))}e.gd.emit("plotly_selecting",G)},e.doneFn=function(a,b){if(a||2!==b)e.gd.emit("plotly_selected",G);else for(B.remove(),C=0;C<I.length;C++)F=I[C],F.selectPoints(F,!1);H.remove()}}},{"../../components/color":1005,"../../lib/polygon":1058,"./axes":1073,"./constants":1074}],1079:[function(a,b,c){b.exports={family:{valType:"string",noBlank:!0,strict:!0},size:{valType:"number",min:1},color:{valType:"color"}}},{}],1080:[function(a,b,c){"use strict";function d(a,b){this.id=a.id,this.container=a.container,this.topojsonURL=a.topojsonURL,l(),this.showHover="closest"===b.hovermode,this.hoverContainer=null,this.topojsonName=null,this.topojson=null,this.projectionType=null,this.projection=null,this.clipAngle=null,this.setScale=null,this.path=null,this.zoom=null,this.zoomReset=null,this.makeFramework()}function e(a,b,c){return k.geo.graticule().extent([[a[0],b[0]],[a[1],b[1]]]).step(c)}function f(a,b,c){var d=r.layerNameToAdjective[b];a.select("."+b).selectAll("path").attr("stroke","none").call(j.Color.fill,c[d+"color"])}function g(a,b,c){var d=r.layerNameToAdjective[b];a.select("."+b).selectAll("path").attr("fill","none").call(j.Color.stroke,c[d+"color"]).call(j.Drawing.dashLine,"",c[d+"width"])}function h(a,b,c){a.select("."+b+"graticule").selectAll("path").attr("fill","none").call(j.Color.stroke,c[b].gridcolor).call(j.Drawing.dashLine,"",c[b].gridwidth)}function i(a){var b={type:"linear",showexponent:"all",exponentformat:j.Axes.layoutAttributes.exponentformat.dflt,_td:{_fullLayout:a}};return j.Axes.setConvert(b),b}var j=a("../../plotly"),k=a("d3"),l=a("./projections"),m=a("./set_scale"),n=a("./zoom"),o=a("./zoom_reset"),p=a("../../traces/scattergeo/plot"),q=a("../../traces/choropleth/plot"),r=a("../../constants/geo_constants"),s=a("../../lib/topojson_utils"),t=a("topojson").feature;b.exports=d;var u=d.prototype;u.plot=function(a,b,c){var d,e,f=this,g=b[f.id],h=b._size;f.projection=null,f.setScale=m(g,h),f.makeProjection(g),f.makePath(),f.adjustLayout(g,h),f.zoom=n(f,g),f.zoomReset=o(f,g),f.mockAxis=i(b),f.framework.call(f.zoom).on("dblclick.zoom",f.zoomReset),d=s.getTopojsonName(g),null===f.topojson||d!==f.topojsonName?(f.topojsonName=d,void 0!==PlotlyGeoAssets.topojson[f.topojsonName]?(f.topojson=PlotlyGeoAssets.topojson[f.topojsonName],f.onceTopojsonIsLoaded(a,g)):(e=s.getTopojsonPath(f.topojsonURL,f.topojsonName),c.push(new Promise(function(b,c){k.json(e,function(d,h){return d?void c(404===d.status?new Error(["plotly.js could not find topojson file at",e,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",e].join(" "))):(f.topojson=h,PlotlyGeoAssets.topojson[f.topojsonName]=h,f.onceTopojsonIsLoaded(a,g),void b())})})))):f.onceTopojsonIsLoaded(a,g)},u.onceTopojsonIsLoaded=function(a,b){var c,d,e=[],f=[];this.drawLayout(b);for(var g=0;g<a.length;g++)c=a[g],d=c.type,"scattergeo"===c.type?e.push(c):"choropleth"===c.type&&f.push(c);e.length>0&&p.plot(this,e),f.length>0&&q.plot(this,f,b),this.render()},u.makeProjection=function(a){var b,c=a.projection,d=c.type,e=null===this.projection||d!==this.projectionType;e?(this.projectionType=d,b=this.projection=k.geo[r.projNames[d]]()):b=this.projection,b.translate(c._translate0).precision(r.precision),a._isAlbersUsa||b.rotate(c._rotate).center(c._center),a._clipAngle?(this.clipAngle=a._clipAngle,b.clipAngle(a._clipAngle-r.clipPad)):this.clipAngle=null,c.parallels&&b.parallels(c.parallels),e&&this.setScale(b),b.translate(c._translate).scale(c._scale)},u.makePath=function(){this.path=k.geo.path().projection(this.projection)},u.makeFramework=function(){var a=this.geoDiv=k.select(this.container).append("div");a.attr("id",this.id).style("position","absolute");var b=this.hoverContainer=a.append("svg");b.attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink"}).style({position:"absolute","z-index":20,"pointer-events":"none"});var c=this.framework=a.append("svg");c.attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink",position:"absolute",preserveAspectRatio:"none"}),c.append("g").attr("class","bglayer").append("rect"),c.append("g").attr("class","baselayer"),c.append("g").attr("class","choroplethlayer"),c.append("g").attr("class","baselayeroverchoropleth"),c.append("g").attr("class","scattergeolayer"),c.on("dblclick.zoom",null)},u.adjustLayout=function(a,b){var c=a.domain;this.geoDiv.style({left:b.l+b.w*c.x[0]+a._marginX+"px",top:b.t+b.h*(1-c.y[1])+a._marginY+"px",width:a._width+"px",height:a._height+"px"}),this.hoverContainer.attr({width:a._width,height:a._height}),this.framework.attr({width:a._width,height:a._height}),this.framework.select(".bglayer").select("rect").attr({width:a._width,height:a._height}).style({fill:a.bgcolor,"stroke-width":0})},u.drawTopo=function(a,b,c){if(c["show"+b]===!0){var d=this.topojson,e="frame"===b?r.sphereSVG:t(d,d.objects[b]);a.append("g").datum(e).attr("class",b).append("path").attr("class","basepath")}},u.drawGraticule=function(a,b,c){var d=c[b];if(d.showgrid===!0){var f=r.scopeDefaults[c.scope],g=f.lonaxisRange,h=f.lataxisRange,i="lonaxis"===b?[d.dtick]:[0,d.dtick],j=e(g,h,i);a.append("g").datum(j).attr("class",b+"graticule").append("path").attr("class","graticulepath")}},u.drawLayout=function(a){var b,c=this.framework.select("g.baselayer"),d=r.baseLayers,e=r.axesNames;c.selectAll("*").remove();for(var f=0;f<d.length;f++)b=d[f],e.indexOf(b)!==-1?this.drawGraticule(c,b,a):this.drawTopo(c,b,a);this.styleLayout(a)},u.styleLayer=function(a,b,c){var d=r.fillLayers,e=r.lineLayers;d.indexOf(b)!==-1?f(a,b,c):e.indexOf(b)!==-1&&g(a,b,c)},u.styleLayout=function(a){for(var b,c=this.framework.select("g.baselayer"),d=r.baseLayers,e=r.axesNames,f=0;f<d.length;f++)b=d[f],e.indexOf(b)!==-1?h(c,b,a):this.styleLayer(c,b,a)},u.render=function(){function a(a){var b=f([a.lon,a.lat]);return b?"translate("+b[0]+","+b[1]+")":null}function b(a){var b=f.rotate(),c=k.geo.distance([a.lon,a.lat],[-b[0],-b[1]]),d=h*Math.PI/180;return c>d?"0":"1.0"}var c=this.framework,d=c.select("g.choroplethlayer"),e=c.select("g.scattergeolayer"),f=this.projection,g=this.path,h=this.clipAngle;c.selectAll("path.basepath").attr("d",g),c.selectAll("path.graticulepath").attr("d",g),d.selectAll("path.choroplethlocation").attr("d",g),d.selectAll("path.basepath").attr("d",g),e.selectAll("path.js-line").attr("d",g),null!==h?(e.selectAll("path.point").style("opacity",b).attr("transform",a),e.selectAll("text").style("opacity",b).attr("transform",a)):(e.selectAll("path.point").attr("transform",a),e.selectAll("text").attr("transform",a))}},{"../../constants/geo_constants":1039,"../../lib/topojson_utils":1065,"../../plotly":1070,"../../traces/choropleth/plot":1145,"../../traces/scattergeo/plot":1211,"./projections":1087,"./set_scale":1088,"./zoom":1089,"./zoom_reset":1090,d3:64,topojson:999}],1081:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("./geo"),f=d.Plots;c.name="geo",c.attr="geo",c.idRoot="geo",c.attributes=a("./layout/attributes"),c.layoutAttributes=a("./layout/layout_attributes"),c.supplyLayoutDefaults=a("./layout/defaults"),c.plot=function(a){var b=a._fullLayout,c=a._fullData,d=f.getSubplotIds(b,"geo");void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}});for(var g=0;g<d.length;g++){var h=d[g],i=f.getSubplotData(c,"geo",h),j=b[h]._geo;void 0===j&&(j=new e({id:h,container:b._geocontainer.node(),topojsonURL:a._context.topojsonURL},b),b[h]._geo=j),j.plot(i,b,a._promises)}}},{"../../plotly":1070,"./geo":1080,"./layout/attributes":1082,"./layout/defaults":1085,"./layout/layout_attributes":1086}],1082:[function(a,b,c){b.exports={geo:{valType:"geoid",dflt:"geo"}}},{}],1083:[function(a,b,c){var d=a("../../../components/color/attributes");b.exports={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:d.lightLine},gridwidth:{valType:"number",min:0,dflt:1}}},{"../../../components/color/attributes":1004}],1084:[function(a,b,c){"use strict";var d=a("../../../plotly"),e=a("../../../constants/geo_constants"),f=a("./axis_attributes");b.exports=function(a,b){function c(a,b){return d.Lib.coerce(k,l,f,a,b)}function g(a){var c,d,f,g,h,i,j=b.scope;return"world"===j?(c=b.projection,d=c.type,f=c.rotation,h=e[a+"Span"],i=void 0!==h[d]?h[d]/2:h["*"]/2,g="lonaxis"===a?f.lon:f.lat,[g-i,g+i]):e.scopeDefaults[j][a+"Range"]}for(var h=e.axesNames,i=0;i<h.length;i++){var j=h[i],k=a[j]||{},l={},m=g(j),n=c("range",m);d.Lib.noneOrAll(k.range,l.range,[0,1]),c("tick0",n[0]),c("dtick","lonaxis"===j?30:10);var o=c("showgrid");o&&(c("gridcolor"),c("gridwidth")),b[j]=l,b[j]._fullRange=m}}},{"../../../constants/geo_constants":1039,"../../../plotly":1070,"./axis_attributes":1083}],1085:[function(a,b,c){"use strict";function d(a,b,c){var d,e=c("scope"),g="world"!==e,i=f.scopeDefaults[e],j=c("resolution"),k=c("projection.type",i.projType),l="albers usa"===k,m=k.indexOf("conic")!==-1;if(m){var n=i.projParallels||[0,60];c("projection.parallels",n)}if(l)b.scope="usa";else{var o=i.projRotate||[0,0,0];c("projection.rotation.lon",o[0]),c("projection.rotation.lat",o[1]),c("projection.rotation.roll",o[2]),d=c("showcoastlines",!g),d&&(c("coastlinecolor"),c("coastlinewidth")),d=c("showocean"),d&&c("oceancolor")}c("projection.scale"),d=c("showland"),d&&c("landcolor"),d=c("showlakes"),d&&c("lakecolor"),d=c("showrivers"),d&&(c("rivercolor"),c("riverwidth")),d=c("showcountries",g),d&&(c("countrycolor"),c("countrywidth")),("usa"===e||"north america"===e&&50===j)&&(c("showsubunits",!0),c("subunitcolor"),c("subunitwidth")),g||(d=c("showframe",!0),d&&(c("framecolor"),c("framewidth"))),c("bgcolor"),h(a,b),b._isHighRes=50===j,b._clipAngle=f.lonaxisSpan[k]/2,b._isAlbersUsa=l,b._isConic=m,b._isScoped=g;var p=b.projection.rotation||{};b.projection._rotate=[-p.lon||0,-p.lat||0,p.roll||0]}var e=a("../../../plotly"),f=a("../../../constants/geo_constants"),g=a("./layout_attributes"),h=a("./axis_defaults");b.exports=function(a,b,c){function f(a,b){return e.Lib.coerce(l,m,g,a,b)}for(var h=e.Plots.getSubplotIdsInData(c,"geo"),i=h.length,j=0;j<i;j++){var k=h[j],l=a[k]||{},m={};f("domain.x"),f("domain.y",[j/i,(j+1)/i]),d(l,m,f),b[k]=m}}},{"../../../constants/geo_constants":1039,"../../../plotly":1070,"./axis_defaults":1084,"./layout_attributes":1086}],1086:[function(a,b,c){var d=a("../../../components/color/attributes"),e=a("../../../constants/geo_constants"),f=a("./axis_attributes");b.exports={domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(e.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(e.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,max:10,dflt:1}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:d.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:e.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:e.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:e.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:e.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:d.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:d.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:d.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:d.background},lonaxis:f,lataxis:f}},{"../../../components/color/attributes":1004,"../../../constants/geo_constants":1039,"./axis_attributes":1083}],1087:[function(a,b,c){function d(){function a(a,c){return{type:"Feature",id:a.id,properties:a.properties,geometry:b(a.geometry,c)}}function b(a,c){if(!a)return null;if("GeometryCollection"===a.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(a){return b(a,c)})};if(!y.hasOwnProperty(a.type))return null;var d=y[a.type];return e.geo.stream(a,c(d)),d.result()}function c(){}function d(a){if((b=a.length)<4)return!1;for(var b,c=0,d=a[b-1][1]*a[0][0]-a[b-1][0]*a[0][1];++c<b;)d+=a[c-1][1]*a[c][0]-a[c-1][0]*a[c][1];return d<=0}function f(a,b){for(var c=b[0],d=b[1],e=!1,f=0,g=a.length,h=g-1;f<g;h=f++){var i=a[f],j=i[0],k=i[1],l=a[h],m=l[0],n=l[1];k>d^n>d&&c<(m-j)*(d-k)/(n-k)+j&&(e=!e)}return e}function g(a){return a>1?C:a<-1?-C:Math.asin(a)}function h(a,b){var c=(2+C)*Math.sin(b);b/=2;for(var d=0,e=1/0;d<10&&Math.abs(e)>z;d++){var f=Math.cos(b);b-=e=(b+Math.sin(b)*(f+2)-c)/(2*f*(1+f))}return[2/Math.sqrt(B*(4+B))*a*(1+Math.cos(b)),2*Math.sqrt(B/(4+B))*Math.sin(b)]}function i(a,b){function c(c,d){var e=H(c/b,d);return e[0]*=a,e}return arguments.length<2&&(b=a),1===b?H:b===1/0?k:(c.invert=function(c,d){var e=H.invert(c/a,d);return e[0]*=b,e},c)}function j(){var a=2,b=G(i),c=b(a);return c.coefficient=function(c){return arguments.length?b(a=+c):a},c}function k(a,b){return[a*Math.cos(b)/Math.cos(b/=2),2*Math.sin(b)]}function l(a,b){return[3*a/(2*B)*Math.sqrt(B*B/3-b*b),b]}function m(a,b){return[a,1.25*Math.log(Math.tan(B/4+.4*b))]}function n(a){return function(b){var c,d=a*Math.sin(b),e=30;do b-=c=(b+Math.sin(b)-d)/(1+Math.cos(b));while(Math.abs(c)>z&&--e>0);return b/2}}function o(a,b,c){function d(c,d){return[a*c*Math.cos(d=e(d)),b*Math.sin(d)]}var e=n(c);return d.invert=function(d,e){var f=g(e/b);return[d/(a*Math.cos(f)),g((2*f+Math.sin(2*f))/c)]},d}function p(a,b){var c=b*b,d=c*c;return[a*(.8707-.131979*c+d*(-.013791+d*(.003971*c-.001529*d))),b*(1.007226+c*(.015085+d*(-.044475+.028874*c-.005916*d)))]}function q(a,b){var c,d=Math.min(18,36*Math.abs(b)/B),e=Math.floor(d),f=d-e,g=(c=J[e])[0],h=c[1],i=(c=J[++e])[0],j=c[1],k=(c=J[Math.min(19,++e)])[0],l=c[1];return[a*(i+f*(k-g)/2+f*f*(k-2*i+g)/2),(b>0?C:-C)*(j+f*(l-h)/2+f*f*(l-2*j+h)/2)]}function r(a,b){return[a*Math.cos(b),b]}e.geo.project=function(a,c){var d=c.stream;if(!d)throw new Error("not yet supported");return(a&&s.hasOwnProperty(a.type)?s[a.type]:b)(a,d)};var s={Feature:a,FeatureCollection:function(b,c){return{type:"FeatureCollection",features:b.features.map(function(b){return a(b,c)})}}},t=[],u=[],v={point:function(a,b){t.push([a,b])},result:function(){var a=t.length?t.length<2?{type:"Point",coordinates:t[0]}:{type:"MultiPoint",coordinates:t}:null;return t=[],a}},w={lineStart:c,point:function(a,b){t.push([a,b])},lineEnd:function(){t.length&&(u.push(t),t=[])},result:function(){var a=u.length?u.length<2?{type:"LineString",coordinates:u[0]}:{type:"MultiLineString",coordinates:u}:null;return u=[],a}},x={polygonStart:c,lineStart:c,point:function(a,b){t.push([a,b])},lineEnd:function(){var a=t.length;if(a){do t.push(t[0].slice());while(++a<4);u.push(t),t=[]}},polygonEnd:c,result:function(){if(!u.length)return null;var a=[],b=[];return u.forEach(function(c){d(c)?a.push([c]):b.push(c)}),b.forEach(function(b){var c=b[0];a.some(function(a){if(f(a[0],c))return a.push(b),!0})||a.push([b])}),u=[],a.length?a.length>1?{type:"MultiPolygon",coordinates:a}:{type:"Polygon",coordinates:a[0]}:null}},y={Point:v,MultiPoint:v,LineString:w,MultiLineString:w,Polygon:x,MultiPolygon:x,Sphere:x},z=1e-6,A=z*z,B=Math.PI,C=B/2,D=(Math.sqrt(B),B/180),E=180/B,F=e.geo.projection,G=e.geo.projectionMutator;e.geo.interrupt=function(a){function b(b,c){for(var d=c<0?-1:1,e=i[+(c<0)],f=0,g=e.length-1;f<g&&b>e[f][2][0];++f);var h=a(b-e[f][1][0],c);return h[0]+=a(e[f][1][0],d*c>d*e[f][0][1]?e[f][0][1]:c)[0],h}function c(){h=i.map(function(b){return b.map(function(b){var c,d=a(b[0][0],b[0][1])[0],e=a(b[2][0],b[2][1])[0],f=a(b[1][0],b[0][1])[1],g=a(b[1][0],b[1][1])[1];return f>g&&(c=f,f=g,g=c),[[d,f],[e,g]]})})}function d(){for(var a=1e-6,b=[],c=0,d=i[0].length;c<d;++c){var g=i[0][c],h=180*g[0][0]/B,j=180*g[0][1]/B,k=180*g[1][1]/B,l=180*g[2][0]/B,m=180*g[2][1]/B;b.push(f([[h+a,j+a],[h+a,k-a],[l-a,k-a],[l-a,m+a]],30))}for(var c=i[1].length-1;c>=0;--c){var g=i[1][c],h=180*g[0][0]/B,j=180*g[0][1]/B,k=180*g[1][1]/B,l=180*g[2][0]/B,m=180*g[2][1]/B;b.push(f([[l-a,m-a],[l-a,k+a],[h+a,k+a],[h+a,j-a]],30))}return{type:"Polygon",coordinates:[e.merge(b)]}}function f(a,b){for(var c,d,e,f=-1,g=a.length,h=a[0],i=[];++f<g;){c=a[f],d=(c[0]-h[0])/b,e=(c[1]-h[1])/b;for(var j=0;j<b;++j)i.push([h[0]+j*d,h[1]+j*e]);h=c}return i.push(c),i}function g(a,b){return Math.abs(a[0]-b[0])<z&&Math.abs(a[1]-b[1])<z}var h,i=[[[[-B,0],[0,C],[B,0]]],[[[-B,0],[0,-C],[B,0]]]];a.invert&&(b.invert=function(c,d){for(var e=h[+(d<0)],f=i[+(d<0)],j=0,k=e.length;j<k;++j){var l=e[j];if(l[0][0]<=c&&c<l[1][0]&&l[0][1]<=d&&d<l[1][1]){var m=a.invert(c-a(f[j][1][0],0)[0],d);return m[0]+=f[j][1][0],g(b(m[0],m[1]),[c,d])?m:null}}});var j=e.geo.projection(b),k=j.stream;return j.stream=function(a){var b=j.rotate(),c=k(a),f=(j.rotate([0,0]),k(a));return j.rotate(b),c.sphere=function(){e.geo.stream(d(),f)},c},j.lobes=function(a){return arguments.length?(i=a.map(function(a){return a.map(function(a){return[[a[0][0]*B/180,a[0][1]*B/180],[a[1][0]*B/180,a[1][1]*B/180],[a[2][0]*B/180,a[2][1]*B/180]]})}),c(),j):i.map(function(a){return a.map(function(a){return[[180*a[0][0]/B,180*a[0][1]/B],[180*a[1][0]/B,180*a[1][1]/B],[180*a[2][0]/B,180*a[2][1]/B]]})})},j},h.invert=function(a,b){var c=.5*b*Math.sqrt((4+B)/B),d=g(c),e=Math.cos(d);return[a/(2/Math.sqrt(B*(4+B))*(1+e)),g((d+c*(e+2))/(2+C))]},(e.geo.eckert4=function(){return F(h)}).raw=h;var H=e.geo.azimuthalEqualArea.raw;k.invert=function(a,b){var c=2*g(b/2);return[a*Math.cos(c/2)/Math.cos(c),c]},(e.geo.hammer=j).raw=i,l.invert=function(a,b){return[2/3*B*a/Math.sqrt(B*B/3-b*b),b]},(e.geo.kavrayskiy7=function(){return F(l)}).raw=l,m.invert=function(a,b){return[a,2.5*Math.atan(Math.exp(.8*b))-.625*B]},(e.geo.miller=function(){return F(m)}).raw=m;var I=(n(B),o(Math.SQRT2/C,Math.SQRT2,B));(e.geo.mollweide=function(){return F(I)}).raw=I,p.invert=function(a,b){var c,d=b,e=25;do{var f=d*d,g=f*f;d-=c=(d*(1.007226+f*(.015085+g*(-.044475+.028874*f-.005916*g)))-b)/(1.007226+f*(.045255+g*(-.311325+.259866*f-.005916*11*g)))}while(Math.abs(c)>z&&--e>0);return[a/(.8707+(f=d*d)*(-.131979+f*(-.013791+f*f*f*(.003971-.001529*f)))),d]},(e.geo.naturalEarth=function(){return F(p)}).raw=p;var J=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];J.forEach(function(a){a[1]*=1.0144}),q.invert=function(a,b){var c=b/C,d=90*c,e=Math.min(18,Math.abs(d/5)),f=Math.max(0,Math.floor(e));do{var g=J[f][1],h=J[f+1][1],i=J[Math.min(19,f+2)][1],j=i-g,k=i-2*h+g,l=2*(Math.abs(c)-h)/j,m=k/j,n=l*(1-m*l*(1-2*m*l));if(n>=0||1===f){d=(b>=0?5:-5)*(n+e);var o,p=50;do e=Math.min(18,Math.abs(d)/5),f=Math.floor(e),n=e-f,g=J[f][1],h=J[f+1][1],i=J[Math.min(19,f+2)][1],d-=(o=(b>=0?C:-C)*(h+n*(i-g)/2+n*n*(i-2*h+g)/2)-b)*E;while(Math.abs(o)>A&&--p>0);break}}while(--f>=0);var q=J[f][0],r=J[f+1][0],s=J[Math.min(19,f+2)][0];return[a/(r+n*(s-q)/2+n*n*(s-2*r+q)/2),d*D]},(e.geo.robinson=function(){return F(q)}).raw=q,r.invert=function(a,b){return[a/Math.cos(b),b]},(e.geo.sinusoidal=function(){return F(r)}).raw=r}var e=a("d3");b.exports=d},{d3:64}],1088:[function(a,b,c){"use strict";function d(a,b){var c=a.projection,d=a.lonaxis,g=a.lataxis,i=a.domain,j=a.framewidth||0,k=b.w*(i.x[1]-i.x[0]),l=b.h*(i.y[1]-i.y[0]),m=d.range[0]+h,n=d.range[1]-h,o=g.range[0]+h,p=g.range[1]-h,q=d._fullRange[0]+h,r=d._fullRange[1]-h,s=g._fullRange[0]+h,t=g._fullRange[1]-h;c._translate0=[b.l+k/2,b.t+l/2];var u=n-m,v=p-o,w=[m+u/2,o+v/2],x=c._rotate;c._center=[w[0]+x[0],w[1]+x[1]];var y=function(b){function d(a){return Math.min(v*k/(a[1][0]-a[0][0]),v*l/(a[1][1]-a[0][1]))}var g,h,i,u,v=b.scale(),w=c._translate0,x=e(m,o,n,p),y=e(q,s,r,t);i=f(b,x),g=d(i),u=f(b,y),c._fullScale=d(u),b.scale(g),i=f(b,x),h=[w[0]-i[0][0]+j,w[1]-i[0][1]+j],c._translate=h,b.translate(h),i=f(b,x),a._isAlbersUsa||b.clipExtent(i),g=c.scale*g,c._scale=g,a._width=Math.round(i[1][0])+j,a._height=Math.round(i[1][1])+j,a._marginX=(k-Math.round(i[1][0]))/2,a._marginY=(l-Math.round(i[1][1]))/2};return y}function e(a,b,c,d){var e=(c-a)/4;return{type:"Polygon",coordinates:[[[a,b],[a,d],[a+e,d],[a+2*e,d],[a+3*e,d],[c,d],[c,b],[c-e,b],[c-2*e,b],[c-3*e,b],[a,b]]]}}function f(a,b){return g.geo.path().projection(a).bounds(b)}var g=a("d3"),h=a("../../constants/geo_constants").clipPad;b.exports=d},{"../../constants/geo_constants":1039,d3:64}],1089:[function(a,b,c){"use strict";function d(a,b){var c;return(c=b._isScoped?f:b._clipAngle?h:g)(a,b.projection)}function e(a,b){var c=b._fullScale;return v.behavior.zoom().translate(a.translate()).scale(a.scale()).scaleExtent([.5*c,100*c])}function f(a,b){function c(){v.select(this).style(y)}function d(){g.scale(v.event.scale).translate(v.event.translate),a.render()}function f(){v.select(this).style(z)}var g=a.projection,h=e(g,b);return h.on("zoomstart",c).on("zoom",d).on("zoomend",f),h}function g(a,b){function c(a){return q.invert(a)}function d(a){var b=q(c(a));return Math.abs(b[0]-a[0])>s||Math.abs(b[1]-a[1])>s}function f(){v.select(this).style(y),i=v.mouse(this),j=q.rotate(),k=q.translate(),l=j,m=c(i)}function g(){return n=v.mouse(this),d(i)?(r.scale(q.scale()),void r.translate(q.translate())):(q.scale(v.event.scale),q.translate([k[0],v.event.translate[1]]),m?c(n)&&(p=c(n),o=[l[0]+(p[0]-m[0]),j[1],j[2]],q.rotate(o),l=o):(i=n,m=c(i)),void a.render())}function h(){v.select(this).style(z)}var i,j,k,l,m,n,o,p,q=a.projection,r=e(q,b),s=2;return r.on("zoomstart",f).on("zoom",g).on("zoomend",h),r}function h(a,b){function c(a){r++||a({type:"zoomstart"})}function d(a){a({type:"zoom"})}function f(a){--r||a({type:"zoomend"})}var g,h=a.projection,n={r:h.rotate(),k:h.scale()},o=e(h,b),p=u(o,"zoomstart","zoom","zoomend"),r=0,s=o.on;return o.on("zoomstart",function(){v.select(this).style(y);var a=v.mouse(this),b=h.rotate(),e=b,f=h.translate(),r=j(b);g=i(h,a),s.call(o,"zoom",function(){var c=v.mouse(this);if(h.scale(n.k=v.event.scale),g){if(i(h,c)){h.rotate(b).translate(f);var j=i(h,c),o=l(g,j),s=q(k(r,o)),t=n.r=m(s,g,e);isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])||(t=e),h.rotate(t),e=t}}else a=c,g=i(h,a);d(p.of(this,arguments))}),c(p.of(this,arguments))}).on("zoomend",function(){v.select(this).style(z),s.call(o,"zoom",null),f(p.of(this,arguments))}).on("zoom.redraw",function(){a.render()}),v.rebind(o,p,"on")}function i(a,b){var c=a.invert(b);return c&&isFinite(c[0])&&isFinite(c[1])&&r(c)}function j(a){var b=.5*a[0]*w,c=.5*a[1]*w,d=.5*a[2]*w,e=Math.sin(b),f=Math.cos(b),g=Math.sin(c),h=Math.cos(c),i=Math.sin(d),j=Math.cos(d);return[f*h*j+e*g*i,e*h*j-f*g*i,f*g*j+e*h*i,f*h*i-e*g*j]}function k(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],i=b[2],j=b[3];return[c*g-d*h-e*i-f*j,c*h+d*g+e*j-f*i,c*i-d*j+e*g+f*h,c*j+d*i-e*h+f*g]}function l(a,b){if(a&&b){var c=t(a,b),d=Math.sqrt(s(c,c)),e=.5*Math.acos(Math.max(-1,Math.min(1,s(a,b)))),f=Math.sin(e)/d;return d&&[Math.cos(e),c[2]*f,-c[1]*f,c[0]*f]}}function m(a,b,c){var d=p(b,2,a[0]);d=p(d,1,a[1]),d=p(d,0,a[2]-c[2]);var e,f,g=b[0],h=b[1],i=b[2],j=d[0],k=d[1],l=d[2],m=Math.atan2(h,g)*x,o=Math.sqrt(g*g+h*h);Math.abs(k)>o?(f=(k>0?90:-90)-m,e=0):(f=Math.asin(k/o)*x-m,e=Math.sqrt(o*o-k*k));var q=180-f-2*m,r=(Math.atan2(l,j)-Math.atan2(i,e))*x,s=(Math.atan2(l,j)-Math.atan2(i,-e))*x,t=n(c[0],c[1],f,r),u=n(c[0],c[1],q,s);return t<=u?[f,r,c[2]]:[q,s,c[2]]}function n(a,b,c,d){var e=o(c-a),f=o(d-b);return Math.sqrt(e*e+f*f)}function o(a){return(a%360+540)%360-180}function p(a,b,c){var d=c*w,e=a.slice(),f=0===b?1:0,g=2===b?1:2,h=Math.cos(d),i=Math.sin(d);return e[f]=a[f]*h-a[g]*i,e[g]=a[g]*h+a[f]*i,e}function q(a){return[Math.atan2(2*(a[0]*a[1]+a[2]*a[3]),1-2*(a[1]*a[1]+a[2]*a[2]))*x,Math.asin(Math.max(-1,Math.min(1,2*(a[0]*a[2]-a[3]*a[1]))))*x,Math.atan2(2*(a[0]*a[3]+a[1]*a[2]),1-2*(a[2]*a[2]+a[3]*a[3]))*x]}function r(a){var b=a[0]*w,c=a[1]*w,d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function s(a,b){for(var c=0,d=a.length,e=0;c<d;++c)e+=a[c]*b[c];return e}function t(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function u(a){for(var b=0,c=arguments.length,d=[];++b<c;)d.push(arguments[b]);var e=v.dispatch.apply(null,d);return e.of=function(b,c){return function(d){var f;try{f=d.sourceEvent=v.event,d.target=a,v.event=d,e[d.type].apply(b,c)}finally{v.event=f}}},e}var v=a("d3"),w=Math.PI/180,x=180/Math.PI,y={cursor:"pointer"},z={cursor:"auto"};b.exports=d},{d3:64}],1090:[function(a,b,c){"use strict";function d(a,b){var c=a.projection,d=a.zoom,f=function(){a.makeProjection(b),a.makePath(),d.scale(c.scale()),d.translate(c.translate()),e(a.hoverContainer),a.render()};return f}var e=a("../../plotly").Fx.loneUnhover;b.exports=d},{"../../plotly":1070}],1091:[function(a,b,c){"use strict";function d(a,b){this.element=a,this.plot=b,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxStart=[0,0],this.boxEnd=[0,0]}function e(a){var b=a.mouseContainer,c=a.glplot,e=new d(b,c);return e.mouseListener=f(b,function(b,d,f){function g(b,c,d){var f=Math.min(c,d),g=Math.max(c,d);f!==g?(b[0]=f,b[1]=g,e.dataBox=b):(a.selectBox.selectBox=[0,0,1,1],a.glplot.setDirty())}var h=a.xaxis.range,i=a.yaxis.range,j=c.viewBox,k=e.lastPos[0],l=e.lastPos[1];switch(d*=c.pixelRatio,f*=c.pixelRatio,f=j[3]-j[1]-f,a.fullLayout.dragmode){case"zoom":if(b){var m=d/(j[2]-j[0])*(h[1]-h[0])+h[0],n=f/(j[3]-j[1])*(i[1]-i[0])+i[0];e.boxEnabled||(e.boxStart[0]=m,e.boxStart[1]=n),e.boxEnd[0]=m,e.boxEnd[1]=n,e.boxEnabled=!0}else e.boxEnabled&&(g(h,e.boxStart[0],e.boxEnd[0]),g(i,e.boxStart[1],e.boxEnd[1]),e.boxEnabled=!1);break;case"pan":if(e.boxEnabled=!1,b){var o=(k-d)*(h[1]-h[0])/(c.viewBox[2]-c.viewBox[0]),p=(l-f)*(i[1]-i[0])/(c.viewBox[3]-c.viewBox[1]);h[0]+=o,h[1]+=o,i[0]+=p,i[1]+=p,e.lastInputTime=Date.now(),a.cameraChanged()}}e.lastPos[0]=d,e.lastPos[1]=f}),e.wheelListener=g(b,function(b,d){var f=a.xaxis.range,g=a.yaxis.range,h=c.viewBox,i=e.lastPos[0],j=e.lastPos[1];switch(a.fullLayout.dragmode){case"zoom":break;case"pan":var k=Math.exp(.1*d/(h[3]-h[1])),l=i/(h[2]-h[0])*(f[1]-f[0])+f[0],m=j/(h[3]-h[1])*(g[1]-g[0])+g[0];f[0]=(f[0]-l)*k+l,f[1]=(f[1]-l)*k+l,g[0]=(g[0]-m)*k+m,g[1]=(g[1]-m)*k+m,e.lastInputTime=Date.now(),a.cameraChanged();
}return!0}),e}var f=a("mouse-change"),g=a("mouse-wheel");b.exports=e},{"mouse-change":960,"mouse-wheel":964}],1092:[function(a,b,c){"use strict";function d(a){this.scene=a,this.gl=a.gl,this.pixelRatio=a.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0]}function e(a){return new d(a)}var f=a("../../plotly"),g=a("../../lib/html2unicode"),h=a("../../lib/str2rgbarray"),i=d.prototype,j=["xaxis","yaxis"];i.merge=function(a){this.titleEnable=!1,this.backgroundColor=h(a.plot_bgcolor);var b,c,d,e,f,i,k,l,m,n,o;for(n=0;n<2;++n){for(b=j[n],c=a[this.scene[b]._name],d=/Click to enter .+ title/.test(c.title)?"":c.title,o=0;o<=2;o+=2)this.labelEnable[n+o]=!1,this.labels[n+o]=g(d),this.labelColor[n+o]=h(c.titlefont.color),this.labelFont[n+o]=c.titlefont.family,this.labelSize[n+o]=c.titlefont.size,this.labelPad[n+o]=this.getLabelPad(b,c),this.tickEnable[n+o]=!1,this.tickColor[n+o]=h((c.tickfont||{}).color),this.tickAngle[n+o]="auto"===c.tickangle?0:Math.PI*-c.tickangle/180,this.tickPad[n+o]=this.getTickPad(c),this.tickMarkLength[n+o]=0,this.tickMarkWidth[n+o]=c.tickwidth||0,this.tickMarkColor[n+o]=h(c.tickcolor),this.borderLineEnable[n+o]=!1,this.borderLineColor[n+o]=h(c.linecolor),this.borderLineWidth[n+o]=c.linewidth||0;k=this.hasSharedAxis(c),f=this.hasAxisInDfltPos(b,c)&&!k,i=this.hasAxisInAltrPos(b,c)&&!k,e=c.mirror||!1,l=k?String(e).indexOf("all")!==-1:!!e,m=k?"allticks"===e:String(e).indexOf("ticks")!==-1,f?this.labelEnable[n]=!0:i&&(this.labelEnable[n+2]=!0),f?this.tickEnable[n]=c.showticklabels:i&&(this.tickEnable[n+2]=c.showticklabels),(f||l)&&(this.borderLineEnable[n]=c.showline),(i||l)&&(this.borderLineEnable[n+2]=c.showline),(f||m)&&(this.tickMarkLength[n]=this.getTickMarkLength(c)),(i||m)&&(this.tickMarkLength[n+2]=this.getTickMarkLength(c)),this.gridLineEnable[n]=c.showgrid,this.gridLineColor[n]=h(c.gridcolor),this.gridLineWidth[n]=c.gridwidth,this.zeroLineEnable[n]=c.zeroline,this.zeroLineColor[n]=h(c.zerolinecolor),this.zeroLineWidth[n]=c.zerolinewidth}},i.hasSharedAxis=function(a){var b=this.scene,c=f.Plots.getSubplotIds(b.fullLayout,"gl2d"),d=f.Axes.findSubplotsWithAxis(c,a);return 0!==d.indexOf(b.id)},i.hasAxisInDfltPos=function(a,b){var c=b.side;return"xaxis"===a?"bottom"===c:"yaxis"===a?"left"===c:void 0},i.hasAxisInAltrPos=function(a,b){var c=b.side;return"xaxis"===a?"top"===c:"yaxis"===a?"right"===c:void 0},i.getLabelPad=function(a,b){var c=1.5,d=b.titlefont.size,e=b.showticklabels;return"xaxis"===a?"top"===b.side?-10+d*(c+(e?1:0)):-10+d*(c+(e?.5:0)):"yaxis"===a?"right"===b.side?10+d*(c+(e?1:.5)):10+d*(c+(e?.5:0)):void 0},i.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15},i.getTickMarkLength=function(a){if(!a.ticks)return 0;var b=a.ticklen;return"inside"===a.ticks?-b:b},b.exports=e},{"../../lib/html2unicode":1052,"../../lib/str2rgbarray":1063,"../../plotly":1070}],1093:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("./scene2d"),f=d.Plots;c.name="gl2d",c.attr=["xaxis","yaxis"],c.idRoot=["x","y"],c.attributes=a("../cartesian/attributes"),c.plot=function(a){for(var b=a._fullLayout,c=a._fullData,d=f.getSubplotIds(b,"gl2d"),g=0;g<d.length;g++){var h=d[g],i=b._plots[h],j=f.getSubplotData(c,"gl2d",h),k=i._scene2d;void 0===k&&(k=new e({container:a.querySelector(".gl-container"),id:h,staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},b),i._scene2d=k),k.plot(j,b,a.layout)}}},{"../../plotly":1070,"../cartesian/attributes":1072,"./scene2d":1094}],1094:[function(a,b,c){"use strict";function d(a,b){this.container=a.container,this.pixelRatio=a.plotGlPixelRatio||window.devicePixelRatio,this.id=a.id,this.staticPlot=!!a.staticPlot,this.fullLayout=b,this.updateAxes(b),this.makeFramework(),this.glplotOptions=l(this),this.glplotOptions.merge(b),this.glplot=i(this.glplotOptions),this.camera=m(this),this.traces={},this.spikes=j(this.glplot),this.selectBox=k(this.glplot,{innerFill:!1,outerFill:!0}),this.pickResult=null,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw()}function e(a,b){for(var c=0;c<2;++c){var d=a[c],e=b[c];if(d.length!==e.length)return!0;for(var f=0;f<d.length;++f)if(d[f].x!==e[f].x)return!0}return!1}var f,g,h=a("../../plotly"),i=a("gl-plot2d"),j=a("gl-spikes2d"),k=a("gl-select-box"),l=a("./convert"),m=a("./camera"),n=a("../../traces/scattergl/convert"),o=a("../../lib/html2unicode"),p=a("../../lib/show_no_webgl_msg"),q=["xaxis","yaxis"];b.exports=d;var r=d.prototype;r.makeFramework=function(){if(this.staticPlot){if(!g){f=document.createElement("canvas");try{g=f.getContext("webgl",{preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0})}catch(a){throw new Error(["Error creating static canvas/context for image server"].join(" "))}}this.canvas=f,this.gl=g}else{var b,c=document.createElement("canvas"),d={premultipliedAlpha:!0};try{b=c.getContext("webgl",d)}catch(a){}if(!b)try{b=c.getContext("experimental-webgl",d)}catch(a){}b||p(this),this.canvas=c,this.gl=b}var e=this.canvas,h=this.pixelRatio,i=this.fullLayout;e.width=0|Math.ceil(h*i.width),e.height=0|Math.ceil(h*i.height),e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style["pointer-events"]="none";var j=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");j.style.position="absolute",j.style.top=j.style.left="0px",j.style.width=j.style.height="100%",j.style["z-index"]=20,j.style["pointer-events"]="none";var k=this.mouseContainer=document.createElement("div");k.style.position="absolute";var l=this.container;l.appendChild(e),l.appendChild(j),l.appendChild(k)},r.toImage=function(a){a||(a="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(f),this.glplot.setDirty(!0),this.glplot.draw();var b=this.glplot.gl,c=b.drawingBufferWidth,d=b.drawingBufferHeight;b.bindFramebuffer(b.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);b.readPixels(0,0,c,d,b.RGBA,b.UNSIGNED_BYTE,e);for(var g=0,h=d-1;g<h;++g,--h)for(var i=0;i<c;++i)for(var j=0;j<4;++j){var k=e[4*(c*g+i)+j];e[4*(c*g+i)+j]=e[4*(c*h+i)+j],e[4*(c*h+i)+j]=k}var l=document.createElement("canvas");l.width=c,l.height=d;var m=l.getContext("2d"),n=m.createImageData(c,d);n.data.set(e),m.putImageData(n,0,0);var o;switch(a){case"jpeg":o=l.toDataURL("image/jpeg");break;case"webp":o=l.toDataURL("image/webp");break;default:o=l.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(f),o},r.computeTickMarks=function(){this.xaxis._length=this.glplot.viewBox[2]-this.glplot.viewBox[0],this.yaxis._length=this.glplot.viewBox[3]-this.glplot.viewBox[1];for(var a=[h.Axes.calcTicks(this.xaxis),h.Axes.calcTicks(this.yaxis)],b=0;b<2;++b)for(var c=0;c<a[b].length;++c)a[b][c].text=o(a[b][c].text+"").replace(/\n/g," ");return a},r.updateAxes=function(a){var b=h.Axes.subplotMatch,c="xaxis"+this.id.match(b)[1],d="yaxis"+this.id.match(b)[2];this.xaxis=a[c],this.yaxis=a[d]},r.updateFx=function(a){var b=this.fullLayout;b.dragmode=a.dragmode,b.hovermode=a.hovermode},r.cameraChanged=function(){var a=this.camera,b=this.xaxis.range,c=this.yaxis.range;this.glplot.setDataBox([b[0],c[0],b[1],c[1]]);var d=this.computeTickMarks(),f=this.glplotOptions.ticks;e(d,f)&&(this.glplotOptions.ticks=d,this.glplotOptions.dataBox=a.dataBox,this.glplot.update(this.glplotOptions))},r.destroy=function(){this.glplot.dispose()},r.plot=function(a,b){var c,d,e=this.glplot,f=this.pixelRatio;this.fullLayout=b,this.updateAxes(b);var g=b.width,i=b.height,j=0|Math.ceil(f*g),k=0|Math.ceil(f*i),l=this.canvas;l.width===j&&l.height===k||(l.width=j,l.height=k),a?Array.isArray(a)||(a=[a]):a=[];var m,o;for(c=0;c<a.length;++c){if(m=a[c],o=this.traces[m.uid])o.update(m);else switch(m.type){case"scattergl":o=n(this,m)}this.traces[m.uid]=o}var p=Object.keys(this.traces);a:for(c=0;c<p.length;++c){for(d=0;d<a.length;++d)if(a[d].uid===p[c])continue a;o=this.traces[p[c]],o.dispose(),delete this.traces[p[c]]}var r=this.glplotOptions;r.merge(b),r.screenBox=[0,0,g,i];var s=b._size,t=this.xaxis.domain,u=this.yaxis.domain;r.viewBox=[s.l+t[0]*s.w,s.b+u[0]*s.h,g-s.r-(1-t[1])*s.w,i-s.t-(1-u[1])*s.h],this.mouseContainer.style.width=s.w*(t[1]-t[0])+"px",this.mouseContainer.style.height=s.h*(u[1]-u[0])+"px",this.mouseContainer.height=s.h*(u[1]-u[0]),this.mouseContainer.style.left=s.l+t[0]*s.w+"px",this.mouseContainer.style.top=s.t+(1-u[1])*s.h+"px";var v=this.bounds;for(v[0]=v[1]=1/0,v[2]=v[3]=-(1/0),p=Object.keys(this.traces),c=0;c<p.length;++c){o=this.traces[p[c]];for(var w=0;w<2;++w)v[w]=Math.min(v[w],o.bounds[w]),v[w+2]=Math.max(v[w+2],o.bounds[w+2])}var x;for(c=0;c<2;++c)v[c]>v[c+2]&&(v[c]=-1,v[c+2]=1),x=this[q[c]],x._length=r.viewBox[c+2]-r.viewBox[c],h.Axes.doAutoRange(x);r.ticks=this.computeTickMarks();var y=this.xaxis.range,z=this.yaxis.range;r.dataBox=[y[0],z[0],y[1],z[1]],r.merge(b),e.update(r)},r.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var a=this.glplot,b=this.camera,c=b.mouseListener,d=this.fullLayout;this.cameraChanged();var e=c.x*a.pixelRatio,f=this.canvas.height-a.pixelRatio*c.y;if(b.boxEnabled&&"zoom"===d.dragmode)this.selectBox.enabled=!0,this.selectBox.selectBox=[Math.min(b.boxStart[0],b.boxEnd[0]),Math.min(b.boxStart[1],b.boxEnd[1]),Math.max(b.boxStart[0],b.boxEnd[0]),Math.max(b.boxStart[1],b.boxEnd[1])],a.setDirty();else{this.selectBox.enabled=!1;var g=d._size,i=this.xaxis.domain,j=this.yaxis.domain,k=a.pick(e/a.pixelRatio+g.l+i[0]*g.w,f/a.pixelRatio-(g.t+(1-j[1])*g.h));if(k&&d.hovermode){var l=k.object._trace.handlePick(k);if(l&&(!this.lastPickResult||this.lastPickResult.trace!==l.trace||this.lastPickResult.dataCoord[0]!==l.dataCoord[0]||this.lastPickResult.dataCoord[1]!==l.dataCoord[1])){var m=this.lastPickResult=l;this.spikes.update({center:k.dataCoord}),m.screenCoord=[((a.viewBox[2]-a.viewBox[0])*(k.dataCoord[0]-a.dataBox[0])/(a.dataBox[2]-a.dataBox[0])+a.viewBox[0])/a.pixelRatio,(this.canvas.height-(a.viewBox[3]-a.viewBox[1])*(k.dataCoord[1]-a.dataBox[1])/(a.dataBox[3]-a.dataBox[1])-a.viewBox[1])/a.pixelRatio];var n=m.hoverinfo;if("all"!==n){var o=n.split("+");o.indexOf("x")===-1&&(m.traceCoord[0]=void 0),o.indexOf("y")===-1&&(m.traceCoord[1]=void 0),o.indexOf("text")===-1&&(m.textLabel=void 0),o.indexOf("name")===-1&&(m.name=void 0)}h.Fx.loneHover({x:m.screenCoord[0],y:m.screenCoord[1],xLabel:this.hoverFormatter("xaxis",m.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",m.traceCoord[1]),text:m.textLabel,name:m.name,color:m.color},{container:this.svgContainer}),this.lastPickResult={dataCoord:k.dataCoord}}}else!k&&this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,h.Fx.loneUnhover(this.svgContainer))}a.draw()}},r.hoverFormatter=function(a,b){if(void 0!==b){var c=this[a];return h.Axes.tickText(c,c.c2l(b),"hover").text}}},{"../../lib/html2unicode":1052,"../../lib/show_no_webgl_msg":1061,"../../plotly":1070,"../../traces/scattergl/convert":1213,"./camera":1091,"./convert":1092,"gl-plot2d":421,"gl-select-box":896,"gl-spikes2d":897}],1095:[function(a,b,c){"use strict";function d(a,b){a=a||document.body,b=b||{};var c=[.01,1/0];"distanceLimits"in b&&(c[0]=b.distanceLimits[0],c[1]=b.distanceLimits[1]),"zoomMin"in b&&(c[0]=b.zoomMin),"zoomMax"in b&&(c[1]=b.zoomMax);var d=f({center:b.center||[0,0,0],up:b.up||[0,1,0],eye:b.eye||[0,0,10],mode:b.mode||"orbit",distanceLimits:c}),i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=0,k=a.clientWidth,l=a.clientHeight,m={keyBindingMode:"rotate",view:d,element:a,delay:b.delay||16,rotateSpeed:b.rotateSpeed||1,zoomSpeed:b.zoomSpeed||1,translateSpeed:b.translateSpeed||1,flipX:!!b.flipX,flipY:!!b.flipY,modes:d.modes,tick:function(){var b=e(),c=this.delay,f=b-2*c;d.idle(b-c),d.recalcMatrix(f),d.flush(b-(100+2*c));for(var g=!0,h=d.computedMatrix,m=0;m<16;++m)g=g&&i[m]===h[m],i[m]=h[m];var n=a.clientWidth===k&&a.clientHeight===l;return k=a.clientWidth,l=a.clientHeight,g?!n:(j=Math.exp(d.computedRadius[0]),!0)},lookAt:function(a,b,c){d.lookAt(d.lastT(),a,b,c)},rotate:function(a,b,c){d.rotate(d.lastT(),a,b,c)},pan:function(a,b,c){d.pan(d.lastT(),a,b,c)},translate:function(a,b,c){d.translate(d.lastT(),a,b,c)}};Object.defineProperties(m,{matrix:{get:function(){return d.computedMatrix},set:function(a){return d.setMatrix(d.lastT(),a),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(a){var b=d.computedUp.slice(),c=d.computedEye.slice(),f=d.computedCenter.slice();if(d.setMode(a),"turntable"===a){var g=e();d._active.lookAt(g,c,f,b),d._active.lookAt(g+500,c,f,[0,0,1]),d._active.flush(g)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(a){return d.lookAt(d.lastT(),null,a),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(a){return d.lookAt(d.lastT(),a),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(a){return d.lookAt(d.lastT(),null,null,a),d.computedUp},enumerable:!0},distance:{get:function(){return j},set:function(a){return d.setDistance(d.lastT(),a),a},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(c)},set:function(a){return d.setDistanceLimits(a),a},enumerable:!0}}),a.addEventListener("contextmenu",function(a){return a.preventDefault(),!1});var n=0,o=0;return g(a,function(b,c,f,g){var h="rotate"===m.keyBindingMode,i="pan"===m.keyBindingMode,k="zoom"===m.keyBindingMode,l=!!g.control,p=!!g.alt,q=!!g.shift,r=!!(1&b),s=!!(2&b),t=!!(4&b),u=1/a.clientHeight,v=u*(c-n),w=u*(f-o),x=m.flipX?1:-1,y=m.flipY?1:-1,z=e(),A=Math.PI*m.rotateSpeed;if((h&&r&&!l&&!p&&!q||r&&!l&&!p&&q)&&d.rotate(z,x*A*v,-y*A*w,0),(i&&r&&!l&&!p&&!q||s||r&&l&&!p&&!q)&&d.pan(z,-m.translateSpeed*v*j,m.translateSpeed*w*j,0),k&&r&&!l&&!p&&!q||t||r&&!l&&p&&!q){var B=-m.zoomSpeed*w/window.innerHeight*(z-d.lastT())*100;d.pan(z,0,0,j*(Math.exp(B)-1))}return n=c,o=f,!0}),h(a,function(a,b){var c=m.flipX?1:-1,f=m.flipY?1:-1,g=e();if(Math.abs(a)>Math.abs(b))d.rotate(g,0,0,-a*c*Math.PI*m.rotateSpeed/window.innerWidth);else{var h=-m.zoomSpeed*f*b/window.innerHeight*(g-d.lastT())/100;d.pan(g,0,0,j*(Math.exp(h)-1))}},!0),m}b.exports=d;var e=a("right-now"),f=a("3d-view"),g=a("mouse-change"),h=a("mouse-wheel")},{"3d-view":28,"mouse-change":960,"mouse-wheel":964,"right-now":990}],1096:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("./scene"),f=d.Plots,g=["xaxis","yaxis","zaxis"];c.name="gl3d",c.attr="scene",c.idRoot="scene",c.attributes=a("./layout/attributes"),c.layoutAttributes=a("./layout/layout_attributes"),c.supplyLayoutDefaults=a("./layout/defaults"),c.plot=function(a){var b=a._fullLayout,c=a._fullData,d=f.getSubplotIds(b,"gl3d");b._paperdiv.style({width:b.width+"px",height:b.height+"px"}),a._context.setBackground(a,b.paper_bgcolor);for(var g=0;g<d.length;g++){var h=d[g],i=f.getSubplotData(c,"gl3d",h),j=b[h]._scene;void 0===j&&(j=new e({container:a.querySelector(".gl-container"),id:h,staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio},b),b[h]._scene=j),j.plot(i,b,a.layout)}},c.cleanId=function(a){if(a.match(/^scene[0-9]*$/)){var b=a.substr(5);return"1"===b&&(b=""),"scene"+b}},c.setConvert=a("./set_convert"),c.initAxes=function(a){var b=a._fullLayout;delete b.xaxis,delete b.yaxis;for(var c=d.Plots.getSubplotIds(b,"gl3d"),e=0;e<c.length;++e)for(var f=c[e],h=b[f],i=0;i<3;++i){var j=g[i],k=h[j];k._td=a}}},{"../../plotly":1070,"./layout/attributes":1097,"./layout/defaults":1101,"./layout/layout_attributes":1102,"./scene":1106,"./set_convert":1107}],1097:[function(a,b,c){b.exports={scene:{valType:"sceneid",dflt:"scene"}}},{}],1098:[function(a,b,c){var d=a("../../cartesian/layout_attributes"),e=a("../../../lib/extend").extendFlat;b.exports={showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:"rgb(0,0,0)"},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},title:d.title,titlefont:d.titlefont,type:d.type,autorange:d.autorange,rangemode:d.rangemode,range:d.range,fixedrange:d.fixedrange,tickmode:d.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:d.ticks,mirror:d.mirror,ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,showticklabels:d.showticklabels,tickfont:d.tickfont,tickangle:d.tickangle,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,showexponent:d.showexponent,exponentformat:d.exponentformat,tickformat:d.tickformat,hoverformat:d.hoverformat,showline:d.showline,linecolor:d.linecolor,linewidth:d.linewidth,showgrid:d.showgrid,gridcolor:e({},d.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:d.gridwidth,zeroline:d.zeroline,zerolinecolor:d.zerolinecolor,zerolinewidth:d.zerolinewidth}},{"../../../lib/extend":1049,"../../cartesian/layout_attributes":1077}],1099:[function(a,b,c){"use strict";var d=a("../../../plotly"),e=a("./axis_attributes"),f=["xaxis","yaxis","zaxis"],g=function(){};b.exports=function(a,b,c){function h(a,b){return d.Lib.coerce(i,j,e,a,b)}for(var i,j,k=d.Axes,l=0;l<f.length;l++){var m=f[l];i=a[m]||{},j={_id:m[0]+c.scene,_name:m},b[m]=j=k.handleAxisDefaults(i,j,h,{font:c.font,letter:m[0],data:c.data,showGrid:!0}),h("gridcolor"),h("title",m[0]),j.setScale=g,h("showspikes")&&(h("spikesides"),h("spikethickness"),h("spikecolor")),h("showbackground")&&h("backgroundcolor"),h("showaxeslabels")}}},{"../../../plotly":1070,"./axis_attributes":1098}],1100:[function(a,b,c){"use strict";function d(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=i(this.tickPad),this._defaultLabelPad=i(this.labelPad),this._defaultLineTickLength=i(this.lineTickLength)}function e(a){var b=new d;return b.merge(a),b}var f=a("arraytools"),g=a("../../../lib/html2unicode"),h=a("../../../lib/str2rgbarray"),i=f.copy1D,j=["xaxis","yaxis","zaxis"],k=d.prototype;k.merge=function(a){for(var b=this,c=0;c<3;++c){var d=a[j[c]];b.labels[c]=g(d.title),"titlefont"in d&&(d.titlefont.color&&(b.labelColor[c]=h(d.titlefont.color)),d.titlefont.family&&(b.labelFont[c]=d.titlefont.family),d.titlefont.size&&(b.labelSize[c]=d.titlefont.size)),"showline"in d&&(b.lineEnable[c]=d.showline),"linecolor"in d&&(b.lineColor[c]=h(d.linecolor)),"linewidth"in d&&(b.lineWidth[c]=d.linewidth),"showgrid"in d&&(b.gridEnable[c]=d.showgrid),"gridcolor"in d&&(b.gridColor[c]=h(d.gridcolor)),"gridwidth"in d&&(b.gridWidth[c]=d.gridwidth),"log"===d.type?b.zeroEnable[c]=!1:"zeroline"in d&&(b.zeroEnable[c]=d.zeroline),"zerolinecolor"in d&&(b.zeroLineColor[c]=h(d.zerolinecolor)),"zerolinewidth"in d&&(b.zeroLineWidth[c]=d.zerolinewidth),"ticks"in d&&d.ticks?b.lineTickEnable[c]=!0:b.lineTickEnable[c]=!1,"ticklen"in d&&(b.lineTickLength[c]=b._defaultLineTickLength[c]=d.ticklen),"tickcolor"in d&&(b.lineTickColor[c]=h(d.tickcolor)),"tickwidth"in d&&(b.lineTickWidth[c]=d.tickwidth),"tickangle"in d&&(b.tickAngle[c]="auto"===d.tickangle?0:Math.PI*-d.tickangle/180),"showticklabels"in d&&(b.tickEnable[c]=d.showticklabels),"tickfont"in d&&(d.tickfont.color&&(b.tickColor[c]=h(d.tickfont.color)),d.tickfont.family&&(b.tickFont[c]=d.tickfont.family),d.tickfont.size&&(b.tickSize[c]=d.tickfont.size)),"mirror"in d?["ticks","all","allticks"].indexOf(d.mirror)!==-1?(b.lineTickMirror[c]=!0,b.lineMirror[c]=!0):d.mirror===!0?(b.lineTickMirror[c]=!1,b.lineMirror[c]=!0):(b.lineTickMirror[c]=!1,b.lineMirror[c]=!1):b.lineMirror[c]=!1,"showbackground"in d&&d.showbackground!==!1?(b.backgroundEnable[c]=!0,b.backgroundColor[c]=h(d.backgroundcolor)):b.backgroundEnable[c]=!1}},b.exports=e},{"../../../lib/html2unicode":1052,"../../../lib/str2rgbarray":1063,arraytools:47}],1101:[function(a,b,c){"use strict";var d=a("../../../plotly"),e=a("./layout_attributes"),f=a("./axis_defaults");b.exports=function(a,b,c){function g(a,b){return d.Lib.coerce(k,m,e,a,b)}if(b._hasGL3D){var h,i=d.Plots.getSubplotIdsInData(c,"gl3d");delete b.xaxis,delete b.yaxis;var j=i.length;for(h=0;h<j;++h){var k,l=i[h];void 0!==a[l]?k=a[l]:a[l]=k={};var m=b[l]||{};g("bgcolor");for(var n=Object.keys(e.camera),o=0;o<n.length;o++)g("camera."+n[o]+".x"),g("camera."+n[o]+".y"),g("camera."+n[o]+".z");g("domain.x",[h/j,(h+1)/j]),g("domain.y");var p=!!g("aspectratio.x")&&!!g("aspectratio.y")&&!!g("aspectratio.z"),q=p?"manual":"auto",r=g("aspectmode",q);p||(k.aspectratio=m.aspectratio={x:1,y:1,z:1},"manual"===r&&(m.aspectmode="auto")),f(k,m,{font:b.font,scene:l,data:c}),b[l]=m}}}},{"../../../plotly":1070,"./axis_defaults":1099,"./layout_attributes":1102}],1102:[function(a,b,c){"use strict";function d(a,b,c){return{x:{valType:"number",dflt:a},y:{valType:"number",dflt:b},z:{valType:"number",dflt:c}}}var e=a("./axis_attributes"),f=a("../../../lib/extend").extendFlat;b.exports={bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},camera:{up:f(d(0,0,1),{}),center:f(d(0,0,0),{}),eye:f(d(1.25,1.25,1.25),{})},domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto"},aspectratio:{x:{valType:"number",min:0},y:{valType:"number",min:0},z:{valType:"number",min:0}},xaxis:e,yaxis:e,zaxis:e,_deprecated:{cameraposition:{valType:"info_array"}}}},{"../../../lib/extend":1049,"./axis_attributes":1098}],1103:[function(a,b,c){"use strict";function d(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}function e(a){var b=new d;return b.merge(a),b}var f=a("../../../lib/str2rgbarray"),g=["xaxis","yaxis","zaxis"],h=d.prototype;h.merge=function(a){for(var b=0;b<3;++b){var c=a[g[b]];this.enabled[b]=c.showspikes,this.colors[b]=f(c.spikecolor),this.drawSides[b]=c.spikesides,this.lineWidth[b]=c.spikethickness}},b.exports=e},{"../../../lib/str2rgbarray":1063}],1104:[function(a,b,c){"use strict";function d(a){for(var b=new Array(3),c=0;c<3;++c){for(var d=a[c],e=new Array(d.length),f=0;f<d.length;++f)e[f]=d[f].x;b[c]=e}return b}function e(a){for(var b=a.axesOptions,c=a.glplot.axesPixels,e=a.fullSceneLayout,j=[[],[],[]],k=0;k<3;++k){var l=e[h[k]];if(l._length=(c[k].hi-c[k].lo)*c[k].pixelsPerDataUnit/a.dataScale[k],Math.abs(l._length)===1/0)j[k]=[];else{l.range[0]=c[k].lo/a.dataScale[k],l.range[1]=c[k].hi/a.dataScale[k],l._m=1/(a.dataScale[k]*c[k].pixelsPerDataUnit),l.range[0]===l.range[1]&&(l.range[0]-=1,l.range[1]+=1);var m=l.tickmode;if("auto"===l.tickmode){l.tickmode="linear";var n=l.nticks||f.Lib.constrain(l._length/40,4,9);f.Axes.autoTicks(l,Math.abs(l.range[1]-l.range[0])/n)}for(var o=f.Axes.calcTicks(l),p=0;p<o.length;++p)o[p].x=o[p].x*a.dataScale[k],o[p].text=g(o[p].text);j[k]=o,l.tickmode=m}}b.ticks=j;for(var k=0;k<3;++k){i[k]=.5*(a.glplot.bounds[0][k]+a.glplot.bounds[1][k]);for(var p=0;p<2;++p)b.bounds[p][k]=a.glplot.bounds[p][k]}a.contourLevels=d(j)}b.exports=e;var f=a("../../../plotly"),g=a("../../../lib/html2unicode"),h=["xaxis","yaxis","zaxis"],i=[0,0,0]},{"../../../lib/html2unicode":1052,"../../../plotly":1070}],1105:[function(a,b,c){"use strict";function d(a,b){var c,d,e=[0,0,0,0];for(c=0;c<4;++c)for(d=0;d<4;++d)e[d]+=a[4*c+d]*b[c];return e}function e(a,b){var c=d(a.projection,d(a.view,d(a.model,[b[0],b[1],b[2],1])));return c}b.exports=e},{}],1106:[function(a,b,c){"use strict";function d(a){function b(b,c){if(void 0!==c){if("string"==typeof c)return c;var d=a.fullSceneLayout[b];return k.Axes.tickText(d,d.c2l(c),"hover").text}}var c=a.svgContainer,d=a.container.getBoundingClientRect(),e=d.width,f=d.height;c.setAttributeNS(null,"viewBox","0 0 "+e+" "+f),c.setAttributeNS(null,"width",e),c.setAttributeNS(null,"height",f),w(a),a.glplot.axes.update(a.axesOptions);for(var g=Object.keys(a.traces),h=null,i=null,j=a.glplot.selection,l=0;l<g.length;++l){var m=a.traces[g[l]];m.handlePick(j)&&(h=m,i=a.glplot.selection.index),m.setContourLevels&&m.setContourLevels()}if(null!==h){var n=s(a.glplot.cameraParams,j.dataCoordinate),o=h.data.hoverinfo;if("all"!==o){var p=o.split("+");p.indexOf("x")===-1&&(j.traceCoordinate[0]=void 0),p.indexOf("y")===-1&&(j.traceCoordinate[1]=void 0),p.indexOf("z")===-1&&(j.traceCoordinate[2]=void 0),p.indexOf("text")===-1&&(j.textLabel=void 0),p.indexOf("name")===-1&&(h.name=void 0)}k.Fx.loneHover({x:(.5+.5*n[0]/n[3])*e,y:(.5-.5*n[1]/n[3])*f,xLabel:b("xaxis",j.traceCoordinate[0]),yLabel:b("yaxis",j.traceCoordinate[1]),zLabel:b("zaxis",j.traceCoordinate[2]),text:j.textLabel,name:h.name,color:h.color},{container:c})}else k.Fx.loneUnhover(c)}function e(a,b,c,e){var f={canvas:c,gl:e,container:a.container,axes:a.axesOptions,spikes:a.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1};if(a.staticMode){if(!j){i=document.createElement("canvas");try{j=i.getContext("webgl",{preserveDrawingBuffer:!0,premultipliedAlpha:!0})}catch(g){throw new Error("error creating static canvas/context for image server")}}f.pixelRatio=a.pixelRatio,f.gl=j,f.canvas=i}try{a.glplot=l(f)}catch(g){q(a)}if(a.staticMode||a.glplot.canvas.addEventListener("webglcontextlost",function(a){console.log("lost context"),a.preventDefault()}),!a.camera){var h=b.scene.camera;a.camera=r(a.container,{center:[h.center.x,h.center.y,h.center.z],eye:[h.eye.x,h.eye.y,h.eye.z],up:[h.up.x,h.up.y,h.up.z],zoomMin:.1,zoomMax:100,mode:"orbit"})}return a.glplot.mouseListener.enabled=!1,a.glplot.camera=a.camera,a.glplot.oncontextloss=function(){a.recoverContext()},a.glplot.onrender=d.bind(null,a),a.traces={},!0}function f(a,b){var c=document.createElement("div"),d=a.container,f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.style.position="absolute",f.style.top=f.style.left="0px",f.style.width=f.style.height="100%",f.style["z-index"]=20,f.style["pointer-events"]="none",c.appendChild(f),this.svgContainer=f,c.id=a.id,c.style.position="absolute",c.style.top=c.style.left="0px",c.style.width=c.style.height="100%",d.appendChild(c),this.fullLayout=b,this.id=a.id||"scene",this.plotArgs=[[],{},{}],this.axesOptions=u(b[this.id]),this.spikeOptions=v(b[this.id]),this.container=c,this.staticMode=!!a.staticPlot,this.pixelRatio=a.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],!e(this,b)}function g(a,b,c,d){for(var e=0;e<b.length;++e)if(Array.isArray(b[e]))for(var f=0;f<b[e].length;++f){var g=a.d2l(b[e][f]);!isNaN(g)&&isFinite(g)&&(d[0][c]=Math.min(d[0][c],g),d[1][c]=Math.max(d[1][c],g))}else{var g=a.d2l(b[e]);!isNaN(g)&&isFinite(g)&&(d[0][c]=Math.min(d[0][c],g),d[1][c]=Math.max(d[1][c],g))}}function h(a,b,c){var d=a.fullSceneLayout;g(d.xaxis,b.x,0,c),g(d.yaxis,b.y,1,c),g(d.zaxis,b.z,2,c)}var i,j,k=a("../../plotly"),l=a("gl-plot3d"),m=a("../../traces/scatter3d/convert"),n=a("../../traces/surface/convert"),o=a("../../traces/mesh3d/convert"),p=a("../../lib/str2rgbarray"),q=a("../../lib/show_no_webgl_msg"),r=a("./camera"),s=a("./project"),t=a("./set_convert"),u=a("./layout/convert"),v=a("./layout/spikes"),w=a("./layout/tick_marks"),x=f.prototype;x.recoverContext=function(){function a(){return c.isContextLost()?void requestAnimationFrame(a):e(b,b.fullLayout,d,c)?void b.plot.apply(b,b.plotArgs):void console.error("catastrophic/unrecoverable webgl error.  context lost.")}var b=this,c=this.glplot.gl,d=this.glplot.canvas;this.glplot.dispose(),requestAnimationFrame(a)};var y=["xaxis","yaxis","zaxis"];x.plot=function(a,b,c){if(this.plotArgs=[a,b,c],!this.glplot.contextLost){var d,e,f,g,i=b[this.id],j=c[this.id];for(i.bgcolor?this.glplot.clearColor=p(i.bgcolor):this.glplot.clearColor=[0,0,0,0],this.glplot.snapToData=!0,this.fullSceneLayout=i,this.glplotLayout=i,this.axesOptions.merge(i),this.spikeOptions.merge(i),this.handleDragmode(b.dragmode),this.glplot.update({}),f=0;f<3;++f){var k=i[y[f]];t(k)}a?Array.isArray(a)||(a=[a]):a=[];for(var l=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],f=0;f<a.length;++f){var d=a[f];d.visible===!0&&h(this,d,l)}for(var q=[1,1,1],g=0;g<3;++g)l[0][g]>l[1][g]?q[g]=1:l[1][g]===l[0][g]?q[g]=1:q[g]=1/(l[1][g]-l[0][g]);this.dataScale=q;for(var f=0;f<a.length;++f)if(d=a[f],d.visible===!0){if(e=this.traces[d.uid])e.update(d);else{switch(d.type){case"scatter3d":e=m(this,d);break;case"surface":e=n(this,d);break;case"mesh3d":e=o(this,d)}this.traces[d.uid]=e}e.name=d.name}var r=Object.keys(this.traces);a:for(f=0;f<r.length;++f){for(g=0;g<a.length;++g)if(a[g].uid===r[f]&&a[g].visible===!0)continue a;e=this.traces[r[f]],e.dispose(),delete this.traces[r[f]]}var s=[[0,0,0],[0,0,0]],u=[],v={};for(f=0;f<3;++f){var k=i[y[f]],w=k.type;if(w in v?(v[w].acc*=q[f],v[w].count+=1):v[w]={acc:q[f],count:1},k.autorange){for(s[0][f]=1/0,s[1][f]=-(1/0),g=0;g<this.glplot.objects.length;++g){var x=this.glplot.objects[g].bounds;s[0][f]=Math.min(s[0][f],x[0][f]/q[f]),s[1][f]=Math.max(s[1][f],x[1][f]/q[f])}if("rangemode"in k&&"tozero"===k.rangemode&&(s[0][f]=Math.min(s[0][f],0),s[1][f]=Math.max(s[1][f],0)),s[0][f]>s[1][f])s[0][f]=-1,s[1][f]=1;else{var z=s[1][f]-s[0][f];s[0][f]-=z/32,s[1][f]+=z/32}}else{var A=i[y[f]].range;s[0][f]=A[0],s[1][f]=A[1]}s[0][f]===s[1][f]&&(s[0][f]-=1,s[1][f]+=1),u[f]=s[1][f]-s[0][f],this.glplot.bounds[0][f]=s[0][f]*q[f],this.glplot.bounds[1][f]=s[1][f]*q[f]}for(var B=[1,1,1],f=0;f<3;++f){var k=i[y[f]],w=k.type,C=v[w];B[f]=Math.pow(C.acc,1/C.count)/q[f]}var D,E=4;if("auto"===i.aspectmode)D=Math.max.apply(null,B)/Math.min.apply(null,B)<=E?B:[1,1,1];else if("cube"===i.aspectmode)D=[1,1,1];else if("data"===i.aspectmode)D=B;else{if("manual"!==i.aspectmode)throw new Error("scene.js aspectRatio was not one of the enumerated types");var F=i.aspectratio;D=[F.x,F.y,F.z]}i.aspectratio.x=j.aspectratio.x=D[0],i.aspectratio.y=j.aspectratio.y=D[1],i.aspectratio.z=j.aspectratio.z=D[2],this.glplot.aspect=D;var G=i.domain||null,H=b._size||null;if(G&&H){var I=this.container.style;I.position="absolute",I.left=H.l+G.x[0]*H.w+"px",I.top=H.t+(1-G.y[1])*H.h+"px",I.width=H.w*(G.x[1]-G.x[0])+"px",
I.height=H.h*(G.y[1]-G.y[0])+"px"}}},x.destroy=function(){this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null},x.setCameraToDefault=function(){this.glplot.camera.lookAt([1.25,1.25,1.25],[0,0,0],[0,0,1])},x.getCamera=function(){this.glplot.camera.view.recalcMatrix(this.camera.view.lastT());var a=this.glplot.camera.up,b=this.glplot.camera.center,c=this.glplot.camera.eye;return{up:{x:a[0],y:a[1],z:a[2]},center:{x:b[0],y:b[1],z:b[2]},eye:{x:c[0],y:c[1],z:c[2]}}},x.setCamera=function(a){var b=a.up,c=a.center,d=a.eye;this.glplot.camera.lookAt([d.x,d.y,d.z],[c.x,c.y,c.z],[b.x,b.y,b.z])},x.saveCamera=function(a){function b(a,b,c,d){var e=["up","center","eye"],f=["x","y","z"];return a[e[c]][f[d]]===b[e[c]][f[d]]}var c=this.getCamera(),d=k.Lib.nestedProperty(a,this.id+".camera"),e=d.get(),f=!1;if(void 0===e)f=!0;else for(var g=0;g<3;g++)for(var h=0;h<3;h++)if(!b(c,e,g,h)){f=!0;break}return f&&d.set(c),f},x.handleDragmode=function(a){var b=this.camera;b&&("orbit"===a?(b.mode="orbit",b.keyBindingMode="rotate"):"turntable"===a?(b.up=[0,0,1],b.mode="turntable",b.keyBindingMode="rotate"):b.keyBindingMode=a)},x.toImage=function(a){a||(a="png"),this.staticMode&&this.container.appendChild(i),this.glplot.redraw();var b=this.glplot.gl,c=b.drawingBufferWidth,d=b.drawingBufferHeight;b.bindFramebuffer(b.FRAMEBUFFER,null);var e=new Uint8Array(c*d*4);b.readPixels(0,0,c,d,b.RGBA,b.UNSIGNED_BYTE,e);for(var f=0,g=d-1;f<g;++f,--g)for(var h=0;h<c;++h)for(var j=0;j<4;++j){var k=e[4*(c*f+h)+j];e[4*(c*f+h)+j]=e[4*(c*g+h)+j],e[4*(c*g+h)+j]=k}var l=document.createElement("canvas");l.width=c,l.height=d;var m=l.getContext("2d"),n=m.createImageData(c,d);n.data.set(e),m.putImageData(n,0,0);var o;switch(a){case"jpeg":o=l.toDataURL("image/jpeg");break;case"webp":o=l.toDataURL("image/webp");break;default:o=l.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(i),o},b.exports=f},{"../../lib/show_no_webgl_msg":1061,"../../lib/str2rgbarray":1063,"../../plotly":1070,"../../traces/mesh3d/convert":1184,"../../traces/scatter3d/convert":1205,"../../traces/surface/convert":1218,"./camera":1095,"./layout/convert":1100,"./layout/spikes":1103,"./layout/tick_marks":1104,"./project":1105,"./set_convert":1107,"gl-plot3d":593}],1107:[function(a,b,c){"use strict";var d=a("../../plotly"),e=function(){};b.exports=function(a){d.Axes.setConvert(a),a.setScale=e}},{"../../plotly":1070}],1108:[function(a,b,c){var d=a("../plotly"),e=a("./font_attributes"),f=a("../components/color/attributes"),g=d.Lib.extendFlat;b.exports={font:{family:g({},e.family,{dflt:'"Open Sans", verdana, arial, sans-serif'}),size:g({},e.size,{dflt:12}),color:g({},e.color,{dflt:f.defaultLine})},title:{valType:"string",dflt:"Click to enter Plot title"},titlefont:g({},e,{}),autosize:{valType:"enumerated",values:[!0,!1,"initial"]},width:{valType:"number",min:10,dflt:700},height:{valType:"number",min:10,dflt:450},margin:{l:{valType:"number",min:0,dflt:80},r:{valType:"number",min:0,dflt:80},t:{valType:"number",min:0,dflt:100},b:{valType:"number",min:0,dflt:80},pad:{valType:"number",min:0,dflt:0},autoexpand:{valType:"boolean",dflt:!0}},paper_bgcolor:{valType:"color",dflt:f.background},plot_bgcolor:{valType:"color",dflt:f.background},separators:{valType:"string",dflt:".,"},hidesources:{valType:"boolean",dflt:!1},smith:{valType:"enumerated",values:[!1],dflt:!1},showlegend:{valType:"boolean"},_hasCartesian:{valType:"boolean",dflt:!1},_hasGL3D:{valType:"boolean",dflt:!1},_hasGeo:{valType:"boolean",dflt:!1},_hasPie:{valType:"boolean",dflt:!1},_hasGL2D:{valType:"boolean",dflt:!1},_composedModules:{"*":"Fx"},_nestedModules:{xaxis:"Axes",yaxis:"Axes",scene:"gl3d",geo:"geo",legend:"Legend",annotations:"Annotations",shapes:"Shapes"}}},{"../components/color/attributes":1004,"../plotly":1070,"./font_attributes":1079}],1109:[function(a,b,c){"use strict";function d(a){return"object"==typeof a&&(a=a.type),a}function e(a,b){b.text("");var c=b.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(a._context.linkText+" "+String.fromCharCode(187));if(a._context.sendData)c.on("click",function(){k.sendDataToCloud(a)});else{var d=window.location.pathname.split("/"),e=window.location.search;c.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+d[2].split(".")[0]+"/"+d[1]+e})}}function f(a,b){for(var c,d=k.getSubplotIds(b,"gl3d"),e=0;e<d.length;e++)c=d[e],!a[c]&&b[c]._scene&&b[c]._scene.destroy()}function g(a,b){for(var c,d=Object.keys(b),e=0;e<d.length;++e){var f=d[e];if("_"===f.charAt(0)||"function"==typeof b[f]){if(f in a)continue;a[f]=b[f]}else if(Array.isArray(b[f])&&Array.isArray(a[f])&&b[f].length&&h.Lib.isPlainObject(b[f][0])){if(b[f].length!==a[f].length)throw new Error("relinkPrivateKeys needs equal length arrays");for(c=0;c<b[f].length;c++)g(a[f][c],b[f][c])}else h.Lib.isPlainObject(b[f])&&h.Lib.isPlainObject(a[f])&&(g(a[f],b[f]),Object.keys(a[f]).length||delete a[f])}}var h=a("../plotly"),i=a("d3"),j=a("fast-isnumeric"),k=b.exports={},l=k.modules={},m=k.allTypes=[],n=k.allCategories={},o=k.subplotsRegistry={};k.attributes=a("./attributes"),k.attributes.type.values=m,k.fontAttrs=a("./font_attributes"),k.layoutAttributes=a("./layout_attributes"),k.fontWeight="normal",k.register=function(a,b,c,d){if(l[b])throw new Error("type "+b+" already registered");for(var e={},f=0;f<c.length;f++)e[c[f]]=!0,n[c[f]]=!0;l[b]={module:a,categories:e},d&&Object.keys(d).length&&(l[b].meta=d),m.push(b)},k.getModule=function(a){if(void 0!==a.r)return console.log("Oops, tried to put a polar trace on an incompatible graph of cartesian data. Ignoring this dataset.",a),!1;var b=l[d(a)];return!!b&&b.module},k.traceIs=function(a,b){if(a=d(a),"various"===a)return!1;var c=l[a];return c||(void 0!==a&&console.warn("unrecognized trace type "+a),c=l[k.attributes.type.dflt]),!!c.categories[b]},k.registerSubplot=function(a){function b(a){return new RegExp(f+a+g)}var c=a.name;if(o[c])throw new Error("plot type"+c+" already registered");var d=a.attr,e=a.idRoot,f="^",g="([2-9]|[1-9][0-9]+)?$",h="cartesian"===c||"gl2d"===o;o[c]=a,o[c].attrRegex=h?{x:b(d[0]),y:b(d[1])}:b(d),o[c].idRegex=h?{x:b(e[0]),y:b(e[1])}:b(e)},k.getSubplotIds=function(a,b){if(void 0===k.subplotsRegistry[b])return[];if("cartesian"===b&&!a._hasCartesian)return[];if("gl2d"===b&&!a._hasGL2D)return[];if("cartesian"===b||"gl2d"===b)return Object.keys(a._plots);for(var c,d=k.subplotsRegistry[b].idRegex,e=Object.keys(a),f=[],g=0;g<e.length;g++)c=e[g],d.test(c)&&f.push(c);return f},k.getSubplotIdsInData=function(a,b){if(void 0===k.subplotsRegistry[b])return[];for(var c,d=k.subplotsRegistry[b].attr,e=[],f=0;f<a.length;f++)c=a[f],h.Plots.traceIs(c,b)&&e.indexOf(c[d])===-1&&e.push(c[d]);return e},k.getSubplotData=function(a,b,c){if(void 0===k.subplotsRegistry[b])return[];for(var d,e=k.subplotsRegistry[b].attr,f=[],g=0;g<a.length;g++)if(d=a[g],"gl2d"===b&&k.traceIs(d,"gl2d")){var i=h.Axes.subplotMatch,j="x"+c.match(i)[1],l="y"+c.match(i)[2];d[e[0]]===j&&d[e[1]]===l&&f.push(d)}else d[e]===c&&f.push(d);return f},k.redrawText=function(a){if(!(a._fullLayout._hasGL3D||a.data&&a.data[0]&&a.data[0].r))return new Promise(function(b){setTimeout(function(){h.Annotations.drawAll(a),h.Legend.draw(a),(a.calcdata||[]).forEach(function(a){a[0]&&a[0].t&&a[0].t.cb&&a[0].t.cb()}),b(k.previousPromises(a))},300)})},k.resize=function(a){a&&"none"!==i.select(a).style("display")&&(a._redrawTimer&&clearTimeout(a._redrawTimer),a._redrawTimer=setTimeout(function(){if((a._fullLayout||{}).autosize){var b=a.changed;a.autoplay=!0,h.relayout(a,{autosize:!0}),a.changed=b}},100))},k.previousPromises=function(a){if((a._promises||[]).length)return Promise.all(a._promises).then(function(){a._promises=[]})},k.addLinks=function(a){var b=a._fullLayout,c=b._paper.selectAll("text.js-plot-link-container").data([0]);c.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:h.Color.defaultLine,"pointer-events":"all"}).each(function(){var a=i.select(this);a.append("tspan").classed("js-link-to-tool",!0),a.append("tspan").classed("js-link-spacer",!0),a.append("tspan").classed("js-sourcelinks",!0)});var d=c.node(),f={y:b._paper.attr("height")-9};d&&d.offsetParent&&d.getComputedTextLength()>=b.width-20?(f["text-anchor"]="start",f.x=5):(f["text-anchor"]="end",f.x=b._paper.attr("width")-7),c.attr(f);var g=c.select(".js-link-to-tool"),j=c.select(".js-link-spacer"),k=c.select(".js-sourcelinks");a._context.showSources&&a._context.showSources(a),a._context.showLink&&e(a,g),j.text(g.text()&&k.text()?" - ":"")},k.sendDataToCloud=function(a){a.emit("plotly_beforeexport");var b=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",c=i.select(a).append("div").attr("id","hiddenform").style("display","none"),d=c.append("form").attr({action:b+"/external",method:"post",target:"_blank"}),e=d.append("input").attr({type:"text",name:"data"});return e.node().value=k.graphJson(a,!1,"keepdata"),d.node().submit(),c.remove(),a.emit("plotly_afterexport"),!1},k.supplyDefaults=function(a){var b,c,d,e,i,j,l=a._fullLayout||{},m=a._fullLayout={},n=a.layout||{},o=a._fullData||[],p=a._fullData=[],q=a.data||[],r=a._modules=[];for(k.supplyLayoutGlobalDefaults(n,m),m._dataLength=q.length,b=0;b<q.length;b++)c=q[b],d=k.supplyDataDefaults(c,b,m),p.push(d),k.traceIs(d,"cartesian")?m._hasCartesian=!0:k.traceIs(d,"gl3d")?m._hasGL3D=!0:k.traceIs(d,"geo")?m._hasGeo=!0:k.traceIs(d,"pie")?m._hasPie=!0:k.traceIs(d,"gl2d")?m._hasGL2D=!0:"r"in d&&(m._hasPolar=!0),e=d._module,e&&r.indexOf(e)===-1&&r.push(e);for(b=0;b<r.length;b++)e=r[b],e.cleanData&&e.cleanData(p);if(o.length===q.length)for(b=0;b<p.length;b++)g(p[b],o[b]);for(k.supplyLayoutModuleDefaults(n,m,p),f(m,l),g(m,l),k.doAutoMargin(a),i=h.Axes.list(a),b=0;b<i.length;b++)j=i[b],j._td=a,j.setScale();if((a.calcdata||[]).length===p.length)for(b=0;b<p.length;b++)c=p[b],(a.calcdata[b][0]||{}).trace=c},k.supplyDataDefaults=function(a,b,c){function d(b,c){return h.Lib.coerce(a,f,k.attributes,b,c)}function e(b,c){if(k.traceIs(f,b))return h.Lib.coerce(a,f,k.subplotsRegistry[b].attributes,c)}var f={},g=h.Color.defaults[b%h.Color.defaults.length];f.index=b;var i,j,l=d("visible");return d("type"),d("uid"),e("gl3d","scene"),e("geo","geo"),(l||i)&&(j=k.getModule(f),f._module=j),l&&d("hoverinfo",1===c._dataLength?"x+y+z+text":void 0),j&&l&&j.supplyDefaults(a,f,g,c),l&&(d("name","trace "+b),k.traceIs(f,"noOpacity")||d("opacity"),e("cartesian","xaxis"),e("cartesian","yaxis"),e("gl2d","xaxis"),e("gl2d","yaxis"),k.traceIs(f,"showLegend")&&(d("showlegend"),d("legendgroup"))),f._input=a,f},k.supplyLayoutGlobalDefaults=function(a,b){function c(c,d){return h.Lib.coerce(a,b,k.layoutAttributes,c,d)}var d=h.Lib.coerceFont(c,"font");c("title"),h.Lib.coerceFont(c,"titlefont",{family:d.family,size:Math.round(1.4*d.size),color:d.color});var e=c("autosize",(!a.width||!a.height)&&"initial");c("width"),c("height"),c("margin.l"),c("margin.r"),c("margin.t"),c("margin.b"),c("margin.pad"),c("margin.autoexpand"),"initial"!==e&&k.sanitizeMargins(b),c("paper_bgcolor"),c("separators"),c("hidesources"),c("smith"),c("_hasCartesian"),c("_hasGL3D"),c("_hasGeo"),c("_hasPie"),c("_hasGL2D")},k.supplyLayoutModuleDefaults=function(a,b,c){var d,e;h.Axes.supplyLayoutDefaults(a,b,c);var f=Object.keys(o);for(d=0;d<f.length;d++)e=o[f[d]],e.supplyLayoutDefaults&&e.supplyLayoutDefaults(a,b,c);var g=Object.keys(l);for(d=0;d<g.length;d++)e=l[m[d]].module,e.supplyLayoutDefaults&&e.supplyLayoutDefaults(a,b,c);var i=["Fx","Annotations","Shapes","Legend"];for(d=0;d<i.length;d++)e=i[d],h[e]&&h[e].supplyLayoutDefaults(a,b,c)},k.purge=function(a){var b=a._fullLayout||{};void 0!==b._glcontainer&&b._glcontainer.remove(),void 0!==b._geocontainer&&b._geocontainer.remove(),b._modeBar&&b._modeBar.destroy(),delete a.data,delete a.layout,delete a._fullData,delete a._fullLayout,delete a.calcdata,delete a.framework,delete a.empty,delete a.fid,delete a.undoqueue,delete a.undonum,delete a.autoplay,delete a.changed,delete a._modules,delete a._tester,delete a._testref,delete a._promises,delete a._redrawTimer,delete a._replotting,delete a.firstscatter,delete a.hmlumcount,delete a.hmpixcount,delete a.numboxes,delete a._hoverTimer,delete a._lastHoverTime,a.removeAllListeners&&a.removeAllListeners()},k.style=function(a){for(var b=a._modules.concat(h.ErrorBars),c=0;c<b.length;c++){var d=b[c];d.style&&d.style(a)}},k.sanitizeMargins=function(a){if(a&&a.margin){var b,c=a.width,d=a.height,e=a.margin,f=c-(e.l+e.r),g=d-(e.t+e.b);f<0&&(b=(c-1)/(e.l+e.r),e.l=Math.floor(b*e.l),e.r=Math.floor(b*e.r)),g<0&&(b=(d-1)/(e.t+e.b),e.t=Math.floor(b*e.t),e.b=Math.floor(b*e.b))}},k.autoMargin=function(a,b,c){var d=a._fullLayout;if(d._pushmargin||(d._pushmargin={}),d.margin.autoexpand!==!1){if(c){var e=c.pad||12;c.l+c.r>.5*d.width&&(c.l=c.r=0),c.b+c.t>.5*d.height&&(c.b=c.t=0),d._pushmargin[b]={l:{val:c.x,size:c.l+e},r:{val:c.x,size:c.r+e},b:{val:c.y,size:c.b+e},t:{val:c.y,size:c.t+e}}}else delete d._pushmargin[b];a._replotting||k.doAutoMargin(a)}},k.doAutoMargin=function(a){var b=a._fullLayout;b._size||(b._size={}),b._pushmargin||(b._pushmargin={});var c=b._size,d=JSON.stringify(c),e=Math.max(b.margin.l||0,0),f=Math.max(b.margin.r||0,0),g=Math.max(b.margin.t||0,0),i=Math.max(b.margin.b||0,0),k=b._pushmargin;if(b.margin.autoexpand!==!1&&(k.base={l:{val:0,size:e},r:{val:1,size:f},t:{val:1,size:g},b:{val:0,size:i}},Object.keys(k).forEach(function(a){var c=k[a].l||{},d=k[a].b||{},h=c.val,l=c.size,m=d.val,n=d.size;Object.keys(k).forEach(function(a){if(j(l)&&k[a].r){var c=k[a].r.val,d=k[a].r.size;if(c>h){var o=(l*c+(d-b.width)*h)/(c-h),p=(d*(1-h)+(l-b.width)*(1-c))/(c-h);o>=0&&p>=0&&o+p>e+f&&(e=o,f=p)}}if(j(n)&&k[a].t){var q=k[a].t.val,r=k[a].t.size;if(q>m){var s=(n*q+(r-b.height)*m)/(q-m),t=(r*(1-m)+(n-b.height)*(1-q))/(q-m);s>=0&&t>=0&&s+t>i+g&&(i=s,g=t)}}})})),c.l=Math.round(e),c.r=Math.round(f),c.t=Math.round(g),c.b=Math.round(i),c.p=Math.round(b.margin.pad),c.w=Math.round(b.width)-c.l-c.r,c.h=Math.round(b.height)-c.t-c.b,!a._replotting&&"{}"!==d&&d!==JSON.stringify(b._size))return h.plot(a)},k.graphJson=function(a,b,c,d,e){function f(a){if("function"==typeof a)return null;if(h.Lib.isPlainObject(a)){var b,d,e={};for(b in a)if("function"!=typeof a[b]&&["_","["].indexOf(b.charAt(0))===-1){if("keepdata"===c){if("src"===b.substr(b.length-3))continue}else if("keepstream"===c){if(d=a[b+"src"],"string"==typeof d&&d.indexOf(":")>0&&!h.Lib.isPlainObject(a.stream))continue}else if("keepall"!==c&&(d=a[b+"src"],"string"==typeof d&&d.indexOf(":")>0))continue;e[b]=f(a[b])}return e}return Array.isArray(a)?a.map(f):a&&a.getTime?h.Lib.ms2DateTime(a):a}(e&&b&&!a._fullData||e&&!b&&!a._fullLayout)&&k.supplyDefaults(a);var g=e?a._fullData:a.data,i=e?a._fullLayout:a.layout,j={data:(g||[]).map(function(a){var c=f(a);return b&&delete c.fit,c})};return b||(j.layout=f(i)),a.framework&&a.framework.isPolar&&(j=a.framework.getConfig()),"object"===d?j:JSON.stringify(j)}},{"../plotly":1070,"./attributes":1071,"./font_attributes":1079,"./layout_attributes":1108,d3:64,"fast-isnumeric":72}],1110:[function(a,b,c){var d=a("../../traces/scatter/attributes"),e=d.marker;b.exports={r:d.r,t:d.t,marker:{color:e.color,size:e.size,symbol:e.symbol,opacity:e.opacity}}},{"../../traces/scatter/attributes":1197}],1111:[function(a,b,c){"use strict";function d(a,b){var c={showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}};return f({},b,c)}var e=a("../cartesian/layout_attributes"),f=a("../../lib/extend").extendFlat,g=f({},e.domain,{});b.exports={radialaxis:d("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:g,orientation:{valType:"number"}}),angularaxis:d("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:g}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}}},{"../../lib/extend":1049,"../cartesian/layout_attributes":1077}],1112:[function(a,b,c){var d=a("../../plotly"),e=a("d3"),f=b.exports={version:"0.2.2",manager:a("./micropolar_manager")},g=d.Lib.extendDeepAll;f.Axis=function(){function a(a){c=a||c;var j=i.data,l=i.layout;return("string"==typeof c||c.nodeName)&&(c=e.select(c)),c.datum(j).each(function(a,c){function i(a,b){return h(a)%360+l.orientation}var j=a.slice();k={data:f.util.cloneJson(j),layout:f.util.cloneJson(l)};var m=0;j.forEach(function(a,b){a.color||(a.color=l.defaultColorRange[m],m=(m+1)%l.defaultColorRange.length),a.strokeColor||(a.strokeColor="LinePlot"===a.geometry?a.color:e.rgb(a.color).darker().toString()),k.data[b].color=a.color,k.data[b].strokeColor=a.strokeColor,k.data[b].strokeDash=a.strokeDash,k.data[b].strokeSize=a.strokeSize});var n=j.filter(function(a,b){var c=a.visible;return"undefined"==typeof c||c===!0}),o=!1,p=n.map(function(a,b){return o=o||"undefined"!=typeof a.groupId,a});if(o){var q=e.nest().key(function(a,b){return"undefined"!=typeof a.groupId?a.groupId:"unstacked"}).entries(p),r=[],s=q.map(function(a,b){if("unstacked"===a.key)return a.values;var c=a.values[0].r.map(function(a,b){return 0});return a.values.forEach(function(a,b,d){a.yStack=[c],r.push(c),c=f.util.sumArrays(a.r,c)}),a.values});n=e.merge(s)}n.forEach(function(a,b){a.t=Array.isArray(a.t[0])?a.t:[a.t],a.r=Array.isArray(a.r[0])?a.r:[a.r]});var t=Math.min(l.width-l.margin.left-l.margin.right,l.height-l.margin.top-l.margin.bottom)/2;t=Math.max(10,t);var u,v=[l.margin.left+t,l.margin.top+t];if(o){var w=e.max(f.util.sumArrays(f.util.arrayLast(n).r[0],f.util.arrayLast(r)));u=[0,w]}else u=e.extent(f.util.flattenArray(n.map(function(a,b){return a.r})));l.radialAxis.domain!=f.DATAEXTENT&&(u[0]=0),d=e.scale.linear().domain(l.radialAxis.domain!=f.DATAEXTENT&&l.radialAxis.domain?l.radialAxis.domain:u).range([0,t]),k.layout.radialAxis.domain=d.domain();var x,y=f.util.flattenArray(n.map(function(a,b){return a.t})),z="string"==typeof y[0];z&&(y=f.util.deduplicate(y),x=y.slice(),y=e.range(y.length),n=n.map(function(a,b){var c=a;return a.t=[y],o&&(c.yStack=a.yStack),c}));var A=n.filter(function(a,b){return"LinePlot"===a.geometry||"DotPlot"===a.geometry}).length===n.length,B=null===l.needsEndSpacing?z||!A:l.needsEndSpacing,C=l.angularAxis.domain&&l.angularAxis.domain!=f.DATAEXTENT&&!z&&l.angularAxis.domain[0]>=0,D=C?l.angularAxis.domain:e.extent(y),E=Math.abs(y[1]-y[0]);A&&!z&&(E=0);var F=D.slice();B&&z&&(F[1]+=E);var G=l.angularAxis.ticksCount||4;G>8&&(G=G/(G/8)+G%8),l.angularAxis.ticksStep&&(G=(F[1]-F[0])/G);var H=l.angularAxis.ticksStep||(F[1]-F[0])/(G*(l.minorTicks+1));x&&(H=Math.max(Math.round(H),1)),F[2]||(F[2]=H);var I=e.range.apply(this,F);if(I=I.map(function(a,b){return parseFloat(a.toPrecision(12))}),h=e.scale.linear().domain(F.slice(0,2)).range("clockwise"===l.direction?[0,360]:[360,0]),k.layout.angularAxis.domain=h.domain(),k.layout.angularAxis.endPadding=B?E:0,b=e.select(this).select("svg.chart-root"),"undefined"==typeof b||b.empty()){var J="<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>",K=(new DOMParser).parseFromString(J,"application/xml"),L=this.appendChild(this.ownerDocument.importNode(K.documentElement,!0));b=e.select(L)}b.select(".guides-group").style({"pointer-events":"none"}),b.select(".angular.axis-group").style({"pointer-events":"none"}),b.select(".radial.axis-group").style({"pointer-events":"none"});var M,N=b.select(".chart-group"),O={fill:"none",stroke:l.tickColor},P={"font-size":l.font.size,"font-family":l.font.family,fill:l.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(a,b){return" "+a+" 0 "+l.font.outlineColor}).join(",")};if(l.showLegend){M=b.select(".legend-group").attr({transform:"translate("+[t,l.margin.top]+")"}).style({display:"block"});var Q=n.map(function(a,b){var c=f.util.cloneJson(a);return c.symbol="DotPlot"===a.geometry?a.dotType||"circle":"LinePlot"!=a.geometry?"square":"line",c.visibleInLegend="undefined"==typeof a.visibleInLegend||a.visibleInLegend,c.color="LinePlot"===a.geometry?a.strokeColor:a.color,c});f.Legend().config({data:n.map(function(a,b){return a.name||"Element"+b}),legendConfig:g({},f.Legend.defaultConfig().legendConfig,{container:M,elements:Q,reverseOrder:l.legend.reverseOrder})})();var R=M.node().getBBox();t=Math.min(l.width-R.width-l.margin.left-l.margin.right,l.height-l.margin.top-l.margin.bottom)/2,t=Math.max(10,t),v=[l.margin.left+t,l.margin.top+t],d.range([0,t]),k.layout.radialAxis.domain=d.domain(),M.attr("transform","translate("+[v[0]+t,v[1]-t]+")")}else M=b.select(".legend-group").style({display:"none"});b.attr({width:l.width,height:l.height}).style({opacity:l.opacity}),N.attr("transform","translate("+v+")").style({cursor:"crosshair"});var S=[(l.width-(l.margin.left+l.margin.right+2*t+(R?R.width:0)))/2,(l.height-(l.margin.top+l.margin.bottom+2*t))/2];if(S[0]=Math.max(0,S[0]),S[1]=Math.max(0,S[1]),b.select(".outer-group").attr("transform","translate("+S+")"),l.title){var T=b.select("g.title-group text").style(P).text(l.title),U=T.node().getBBox();T.attr({x:v[0]-U.width/2,y:v[1]-t-20})}var V=b.select(".radial.axis-group");if(l.radialAxis.gridLinesVisible){var W=V.selectAll("circle.grid-circle").data(d.ticks(5));W.enter().append("circle").attr({"class":"grid-circle"}).style(O),W.attr("r",d),W.exit().remove()}V.select("circle.outside-circle").attr({r:t}).style(O);var X=b.select("circle.background-circle").attr({r:t}).style({fill:l.backgroundColor,stroke:l.stroke});if(l.radialAxis.visible){var Y=e.svg.axis().scale(d).ticks(5).tickSize(5);V.call(Y).attr({transform:"rotate("+l.radialAxis.orientation+")"}),V.selectAll(".domain").style(O),V.selectAll("g>text").text(function(a,b){return this.textContent+l.radialAxis.ticksSuffix}).style(P).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(a,b){return"horizontal"===l.radialAxis.tickOrientation?"rotate("+-l.radialAxis.orientation+") translate("+[0,P["font-size"]]+")":"translate("+[0,P["font-size"]]+")"}}),V.selectAll("g>line").style({stroke:"black"})}var Z=b.select(".angular.axis-group").selectAll("g.angular-tick").data(I),$=Z.enter().append("g").classed("angular-tick",!0);Z.attr({transform:function(a,b){return"rotate("+i(a,b)+")"}}).style({display:l.angularAxis.visible?"block":"none"}),Z.exit().remove(),$.append("line").classed("grid-line",!0).classed("major",function(a,b){return b%(l.minorTicks+1)==0}).classed("minor",function(a,b){return!(b%(l.minorTicks+1)==0)}).style(O),$.selectAll(".minor").style({stroke:l.minorTickColor}),Z.select("line.grid-line").attr({x1:l.tickLength?t-l.tickLength:0,x2:t}).style({display:l.angularAxis.gridLinesVisible?"block":"none"}),$.append("text").classed("axis-text",!0).style(P);var _=Z.select("text.axis-text").attr({x:t+l.labelOffset,dy:".35em",transform:function(a,b){var c=i(a,b),d=t+l.labelOffset,e=l.angularAxis.tickOrientation;return"horizontal"==e?"rotate("+-c+" "+d+" 0)":"radial"==e?c<270&&c>90?"rotate(180 "+d+" 0)":null:"rotate("+(c<=180&&c>0?-90:90)+" "+d+" 0)"}}).style({"text-anchor":"middle",display:l.angularAxis.labelsVisible?"block":"none"}).text(function(a,b){return b%(l.minorTicks+1)!=0?"":x?x[a]+l.angularAxis.ticksSuffix:a+l.angularAxis.ticksSuffix}).style(P);l.angularAxis.rewriteTicks&&_.text(function(a,b){return b%(l.minorTicks+1)!=0?"":l.angularAxis.rewriteTicks(this.textContent,b)});var aa=e.max(N.selectAll(".angular-tick text")[0].map(function(a,b){return a.getCTM().e+a.getBBox().width}));M.attr({transform:"translate("+[t+aa,l.margin.top]+")"});var ba=b.select("g.geometry-group").selectAll("g").size()>0,ca=b.select("g.geometry-group").selectAll("g.geometry").data(n);if(ca.enter().append("g").attr({"class":function(a,b){return"geometry geometry"+b}}),ca.exit().remove(),n[0]||ba){var da=[];n.forEach(function(a,b){var c={};c.radialScale=d,c.angularScale=h,c.container=ca.filter(function(a,c){return c==b}),c.geometry=a.geometry,c.orientation=l.orientation,c.direction=l.direction,c.index=b,da.push({data:a,geometryConfig:c})});var ea=e.nest().key(function(a,b){return"undefined"!=typeof a.data.groupId||"unstacked"}).entries(da),fa=[];ea.forEach(function(a,b){"unstacked"===a.key?fa=fa.concat(a.values.map(function(a,b){return[a]})):fa.push(a.values)}),fa.forEach(function(a,b){var c;c=Array.isArray(a)?a[0].geometryConfig.geometry:a.geometryConfig.geometry;var d=a.map(function(a,b){return g(f[c].defaultConfig(),a)});f[c]().config(d)()})}var ga,ha,ia=b.select(".guides-group"),ja=b.select(".tooltips-group"),ka=f.tooltipPanel().config({container:ja,fontSize:8})(),la=f.tooltipPanel().config({container:ja,fontSize:8})(),ma=f.tooltipPanel().config({container:ja,hasTick:!0})();if(!z){var na=ia.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});N.on("mousemove.angular-guide",function(a,b){var c=f.util.getMousePos(X).angle;na.attr({x2:-t,transform:"rotate("+c+")"}).style({opacity:.5});var d=(c+180+360-l.orientation)%360;ga=h.invert(d);var e=f.util.convertToCartesian(t+12,c+180);ka.text(f.util.round(ga)).move([e[0]+v[0],e[1]+v[1]])}).on("mouseout.angular-guide",function(a,b){ia.select("line").style({opacity:0})})}var oa=ia.select("circle").style({stroke:"grey",fill:"none"});N.on("mousemove.radial-guide",function(a,b){var c=f.util.getMousePos(X).radius;oa.attr({r:c}).style({opacity:.5}),ha=d.invert(f.util.getMousePos(X).radius);var e=f.util.convertToCartesian(c,l.radialAxis.orientation);la.text(f.util.round(ha)).move([e[0]+v[0],e[1]+v[1]])}).on("mouseout.radial-guide",function(a,b){oa.style({opacity:0}),ma.hide(),ka.hide(),la.hide()}),b.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(a,c){var d=e.select(this),g=d.style("fill"),h="black",i=d.style("opacity")||1;if(d.attr({"data-opacity":i}),"none"!=g){d.attr({"data-fill":g}),h=e.hsl(g).darker().toString(),d.style({fill:h,opacity:1});var j={t:f.util.round(a[0]),r:f.util.round(a[1])};z&&(j.t=x[a[0]]);var k="t: "+j.t+", r: "+j.r,l=this.getBoundingClientRect(),m=b.node().getBoundingClientRect(),n=[l.left+l.width/2-S[0]-m.left,l.top+l.height/2-S[1]-m.top];ma.config({color:h}).text(k),ma.move(n)}else g=d.style("stroke"),d.attr({"data-stroke":g}),h=e.hsl(g).darker().toString(),d.style({stroke:h,opacity:1})}).on("mousemove.tooltip",function(a,b){return 0==e.event.which&&void(e.select(this).attr("data-fill")&&ma.show())}).on("mouseout.tooltip",function(a,b){ma.hide();var c=e.select(this),d=c.attr("data-fill");d?c.style({fill:d,opacity:c.attr("data-opacity")}):c.style({stroke:c.attr("data-stroke"),opacity:c.attr("data-opacity")})})}),m}var b,c,d,h,i={data:[],layout:{}},j={},k={},l=e.dispatch("hover"),m={};return m.render=function(b){return a(b),this},m.config=function(a){if(!arguments.length)return i;var b=f.util.cloneJson(a);return b.data.forEach(function(a,b){i.data[b]||(i.data[b]={}),g(i.data[b],f.Axis.defaultConfig().data[0]),g(i.data[b],a)}),g(i.layout,f.Axis.defaultConfig().layout),g(i.layout,b.layout),this},m.getLiveConfig=function(){return k},m.getinputConfig=function(){return j},m.radialScale=function(a){return d},m.angularScale=function(a){return h},m.svg=function(){return b},e.rebind(m,l,"on"),m},f.Axis.defaultConfig=function(a,b){var c={data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:e.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}};return c},f.util={},f.DATAEXTENT="dataExtent",f.AREA="AreaChart",f.LINE="LinePlot",f.DOT="DotPlot",f.BAR="BarChart",f.util._override=function(a,b){for(var c in a)c in b&&(b[c]=a[c])},f.util._extend=function(a,b){for(var c in a)b[c]=a[c]},f.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},f.util.dataFromEquation2=function(a,b){var c=b||6,d=e.range(0,360+c,c).map(function(b,c){var d=b*Math.PI/180,e=a(d);return[b,e]});return d},f.util.dataFromEquation=function(a,b,c){var d=b||6,f=[],g=[];e.range(0,360+d,d).forEach(function(b,c){var d=b*Math.PI/180,e=a(d);f.push(b),g.push(e)});var h={t:f,r:g};return c&&(h.name=c),h},f.util.ensureArray=function(a,b){if("undefined"==typeof a)return null;var c=[].concat(a);return e.range(b).map(function(a,b){return c[b]||c[0]})},f.util.fillArrays=function(a,b,c){return b.forEach(function(b,d){a[b]=f.util.ensureArray(a[b],c)}),a},f.util.cloneJson=function(a){return JSON.parse(JSON.stringify(a))},f.util.validateKeys=function(a,b){"string"==typeof b&&(b=b.split("."));var c=b.shift();return a[c]&&(!b.length||objHasKeys(a[c],b))},f.util.sumArrays=function(a,b){return e.zip(a,b).map(function(a,b){return e.sum(a)})},f.util.arrayLast=function(a){return a[a.length-1]},f.util.arrayEqual=function(a,b){for(var c=Math.max(a.length,b.length,1);c-- >=0&&a[c]===b[c];);return c===-2},f.util.flattenArray=function(a){for(var b=[];!f.util.arrayEqual(b,a);)b=a,a=[].concat.apply([],a);return a},f.util.deduplicate=function(a){return a.filter(function(a,b,c){return c.indexOf(a)==b})},f.util.convertToCartesian=function(a,b){var c=b*Math.PI/180,d=a*Math.cos(c),e=a*Math.sin(c);return[d,e]},f.util.round=function(a,b){var c=b||2,d=Math.pow(10,c);return Math.round(a*d)/d},f.util.getMousePos=function(a){var b=e.mouse(a.node()),c=b[0],d=b[1],f={};return f.x=c,f.y=d,f.pos=b,f.angle=180*(Math.atan2(d,c)+Math.PI)/Math.PI,f.radius=Math.sqrt(c*c+d*d),f},f.util.duplicatesCount=function(a){for(var b,c={},d={},e=0,f=a.length;e<f;e++)b=a[e],b in c?(c[b]++,d[b]=c[b]):c[b]=1;return d},f.util.duplicates=function(a){return Object.keys(f.util.duplicatesCount(a))},f.util.translator=function(a,b,c,d){if(d){var e=c.slice();c=b,b=e}var f=b.reduce(function(a,b){if("undefined"!=typeof a)return a[b]},a);"undefined"!=typeof f&&(b.reduce(function(a,c,d){if("undefined"!=typeof a)return d===b.length-1&&delete a[c],a[c]},a),c.reduce(function(a,b,d){return"undefined"==typeof a[b]&&(a[b]={}),d===c.length-1&&(a[b]=f),a[b]},a))},f.PolyChart=function(){function a(){var a=c[0].geometryConfig,b=a.container;"string"==typeof b&&(b=e.select(b)),b.datum(c).each(function(b,c){function d(b,c){var d=a.radialScale(b[1]),e=(a.angularScale(b[0])+a.orientation)*Math.PI/180;return{r:d,t:e}}function f(a){var b=a.r*Math.cos(a.t),c=a.r*Math.sin(a.t);return{x:b,y:c}}var g=!!b[0].data.yStack,i=b.map(function(a,b){return g?e.zip(a.data.t[0],a.data.r[0],a.data.yStack[0]):e.zip(a.data.t[0],a.data.r[0])}),j=a.angularScale,k=a.radialScale.domain()[0],l={};l.bar=function(c,d,f){var g=b[f].data,h=a.radialScale(c[1])-a.radialScale(0),i=a.radialScale(c[2]||0),k=g.barWidth;e.select(this).attr({"class":"mark bar",d:"M"+[[h+i,-k/2],[h+i,k/2],[i,k/2],[i,-k/2]].join("L")+"Z",transform:function(b,c){return"rotate("+(a.orientation+j(b[0]))+")"}});
},l.dot=function(a,c,g){var h=a[2]?[a[0],a[1]+a[2]]:a,i=e.svg.symbol().size(b[g].data.dotSize).type(b[g].data.dotType)(a,c);e.select(this).attr({"class":"mark dot",d:i,transform:function(a,b){var c=f(d(h));return"translate("+[c.x,c.y]+")"}})};var m=e.svg.line.radial().interpolate(b[0].data.lineInterpolation).radius(function(b){return a.radialScale(b[1])}).angle(function(b){return a.angularScale(b[0])*Math.PI/180});l.line=function(c,d,f){var g=c[2]?i[f].map(function(a,b){return[a[0],a[1]+a[2]]}):i[f];if(e.select(this).each(l.dot).style({opacity:function(a,c){return+b[f].data.dotVisible},fill:q.stroke(c,d,f)}).attr({"class":"mark dot"}),!(d>0)){var h=e.select(this.parentNode).selectAll("path.line").data([0]);h.enter().insert("path"),h.attr({"class":"line",d:m(g),transform:function(b,c){return"rotate("+(a.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(a,b){return q.fill(c,d,f)},"fill-opacity":0,stroke:function(a,b){return q.stroke(c,d,f)},"stroke-width":function(a,b){return q["stroke-width"](c,d,f)},"stroke-dasharray":function(a,b){return q["stroke-dasharray"](c,d,f)},opacity:function(a,b){return q.opacity(c,d,f)},display:function(a,b){return q.display(c,d,f)}})}};var n=a.angularScale.range(),o=Math.abs(n[1]-n[0])/i[0].length*Math.PI/180,p=e.svg.arc().startAngle(function(a){return-o/2}).endAngle(function(a){return o/2}).innerRadius(function(b){return a.radialScale(k+(b[2]||0))}).outerRadius(function(b){return a.radialScale(k+(b[2]||0))+a.radialScale(b[1])});l.arc=function(b,c,d){e.select(this).attr({"class":"mark arc",d:p,transform:function(b,c){return"rotate("+(a.orientation+j(b[0])+90)+")"}})};var q={fill:function(a,c,d){return b[d].data.color},stroke:function(a,c,d){return b[d].data.strokeColor},"stroke-width":function(a,c,d){return b[d].data.strokeSize+"px"},"stroke-dasharray":function(a,c,d){return h[b[d].data.strokeDash]},opacity:function(a,c,d){return b[d].data.opacity},display:function(a,c,d){return"undefined"==typeof b[d].data.visible||b[d].data.visible?"block":"none"}},r=e.select(this).selectAll("g.layer").data(i);r.enter().append("g").attr({"class":"layer"});var s=r.selectAll("path.mark").data(function(a,b){return a});s.enter().append("path").attr({"class":"mark"}),s.style(q).each(l[a.geometryType]),s.exit().remove(),r.exit().remove()})}var b,c=[f.PolyChart.defaultConfig()],d=e.dispatch("hover"),h={solid:"none",dash:[5,2],dot:[2,5]};return a.config=function(a){return arguments.length?(a.forEach(function(a,b){c[b]||(c[b]={}),g(c[b],f.PolyChart.defaultConfig()),g(c[b],a)}),this):c},a.getColorScale=function(){return b},e.rebind(a,d,"on"),a},f.PolyChart.defaultConfig=function(){var a={data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:e.scale.category20()}};return a},f.BarChart=function(){return f.PolyChart()},f.BarChart.defaultConfig=function(){var a={geometryConfig:{geometryType:"bar"}};return a},f.AreaChart=function(){return f.PolyChart()},f.AreaChart.defaultConfig=function(){var a={geometryConfig:{geometryType:"arc"}};return a},f.DotPlot=function(){return f.PolyChart()},f.DotPlot.defaultConfig=function(){var a={geometryConfig:{geometryType:"dot",dotType:"circle"}};return a},f.LinePlot=function(){return f.PolyChart()},f.LinePlot.defaultConfig=function(){var a={geometryConfig:{geometryType:"line"}};return a},f.Legend=function(){function a(){var c=b.legendConfig,d=b.data.map(function(a,b){return[].concat(a).map(function(a,d){var e=g({},c.elements[b]);return e.name=a,e.color=[].concat(c.elements[b].color)[d],e})}),f=e.merge(d);f=f.filter(function(a,b){return c.elements[b]&&(c.elements[b].visibleInLegend||"undefined"==typeof c.elements[b].visibleInLegend)}),c.reverseOrder&&(f=f.reverse());var h=c.container;("string"==typeof h||h.nodeName)&&(h=e.select(h));var i=f.map(function(a,b){return a.color}),j=c.fontSize,k=null==c.isContinuous?"number"==typeof f[0]:c.isContinuous,l=k?c.height:j*f.length,m=h.classed("legend-group",!0),n=m.selectAll("svg").data([0]),o=n.enter().append("svg").attr({width:300,height:l+j,xmlns:"http://www.w3.org/2000/svg","xmlns:xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});o.append("g").classed("legend-axis",!0),o.append("g").classed("legend-marks",!0);var p=e.range(f.length),q=e.scale[k?"linear":"ordinal"]().domain(p).range(i),r=e.scale[k?"linear":"ordinal"]().domain(p)[k?"range":"rangePoints"]([0,l]),s=function(a,b){var c=3*b;return"line"===a?"M"+[[-b/2,-b/12],[b/2,-b/12],[b/2,b/12],[-b/2,b/12]]+"Z":e.svg.symbolTypes.indexOf(a)!=-1?e.svg.symbol().type(a).size(c)():e.svg.symbol().type("square").size(c)()};if(k){var t=n.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(i);t.enter().append("stop"),t.attr({offset:function(a,b){return b/(i.length-1)*100+"%"}}).style({"stop-color":function(a,b){return a}}),n.append("rect").classed("legend-mark",!0).attr({height:c.height,width:c.colorBandWidth,fill:"url(#grad1)"})}else{var u=n.select(".legend-marks").selectAll("path.legend-mark").data(f);u.enter().append("path").classed("legend-mark",!0),u.attr({transform:function(a,b){return"translate("+[j/2,r(b)+j/2]+")"},d:function(a,b){var c=a.symbol;return s(c,j)},fill:function(a,b){return q(b)}}),u.exit().remove()}var v=e.svg.axis().scale(r).orient("right"),w=n.select("g.legend-axis").attr({transform:"translate("+[k?c.colorBandWidth:j,j/2]+")"}).call(v);return w.selectAll(".domain").style({fill:"none",stroke:"none"}),w.selectAll("line").style({fill:"none",stroke:k?c.textColor:"none"}),w.selectAll("text").style({fill:c.textColor,"font-size":c.fontSize}).text(function(a,b){return f[b].name}),a}var b=f.Legend.defaultConfig(),c=e.dispatch("hover");return a.config=function(a){return arguments.length?(g(b,a),this):b},e.rebind(a,c,"on"),a},f.Legend.defaultConfig=function(a,b){var c={data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}};return c},f.tooltipPanel=function(){var a,b,c,d={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},h="tooltip-"+f.tooltipPanel.uid++,i=10,j=function(){a=d.container.selectAll("g."+h).data([0]);var e=a.enter().append("g").classed(h,!0).style({"pointer-events":"none",display:"none"});return c=e.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),b=e.append("text").attr({dx:d.padding+i,dy:.3*+d.fontSize}),j};return j.text=function(f){var g=e.hsl(d.color).l,h=g>=.5?"#aaa":"white",k=g>=.5?"black":"white",l=f||"";b.style({fill:k,"font-size":d.fontSize+"px"}).text(l);var m=d.padding,n=b.node().getBBox(),o={fill:d.color,stroke:h,"stroke-width":"2px"},p=n.width+2*m+i,q=n.height+2*m;return c.attr({d:"M"+[[i,-q/2],[i,-q/4],[d.hasTick?0:i,0],[i,q/4],[i,q/2],[p,q/2],[p,-q/2]].join("L")+"Z"}).style(o),a.attr({transform:"translate("+[i,-q/2+2*m]+")"}),a.style({display:"block"}),j},j.move=function(b){if(a)return a.attr({transform:"translate("+[b[0],b[1]]+")"}).style({display:"block"}),j},j.hide=function(){if(a)return a.style({display:"none"}),j},j.show=function(){if(a)return a.style({display:"block"}),j},j.config=function(a){return g(d,a),j},j},f.tooltipPanel.uid=1,f.adapter={},f.adapter.plotly=function(){var a={};return a.convert=function(a,b){var c={};if(a.data&&(c.data=a.data.map(function(a,c){var d=g({},a),e=[[d,["marker","color"],["color"]],[d,["marker","opacity"],["opacity"]],[d,["marker","line","color"],["strokeColor"]],[d,["marker","line","dash"],["strokeDash"]],[d,["marker","line","width"],["strokeSize"]],[d,["marker","symbol"],["dotType"]],[d,["marker","size"],["dotSize"]],[d,["marker","barWidth"],["barWidth"]],[d,["line","interpolation"],["lineInterpolation"]],[d,["showlegend"],["visibleInLegend"]]];return e.forEach(function(a,c){f.util.translator.apply(null,a.concat(b))}),b||delete d.marker,b&&delete d.groupId,b?("LinePlot"===d.geometry?(d.type="scatter",d.dotVisible===!0?(delete d.dotVisible,d.mode="lines+markers"):d.mode="lines"):"DotPlot"===d.geometry?(d.type="scatter",d.mode="markers"):"AreaChart"===d.geometry?d.type="area":"BarChart"===d.geometry&&(d.type="bar"),delete d.geometry):("scatter"===d.type?"lines"===d.mode?d.geometry="LinePlot":"markers"===d.mode?d.geometry="DotPlot":"lines+markers"===d.mode&&(d.geometry="LinePlot",d.dotVisible=!0):"area"===d.type?d.geometry="AreaChart":"bar"===d.type&&(d.geometry="BarChart"),delete d.mode,delete d.type),d}),!b&&a.layout&&"stack"===a.layout.barmode)){var d=f.util.duplicates(c.data.map(function(a,b){return a.geometry}));c.data.forEach(function(a,b){var e=d.indexOf(a.geometry);e!=-1&&(c.data[b].groupId=e)})}if(a.layout){var h=g({},a.layout),i=[[h,["plot_bgcolor"],["backgroundColor"]],[h,["showlegend"],["showLegend"]],[h,["radialaxis"],["radialAxis"]],[h,["angularaxis"],["angularAxis"]],[h.angularaxis,["showline"],["gridLinesVisible"]],[h.angularaxis,["showticklabels"],["labelsVisible"]],[h.angularaxis,["nticks"],["ticksCount"]],[h.angularaxis,["tickorientation"],["tickOrientation"]],[h.angularaxis,["ticksuffix"],["ticksSuffix"]],[h.angularaxis,["range"],["domain"]],[h.angularaxis,["endpadding"],["endPadding"]],[h.radialaxis,["showline"],["gridLinesVisible"]],[h.radialaxis,["tickorientation"],["tickOrientation"]],[h.radialaxis,["ticksuffix"],["ticksSuffix"]],[h.radialaxis,["range"],["domain"]],[h.angularAxis,["showline"],["gridLinesVisible"]],[h.angularAxis,["showticklabels"],["labelsVisible"]],[h.angularAxis,["nticks"],["ticksCount"]],[h.angularAxis,["tickorientation"],["tickOrientation"]],[h.angularAxis,["ticksuffix"],["ticksSuffix"]],[h.angularAxis,["range"],["domain"]],[h.angularAxis,["endpadding"],["endPadding"]],[h.radialAxis,["showline"],["gridLinesVisible"]],[h.radialAxis,["tickorientation"],["tickOrientation"]],[h.radialAxis,["ticksuffix"],["ticksSuffix"]],[h.radialAxis,["range"],["domain"]],[h.font,["outlinecolor"],["outlineColor"]],[h.legend,["traceorder"],["reverseOrder"]],[h,["labeloffset"],["labelOffset"]],[h,["defaultcolorrange"],["defaultColorRange"]]];if(i.forEach(function(a,c){f.util.translator.apply(null,a.concat(b))}),b?("undefined"!=typeof h.tickLength&&(h.angularaxis.ticklen=h.tickLength,delete h.tickLength),h.tickColor&&(h.angularaxis.tickcolor=h.tickColor,delete h.tickColor)):(h.angularAxis&&"undefined"!=typeof h.angularAxis.ticklen&&(h.tickLength=h.angularAxis.ticklen),h.angularAxis&&"undefined"!=typeof h.angularAxis.tickcolor&&(h.tickColor=h.angularAxis.tickcolor)),h.legend&&"boolean"!=typeof h.legend.reverseOrder&&(h.legend.reverseOrder="normal"!=h.legend.reverseOrder),h.legend&&"boolean"==typeof h.legend.traceorder&&(h.legend.traceorder=h.legend.traceorder?"reversed":"normal",delete h.legend.reverseOrder),h.margin&&"undefined"!=typeof h.margin.t){var j=["t","r","b","l","pad"],k=["top","right","bottom","left","pad"],l={};e.entries(h.margin).forEach(function(a,b){l[k[j.indexOf(a.key)]]=a.value}),h.margin=l}b&&(delete h.needsEndSpacing,delete h.minorTickColor,delete h.minorTicks,delete h.angularaxis.ticksCount,delete h.angularaxis.ticksCount,delete h.angularaxis.ticksStep,delete h.angularaxis.rewriteTicks,delete h.angularaxis.nticks,delete h.radialaxis.ticksCount,delete h.radialaxis.ticksCount,delete h.radialaxis.ticksStep,delete h.radialaxis.rewriteTicks,delete h.radialaxis.nticks),c.layout=h}return c},a}},{"../../plotly":1070,"./micropolar_manager":1113,d3:64}],1113:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("d3"),f=a("./undo_manager"),g=b.exports={},h=d.Lib.extendDeepAll;g.framework=function(a){function b(b,f){return f&&(l=f),e.select(e.select(l).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),c=c?h(c,b):b,j||(j=d.micropolar.Axis()),k=d.micropolar.adapter.plotly().convert(c),j.config(k).render(l),a.data=c.data,a.layout=c.layout,g.fillLayout(a),c}var c,i,j,k,l,m=new f;return b.isPolar=!0,b.svg=function(){return j.svg()},b.getConfig=function(){return c},b.getLiveConfig=function(){return d.micropolar.adapter.plotly().convert(j.getLiveConfig(),!0)},b.getLiveScales=function(){return{t:j.angularScale(),r:j.radialScale()}},b.setUndoPoint=function(){var a=this,b=d.micropolar.util.cloneJson(c);!function(b,c){m.add({undo:function(){c&&a(c)},redo:function(){a(b)}})}(b,i),i=d.micropolar.util.cloneJson(b)},b.undo=function(){m.undo()},b.redo=function(){m.redo()},b},g.fillLayout=function(a){var b=e.select(a).selectAll(".plot-container"),c=b.selectAll(".svg-container"),f=a.framework&&a.framework.svg&&a.framework.svg(),g={width:800,height:600,paper_bgcolor:d.Color.background,_container:b,_paperdiv:c,_paper:f};a._fullLayout=h(g,a.layout)}},{"../../plotly":1070,"./undo_manager":1114,d3:64}],1114:[function(a,b,c){"use strict";b.exports=function(){function a(a,b){return a?(e=!0,a[b](),e=!1,this):this}var b,c=[],d=-1,e=!1;return{add:function(a){return e?this:(c.splice(d+1,c.length-d),c.push(a),d=c.length-1,this)},setCallback:function(a){b=a},undo:function(){var e=c[d];return e?(a(e,"undo"),d-=1,b&&b(e.undo),this):this},redo:function(){var e=c[d+1];return e?(a(e,"redo"),d+=1,b&&b(e.redo),this):this},clear:function(){c=[],d=-1},hasUndo:function(){return d!==-1},hasRedo:function(){return d<c.length-1},getCommands:function(){return c},getPreviousCommand:function(){return c[d-1]},getIndex:function(){return d}}}},{}],1115:[function(a,b,c){"use strict";function d(a){var b;switch(a){case"themes__thumb":b={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":b={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:b={}}return b}function e(a){var b=["xaxis","yaxis","zaxis"];return b.indexOf(a.slice(0,5))>-1}var f=a("../plotly"),g=f.Lib.extendFlat,h=f.Lib.extendDeep;b.exports=function(a,b){a.framework&&a.framework.isPolar&&(a=a.framework.getConfig());var c,i=a.data,j=a.layout,k=h([],i),l=h({},j,d(b.tileClass));if(b.width&&(l.width=b.width),b.height&&(l.height=b.height),"thumbnail"===b.tileClass||"themes__thumb"===b.tileClass){l.annotations=[];var m=Object.keys(l);for(c=0;c<m.length;c++)e(m[c])&&(l[m[c]].title="");for(c=0;c<k.length;c++){var n=k[c];n.showscale=!1,n.marker&&(n.marker.showscale=!1),"pie"===n.type&&(n.textposition="none")}}if(Array.isArray(b.annotations))for(c=0;c<b.annotations.length;c++)l.annotations.push(b.annotations[c]);var o=f.Plots.getSubplotIds(l,"gl3d");if(o.length){var p={};for("thumbnail"===b.tileClass&&(p={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),c=0;c<o.length;c++){var q=o[c];g(l[q].xaxis,p),g(l[q].yaxis,p),g(l[q].zaxis,p),l[q]._scene=null}}var r=document.createElement("div");b.tileClass&&(r.className=b.tileClass);var s={td:r,layout:l,data:k,config:{staticPlot:void 0===b.staticPlot||b.staticPlot,plotGlPixelRatio:void 0===b.plotGlPixelRatio?2:b.plotGlPixelRatio,displaylogo:b.displaylogo||!1,showLink:b.showLink||!1,showTips:b.showTips||!1}};return"transparent"!==b.setBackground&&(s.config.setBackground=b.setBackground||"opaque"),s.td.defaultLayout=d(b.tileClass),s}},{"../plotly":1070}],1116:[function(a,b,c){"use strict";function d(a){return a._hasGL3D||a._hasGL2D?500:0}function e(a){return function(){var b=a._fullLayout;b._hasGL3D||b._hasGL2D||a.data&&a.data[0]&&a.data[0].r||(f.Annotations.drawAll(a),f.Legend.draw(a,b.showlegend),(a.calcdata||[]).forEach(function(a){a[0]&&a[0].t&&a[0].t.cb&&a[0].t.cb()}))}}var f=a("../plotly"),g={getDelay:d,getRedrawFunc:e,clone:a("./cloneplot"),toSVG:a("./tosvg"),svgToImg:a("./svgtoimg"),toImage:a("./toimage")};b.exports=g},{"../plotly":1070,"./cloneplot":1115,"./svgtoimg":1117,"./toimage":1118,"./tosvg":1119}],1117:[function(a,b,c){"use strict";function d(a){var b=a.emitter?a.emitter:new e,c=window.Image,d=window.Blob,f=a.svg,g=a.format||"png",h=a.canvas,i=h.getContext("2d"),j=new c,k=window.URL||window.webkitURL,l=new d([f],{type:"image/svg+xml;charset=utf-8"}),m=k.createObjectURL(l);return h.height=a.height||150,h.width=a.width||300,j.onload=function(){var a;switch(k.revokeObjectURL(m),i.drawImage(j,0,0),g){case"jpeg":a=h.toDataURL("image/jpeg");break;case"png":a=h.toDataURL("image/png");break;case"webp":a=h.toDataURL("image/webp");break;case"svg":a=f;break;default:return b.emit("error","Image format is not jpeg, png or svg")}b.emit("success",a)},j.onerror=function(a){return k.revokeObjectURL(m),b.emit("error",a)},j.src=m,b}var e=a("events").EventEmitter;b.exports=d},{events:52}],1118:[function(a,b,c){"use strict";function d(a,b){function c(){var a=d.getDelay(i._fullLayout);setTimeout(function(){var a=f.Snapshot.toSVG(i),c=window.document.createElement("div"),d=window.document.createElement("canvas");c.appendChild(d),c.id=f.Lib.randstr(),d.id=f.Lib.randstr(),g=f.Snapshot.svgToImg({format:b.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:d,emitter:g,svg:a}),g.clean=function(){i&&i.remove()}},a)}var d=f.Snapshot,g=new e,h=d.clone(a,{format:"png"}),i=h.td;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var j=d.getRedrawFunc(i);return f.plot(i,h.data,h.layout,h.config).then(j).then(c)["catch"](function(a){g.emit("error",a)}),g}var e=a("events").EventEmitter,f=a("../plotly");b.exports=d},{"../plotly":1070,events:52}],1119:[function(a,b,c){"use strict";function d(a,b,c){var d=b.toImage("png");a._glimages.append("svg:image").attr({xmlns:"http://www.w3.org/2000/svg","xlink:xlink:href":d,x:c.x,y:c.y,width:c.width,height:c.height,preserveAspectRatio:"none"}),b.destroy()}var e=a("../plotly"),f=a("d3");b.exports=function(a,b){var c,g,h=a._fullLayout,i=h._paper,j=h._size;i.insert("rect",":first-child").call(e.Drawing.setRect,0,0,h.width,h.height).call(e.Color.fill,h.paper_bgcolor);var k,l=e.Plots.getSubplotIds(h,"gl3d");for(g=0;g<l.length;g++)k=h[l[g]],c=k.domain,d(h,k._scene,{x:j.l+j.w*c.x[0],y:j.t+j.h*(1-c.y[1]),width:j.w*(c.x[1]-c.x[0]),height:j.h*(c.y[1]-c.y[0])});var m,n=e.Plots.getSubplotIds(h,"gl2d");for(g=0;g<n.length;g++)m=h._plots[n[g]],d(h,m._scene2d,{x:j.l,y:j.t,width:j.w,height:j.h});var o,p,q=e.Plots.getSubplotIds(h,"geo");for(g=0;g<q.length;g++)o=h[q[g]],c=o.domain,p=o._geo.framework,p.attr("style",null),p.attr({x:j.l+j.w*c.x[0]+o._marginX,y:j.t+j.h*(1-c.y[1])+o._marginY,width:o._width,height:o._height}),h._geoimages.node().appendChild(p.node());if(h._toppaper){var r,s=h._toppaper.node().childNodes;for(g=0;g<s.length;g++)r=s[g],r.childNodes.length&&i.node().appendChild(r)}i.node().style.background="",i.selectAll("text").attr({"data-unformatted":null}).each(function(){var a=f.select(this);if("hidden"===a.style("visibility"))return void a.remove();var b=a.style("font-family");b&&b.indexOf('"')!==-1&&a.style("font-family",b.replace(/"/g,"\\'"))}),"pdf"!==b&&"eps"!==b||i.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),i.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),i.node().setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");var t=(new window.XMLSerializer).serializeToString(i.node());return t=e.util.html_entity_decode(t),t=e.util.xml_entity_encode(t)}},{"../plotly":1070,d3:64}],1120:[function(a,b,c){"use strict";var d=a("../../lib").mergeArray;b.exports=function(a){var b=a[0].trace,c=b.marker,e=c.line;d(b.text,a,"tx"),d(c.opacity,a,"mo"),d(c.color,a,"mc"),d(e.color,a,"mlc"),d(e.width,a,"mlw")}},{"../../lib":1053}],1121:[function(a,b,c){var d=a("../scatter/attributes"),e=d.marker,f=e.line;b.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:d.text,orientation:{valType:"enumerated",values:["v","h"]},marker:{color:e.color,colorscale:e.colorscale,cauto:e.cauto,cmax:e.cmax,cmin:e.cmin,autocolorscale:e.autocolorscale,reversescale:e.reversescale,showscale:e.showscale,line:{color:f.color,colorscale:f.colorscale,cauto:f.cauto,cmax:f.cmax,cmin:f.cmin,width:f.width,autocolorscale:f.autocolorscale,reversescale:f.reversescale}},r:d.r,t:d.t,_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"},_deprecated:{bardir:{valType:"enumerated",values:["v","h"]}}}},{"../scatter/attributes":1197}],1122:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plotly"),f=a("../../components/colorscale/has_colorscale"),g=a("../../components/colorscale/calc");b.exports=function(a,b){var c,h,i,j=e.Axes.getFromId(a,b.xaxis||"x"),k=e.Axes.getFromId(a,b.yaxis||"y"),l=b.orientation||(b.x&&!b.y?"h":"v");"h"===l?(h=j.makeCalcdata(b,"x"),c=k.makeCalcdata(b,"y")):(h=k.makeCalcdata(b,"y"),c=j.makeCalcdata(b,"x"));var m=Math.min(c.length,h.length),n=[];for(i=0;i<m;i++)d(c[i])&&d(h[i])&&n.push({p:c[i],s:h[i],b:0});return f(b,"marker")&&g(b,b.marker.color,"marker","c"),f(b,"marker.line")&&g(b,b.marker.line.color,"marker.line","c"),n}},{"../../components/colorscale/calc":1012,"../../components/colorscale/has_colorscale":1017,"../../plotly":1070,"fast-isnumeric":72}],1123:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color"),f=a("../scatter/xy_defaults"),g=a("../bar/style_defaults"),h=a("../../components/errorbars/defaults"),i=a("./attributes");b.exports=function(a,b,c,j){function k(c,e){return d.coerce(a,b,i,c,e)}var l=f(a,b,k);return l?(k("orientation",b.x&&!b.y?"h":"v"),k("text"),g(a,b,k,c,j),h(a,b,e.defaultLine,{axis:"y"}),void h(a,b,e.defaultLine,{axis:"x",inherit:"y"})):void(b.visible=!1)}},{"../../components/color":1005,"../../components/errorbars/defaults":1028,"../../lib":1053,"../bar/style_defaults":1131,"../scatter/xy_defaults":1202,"./attributes":1121}],1124:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("../../components/color");b.exports=function(a,b,c,f){var g,h=a.cd,i=h[0].trace,j=h[0].t,k=a.xa,l=a.ya,m="closest"===f?j.barwidth/2:j.dbar*(1-k._td._fullLayout.bargap)/2;g="closest"!==f?function(a){return a.p}:"h"===i.orientation?function(a){return a.y}:function(a){return a.x};var n,o;"h"===i.orientation?(n=function(a){return d.Fx.inbox(a.b-b,a.x-b)+(a.x-b)/(a.x-a.b)},o=function(a){var b=g(a)-c;return d.Fx.inbox(b-m,b+m)}):(o=function(a){return d.Fx.inbox(a.b-c,a.y-c)+(a.y-c)/(a.y-a.b)},n=function(a){var c=g(a)-b;return d.Fx.inbox(c-m,c+m)});var p=d.Fx.getDistanceFunction(f,n,o);if(d.Fx.getClosest(h,p,a),a.index!==!1){var q=h[a.index],r=q.mcc||i.marker.color,s=q.mlcc||i.marker.line.color,t=q.mlw||i.marker.line.width;return e.opacity(r)?a.color=r:e.opacity(s)&&t&&(a.color=s),"h"===i.orientation?(a.x0=a.x1=k.c2p(q.x,!0),a.xLabelVal=q.s,a.y0=l.c2p(g(q)-m,!0),a.y1=l.c2p(g(q)+m,!0),a.yLabelVal=q.p):(a.y0=a.y1=l.c2p(q.y,!0),a.yLabelVal=q.s,a.x0=k.c2p(g(q)-m,!0),a.x1=k.c2p(g(q)+m,!0),a.xLabelVal=q.p),q.tx&&(a.text=q.tx),d.ErrorBars.hoverInfo(q,i,a),[a]}}},{"../../components/color":1005,"../../plotly":1070}],1125:[function(a,b,c){"use strict";var d=a("../../plotly");d.Plots.register(c,"bar",["cartesian","bar","oriented","markerColorscale","errorBarsOK","showLegend"],{}),c.attributes=a("./attributes"),c.layoutAttributes=a("./layout_attributes"),c.supplyDefaults=a("./defaults"),c.supplyLayoutDefaults=a("./layout_defaults"),c.calc=a("./calc"),c.setPositions=a("./set_positions"),c.colorbar=a("../scatter/colorbar"),c.arraysToCalcdata=a("./arrays_to_calcdata"),c.plot=a("./plot"),c.style=a("./style"),c.hoverPoints=a("./hover")},{"../../plotly":1070,"../scatter/colorbar":1198,"./arrays_to_calcdata":1120,"./attributes":1121,"./calc":1122,"./defaults":1123,"./hover":1124,"./layout_attributes":1126,"./layout_defaults":1127,"./plot":1128,"./set_positions":1129,"./style":1130}],1126:[function(a,b,c){b.exports={barmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"group"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:""},bargap:{valType:"number",min:0,max:1},bargroupgap:{valType:"number",min:0,max:1,dflt:0}}},{}],1127:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("../../lib"),f=a("./layout_attributes");b.exports=function(a,b,c){function g(c,d){return e.coerce(a,b,f,c,d)}var h,i,j,k=!1,l=!1,m=!1,n={};for(h=0;h<c.length;h++)if(i=c[h],d.Plots.traceIs(i,"bar")&&(k=!0,"overlay"!==a.barmode&&"stack"!==a.barmode&&(j=i.xaxis+i.yaxis,n[j]&&(m=!0),n[j]=!0),i.visible&&"histogram"===i.type)){var o=d.Axes.getFromId({_fullLayout:b},i["v"===i.orientation?"xaxis":"yaxis"]);"category"!==o.type&&(l=!0)}if(k){var p=g("barmode");"overlay"!==p&&g("barnorm"),g("bargap",l&&!m?0:.2),g("bargroupgap")}}},{"../../lib":1053,"../../plotly":1070,"./layout_attributes":1126}],1128:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=a("../../lib"),g=a("../../components/color"),h=a("./arrays_to_calcdata");b.exports=function(a,b,c){var i=b.x(),j=b.y(),k=a._fullLayout,l=b.plot.select(".barlayer").selectAll("g.trace.bars").data(c).enter().append("g").attr("class","trace bars");l.append("g").attr("class","points").each(function(b){var c=b[0].t,l=b[0].trace;h(b),d.select(this).selectAll("path").data(f.identity).enter().append("path").each(function(b){function f(a){return 0===k.bargap&&0===k.bargroupgap?d.round(Math.round(a)-r,2):a}function h(a,b){return Math.abs(a-b)>=2?f(a):a>b?Math.ceil(a):Math.floor(a)}var m,n,o,p;if("h"===l.orientation?(o=j.c2p(c.poffset+b.p,!0),p=j.c2p(c.poffset+b.p+c.barwidth,!0),m=i.c2p(b.b,!0),n=i.c2p(b.s+b.b,!0)):(m=i.c2p(c.poffset+b.p,!0),n=i.c2p(c.poffset+b.p+c.barwidth,!0),p=j.c2p(b.s+b.b,!0),o=j.c2p(b.b,!0)),!(e(m)&&e(n)&&e(o)&&e(p)&&m!==n&&o!==p))return void d.select(this).remove();var q=(b.mlw+1||l.marker.line.width+1||(b.trace?b.trace.marker.line.width:0)+1)-1,r=d.round(q/2%1,2);if(!a._context.staticPlot){var s=g.opacity(b.mc||l.marker.color),t=s<1||q>.01?f:h;m=t(m,n),n=t(n,m),o=t(o,p),p=t(p,o)}d.select(this).attr("d","M"+m+","+o+"V"+p+"H"+n+"V"+o+"Z")})})}},{"../../components/color":1005,"../../lib":1053,"./arrays_to_calcdata":1120,d3:64,"fast-isnumeric":72}],1129:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plotly"),f=a("../../lib");b.exports=function(a,b){var c,g,h=a._fullLayout,i=b.x(),j=b.y();["v","h"].forEach(function(k){function l(b){function c(a){a[n]=a.p+o}var d=[];b.forEach(function(b){a.calcdata[b].forEach(function(a){d.push(a.p)})});var g=f.distinctVals(d),i=g.vals,j=g.minDiff,k=!1,l=[];"group"===h.barmode&&b.forEach(function(b){k||(a.calcdata[b].forEach(function(a){k||l.forEach(function(b){Math.abs(a.p-b)<j&&(k=!0)})}),k||a.calcdata[b].forEach(function(a){l.push(a.p)}))}),e.Axes.minDtick(p,j,i[0],k),e.Axes.expand(p,i,{vpad:j/2}),j*=1-h.bargap,k&&(j/=m.length);for(var o,q=0;q<b.length;q++){var r=a.calcdata[b[q]][0].t;r.barwidth=j*(1-h.bargroupgap),r.poffset=((k?(2*q+1-b.length)*j:0)-r.barwidth)/2,r.dbar=g.minDiff,o=r.poffset+r.barwidth/2,a.calcdata[b[q]].forEach(c)}}var m=[],n={v:"x",h:"y"}[k],o={v:"y",h:"x"}[k],p=b[n](),q=b[o]();if(a._fullData.forEach(function(a,b){a.visible===!0&&e.Plots.traceIs(a,"bar")&&a.orientation===k&&a.xaxis===i._id&&a.yaxis===j._id&&m.push(b)}),m.length){"overlay"===h.barmode?m.forEach(function(a){l([a])}):l(m);var r="stack"===h.barmode,s=h.barnorm;if(r||s){var t,u,v,w=q.l2c(q.c2l(0)),x=w,y={},z=a.calcdata[m[0]][0].t.barwidth/100,A=0,B=!0;for(c=0;c<m.length;c++)for(u=a.calcdata[m[c]],g=0;g<u.length;g++){A=Math.round(u[g].p/z);var C=y[A]||0;r&&(u[g].b=C),t=u[g].b+u[g].s,y[A]=C+u[g].s,r&&(u[g][o]=t,!s&&d(q.c2l(t))&&(w=Math.max(w,t),x=Math.min(x,t)))}if(s){B=!1;var D="fraction"===s?1:100,E=D/1e9;for(x=0,w=r?D:0,c=0;c<m.length;c++)for(u=a.calcdata[m[c]],g=0;g<u.length;g++)v=D/y[Math.round(u[g].p/z)],u[g].b*=v,u[g].s*=v,t=u[g].b+u[g].s,u[g][o]=t,d(q.c2l(t))&&(t<x-E&&(B=!0,x=t),t>w+E&&(B=!0,w=t))}e.Axes.expand(q,[x,w],{tozero:!0,padded:B})}else{var F=function(a){return a[o]=a.s,a.s};for(c=0;c<m.length;c++)e.Axes.expand(q,a.calcdata[m[c]].map(F),{tozero:!0,padded:!0})}}})}},{"../../lib":1053,"../../plotly":1070,"fast-isnumeric":72}],1130:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../plotly"),f=a("../../components/color");b.exports=function(a){var b=d.select(a).selectAll("g.trace.bars"),c=b.size(),g=a._fullLayout;b.style("opacity",function(a){return a[0].trace.opacity}).each(function(a){("stack"===g.barmode&&c>1||0===g.bargap&&0===g.bargroupgap&&!a[0].trace.marker.line.width)&&d.select(this).attr("shape-rendering","crispEdges")}),b.selectAll("g.points").each(function(a){var b=a[0].trace,c=b.marker,g=c.line,h=(b._input||{}).marker||{},i=e.Drawing.tryColorscale(c,h,""),j=e.Drawing.tryColorscale(c,h,"line.");d.select(this).selectAll("path").each(function(a){var b,e,h=(a.mlw+1||g.width+1)-1,k=d.select(this);b="mc"in a?a.mcc=i(a.mc):Array.isArray(c.color)?f.defaultLine:c.color,k.style("stroke-width",h+"px").call(f.fill,b),h&&(e="mlc"in a?a.mlcc=j(a.mlc):Array.isArray(g.color)?f.defaultLine:g.color,k.call(f.stroke,e))})})}},{"../../components/color":1005,"../../plotly":1070,d3:64}],1131:[function(a,b,c){"use strict";var d=a("../../components/color"),e=a("../../components/colorscale/has_colorscale"),f=a("../../components/colorscale/defaults");b.exports=function(a,b,c,g,h){c("marker.color",g),e(a,"marker")&&f(a,b,h,c,{prefix:"marker.",cLetter:"c"}),c("marker.line.color",d.defaultLine),e(a,"marker.line")&&f(a,b,h,c,{prefix:"marker.line.",cLetter:"c"}),c("marker.line.width")}},{"../../components/color":1005,"../../components/colorscale/defaults":1014,"../../components/colorscale/has_colorscale":1017}],1132:[function(a,b,c){var d=a("../scatter/attributes"),e=a("../../components/color/attributes"),f=a("../../lib/extend").extendFlat,g=d.marker,h=g.line;b.exports={y:{valType:"data_array"},x:{valType:"data_array"},x0:{valType:"any"},y0:{valType:"any"},whiskerwidth:{valType:"number",min:0,max:1,dflt:.5},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],dflt:"outliers"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],dflt:!1},jitter:{valType:"number",min:0,max:1},pointpos:{valType:"number",min:-2,max:2},orientation:{valType:"enumerated",values:["v","h"]},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)"},symbol:f({},g.symbol,{arrayOk:!1}),opacity:f({},g.opacity,{arrayOk:!1,dflt:1}),size:f({},g.size,{arrayOk:!1}),color:f({},g.color,{arrayOk:!1}),line:{color:f({},h.color,{arrayOk:!1,dflt:e.defaultLine}),width:f({},h.width,{arrayOk:!1,dflt:0}),outliercolor:{valType:"color"},outlierwidth:{valType:"number",min:0,dflt:1}}},line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:2}},fillcolor:d.fillcolor}},{"../../components/color/attributes":1004,"../../lib/extend":1049,"../scatter/attributes":1197}],1133:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plotly"),f=a("../../lib");b.exports=function(a,b){function c(a,b,c,e,g){var h;return c in b?o=e.makeCalcdata(b,c):(h=c+"0"in b?b[c+"0"]:"name"in b&&("category"===e.type||d(b.name)&&["linear","log"].indexOf(e.type)!==-1||f.isDateTime(b.name)&&"date"===e.type)?b.name:a.numboxes,h=e.d2c(h),o=g.map(function(){return h})),o}function g(a,b,c,e,g){var h,i,j,k,l=e.length,m=b.length,n=[],o=[];for(h=0;h<l;++h)i=e[h],a[h]={pos:i},o[h]=i-g,n[h]=[];for(o.push(e[l-1]+g),h=0;h<m;++h)k=b[h],d(k)&&(j=f.findBin(c[h],o),j>=0&&j<m&&n[j].push(k));return n}function h(a,b){var c,d,e,g;for(g=0;g<b.length;++g)c=b[g].sort(f.sorterAsc),d=c.length,e=a[g],e.val=c,e.min=c[0],e.max=c[d-1],e.mean=f.mean(c,d),e.sd=f.stdev(c,d,e.mean),e.q1=f.interp(c,.25),e.med=f.interp(c,.5),e.q3=f.interp(c,.75),e.lf=Math.min(e.q1,c[Math.min(f.findBin(2.5*e.q1-1.5*e.q3,c,!0)+1,d-1)]),e.uf=Math.max(e.q3,c[Math.max(f.findBin(2.5*e.q3-1.5*e.q1,c),0)]),e.lo=4*e.q1-3*e.q3,e.uo=4*e.q3-3*e.q1}var i,j,k,l,m,n,o,p,q,r=e.Axes.getFromId(a,b.xaxis||"x"),s=e.Axes.getFromId(a,b.yaxis||"y"),t=b.orientation,u=[];"h"===t?(i=r,j="x",m=s,n="y"):(i=s,j="y",m=r,n="x"),k=i.makeCalcdata(b,j),e.Axes.expand(i,k,{padded:!0}),o=c(a,b,n,m,k);var v=f.distinctVals(o);
return p=v.vals,q=v.minDiff/2,l=g(u,k,o,p,q),h(u,l),u=u.filter(function(a){return a.val&&a.val.length}),u.length?(u[0].t={boxnum:a.numboxes,dPos:q},a.numboxes++,u):[{t:{emptybox:!0}}]}},{"../../lib":1053,"../../plotly":1070,"fast-isnumeric":72}],1134:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color"),f=a("./attributes");b.exports=function(a,b,c){function g(c,e){return d.coerce(a,b,f,c,e)}var h,i=g("y"),j=g("x");if(i&&i.length)h="v",j||g("x0");else{if(!j||!j.length)return void(b.visible=!1);h="h",g("y0")}g("orientation",h),g("line.color",(a.marker||{}).color||c),g("line.width",2),g("fillcolor",e.addOpacity(b.line.color,.5)),g("whiskerwidth"),g("boxmean");var k=d.coerce2(a,b,f,"marker.outliercolor"),l=g("marker.line.outliercolor"),m=k||l?g("boxpoints","suspectedoutliers"):g("boxpoints");m&&(g("jitter","all"===m?.3:0),g("pointpos","all"===m?-1.5:0),g("marker.symbol"),g("marker.opacity"),g("marker.size"),g("marker.color",b.line.color),g("marker.line.color"),g("marker.line.width"),"suspectedoutliers"===m&&(g("marker.line.outliercolor",b.marker.color),g("marker.line.outlierwidth")))}},{"../../components/color":1005,"../../lib":1053,"./attributes":1132}],1135:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("../../components/color");b.exports=function(a,b,c,f){var g,h,i,j,k,l,m,n,o,p,q=a.cd,r=q[0].trace,s=q[0].t,t=a.xa,u=a.ya,v=[];if(j="closest"===f?2.5*s.bdPos:s.bdPos,"h"===r.orientation?(g=function(a){return d.Fx.inbox(a.min-b,a.max-b)},h=function(a){var b=a.pos+s.bPos-c;return d.Fx.inbox(b-j,b+j)},k="y",l=u,o="x",p=t):(g=function(a){var c=a.pos+s.bPos-b;return d.Fx.inbox(c-j,c+j)},h=function(a){return d.Fx.inbox(a.min-c,a.max-c)},k="x",l=t,o="y",p=u),i=d.Fx.getDistanceFunction(f,g,h),d.Fx.getClosest(q,i,a),a.index!==!1){var w=q[a.index],x=r.line.color,y=(r.marker||{}).color;e.opacity(x)&&r.line.width?a.color=x:e.opacity(y)&&r.boxpoints?a.color=y:a.color=r.fillcolor,a[k+"0"]=l.c2p(w.pos+s.bPos-s.bdPos,!0),a[k+"1"]=l.c2p(w.pos+s.bPos+s.bdPos,!0),m=d.Axes.tickText(l,l.c2l(w.pos),"hover").text,a[k+"LabelVal"]=w.pos;var z,A,B={},C=["med","min","q1","q3","max"];r.boxmean&&C.push("mean"),r.boxpoints&&[].push.apply(C,["lf","uf"]);for(var D=0;D<C.length;D++)z=C[D],z in w&&!(w[z]in B)&&(B[w[z]]=!0,n=p.c2p(w[z],!0),A=d.Lib.extendFlat({},a),A[o+"0"]=A[o+"1"]=n,A[o+"LabelVal"]=w[z],A.attr=z,"mean"===z&&"sd"in w&&"sd"===r.boxmean&&(A[o+"err"]=w.sd),a.name="",v.push(A));return v}}},{"../../components/color":1005,"../../plotly":1070}],1136:[function(a,b,c){"use strict";var d=a("../../plotly");d.Plots.register(c,"box",["cartesian","symbols","oriented","box","showLegend"],{}),c.attributes=a("./attributes"),c.layoutAttributes=a("./layout_attributes"),c.supplyDefaults=a("./defaults"),c.supplyLayoutDefaults=a("./layout_defaults"),c.calc=a("./calc"),c.setPositions=a("./set_positions"),c.plot=a("./plot"),c.style=a("./style"),c.hoverPoints=a("./hover")},{"../../plotly":1070,"./attributes":1132,"./calc":1133,"./defaults":1134,"./hover":1135,"./layout_attributes":1137,"./layout_defaults":1138,"./plot":1139,"./set_positions":1140,"./style":1141}],1137:[function(a,b,c){b.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay"},boxgap:{valType:"number",min:0,max:1,dflt:.3},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3}}},{}],1138:[function(a,b,c){"use strict";var d=a("../../plots/plots"),e=a("../../lib"),f=a("./layout_attributes");b.exports=function(a,b,c){function g(c,d){return e.coerce(a,b,f,c,d)}for(var h,i=0;i<c.length;i++)if(d.traceIs(c[i],"box")){h=!0;break}h&&(g("boxmode"),g("boxgap"),g("boxgroupgap"))}},{"../../lib":1053,"../../plots/plots":1109,"./layout_attributes":1137}],1139:[function(a,b,c){"use strict";function d(){i=2e9}function e(){var a=i;return i=(69069*i+1)%4294967296,Math.abs(i-a)<429496729?e():i/4294967296}var f=a("d3"),g=a("../../plotly"),h=a("../../lib"),i=2e9,j=5,k=.01;b.exports=function(a,b,c){var i,l,m=a._fullLayout,n=b.x(),o=b.y(),p=b.plot.select(".boxlayer").selectAll("g.trace.boxes").data(c).enter().append("g").attr("class","trace boxes");p.each(function(b){var c=b[0].t,p=b[0].trace,q="group"===m.boxmode&&a.numboxes>1,r=c.dPos*(1-m.boxgap)*(1-m.boxgroupgap)/(q?a.numboxes:1),s=q?2*c.dPos*(-.5+(c.boxnum+.5)/a.numboxes)*(1-m.boxgap):0,t=r*p.whiskerwidth;return p.visible!==!0||c.emptybox?void f.select(this).remove():("h"===p.orientation?(i=o,l=n):(i=n,l=o),c.bPos=s,c.bdPos=r,d(),f.select(this).selectAll("path.box").data(h.identity).enter().append("path").attr("class","box").each(function(a){var b=i.c2p(a.pos+s,!0),c=i.c2p(a.pos+s-r,!0),d=i.c2p(a.pos+s+r,!0),e=i.c2p(a.pos+s-t,!0),g=i.c2p(a.pos+s+t,!0),j=l.c2p(a.q1,!0),k=l.c2p(a.q3,!0),m=h.constrain(l.c2p(a.med,!0),Math.min(j,k)+1,Math.max(j,k)-1),n=l.c2p(p.boxpoints===!1?a.min:a.lf,!0),o=l.c2p(p.boxpoints===!1?a.max:a.uf,!0);"h"===p.orientation?f.select(this).attr("d","M"+m+","+c+"V"+d+"M"+j+","+c+"V"+d+"H"+k+"V"+c+"ZM"+j+","+b+"H"+n+"M"+k+","+b+"H"+o+(0===p.whiskerwidth?"":"M"+n+","+e+"V"+g+"M"+o+","+e+"V"+g)):f.select(this).attr("d","M"+c+","+m+"H"+d+"M"+c+","+j+"H"+d+"V"+k+"H"+c+"ZM"+b+","+j+"V"+n+"M"+b+","+k+"V"+o+(0===p.whiskerwidth?"":"M"+e+","+n+"H"+g+"M"+e+","+o+"H"+g))}),p.boxpoints&&f.select(this).selectAll("g.points").data(function(a){return a.forEach(function(a){a.t=c,a.trace=p}),a}).enter().append("g").attr("class","points").selectAll("path").data(function(a){var b,c,d,f,g,i,l,m="all"===p.boxpoints?a.val:a.val.filter(function(b){return b<a.lf||b>a.uf}),n=(a.q3-a.q1)*k,o=[],q=0;if(p.jitter){for(b=0;b<m.length;b++)c=Math.max(0,b-j),f=m[c],d=Math.min(m.length-1,b+j),g=m[d],"all"!==p.boxpoints&&(m[b]<a.lf?g=Math.min(g,a.lf):f=Math.max(f,a.uf)),i=Math.sqrt(n*(d-c)/(g-f))||0,i=h.constrain(Math.abs(i),0,1),o.push(i),q=Math.max(i,q);l=2*p.jitter/q}return m.map(function(b,c){var d,f=p.pointpos;return p.jitter&&(f+=l*o[c]*(e()-.5)),d="h"===p.orientation?{y:a.pos+f*r+s,x:b}:{x:a.pos+f*r+s,y:b},"suspectedoutliers"===p.boxpoints&&b<a.uo&&b>a.lo&&(d.so=!0),d})}).enter().append("path").call(g.Drawing.translatePoints,n,o),void(p.boxmean&&f.select(this).selectAll("path.mean").data(h.identity).enter().append("path").attr("class","mean").style("fill","none").each(function(a){var b=i.c2p(a.pos+s,!0),c=i.c2p(a.pos+s-r,!0),d=i.c2p(a.pos+s+r,!0),e=l.c2p(a.mean,!0),g=l.c2p(a.mean-a.sd,!0),h=l.c2p(a.mean+a.sd,!0);"h"===p.orientation?f.select(this).attr("d","M"+e+","+c+"V"+d+("sd"!==p.boxmean?"":"m0,0L"+g+","+b+"L"+e+","+c+"L"+h+","+b+"Z")):f.select(this).attr("d","M"+c+","+e+"H"+d+("sd"!==p.boxmean?"":"m0,0L"+b+","+g+"L"+c+","+e+"L"+b+","+h+"Z"))})))})}},{"../../lib":1053,"../../plotly":1070,d3:64}],1140:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("../../plots/plots"),f=a("../../lib");b.exports=function(a,b){var c,g,h,i,j=a._fullLayout,k=b.x(),l=b.y(),m=["v","h"];for(g=0;g<m.length;++g){var n,o,p,q=m[g],r=[],s=[],t=0,u=0;for(c="h"===q?l:k,h=0;h<a.calcdata.length;++h)n=a.calcdata[h],o=n[0].t,p=n[0].trace,p.visible===!0&&e.traceIs(p,"box")&&!o.emptybox&&p.orientation===q&&p.xaxis===k._id&&p.yaxis===l._id&&(r.push(h),p.boxpoints!==!1&&(t=Math.max(t,p.jitter-p.pointpos-1),u=Math.max(u,p.jitter+p.pointpos-1)));for(h=0;h<r.length;h++)for(n=a.calcdata[r[h]],i=0;i<n.length;i++)s.push(n[i].pos);if(s.length){var v=f.distinctVals(s),w=v.minDiff/2;for(s.length===v.vals.length&&(a.numboxes=1),d.Axes.minDtick(c,v.minDiff,v.vals[0],!0),g=0;g<r.length;++g)a.calcdata[g][0].t.dPos=w;var x=(1-j.boxgap)*(1-j.boxgroupgap)*w/a.numboxes;d.Axes.expand(c,v.vals,{vpadminus:w+t*x,vpadplus:w+u*x})}}}},{"../../lib":1053,"../../plotly":1070,"../../plots/plots":1109}],1141:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../plotly"),f=a("../../components/color");b.exports=function(a){var b=d.select(a).selectAll("g.trace.boxes");b.style("opacity",function(a){return a[0].trace.opacity}).each(function(a){var b=a[0].trace,c=b.line.width;d.select(this).selectAll("path.box").style("stroke-width",c+"px").call(f.stroke,b.line.color).call(f.fill,b.fillcolor),d.select(this).selectAll("path.mean").style({"stroke-width":c,"stroke-dasharray":2*c+"px,"+c+"px"}).call(f.stroke,b.line.color),d.select(this).selectAll("g.points path").call(e.Drawing.pointStyle,b)})}},{"../../components/color":1005,"../../plotly":1070,d3:64}],1142:[function(a,b,c){var d=a("../scattergeo/attributes"),e=a("../../components/colorscale/attributes"),f=a("../../plots/attributes"),g=a("../../lib/extend").extendFlat,h=d.marker.line;b.exports={locations:{valType:"data_array"},locationmode:d.locationmode,z:{valType:"data_array"},text:{valType:"data_array"},marker:{line:{color:h.color,width:h.width}},zauto:e.zauto,zmin:e.zmin,zmax:e.zmax,colorscale:e.colorscale,autocolorscale:e.autocolorscale,reversescale:e.reversescale,showscale:e.showscale,hoverinfo:g({},f.hoverinfo,{flags:["location","z","text","name"]}),_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":1011,"../../lib/extend":1049,"../../plots/attributes":1071,"../scattergeo/attributes":1208}],1143:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/colorscale/defaults"),f=a("./attributes");b.exports=function(a,b,c,g){function h(c,e){return d.coerce(a,b,f,c,e)}var i,j=h("locations");if(j&&(i=j.length),!j||!i)return void(b.visible=!1);var k=h("z");return Array.isArray(k)?(k.length>i&&(b.z=k.slice(0,i)),h("locationmode"),h("text"),h("marker.line.color"),h("marker.line.width"),e(a,b,g,h,{prefix:"",cLetter:"z"}),void h("hoverinfo",1===g._dataLength?"location+z+text":void 0)):void(b.visible=!1)}},{"../../components/colorscale/defaults":1014,"../../lib":1053,"./attributes":1142}],1144:[function(a,b,c){"use strict";var d=a("../../plots/plots");d.register(c,"choropleth",["geo","noOpacity"],{}),c.attributes=a("./attributes"),c.supplyDefaults=a("./defaults"),c.colorbar=a("../heatmap/colorbar"),c.calc=a("../surface/calc")},{"../../plots/plots":1109,"../heatmap/colorbar":1157,"../surface/calc":1217,"./attributes":1142,"./defaults":1143}],1145:[function(a,b,c){"use strict";function d(a,b){function c(b){var c=a.mockAxis;return e.Axes.tickText(c,c.c2l(b),"hover").text}var d=b.hoverinfo;if("none"===d)return function(a){delete a.nameLabel,delete a.textLabel};var f="all"===d?o.hoverinfo.flags:d.split("+"),g=f.indexOf("name")!==-1,h=f.indexOf("location")!==-1,i=f.indexOf("z")!==-1,j=f.indexOf("text")!==-1,k=!g&&h;return function(a){var d=[];k?a.nameLabel=a.id:(g&&(a.nameLabel=b.name),h&&d.push(a.id)),i&&d.push(c(a.z)),j&&d.push(a.tx),a.textLabel=d.join("<br>")}}var e=a("../../plotly"),f=a("d3"),g=a("../../components/color"),h=a("../../components/drawing"),i=a("../../components/colorscale/get_scale"),j=a("../../components/colorscale/make_scale_function"),k=a("../../lib/topojson_utils").getTopojsonFeatures,l=a("../../lib/geo_location_utils").locationToFeature,m=a("../../lib/array_to_calc_item"),n=a("../../constants/geo_constants"),o=a("./attributes"),p=b.exports={};p.calcGeoJSON=function(a,b){for(var c,d=[],e=a.locations,f=e.length,g=k(a,b),h=(a.marker||{}).line||{},i=0;i<f;i++)c=l(a.locationmode,e[i],g),void 0!==c&&(c.z=a.z[i],void 0!==a.text&&(c.tx=a.text[i]),m(h.color,c,"mlc",i),m(h.width,c,"mlw",i),d.push(c));return d.length>0&&(d[0].trace=a),d},p.plot=function(a,b,c){var g,h=a.framework,i=a.topojson,j=h.select("g.choroplethlayer"),k=h.select("g.baselayer"),l=h.select("g.baselayeroverchoropleth"),m=n.baseLayersOverChoropleth;j.selectAll("*").remove(),l.selectAll("*").remove();var o=j.selectAll("g.trace.scatter").data(b);o.enter().append("g").attr("class","trace choropleth"),o.each(function(b){function c(b){if(a.showHover){var c=a.projection(b.properties.ct);h(b),e.Fx.loneHover({x:c[0],y:c[1],name:b.nameLabel,text:b.textLabel},{container:a.hoverContainer.node()})}}if(b.visible===!0){var g=p.calcGeoJSON(b,i),h=d(a,b);f.select(this).selectAll("path.choroplethlocation").data(g).enter().append("path").attr("class","choroplethlocation").on("mouseover",c).on("mouseout",function(){e.Fx.loneUnhover(a.hoverContainer)}).on("mousedown",function(){e.Fx.loneUnhover(a.hoverContainer)}).on("mouseup",c)}});for(var q=0;q<m.length;q++)g=m[q],k.select("g."+g).remove(),a.drawTopo(l,g,c),a.styleLayer(l,g,c);p.style(a)},p.style=function(a){a.framework.selectAll("g.trace.choropleth").each(function(a){var b=f.select(this),c=a.marker||{},d=c.line||{},e=a.zmin,k=a.zmax,l=i(a.colorscale),m=j(l,e,k);b.selectAll("path.choroplethlocation").each(function(a){f.select(this).attr("fill",function(a){return m(a.z)}).call(g.stroke,a.mlc||d.color).call(h.dashLine,"",a.mlw||d.width)})})}},{"../../components/color":1005,"../../components/colorscale/get_scale":1016,"../../components/colorscale/make_scale_function":1021,"../../components/drawing":1023,"../../constants/geo_constants":1039,"../../lib/array_to_calc_item":1045,"../../lib/geo_location_utils":1050,"../../lib/topojson_utils":1065,"../../plotly":1070,"./attributes":1142,d3:64}],1146:[function(a,b,c){var d=a("../heatmap/attributes"),e=a("../scatter/attributes"),f=a("../../lib/extend").extendFlat,g=e.line;b.exports={z:d.z,x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:d.text,transpose:d.transpose,xtype:d.xtype,ytype:d.ytype,zauto:d.zauto,zmin:d.zmin,zmax:d.zmax,colorscale:d.colorscale,autocolorscale:d.autocolorscale,reversescale:d.reversescale,showscale:d.showscale,connectgaps:d.connectgaps,autocontour:{valType:"boolean",dflt:!0},ncontours:{valType:"integer",dflt:0},contours:{start:{valType:"number",dflt:null},end:{valType:"number",dflt:null},size:{valType:"number",dflt:null},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill"},showlines:{valType:"boolean",dflt:!0}},line:{color:f({},g.color,{}),width:g.width,dash:g.dash,smoothing:f({},g.smoothing,{})},_nestedModules:{colorbar:"Colorbar"}}},{"../../lib/extend":1049,"../heatmap/attributes":1155,"../scatter/attributes":1197}],1147:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("../heatmap/calc");b.exports=function(a,b){var c=e(a,b),f=b.contours;if(b.autocontour!==!1){var g={type:"linear",range:[b.zmin,b.zmax]};d.Axes.autoTicks(g,(b.zmax-b.zmin)/(b.ncontours||15)),f.start=d.Axes.tickFirst(g),f.size=g.dtick,g.range.reverse(),f.end=d.Axes.tickFirst(g),f.start===b.zmin&&(f.start+=f.size),f.end===b.zmax&&(f.end-=f.size),f.end+=f.size/100,b._input.contours=f}return c}},{"../../plotly":1070,"../heatmap/calc":1156}],1148:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../plotly"),f=a("../../components/colorscale/get_scale"),g=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,h="cb"+c.uid;if(a._fullLayout._infolayer.selectAll("."+h).remove(),c.showscale===!1)return void e.Plots.autoMargin(a,h);var i=g(a,h);b[0].t.cb=i;var j=c.contours,k=c.line,l=j.size||1,m=Math.floor((j.end+l/10-j.start)/l)+1,n=f(c.colorscale),o="lines"===j.coloring?0:1,p=d.scale.linear().interpolate(d.interpolateRgb),q=n.map(function(a){return(a[0]*(m+o-1)-o/2)*l+j.start}),r=n.map(function(a){return a[1]});if("heatmap"===j.coloring){c.zauto&&c.autocontour===!1&&(c.zmin=j.start-l/2,c.zmax=c.zmin+m*l),i.filllevels({start:c.zmin,end:c.zmax,size:(c.zmax-c.zmin)/254}),q=n.map(function(a){return a[0]*(c.zmax-c.zmin)+c.zmin});var s=d.extent([c.zmin,c.zmax,j.start,j.start+l*(m-1)]),t=s[c.zmin<c.zmax?0:1],u=s[c.zmin<c.zmax?1:0];t!==c.zmin&&(q.splice(0,0,t),r.splice(0,0,r[0])),u!==c.zmax&&(q.push(u),r.push(r[r.length-1]))}p.domain(q).range(r),i.fillcolor("fill"===j.coloring||"heatmap"===j.coloring?p:"").line({color:"lines"===j.coloring?p:k.color,width:j.showlines!==!1?k.width:0,dash:k.dash}).levels({start:j.start,end:j.end,size:l}).options(c.colorbar)()}},{"../../components/colorbar/draw":1008,"../../components/colorscale/get_scale":1016,"../../plotly":1070,d3:64}],1149:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../heatmap/has_columns"),f=a("../heatmap/xyz_defaults"),g=a("../contour/style_defaults"),h=a("./attributes");b.exports=function(a,b,c,i){function j(c,e){return d.coerce(a,b,h,c,e)}var k=f(a,b,j);if(!k)return void(b.visible=!1);j("text"),j("connectgaps",e(b));var l=d.coerce2(a,b,h,"contours.start"),m=d.coerce2(a,b,h,"contours.end"),n=j("autocontour",!(l&&m));j(n?"ncontours":"contours.size"),g(a,b,j,i)}},{"../../lib":1053,"../contour/style_defaults":1154,"../heatmap/has_columns":1160,"../heatmap/xyz_defaults":1166,"./attributes":1146}],1150:[function(a,b,c){"use strict";var d=a("../heatmap/hover");b.exports=function(a,b,c,e){return d(a,b,c,e,!0)}},{"../heatmap/hover":1161}],1151:[function(a,b,c){"use strict";var d=a("../../plotly");d.Plots.register(c,"contour",["cartesian","2dMap","contour"],{}),c.attributes=a("./attributes"),c.supplyDefaults=a("./defaults"),c.calc=a("./calc"),c.plot=a("./plot"),c.style=a("./style"),c.colorbar=a("./colorbar"),c.hoverPoints=a("./hover")},{"../../plotly":1070,"./attributes":1146,"./calc":1147,"./colorbar":1148,"./defaults":1149,"./hover":1150,"./plot":1152,"./style":1153}],1152:[function(a,b,c){"use strict";function d(a,b,c){w.markTime("in Contour.plot");var d=c[0].trace,f=c[0].x,h=c[0].y,j=d.contours,k=d.uid,l=b.x(),m=b.y(),q=a._fullLayout,t="contour"+k,u=e(j,b,c[0]);if(d.visible!==!0)return void q._paper.selectAll("."+t+",.cb"+k+",.hm"+k).remove();"heatmap"===j.coloring?(d.zauto&&d.autocontour===!1&&(d._input.zmin=d.zmin=j.start-j.size/2,d._input.zmax=d.zmax=d.zmin+u.length*j.size),x(a,b,[c])):q._paper.selectAll(".hm"+k).remove(),g(u),i(u);var y=l.c2p(f[0],!0),z=l.c2p(f[f.length-1],!0),A=m.c2p(h[0],!0),B=m.c2p(h[h.length-1],!0),C=[[y,B],[z,B],[z,A],[y,A]],D=n(b,c,t);o(D,C,j),p(D,u,C,j),r(D,u,j),s(D,b,c[0],C),v.Lib.markTime("done Contour.plot")}function e(a,b,c){for(var d=a.size||1,e=[],f=a.start;f<a.end+d/10;f+=d)e.push({level:f,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:b.x(),yaxis:b.y(),x:c.x,y:c.y,z:c.z,smoothing:c.trace.line.smoothing});return e}function f(a,b){var c=(b[0][0]>a?0:1)+(b[0][1]>a?0:2)+(b[1][1]>a?0:4)+(b[1][0]>a?0:8);if(5===c||10===c){var d=(b[0][0]+b[0][1]+b[1][0]+b[1][1])/4;return a>d?5===c?713:1114:5===c?104:208}return 15===c?0:c}function g(a){var b,c,d,e,g,h,i,j,k,l=a[0].z,m=l.length,n=l[0].length,o=2===m||2===n;for(c=0;c<m-1;c++)for(e=[],0===c&&(e=e.concat(y)),c===m-2&&(e=e.concat(z)),b=0;b<n-1;b++)for(d=e.slice(),0===b&&(d=d.concat(A)),b===n-2&&(d=d.concat(B)),g=b+","+c,h=[[l[c][b],l[c][b+1]],[l[c+1][b],l[c+1][b+1]]],k=0;k<a.length;k++)j=a[k],i=f(j.level,h),i&&(j.crossings[g]=i,d.indexOf(i)!==-1&&(j.starts.push([b,c]),o&&d.indexOf(i,d.indexOf(i)+1)!==-1&&j.starts.push([b,c])))}function h(a,b,c){function d(a){return i[a%i.length]}for(var e=b.join(","),f=e,g=a.crossings[f],h=j(g,c,b),i=[m(a,b,[-h[0],-h[1]])],n=h.join(","),o=a.z.length,p=a.z[0].length,q=0;q<1e4;q++){if(g>20?(g=D[g][(h[0]||h[1])<0?0:1],a.crossings[f]=E[g]):delete a.crossings[f],h=C[g],!h){console.log("found bad marching index",g,b,a.level);break}if(i.push(m(a,b,h)),b[0]+=h[0],b[1]+=h[1],k(i[i.length-1],i[i.length-2])&&i.pop(),f=b.join(","),f===e&&h.join(",")===n||c&&(h[0]&&(b[0]<0||b[0]>p-2)||h[1]&&(b[1]<0||b[1]>o-2)))break;g=a.crossings[f]}1e4===q&&console.log("Infinite loop in contour?");var r,s,t,u,v,w,x,y=k(i[0],i[i.length-1]),z=0,A=.2*a.smoothing,B=[],F=0;for(q=1;q<i.length;q++)x=l(i[q],i[q-1]),z+=x,B.push(x);var G=z/B.length*A;for(q=i.length-2;q>=F;q--)if(r=B[q],r<G){for(t=0,s=q-1;s>=F&&r+B[s]<G;s--)r+=B[s];if(y&&q===i.length-2)for(t=0;t<s&&r+B[t]<G;t++)r+=B[t];v=q-s+t+1,w=Math.floor((q+s+t+2)/2),u=y||q!==i.length-2?y||s!==-1?v%2?d(w):[(d(w)[0]+d(w+1)[0])/2,(d(w)[1]+d(w+1)[1])/2]:i[0]:i[i.length-1],i.splice(s+1,q-s+1,u),q=s+1,t&&(F=t),y&&(q===i.length-2?i[t]=i[i.length-1]:0===q&&(i[i.length-1]=i[0]))}if(i.splice(0,F),!(i.length<2))if(y)i.pop(),a.paths.push(i);else{c||console.log("unclosed interior contour?",a.level,e,i.join("L"));var H=!1;a.edgepaths.forEach(function(b,c){if(!H&&k(b[0],i[i.length-1])){i.pop(),H=!0;var d=!1;a.edgepaths.forEach(function(b,e){!d&&k(b[b.length-1],i[0])&&(d=!0,i.splice(0,1),a.edgepaths.splice(c,1),e===c?a.paths.push(i.concat(b)):a.edgepaths[e]=a.edgepaths[e].concat(i,b))}),d||(a.edgepaths[c]=i.concat(b))}}),a.edgepaths.forEach(function(b,c){!H&&k(b[b.length-1],i[0])&&(i.splice(0,1),a.edgepaths[c]=b.concat(i),H=!0)}),H||a.edgepaths.push(i)}}function i(a){var b,c,d,e,f;for(d=0;d<a.length;d++){for(e=a[d],f=0;f<e.starts.length;f++)c=e.starts[f],h(e,c,"edge");for(b=0;Object.keys(e.crossings).length&&b<1e4;)b++,c=Object.keys(e.crossings)[0].split(",").map(Number),h(e,c);1e4===b&&console.log("Infinite loop in contour?")}}function j(a,b,c){var d=0,e=0;return a>20&&b?208===a||1114===a?d=0===c[0]?1:-1:e=0===c[1]?1:-1:y.indexOf(a)!==-1?e=1:A.indexOf(a)!==-1?d=1:z.indexOf(a)!==-1?e=-1:d=-1,[d,e]}function k(a,b){return Math.abs(a[0]-b[0])<.01&&Math.abs(a[1]-b[1])<.01}function l(a,b){var c=a[0]-b[0],d=a[1]-b[1];return Math.sqrt(c*c+d*d)}function m(a,b,c){var d=b[0]+Math.max(c[0],0),e=b[1]+Math.max(c[1],0),f=a.z[e][d],g=a.xaxis,h=a.yaxis;if(c[1]){var i=(a.level-f)/(a.z[e][d+1]-f);return[g.c2p((1-i)*a.x[d]+i*a.x[d+1],!0),h.c2p(a.y[e],!0)]}var j=(a.level-f)/(a.z[e+1][d]-f);return[g.c2p(a.x[d],!0),h.c2p((1-j)*a.y[e]+j*a.y[e+1],!0)]}function n(a,b,c){var d=a.plot.select(".maplayer").selectAll("g.contour."+c).data(b);return d.enter().append("g").classed("contour",!0).classed(c,!0),d.exit().remove(),d}function o(a,b,c){var d=a.selectAll("g.contourbg").data([0]);d.enter().append("g").classed("contourbg",!0);var e=d.selectAll("path").data("fill"===c.coloring?[0]:[]);e.enter().append("path"),e.exit().remove(),e.attr("d","M"+b.join("L")+"Z").style("stroke","none")}function p(a,b,c,d){var e=a.selectAll("g.contourfill").data([0]);e.enter().append("g").classed("contourfill",!0);var f=e.selectAll("path").data("fill"===d.coloring?b:[]);f.enter().append("path"),f.exit().remove(),f.each(function(a){var b=q(a,c);b?u.select(this).attr("d",b).style("stroke","none"):u.select(this).remove()})}function q(a,b){function c(a){return Math.abs(a[1]-b[0][1])<.01}function d(a){return Math.abs(a[1]-b[2][1])<.01}function e(a){return Math.abs(a[0]-b[0][0])<.01}function f(a){return Math.abs(a[0]-b[2][0])<.01}for(var g,h,i,j,k,l,m=a.edgepaths.length||a.z[0][0]<a.level?"":"M"+b.join("L")+"Z",n=0,o=a.edgepaths.map(function(a,b){return b}),p=!0;o.length;){for(l=v.Drawing.smoothopen(a.edgepaths[n],a.smoothing),m+=p?l:l.replace(/^M/,"L"),o.splice(o.indexOf(n),1),g=a.edgepaths[n][a.edgepaths[n].length-1],j=-1,i=0;i<4;i++){if(!g){console.log("missing end?",n,a);break}for(c(g)&&!f(g)?h=b[1]:e(g)?h=b[0]:d(g)?h=b[3]:f(g)&&(h=b[2]),k=0;k<a.edgepaths.length;k++){var q=a.edgepaths[k][0];Math.abs(g[0]-h[0])<.01?Math.abs(g[0]-q[0])<.01&&(q[1]-g[1])*(h[1]-q[1])>=0&&(h=q,j=k):Math.abs(g[1]-h[1])<.01?Math.abs(g[1]-q[1])<.01&&(q[0]-g[0])*(h[0]-q[0])>=0&&(h=q,j=k):console.log("endpt to newendpt is not vert. or horz.",g,h,q)}if(g=h,j>=0)break;m+="L"+h}if(j===a.edgepaths.length){console.log("unclosed perimeter path");break}n=j,p=o.indexOf(n)===-1,p&&(n=o[0],m+="Z")}for(n=0;n<a.paths.length;n++)m+=v.Drawing.smoothclosed(a.paths[n],a.smoothing);return m}function r(a,b,c){var d=b[0].smoothing,e=a.selectAll("g.contourlevel").data(c.showlines===!1?[]:b);e.enter().append("g").classed("contourlevel",!0),e.exit().remove();var f=e.selectAll("path.openline").data(function(a){return a.edgepaths});f.enter().append("path").classed("openline",!0),f.exit().remove(),f.attr("d",function(a){return v.Drawing.smoothopen(a,d)}).style("stroke-miterlimit",1);var g=e.selectAll("path.closedline").data(function(a){return a.paths});g.enter().append("path").classed("closedline",!0),g.exit().remove(),g.attr("d",function(a){return v.Drawing.smoothclosed(a,d)}).style("stroke-miterlimit",1)}function s(a,b,c,d){var e="clip"+c.trace.uid,f=b.plot.selectAll("defs").data([0]);f.enter().append("defs");var h=f.selectAll("#"+e).data(c.trace.connectgaps?[]:[0]);if(h.enter().append("clipPath").attr("id",e),h.exit().remove(),c.trace.connectgaps===!1){var j={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:b.x(),yaxis:b.y(),x:c.x,y:c.y,z:t(c),smoothing:0};g([j]),i([j]);var k=q(j,d),l=h.selectAll("path").data([0]);l.enter().append("path"),l.attr("d",k)}else e=null;a.call(v.Drawing.setClipUrl,e),b.plot.selectAll(".hm"+c.trace.uid).call(v.Drawing.setClipUrl,e)}function t(a){var b,c,d=a.trace._emptypoints,e=[],f=a.z.length,g=a.z[0].length,h=[];for(b=0;b<g;b++)h.push(1);for(b=0;b<f;b++)e.push(h.slice());for(b=0;b<d.length;b++)c=d[b],e[c[0]][c[1]]=0;return a.zmask=e,e}var u=a("d3"),v=a("../../plotly"),w=a("../../lib"),x=a("../heatmap/plot");b.exports=function(a,b,c){for(var e=0;e<c.length;e++)d(a,b,c[e])};var y=[1,9,13,104,713],z=[4,6,7,104,713],A=[8,12,14,208,1114],B=[2,3,11,208,1114],C=[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],D={104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},E={1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11}},{"../../lib":1053,"../../plotly":1070,"../heatmap/plot":1164,d3:64}],1153:[function(a,b,c){"use strict";var d=a("d3"),e=a("../../plotly"),f=a("../../components/colorscale/get_scale"),g=a("../heatmap/style");b.exports=function(a){d.select(a).selectAll("g.contour").style("opacity",function(a){return a.trace.opacity}).each(function(a){var b=d.select(this),c=a.trace,g=c.contours,h=c.line,i="lines"===g.coloring,j=g.size||1,k=Math.floor((g.end+j/10-g.start)/j)+1,l=f(c.colorscale),m=i?0:1,n=d.scale.linear().domain(l.map(function(a){return(a[0]*(k+m-1)-m/2)*j+g.start})).interpolate(d.interpolateRgb).range(l.map(function(a){return a[1]}));b.selectAll("g.contourlevel").each(function(a,b){d.select(this).selectAll("path").call(e.Drawing.lineGroupStyle,h.width,i?n(g.start+b*j):h.color,h.dash)}),b.selectAll("g.contourbg path").style("fill",n(g.start-j/2)),b.selectAll("g.contourfill path").style("fill",function(a,b){return n(g.start+(b+.5)*j)})}),g(a)}},{"../../components/colorscale/get_scale":1016,"../../plotly":1070,"../heatmap/style":1165,d3:64}],1154:[function(a,b,c){"use strict";var d=a("../../components/colorscale/defaults");b.exports=function(a,b,c,e){var f,g=c("contours.coloring");"fill"===g&&(f=c("contours.showlines")),f!==!1&&("lines"!==g&&c("line.color","#000"),c("line.width",.5),c("line.dash")),c("line.smoothing"),"none"!==(b.contours||{}).coloring&&d(a,b,e,c,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":1014}],1155:[function(a,b,c){var d=a("../scatter/attributes"),e=a("../../components/colorscale/attributes"),f=a("../../lib/extend").extendFlat;b.exports={z:{valType:"data_array"},x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:{valType:"data_array"},transpose:{valType:"boolean",dflt:!1},xtype:{valType:"enumerated",values:["array","scaled"]},ytype:{valType:"enumerated",values:["array","scaled"]},zauto:e.zauto,zmin:e.zmin,zmax:e.zmax,colorscale:e.colorscale,autocolorscale:f({},e.autocolorscale,{dflt:!1}),reversescale:e.reversescale,showscale:e.showscale,zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1},connectgaps:{valType:"boolean",dflt:!1},_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":1011,"../../lib/extend":1049,"../scatter/attributes":1197}],1156:[function(a,b,c){"use strict";function d(a){function b(a){if(j(a))return+a}var c,d,e,f,g,h,i=a.z;if(a.transpose){for(c=0,g=0;g<i.length;g++)c=Math.max(c,i[g].length);if(0===c)return!1;e=function(a){return a.length},f=function(a,b,c){return a[c][b]}}else c=i.length,e=function(a,b){return a[b].length},f=function(a,b,c){return a[b][c]};var k=new Array(c);for(g=0;g<c;g++)for(d=e(i,g),k[g]=new Array(d),h=0;h<d;h++)k[g][h]=b(f(i,g,h));return k}function e(a,b,c,d,e,f){var g,h,i,j=[],l=k.Plots.traceIs(a,"contour"),m=k.Plots.traceIs(a,"histogram");if(Array.isArray(b)&&!m&&"category"!==f.type){b=b.map(f.d2c);var n=b.length;if(!(n<=e))return l?b.slice(0,e):b.slice(0,e+1);if(l)j=b.slice(0,e);else if(1===e)j=[b[0]-.5,b[0]+.5];else{for(j=[1.5*b[0]-.5*b[1]],i=1;i<n;i++)j.push(.5*(b[i-1]+b[i]));j.push(1.5*b[n-1]-.5*b[n-2])}if(n<e){var o=j[j.length-1],p=o-j[j.length-2];for(i=n;i<e;i++)o+=p,j.push(o)}}else for(h=d||1,g=void 0===c?0:m||"category"===f.type?c:f.d2c(c),i=l?0:-.5;i<e;i++)j.push(g+h*i);return j}function f(a){return.5-.25*Math.min(1,.5*a)}function g(a,b,c){var d,e,g=1;if(Array.isArray(c))for(d=0;d<b.length;d++)e=b[d],a[e[0]][e[1]]=c[e[0]][e[1]];else i(a,b);for(d=0;d<b.length&&!(b[d][2]<4);d++);for(b=b.slice(d),d=0;d<100&&g>r;d++)g=i(a,b,f(g));return g>r&&console.log("interp2d didn't converge quickly",g),a}function h(a){var b,c,d,e,f,g,h,i,j=[],k={},l=[],m=a[0],n=[],o=[0,0,0],p=q(a);for(c=0;c<a.length;c++)for(b=n,n=m,m=a[c+1]||[],d=0;d<p;d++)void 0===n[d]&&(g=(void 0!==n[d-1]?1:0)+(void 0!==n[d+1]?1:0)+(void 0!==b[d]?1:0)+(void 0!==m[d]?1:0),g?(0===c&&g++,0===d&&g++,c===a.length-1&&g++,d===n.length-1&&g++,g<4&&(k[[c,d]]=[c,d,g]),j.push([c,d,g])):l.push([c,d]));for(;l.length;){for(h={},i=!1,f=l.length-1;f>=0;f--)e=l[f],c=e[0],d=e[1],g=((k[[c-1,d]]||o)[2]+(k[[c+1,d]]||o)[2]+(k[[c,d-1]]||o)[2]+(k[[c,d+1]]||o)[2])/20,g&&(h[e]=[c,d,g],l.splice(f,1),i=!0);if(!i)throw"findEmpties iterated with no new neighbors";for(e in h)k[e]=h[e],j.push(h[e])}return j.sort(function(a,b){return b[2]-a[2]})}function i(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q=0;for(g=0;g<b.length;g++){for(d=b[g],e=d[0],f=d[1],n=a[e][f],m=0,l=0,h=0;h<4;h++)i=s[h],j=a[e+i[0]],j&&(k=j[f+i[1]],void 0!==k&&(0===m?o=p=k:(o=Math.min(o,k),p=Math.max(p,k)),l++,m+=k));if(0===l)throw"iterateInterp2d order is wrong: no defined neighbors";a[e][f]=m/l,void 0===n?l<4&&(q=1):(a[e][f]=(1+c)*a[e][f]-c*n,p>o&&(q=Math.max(q,Math.abs(a[e][f]-n)/(p-o))))}return q}var j=a("fast-isnumeric"),k=a("../../plotly"),l=a("../../lib"),m=a("../histogram2d/calc"),n=a("../../components/colorscale/calc"),o=a("./has_columns"),p=a("./convert_column_xyz"),q=a("./max_row_length");b.exports=function(a,b){function c(a){A=b._input.zsmooth=b.zsmooth=!1,l.notifier("cannot fast-zsmooth: "+a)}l.markTime("start convert x&y");var f,i,j,r,s,t,u,v,w=k.Axes.getFromId(a,b.xaxis||"x"),x=k.Axes.getFromId(a,b.yaxis||"y"),y=k.Plots.traceIs(b,"contour"),z=k.Plots.traceIs(b,"histogram"),A=y?"best":b.zsmooth;if(w._minDtick=0,x._minDtick=0,l.markTime("done convert x&y"),z){var B=m(a,b);f=B.x,i=B.x0,j=B.dx,r=B.y,s=B.y0,t=B.dy,u=B.z}else o(b)&&p(b,w,x),f=b.x?w.makeCalcdata(b,"x"):[],r=b.y?x.makeCalcdata(b,"y"):[],i=b.x0||0,j=b.dx||1,s=b.y0||0,t=b.dy||1,u=d(b),(y||b.connectgaps)&&(b._emptypoints=h(u),b._interpz=g(u,b._emptypoints,b._interpz));if("fast"===A)if("log"===w.type||"log"===x.type)c("log axis found");else if(!z){if(f.length){var C=(f[f.length-1]-f[0])/(f.length-1),D=Math.abs(C/100);for(v=0;v<f.length-1;v++)if(Math.abs(f[v+1]-f[v]-C)>D){c("x scale is not linear");break}}if(r.length&&"fast"===A){var E=(r[r.length-1]-r[0])/(r.length-1),F=Math.abs(E/100);for(v=0;v<r.length-1;v++)if(Math.abs(r[v+1]-r[v]-E)>F){c("y scale is not linear");break}}}var G=q(u),H="scaled"===b.xtype?"":b.x,I=e(b,H,i,j,G,w),J="scaled"===b.ytype?"":b.y,K=e(b,J,s,t,u.length,x);k.Axes.expand(w,I),k.Axes.expand(x,K);var L={x:I,y:K,z:u};if(n(b,u,"","z"),y&&b.contours&&"heatmap"===b.contours.coloring){var M="contour"===b.type?"heatmap":"histogram2d";L.xfill=e(M,H,i,j,G,w),L.yfill=e(M,J,s,t,u.length,x)}return[L]};var r=.01,s=[[-1,0],[1,0],[0,-1],[0,1]]},{"../../components/colorscale/calc":1012,"../../lib":1053,"../../plotly":1070,"../histogram2d/calc":1176,"./convert_column_xyz":1158,"./has_columns":1160,"./max_row_length":1163,"fast-isnumeric":72}],1157:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=a("../../plotly"),g=a("../../lib"),h=a("../../components/colorscale/get_scale"),i=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,j="cb"+c.uid,k=h(c.colorscale),l=c.zmin,m=c.zmax;if(e(l)||(l=g.aggNums(Math.min,null,c.z)),e(m)||(m=g.aggNums(Math.max,null,c.z)),a._fullLayout._infolayer.selectAll("."+j).remove(),!c.showscale)return void f.Plots.autoMargin(a,j);var n=b[0].t.cb=i(a,j);n.fillcolor(d.scale.linear().domain(k.map(function(a){return l+a[0]*(m-l)})).range(k.map(function(a){return a[1]}))).filllevels({start:l,end:m,size:(m-l)/254}).options(c.colorbar)(),g.markTime("done colorbar")}},{"../../components/colorbar/draw":1008,
"../../components/colorscale/get_scale":1016,"../../lib":1053,"../../plotly":1070,d3:64,"fast-isnumeric":72}],1158:[function(a,b,c){"use strict";var d=a("../../lib");b.exports=function(a,b,c){var e,f=a.x.slice(),g=a.y.slice(),h=a.z,i=a.text,j=Math.min(f.length,g.length,h.length),k=void 0!==i&&!Array.isArray(i[0]);for(j<f.length&&(f=f.slice(0,j)),j<g.length&&(g=g.slice(0,j)),e=0;e<j;e++)f[e]=b.d2c(f[e]),g[e]=c.d2c(g[e]);var l,m,n,o=d.distinctVals(f),p=o.vals,q=d.distinctVals(g),r=q.vals,s=d.init2dArray(r.length,p.length);for(k&&(n=d.init2dArray(r.length,p.length)),e=0;e<j;e++)l=d.findBin(f[e]+o.minDiff/2,p),m=d.findBin(g[e]+q.minDiff/2,r),s[m][l]=h[e],k&&(n[m][l]=i[e]);a.x=p,a.y=r,a.z=s,k&&(a.text=n)}},{"../../lib":1053}],1159:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./has_columns"),f=a("./xyz_defaults"),g=a("../../components/colorscale/defaults"),h=a("./attributes");b.exports=function(a,b,c,i){function j(c,e){return d.coerce(a,b,h,c,e)}var k=f(a,b,j);return k?(j("text"),j("zsmooth"),j("connectgaps",e(b)&&b.zsmooth!==!1),void g(a,b,i,j,{prefix:"",cLetter:"z"})):void(b.visible=!1)}},{"../../components/colorscale/defaults":1014,"../../lib":1053,"./attributes":1155,"./has_columns":1160,"./xyz_defaults":1166}],1160:[function(a,b,c){"use strict";b.exports=function(a){return!Array.isArray(a.z[0])}},{}],1161:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("../../lib");b.exports=function(a,b,c,f,g){if(!(a.distance<d.Fx.MAXDIST)){var h,i,j,k,l=a.cd[0],m=l.trace,n=a.xa,o=a.ya,p=l.x,q=l.y,r=l.z,s=l.zmask,t=p,u=q;if(a.index!==!1){try{j=Math.round(a.index[1]),k=Math.round(a.index[0])}catch(v){return void console.log("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index)}if(j<0||j>=r[0].length||k<0||k>r.length)return}else{if(d.Fx.inbox(b-p[0],b-p[p.length-1])>d.Fx.MAXDIST||d.Fx.inbox(c-q[0],c-q[q.length-1])>d.Fx.MAXDIST)return;if(g){t=[2*p[0]-p[1]];for(var w=1;w<p.length;w++)t.push((p[w]+p[w-1])/2);for(t.push([2*p[p.length-1]-p[p.length-2]]),u=[2*q[0]-q[1]],w=1;w<q.length;w++)u.push((q[w]+q[w-1])/2);u.push([2*q[q.length-1]-q[q.length-2]])}j=Math.max(0,Math.min(t.length-2,e.findBin(b,t))),k=Math.max(0,Math.min(u.length-2,e.findBin(c,u)))}var x=n.c2p(p[j]),y=n.c2p(p[j+1]),z=o.c2p(q[k]),A=o.c2p(q[k+1]);g?(y=x,h=p[j],A=z,i=q[k]):(h=(p[j]+p[j+1])/2,i=(q[k]+q[k+1])/2,m.zsmooth&&(x=y=(x+y)/2,z=A=(z+A)/2));var B=r[k][j];s&&!s[k][j]&&(B=void 0);var C;return Array.isArray(m.text)&&Array.isArray(m.text[k])&&(C=m.text[k][j]),[e.extendFlat(a,{index:[k,j],distance:d.Fx.MAXDIST+10,x0:x,x1:y,y0:z,y1:A,xLabelVal:h,yLabelVal:i,zLabelVal:B,text:C})]}}},{"../../lib":1053,"../../plotly":1070}],1162:[function(a,b,c){"use strict";var d=a("../../plotly");d.Plots.register(c,"heatmap",["cartesian","2dMap"],{}),c.attributes=a("./attributes"),c.supplyDefaults=a("./defaults"),c.calc=a("./calc"),c.plot=a("./plot"),c.colorbar=a("./colorbar"),c.style=a("./style"),c.hoverPoints=a("./hover")},{"../../plotly":1070,"./attributes":1155,"./calc":1156,"./colorbar":1157,"./defaults":1159,"./hover":1161,"./plot":1164,"./style":1165}],1163:[function(a,b,c){"use strict";b.exports=function(a){for(var b=0,c=0;c<a.length;c++)b=Math.max(b,a[c].length);return b}},{}],1164:[function(a,b,c){"use strict";function d(a,b,c){function d(a,b){var c=b.length-2,d=h.constrain(h.findBin(a,b),0,c),e=b[d],f=b[d+1],g=h.constrain(d+(a-e)/(f-e)-.5,0,c),i=Math.round(g),j=Math.abs(g-i);return g&&g!==c&&j?{bin0:i,frac:j,bin1:Math.round(i+j/(g-i))}:{bin0:i,bin1:i,frac:0}}function k(a,b){if(void 0!==a){var c=V((a-B)/(C-B));return c[0]=Math.round(c[0]),c[1]=Math.round(c[1]),c[2]=Math.round(c[2]),ea+=b,fa+=c[0]*b,ga+=c[1]*b,ha+=c[2]*b,c}return[0,0,0,0]}function l(a,b,c){a[b]=c[0],a[b+1]=c[1],a[b+2]=c[2],a[b+3]=Math.round(255*c[3])}function m(a,b,c,d){var e=a[c.bin0];if(void 0===e)return k(void 0,1);var f,g=a[c.bin1],h=b[c.bin0],i=b[c.bin1],j=g-e||0,l=h-e||0;return f=void 0===g?void 0===i?0:void 0===h?2*(i-e):2*(2*i-h-e)/3:void 0===i?void 0===h?0:2*(2*e-g-h)/3:void 0===h?2*(2*i-g-e)/3:i+e-g-h,k(e+c.frac*j+d.frac*(l+c.frac*f))}h.markTime("in Heatmap.plot");var n=c[0].trace,o=n.uid,p=b.x(),q=b.y(),r=a._fullLayout,s="hm"+o,t="cb"+o;if(r._paper.selectAll(".contour"+o).remove(),n.visible!==!0)return r._paper.selectAll("."+s).remove(),void r._paper.selectAll("."+t).remove();var u,v,w,x,y,z,A=c[0].z,B=n.zmin,C=n.zmax,D=i(n.colorscale),E=c[0].x,F=c[0].y,G=g.Plots.traceIs(n,"contour"),H=G?"best":n.zsmooth,I=A.length,J=j(A),K=!1,L=!1;for(z=0;void 0===u&&z<E.length-1;)u=p.c2p(E[z]),z++;for(z=E.length-1;void 0===v&&z>0;)v=p.c2p(E[z]),z--;for(v<u&&(w=v,v=u,u=w,K=!0),z=0;void 0===x&&z<F.length-1;)x=q.c2p(F[z]),z++;for(z=F.length-1;void 0===y&&z>0;)y=q.c2p(F[z]),z--;if(y<x&&(w=x,x=y,y=w,L=!0),G&&(E=c[0].xfill,F=c[0].yfill),"fast"!==H){var M="best"===H?0:.5;u=Math.max(-M*p._length,u),v=Math.min((1+M)*p._length,v),x=Math.max(-M*q._length,x),y=Math.min((1+M)*q._length,y)}var N=Math.round(v-u),O=Math.round(y-x);if(!(N<=0||O<=0)){var P,Q;"fast"===H?(P=J,Q=I):(P=N,Q=O);var R=document.createElement("canvas");R.width=P,R.height=Q;var S,T,U=R.getContext("2d"),V=e.scale.linear().domain(D.map(function(a){return a[0]})).range(D.map(function(a){var b=f(a[1]).toRgb();return[b.r,b.g,b.b,b.a]})).clamp(!0);"fast"===H?(S=K?function(a){return J-1-a}:h.identity,T=L?function(a){return I-1-a}:h.identity):(S=function(a){return h.constrain(Math.round(p.c2p(E[a])-u),0,N)},T=function(a){return h.constrain(Math.round(q.c2p(F[a])-x),0,O)}),h.markTime("done init png");var W,X,Y,Z,$,_,aa=T(0),ba=[aa,aa],ca=K?0:1,da=L?0:1,ea=0,fa=0,ga=0,ha=0;if(H){var ia=0,ja=new Uint8Array(N*O*4);if("best"===H){var ka,la,ma,na=new Array(E.length),oa=new Array(F.length),pa=new Array(N);for(z=0;z<E.length;z++)na[z]=Math.round(p.c2p(E[z])-u);for(z=0;z<F.length;z++)oa[z]=Math.round(q.c2p(F[z])-x);for(z=0;z<N;z++)pa[z]=d(z,na);for(X=0;X<O;X++)for(ka=d(X,oa),la=A[ka.bin0],ma=A[ka.bin1],z=0;z<N;z++,ia+=4)_=m(la,ma,pa[z],ka),l(ja,ia,_)}else for(X=0;X<I;X++)for($=A[X],ba=T(X),z=0;z<J;z++)_=k($[z],1),ia=4*(ba*N+S(z)),l(ja,ia,_);var qa=U.createImageData(N,O);qa.data.set(ja),U.putImageData(qa,0,0)}else for(X=0;X<I;X++)if($=A[X],ba.reverse(),ba[da]=T(X+1),ba[0]!==ba[1]&&void 0!==ba[0]&&void 0!==ba[1])for(Y=S(0),W=[Y,Y],z=0;z<J;z++)W.reverse(),W[ca]=S(z+1),W[0]!==W[1]&&void 0!==W[0]&&void 0!==W[1]&&(Z=$[z],_=k(Z,(W[1]-W[0])*(ba[1]-ba[0])),U.fillStyle="rgba("+_.join(",")+")",U.fillRect(W[0],ba[0],W[1]-W[0],ba[1]-ba[0]));h.markTime("done filling png"),fa=Math.round(fa/ea),ga=Math.round(ga/ea),ha=Math.round(ha/ea);var ra=f("rgb("+fa+","+ga+","+ha+")");a._hmpixcount=(a._hmpixcount||0)+ea,a._hmlumcount=(a._hmlumcount||0)+ea*ra.getLuminance(),r._paper.selectAll("."+s).remove(),b.plot.select(".maplayer").append("svg:image").classed(s,!0).datum(c[0]).attr({xmlns:"http://www.w3.org/2000/svg","xlink:xlink:href":R.toDataURL("image/png"),height:O,width:N,x:u,y:x,preserveAspectRatio:"none"}),h.markTime("done showing png")}}var e=a("d3"),f=a("tinycolor2"),g=a("../../plotly"),h=a("../../lib"),i=a("../../components/colorscale/get_scale"),j=a("./max_row_length");b.exports=function(a,b,c){c.forEach(function(c){d(a,b,c)})}},{"../../components/colorscale/get_scale":1016,"../../lib":1053,"../../plotly":1070,"./max_row_length":1163,d3:64,tinycolor2:998}],1165:[function(a,b,c){"use strict";var d=a("d3");b.exports=function(a){d.select(a).selectAll("image").style("opacity",function(a){return a.trace.opacity})}},{d3:64}],1166:[function(a,b,c){"use strict";function d(a,b){var c=b(a),d=c?b(a+"type","array"):"scaled";return"scaled"===d&&(b(a+"0"),b("d"+a)),c}function e(a){for(var b,c=!0,d=!1,e=!1,g=0;g<a.length;g++){if(b=a[g],!Array.isArray(b)){c=!1;break}b.length>0&&(d=!0);for(var h=0;h<b.length;h++)if(f(b[h])){e=!0;break}}return c&&d&&e}var f=a("fast-isnumeric"),g=a("./has_columns");b.exports=function(a,b,c){var f,h,i=c("z");if(void 0===i||!i.length)return 0;if(g(a)){if(f=c("x"),h=c("y"),!f||!h)return 0}else{if(f=d("x",c),h=d("y",c),!e(i))return 0;c("transpose")}return b.z.length}},{"./has_columns":1160,"fast-isnumeric":72}],1167:[function(a,b,c){"use strict";function d(a){return{start:{valType:"number",dflt:null},end:{valType:"number",dflt:null},size:{valType:"any",dflt:1}}}var e=a("../bar/attributes"),f=a("../../lib").extendFlat,g=e.marker,h=g.line;b.exports={x:{valType:"data_array"},y:{valType:"data_array"},text:e.text,orientation:e.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:""},autobinx:{valType:"boolean",dflt:!0},nbinsx:{valType:"integer",min:0,dflt:0},xbins:d("x"),autobiny:{valType:"boolean",dflt:!0},nbinsy:{valType:"integer",min:0,dflt:0},ybins:d("y"),marker:{color:g.color,colorscale:g.colorscale,cauto:g.cauto,cmax:g.cmax,cmin:g.cmin,autocolorscale:g.autocolorscale,reversescale:g.reversescale,showscale:g.showscale,line:{color:h.color,colorscale:h.colorscale,cauto:h.cauto,cmax:h.cmax,cmin:h.cmin,autocolorscale:h.autocolorscale,reversescale:h.reversescale,width:f({},h.width,{dflt:0})}},_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"},_deprecated:{bardir:e._deprecated.bardir}}},{"../../lib":1053,"../bar/attributes":1121}],1168:[function(a,b,c){"use strict";b.exports=function(a,b){for(var c=a.length,d=0,e=0;e<c;e++)b[e]?(a[e]/=b[e],d+=a[e]):a[e]=null;return d}},{}],1169:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){return c("histnorm"),d.forEach(function(a){var b=c(a+"bins.start"),d=c(a+"bins.end"),e=c("autobin"+a,!(b&&d));c(e?"nbins"+a:a+"bins.size")}),b}},{}],1170:[function(a,b,c){"use strict";var d=a("fast-isnumeric");b.exports={count:function(a,b,c){return c[a]++,1},sum:function(a,b,c,e){var f=e[b];return d(f)?(f=Number(f),c[a]+=f,f):0},avg:function(a,b,c,e,f){var g=e[b];return d(g)&&(g=Number(g),c[a]+=g,f[a]++),0},min:function(a,b,c,e){var f=e[b];if(d(f)){if(f=Number(f),!d(c[a]))return c[a]=f,f;if(c[a]>f)return c[a]=f,f-c[a]}return 0},max:function(a,b,c,e){var f=e[b];if(d(f)){if(f=Number(f),!d(c[a]))return c[a]=f,f;if(c[a]<f)return c[a]=f,f-c[a]}return 0}}},{"fast-isnumeric":72}],1171:[function(a,b,c){"use strict";var d=a("fast-isnumeric"),e=a("../../plotly"),f=a("../../lib"),g=a("./bin_functions"),h=a("./norm_functions"),i=a("./average");b.exports=function(a,b){if(b.visible===!0){var c,j=[],k=[],l=e.Axes.getFromId(a,"h"===b.orientation?b.yaxis||"y":b.xaxis||"x"),m="h"===b.orientation?"y":"x",n={x:"y",y:"x"}[m],o=l.makeCalcdata(b,m);b["autobin"+m]===!1&&m+"bins"in b||(b[m+"bins"]=e.Axes.autoBin(o,l,b["nbins"+m]),b._input[m+"bins"]=b[m+"bins"]);var p,q,r,s,t=b[m+"bins"],u="string"==typeof t.size,v=u?[]:t,w=[],x=[],y=0,z=b.histnorm,A=b.histfunc,B=z.indexOf("density")!==-1,C="max"===A||"min"===A,D=C?null:0,E=g.count,F=h[z],G=!1;for(Array.isArray(b[n])&&"count"!==A&&(s=b[n],G="avg"===A,E=g[A]),c=t.start,q=t.end+(t.start-e.Axes.tickIncrement(t.start,t.size))/1e6;c<q&&j.length<5e3;)p=e.Axes.tickIncrement(c,t.size),j.push((c+p)/2),k.push(D),u&&v.push(c),B&&w.push(1/(p-c)),G&&x.push(0),c=p;var H=k.length;for(c=0;c<o.length;c++)r=f.findBin(o[c],v),r>=0&&r<H&&(y+=E(r,c,k,s,x));G&&(y=i(k,x)),F&&F(k,y,w);var I=Math.min(j.length,k.length),J=[],K=0,L=I-1;for(c=0;c<I;c++)if(k[c]){K=c;break}for(c=I-1;c>K;c--)if(k[c]){L=c;break}for(c=K;c<=L;c++)d(j[c])&&d(k[c])&&J.push({p:j[c],s:k[c],b:0});return J}}},{"../../lib":1053,"../../plotly":1070,"./average":1168,"./bin_functions":1170,"./norm_functions":1174,"fast-isnumeric":72}],1172:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/color"),f=a("./bin_defaults"),g=a("../bar/style_defaults"),h=a("../../components/errorbars/defaults"),i=a("./attributes");b.exports=function(a,b,c,j){function k(c,e){return d.coerce(a,b,i,c,e)}var l=k("x"),m=k("y");k("text");var n=k("orientation",m&&!l?"h":"v"),o=b["v"===n?"x":"y"];if(!o||!o.length)return void(b.visible=!1);var p=b["h"===n?"x":"y"];p&&k("histfunc");var q="h"===n?["y"]:["x"];f(a,b,k,q),g(a,b,k,c,j),h(a,b,e.defaultLine,{axis:"y"}),h(a,b,e.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":1005,"../../components/errorbars/defaults":1028,"../../lib":1053,"../bar/style_defaults":1131,"./attributes":1167,"./bin_defaults":1169}],1173:[function(a,b,c){"use strict";var d=a("../../plotly");d.Plots.register(c,"histogram",["cartesian","bar","histogram","oriented","errorBarsOK","showLegend"],{}),c.attributes=a("./attributes"),c.layoutAttributes=a("../bar/layout_attributes"),c.supplyDefaults=a("./defaults"),c.supplyLayoutDefaults=a("../bar/layout_defaults"),c.calc=a("./calc"),c.setPositions=a("../bar/set_positions"),c.plot=a("../bar/plot"),c.style=a("../bar/style"),c.colorbar=a("../scatter/colorbar"),c.hoverPoints=a("../bar/hover")},{"../../plotly":1070,"../bar/hover":1124,"../bar/layout_attributes":1126,"../bar/layout_defaults":1127,"../bar/plot":1128,"../bar/set_positions":1129,"../bar/style":1130,"../scatter/colorbar":1198,"./attributes":1167,"./calc":1171,"./defaults":1172}],1174:[function(a,b,c){"use strict";b.exports={percent:function(a,b){for(var c=a.length,d=100/b,e=0;e<c;e++)a[e]*=d},probability:function(a,b){for(var c=a.length,d=0;d<c;d++)a[d]/=b},density:function(a,b,c,d){var e=a.length;d=d||1;for(var f=0;f<e;f++)a[f]*=c[f]*d},"probability density":function(a,b,c,d){var e=a.length;d&&(b/=d);for(var f=0;f<e;f++)a[f]*=c[f]/b}}},{}],1175:[function(a,b,c){var d=a("../histogram/attributes"),e=a("../heatmap/attributes");b.exports={x:d.x,y:d.y,z:{valType:"data_array"},marker:{color:{valType:"data_array"}},histnorm:d.histnorm,histfunc:d.histfunc,autobinx:d.autobinx,nbinsx:d.nbinsx,xbins:d.xbins,autobiny:d.autobiny,nbinsy:d.nbinsy,ybins:d.ybins,zauto:e.zauto,zmin:e.zmin,zmax:e.zmax,colorscale:e.colorscale,autocolorscale:e.autocolorscale,reversescale:e.reversescale,showscale:e.showscale,zsmooth:e.zsmooth,_nestedModules:{colorbar:"Colorbar"}}},{"../heatmap/attributes":1155,"../histogram/attributes":1167}],1176:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("../../lib"),f=a("../histogram/bin_functions"),g=a("../histogram/norm_functions"),h=a("../histogram/average");b.exports=function(a,b){var c,i,j,k,l,m,n=d.Axes.getFromId(a,b.xaxis||"x"),o=b.x?n.makeCalcdata(b,"x"):[],p=d.Axes.getFromId(a,b.yaxis||"y"),q=b.y?p.makeCalcdata(b,"y"):[],r=Math.min(o.length,q.length);o.length>r&&o.splice(r,o.length-r),q.length>r&&q.splice(r,q.length-r),e.markTime("done convert data"),!b.autobinx&&"xbins"in b||(b.xbins=d.Axes.autoBin(o,n,b.nbinsx,"2d"),"histogram2dcontour"===b.type&&(b.xbins.start-=b.xbins.size,b.xbins.end+=b.xbins.size),b._input.xbins=b.xbins),!b.autobiny&&"ybins"in b||(b.ybins=d.Axes.autoBin(q,p,b.nbinsy,"2d"),"histogram2dcontour"===b.type&&(b.ybins.start-=b.ybins.size,b.ybins.end+=b.ybins.size),b._input.ybins=b.ybins),e.markTime("done autoBin"),l=[];var s,t,u=[],v=[],w="string"==typeof b.xbins.size?[]:b.xbins,x="string"==typeof b.xbins.size?[]:b.ybins,y=0,z=[],A=b.histnorm,B=b.histfunc,C=A.indexOf("density")!==-1,D="max"===B||"min"===B,E=D?null:0,F=f.count,G=g[A],H=!1,I=[],J=[],K="z"in b?b.z:"marker"in b&&Array.isArray(b.marker.color)?b.marker.color:"";K&&"count"!==B&&(H="avg"===B,F=f[B]);var L=b.xbins,M=L.end+(L.start-d.Axes.tickIncrement(L.start,L.size))/1e6;for(m=L.start;m<M;m=d.Axes.tickIncrement(m,L.size))u.push(E),Array.isArray(w)&&w.push(m),H&&v.push(0);Array.isArray(w)&&w.push(m);var N=u.length;for(c=b.xbins.start,i=(m-c)/N,c+=i/2,L=b.ybins,M=L.end+(L.start-d.Axes.tickIncrement(L.start,L.size))/1e6,m=L.start;m<M;m=d.Axes.tickIncrement(m,L.size))l.push(u.concat()),Array.isArray(x)&&x.push(m),H&&z.push(v.concat());Array.isArray(x)&&x.push(m);var O=l.length;for(j=b.ybins.start,k=(m-j)/O,j+=k/2,C&&(I=u.map(function(a,b){return Array.isArray(w)?1/(w[b+1]-w[b]):1/i}),J=l.map(function(a,b){return Array.isArray(x)?1/(x[b+1]-x[b]):1/k})),e.markTime("done making bins"),m=0;m<r;m++)s=e.findBin(o[m],w),t=e.findBin(q[m],x),s>=0&&s<N&&t>=0&&t<O&&(y+=F(s,m,l[t],K,z[t]));if(H)for(t=0;t<O;t++)y+=h(l[t],z[t]);if(G)for(t=0;t<O;t++)G(l[t],y,I,J[t]);return e.markTime("done binning"),{x:o,x0:c,dx:i,y:q,y0:j,dy:k,z:l}}},{"../../lib":1053,"../../plotly":1070,"../histogram/average":1168,"../histogram/bin_functions":1170,"../histogram/norm_functions":1174}],1177:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./sample_defaults"),f=a("../../components/colorscale/defaults"),g=a("./attributes");b.exports=function(a,b,c){function h(c,e){return d.coerce(a,b,g,c,e)}e(a,b,h),h("zsmooth"),f(a,b,c,h,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":1014,"../../lib":1053,"./attributes":1175,"./sample_defaults":1179}],1178:[function(a,b,c){"use strict";var d=a("../../plotly");d.Plots.register(c,"histogram2d",["cartesian","2dMap","histogram"],{}),c.attributes=a("./attributes"),c.supplyDefaults=a("./defaults"),c.calc=a("../heatmap/calc"),c.plot=a("../heatmap/plot"),c.colorbar=a("../heatmap/colorbar"),c.style=a("../heatmap/style"),c.hoverPoints=a("../heatmap/hover")},{"../../plotly":1070,"../heatmap/calc":1156,"../heatmap/colorbar":1157,"../heatmap/hover":1161,"../heatmap/plot":1164,"../heatmap/style":1165,"./attributes":1175,"./defaults":1177}],1179:[function(a,b,c){"use strict";var d=a("../histogram/bin_defaults");b.exports=function(a,b,c){var e=c("x"),f=c("y");if(!(e&&e.length&&f&&f.length))return void(b.visible=!1);var g=c("z")||c("marker.color");g&&c("histfunc");var h=["x","y"];d(a,b,c,h)}},{"../histogram/bin_defaults":1169}],1180:[function(a,b,c){var d=a("../histogram2d/attributes"),e=a("../contour/attributes");b.exports={x:d.x,y:d.y,z:d.z,marker:d.marker,histnorm:d.histnorm,histfunc:d.histfunc,autobinx:d.autobinx,nbinsx:d.nbinsx,xbins:d.xbins,autobiny:d.autobiny,nbinsy:d.nbinsy,ybins:d.ybins,zauto:e.zauto,zmin:e.zmin,zmax:e.zmax,colorscale:e.colorscale,autocolorscale:e.autocolorscale,reversescale:e.reversescale,showscale:e.showscale,autocontour:e.autocontour,ncontours:e.ncontours,contours:e.contours,line:e.line,_nestedModules:{colorbar:"Colorbar"}}},{"../contour/attributes":1146,"../histogram2d/attributes":1175}],1181:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../histogram2d/sample_defaults"),f=a("../contour/style_defaults"),g=a("./attributes");b.exports=function(a,b,c,h){function i(c,e){return d.coerce(a,b,g,c,e)}e(a,b,i);var j=d.coerce2(a,b,g,"contours.start"),k=d.coerce2(a,b,g,"contours.end"),l=i("autocontour",!(j&&k));i(l?"ncontours":"contours.size"),f(a,b,i,h)}},{"../../lib":1053,"../contour/style_defaults":1154,"../histogram2d/sample_defaults":1179,"./attributes":1180}],1182:[function(a,b,c){"use strict";var d=a("../../plotly");d.Plots.register(c,"histogram2dcontour",["cartesian","2dMap","contour","histogram"],{}),c.attributes=a("./attributes"),c.supplyDefaults=a("./defaults"),c.calc=a("../contour/calc"),c.plot=a("../contour/plot"),c.style=a("../contour/style"),c.colorbar=a("../contour/colorbar"),c.hoverPoints=a("../contour/hover")},{"../../plotly":1070,"../contour/calc":1147,"../contour/colorbar":1148,"../contour/hover":1150,"../contour/plot":1152,"../contour/style":1153,"./attributes":1180,"./defaults":1181}],1183:[function(a,b,c){var d=a("../../components/colorscale/attributes"),e=a("../surface/attributes"),f=a("../../lib/extend").extendFlat;b.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},i:{valType:"data_array"},j:{valType:"data_array"},k:{valType:"data_array"},delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z"},alphahull:{valType:"number",dflt:-1},intensity:{valType:"data_array"},color:{valType:"color"},vertexcolor:{valType:"data_array"},facecolor:{valType:"data_array"},opacity:f({},e.opacity),flatshading:{valType:"boolean",dflt:!1},contour:{show:f({},e.contours.x.show,{}),color:f({},e.contours.x.color),width:f({},e.contours.x.width)},colorscale:d.colorscale,reversescale:d.reversescale,showscale:d.showscale,lighting:f({},e.lighting),_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":1011,"../../lib/extend":1049,"../surface/attributes":1216}],1184:[function(a,b,c){"use strict";function d(a,b,c){this.scene=a,this.uid=c,this.mesh=b,this.name="",this.color="#fff",this.data=null,this.showContour=!1}function e(a){return a.map(function(a){var b=a[0],c=j(a[1]),d=c.toRgb();return{index:b,rgb:[d.r,d.g,d.b,1]}})}function f(a){return a.map(n)}function g(a,b,c){for(var d=new Array(a.length),e=0;e<a.length;++e)d[e]=[a[e],b[e],c[e]];return d}function h(a,b){var c=a.glplot.gl,e=i({gl:c}),f=new d(a,e,b.uid);return f.update(b),a.glplot.add(e),f}var i=a("gl-mesh3d"),j=a("tinycolor2"),k=a("delaunay-triangulate"),l=a("alpha-shape"),m=a("convex-hull"),n=a("../../lib/str2rgbarray"),o=d.prototype;o.handlePick=function(a){if(a.object===this.mesh){var b=a.data.index;return a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]],!0}},o.update=function(a){function b(a,b,c){return b.map(function(b){return a.d2l(b)*c})}var c=this.scene,d=c.fullSceneLayout;this.data=a;var h,i=g(b(d.xaxis,a.x,c.dataScale[0]),b(d.yaxis,a.y,c.dataScale[1]),b(d.zaxis,a.z,c.dataScale[2]));if(a.i&&a.j&&a.k)h=g(a.i,a.j,a.k);else if(0===a.alphahull)h=m(i);else if(a.alphahull>0)h=l(a.alphahull,i);else{var j=["x","y","z"].indexOf(a.delaunayaxis);h=k(i.map(function(a){return[a[(j+1)%3],a[(j+2)%3]]}))}var o={positions:i,cells:h,ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,opacity:a.opacity,contourEnable:a.contour.show,contourColor:n(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};a.intensity?(this.color="#fff",o.vertexIntensity=a.intensity,o.colormap=e(a.colorscale)):a.vertexColor?(this.color=a.vertexColor[0],o.vertexColors=f(a.vertexColor)):a.faceColor?(this.color=a.faceColor[0],o.cellColors=f(a.faceColor)):(this.color=a.color,o.meshColor=n(a.color)),this.mesh.update(o)},o.dispose=function(){this.glplot.remove(this.mesh),this.mesh.dispose()},b.exports=h},{"../../lib/str2rgbarray":1063,"alpha-shape":29,"convex-hull":54,"delaunay-triangulate":70,"gl-mesh3d":227,tinycolor2:998}],1185:[function(a,b,c){"use strict";var d=a("../../plotly"),e=a("./");b.exports=function(a,b,c,f){function g(c,f){return d.Lib.coerce(a,b,e.attributes,c,f)}function h(a){var b=a.map(function(a){var b=g(a);return b&&Array.isArray(b)?b:null});return b.every(function(a){return a&&a.length===b[0].length})&&b}var i=h(["x","y","z"]),j=h(["i","j","k"]);return i?(j&&j.forEach(function(a){for(var b=0;b<a.length;++b)a[b]|=0}),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","contour.show","contour.color","contour.width","colorscale","reversescale","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(a){g(a)}),"intensity"in a?(g("intensity"),g("showscale",!0)):(b.showscale=!1,"vertexColor"in a?g("vertexColor"):"faceColor"in a?g("faceColor"):g("color",c)),b.reversescale&&(b.colorscale=b.colorscale.map(function(a){return[1-a[0],a[1]]}).reverse()),void(b.showscale&&d.Colorbar.supplyDefaults(a,b,f))):void(b.visible=!1)}},{"../../plotly":1070,"./":1186}],1186:[function(a,b,c){"use strict";var d=a("../../plotly"),e=b.exports={};d.Plots.register(e,"mesh3d",["gl3d"],{}),e.attributes=a("./attributes"),e.supplyDefaults=a("./defaults"),e.colorbar=a("../heatmap/colorbar")},{"../../plotly":1070,"../heatmap/colorbar":1157,"./attributes":1183,"./defaults":1185}],1187:[function(a,b,c){"use strict";var d=a("../../components/color/attributes"),e=a("../../plots/font_attributes"),f=a("../../plots/attributes"),g=a("../../lib/extend").extendFlat;b.exports={labels:{valType:"data_array"},label0:{valType:"number",dflt:0},dlabel:{valType:"number",dflt:1},values:{valType:"data_array"},marker:{colors:{valType:"data_array"},line:{color:{valType:"color",dflt:d.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}}},text:{valType:"data_array"},scalegroup:{valType:"string",dflt:""},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"]},hoverinfo:g({},f.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0},textfont:g({},e,{}),insidetextfont:g({},e,{}),outsidetextfont:g({},e,{}),domain:{x:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]},y:{valType:"info_array",items:[{valType:"number",min:0,max:1},{valType:"number",min:0,max:1}],dflt:[0,1]}},hole:{valType:"number",min:0,max:1,dflt:0},sort:{valType:"boolean",dflt:!0},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise"},rotation:{valType:"number",min:-360,max:360,dflt:0},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0}}},{"../../components/color/attributes":1004,"../../lib/extend":1049,"../../plots/attributes":1071,"../../plots/font_attributes":1079}],1188:[function(a,b,c){"use strict";function d(a){if(!i){var b=g.defaults;i=b.slice();for(var c=0;c<b.length;c++)i.push(f(b[c]).lighten(20).toHexString());for(c=0;c<g.defaults.length;c++)i.push(f(b[c]).darken(20).toHexString())}return i[a%i.length]}var e=a("fast-isnumeric"),f=a("tinycolor2"),g=a("../../components/color"),h=a("./helpers");b.exports=function(a,b){var c,i,j,k,l,m,n=b.values,o=b.labels,p=[],q=a._fullLayout,r=q._piecolormap,s={},t=!1,u=0,v=q.hiddenlabels||[];if(b.dlabel)for(o=new Array(n.length),c=0;c<n.length;c++)o[c]=String(b.label0+c*b.dlabel);for(c=0;c<n.length;c++)i=n[c],e(i)&&(i=+i,i<0||(j=o[c],void 0!==j&&""!==j||(j=c),j=String(j),void 0===s[j]&&(s[j]=!0,k=f(b.marker.colors[c]),k.isValid()?(k=g.addOpacity(k,k.getAlpha()),r[j]||(r[j]=k)):r[j]?k=r[j]:(k=!1,t=!0),l=v.indexOf(j)!==-1,l||(u+=i),p.push({v:i,label:j,color:k,i:c,hidden:l}))));if(b.sort&&p.sort(function(a,b){return b.v-a.v}),t)for(c=0;c<p.length;c++)m=p[c],m.color===!1&&(r[m.label]=m.color=d(q._piedefaultcolorcount),q._piedefaultcolorcount++);if(p[0]&&(p[0].vTotal=u),b.textinfo&&"none"!==b.textinfo){var w,x=b.textinfo.indexOf("label")!==-1,y=b.textinfo.indexOf("text")!==-1,z=b.textinfo.indexOf("value")!==-1,A=b.textinfo.indexOf("percent")!==-1;for(c=0;c<p.length;c++)m=p[c],w=x?[m.label]:[],y&&b.text[m.i]&&w.push(b.text[m.i]),z&&w.push(h.formatPieValue(m.v)),A&&w.push(h.formatPiePercent(m.v/u)),m.text=w.join("<br>")}return p};var i},{"../../components/color":1005,"./helpers":1190,"fast-isnumeric":72,tinycolor2:998}],1189:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./attributes");b.exports=function(a,b,c,f){function g(c,f){return d.coerce(a,b,e,c,f)}var h=d.coerceFont,i=g("values");if(!Array.isArray(i)||!i.length)return void(b.visible=!1);var j=g("labels");Array.isArray(j)||(g("label0"),g("dlabel"));var k=g("marker.line.width");k&&g("marker.line.color");var l=g("marker.colors");Array.isArray(l)||(b.marker.colors=[]),g("scalegroup");var m=g("text"),n=g("textinfo",Array.isArray(m)?"text+percent":"percent");if(g("hoverinfo",1===f._dataLength?"label+text+value+percent":void 0),n&&"none"!==n){var o=g("textposition"),p=Array.isArray(o)||"auto"===o,q=p||"inside"===o,r=p||"outside"===o;if(q||r){var s=h(g,"textfont",f.font);q&&h(g,"insidetextfont",s),r&&h(g,"outsidetextfont",s)}}g("domain.x"),g("domain.y"),g("hole"),g("sort"),g("direction"),g("rotation"),g("pull")}},{"../../lib":1053,"./attributes":1187}],1190:[function(a,b,c){"use strict";c.formatPiePercent=function(a){var b=(100*a).toPrecision(3);return b.indexOf(".")!==-1?b.replace(/[.]?0+$/,"")+"%":b+"%"},c.formatPieValue=function(a){var b=a.toPrecision(10);return b.indexOf(".")!==-1?b.replace(/[.]?0+$/,""):b}},{}],1191:[function(a,b,c){"use strict";var d=a("../../plotly");d.Plots.register(c,"pie",["pie","showLegend"],{}),c.attributes=a("./attributes"),c.supplyDefaults=a("./defaults"),c.supplyLayoutDefaults=a("./layout_defaults"),c.layoutAttributes=a("./layout_attributes"),c.calc=a("./calc"),c.plot=a("./plot"),c.style=a("./style"),c.styleOne=a("./style_one")},{"../../plotly":1070,"./attributes":1187,"./calc":1188,"./defaults":1189,"./layout_attributes":1192,"./layout_defaults":1193,"./plot":1194,"./style":1195,"./style_one":1196}],1192:[function(a,b,c){"use strict";b.exports={hiddenlabels:{valType:"data_array"}}},{}],1193:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("./layout_attributes");b.exports=function(a,b){function c(c,f){return d.coerce(a,b,e,c,f)}c("hiddenlabels")}},{"../../lib":1053,"./layout_attributes":1192}],1194:[function(a,b,c){"use strict";function d(a,b,c){var d=Math.sqrt(a.width*a.width+a.height*a.height),f=a.width/a.height,g=Math.PI*Math.min(b.v/c.vTotal,.5),h=1-c.trace.hole,i=e(b,c),j={scale:i*c.r*2/d,rCenter:1-i,rotate:0};if(j.scale>=1)return j;var k=f+1/(2*Math.tan(g)),l=c.r*Math.min(1/(Math.sqrt(k*k+.5)+k),h/(Math.sqrt(f*f+h/2)+f)),m={scale:2*l/a.height,rCenter:Math.cos(l/c.r)-l*f/c.r,rotate:(180/Math.PI*b.midangle+720)%180-90},n=1/f,o=n+1/(2*Math.tan(g)),p=c.r*Math.min(1/(Math.sqrt(o*o+.5)+o),h/(Math.sqrt(n*n+h/2)+n)),q={scale:2*p/a.width,rCenter:Math.cos(p/c.r)-p/f/c.r,rotate:(180/Math.PI*b.midangle+810)%180-90},r=q.scale>m.scale?q:m;return j.scale<1&&r.scale>j.scale?r:j}function e(a,b){if(a.v===b.vTotal&&!b.trace.hole)return 1;var c=Math.PI*Math.min(a.v/b.vTotal,.5);return Math.min(1/(1+1/Math.sin(c)),(1-b.trace.hole)/2)}function f(a,b){var c=b.pxmid[0],d=b.pxmid[1],e=a.width/2,f=a.height/2;return c<0&&(e*=-1),d<0&&(f*=-1),{scale:1,rCenter:1,rotate:0,x:e+Math.abs(f)*(e>0?1:-1)/2,y:f/(1+c*c/(d*d)),outside:!0}}function g(a,b){function c(a,b){return a.pxmid[1]-b.pxmid[1]}function d(a,b){return b.pxmid[1]-a.pxmid[1]}function e(a,c){c||(c={});var d,e,f,h,m,n,p=c.labelExtraY+(g?c.yLabelMax:c.yLabelMin),q=g?a.yLabelMin:a.yLabelMax,r=g?a.yLabelMax:a.yLabelMin,s=a.cyFinal+j(a.px0[1],a.px1[1]),t=p-q;if(t*l>0&&(a.labelExtraY=t),Array.isArray(b.pull))for(e=0;e<o.length;e++)f=o[e],f===a||(b.pull[a.i]||0)>=b.pull[f.i]||((a.pxmid[1]-f.pxmid[1])*l>0?(h=f.cyFinal+j(f.px0[1],f.px1[1]),t=h-q-a.labelExtraY,t*l>0&&(a.labelExtraY+=t)):(r+a.labelExtraY-s)*l>0&&(d=3*k*Math.abs(e-o.indexOf(a)),m=f.cxFinal+i(f.px0[0],f.px1[0]),n=m+d-(a.cxFinal+a.pxmid[0])-a.labelExtraX,n*k>0&&(a.labelExtraX+=n)))}var f,g,h,i,j,k,l,m,n,o,p,q,r;for(g=0;g<2;g++)for(h=g?c:d,j=g?Math.max:Math.min,l=g?1:-1,f=0;f<2;f++){for(i=f?Math.max:Math.min,k=f?1:-1,m=a[g][f],m.sort(h),n=a[1-g][f],o=n.concat(m),q=[],p=0;p<m.length;p++)void 0!==m[p].yLabelMid&&q.push(m[p]);for(r=!1,p=0;g&&p<n.length;p++)if(void 0!==n[p].yLabelMid){r=n[p];break}for(p=0;p<q.length;p++){var s=p&&q[p-1];r&&!p&&(s=r),e(q[p],s)}}}function h(a,b){var c,d,e,f,g,h,i,k,l,m,n=[];for(e=0;e<a.length;e++){if(g=a[e][0],h=g.trace,c=b.w*(h.domain.x[1]-h.domain.x[0]),d=b.h*(h.domain.y[1]-h.domain.y[0]),i=h.tiltaxis*Math.PI/180,k=h.pull,Array.isArray(k))for(k=0,f=0;f<h.pull.length;f++)h.pull[f]>k&&(k=h.pull[f]);g.r=Math.min(c/j(h.tilt,Math.sin(i),h.depth),d/j(h.tilt,Math.cos(i),h.depth))/(2+2*k),g.cx=b.l+b.w*(h.domain.x[1]+h.domain.x[0])/2,g.cy=b.t+b.h*(2-h.domain.y[1]-h.domain.y[0])/2,h.scalegroup&&n.indexOf(h.scalegroup)===-1&&n.push(h.scalegroup)}for(f=0;f<n.length;f++){for(m=1/0,l=n[f],e=0;e<a.length;e++)g=a[e][0],g.trace.scalegroup===l&&(m=Math.min(m,g.r*g.r/g.vTotal));for(e=0;e<a.length;e++)g=a[e][0],g.trace.scalegroup===l&&(g.r=Math.sqrt(m*g.vTotal))}}function i(a){function b(a){var b=l.r*Math.sin(a),c=-l.r*Math.cos(a);return n?[b*(1-h*d*d)+c*g*h,b*g*h+c*(1-h*e*e),Math.sin(f)*(c*e-b*d)]:[b,c]}var c,d,e,f,g,h,i,j,k,l=a[0],m=l.trace,n=m.tilt,o=m.rotation*Math.PI/180,p=2*Math.PI/l.vTotal,q="px0",r="px1";if("counterclockwise"===m.direction){for(i=0;i<a.length&&a[i].hidden;i++);if(i===a.length)return;o+=p*a[i].v,p*=-1,q="px1",r="px0"}for(n&&(f=n*Math.PI/180,c=m.tiltaxis*Math.PI/180,g=Math.sin(c)*Math.cos(c),h=1-Math.cos(f),d=Math.sin(c),e=Math.cos(c)),k=b(o),i=0;i<a.length;i++)j=a[i],j.hidden||(j[q]=k,o+=p*j.v/2,j.pxmid=b(o),j.midangle=o,o+=p*j.v/2,k=b(o),j[r]=k,j.largeArc=j.v>l.vTotal/2?1:0)}function j(a,b,c){if(!a)return 1;var d=Math.sin(a*Math.PI/180);return Math.max(.01,c*d*Math.abs(b)+2*Math.sqrt(1-d*d*b*b));
}var k=a("d3"),l=a("../../plotly"),m=a("../../components/color"),n=a("./helpers");b.exports=function(a,b){var c=a._fullLayout;h(b,c._size);var j=c._pielayer.selectAll("g.trace").data(b);j.enter().append("g").attr({"stroke-linejoin":"round","class":"trace"}),j.exit().remove(),j.order(),j.each(function(b){var h=k.select(this),j=b[0],o=j.trace,p=0,q=(o.depth||0)*j.r*Math.sin(p)/2,r=o.tiltaxis||0,s=r*Math.PI/180,t=[q*Math.sin(s),q*Math.cos(s)],u=j.r*Math.cos(p),v=h.selectAll("g.part").data(o.tilt?["top","sides"]:["top"]);v.enter().append("g").attr("class",function(a){return a+" part"}),v.exit().remove(),v.order(),i(b),h.selectAll(".top").each(function(){var h=k.select(this).selectAll("g.slice").data(b);h.enter().append("g").classed("slice",!0),h.exit().remove();var i=[[[],[]],[[],[]]],p=!1;h.each(function(g){function h(b){var c=a._fullLayout,d=a._fullData[o.index],f=d.hoverinfo;if("all"===f&&(f="label+text+value+percent+name"),!a._dragging&&c.hovermode!==!1&&"none"!==f&&f){var h=e(g,j),i=v+g.pxmid[0]*(1-h),k=w+g.pxmid[1]*(1-h),m=[];f.indexOf("label")!==-1&&m.push(g.label),d.text&&d.text[g.i]&&f.indexOf("text")!==-1&&m.push(d.text[g.i]),f.indexOf("value")!==-1&&m.push(n.formatPieValue(g.v)),f.indexOf("percent")!==-1&&m.push(n.formatPiePercent(g.v/j.vTotal)),l.Fx.loneHover({x0:i-h*j.r,x1:i+h*j.r,y:k,text:m.join("<br>"),name:f.indexOf("name")!==-1?d.name:void 0,color:g.color,idealAlign:g.pxmid[0]<0?"left":"right"},{container:c._hoverlayer.node(),outerContainer:c._paper.node()}),l.Fx.hover(a,b,"pie"),z=!0}}function m(){z&&(l.Fx.loneUnhover(c._hoverlayer.node()),z=!1)}function q(){a._hoverdata=[g],a._hoverdata.trace=b.trace,l.Fx.click(a,{target:!0})}function s(a,b,c,d){return"a"+d*j.r+","+d*u+" "+r+" "+g.largeArc+(c?" 1 ":" 0 ")+d*(b[0]-a[0])+","+d*(b[1]-a[1])}if(g.hidden)return void k.select(this).selectAll("path,g").remove();i[g.pxmid[1]<0?0:1][g.pxmid[0]<0?0:1].push(g);var v=j.cx+t[0],w=j.cy+t[1],x=k.select(this),y=x.selectAll("path.surface").data([g]),z=!1;if(y.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),x.select("path.textline").remove(),x.on("mouseover",h).on("mouseout",m).on("click",q),o.pull){var A=+(Array.isArray(o.pull)?o.pull[g.i]:o.pull)||0;A>0&&(v+=A*g.pxmid[0],w+=A*g.pxmid[1])}g.cxFinal=v,g.cyFinal=w;var B=o.hole;if(g.v===j.vTotal){var C="M"+(v+g.px0[0])+","+(w+g.px0[1])+s(g.px0,g.pxmid,!0,1)+s(g.pxmid,g.px0,!0,1)+"Z";B?y.attr("d","M"+(v+B*g.px0[0])+","+(w+B*g.px0[1])+s(g.px0,g.pxmid,!1,B)+s(g.pxmid,g.px0,!1,B)+"Z"+C):y.attr("d",C)}else{var D=s(g.px0,g.px1,!0,1);if(B){var E=1-B;y.attr("d","M"+(v+B*g.px1[0])+","+(w+B*g.px1[1])+s(g.px1,g.px0,!1,B)+"l"+E*g.px0[0]+","+E*g.px0[1]+D+"Z")}else y.attr("d","M"+v+","+w+"l"+g.px0[0]+","+g.px0[1]+D+"Z")}var F=Array.isArray(o.textposition)?o.textposition[g.i]:o.textposition,G=x.selectAll("g.slicetext").data(g.text&&"none"!==F?[0]:[]);G.enter().append("g").classed("slicetext",!0),G.exit().remove(),G.each(function(){var a=k.select(this).selectAll("text").data([0]);a.enter().append("text").attr("data-notex",1),a.exit().remove(),a.text(g.text).attr({"class":"slicetext",transform:"","data-bb":"","text-anchor":"middle",x:0,y:0}).call(l.Drawing.font,"outside"===F?o.outsidetextfont:o.insidetextfont).call(l.util.convertToTspans),a.selectAll("tspan.line").attr({x:0,y:0});var b,c=l.Drawing.bBox(a.node());"outside"===F?b=f(c,g):(b=d(c,g,j),"auto"===F&&b.scale<1&&(a.call(l.Drawing.font,o.outsidetextfont),o.outsidetextfont.family===o.insidetextfont.family&&o.outsidetextfont.size===o.insidetextfont.size||(a.attr({"data-bb":""}),c=l.Drawing.bBox(a.node())),b=f(c,g)));var e=v+g.pxmid[0]*b.rCenter+(b.x||0),h=w+g.pxmid[1]*b.rCenter+(b.y||0);b.outside&&(g.yLabelMin=h-c.height/2,g.yLabelMid=h,g.yLabelMax=h+c.height/2,g.labelExtraX=0,g.labelExtraY=0,p=!0),a.attr("transform","translate("+e+","+h+")"+(b.scale<1?"scale("+b.scale+")":"")+(b.rotate?"rotate("+b.rotate+")":"")+"translate("+-(c.left+c.right)/2+","+-(c.top+c.bottom)/2+")")})}),p&&g(i,o),h.each(function(a){if(a.labelExtraX||a.labelExtraY){var b=k.select(this),c=b.select("g.slicetext text");c.attr("transform","translate("+a.labelExtraX+","+a.labelExtraY+")"+c.attr("transform"));var d=a.cxFinal+a.pxmid[0],e=a.cyFinal+a.pxmid[1],f="M"+d+","+e,g=(a.yLabelMax-a.yLabelMin)*(a.pxmid[0]<0?-1:1)/4;if(a.labelExtraX){var h=a.labelExtraX*a.pxmid[1]/a.pxmid[0],i=a.yLabelMid+a.labelExtraY-(a.cyFinal+a.pxmid[1]);f+=Math.abs(h)>Math.abs(i)?"l"+i*a.pxmid[0]/a.pxmid[1]+","+i+"H"+(d+a.labelExtraX+g):"l"+a.labelExtraX+","+h+"v"+(i-h)+"h"+g}else f+="V"+(a.yLabelMid+a.labelExtraY)+"h"+g;b.append("path").classed("textline",!0).call(m.stroke,o.outsidetextfont.color).attr({"stroke-width":Math.min(2,o.outsidetextfont.size/8),d:f,fill:"none"})}})})}),setTimeout(function(){j.selectAll("tspan").each(function(){var a=k.select(this);a.attr("dy")&&a.attr("dy",a.attr("dy"))})},0)}},{"../../components/color":1005,"../../plotly":1070,"./helpers":1190,d3:64}],1195:[function(a,b,c){"use strict";var d=a("d3"),e=a("./style_one");b.exports=function(a){a._fullLayout._pielayer.selectAll(".trace").each(function(a){var b=a[0],c=b.trace,f=d.select(this);f.style({opacity:c.opacity}),f.selectAll(".top path.surface").each(function(a){d.select(this).call(e,a,c)})})}},{"./style_one":1196,d3:64}],1196:[function(a,b,c){"use strict";var d=a("../../components/color");b.exports=function(a,b,c){var e=c.marker.line.color;Array.isArray(e)&&(e=e[b.i]||d.defaultLine);var f=c.marker.line.width||0;Array.isArray(f)&&(f=f[b.i]||0),a.style({"stroke-width":f,fill:b.color}).call(d.stroke,e)}},{"../../components/color":1005}],1197:[function(a,b,c){var d=a("../../components/drawing");b.exports={x:{valType:"data_array"},x0:{valType:"any",dflt:0},dx:{valType:"number",dflt:1},y:{valType:"data_array"},y0:{valType:"any",dflt:0},dy:{valType:"number",dflt:1},text:{valType:"string",dflt:"",arrayOk:!0},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:2},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear"},smoothing:{valType:"number",min:0,max:1.3,dflt:1},dash:{valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid"}},connectgaps:{valType:"boolean",dflt:!1},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx"],dflt:"none"},fillcolor:{valType:"color"},marker:{symbol:{valType:"enumerated",values:d.symbolList,dflt:"circle",arrayOk:!0},opacity:{valType:"number",min:0,max:1,arrayOk:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0},color:{valType:"color",arrayOk:!0},maxdisplayed:{valType:"number",min:0,dflt:0},sizeref:{valType:"number",dflt:1},sizemin:{valType:"number",min:0,dflt:0},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter"},colorscale:{valType:"colorscale"},cauto:{valType:"boolean",dflt:!0},cmax:{valType:"number",dflt:null},cmin:{valType:"number",dflt:null},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1},showscale:{valType:"boolean",dflt:!1},line:{color:{valType:"color",arrayOk:!0},width:{valType:"number",min:0,arrayOk:!0},colorscale:{valType:"colorscale"},cauto:{valType:"boolean",dflt:!0},cmax:{valType:"number",dflt:null},cmin:{valType:"number",dflt:null},autocolorscale:{valType:"boolean",dflt:!0},reversescale:{valType:"boolean",dflt:!1}}},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0},textfont:{family:{valType:"string",noBlank:!0,strict:!0,arrayOk:!0},size:{valType:"number",min:1,arrayOk:!0},color:{valType:"color",arrayOk:!0}},r:{valType:"data_array"},t:{valType:"data_array"},_nestedModules:{error_y:"ErrorBars",error_x:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../components/drawing":1023}],1198:[function(a,b,c){"use strict";var d=a("d3"),e=a("fast-isnumeric"),f=a("../../plotly"),g=a("../../lib"),h=a("../../components/colorscale/get_scale"),i=a("../../components/colorbar/draw");b.exports=function(a,b){var c=b[0].trace,j=c.marker,k="cb"+c.uid;if(a._fullLayout._infolayer.selectAll("."+k).remove(),void 0===j||!j.showscale)return void f.Plots.autoMargin(a,k);var l=h(j.colorscale),m=j.color,n=j.cmin,o=j.cmax;e(n)||(n=f.Lib.aggNums(Math.min,null,m)),e(o)||(o=f.Lib.aggNums(Math.max,null,m));var p=b[0].t.cb=i(a,k);p.fillcolor(d.scale.linear().domain(l.map(function(a){return n+a[0]*(o-n)})).range(l.map(function(a){return a[1]}))).filllevels({start:n,end:o,size:(o-n)/254}).options(j.colorbar)(),g.markTime("done colorbar")}},{"../../components/colorbar/draw":1008,"../../components/colorscale/get_scale":1016,"../../lib":1053,"../../plotly":1070,d3:64,"fast-isnumeric":72}],1199:[function(a,b,c){"use strict";function d(a,b,c){var d=c("line.shape");"spline"===d&&c("line.smoothing")}var e=a("d3"),f=a("fast-isnumeric"),g=a("../../plotly"),h=a("./subtypes"),i=b.exports={};i.hasLines=h.hasLines,i.hasMarkers=h.hasMarkers,i.hasText=h.hasText,i.isBubble=h.isBubble,i.selectPoints=a("./select"),g.Plots.register(i,"scatter",["cartesian","symbols","markerColorscale","errorBarsOK","showLegend"],{}),i.PTS_LINESONLY=20,i.attributes=a("./attributes");var j=a("./xy_defaults");i.supplyDefaults=function(a,b,c,e){function f(c,d){return g.Lib.coerce(a,b,i.attributes,c,d)}var h=j(a,b,f),k=h<i.PTS_LINESONLY?"lines+markers":"lines";return h?(f("text"),f("mode",k),i.hasLines(b)&&(i.lineDefaults(a,b,c,f),d(a,b,f),f("connectgaps")),i.hasMarkers(b)&&i.markerDefaults(a,b,c,e,f),i.hasText(b)&&i.textDefaults(a,b,e,f),(i.hasMarkers(b)||i.hasText(b))&&f("marker.maxdisplayed"),f("fill"),"none"!==b.fill&&(i.fillColorDefaults(a,b,c,f),i.hasLines(b)||d(a,b,f)),g.ErrorBars.supplyDefaults(a,b,c,{axis:"y"}),void g.ErrorBars.supplyDefaults(a,b,c,{axis:"x",inherit:"y"})):void(b.visible=!1)},i.lineDefaults=function(a,b,c,d){var e=(a.marker||{}).color;d("line.color",!Array.isArray(e)&&e||c),d("line.width"),d("line.dash")},i.markerDefaults=function(a,b,c,d,e){var f,h=i.isBubble(a),j=(a.line||{}).color;j&&(c=j),e("marker.symbol"),e("marker.opacity",h?.7:1),e("marker.size"),e("marker.color",c),g.Colorscale.hasColorscale(a,"marker")&&g.Colorscale.handleDefaults(a,b,d,e,{prefix:"marker.",cLetter:"c"}),f=j&&b.marker.color!==j?j:h?g.Color.background:g.Color.defaultLine,e("marker.line.color",f),g.Colorscale.hasColorscale(a,"marker.line")&&g.Colorscale.handleDefaults(a,b,d,e,{prefix:"marker.line.",cLetter:"c"}),e("marker.line.width",h?1:0),h&&(e("marker.sizeref"),e("marker.sizemin"),e("marker.sizemode"))},i.textDefaults=function(a,b,c,d){d("textposition"),g.Lib.coerceFont(d,"textfont",c.font)},i.fillColorDefaults=function(a,b,c,d){var e=!1;if(b.marker){var f=b.marker.color,h=(b.marker.line||{}).color;f&&!Array.isArray(f)?e=f:h&&!Array.isArray(h)&&(e=h)}d("fillcolor",g.Color.addOpacity((b.line||{}).color||e||c,.5))},i.cleanData=function(a){var b,c,d,e,f;for(b=0;b<a.length;b++)if(c=a[b],d=c.fill,"none"!==d&&"scatter"===c.type&&(c.opacity=void 0,"tonexty"===d||"tonextx"===d))for(e=b-1;e>=0;e--)if(f=a[e],"scatter"===f.type&&f.xaxis===c.xaxis&&f.yaxis===c.yaxis){f.opacity=void 0;break}},i.colorbar=a("./colorbar"),i.getBubbleSizeFn=function(a){var b=a.marker,c=b.sizeref||1,d=b.sizemin||0,e="area"===b.sizemode?function(a){return Math.sqrt(a/c)}:function(a){return a/c};return function(a){var b=e(a/2);return f(b)&&b>0?Math.max(b,d):0}},i.calc=function(a,b){var c=g.Axes.getFromId(a,b.xaxis||"x"),d=g.Axes.getFromId(a,b.yaxis||"y");g.Lib.markTime("in Scatter.calc");var e=c.makeCalcdata(b,"x");g.Lib.markTime("finished convert x");var h=d.makeCalcdata(b,"y");g.Lib.markTime("finished convert y");var j,k,l,m=Math.min(e.length,h.length);c._minDtick=0,d._minDtick=0,e.length>m&&e.splice(m,e.length-m),h.length>m&&h.splice(m,h.length-m);var n={padded:!0},o={padded:!0};if(i.hasMarkers(b)){if(j=b.marker,k=j.size,Array.isArray(k)){var p={type:"linear"};g.Axes.setConvert(p),k=p.makeCalcdata(b.marker,"size"),k.length>m&&k.splice(m,k.length-m)}var q,r=1.6*(b.marker.sizeref||1);q="area"===b.marker.sizemode?function(a){return Math.max(Math.sqrt((a||0)/r),3)}:function(a){return Math.max((a||0)/r,3)},n.ppad=o.ppad=Array.isArray(k)?k.map(q):q(k)}i.calcMarkerColorscales(b),!("tozerox"===b.fill||"tonextx"===b.fill&&a.firstscatter)||e[0]===e[m-1]&&h[0]===h[m-1]?b.error_y.visible||["tonexty","tozeroy"].indexOf(b.fill)===-1&&(i.hasMarkers(b)||i.hasText(b))||(n.padded=!1,n.ppad=0):n.tozero=!0,!("tozeroy"===b.fill||"tonexty"===b.fill&&a.firstscatter)||e[0]===e[m-1]&&h[0]===h[m-1]?["tonextx","tozerox"].indexOf(b.fill)!==-1&&(o.padded=!1):o.tozero=!0,g.Lib.markTime("ready for Axes.expand"),g.Axes.expand(c,e,n),g.Lib.markTime("done expand x"),g.Axes.expand(d,h,o),g.Lib.markTime("done expand y");var s=new Array(m);for(l=0;l<m;l++)s[l]=f(e[l])&&f(h[l])?{x:e[l],y:h[l]}:{x:!1,y:!1};return void 0!==typeof k&&g.Lib.mergeArray(k,s,"ms"),a.firstscatter=!1,s},i.calcMarkerColorscales=function(a){if(i.hasMarkers(a)){var b=a.marker;g.Colorscale.hasColorscale(a,"marker")&&g.Colorscale.calc(a,b.color,"marker","c"),g.Colorscale.hasColorscale(a,"marker.line")&&g.Colorscale.calc(a,b.line.color,"marker.line","c")}},i.selectMarkers=function(a,b,c){var d=b.x(),f=b.y(),g=e.extent(d.range.map(d.l2c)),h=e.extent(f.range.map(f.l2c));c.forEach(function(a,b){var d=a[0].trace;if(i.hasMarkers(d)){var e=d.marker.maxdisplayed;if(0!==e){var f=a.filter(function(a){return a.x>=g[0]&&a.x<=g[1]&&a.y>=h[0]&&a.y<=h[1]}),j=Math.ceil(f.length/e),k=0;c.forEach(function(a,c){var d=a[0].trace;i.hasMarkers(d)&&d.marker.maxdisplayed>0&&c<b&&k++});var l=Math.round(k*j/3+Math.floor(k/3)*j/7.1);a.forEach(function(a){delete a.vis}),f.forEach(function(a,b){0===Math.round((b+l)%j)&&(a.vis=!0)})}}})},i.arraysToCalcdata=function(a){var b=a[0].trace,c=b.marker;if(g.Lib.mergeArray(b.text,a,"tx"),g.Lib.mergeArray(b.textposition,a,"tp"),b.textfont&&(g.Lib.mergeArray(b.textfont.size,a,"ts"),g.Lib.mergeArray(b.textfont.color,a,"tc"),g.Lib.mergeArray(b.textfont.family,a,"tf")),c&&c.line){var d=c.line;g.Lib.mergeArray(c.opacity,a,"mo"),g.Lib.mergeArray(c.symbol,a,"mx"),g.Lib.mergeArray(c.color,a,"mc"),g.Lib.mergeArray(d.color,a,"mlc"),g.Lib.mergeArray(d.width,a,"mlw")}},i.plot=function(a,b,c){function d(a){return a.filter(function(a){return a.vis})}i.selectMarkers(a,b,c);var f=b.x(),h=b.y(),j=b.plot.select(".scatterlayer").selectAll("g.trace.scatter").data(c);j.enter().append("g").attr("class","trace scatter").style("stroke-miterlimit",2);var k,l,m,n="";j.each(function(a){var b=a[0].trace,c=b.line,d=e.select(this);if(b.visible===!0&&(a[0].node3=d,i.arraysToCalcdata(a),i.hasLines(b)||"none"!==b.fill)){var j,o,p,q,r="",s="";k="tozero"===b.fill.substr(0,6)||"to"===b.fill.substr(0,2)&&!n?d.append("path").classed("js-fill",!0):null,m&&(l=m.datum(a)),m=d.append("path").classed("js-fill",!0),["hv","vh","hvh","vhv"].indexOf(c.shape)!==-1?(o=g.Drawing.steps(c.shape),p=g.Drawing.steps(c.shape.split("").reverse().join(""))):o=p="spline"===c.shape?function(a){return g.Drawing.smoothopen(a,c.smoothing)}:function(a){return"M"+a.join("L")},q=function(a){return"L"+p(a.reverse()).substr(1)};var t=i.linePoints(a,{xaxis:f,yaxis:h,connectGaps:b.connectgaps,baseTolerance:Math.max(c.width||1,3)/4,linear:"linear"===c.shape});if(t.length){for(var u=t[0][0],v=t[t.length-1],w=v[v.length-1],x=0;x<t.length;x++){var y=t[x];j=o(y),r+=r?"L"+j.substr(1):j,s=q(y)+s,i.hasLines(b)&&y.length>1&&d.append("path").classed("js-line",!0).attr("d",j)}k?u&&w&&("y"===b.fill.charAt(b.fill.length-1)?u[1]=w[1]=h.c2p(0,!0):u[0]=w[0]=f.c2p(0,!0),k.attr("d",r+"L"+w+"L"+u+"Z")):"tonext"===b.fill.substr(0,6)&&r&&n&&l.attr("d",r+n+"Z"),n=s}}}),j.selectAll("path:not([d])").remove(),j.append("g").attr("class","points").each(function(a){var b=a[0].trace,c=e.select(this),j=i.hasMarkers(b),k=i.hasText(b);!j&&!k||b.visible!==!0?c.remove():(j&&c.selectAll("path.point").data(b.marker.maxdisplayed?d:g.Lib.identity).enter().append("path").classed("point",!0).call(g.Drawing.translatePoints,f,h),k&&c.selectAll("g").data(b.marker.maxdisplayed?d:g.Lib.identity).enter().append("g").append("text").call(g.Drawing.translatePoints,f,h))})},i.linePoints=function(a,b){function c(b){var c=w.c2p(a[b].x),d=x.c2p(a[b].y);return c!==C&&d!==C&&[c,d]}function d(a){var b=a[0]/w._length,c=a[1]/x._length;return(1+10*Math.max(0,-b,b-1,-c,c-1))*z}function e(a,b){var c=a[0]-b[0],d=a[1]-b[1];return Math.sqrt(c*c+d*d)}var f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=b.xaxis,x=b.yaxis,y=b.connectGaps,z=b.baseTolerance,A=b.linear,B=[],C=g.Axes.BADNUM,D=.2,E=new Array(a.length),F=0;for(f=0;f<a.length;f++)if(h=c(f)){for(F=0,E[F++]=h,f++;f<a.length;f++){if(j=c(f),!j){if(y)continue;break}if(A){if(m=e(j,h),!(m<d(j)*D)){for(o=[(j[0]-h[0])/m,(j[1]-h[1])/m],k=h,q=m,r=t=u=0,n=!1,i=j,f++;f<a.length;f++){if(l=c(f),!l){if(y)continue;break}if(p=[l[0]-h[0],l[1]-h[1]],v=p[0]*o[1]-p[1]*o[0],t=Math.min(t,v),u=Math.max(u,v),u-t>d(l))break;i=l,s=p[0]*o[0]+p[1]*o[1],s>q?(q=s,j=l,n=!1):s<r&&(r=s,k=l,n=!0)}if(n?(E[F++]=j,i!==k&&(E[F++]=k)):(k!==h&&(E[F++]=k),i!==j&&(E[F++]=j)),E[F++]=i,f>=a.length||!l)break;E[F++]=l,h=l}}else E[F++]=j}B.push(E.slice(0,F))}return B},i.style=function(a){var b=e.select(a).selectAll("g.trace.scatter");b.style("opacity",function(a){return a[0].trace.opacity}),b.selectAll("g.points").each(function(a){e.select(this).selectAll("path.point").call(g.Drawing.pointStyle,a.trace||a[0].trace),e.select(this).selectAll("text").call(g.Drawing.textPointStyle,a.trace||a[0].trace)}),b.selectAll("g.trace path.js-line").call(g.Drawing.lineGroupStyle),b.selectAll("g.trace path.js-fill").call(g.Drawing.fillGroupStyle)},i.getTraceColor=function(a,b){var c,d;if("lines"===a.mode)return c=a.line.color,c&&g.Color.opacity(c)?c:a.fillcolor;if("none"===a.mode)return a.fill?a.fillcolor:"";var e=b.mcc||(a.marker||{}).color,f=b.mlcc||((a.marker||{}).line||{}).color;return d=e&&g.Color.opacity(e)?e:f&&g.Color.opacity(f)&&(b.mlw||((a.marker||{}).line||{}).width)?f:"",d?g.Color.opacity(d)<.3?g.Color.addOpacity(d,.3):d:(c=(a.line||{}).color,c&&g.Color.opacity(c)&&i.hasLines(a)&&a.line.width?c:a.fillcolor)},i.hoverPoints=function(a,b,c,d){var e=a.cd,f=e[0].trace,h=a.xa,j=a.ya,k=function(a){var c=Math.max(3,a.mrc||0);return Math.max(Math.abs(h.c2p(a.x)-h.c2p(b))-c,1-3/c)},l=function(a){var b=Math.max(3,a.mrc||0);return Math.max(Math.abs(j.c2p(a.y)-j.c2p(c))-b,1-3/b)},m=function(a){var d=Math.max(3,a.mrc||0),e=Math.abs(h.c2p(a.x)-h.c2p(b)),f=Math.abs(j.c2p(a.y)-j.c2p(c));return Math.max(Math.sqrt(e*e+f*f)-d,1-3/d)},n=g.Fx.getDistanceFunction(d,k,l,m);if(g.Fx.getClosest(e,n,a),a.index!==!1){var o=e[a.index],p=h.c2p(o.x,!0),q=j.c2p(o.y,!0),r=o.mrc||1;return a.color=i.getTraceColor(f,o),a.x0=p-r,a.x1=p+r,a.xLabelVal=o.x,a.y0=q-r,a.y1=q+r,a.yLabelVal=o.y,o.tx?a.text=o.tx:f.text&&(a.text=f.text),g.ErrorBars.hoverInfo(o,f,a),[a]}}},{"../../plotly":1070,"./attributes":1197,"./colorbar":1198,"./select":1200,"./subtypes":1201,"./xy_defaults":1202,d3:64,"fast-isnumeric":72}],1200:[function(a,b,c){"use strict";var d=a("./subtypes"),e=.2;b.exports=function(a,b){var c,f,g,h,i=a.cd,j=a.xaxis,k=a.yaxis,l=[],m=i[0].trace,n=m.index,o=m.marker;if(d.hasMarkers(m)||d.hasText(m)){var p=Array.isArray(o.opacity)?1:o.opacity;if(b===!1)for(c=0;c<i.length;c++)i[c].dim=0;else for(c=0;c<i.length;c++)f=i[c],g=j.c2p(f.x),h=k.c2p(f.y),b.contains([g,h])?(l.push({curveNumber:n,pointNumber:c,x:f.x,y:f.y}),f.dim=0):f.dim=1;return i[0].node3.selectAll("path.point").style("opacity",function(a){return((a.mo+1||p+1)-1)*(a.dim?e:1)}),i[0].node3.selectAll("text").style("opacity",function(a){return a.dim?e:1}),l}}},{"./subtypes":1201}],1201:[function(a,b,c){"use strict";b.exports={hasLines:function(a){return a.visible&&a.mode&&a.mode.indexOf("lines")!==-1},hasMarkers:function(a){return a.visible&&a.mode&&a.mode.indexOf("markers")!==-1},hasText:function(a){return a.visible&&a.mode&&a.mode.indexOf("text")!==-1},isBubble:function(a){return"object"==typeof a.marker&&Array.isArray(a.marker.size)}}},{}],1202:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d,e=c("x"),f=c("y");if(e)f?(d=Math.min(e.length,f.length),d<e.length&&(b.x=e.slice(0,d)),d<f.length&&(b.y=f.slice(0,d))):(d=e.length,c("y0"),c("dy"));else{if(!f)return 0;d=b.y.length,c("x0"),c("dx")}return d}},{}],1203:[function(a,b,c){"use strict";function d(a){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var e=a("../scatter/attributes"),f=a("../../constants/gl_markers.json"),g=a("../../lib/extend").extendFlat,h=e.line,i=e.marker,j=i.line;b.exports={x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},text:g({},e.text,{}),mode:g({},e.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:d("x"),y:d("y"),z:d("z")},line:{color:h.color,width:h.width,dash:h.dash},marker:{color:i.color,symbol:{valType:"enumerated",values:Object.keys(f),dflt:"circle",arrayOk:!0},size:g({},i.size,{dflt:8}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:g({},i.opacity,{arrayOk:!1}),colorscale:i.colorscale,cauto:i.cauto,cmax:i.cmax,cmin:i.cmin,autocolorscale:i.autocolorscale,reversescale:i.reversescale,showscale:i.showscale,line:{color:j.color,width:g({},j.width,{arrayOk:!1}),colorscale:j.colorscale,cauto:j.cauto,cmax:j.cmax,cmin:j.cmin,autocolorscale:j.autocolorscale,reversescale:j.reversescale}},textposition:g({},e.textposition,{dflt:"top center"}),textfont:e.textfont,_nestedModules:{error_x:"ErrorBars",error_y:"ErrorBars",error_z:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../constants/gl_markers.json":1042,"../../lib/extend":1049,"../scatter/attributes":1197}],1204:[function(a,b,c){"use strict";function d(a,b,c){if(!b||!b.visible)return null;for(var d=g(b),e=new Array(a.length),f=0;f<a.length;f++){var h=d(+a[f],f);e[f]=[-h[0]*c,h[1]*c]}return e}function e(a){for(var b=0;b<a.length;b++)if(a[b])return a[b].length;return 0}function f(a,b){var c=[d(a.x,a.error_x,b[0]),d(a.y,a.error_y,b[1]),d(a.z,a.error_z,b[2])],f=e(c);if(0===f)return null;for(var g=new Array(f),h=0;h<f;h++){for(var i=[[0,0,0],[0,0,0]],j=0;j<3;j++)if(c[j])for(var k=0;k<2;k++)i[k][j]=c[j][h][k];g[h]=i}return g}var g=a("../../components/errorbars/compute_error");b.exports=f},{"../../components/errorbars/compute_error":1027}],1205:[function(a,b,c){"use strict";function d(a,b){this.scene=a,this.uid=b,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}function e(a,b,c){var d,e=(c+1)%3,f=(c+2)%3,g=[],h=[];for(d=0;d<a.length;++d){var i=a[d];!isNaN(i[e])&&isFinite(i[e])&&!isNaN(i[f])&&isFinite(i[f])&&(g.push([i[e],i[f]]),h.push(d))}var j=s(g);for(d=0;d<j.length;++d)for(var k=j[d],l=0;l<k.length;++l)k[l]=h[k[l]];return{positions:a,cells:j,meshColor:b}}function f(a){for(var b=[0,0,0],c=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0],e=0;e<3;e++){var f=a[e];f&&f.copy_zstyle!==!1&&(f=a[2]),f&&(b[e]=f.width/2,c[e]=t(f.color),d=f.thickness)}return{capSize:b,color:c,lineWidth:d}}function g(a){var b=[0,0];return Array.isArray(a)?[0,-1]:(a.indexOf("bottom")>=0&&(b[1]+=1),a.indexOf("top")>=0&&(b[1]-=1),a.indexOf("left")>=0&&(b[0]-=1),a.indexOf("right")>=0&&(b[0]+=1),b)}function h(a,b){return b(4*a)}function i(a){return w[a]}function j(a,b,c,d,e){var f=null;if(Array.isArray(a)){f=[];for(var g=0;g<b;g++)void 0===a[g]?f[g]=d:f[g]=c(a[g],e)}else f=c(a,n.Lib.identity);return f}function k(a,b){var c,d,e,k,l,m,o=[],p=a.fullSceneLayout,q=a.dataScale,r=p.xaxis,s=p.yaxis,v=p.zaxis,w=b.marker,y=b.line,z=b.x||[],A=b.y||[],B=b.z||[],C=z.length;for(d=0;d<C;d++)e=r.d2l(z[d])*q[0],k=s.d2l(A[d])*q[1],l=v.d2l(B[d])*q[2],o[d]=[e,k,l];if(Array.isArray(b.text))m=b.text;else if(void 0!==b.text)for(m=new Array(C),d=0;d<C;d++)m[d]=b.text;if(c={position:o,mode:b.mode,text:m},"line"in b&&(c.lineColor=t(y.color),c.lineWidth=y.width,c.lineDashes=y.dash),"marker"in b){var D=n.Scatter.getBubbleSizeFn(b);c.scatterColor=u(w,1,C),c.scatterSize=j(w.size,C,h,20,D),c.scatterMarker=j(w.symbol,C,i,""),c.scatterLineWidth=w.line.width,c.scatterLineColor=u(w.line,1,C),c.scatterAngle=0}"textposition"in b&&(c.textOffset=g(b.textposition),c.textColor=u(b.textfont,1,C),c.textSize=j(b.textfont.size,C,n.Lib.identity,12),c.textFont=b.textfont.family,c.textAngle=0);var E=["x","y","z"];for(c.project=[!1,!1,!1],c.projectScale=[1,1,1],c.projectOpacity=[1,1,1],d=0;d<3;++d){var F=b.projection[E[d]];(c.project[d]=F.show)&&(c.projectOpacity[d]=F.opacity,c.projectScale[d]=F.scale)}c.errorBounds=x(b,q);var G=f([b.error_x,b.error_y,b.error_z]);return c.errorColor=G.color,c.errorLineWidth=G.lineWidth,c.errorCapSize=G.capSize,c.delaunayAxis=b.surfaceaxis,c.delaunayColor=t(b.surfacecolor),c}function l(a){if(Array.isArray(a)){var b=a[0];return Array.isArray(b)&&(a=b),"rgb("+a.slice(0,3).map(function(a){return Math.round(255*a)})+")"}return null}function m(a,b){var c=new d(a,b.uid);return c.update(b),c}var n=a("../../plotly"),o=a("gl-line3d"),p=a("gl-scatter3d"),q=a("gl-error3d"),r=a("gl-mesh3d"),s=a("delaunay-triangulate"),t=a("../../lib/str2rgbarray"),u=a("../../lib/gl_format_color"),v=a("../../constants/gl3d_dashes.json"),w=a("../../constants/gl_markers.json"),x=a("./calc_errors"),y=d.prototype;y.handlePick=function(a){if(a.object&&(a.object===this.linePlot||a.object===this.delaunayMesh||a.object===this.textMarkers||a.object===this.scatterPlot)){a.object.highlight&&a.object.highlight(null),this.scatterPlot&&(a.object=this.scatterPlot,this.scatterPlot.highlight(a.data)),this.textLabels&&void 0!==this.textLabels[a.data.index]?a.textLabel=this.textLabels[a.data.index]:a.textLabel="";var b=a.data.index;return a.traceCoordinate=[this.data.x[b],this.data.y[b],this.data.z[b]],!0}},y.update=function(a){var b,c,d,f,g=this.scene.glplot.gl,h=v.solid;this.data=a;var i=k(this.scene,a);"mode"in i&&(this.mode=i.mode),"lineDashes"in i&&i.lineDashes in v&&(h=v[i.lineDashes]),this.color=l(i.scatterColor)||l(i.lineColor),this.dataPoints=i.position,b={gl:g,position:i.position,color:i.lineColor,lineWidth:i.lineWidth||1,dashes:h[0],dashScale:h[1],opacity:a.opacity},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(b):(this.linePlot=o(b),this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var j=a.opacity;if(a.marker&&a.marker.opacity&&(j*=a.marker.opacity),c={gl:g,position:i.position,color:i.scatterColor,size:i.scatterSize,glyph:i.scatterMarker,opacity:j,orthographic:!0,lineWidth:i.scatterLineWidth,lineColor:i.scatterLineColor,project:i.project,projectScale:i.projectScale,projectOpacity:i.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(c):(this.scatterPlot=p(c),this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),f={gl:g,position:i.position,glyph:i.text,color:i.textColor,size:i.textSize,angle:i.textAngle,alignment:i.textOffset,font:i.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:a.opacity},this.textLabels=i.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(f):(this.textMarkers=p(f),this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),d={gl:g,position:i.position,color:i.errorColor,error:i.errorBounds,lineWidth:i.errorLineWidth,capSize:i.errorCapSize,opacity:a.opacity},this.errorBars?i.errorBounds?this.errorBars.update(d):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):i.errorBounds&&(this.errorBars=q(d),this.scene.glplot.add(this.errorBars)),i.delaunayAxis>=0){var m=e(i.position,i.delaunayColor,i.delaunayAxis);this.delaunayMesh?this.delaunayMesh.update(m):(m.gl=g,this.delaunayMesh=r(m),this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},y.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.textMarkers),this.delaunayMesh.dispose())},b.exports=m},{"../../constants/gl3d_dashes.json":1041,"../../constants/gl_markers.json":1042,"../../lib/gl_format_color":1051,"../../lib/str2rgbarray":1063,"../../plotly":1070,"./calc_errors":1204,"delaunay-triangulate":70,"gl-error3d":103,"gl-line3d":169,"gl-mesh3d":227,"gl-scatter3d":866}],1206:[function(a,b,c){"use strict";function d(a,b,c){var d=0,e=c("x"),f=c("y"),g=c("z");return e&&f&&g&&(d=Math.min(e.length,f.length,g.length),d<e.length&&(b.x=e.slice(0,d)),d<f.length&&(b.y=f.slice(0,d)),d<g.length&&(b.z=g.slice(0,d))),d}var e=a("../../plotly"),f=a("./");b.exports=function(a,b,c,g){function h(c,d){return e.Lib.coerce(a,b,f.attributes,c,d)}var i=e.Scatter,j=d(a,b,h);if(!j)return void(b.visible=!1);h("text"),h("mode"),i.hasLines(b)&&i.lineDefaults(a,b,c,h),i.hasMarkers(b)&&i.markerDefaults(a,b,c,g,h),i.hasText(b)&&i.textDefaults(a,b,g,h);var k=(b.line||{}).color,l=(b.marker||{}).color;h("surfaceaxis")>=0&&h("surfacecolor",k||l);for(var m=["x","y","z"],n=0;n<3;++n){var o="projection."+m[n];h(o+".show")&&(h(o+".opacity"),h(o+".scale"))}e.ErrorBars.supplyDefaults(a,b,c,{axis:"z"}),e.ErrorBars.supplyDefaults(a,b,c,{axis:"y",inherit:"z"}),e.ErrorBars.supplyDefaults(a,b,c,{axis:"x",inherit:"z"})}},{"../../plotly":1070,"./":1207}],1207:[function(a,b,c){"use strict";var d=a("../../plotly"),e=b.exports={};d.Plots.register(e,"scatter3d",["gl3d","symbols","markerColorscale","showLegend"],{}),e.attributes=a("./attributes"),e.markerSymbols=a("../../constants/gl_markers.json"),e.supplyDefaults=a("./defaults"),e.colorbar=d.Scatter.colorbar,e.calc=function(a,b){var c=[{x:!1,y:!1,trace:b,t:{}}];return d.Scatter.arraysToCalcdata(c),d.Scatter.calcMarkerColorscales(b),c}},{"../../constants/gl_markers.json":1042,"../../plotly":1070,"./attributes":1203,"./defaults":1206}],1208:[function(a,b,c){var d=a("../scatter/attributes"),e=a("../../plots/attributes"),f=a("../../lib/extend").extendFlat,g=d.marker,h=d.line,i=g.line;b.exports={lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],dflt:"ISO-3"},mode:f({},d.mode,{dflt:"markers"}),text:f({},d.text,{}),line:{color:h.color,width:h.width,dash:h.dash},marker:{symbol:g.symbol,opacity:g.opacity,size:g.size,sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,color:g.color,colorscale:g.colorscale,cauto:g.cauto,cmax:g.cmax,cmin:g.cmin,autocolorscale:g.autocolorscale,reversescale:g.reversescale,showscale:g.showscale,line:{color:i.color,width:i.width,colorscale:i.colorscale,cauto:i.cauto,cmax:i.cmax,cmin:i.cmin,autocolorscale:i.autocolorscale,reversescale:i.reversescale}},textfont:d.textfont,textposition:d.textposition,hoverinfo:f({},e.hoverinfo,{flags:["lon","lat","location","text","name"]}),_nestedModules:{"marker.colorbar":"Colorbar"}}},{"../../lib/extend":1049,"../../plots/attributes":1071,"../scatter/attributes":1197}],1209:[function(a,b,c){"use strict";function d(a,b,c){var d,e,f=0,g=c("locations");return g?(c("locationmode"),f=g.length):(d=c("lon")||[],e=c("lat")||[],f=Math.min(d.length,e.length),f<d.length&&(b.lon=d.slice(0,f)),f<e.length&&(b.lat=e.slice(0,f)),f)}var e=a("../../plotly"),f=a("./");b.exports=function(a,b,c,g){function h(c,d){return e.Lib.coerce(a,b,f.attributes,c,d);
}var i=e.Scatter,j=d(a,b,h);return j?(h("text"),h("mode"),i.hasLines(b)&&i.lineDefaults(a,b,c,h),i.hasMarkers(b)&&i.markerDefaults(a,b,c,g,h),i.hasText(b)&&i.textDefaults(a,b,g,h),void h("hoverinfo",1===g._dataLength?"lon+lat+location+text":void 0)):void(b.visible=!1)}},{"../../plotly":1070,"./":1210}],1210:[function(a,b,c){"use strict";var d=a("../../plotly"),e=b.exports={};d.Plots.register(e,"scattergeo",["geo","symbols","markerColorscale","showLegend"],{}),e.attributes=a("./attributes"),e.supplyDefaults=a("./defaults"),e.colorbar=d.Scatter.colorbar,e.calc=function(a,b){d.Scatter.calcMarkerColorscales(b)}},{"../../plotly":1070,"./attributes":1208,"./defaults":1209}],1211:[function(a,b,c){"use strict";function d(a,b,c){function d(a,d){k(a,b,d,c)}var e=a.marker;if(d(a.text,"tx"),d(a.textposition,"tp"),a.textfont&&(d(a.textfont.size,"ts"),d(a.textfont.color,"tc"),d(a.textfont.family,"tf")),e&&e.line){var f=e.line;d(e.opacity,"mo"),d(e.symbol,"mx"),d(e.color,"mc"),d(e.size,"ms"),d(f.color,"mlc"),d(f.width,"mlw")}}function e(a){for(var b=a.lon.length,c=new Array(b),d=0;d<b;d++)c[d]=[a.lon[d],a.lat[d]];return{type:"LineString",coordinates:c,trace:a}}function f(a,b){function c(b){var c=a.mockAxis;return g.Axes.tickText(c,c.c2l(b),"hover").text+""}var d=b.hoverinfo;if("none"===d)return function(a){delete a.textLabel};var e="all"===d?g.ScatterGeo.attributes.hoverinfo.flags:d.split("+"),f=e.indexOf("location")!==-1&&Array.isArray(b.locations),h=e.indexOf("lon")!==-1,i=e.indexOf("lat")!==-1,j=e.indexOf("text")!==-1;return function(a){var d=[];f?d.push(a.location):h&&i?d.push("("+c(a.lon)+", "+c(a.lat)+")"):h?d.push("lon: "+c(a.lon)):i&&d.push("lat: "+c(a.lat)),j&&d.push(a.tx||b.text),a.textLabel=d.join("<br>")}}var g=a("../../plotly"),h=a("d3"),i=a("../../lib/topojson_utils").getTopojsonFeatures,j=a("../../lib/geo_location_utils").locationToFeature,k=a("../../lib/array_to_calc_item"),l=b.exports={};l.calcGeoJSON=function(a,b){var c,e,f,g,h,k,l=[],m=Array.isArray(a.locations);m?(h=a.locations,c=h.length,e=i(a,b),f=function(a,b){var c=j(a.locationmode,h[b],e);return void 0!==c?c.properties.ct:void 0}):(c=a.lon.length,f=function(a,b){return[a.lon[b],a.lat[b]]});for(var n=0;n<c;n++)g=f(a,n),g&&(k={lon:g[0],lat:g[1],location:m?a.locations[n]:null},d(a,k,n),l.push(k));return l.length>0&&(l[0].trace=a),l},l.plot=function(a,b){var c=a.framework.select("g.scattergeolayer"),d=g.Scatter,i=a.topojson;c.selectAll("*").remove();var j=c.selectAll("g.trace.scatter").data(b);j.enter().append("g").attr("class","trace scattergeo"),j.each(function(a){d.hasLines(a)&&a.visible===!0&&h.select(this).append("path").datum(e(a)).attr("class","js-line")}),j.append("g").attr("class","points").each(function(b){function c(c){if(a.showHover){var d=a.projection([c.lon,c.lat]);n(c),g.Fx.loneHover({x:d[0],y:d[1],name:p?b.name:void 0,text:c.textLabel,color:c.mc||(b.marker||{}).color},{container:a.hoverContainer.node()})}}var e=h.select(this),j=d.hasMarkers(b),k=d.hasText(b);if(!j&&!k||b.visible!==!0)return void e.remove();var m=l.calcGeoJSON(b,i),n=f(a,b),o=b.hoverinfo,p="all"===o||o.indexOf("name")!==-1;j&&e.selectAll("path.point").data(m).enter().append("path").attr("class","point").on("mouseover",c).on("mouseout",function(){g.Fx.loneUnhover(a.hoverContainer)}).on("mousedown",function(){g.Fx.loneUnhover(a.hoverContainer)}).on("mouseup",c),k&&e.selectAll("g").data(m).enter().append("g").append("text")}),l.style(a)},l.style=function(a){var b=a.framework.selectAll("g.trace.scattergeo");b.style("opacity",function(a){return a.opacity}),b.selectAll("g.points").each(function(a){h.select(this).selectAll("path.point").call(g.Drawing.pointStyle,a),h.select(this).selectAll("text").call(g.Drawing.textPointStyle,a)}),b.selectAll("path.js-line").style("fill","none").each(function(a){var b=a.trace,c=b.line||{};h.select(this).call(g.Color.stroke,c.color).call(g.Drawing.dashLine,c.dash||"",c.width||0)})}},{"../../lib/array_to_calc_item":1045,"../../lib/geo_location_utils":1050,"../../lib/topojson_utils":1065,"../../plotly":1070,d3:64}],1212:[function(a,b,c){var d=a("../scatter/attributes"),e=a("../../constants/gl2d_dashes.json"),f=a("../../constants/gl_markers.json"),g=a("../../lib/extend").extendFlat,h=d.line,i=d.marker,j=i.line;b.exports={x:d.x,x0:d.x0,dx:d.dx,y:d.y,y0:d.y0,dy:d.dy,text:g({},d.text,{}),mode:{valType:"flaglist",flags:["lines","markers"],extras:["none"]},line:{color:h.color,width:h.width,dash:{valType:"enumerated",values:Object.keys(e),dflt:"solid"}},marker:{color:i.color,symbol:{valType:"enumerated",values:Object.keys(f),dflt:"circle",arrayOk:!0},size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorscale:i.colorscale,cauto:i.cauto,cmax:i.cmax,cmin:i.cmin,autocolorscale:i.autocolorscale,reversescale:i.reversescale,showscale:i.showscale,line:{color:j.color,width:j.width,colorscale:j.colorscale,cauto:j.cauto,cmax:j.cmax,cmin:j.cmin,autocolorscale:j.autocolorscale,reversescale:j.reversescale}},fill:g({},d.fill,{values:["none","tozeroy","tozerox"]}),fillcolor:d.fillcolor,_nestedModules:{error_x:"ErrorBars",error_y:"ErrorBars","marker.colorbar":"Colorbar"}}},{"../../constants/gl2d_dashes.json":1040,"../../constants/gl_markers.json":1042,"../../lib/extend":1049,"../scatter/attributes":1197}],1213:[function(a,b,c){"use strict";function d(a,b){this.scene=a,this.uid=b,this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=[],this.bounds=[0,0,0,0],this.hasLines=!1,this.lineOptions={positions:new Float32Array,color:[0,0,0,1],width:1,fill:[!1,!1,!1,!1],fillColor:[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],dashes:[1]},this.line=o(a.glplot,this.lineOptions),this.line._trace=this,this.hasErrorX=!1,this.errorXOptions={positions:new Float32Array,errors:new Float32Array,lineWidth:1,capSize:0,color:[0,0,0,1]},this.errorX=p(a.glplot,this.errorXOptions),this.errorX._trace=this,this.hasErrorY=!1,this.errorYOptions={positions:new Float32Array,errors:new Float32Array,lineWidth:1,capSize:0,color:[0,0,0,1]},this.errorY=p(a.glplot,this.errorYOptions),this.errorY._trace=this,this.hasMarkers=!1,this.scatterOptions={positions:new Float32Array,sizes:[],colors:[],glyphs:[],borderWidths:[],borderColors:[],size:12,color:[0,0,0,1],borderSize:1,borderColor:[0,0,0,1]},this.scatter=m(a.glplot,this.scatterOptions),this.scatter._trace=this,this.fancyScatter=n(a.glplot,this.scatterOptions),this.fancyScatter._trace=this}function e(a,b,c){return Array.isArray(b)||(b=[b]),f(a,b,c)}function f(a,b,c){for(var d=new Array(c),e=b[0],f=0;f<c;++f)d[f]=a(f>=b.length?e:b[f]);return d}function g(a,b,c){return i(y(a,c),x(b,c),c)}function h(a,b,c,d){var e=s(a,b,d);return e=Array.isArray(e[0])?e:f(l.Lib.identity,[e],d),i(e,x(c,d),d)}function i(a,b,c){for(var d=new Array(4*c),e=0;e<c;++e){for(var f=0;f<3;++f)d[4*e+f]=a[e][f];d[4*e+3]=a[e][f]*b[e]}return d}function j(a,b){if(void 0===Float32Array.slice){for(var c=new Float32Array(b),d=0;d<b;d++)c[d]=a[d];return c}return a.slice(0,b)}function k(a,b){var c=new d(a,b.uid);return c.update(b),c}var l=a("../../plotly"),m=a("gl-scatter2d"),n=a("gl-scatter2d-fancy"),o=a("gl-line2d"),p=a("gl-error2d"),q=a("fast-isnumeric"),r=a("../../lib/str2rgbarray"),s=a("../../lib/gl_format_color"),t=a("../../constants/gl_markers.json"),u=a("../../constants/gl2d_dashes.json"),v=["xaxis","yaxis"],w=d.prototype;w.handlePick=function(a){var b=this.idToIndex[a.pointId];return{trace:this,dataCoord:a.dataCoord,traceCoord:[this.xData[b],this.yData[b]],textLabel:Array.isArray(this.textLabels)?this.textLabels[b]:this.textLabels,color:Array.isArray(this.color)?this.color[b]:this.color,name:this.name,hoverinfo:this.hoverinfo}},w.isFancy=function(a){if("linear"!==this.scene.xaxis.type)return!0;if("linear"!==this.scene.yaxis.type)return!0;if(!a.x||!a.y)return!0;var b=a.marker||{};if(Array.isArray(b.symbol)||"circle"!==b.symbol||Array.isArray(b.size)||Array.isArray(b.line.width)||Array.isArray(b.opacity))return!0;var c=b.color;if(Array.isArray(c))return!0;var d=Array.isArray(b.line.color);return!!Array.isArray(d)||(!!this.hasErrorX||!!this.hasErrorY)};var x=e.bind(null,function(a){return+a}),y=e.bind(null,r),z=e.bind(null,function(a){return t[a]||""});w.update=function(a){a.visible!==!0?(this.hasLines=!1,this.hasErrorX=!1,this.hasErrorY=!1,this.hasMarkers=!1):(this.hasLines=l.Scatter.hasLines(a),this.hasErrorX=a.error_x.visible===!0,this.hasErrorY=a.error_y.visible===!0,this.hasMarkers=l.Scatter.hasMarkers(a)),this.textLabels=a.text,this.name=a.name,this.hoverinfo=a.hoverinfo,this.bounds=[1/0,1/0,-(1/0),-(1/0)],this.isFancy(a)?this.updateFancy(a):this.updateFast(a),this.color=l.Scatter.getTraceColor(a,{})},w.updateFast=function(a){for(var b,c,d=this.xData=a.x,e=this.yData=a.y,f=d.length,g=new Array(f),h=new Float32Array(2*f),i=this.bounds,k=0,l=0,m=0;m<f;++m)b=d[m],c=e[m],q(b)&&q(c)&&(g[k++]=m,h[l++]=b,h[l++]=c,i[0]=Math.min(i[0],b),i[1]=Math.min(i[1],c),i[2]=Math.max(i[2],b),i[3]=Math.max(i[3],c));h=j(h,l),this.idToIndex=g,this.updateLines(a,h),this.updateError("X",a),this.updateError("Y",a);var n;if(this.hasMarkers){this.scatterOptions.positions=h;var o=r(a.marker.color),p=r(a.marker.line.color),s=a.opacity*a.marker.opacity;o[3]*=s,this.scatterOptions.color=o,p[3]*=s,this.scatterOptions.borderColor=p,n=a.marker.size,this.scatterOptions.size=n,this.scatterOptions.borderSize=a.marker.line.width,this.scatter.update(this.scatterOptions)}else this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[],this.scatter.update(this.scatterOptions);this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[],this.fancyScatter.update(this.scatterOptions),this.expandAxesFast(i,n)},w.updateFancy=function(a){var b,c,d,f,g,i,k,m,n=this.scene,o=n.xaxis,p=n.yaxis,q=this.bounds,r=this.xData=o.makeCalcdata(a,"x"),s=this.yData=p.makeCalcdata(a,"y"),t=l.ErrorBars.calcFromTrace(a,n.fullLayout),u=r.length,v=new Array(u),w=new Float32Array(2*u),y=new Float32Array(4*u),A=new Float32Array(4*u),B=0,C=0,D=0,E=0,F="log"===o.type?function(a){return o.d2l(a)}:function(a){return a},G="log"===p.type?function(a){return p.d2l(a)}:function(a){return a};for(b=0;b<u;++b)d=F(r[b]),f=G(s[b]),isNaN(d)||isNaN(f)||(v[B++]=b,w[C++]=d,w[C++]=f,g=y[D++]=d-t[b].xs||0,i=y[D++]=t[b].xh-d||0,y[D++]=0,y[D++]=0,A[E++]=0,A[E++]=0,k=A[E++]=f-t[b].ys||0,m=A[E++]=t[b].yh-f||0,q[0]=Math.min(q[0],d-g),q[1]=Math.min(q[1],f-k),q[2]=Math.max(q[2],d+i),q[3]=Math.max(q[3],f+m));w=j(w,C),this.idToIndex=v,this.updateLines(a,w),this.updateError("X",a,w,y),this.updateError("Y",a,w,A);var H;if(this.hasMarkers){this.scatterOptions.positions=w,this.scatterOptions.sizes=new Array(B),this.scatterOptions.glyphs=new Array(B),this.scatterOptions.borderWidths=new Array(B),this.scatterOptions.colors=new Array(4*B),this.scatterOptions.borderColors=new Array(4*B);var I,J=l.Scatter.getBubbleSizeFn(a),K=a.marker,L=K.opacity,M=a.opacity,N=h(K,L,M,u),O=z(K.symbol,u),P=x(K.line.width,u),Q=h(K.line,L,M,u);for(H=e(J,K.size,u),b=0;b<B;++b)for(I=v[b],this.scatterOptions.sizes[b]=4*H[I],this.scatterOptions.glyphs[b]=O[I],this.scatterOptions.borderWidths[b]=.5*P[I],c=0;c<4;++c)this.scatterOptions.colors[4*b+c]=N[4*I+c],this.scatterOptions.borderColors[4*b+c]=Q[4*I+c];this.fancyScatter.update(this.scatterOptions)}else this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[],this.fancyScatter.update(this.scatterOptions);this.scatterOptions.positions=new Float32Array,this.scatterOptions.glyphs=[],this.scatter.update(this.scatterOptions),this.expandAxesFancy(r,s,H)},w.updateLines=function(a,b){if(this.hasLines){this.lineOptions.positions=b;var c=r(a.line.color);this.hasMarkers&&(c[3]*=a.marker.opacity);for(var d=Math.round(.5*this.lineOptions.width),e=(u[a.line.dash]||[1]).slice(),f=0;f<e.length;++f)e[f]*=d;switch(a.fill){case"tozeroy":this.lineOptions.fill=[!1,!0,!1,!1];break;case"tozerox":this.lineOptions.fill=[!0,!1,!1,!1];break;default:this.lineOptions.fill=[!1,!1,!1,!1]}var g=r(a.fillcolor);this.lineOptions.color=c,this.lineOptions.width=2*a.line.width,this.lineOptions.dashes=e,this.lineOptions.fillColor=[g,g,g,g]}else this.lineOptions.positions=new Float32Array;this.line.update(this.lineOptions)},w.updateError=function(a,b,c,d){var e=this["error"+a],f=b["error_"+a.toLowerCase()],h=this["error"+a+"Options"];"x"===a.toLowerCase()&&f.copy_ystyle&&(f=b.error_y),this["hasError"+a]?(h.positions=c,h.errors=d,h.capSize=f.width,h.lineWidth=f.thickness/2,h.color=g(f.color,1,1)):h.positions=new Float32Array,e.update(h)},w.expandAxesFast=function(a,b){for(var c,d,e,f=b||10,g=0;g<2;g++)c=this.scene[v[g]],d=c._min,d||(d=[]),d.push({val:a[g],pad:f}),e=c._max,e||(e=[]),e.push({val:a[g+2],pad:f})},w.expandAxesFancy=function(a,b,c){var d=this.scene,e={padded:!0,ppad:c};l.Axes.expand(d.xaxis,a,e),l.Axes.expand(d.yaxis,b,e)},w.dispose=function(){this.line.dispose(),this.errorX.dispose(),this.errorY.dispose(),this.scatter.dispose(),this.fancyScatter.dispose()},b.exports=k},{"../../constants/gl2d_dashes.json":1040,"../../constants/gl_markers.json":1042,"../../lib/gl_format_color":1051,"../../lib/str2rgbarray":1063,"../../plotly":1070,"fast-isnumeric":72,"gl-error2d":73,"gl-line2d":138,"gl-scatter2d":744,"gl-scatter2d-fancy":711}],1214:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../scatter"),f=a("../scatter/xy_defaults"),g=a("../../components/errorbars/defaults"),h=a("./attributes");b.exports=function(a,b,c,i){function j(c,e){return d.coerce(a,b,h,c,e)}var k=f(a,b,j);return k?(j("text"),j("mode",k<e.PTS_LINESONLY?"lines+markers":"lines"),e.hasLines(b)&&e.lineDefaults(a,b,c,j),e.hasMarkers(b)&&e.markerDefaults(a,b,c,i,j),j("fill"),"none"!==b.fill&&e.fillColorDefaults(a,b,c,j),g(a,b,c,{axis:"y"}),void g(a,b,c,{axis:"x",inherit:"y"})):void(b.visible=!1)}},{"../../components/errorbars/defaults":1028,"../../lib":1053,"../scatter":1199,"../scatter/xy_defaults":1202,"./attributes":1212}],1215:[function(a,b,c){"use strict";var d=a("../../plotly"),e=b.exports={};d.Plots.register(e,"scattergl",["gl2d","symbols","errorBarsOK","markerColorscale","showLegend"],{}),e.attributes=a("./attributes"),e.supplyDefaults=a("./defaults"),e.colorbar=d.Scatter.colorbar,e.calc=d.Scatter3D.calc},{"../../plotly":1070,"./attributes":1212,"./defaults":1214}],1216:[function(a,b,c){"use strict";function d(a){return{valType:"boolean",dflt:!1}}function e(a){return{show:{valType:"boolean",dflt:!1},project:{x:d("x"),y:d("y"),z:d("z")},color:{valType:"color",dflt:"#000"},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!1},highlightColor:{valType:"color",dflt:"#000"},highlightWidth:{valType:"number",min:1,max:16,dflt:2}}}var f=a("../../components/colorscale/attributes"),g=a("../../lib/extend").extendFlat;b.exports={z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"data_array"},zauto:f.zauto,zmin:f.zmin,zmax:f.zmax,colorscale:f.colorscale,autocolorscale:g({},f.autocolorscale,{dflt:!1}),reversescale:f.reversescale,showscale:f.showscale,contours:{x:e("x"),y:e("y"),z:e("z")},hidesurface:{valType:"boolean",dflt:!1},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_nestedModules:{colorbar:"Colorbar"}}},{"../../components/colorscale/attributes":1011,"../../lib/extend":1049}],1217:[function(a,b,c){"use strict";var d=a("../../components/colorscale/calc");b.exports=function(a,b){d(b,b.z,"","z")}},{"../../components/colorscale/calc":1012}],1218:[function(a,b,c){"use strict";function d(a,b,c){this.scene=a,this.uid=c,this.surface=b,this.data=null,this.showContour=[!1,!1,!1],this.dataScale=1}function e(a,b){return void 0===b&&(b=1),a.map(function(a){var c=a[0],d=n(a[1]),e=d.toRgb();return{index:c,rgb:[e.r,e.g,e.b,b]}})}function f(a){var b=a.shape,c=[b[0]+2,b[1]+2],d=j(new Float32Array(c[0]*c[1]),c);return m.assign(d.lo(1,1).hi(b[0],b[1]),a),m.assign(d.lo(1).hi(b[0],1),a.hi(b[0],1)),m.assign(d.lo(1,c[1]-1).hi(b[0],1),a.lo(0,b[1]-1).hi(b[0],1)),m.assign(d.lo(0,1).hi(1,b[1]),a.hi(1)),m.assign(d.lo(c[0]-1,1).hi(1,b[1]),a.lo(b[0]-1)),d.set(0,0,a.get(0,0)),d.set(0,c[1]-1,a.get(0,b[1]-1)),d.set(c[0]-1,0,a.get(b[0]-1,0)),d.set(c[0]-1,c[1]-1,a.get(b[0]-1,b[1]-1)),d}function g(a){var b=Math.max(a[0].shape[0],a[0].shape[1]);if(b<p){for(var c=p/b,d=[0|Math.floor(a[0].shape[0]*c+1),0|Math.floor(a[0].shape[1]*c+1)],e=d[0]*d[1],g=0;g<3;++g){var h=f(a[g]),i=j(new Float32Array(e),d);k(i,h,[c,0,0,0,c,0,0,0,1]),a[g]=i}return c}return 1}function h(a,b){var c=a.glplot.gl,e=i({gl:c}),f=new d(a,e,b.uid);return f.update(b),a.glplot.add(e),f}var i=a("gl-surface3d"),j=a("ndarray"),k=a("ndarray-homography"),l=a("ndarray-fill"),m=a("ndarray-ops"),n=a("tinycolor2"),o=a("../../lib/str2rgbarray"),p=128,q=d.prototype;q.handlePick=function(a){if(a.object===this.surface){var b=[Math.min(0|Math.round(a.data.index[0]/this.dataScale-1),this.data.z[0].length-1),Math.min(0|Math.round(a.data.index[1]/this.dataScale-1),this.data.z.length-1)],c=[0,0,0];Array.isArray(this.data.x[0])?c[0]=this.data.x[b[1]][b[0]]:c[0]=this.data.x[b[0]],Array.isArray(this.data.y[0])?c[1]=this.data.y[b[1]][b[0]]:c[1]=this.data.y[b[1]],c[2]=this.data.z[b[1]][b[0]],a.traceCoordinate=c;var d=this.scene.fullSceneLayout;a.dataCoordinate=[d.xaxis.d2l(c[0])*this.scene.dataScale[0],d.yaxis.d2l(c[1])*this.scene.dataScale[1],d.zaxis.d2l(c[2])*this.scene.dataScale[2]];var e=this.data.text;return e&&e[b[1]]&&void 0!==e[b[1]][b[0]]?a.textLabel=e[b[1]][b[0]]:a.textLabel="",a.data.dataCoordinate=a.dataCoordinate.slice(),this.surface.highlight(a.data),this.scene.glplot.spikes.position=a.dataCoordinate,!0}},q.setContourLevels=function(){for(var a=[[],[],[]],b=!1,c=0;c<3;++c)this.showContour[c]&&(b=!0,a[c]=this.scene.contourLevels[c]);b&&this.surface.update({levels:a})},q.update=function(a){var b,c=this.scene,d=c.fullSceneLayout,f=this.surface,h=a.opacity,i=e(a.colorscale,h),k=a.z,m=a.x,n=a.y,p=d.xaxis,q=d.yaxis,r=d.zaxis,s=c.dataScale,t=k[0].length,u=k.length,v=[j(new Float32Array(t*u),[t,u]),j(new Float32Array(t*u),[t,u]),j(new Float32Array(t*u),[t,u])],w=v[0],x=v[1],y=c.contourLevels;this.data=a,l(v[2],function(a,b){return r.d2l(k[b][a])*s[2]}),Array.isArray(m[0])?l(w,function(a,b){return p.d2l(m[b][a])*s[0]}):l(w,function(a){return p.d2l(m[a])*s[0]}),Array.isArray(n[0])?l(x,function(a,b){return q.d2l(n[b][a])*s[1]}):l(x,function(a,b){return q.d2l(n[b])*s[1]}),this.dataScale=g(v);var z={colormap:i,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!a.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:1,colorBounds:[a.zmin*s[2],a.zmax*s[2]]};"opacity"in a&&a.opacity<1&&(z.opacity=.25*a.opacity);var A=[!0,!0,!0],B=[!0,!0,!0],C=["x","y","z"];for(b=0;b<3;++b){var D=a.contours[C[b]];A[b]=D.highlight,B[b]=D.show,z.showContour[b]=D.show||D.highlight,z.showContour[b]&&(z.contourProject[b]=[D.project.x,D.project.y,D.project.z],D.show?(this.showContour[b]=!0,z.levels[b]=y[b],f.highlightColor[b]=z.contourColor[b]=o(D.color),D.usecolormap?f.highlightTint[b]=z.contourTint[b]=0:f.highlightTint[b]=z.contourTint[b]=1,z.contourWidth[b]=D.width):this.showContour[b]=!1,D.highlight&&(z.dynamicColor[b]=o(D.highlightColor),z.dynamicWidth[b]=D.highlightWidth))}z.coords=v,f.update(z),f.highlightEnable=A,f.contourEnable=B,f.visible=a.visible,f.snapToData=!0,"lighting"in a&&(f.ambientLight=a.lighting.ambient,f.diffuseLight=a.lighting.diffuse,f.specularLight=a.lighting.specular,f.roughness=a.lighting.roughness,f.fresnel=a.lighting.fresnel),h&&h<1&&(f.supportsTransparency=!0)},q.dispose=function(){this.glplot.remove(this.surface),this.surface.dispose()},b.exports=h},{"../../lib/str2rgbarray":1063,"gl-surface3d":959,ndarray:987,"ndarray-fill":965,"ndarray-homography":981,"ndarray-ops":982,tinycolor2:998}],1219:[function(a,b,c){"use strict";var d=a("../../lib"),e=a("../../components/colorscale/defaults"),f=a("./attributes");b.exports=function(a,b,c,g){function h(c,e){return d.coerce(a,b,f,c,e)}var i,j,k=h("z");if(!k)return void(b.visible=!1);var l=k[0].length,m=k.length;if(h("x"),h("y"),!Array.isArray(b.x))for(b.x=[],i=0;i<l;++i)b.x[i]=i;if(h("text"),!Array.isArray(b.y))for(b.y=[],i=0;i<m;++i)b.y[i]=i;h("lighting.ambient"),h("lighting.diffuse"),h("lighting.specular"),h("lighting.roughness"),h("lighting.fresnel"),h("hidesurface"),h("opacity"),h("colorscale");var n=["x","y","z"];for(i=0;i<3;++i){var o="contours."+n[i],p=h(o+".show"),q=h(o+".highlight");if(p||q)for(j=0;j<3;++j)h(o+".project."+n[j]);p&&(h(o+".color"),h(o+".width"),h(o+".usecolormap")),q&&(h(o+".highlightColor"),h(o+".highlightWidth"))}e(a,b,g,h,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":1014,"../../lib":1053,"./attributes":1216}],1220:[function(a,b,c){"use strict";var d=a("../../plotly"),e=b.exports={};d.Plots.register(e,"surface",["gl3d","noOpacity"],{}),e.attributes=a("./attributes"),e.supplyDefaults=a("./defaults"),e.colorbar=a("../heatmap/colorbar"),e.calc=a("./calc")},{"../../plotly":1070,"../heatmap/colorbar":1157,"./attributes":1216,"./calc":1217,"./defaults":1219}]},{},[1044])(1044)}),function(){"use strict";angular.module("plotly",[]).directive("plotly",function(a){return{restrict:"E",template:"<div></div>",scope:{data:"=",layout:"=",options:"="},link:function(b,c){c=c[0].children[0];var d=!1,e=function(){d||(d=!0,Plotly.newPlot(c,b.data,b.layout,b.options))};b.$watch(function(){return[b.layout,b.data]},function(){e(),c.layout=b.layout,c.data=b.data,Plotly.redraw(c)},!0);var f=angular.element(a);b.getWindowDimensions=function(){return{h:f.height(),w:f.width()}},b.$watch(b.getWindowDimensions,function(){Plotly.Plots.resize(c)},!0),f.bind("resize",function(){b.$apply()})}}})}(),$(document).ready(function(){function a(a){a!=d&&(d=a)}!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-59246536-4","resourceprojects.org"),ga("send","pageview"),setTimeout(function(){$(".typeahead").typeahead({source:function(a,b){return $(".typeahead").addClass("wait"),$.get("/api/search",{query:a.toString()},function(a){return $(".typeahead").removeClass("wait"),b(a)},"json")},afterSelect:function(a){$(".typeahead").attr("disabled",!0),"country"==a.type?window.location="/"+a.type+"/"+a.iso2:"companygroup"==a.type?window.location="/group/"+a._id:"commodity"==a.type?window.location="/commodity/"+a.commodity_id:window.location="/"+a.type+"/"+a._id},displayText:function(a){return a.name}})},400);var b=$("table > tbody > tr:first"),c=$("table > tbody");for(i=0;i<100;i++)c.append(b.clone());var d="";d=window.location.href,setInterval(function(){$(".table-fixed-header").fixedHeader(),a(window.location.href)},1e3)}),function(a){a(document).on("click",".dropdown",function(a){a.stopPropagation()}),a.fn.fixedHeader=function(b){var c={topOffset:50};return b&&a.extend(c,b),this.each(function(){function b(){if(d.is(":visible")){a("thead.header-copy").size()&&a("thead.header-copy").width(a("thead.header").width());var b=e.scrollTop(),i=f.length&&f.offset().top-c.topOffset;g||h===i||(h=i),b>=h&&!g?g=1:b<=h&&g&&(g=0),g?a("thead.header-copy",d).offset({}).removeClass("hide"):a("thead.header-copy",d).addClass("hide")}}var d=a(this),e=a(window),f=a("thead.header",d),g=0,h=f.length&&f.offset().top-c.topOffset;e.on("scroll",b),f.on("click",function(){g||setTimeout(function(){e.scrollTop(e.scrollTop()-47)},10)}),a(".header-copy").removeClass("header").addClass("header-copy table-header-fixed").appendTo(d);var i=f.width();d.find("thead.header-copy").width(i),d.find("thead.header > tr:first > th").each(function(b,c){var e=a(c).width();d.find("thead.header-copy> tr > th:eq("+b+")").width(e)}),f.css({margin:"0 auto",width:d.width()}),b()})}}(jQuery),L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{"false":"View Fullscreen","true":"Exit Fullscreen"}},onAdd:function(a){var b=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",b),this.link.href="#",this._map=a,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),b},_click:function(a){L.DomEvent.stopPropagation(a),L.DomEvent.preventDefault(a),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(a){var b=this.getContainer();this.isFullscreen()?a&&a.pseudoFullscreen?this._disablePseudoFullscreen(b):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(b):a&&a.pseudoFullscreen?this._enablePseudoFullscreen(b):b.requestFullscreen?b.requestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):b.msRequestFullscreen?b.msRequestFullscreen():this._enablePseudoFullscreen(b)},_enablePseudoFullscreen:function(a){L.DomUtil.addClass(a,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.invalidateSize(),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(a){L.DomUtil.removeClass(a,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.invalidateSize(),this.fire("fullscreenchange")},_setFullscreen:function(a){this._isFullscreen=a;var b=this.getContainer();a?L.DomUtil.addClass(b,"leaflet-fullscreen-on"):L.DomUtil.removeClass(b,"leaflet-fullscreen-on")},_onFullscreenChange:function(a){var b=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;b!==this.getContainer()||this._isFullscreen?b!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl));var a;if("onfullscreenchange"in document?a="fullscreenchange":"onmozfullscreenchange"in document?a="mozfullscreenchange":"onwebkitfullscreenchange"in document?a="webkitfullscreenchange":"onmsfullscreenchange"in document&&(a="MSFullscreenChange"),a){var b=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,a,b)}),this.on("unload",function(){L.DomEvent.off(document,a,b)})}}),L.control.fullscreen=function(a){return new L.Control.Fullscreen(a)};